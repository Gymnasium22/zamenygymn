function dU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(n,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=r(s);fetch(s.href,A)}})();function Rb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Db={exports:{}},cf={},Pb={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hc=Symbol.for("react.element"),hU=Symbol.for("react.portal"),fU=Symbol.for("react.fragment"),gU=Symbol.for("react.strict_mode"),pU=Symbol.for("react.profiler"),mU=Symbol.for("react.provider"),wU=Symbol.for("react.context"),yU=Symbol.for("react.forward_ref"),vU=Symbol.for("react.suspense"),xU=Symbol.for("react.memo"),BU=Symbol.for("react.lazy"),_v=Symbol.iterator;function CU(t){return t===null||typeof t!="object"?null:(t=_v&&t[_v]||t["@@iterator"],typeof t=="function"?t:null)}var Lb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jb=Object.assign,Mb={};function Ta(t,e,r){this.props=t,this.context=e,this.refs=Mb,this.updater=r||Lb}Ta.prototype.isReactComponent={};Ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ob(){}Ob.prototype=Ta.prototype;function F0(t,e,r){this.props=t,this.context=e,this.refs=Mb,this.updater=r||Lb}var S0=F0.prototype=new Ob;S0.constructor=F0;jb(S0,Ta.prototype);S0.isPureReactComponent=!0;var Iv=Array.isArray,Hb=Object.prototype.hasOwnProperty,U0={current:null},Vb={key:!0,ref:!0,__self:!0,__source:!0};function Kb(t,e,r){var n,s={},A=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)Hb.call(e,n)&&!Vb.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];s.children=o}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Hc,type:t,key:A,ref:i,props:s,_owner:U0.current}}function bU(t,e){return{$$typeof:Hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Q0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hc}function _U(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ev=/\/+/g;function bg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_U(""+t.key):e.toString(36)}function bd(t,e,r,n,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Hc:case hU:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+bg(i,0):n,Iv(s)?(r="",t!=null&&(r=t.replace(Ev,"$&/")+"/"),bd(s,e,r,"",function(c){return c})):s!=null&&(Q0(s)&&(s=bU(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ev,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Iv(t))for(var a=0;a<t.length;a++){A=t[a];var o=n+bg(A,a);i+=bd(A,e,r,o,s)}else if(o=CU(t),typeof o=="function")for(t=o.call(t),a=0;!(A=t.next()).done;)A=A.value,o=n+bg(A,a++),i+=bd(A,e,r,o,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Tu(t,e,r){if(t==null)return t;var n=[],s=0;return bd(t,n,"","",function(A){return e.call(r,A,s++)}),n}function IU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},_d={transition:null},EU={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:_d,ReactCurrentOwner:U0};function Gb(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:Tu,forEach:function(t,e,r){Tu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Tu(t,function(){e++}),e},toArray:function(t){return Tu(t,function(e){return e})||[]},only:function(t){if(!Q0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dt.Component=Ta;dt.Fragment=fU;dt.Profiler=pU;dt.PureComponent=F0;dt.StrictMode=gU;dt.Suspense=vU;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EU;dt.act=Gb;dt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=jb({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=U0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)Hb.call(e,o)&&!Vb.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Hc,type:t.type,key:s,ref:A,props:n,_owner:i}};dt.createContext=function(t){return t={$$typeof:wU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mU,_context:t},t.Consumer=t};dt.createElement=Kb;dt.createFactory=function(t){var e=Kb.bind(null,t);return e.type=t,e};dt.createRef=function(){return{current:null}};dt.forwardRef=function(t){return{$$typeof:yU,render:t}};dt.isValidElement=Q0;dt.lazy=function(t){return{$$typeof:BU,_payload:{_status:-1,_result:t},_init:IU}};dt.memo=function(t,e){return{$$typeof:xU,type:t,compare:e===void 0?null:e}};dt.startTransition=function(t){var e=_d.transition;_d.transition={};try{t()}finally{_d.transition=e}};dt.unstable_act=Gb;dt.useCallback=function(t,e){return tn.current.useCallback(t,e)};dt.useContext=function(t){return tn.current.useContext(t)};dt.useDebugValue=function(){};dt.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};dt.useEffect=function(t,e){return tn.current.useEffect(t,e)};dt.useId=function(){return tn.current.useId()};dt.useImperativeHandle=function(t,e,r){return tn.current.useImperativeHandle(t,e,r)};dt.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};dt.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};dt.useMemo=function(t,e){return tn.current.useMemo(t,e)};dt.useReducer=function(t,e,r){return tn.current.useReducer(t,e,r)};dt.useRef=function(t){return tn.current.useRef(t)};dt.useState=function(t){return tn.current.useState(t)};dt.useSyncExternalStore=function(t,e,r){return tn.current.useSyncExternalStore(t,e,r)};dt.useTransition=function(){return tn.current.useTransition()};dt.version="18.3.1";Pb.exports=dt;var U=Pb.exports;const Bs=Rb(U),TU=dU({__proto__:null,default:Bs},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FU=U,SU=Symbol.for("react.element"),UU=Symbol.for("react.fragment"),QU=Object.prototype.hasOwnProperty,kU=FU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NU={key:!0,ref:!0,__self:!0,__source:!0};function zb(t,e,r){var n,s={},A=null,i=null;r!==void 0&&(A=""+r),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)QU.call(e,n)&&!NU.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:SU,type:t,key:A,ref:i,props:s,_owner:kU.current}}cf.Fragment=UU;cf.jsx=zb;cf.jsxs=zb;Db.exports=cf;var l=Db.exports,Qp={},$b={exports:{}},In={},Wb={exports:{}},qb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ae,xe){var Re=ae.length;ae.push(xe);e:for(;0<Re;){var X=Re-1>>>1,Ee=ae[X];if(0<s(Ee,xe))ae[X]=xe,ae[Re]=Ee,Re=X;else break e}}function r(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var xe=ae[0],Re=ae.pop();if(Re!==xe){ae[0]=Re;e:for(var X=0,Ee=ae.length,Te=Ee>>>1;X<Te;){var qe=2*(X+1)-1,ze=ae[qe],Ye=qe+1,Ke=ae[Ye];if(0>s(ze,Re))Ye<Ee&&0>s(Ke,ze)?(ae[X]=Ke,ae[Ye]=Re,X=Ye):(ae[X]=ze,ae[qe]=Re,X=qe);else if(Ye<Ee&&0>s(Ke,Re))ae[X]=Ke,ae[Ye]=Re,X=Ye;else break e}}return xe}function s(ae,xe){var Re=ae.sortIndex-xe.sortIndex;return Re!==0?Re:ae.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var o=[],c=[],d=1,h=null,f=3,m=!1,v=!1,y=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ae){for(var xe=r(c);xe!==null;){if(xe.callback===null)n(c);else if(xe.startTime<=ae)n(c),xe.sortIndex=xe.expirationTime,e(o,xe);else break;xe=r(c)}}function S(ae){if(y=!1,B(ae),!v)if(r(o)!==null)v=!0,it(N);else{var xe=r(c);xe!==null&&We(S,xe.startTime-ae)}}function N(ae,xe){v=!1,y&&(y=!1,C(b),b=-1),m=!0;var Re=f;try{for(B(xe),h=r(o);h!==null&&(!(h.expirationTime>xe)||ae&&!R());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Ee=X(h.expirationTime<=xe);xe=t.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===r(o)&&n(o),B(xe)}else n(o);h=r(o)}if(h!==null)var Te=!0;else{var qe=r(c);qe!==null&&We(S,qe.startTime-xe),Te=!1}return Te}finally{h=null,f=Re,m=!1}}var Q=!1,x=null,b=-1,_=5,k=-1;function R(){return!(t.unstable_now()-k<_)}function P(){if(x!==null){var ae=t.unstable_now();k=ae;var xe=!0;try{xe=x(!0,ae)}finally{xe?E():(Q=!1,x=null)}}else Q=!1}var E;if(typeof w=="function")E=function(){w(P)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Ge=Me.port2;Me.port1.onmessage=P,E=function(){Ge.postMessage(null)}}else E=function(){I(P,0)};function it(ae){x=ae,Q||(Q=!0,E())}function We(ae,xe){b=I(function(){ae(t.unstable_now())},xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,it(N))},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<ae?Math.floor(1e3/ae):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(ae){switch(f){case 1:case 2:case 3:var xe=3;break;default:xe=f}var Re=f;f=xe;try{return ae()}finally{f=Re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ae,xe){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Re=f;f=ae;try{return xe()}finally{f=Re}},t.unstable_scheduleCallback=function(ae,xe,Re){var X=t.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?X+Re:X):Re=X,ae){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Re+Ee,ae={id:d++,callback:xe,priorityLevel:ae,startTime:Re,expirationTime:Ee,sortIndex:-1},Re>X?(ae.sortIndex=Re,e(c,ae),r(o)===null&&ae===r(c)&&(y?(C(b),b=-1):y=!0,We(S,Re-X))):(ae.sortIndex=Ee,e(o,ae),v||m||(v=!0,it(N))),ae},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(ae){var xe=f;return function(){var Re=f;f=xe;try{return ae.apply(this,arguments)}finally{f=Re}}}})(qb);Wb.exports=qb;var RU=Wb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DU=U,Cn=RU;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jb=new Set,ic={};function eo(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(ic[t]=e,t=0;t<e.length;t++)Jb.add(e[t])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kp=Object.prototype.hasOwnProperty,PU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tv={},Fv={};function LU(t){return kp.call(Fv,t)?!0:kp.call(Tv,t)?!1:PU.test(t)?Fv[t]=!0:(Tv[t]=!0,!1)}function jU(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MU(t,e,r,n){if(e===null||typeof e>"u"||jU(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,r,n,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pr[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pr[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pr[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pr[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pr[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pr[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pr[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pr[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pr[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var k0=/[\-:]([a-z])/g;function N0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(k0,N0);Pr[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(k0,N0);Pr[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(k0,N0);Pr[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pr[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pr[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function R0(t,e,r,n){var s=Pr.hasOwnProperty(e)?Pr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MU(e,r,s,n)&&(r=null),n||s===null?LU(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Os=DU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fu=Symbol.for("react.element"),So=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),Xb=Symbol.for("react.provider"),Yb=Symbol.for("react.context"),P0=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Dp=Symbol.for("react.suspense_list"),L0=Symbol.for("react.memo"),iA=Symbol.for("react.lazy"),Zb=Symbol.for("react.offscreen"),Sv=Symbol.iterator;function rl(t){return t===null||typeof t!="object"?null:(t=Sv&&t[Sv]||t["@@iterator"],typeof t=="function"?t:null)}var tr=Object.assign,_g;function xl(t){if(_g===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);_g=e&&e[1]||""}return`
`+_g+t}var Ig=!1;function Eg(t,e){if(!t||Ig)return"";Ig=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=n.stack.split(`
`),i=s.length-1,a=A.length-1;1<=i&&0<=a&&s[i]!==A[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==A[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==A[a]){var o=`
`+s[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=a);break}}}finally{Ig=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?xl(t):""}function OU(t){switch(t.tag){case 5:return xl(t.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return t=Eg(t.type,!1),t;case 11:return t=Eg(t.type.render,!1),t;case 1:return t=Eg(t.type,!0),t;default:return""}}function Pp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uo:return"Fragment";case So:return"Portal";case Np:return"Profiler";case D0:return"StrictMode";case Rp:return"Suspense";case Dp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yb:return(t.displayName||"Context")+".Consumer";case Xb:return(t._context.displayName||"Context")+".Provider";case P0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L0:return e=t.displayName||null,e!==null?e:Pp(t.type)||"Memo";case iA:e=t._payload,t=t._init;try{return Pp(t(e))}catch{}}return null}function HU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pp(e);case 8:return e===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function OA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function e_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VU(t){var e=e_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,A=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Su(t){t._valueTracker||(t._valueTracker=VU(t))}function t_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=e_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function rh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lp(t,e){var r=e.checked;return tr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Uv(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=OA(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function r_(t,e){e=e.checked,e!=null&&R0(t,"checked",e,!1)}function jp(t,e){r_(t,e);var r=OA(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Mp(t,e.type,OA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qv(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Mp(t,e,r){(e!=="number"||rh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Bl=Array.isArray;function Ko(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+OA(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Op(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return tr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kv(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(he(92));if(Bl(r)){if(1<r.length)throw Error(he(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:OA(r)}}function n_(t,e){var r=OA(e.value),n=OA(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Nv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function s_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?s_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uu,A_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KU=["Webkit","ms","Moz","O"];Object.keys(jl).forEach(function(t){KU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jl[e]=jl[t]})});function i_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||jl.hasOwnProperty(t)&&jl[t]?(""+e).trim():e+"px"}function o_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=i_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var GU=tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(t,e){if(e){if(GU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function Kp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=null;function j0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zp=null,Go=null,zo=null;function Rv(t){if(t=Gc(t)){if(typeof zp!="function")throw Error(he(280));var e=t.stateNode;e&&(e=gf(e),zp(t.stateNode,t.type,e))}}function a_(t){Go?zo?zo.push(t):zo=[t]:Go=t}function l_(){if(Go){var t=Go,e=zo;if(zo=Go=null,Rv(t),e)for(t=0;t<e.length;t++)Rv(e[t])}}function c_(t,e){return t(e)}function u_(){}var Tg=!1;function d_(t,e,r){if(Tg)return t(e,r);Tg=!0;try{return c_(t,e,r)}finally{Tg=!1,(Go!==null||zo!==null)&&(u_(),l_())}}function ac(t,e){var r=t.stateNode;if(r===null)return null;var n=gf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(he(231,e,typeof r));return r}var $p=!1;if(Qs)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){$p=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{$p=!1}function zU(t,e,r,n,s,A,i,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Ml=!1,nh=null,sh=!1,Wp=null,$U={onError:function(t){Ml=!0,nh=t}};function WU(t,e,r,n,s,A,i,a,o){Ml=!1,nh=null,zU.apply($U,arguments)}function qU(t,e,r,n,s,A,i,a,o){if(WU.apply(this,arguments),Ml){if(Ml){var c=nh;Ml=!1,nh=null}else throw Error(he(198));sh||(sh=!0,Wp=c)}}function to(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function h_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dv(t){if(to(t)!==t)throw Error(he(188))}function JU(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(he(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var A=s.alternate;if(A===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===r)return Dv(s),t;if(A===n)return Dv(s),e;A=A.sibling}throw Error(he(188))}if(r.return!==n.return)r=s,n=A;else{for(var i=!1,a=s.child;a;){if(a===r){i=!0,r=s,n=A;break}if(a===n){i=!0,n=s,r=A;break}a=a.sibling}if(!i){for(a=A.child;a;){if(a===r){i=!0,r=A,n=s;break}if(a===n){i=!0,n=A,r=s;break}a=a.sibling}if(!i)throw Error(he(189))}}if(r.alternate!==n)throw Error(he(190))}if(r.tag!==3)throw Error(he(188));return r.stateNode.current===r?t:e}function f_(t){return t=JU(t),t!==null?g_(t):null}function g_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=g_(t);if(e!==null)return e;t=t.sibling}return null}var p_=Cn.unstable_scheduleCallback,Pv=Cn.unstable_cancelCallback,XU=Cn.unstable_shouldYield,YU=Cn.unstable_requestPaint,lr=Cn.unstable_now,ZU=Cn.unstable_getCurrentPriorityLevel,M0=Cn.unstable_ImmediatePriority,m_=Cn.unstable_UserBlockingPriority,Ah=Cn.unstable_NormalPriority,eQ=Cn.unstable_LowPriority,w_=Cn.unstable_IdlePriority,uf=null,is=null;function tQ(t){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(uf,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:sQ,rQ=Math.log,nQ=Math.LN2;function sQ(t){return t>>>=0,t===0?32:31-(rQ(t)/nQ|0)|0}var Qu=64,ku=4194304;function Cl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,A=t.pingedLanes,i=r&268435455;if(i!==0){var a=i&~s;a!==0?n=Cl(a):(A&=i,A!==0&&(n=Cl(A)))}else i=r&~s,i!==0?n=Cl(i):A!==0&&(n=Cl(A));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zn(e),s=1<<r,n|=t[r],e&=~s;return n}function AQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iQ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-zn(A),a=1<<i,o=s[i];o===-1?(!(a&r)||a&n)&&(s[i]=AQ(a,e)):o<=e&&(t.expiredLanes|=a),A&=~a}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function y_(){var t=Qu;return Qu<<=1,!(Qu&4194240)&&(Qu=64),t}function Fg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Vc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=r}function oQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-zn(r),A=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~A}}function O0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Et=0;function v_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x_,H0,B_,C_,b_,Jp=!1,Nu=[],IA=null,EA=null,TA=null,lc=new Map,cc=new Map,lA=[],aQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lv(t,e){switch(t){case"focusin":case"focusout":IA=null;break;case"dragenter":case"dragleave":EA=null;break;case"mouseover":case"mouseout":TA=null;break;case"pointerover":case"pointerout":lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(e.pointerId)}}function sl(t,e,r,n,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:A,targetContainers:[s]},e!==null&&(e=Gc(e),e!==null&&H0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lQ(t,e,r,n,s){switch(e){case"focusin":return IA=sl(IA,t,e,r,n,s),!0;case"dragenter":return EA=sl(EA,t,e,r,n,s),!0;case"mouseover":return TA=sl(TA,t,e,r,n,s),!0;case"pointerover":var A=s.pointerId;return lc.set(A,sl(lc.get(A)||null,t,e,r,n,s)),!0;case"gotpointercapture":return A=s.pointerId,cc.set(A,sl(cc.get(A)||null,t,e,r,n,s)),!0}return!1}function __(t){var e=Ei(t.target);if(e!==null){var r=to(e);if(r!==null){if(e=r.tag,e===13){if(e=h_(r),e!==null){t.blockedOn=e,b_(t.priority,function(){B_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Id(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Xp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Gp=n,r.target.dispatchEvent(n),Gp=null}else return e=Gc(r),e!==null&&H0(e),t.blockedOn=r,!1;e.shift()}return!0}function jv(t,e,r){Id(t)&&r.delete(e)}function cQ(){Jp=!1,IA!==null&&Id(IA)&&(IA=null),EA!==null&&Id(EA)&&(EA=null),TA!==null&&Id(TA)&&(TA=null),lc.forEach(jv),cc.forEach(jv)}function Al(t,e){t.blockedOn===e&&(t.blockedOn=null,Jp||(Jp=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,cQ)))}function uc(t){function e(s){return Al(s,t)}if(0<Nu.length){Al(Nu[0],t);for(var r=1;r<Nu.length;r++){var n=Nu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(IA!==null&&Al(IA,t),EA!==null&&Al(EA,t),TA!==null&&Al(TA,t),lc.forEach(e),cc.forEach(e),r=0;r<lA.length;r++)n=lA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<lA.length&&(r=lA[0],r.blockedOn===null);)__(r),r.blockedOn===null&&lA.shift()}var $o=Os.ReactCurrentBatchConfig,oh=!0;function uQ(t,e,r,n){var s=Et,A=$o.transition;$o.transition=null;try{Et=1,V0(t,e,r,n)}finally{Et=s,$o.transition=A}}function dQ(t,e,r,n){var s=Et,A=$o.transition;$o.transition=null;try{Et=4,V0(t,e,r,n)}finally{Et=s,$o.transition=A}}function V0(t,e,r,n){if(oh){var s=Xp(t,e,r,n);if(s===null)jg(t,e,n,ah,r),Lv(t,n);else if(lQ(s,t,e,r,n))n.stopPropagation();else if(Lv(t,n),e&4&&-1<aQ.indexOf(t)){for(;s!==null;){var A=Gc(s);if(A!==null&&x_(A),A=Xp(t,e,r,n),A===null&&jg(t,e,n,ah,r),A===s)break;s=A}s!==null&&n.stopPropagation()}else jg(t,e,n,null,r)}}var ah=null;function Xp(t,e,r,n){if(ah=null,t=j0(n),t=Ei(t),t!==null)if(e=to(t),e===null)t=null;else if(r=e.tag,r===13){if(t=h_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ah=t,null}function I_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZU()){case M0:return 1;case m_:return 4;case Ah:case eQ:return 16;case w_:return 536870912;default:return 16}default:return 16}}var wA=null,K0=null,Ed=null;function E_(){if(Ed)return Ed;var t,e=K0,r=e.length,n,s="value"in wA?wA.value:wA.textContent,A=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[A-n];n++);return Ed=s.slice(t,1<n?1-n:void 0)}function Td(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ru(){return!0}function Mv(){return!1}function En(t){function e(r,n,s,A,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(A):A[a]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ru:Mv,this.isPropagationStopped=Mv,this}return tr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),e}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G0=En(Fa),Kc=tr({},Fa,{view:0,detail:0}),hQ=En(Kc),Sg,Ug,il,df=tr({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(Sg=t.screenX-il.screenX,Ug=t.screenY-il.screenY):Ug=Sg=0,il=t),Sg)},movementY:function(t){return"movementY"in t?t.movementY:Ug}}),Ov=En(df),fQ=tr({},df,{dataTransfer:0}),gQ=En(fQ),pQ=tr({},Kc,{relatedTarget:0}),Qg=En(pQ),mQ=tr({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),wQ=En(mQ),yQ=tr({},Fa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vQ=En(yQ),xQ=tr({},Fa,{data:0}),Hv=En(xQ),BQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _Q(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bQ[t])?!!e[t]:!1}function z0(){return _Q}var IQ=tr({},Kc,{key:function(t){if(t.key){var e=BQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Td(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z0,charCode:function(t){return t.type==="keypress"?Td(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Td(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EQ=En(IQ),TQ=tr({},df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vv=En(TQ),FQ=tr({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z0}),SQ=En(FQ),UQ=tr({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),QQ=En(UQ),kQ=tr({},df,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NQ=En(kQ),RQ=[9,13,27,32],$0=Qs&&"CompositionEvent"in window,Ol=null;Qs&&"documentMode"in document&&(Ol=document.documentMode);var DQ=Qs&&"TextEvent"in window&&!Ol,T_=Qs&&(!$0||Ol&&8<Ol&&11>=Ol),Kv=" ",Gv=!1;function F_(t,e){switch(t){case"keyup":return RQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function PQ(t,e){switch(t){case"compositionend":return S_(e);case"keypress":return e.which!==32?null:(Gv=!0,Kv);case"textInput":return t=e.data,t===Kv&&Gv?null:t;default:return null}}function LQ(t,e){if(Qo)return t==="compositionend"||!$0&&F_(t,e)?(t=E_(),Ed=K0=wA=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T_&&e.locale!=="ko"?null:e.data;default:return null}}var jQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jQ[t.type]:e==="textarea"}function U_(t,e,r,n){a_(n),e=lh(e,"onChange"),0<e.length&&(r=new G0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Hl=null,dc=null;function MQ(t){H_(t,0)}function hf(t){var e=Ro(t);if(t_(e))return t}function OQ(t,e){if(t==="change")return e}var Q_=!1;if(Qs){var kg;if(Qs){var Ng="oninput"in document;if(!Ng){var $v=document.createElement("div");$v.setAttribute("oninput","return;"),Ng=typeof $v.oninput=="function"}kg=Ng}else kg=!1;Q_=kg&&(!document.documentMode||9<document.documentMode)}function Wv(){Hl&&(Hl.detachEvent("onpropertychange",k_),dc=Hl=null)}function k_(t){if(t.propertyName==="value"&&hf(dc)){var e=[];U_(e,dc,t,j0(t)),d_(MQ,e)}}function HQ(t,e,r){t==="focusin"?(Wv(),Hl=e,dc=r,Hl.attachEvent("onpropertychange",k_)):t==="focusout"&&Wv()}function VQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hf(dc)}function KQ(t,e){if(t==="click")return hf(e)}function GQ(t,e){if(t==="input"||t==="change")return hf(e)}function zQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:zQ;function hc(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!kp.call(e,s)||!qn(t[s],e[s]))return!1}return!0}function qv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jv(t,e){var r=qv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qv(r)}}function N_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function R_(){for(var t=window,e=rh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=rh(t.document)}return e}function W0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $Q(t){var e=R_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&N_(r.ownerDocument.documentElement,r)){if(n!==null&&W0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,A=Math.min(n.start,s);n=n.end===void 0?A:Math.min(n.end,s),!t.extend&&A>n&&(s=n,n=A,A=s),s=Jv(r,A);var i=Jv(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WQ=Qs&&"documentMode"in document&&11>=document.documentMode,ko=null,Yp=null,Vl=null,Zp=!1;function Xv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zp||ko==null||ko!==rh(n)||(n=ko,"selectionStart"in n&&W0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vl&&hc(Vl,n)||(Vl=n,n=lh(Yp,"onSelect"),0<n.length&&(e=new G0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ko)))}function Du(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var No={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},Rg={},D_={};Qs&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function ff(t){if(Rg[t])return Rg[t];if(!No[t])return t;var e=No[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in D_)return Rg[t]=e[r];return t}var P_=ff("animationend"),L_=ff("animationiteration"),j_=ff("animationstart"),M_=ff("transitionend"),O_=new Map,Yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){O_.set(t,e),eo(e,[t])}for(var Dg=0;Dg<Yv.length;Dg++){var Pg=Yv[Dg],qQ=Pg.toLowerCase(),JQ=Pg[0].toUpperCase()+Pg.slice(1);ei(qQ,"on"+JQ)}ei(P_,"onAnimationEnd");ei(L_,"onAnimationIteration");ei(j_,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(M_,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(bl));function Zv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,qU(n,e,void 0,t),t.currentTarget=null}function H_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var A=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==A&&s.isPropagationStopped())break e;Zv(s,a,c),A=o}else for(i=0;i<n.length;i++){if(a=n[i],o=a.instance,c=a.currentTarget,a=a.listener,o!==A&&s.isPropagationStopped())break e;Zv(s,a,c),A=o}}}if(sh)throw t=Wp,sh=!1,Wp=null,t}function Ot(t,e){var r=e[sm];r===void 0&&(r=e[sm]=new Set);var n=t+"__bubble";r.has(n)||(V_(e,t,2,!1),r.add(n))}function Lg(t,e,r){var n=0;e&&(n|=4),V_(r,t,n,e)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function fc(t){if(!t[Pu]){t[Pu]=!0,Jb.forEach(function(r){r!=="selectionchange"&&(XQ.has(r)||Lg(r,!1,t),Lg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pu]||(e[Pu]=!0,Lg("selectionchange",!1,e))}}function V_(t,e,r,n){switch(I_(e)){case 1:var s=uQ;break;case 4:s=dQ;break;default:s=V0}r=s.bind(null,e,r,t),s=void 0,!$p||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function jg(t,e,r,n,s){var A=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Ei(a),i===null)return;if(o=i.tag,o===5||o===6){n=A=i;continue e}a=a.parentNode}}n=n.return}d_(function(){var c=A,d=j0(r),h=[];e:{var f=O_.get(t);if(f!==void 0){var m=G0,v=t;switch(t){case"keypress":if(Td(r)===0)break e;case"keydown":case"keyup":m=EQ;break;case"focusin":v="focus",m=Qg;break;case"focusout":v="blur",m=Qg;break;case"beforeblur":case"afterblur":m=Qg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ov;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=SQ;break;case P_:case L_:case j_:m=wQ;break;case M_:m=QQ;break;case"scroll":m=hQ;break;case"wheel":m=NQ;break;case"copy":case"cut":case"paste":m=vQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Vv}var y=(e&4)!==0,I=!y&&t==="scroll",C=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,B;w!==null;){B=w;var S=B.stateNode;if(B.tag===5&&S!==null&&(B=S,C!==null&&(S=ac(w,C),S!=null&&y.push(gc(w,S,B)))),I)break;w=w.return}0<y.length&&(f=new m(f,v,null,r,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==Gp&&(v=r.relatedTarget||r.fromElement)&&(Ei(v)||v[ks]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=c,v=v?Ei(v):null,v!==null&&(I=to(v),v!==I||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=Ov,S="onMouseLeave",C="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=Vv,S="onPointerLeave",C="onPointerEnter",w="pointer"),I=m==null?f:Ro(m),B=v==null?f:Ro(v),f=new y(S,w+"leave",m,r,d),f.target=I,f.relatedTarget=B,S=null,Ei(d)===c&&(y=new y(C,w+"enter",v,r,d),y.target=B,y.relatedTarget=I,S=y),I=S,m&&v)t:{for(y=m,C=v,w=0,B=y;B;B=ho(B))w++;for(B=0,S=C;S;S=ho(S))B++;for(;0<w-B;)y=ho(y),w--;for(;0<B-w;)C=ho(C),B--;for(;w--;){if(y===C||C!==null&&y===C.alternate)break t;y=ho(y),C=ho(C)}y=null}else y=null;m!==null&&ex(h,f,m,y,!1),v!==null&&I!==null&&ex(h,I,v,y,!0)}}e:{if(f=c?Ro(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=OQ;else if(zv(f))if(Q_)N=GQ;else{N=VQ;var Q=HQ}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=KQ);if(N&&(N=N(t,c))){U_(h,N,r,d);break e}Q&&Q(t,f,c),t==="focusout"&&(Q=f._wrapperState)&&Q.controlled&&f.type==="number"&&Mp(f,"number",f.value)}switch(Q=c?Ro(c):window,t){case"focusin":(zv(Q)||Q.contentEditable==="true")&&(ko=Q,Yp=c,Vl=null);break;case"focusout":Vl=Yp=ko=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,Xv(h,r,d);break;case"selectionchange":if(WQ)break;case"keydown":case"keyup":Xv(h,r,d)}var x;if($0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Qo?F_(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(T_&&r.locale!=="ko"&&(Qo||b!=="onCompositionStart"?b==="onCompositionEnd"&&Qo&&(x=E_()):(wA=d,K0="value"in wA?wA.value:wA.textContent,Qo=!0)),Q=lh(c,b),0<Q.length&&(b=new Hv(b,t,null,r,d),h.push({event:b,listeners:Q}),x?b.data=x:(x=S_(r),x!==null&&(b.data=x)))),(x=DQ?PQ(t,r):LQ(t,r))&&(c=lh(c,"onBeforeInput"),0<c.length&&(d=new Hv("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=x))}H_(h,e)})}function gc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function lh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=ac(t,r),A!=null&&n.unshift(gc(t,A,s)),A=ac(t,e),A!=null&&n.push(gc(t,A,s))),t=t.return}return n}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ex(t,e,r,n,s){for(var A=e._reactName,i=[];r!==null&&r!==n;){var a=r,o=a.alternate,c=a.stateNode;if(o!==null&&o===n)break;a.tag===5&&c!==null&&(a=c,s?(o=ac(r,A),o!=null&&i.unshift(gc(r,o,a))):s||(o=ac(r,A),o!=null&&i.push(gc(r,o,a)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var YQ=/\r\n?/g,ZQ=/\u0000|\uFFFD/g;function tx(t){return(typeof t=="string"?t:""+t).replace(YQ,`
`).replace(ZQ,"")}function Lu(t,e,r){if(e=tx(e),tx(t)!==e&&r)throw Error(he(425))}function ch(){}var em=null,tm=null;function rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,ek=typeof clearTimeout=="function"?clearTimeout:void 0,rx=typeof Promise=="function"?Promise:void 0,tk=typeof queueMicrotask=="function"?queueMicrotask:typeof rx<"u"?function(t){return rx.resolve(null).then(t).catch(rk)}:nm;function rk(t){setTimeout(function(){throw t})}function Mg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),uc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);uc(e)}function FA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),ns="__reactFiber$"+Sa,pc="__reactProps$"+Sa,ks="__reactContainer$"+Sa,sm="__reactEvents$"+Sa,nk="__reactListeners$"+Sa,sk="__reactHandles$"+Sa;function Ei(t){var e=t[ns];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ks]||r[ns]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=nx(t);t!==null;){if(r=t[ns])return r;t=nx(t)}return e}t=r,r=t.parentNode}return null}function Gc(t){return t=t[ns]||t[ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function gf(t){return t[pc]||null}var Am=[],Do=-1;function ti(t){return{current:t}}function Kt(t){0>Do||(t.current=Am[Do],Am[Do]=null,Do--)}function Pt(t,e){Do++,Am[Do]=t.current,t.current=e}var HA={},Jr=ti(HA),hn=ti(!1),Pi=HA;function na(t,e){var r=t.type.contextTypes;if(!r)return HA;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in r)s[A]=e[A];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fn(t){return t=t.childContextTypes,t!=null}function uh(){Kt(hn),Kt(Jr)}function sx(t,e,r){if(Jr.current!==HA)throw Error(he(168));Pt(Jr,e),Pt(hn,r)}function K_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(he(108,HU(t)||"Unknown",s));return tr({},r,n)}function dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||HA,Pi=Jr.current,Pt(Jr,t),Pt(hn,hn.current),!0}function Ax(t,e,r){var n=t.stateNode;if(!n)throw Error(he(169));r?(t=K_(t,e,Pi),n.__reactInternalMemoizedMergedChildContext=t,Kt(hn),Kt(Jr),Pt(Jr,t)):Kt(hn),Pt(hn,r)}var xs=null,pf=!1,Og=!1;function G_(t){xs===null?xs=[t]:xs.push(t)}function Ak(t){pf=!0,G_(t)}function ri(){if(!Og&&xs!==null){Og=!0;var t=0,e=Et;try{var r=xs;for(Et=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}xs=null,pf=!1}catch(s){throw xs!==null&&(xs=xs.slice(t+1)),p_(M0,ri),s}finally{Et=e,Og=!1}}return null}var Po=[],Lo=0,hh=null,fh=0,Sn=[],Un=0,Li=null,Cs=1,bs="";function wi(t,e){Po[Lo++]=fh,Po[Lo++]=hh,hh=t,fh=e}function z_(t,e,r){Sn[Un++]=Cs,Sn[Un++]=bs,Sn[Un++]=Li,Li=t;var n=Cs;t=bs;var s=32-zn(n)-1;n&=~(1<<s),r+=1;var A=32-zn(e)+s;if(30<A){var i=s-s%5;A=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Cs=1<<32-zn(e)+s|r<<s|n,bs=A+t}else Cs=1<<A|r<<s|n,bs=t}function q0(t){t.return!==null&&(wi(t,1),z_(t,1,0))}function J0(t){for(;t===hh;)hh=Po[--Lo],Po[Lo]=null,fh=Po[--Lo],Po[Lo]=null;for(;t===Li;)Li=Sn[--Un],Sn[Un]=null,bs=Sn[--Un],Sn[Un]=null,Cs=Sn[--Un],Sn[Un]=null}var Bn=null,xn=null,$t=!1,Gn=null;function $_(t,e){var r=kn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ix(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,xn=FA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Li!==null?{id:Cs,overflow:bs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=kn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Bn=t,xn=null,!0):!1;default:return!1}}function im(t){return(t.mode&1)!==0&&(t.flags&128)===0}function om(t){if($t){var e=xn;if(e){var r=e;if(!ix(t,e)){if(im(t))throw Error(he(418));e=FA(r.nextSibling);var n=Bn;e&&ix(t,e)?$_(n,r):(t.flags=t.flags&-4097|2,$t=!1,Bn=t)}}else{if(im(t))throw Error(he(418));t.flags=t.flags&-4097|2,$t=!1,Bn=t}}}function ox(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function ju(t){if(t!==Bn)return!1;if(!$t)return ox(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rm(t.type,t.memoizedProps)),e&&(e=xn)){if(im(t))throw W_(),Error(he(418));for(;e;)$_(t,e),e=FA(e.nextSibling)}if(ox(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){xn=FA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=Bn?FA(t.stateNode.nextSibling):null;return!0}function W_(){for(var t=xn;t;)t=FA(t.nextSibling)}function sa(){xn=Bn=null,$t=!1}function X0(t){Gn===null?Gn=[t]:Gn.push(t)}var ik=Os.ReactCurrentBatchConfig;function ol(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(he(309));var n=r.stateNode}if(!n)throw Error(he(147,t));var s=n,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var a=s.refs;i===null?delete a[A]:a[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(he(284));if(!r._owner)throw Error(he(290,t))}return t}function Mu(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ax(t){var e=t._init;return e(t._payload)}function q_(t){function e(C,w){if(t){var B=C.deletions;B===null?(C.deletions=[w],C.flags|=16):B.push(w)}}function r(C,w){if(!t)return null;for(;w!==null;)e(C,w),w=w.sibling;return null}function n(C,w){for(C=new Map;w!==null;)w.key!==null?C.set(w.key,w):C.set(w.index,w),w=w.sibling;return C}function s(C,w){return C=kA(C,w),C.index=0,C.sibling=null,C}function A(C,w,B){return C.index=B,t?(B=C.alternate,B!==null?(B=B.index,B<w?(C.flags|=2,w):B):(C.flags|=2,w)):(C.flags|=1048576,w)}function i(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,w,B,S){return w===null||w.tag!==6?(w=Wg(B,C.mode,S),w.return=C,w):(w=s(w,B),w.return=C,w)}function o(C,w,B,S){var N=B.type;return N===Uo?d(C,w,B.props.children,S,B.key):w!==null&&(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===iA&&ax(N)===w.type)?(S=s(w,B.props),S.ref=ol(C,w,B),S.return=C,S):(S=Rd(B.type,B.key,B.props,null,C.mode,S),S.ref=ol(C,w,B),S.return=C,S)}function c(C,w,B,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==B.containerInfo||w.stateNode.implementation!==B.implementation?(w=qg(B,C.mode,S),w.return=C,w):(w=s(w,B.children||[]),w.return=C,w)}function d(C,w,B,S,N){return w===null||w.tag!==7?(w=Qi(B,C.mode,S,N),w.return=C,w):(w=s(w,B),w.return=C,w)}function h(C,w,B){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Wg(""+w,C.mode,B),w.return=C,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fu:return B=Rd(w.type,w.key,w.props,null,C.mode,B),B.ref=ol(C,null,w),B.return=C,B;case So:return w=qg(w,C.mode,B),w.return=C,w;case iA:var S=w._init;return h(C,S(w._payload),B)}if(Bl(w)||rl(w))return w=Qi(w,C.mode,B,null),w.return=C,w;Mu(C,w)}return null}function f(C,w,B,S){var N=w!==null?w.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return N!==null?null:a(C,w,""+B,S);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Fu:return B.key===N?o(C,w,B,S):null;case So:return B.key===N?c(C,w,B,S):null;case iA:return N=B._init,f(C,w,N(B._payload),S)}if(Bl(B)||rl(B))return N!==null?null:d(C,w,B,S,null);Mu(C,B)}return null}function m(C,w,B,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return C=C.get(B)||null,a(w,C,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fu:return C=C.get(S.key===null?B:S.key)||null,o(w,C,S,N);case So:return C=C.get(S.key===null?B:S.key)||null,c(w,C,S,N);case iA:var Q=S._init;return m(C,w,B,Q(S._payload),N)}if(Bl(S)||rl(S))return C=C.get(B)||null,d(w,C,S,N,null);Mu(w,S)}return null}function v(C,w,B,S){for(var N=null,Q=null,x=w,b=w=0,_=null;x!==null&&b<B.length;b++){x.index>b?(_=x,x=null):_=x.sibling;var k=f(C,x,B[b],S);if(k===null){x===null&&(x=_);break}t&&x&&k.alternate===null&&e(C,x),w=A(k,w,b),Q===null?N=k:Q.sibling=k,Q=k,x=_}if(b===B.length)return r(C,x),$t&&wi(C,b),N;if(x===null){for(;b<B.length;b++)x=h(C,B[b],S),x!==null&&(w=A(x,w,b),Q===null?N=x:Q.sibling=x,Q=x);return $t&&wi(C,b),N}for(x=n(C,x);b<B.length;b++)_=m(x,C,b,B[b],S),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?b:_.key),w=A(_,w,b),Q===null?N=_:Q.sibling=_,Q=_);return t&&x.forEach(function(R){return e(C,R)}),$t&&wi(C,b),N}function y(C,w,B,S){var N=rl(B);if(typeof N!="function")throw Error(he(150));if(B=N.call(B),B==null)throw Error(he(151));for(var Q=N=null,x=w,b=w=0,_=null,k=B.next();x!==null&&!k.done;b++,k=B.next()){x.index>b?(_=x,x=null):_=x.sibling;var R=f(C,x,k.value,S);if(R===null){x===null&&(x=_);break}t&&x&&R.alternate===null&&e(C,x),w=A(R,w,b),Q===null?N=R:Q.sibling=R,Q=R,x=_}if(k.done)return r(C,x),$t&&wi(C,b),N;if(x===null){for(;!k.done;b++,k=B.next())k=h(C,k.value,S),k!==null&&(w=A(k,w,b),Q===null?N=k:Q.sibling=k,Q=k);return $t&&wi(C,b),N}for(x=n(C,x);!k.done;b++,k=B.next())k=m(x,C,b,k.value,S),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?b:k.key),w=A(k,w,b),Q===null?N=k:Q.sibling=k,Q=k);return t&&x.forEach(function(P){return e(C,P)}),$t&&wi(C,b),N}function I(C,w,B,S){if(typeof B=="object"&&B!==null&&B.type===Uo&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Fu:e:{for(var N=B.key,Q=w;Q!==null;){if(Q.key===N){if(N=B.type,N===Uo){if(Q.tag===7){r(C,Q.sibling),w=s(Q,B.props.children),w.return=C,C=w;break e}}else if(Q.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===iA&&ax(N)===Q.type){r(C,Q.sibling),w=s(Q,B.props),w.ref=ol(C,Q,B),w.return=C,C=w;break e}r(C,Q);break}else e(C,Q);Q=Q.sibling}B.type===Uo?(w=Qi(B.props.children,C.mode,S,B.key),w.return=C,C=w):(S=Rd(B.type,B.key,B.props,null,C.mode,S),S.ref=ol(C,w,B),S.return=C,C=S)}return i(C);case So:e:{for(Q=B.key;w!==null;){if(w.key===Q)if(w.tag===4&&w.stateNode.containerInfo===B.containerInfo&&w.stateNode.implementation===B.implementation){r(C,w.sibling),w=s(w,B.children||[]),w.return=C,C=w;break e}else{r(C,w);break}else e(C,w);w=w.sibling}w=qg(B,C.mode,S),w.return=C,C=w}return i(C);case iA:return Q=B._init,I(C,w,Q(B._payload),S)}if(Bl(B))return v(C,w,B,S);if(rl(B))return y(C,w,B,S);Mu(C,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,w!==null&&w.tag===6?(r(C,w.sibling),w=s(w,B),w.return=C,C=w):(r(C,w),w=Wg(B,C.mode,S),w.return=C,C=w),i(C)):r(C,w)}return I}var Aa=q_(!0),J_=q_(!1),gh=ti(null),ph=null,jo=null,Y0=null;function Z0(){Y0=jo=ph=null}function ew(t){var e=gh.current;Kt(gh),t._currentValue=e}function am(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Wo(t,e){ph=t,Y0=jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(Y0!==t)if(t={context:t,memoizedValue:e,next:null},jo===null){if(ph===null)throw Error(he(308));jo=t,ph.dependencies={lanes:0,firstContext:t}}else jo=jo.next=t;return e}var Ti=null;function tw(t){Ti===null?Ti=[t]:Ti.push(t)}function X_(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,tw(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ns(t,n)}function Ns(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var oA=!1;function rw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function SA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,yt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ns(t,r)}return s=n.interleaved,s===null?(e.next=e,tw(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ns(t,r)}function Fd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,O0(t,r)}}function lx(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};A===null?s=A=i:A=A.next=i,r=r.next}while(r!==null);A===null?s=A=e:A=A.next=e}else s=A=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function mh(t,e,r,n){var s=t.updateQueue;oA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var o=a,c=o.next;o.next=null,i===null?A=c:i.next=c,i=o;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=o))}if(A!==null){var h=s.baseState;i=0,d=c=o=null,a=A;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(f=e,m=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=tr({},h,f);break e;case 2:oA=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,o=h):d=d.next=m,i|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(o=h),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Mi|=i,t.lanes=i,t.memoizedState=h}}function cx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(he(191,s));s.call(n)}}}var zc={},os=ti(zc),mc=ti(zc),wc=ti(zc);function Fi(t){if(t===zc)throw Error(he(174));return t}function nw(t,e){switch(Pt(wc,e),Pt(mc,t),Pt(os,zc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hp(e,t)}Kt(os),Pt(os,e)}function ia(){Kt(os),Kt(mc),Kt(wc)}function Z_(t){Fi(wc.current);var e=Fi(os.current),r=Hp(e,t.type);e!==r&&(Pt(mc,t),Pt(os,r))}function sw(t){mc.current===t&&(Kt(os),Kt(mc))}var Yt=ti(0);function wh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hg=[];function Aw(){for(var t=0;t<Hg.length;t++)Hg[t]._workInProgressVersionPrimary=null;Hg.length=0}var Sd=Os.ReactCurrentDispatcher,Vg=Os.ReactCurrentBatchConfig,ji=0,Zt=null,gr=null,Cr=null,yh=!1,Kl=!1,yc=0,ok=0;function Or(){throw Error(he(321))}function iw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!qn(t[r],e[r]))return!1;return!0}function ow(t,e,r,n,s,A){if(ji=A,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sd.current=t===null||t.memoizedState===null?uk:dk,t=r(n,s),Kl){A=0;do{if(Kl=!1,yc=0,25<=A)throw Error(he(301));A+=1,Cr=gr=null,e.updateQueue=null,Sd.current=hk,t=r(n,s)}while(Kl)}if(Sd.current=vh,e=gr!==null&&gr.next!==null,ji=0,Cr=gr=Zt=null,yh=!1,e)throw Error(he(300));return t}function aw(){var t=yc!==0;return yc=0,t}function ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cr===null?Zt.memoizedState=Cr=t:Cr=Cr.next=t,Cr}function jn(){if(gr===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=gr.next;var e=Cr===null?Zt.memoizedState:Cr.next;if(e!==null)Cr=e,gr=t;else{if(t===null)throw Error(he(310));gr=t,t={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Cr===null?Zt.memoizedState=Cr=t:Cr=Cr.next=t}return Cr}function vc(t,e){return typeof e=="function"?e(t):e}function Kg(t){var e=jn(),r=e.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=t;var n=gr,s=n.baseQueue,A=r.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}n.baseQueue=s=A,r.pending=null}if(s!==null){A=s.next,n=n.baseState;var a=i=null,o=null,c=A;do{var d=c.lane;if((ji&d)===d)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=h,i=n):o=o.next=h,Zt.lanes|=d,Mi|=d}c=c.next}while(c!==null&&c!==A);o===null?i=n:o.next=a,qn(n,e.memoizedState)||(ln=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=o,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do A=s.lane,Zt.lanes|=A,Mi|=A,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Gg(t){var e=jn(),r=e.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,A=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);qn(A,e.memoizedState)||(ln=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),r.lastRenderedState=A}return[A,n]}function eI(){}function tI(t,e){var r=Zt,n=jn(),s=e(),A=!qn(n.memoizedState,s);if(A&&(n.memoizedState=s,ln=!0),n=n.queue,lw(sI.bind(null,r,n,t),[t]),n.getSnapshot!==e||A||Cr!==null&&Cr.memoizedState.tag&1){if(r.flags|=2048,xc(9,nI.bind(null,r,n,s,e),void 0,null),_r===null)throw Error(he(349));ji&30||rI(r,e,s)}return s}function rI(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function nI(t,e,r,n){e.value=r,e.getSnapshot=n,AI(e)&&iI(t)}function sI(t,e,r){return r(function(){AI(e)&&iI(t)})}function AI(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!qn(t,r)}catch{return!0}}function iI(t){var e=Ns(t,1);e!==null&&$n(e,t,1,-1)}function ux(t){var e=ts();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:t},e.queue=t,t=t.dispatch=ck.bind(null,Zt,t),[e.memoizedState,t]}function xc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function oI(){return jn().memoizedState}function Ud(t,e,r,n){var s=ts();Zt.flags|=t,s.memoizedState=xc(1|e,r,void 0,n===void 0?null:n)}function mf(t,e,r,n){var s=jn();n=n===void 0?null:n;var A=void 0;if(gr!==null){var i=gr.memoizedState;if(A=i.destroy,n!==null&&iw(n,i.deps)){s.memoizedState=xc(e,r,A,n);return}}Zt.flags|=t,s.memoizedState=xc(1|e,r,A,n)}function dx(t,e){return Ud(8390656,8,t,e)}function lw(t,e){return mf(2048,8,t,e)}function aI(t,e){return mf(4,2,t,e)}function lI(t,e){return mf(4,4,t,e)}function cI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uI(t,e,r){return r=r!=null?r.concat([t]):null,mf(4,4,cI.bind(null,e,t),r)}function cw(){}function dI(t,e){var r=jn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&iw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function hI(t,e){var r=jn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&iw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function fI(t,e,r){return ji&21?(qn(r,e)||(r=y_(),Zt.lanes|=r,Mi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=r)}function ak(t,e){var r=Et;Et=r!==0&&4>r?r:4,t(!0);var n=Vg.transition;Vg.transition={};try{t(!1),e()}finally{Et=r,Vg.transition=n}}function gI(){return jn().memoizedState}function lk(t,e,r){var n=QA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pI(t))mI(e,r);else if(r=X_(t,e,r,n),r!==null){var s=en();$n(r,t,n,s),wI(r,e,n)}}function ck(t,e,r){var n=QA(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pI(t))mI(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,a=A(i,r);if(s.hasEagerState=!0,s.eagerState=a,qn(a,i)){var o=e.interleaved;o===null?(s.next=s,tw(e)):(s.next=o.next,o.next=s),e.interleaved=s;return}}catch{}finally{}r=X_(t,e,s,n),r!==null&&(s=en(),$n(r,t,n,s),wI(r,e,n))}}function pI(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function mI(t,e){Kl=yh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function wI(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,O0(t,r)}}var vh={readContext:Ln,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},uk={readContext:Ln,useCallback:function(t,e){return ts().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:dx,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ud(4194308,4,cI.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ud(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ud(4,2,t,e)},useMemo:function(t,e){var r=ts();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ts();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=lk.bind(null,Zt,t),[n.memoizedState,t]},useRef:function(t){var e=ts();return t={current:t},e.memoizedState=t},useState:ux,useDebugValue:cw,useDeferredValue:function(t){return ts().memoizedState=t},useTransition:function(){var t=ux(!1),e=t[0];return t=ak.bind(null,t[1]),ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Zt,s=ts();if($t){if(r===void 0)throw Error(he(407));r=r()}else{if(r=e(),_r===null)throw Error(he(349));ji&30||rI(n,e,r)}s.memoizedState=r;var A={value:r,getSnapshot:e};return s.queue=A,dx(sI.bind(null,n,A,t),[t]),n.flags|=2048,xc(9,nI.bind(null,n,A,r,e),void 0,null),r},useId:function(){var t=ts(),e=_r.identifierPrefix;if($t){var r=bs,n=Cs;r=(n&~(1<<32-zn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=yc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ok++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dk={readContext:Ln,useCallback:dI,useContext:Ln,useEffect:lw,useImperativeHandle:uI,useInsertionEffect:aI,useLayoutEffect:lI,useMemo:hI,useReducer:Kg,useRef:oI,useState:function(){return Kg(vc)},useDebugValue:cw,useDeferredValue:function(t){var e=jn();return fI(e,gr.memoizedState,t)},useTransition:function(){var t=Kg(vc)[0],e=jn().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:gI,unstable_isNewReconciler:!1},hk={readContext:Ln,useCallback:dI,useContext:Ln,useEffect:lw,useImperativeHandle:uI,useInsertionEffect:aI,useLayoutEffect:lI,useMemo:hI,useReducer:Gg,useRef:oI,useState:function(){return Gg(vc)},useDebugValue:cw,useDeferredValue:function(t){var e=jn();return gr===null?e.memoizedState=t:fI(e,gr.memoizedState,t)},useTransition:function(){var t=Gg(vc)[0],e=jn().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:gI,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=tr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function lm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:tr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var wf={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=en(),s=QA(t),A=Ss(n,s);A.payload=e,r!=null&&(A.callback=r),e=SA(t,A,s),e!==null&&($n(e,t,s,n),Fd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=en(),s=QA(t),A=Ss(n,s);A.tag=1,A.payload=e,r!=null&&(A.callback=r),e=SA(t,A,s),e!==null&&($n(e,t,s,n),Fd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=en(),n=QA(t),s=Ss(r,n);s.tag=2,e!=null&&(s.callback=e),e=SA(t,s,n),e!==null&&($n(e,t,n,r),Fd(e,t,n))}};function hx(t,e,r,n,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,A,i):e.prototype&&e.prototype.isPureReactComponent?!hc(r,n)||!hc(s,A):!0}function yI(t,e,r){var n=!1,s=HA,A=e.contextType;return typeof A=="object"&&A!==null?A=Ln(A):(s=fn(e)?Pi:Jr.current,n=e.contextTypes,A=(n=n!=null)?na(t,s):HA),e=new e(r,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function fx(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&wf.enqueueReplaceState(e,e.state,null)}function cm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},rw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Ln(A):(A=fn(e)?Pi:Jr.current,s.context=na(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(lm(t,e,A,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wf.enqueueReplaceState(s,s.state,null),mh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oa(t,e){try{var r="",n=e;do r+=OU(n),n=n.return;while(n);var s=r}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function zg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function um(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var fk=typeof WeakMap=="function"?WeakMap:Map;function vI(t,e,r){r=Ss(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Bh||(Bh=!0,xm=n),um(t,e)},r}function xI(t,e,r){r=Ss(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){um(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){um(t,e),typeof n!="function"&&(UA===null?UA=new Set([this]):UA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function gx(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new fk;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Tk.bind(null,t,e,r),e.then(t,t))}function px(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mx(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ss(-1,1),e.tag=2,SA(r,e,1))),r.lanes|=1),t)}var gk=Os.ReactCurrentOwner,ln=!1;function Zr(t,e,r,n){e.child=t===null?J_(e,null,r,n):Aa(e,t.child,r,n)}function wx(t,e,r,n,s){r=r.render;var A=e.ref;return Wo(e,s),n=ow(t,e,r,n,A,s),r=aw(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rs(t,e,s)):($t&&r&&q0(e),e.flags|=1,Zr(t,e,n,s),e.child)}function yx(t,e,r,n,s){if(t===null){var A=r.type;return typeof A=="function"&&!ww(A)&&A.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=A,BI(t,e,A,n,s)):(t=Rd(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(r=r.compare,r=r!==null?r:hc,r(i,n)&&t.ref===e.ref)return Rs(t,e,s)}return e.flags|=1,t=kA(A,n),t.ref=e.ref,t.return=e,e.child=t}function BI(t,e,r,n,s){if(t!==null){var A=t.memoizedProps;if(hc(A,n)&&t.ref===e.ref)if(ln=!1,e.pendingProps=n=A,(t.lanes&s)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Rs(t,e,s)}return dm(t,e,r,n,s)}function CI(t,e,r){var n=e.pendingProps,s=n.children,A=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(Oo,wn),wn|=r;else{if(!(r&1073741824))return t=A!==null?A.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pt(Oo,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=A!==null?A.baseLanes:r,Pt(Oo,wn),wn|=n}else A!==null?(n=A.baseLanes|r,e.memoizedState=null):n=r,Pt(Oo,wn),wn|=n;return Zr(t,e,s,r),e.child}function bI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function dm(t,e,r,n,s){var A=fn(r)?Pi:Jr.current;return A=na(e,A),Wo(e,s),r=ow(t,e,r,n,A,s),n=aw(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rs(t,e,s)):($t&&n&&q0(e),e.flags|=1,Zr(t,e,r,s),e.child)}function vx(t,e,r,n,s){if(fn(r)){var A=!0;dh(e)}else A=!1;if(Wo(e,s),e.stateNode===null)Qd(t,e),yI(e,r,n),cm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=fn(r)?Pi:Jr.current,c=na(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||o!==c)&&fx(e,i,n,c),oA=!1;var f=e.memoizedState;i.state=f,mh(e,n,i,s),o=e.memoizedState,a!==n||f!==o||hn.current||oA?(typeof d=="function"&&(lm(e,r,d,n),o=e.memoizedState),(a=oA||hx(e,r,a,n,f,o,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),i.props=n,i.state=o,i.context=c,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Y_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vn(e.type,a),i.props=c,h=e.pendingProps,f=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=Ln(o):(o=fn(r)?Pi:Jr.current,o=na(e,o));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||f!==o)&&fx(e,i,n,o),oA=!1,f=e.memoizedState,i.state=f,mh(e,n,i,s);var v=e.memoizedState;a!==h||f!==v||hn.current||oA?(typeof m=="function"&&(lm(e,r,m,n),v=e.memoizedState),(c=oA||hx(e,r,c,n,f,v,o)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=o,n=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return hm(t,e,r,n,A,s)}function hm(t,e,r,n,s,A){bI(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&Ax(e,r,!1),Rs(t,e,A);n=e.stateNode,gk.current=e;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Aa(e,t.child,null,A),e.child=Aa(e,null,a,A)):Zr(t,e,a,A),e.memoizedState=n.state,s&&Ax(e,r,!0),e.child}function _I(t){var e=t.stateNode;e.pendingContext?sx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sx(t,e.context,!1),nw(t,e.containerInfo)}function xx(t,e,r,n,s){return sa(),X0(s),e.flags|=256,Zr(t,e,r,n),e.child}var fm={dehydrated:null,treeContext:null,retryLane:0};function gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function II(t,e,r){var n=e.pendingProps,s=Yt.current,A=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pt(Yt,s&1),t===null)return om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,A?(n=e.mode,A=e.child,i={mode:"hidden",children:i},!(n&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=xf(i,n,0,null),t=Qi(t,n,r,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=gm(r),e.memoizedState=fm,t):uw(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return pk(t,e,i,n,a,s,r);if(A){A=n.fallback,i=e.mode,s=t.child,a=s.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=kA(s,o),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?A=kA(a,A):(A=Qi(A,i,r,null),A.flags|=2),A.return=e,n.return=e,n.sibling=A,e.child=n,n=A,A=e.child,i=t.child.memoizedState,i=i===null?gm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~r,e.memoizedState=fm,n}return A=t.child,t=A.sibling,n=kA(A,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function uw(t,e){return e=xf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ou(t,e,r,n){return n!==null&&X0(n),Aa(e,t.child,null,r),t=uw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pk(t,e,r,n,s,A,i){if(r)return e.flags&256?(e.flags&=-257,n=zg(Error(he(422))),Ou(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=n.fallback,s=e.mode,n=xf({mode:"visible",children:n.children},s,0,null),A=Qi(A,s,i,null),A.flags|=2,n.return=e,A.return=e,n.sibling=A,e.child=n,e.mode&1&&Aa(e,t.child,null,i),e.child.memoizedState=gm(i),e.memoizedState=fm,A);if(!(e.mode&1))return Ou(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,A=Error(he(419)),n=zg(A,n,void 0),Ou(t,e,i,n)}if(a=(i&t.childLanes)!==0,ln||a){if(n=_r,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Ns(t,s),$n(n,t,s,-1))}return mw(),n=zg(Error(he(421))),Ou(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Fk.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,xn=FA(s.nextSibling),Bn=e,$t=!0,Gn=null,t!==null&&(Sn[Un++]=Cs,Sn[Un++]=bs,Sn[Un++]=Li,Cs=t.id,bs=t.overflow,Li=e),e=uw(e,n.children),e.flags|=4096,e)}function Bx(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),am(t.return,e,r)}function $g(t,e,r,n,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=n,A.tail=r,A.tailMode=s)}function EI(t,e,r){var n=e.pendingProps,s=n.revealOrder,A=n.tail;if(Zr(t,e,n.children,r),n=Yt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bx(t,r,e);else if(t.tag===19)Bx(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pt(Yt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&wh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),$g(e,!1,s,r,A);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}$g(e,!0,r,null,A);break;case"together":$g(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,r=kA(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=kA(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function mk(t,e,r){switch(e.tag){case 3:_I(e),sa();break;case 5:Z_(e);break;case 1:fn(e.type)&&dh(e);break;case 4:nw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Pt(gh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pt(Yt,Yt.current&1),e.flags|=128,null):r&e.child.childLanes?II(t,e,r):(Pt(Yt,Yt.current&1),t=Rs(t,e,r),t!==null?t.sibling:null);Pt(Yt,Yt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return EI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pt(Yt,Yt.current),n)break;return null;case 22:case 23:return e.lanes=0,CI(t,e,r)}return Rs(t,e,r)}var TI,pm,FI,SI;TI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pm=function(){};FI=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Fi(os.current);var A=null;switch(r){case"input":s=Lp(t,s),n=Lp(t,n),A=[];break;case"select":s=tr({},s,{value:void 0}),n=tr({},n,{value:void 0}),A=[];break;case"textarea":s=Op(t,s),n=Op(t,n),A=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ch)}Vp(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ic.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in n){var o=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&a[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(A||(A=[]),A.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(A=A||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(A=A||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ic.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Ot("scroll",t),A||a===o||(A=[])):(A=A||[]).push(c,o))}r&&(A=A||[]).push("style",r);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};SI=function(t,e,r,n){r!==n&&(e.flags|=4)};function al(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Hr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function wk(t,e,r){var n=e.pendingProps;switch(J0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hr(e),null;case 1:return fn(e.type)&&uh(),Hr(e),null;case 3:return n=e.stateNode,ia(),Kt(hn),Kt(Jr),Aw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ju(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(bm(Gn),Gn=null))),pm(t,e),Hr(e),null;case 5:sw(e);var s=Fi(wc.current);if(r=e.type,t!==null&&e.stateNode!=null)FI(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(he(166));return Hr(e),null}if(t=Fi(os.current),ju(e)){n=e.stateNode,r=e.type;var A=e.memoizedProps;switch(n[ns]=e,n[pc]=A,t=(e.mode&1)!==0,r){case"dialog":Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":case"embed":Ot("load",n);break;case"video":case"audio":for(s=0;s<bl.length;s++)Ot(bl[s],n);break;case"source":Ot("error",n);break;case"img":case"image":case"link":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"input":Uv(n,A),Ot("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!A.multiple},Ot("invalid",n);break;case"textarea":kv(n,A),Ot("invalid",n)}Vp(r,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var a=A[i];i==="children"?typeof a=="string"?n.textContent!==a&&(A.suppressHydrationWarning!==!0&&Lu(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(A.suppressHydrationWarning!==!0&&Lu(n.textContent,a,t),s=["children",""+a]):ic.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Ot("scroll",n)}switch(r){case"input":Su(n),Qv(n,A,!0);break;case"textarea":Su(n),Nv(n);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(n.onclick=ch)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=s_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[ns]=e,t[pc]=n,TI(t,e,!1,!1),e.stateNode=t;e:{switch(i=Kp(r,n),r){case"dialog":Ot("cancel",t),Ot("close",t),s=n;break;case"iframe":case"object":case"embed":Ot("load",t),s=n;break;case"video":case"audio":for(s=0;s<bl.length;s++)Ot(bl[s],t);s=n;break;case"source":Ot("error",t),s=n;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),s=n;break;case"details":Ot("toggle",t),s=n;break;case"input":Uv(t,n),s=Lp(t,n),Ot("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=tr({},n,{value:void 0}),Ot("invalid",t);break;case"textarea":kv(t,n),s=Op(t,n),Ot("invalid",t);break;default:s=n}Vp(r,s),a=s;for(A in a)if(a.hasOwnProperty(A)){var o=a[A];A==="style"?o_(t,o):A==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&A_(t,o)):A==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&oc(t,o):typeof o=="number"&&oc(t,""+o):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(ic.hasOwnProperty(A)?o!=null&&A==="onScroll"&&Ot("scroll",t):o!=null&&R0(t,A,o,i))}switch(r){case"input":Su(t),Qv(t,n,!1);break;case"textarea":Su(t),Nv(t);break;case"option":n.value!=null&&t.setAttribute("value",""+OA(n.value));break;case"select":t.multiple=!!n.multiple,A=n.value,A!=null?Ko(t,!!n.multiple,A,!1):n.defaultValue!=null&&Ko(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ch)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hr(e),null;case 6:if(t&&e.stateNode!=null)SI(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(he(166));if(r=Fi(wc.current),Fi(os.current),ju(e)){if(n=e.stateNode,r=e.memoizedProps,n[ns]=e,(A=n.nodeValue!==r)&&(t=Bn,t!==null))switch(t.tag){case 3:Lu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lu(n.nodeValue,r,(t.mode&1)!==0)}A&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ns]=e,e.stateNode=n}return Hr(e),null;case 13:if(Kt(Yt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&xn!==null&&e.mode&1&&!(e.flags&128))W_(),sa(),e.flags|=98560,A=!1;else if(A=ju(e),n!==null&&n.dehydrated!==null){if(t===null){if(!A)throw Error(he(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(he(317));A[ns]=e}else sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hr(e),A=!1}else Gn!==null&&(bm(Gn),Gn=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?mr===0&&(mr=3):mw())),e.updateQueue!==null&&(e.flags|=4),Hr(e),null);case 4:return ia(),pm(t,e),t===null&&fc(e.stateNode.containerInfo),Hr(e),null;case 10:return ew(e.type._context),Hr(e),null;case 17:return fn(e.type)&&uh(),Hr(e),null;case 19:if(Kt(Yt),A=e.memoizedState,A===null)return Hr(e),null;if(n=(e.flags&128)!==0,i=A.rendering,i===null)if(n)al(A,!1);else{if(mr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=wh(t),i!==null){for(e.flags|=128,al(A,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)A=r,t=n,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pt(Yt,Yt.current&1|2),e.child}t=t.sibling}A.tail!==null&&lr()>aa&&(e.flags|=128,n=!0,al(A,!1),e.lanes=4194304)}else{if(!n)if(t=wh(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),al(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!$t)return Hr(e),null}else 2*lr()-A.renderingStartTime>aa&&r!==1073741824&&(e.flags|=128,n=!0,al(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(r=A.last,r!==null?r.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=lr(),e.sibling=null,r=Yt.current,Pt(Yt,n?r&1|2:r&1),e):(Hr(e),null);case 22:case 23:return pw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?wn&1073741824&&(Hr(e),e.subtreeFlags&6&&(e.flags|=8192)):Hr(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function yk(t,e){switch(J0(e),e.tag){case 1:return fn(e.type)&&uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ia(),Kt(hn),Kt(Jr),Aw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sw(e),null;case 13:if(Kt(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(Yt),null;case 4:return ia(),null;case 10:return ew(e.type._context),null;case 22:case 23:return pw(),null;case 24:return null;default:return null}}var Hu=!1,$r=!1,vk=typeof WeakSet=="function"?WeakSet:Set,De=null;function Mo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){sr(t,e,n)}else r.current=null}function mm(t,e,r){try{r()}catch(n){sr(t,e,n)}}var Cx=!1;function xk(t,e){if(em=oh,t=R_(),W0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,A=n.focusNode;n=n.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var i=0,a=-1,o=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(a=i+s),h!==A||n!==0&&h.nodeType!==3||(o=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===s&&(a=i),f===A&&++d===n&&(o=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=a===-1||o===-1?null:{start:a,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(tm={focusedElem:t,selectionRange:r},oh=!1,De=e;De!==null;)if(e=De,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,De=t;else for(;De!==null;){e=De;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,I=v.memoizedState,C=e.stateNode,w=C.getSnapshotBeforeUpdate(e.elementType===e.type?y:Vn(e.type,y),I);C.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(S){sr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}return v=Cx,Cx=!1,v}function Gl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&mm(e,r,A)}s=s.next}while(s!==n)}}function yf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function wm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function UI(t){var e=t.alternate;e!==null&&(t.alternate=null,UI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ns],delete e[pc],delete e[sm],delete e[nk],delete e[sk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QI(t){return t.tag===5||t.tag===3||t.tag===4}function bx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ym(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ch));else if(n!==4&&(t=t.child,t!==null))for(ym(t,e,r),t=t.sibling;t!==null;)ym(t,e,r),t=t.sibling}function vm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vm(t,e,r),t=t.sibling;t!==null;)vm(t,e,r),t=t.sibling}var Sr=null,Kn=!1;function Zs(t,e,r){for(r=r.child;r!==null;)kI(t,e,r),r=r.sibling}function kI(t,e,r){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(uf,r)}catch{}switch(r.tag){case 5:$r||Mo(r,e);case 6:var n=Sr,s=Kn;Sr=null,Zs(t,e,r),Sr=n,Kn=s,Sr!==null&&(Kn?(t=Sr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Sr.removeChild(r.stateNode));break;case 18:Sr!==null&&(Kn?(t=Sr,r=r.stateNode,t.nodeType===8?Mg(t.parentNode,r):t.nodeType===1&&Mg(t,r),uc(t)):Mg(Sr,r.stateNode));break;case 4:n=Sr,s=Kn,Sr=r.stateNode.containerInfo,Kn=!0,Zs(t,e,r),Sr=n,Kn=s;break;case 0:case 11:case 14:case 15:if(!$r&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&mm(r,e,i),s=s.next}while(s!==n)}Zs(t,e,r);break;case 1:if(!$r&&(Mo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){sr(r,e,a)}Zs(t,e,r);break;case 21:Zs(t,e,r);break;case 22:r.mode&1?($r=(n=$r)||r.memoizedState!==null,Zs(t,e,r),$r=n):Zs(t,e,r);break;default:Zs(t,e,r)}}function _x(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new vk),e.forEach(function(n){var s=Sk.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function On(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var A=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Sr=a.stateNode,Kn=!1;break e;case 3:Sr=a.stateNode.containerInfo,Kn=!0;break e;case 4:Sr=a.stateNode.containerInfo,Kn=!0;break e}a=a.return}if(Sr===null)throw Error(he(160));kI(A,i,s),Sr=null,Kn=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(c){sr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NI(e,t),e=e.sibling}function NI(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),Zn(t),n&4){try{Gl(3,t,t.return),yf(3,t)}catch(y){sr(t,t.return,y)}try{Gl(5,t,t.return)}catch(y){sr(t,t.return,y)}}break;case 1:On(e,t),Zn(t),n&512&&r!==null&&Mo(r,r.return);break;case 5:if(On(e,t),Zn(t),n&512&&r!==null&&Mo(r,r.return),t.flags&32){var s=t.stateNode;try{oc(s,"")}catch(y){sr(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=r!==null?r.memoizedProps:A,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&A.type==="radio"&&A.name!=null&&r_(s,A),Kp(a,i);var c=Kp(a,A);for(i=0;i<o.length;i+=2){var d=o[i],h=o[i+1];d==="style"?o_(s,h):d==="dangerouslySetInnerHTML"?A_(s,h):d==="children"?oc(s,h):R0(s,d,h,c)}switch(a){case"input":jp(s,A);break;case"textarea":n_(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var m=A.value;m!=null?Ko(s,!!A.multiple,m,!1):f!==!!A.multiple&&(A.defaultValue!=null?Ko(s,!!A.multiple,A.defaultValue,!0):Ko(s,!!A.multiple,A.multiple?[]:"",!1))}s[pc]=A}catch(y){sr(t,t.return,y)}}break;case 6:if(On(e,t),Zn(t),n&4){if(t.stateNode===null)throw Error(he(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(y){sr(t,t.return,y)}}break;case 3:if(On(e,t),Zn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{uc(e.containerInfo)}catch(y){sr(t,t.return,y)}break;case 4:On(e,t),Zn(t);break;case 13:On(e,t),Zn(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(fw=lr())),n&4&&_x(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?($r=(c=$r)||d,On(e,t),$r=c):On(e,t),Zn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(De=t,d=t.child;d!==null;){for(h=De=d;De!==null;){switch(f=De,m=f.child,f.tag){case 0:case 11:case 14:case 15:Gl(4,f,f.return);break;case 1:Mo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){sr(n,r,y)}}break;case 5:Mo(f,f.return);break;case 22:if(f.memoizedState!==null){Ex(h);continue}}m!==null?(m.return=f,De=m):Ex(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(a=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=i_("display",i))}catch(y){sr(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){sr(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:On(e,t),Zn(t),n&4&&_x(t);break;case 21:break;default:On(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(QI(r)){var n=r;break e}r=r.return}throw Error(he(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(oc(s,""),n.flags&=-33);var A=bx(t);vm(t,A,s);break;case 3:case 4:var i=n.stateNode.containerInfo,a=bx(t);ym(t,a,i);break;default:throw Error(he(161))}}catch(o){sr(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bk(t,e,r){De=t,RI(t)}function RI(t,e,r){for(var n=(t.mode&1)!==0;De!==null;){var s=De,A=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Hu;if(!i){var a=s.alternate,o=a!==null&&a.memoizedState!==null||$r;a=Hu;var c=$r;if(Hu=i,($r=o)&&!c)for(De=s;De!==null;)i=De,o=i.child,i.tag===22&&i.memoizedState!==null?Tx(s):o!==null?(o.return=i,De=o):Tx(s);for(;A!==null;)De=A,RI(A),A=A.sibling;De=s,Hu=a,$r=c}Ix(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,De=A):Ix(t)}}function Ix(t){for(;De!==null;){var e=De;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$r||yf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!$r)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Vn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&cx(e,A,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}cx(e,i,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&uc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}$r||e.flags&512&&wm(e)}catch(f){sr(e,e.return,f)}}if(e===t){De=null;break}if(r=e.sibling,r!==null){r.return=e.return,De=r;break}De=e.return}}function Ex(t){for(;De!==null;){var e=De;if(e===t){De=null;break}var r=e.sibling;if(r!==null){r.return=e.return,De=r;break}De=e.return}}function Tx(t){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{yf(4,e)}catch(o){sr(e,r,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(o){sr(e,s,o)}}var A=e.return;try{wm(e)}catch(o){sr(e,A,o)}break;case 5:var i=e.return;try{wm(e)}catch(o){sr(e,i,o)}}}catch(o){sr(e,e.return,o)}if(e===t){De=null;break}var a=e.sibling;if(a!==null){a.return=e.return,De=a;break}De=e.return}}var Ck=Math.ceil,xh=Os.ReactCurrentDispatcher,dw=Os.ReactCurrentOwner,Dn=Os.ReactCurrentBatchConfig,yt=0,_r=null,fr=null,Dr=0,wn=0,Oo=ti(0),mr=0,Bc=null,Mi=0,vf=0,hw=0,zl=null,on=null,fw=0,aa=1/0,vs=null,Bh=!1,xm=null,UA=null,Vu=!1,yA=null,Ch=0,$l=0,Bm=null,kd=-1,Nd=0;function en(){return yt&6?lr():kd!==-1?kd:kd=lr()}function QA(t){return t.mode&1?yt&2&&Dr!==0?Dr&-Dr:ik.transition!==null?(Nd===0&&(Nd=y_()),Nd):(t=Et,t!==0||(t=window.event,t=t===void 0?16:I_(t.type)),t):1}function $n(t,e,r,n){if(50<$l)throw $l=0,Bm=null,Error(he(185));Vc(t,r,n),(!(yt&2)||t!==_r)&&(t===_r&&(!(yt&2)&&(vf|=r),mr===4&&cA(t,Dr)),gn(t,n),r===1&&yt===0&&!(e.mode&1)&&(aa=lr()+500,pf&&ri()))}function gn(t,e){var r=t.callbackNode;iQ(t,e);var n=ih(t,t===_r?Dr:0);if(n===0)r!==null&&Pv(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Pv(r),e===1)t.tag===0?Ak(Fx.bind(null,t)):G_(Fx.bind(null,t)),tk(function(){!(yt&6)&&ri()}),r=null;else{switch(v_(n)){case 1:r=M0;break;case 4:r=m_;break;case 16:r=Ah;break;case 536870912:r=w_;break;default:r=Ah}r=VI(r,DI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function DI(t,e){if(kd=-1,Nd=0,yt&6)throw Error(he(327));var r=t.callbackNode;if(qo()&&t.callbackNode!==r)return null;var n=ih(t,t===_r?Dr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=bh(t,n);else{e=n;var s=yt;yt|=2;var A=LI();(_r!==t||Dr!==e)&&(vs=null,aa=lr()+500,Ui(t,e));do try{Ik();break}catch(a){PI(t,a)}while(!0);Z0(),xh.current=A,yt=s,fr!==null?e=0:(_r=null,Dr=0,e=mr)}if(e!==0){if(e===2&&(s=qp(t),s!==0&&(n=s,e=Cm(t,s))),e===1)throw r=Bc,Ui(t,0),cA(t,n),gn(t,lr()),r;if(e===6)cA(t,n);else{if(s=t.current.alternate,!(n&30)&&!bk(s)&&(e=bh(t,n),e===2&&(A=qp(t),A!==0&&(n=A,e=Cm(t,A))),e===1))throw r=Bc,Ui(t,0),cA(t,n),gn(t,lr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(he(345));case 2:yi(t,on,vs);break;case 3:if(cA(t,n),(n&130023424)===n&&(e=fw+500-lr(),10<e)){if(ih(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){en(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nm(yi.bind(null,t,on,vs),e);break}yi(t,on,vs);break;case 4:if(cA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-zn(n);A=1<<i,i=e[i],i>s&&(s=i),n&=~A}if(n=s,n=lr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ck(n/1960))-n,10<n){t.timeoutHandle=nm(yi.bind(null,t,on,vs),n);break}yi(t,on,vs);break;case 5:yi(t,on,vs);break;default:throw Error(he(329))}}}return gn(t,lr()),t.callbackNode===r?DI.bind(null,t):null}function Cm(t,e){var r=zl;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=bh(t,e),t!==2&&(e=on,on=r,e!==null&&bm(e)),t}function bm(t){on===null?on=t:on.push.apply(on,t)}function bk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],A=s.getSnapshot;s=s.value;try{if(!qn(A(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cA(t,e){for(e&=~hw,e&=~vf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zn(e),n=1<<r;t[r]=-1,e&=~n}}function Fx(t){if(yt&6)throw Error(he(327));qo();var e=ih(t,0);if(!(e&1))return gn(t,lr()),null;var r=bh(t,e);if(t.tag!==0&&r===2){var n=qp(t);n!==0&&(e=n,r=Cm(t,n))}if(r===1)throw r=Bc,Ui(t,0),cA(t,e),gn(t,lr()),r;if(r===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yi(t,on,vs),gn(t,lr()),null}function gw(t,e){var r=yt;yt|=1;try{return t(e)}finally{yt=r,yt===0&&(aa=lr()+500,pf&&ri())}}function Oi(t){yA!==null&&yA.tag===0&&!(yt&6)&&qo();var e=yt;yt|=1;var r=Dn.transition,n=Et;try{if(Dn.transition=null,Et=1,t)return t()}finally{Et=n,Dn.transition=r,yt=e,!(yt&6)&&ri()}}function pw(){wn=Oo.current,Kt(Oo)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ek(r)),fr!==null)for(r=fr.return;r!==null;){var n=r;switch(J0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&uh();break;case 3:ia(),Kt(hn),Kt(Jr),Aw();break;case 5:sw(n);break;case 4:ia();break;case 13:Kt(Yt);break;case 19:Kt(Yt);break;case 10:ew(n.type._context);break;case 22:case 23:pw()}r=r.return}if(_r=t,fr=t=kA(t.current,null),Dr=wn=e,mr=0,Bc=null,hw=vf=Mi=0,on=zl=null,Ti!==null){for(e=0;e<Ti.length;e++)if(r=Ti[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,A=r.pending;if(A!==null){var i=A.next;A.next=s,n.next=i}r.pending=n}Ti=null}return t}function PI(t,e){do{var r=fr;try{if(Z0(),Sd.current=vh,yh){for(var n=Zt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}yh=!1}if(ji=0,Cr=gr=Zt=null,Kl=!1,yc=0,dw.current=null,r===null||r.return===null){mr=1,Bc=e,fr=null;break}e:{var A=t,i=r.return,a=r,o=e;if(e=Dr,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=px(i);if(m!==null){m.flags&=-257,mx(m,i,a,A,e),m.mode&1&&gx(A,c,e),e=m,o=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(o),e.updateQueue=y}else v.add(o);break e}else{if(!(e&1)){gx(A,c,e),mw();break e}o=Error(he(426))}}else if($t&&a.mode&1){var I=px(i);if(I!==null){!(I.flags&65536)&&(I.flags|=256),mx(I,i,a,A,e),X0(oa(o,a));break e}}A=o=oa(o,a),mr!==4&&(mr=2),zl===null?zl=[A]:zl.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var C=vI(A,o,e);lx(A,C);break e;case 1:a=o;var w=A.type,B=A.stateNode;if(!(A.flags&128)&&(typeof w.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(UA===null||!UA.has(B)))){A.flags|=65536,e&=-e,A.lanes|=e;var S=xI(A,a,e);lx(A,S);break e}}A=A.return}while(A!==null)}MI(r)}catch(N){e=N,fr===r&&r!==null&&(fr=r=r.return);continue}break}while(!0)}function LI(){var t=xh.current;return xh.current=vh,t===null?vh:t}function mw(){(mr===0||mr===3||mr===2)&&(mr=4),_r===null||!(Mi&268435455)&&!(vf&268435455)||cA(_r,Dr)}function bh(t,e){var r=yt;yt|=2;var n=LI();(_r!==t||Dr!==e)&&(vs=null,Ui(t,e));do try{_k();break}catch(s){PI(t,s)}while(!0);if(Z0(),yt=r,xh.current=n,fr!==null)throw Error(he(261));return _r=null,Dr=0,mr}function _k(){for(;fr!==null;)jI(fr)}function Ik(){for(;fr!==null&&!XU();)jI(fr)}function jI(t){var e=HI(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?MI(t):fr=e,dw.current=null}function MI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=yk(r,e),r!==null){r.flags&=32767,fr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mr=6,fr=null;return}}else if(r=wk(r,e,wn),r!==null){fr=r;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);mr===0&&(mr=5)}function yi(t,e,r){var n=Et,s=Dn.transition;try{Dn.transition=null,Et=1,Ek(t,e,r,n)}finally{Dn.transition=s,Et=n}return null}function Ek(t,e,r,n){do qo();while(yA!==null);if(yt&6)throw Error(he(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var A=r.lanes|r.childLanes;if(oQ(t,A),t===_r&&(fr=_r=null,Dr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vu||(Vu=!0,VI(Ah,function(){return qo(),null})),A=(r.flags&15990)!==0,r.subtreeFlags&15990||A){A=Dn.transition,Dn.transition=null;var i=Et;Et=1;var a=yt;yt|=4,dw.current=null,xk(t,r),NI(r,t),$Q(tm),oh=!!em,tm=em=null,t.current=r,Bk(r),YU(),yt=a,Et=i,Dn.transition=A}else t.current=r;if(Vu&&(Vu=!1,yA=t,Ch=s),A=t.pendingLanes,A===0&&(UA=null),tQ(r.stateNode),gn(t,lr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Bh)throw Bh=!1,t=xm,xm=null,t;return Ch&1&&t.tag!==0&&qo(),A=t.pendingLanes,A&1?t===Bm?$l++:($l=0,Bm=t):$l=0,ri(),null}function qo(){if(yA!==null){var t=v_(Ch),e=Dn.transition,r=Et;try{if(Dn.transition=null,Et=16>t?16:t,yA===null)var n=!1;else{if(t=yA,yA=null,Ch=0,yt&6)throw Error(he(331));var s=yt;for(yt|=4,De=t.current;De!==null;){var A=De,i=A.child;if(De.flags&16){var a=A.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(De=c;De!==null;){var d=De;switch(d.tag){case 0:case 11:case 15:Gl(8,d,A)}var h=d.child;if(h!==null)h.return=d,De=h;else for(;De!==null;){d=De;var f=d.sibling,m=d.return;if(UI(d),d===c){De=null;break}if(f!==null){f.return=m,De=f;break}De=m}}}var v=A.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var I=y.sibling;y.sibling=null,y=I}while(y!==null)}}De=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,De=i;else e:for(;De!==null;){if(A=De,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Gl(9,A,A.return)}var C=A.sibling;if(C!==null){C.return=A.return,De=C;break e}De=A.return}}var w=t.current;for(De=w;De!==null;){i=De;var B=i.child;if(i.subtreeFlags&2064&&B!==null)B.return=i,De=B;else e:for(i=w;De!==null;){if(a=De,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yf(9,a)}}catch(N){sr(a,a.return,N)}if(a===i){De=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,De=S;break e}De=a.return}}if(yt=s,ri(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(uf,t)}catch{}n=!0}return n}finally{Et=r,Dn.transition=e}}return!1}function Sx(t,e,r){e=oa(r,e),e=vI(t,e,1),t=SA(t,e,1),e=en(),t!==null&&(Vc(t,1,e),gn(t,e))}function sr(t,e,r){if(t.tag===3)Sx(t,t,r);else for(;e!==null;){if(e.tag===3){Sx(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(UA===null||!UA.has(n))){t=oa(r,t),t=xI(e,t,1),e=SA(e,t,1),t=en(),e!==null&&(Vc(e,1,t),gn(e,t));break}}e=e.return}}function Tk(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&r,_r===t&&(Dr&r)===r&&(mr===4||mr===3&&(Dr&130023424)===Dr&&500>lr()-fw?Ui(t,0):hw|=r),gn(t,e)}function OI(t,e){e===0&&(t.mode&1?(e=ku,ku<<=1,!(ku&130023424)&&(ku=4194304)):e=1);var r=en();t=Ns(t,e),t!==null&&(Vc(t,e,r),gn(t,r))}function Fk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),OI(t,r)}function Sk(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(he(314))}n!==null&&n.delete(e),OI(t,r)}var HI;HI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)ln=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ln=!1,mk(t,e,r);ln=!!(t.flags&131072)}else ln=!1,$t&&e.flags&1048576&&z_(e,fh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Qd(t,e),t=e.pendingProps;var s=na(e,Jr.current);Wo(e,r),s=ow(null,e,n,t,s,r);var A=aw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(n)?(A=!0,dh(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rw(e),s.updater=wf,e.stateNode=s,s._reactInternals=e,cm(e,n,t,r),e=hm(null,e,n,!0,A,r)):(e.tag=0,$t&&A&&q0(e),Zr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Qd(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Qk(n),t=Vn(n,t),s){case 0:e=dm(null,e,n,t,r);break e;case 1:e=vx(null,e,n,t,r);break e;case 11:e=wx(null,e,n,t,r);break e;case 14:e=yx(null,e,n,Vn(n.type,t),r);break e}throw Error(he(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vn(n,s),dm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vn(n,s),vx(t,e,n,s,r);case 3:e:{if(_I(e),t===null)throw Error(he(387));n=e.pendingProps,A=e.memoizedState,s=A.element,Y_(t,e),mh(e,n,null,r);var i=e.memoizedState;if(n=i.element,A.isDehydrated)if(A={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=oa(Error(he(423)),e),e=xx(t,e,n,r,s);break e}else if(n!==s){s=oa(Error(he(424)),e),e=xx(t,e,n,r,s);break e}else for(xn=FA(e.stateNode.containerInfo.firstChild),Bn=e,$t=!0,Gn=null,r=J_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(sa(),n===s){e=Rs(t,e,r);break e}Zr(t,e,n,r)}e=e.child}return e;case 5:return Z_(e),t===null&&om(e),n=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,rm(n,s)?i=null:A!==null&&rm(n,A)&&(e.flags|=32),bI(t,e),Zr(t,e,i,r),e.child;case 6:return t===null&&om(e),null;case 13:return II(t,e,r);case 4:return nw(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Aa(e,null,n,r):Zr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vn(n,s),wx(t,e,n,s,r);case 7:return Zr(t,e,e.pendingProps,r),e.child;case 8:return Zr(t,e,e.pendingProps.children,r),e.child;case 12:return Zr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,Pt(gh,n._currentValue),n._currentValue=i,A!==null)if(qn(A.value,i)){if(A.children===s.children&&!hn.current){e=Rs(t,e,r);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var a=A.dependencies;if(a!==null){i=A.child;for(var o=a.firstContext;o!==null;){if(o.context===n){if(A.tag===1){o=Ss(-1,r&-r),o.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o}}A.lanes|=r,o=A.alternate,o!==null&&(o.lanes|=r),am(A.return,r,e),a.lanes|=r;break}o=o.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(he(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),am(i,r,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}Zr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Wo(e,r),s=Ln(s),n=n(s),e.flags|=1,Zr(t,e,n,r),e.child;case 14:return n=e.type,s=Vn(n,e.pendingProps),s=Vn(n.type,s),yx(t,e,n,s,r);case 15:return BI(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Vn(n,s),Qd(t,e),e.tag=1,fn(n)?(t=!0,dh(e)):t=!1,Wo(e,r),yI(e,n,s),cm(e,n,s,r),hm(null,e,n,!0,t,r);case 19:return EI(t,e,r);case 22:return CI(t,e,r)}throw Error(he(156,e.tag))};function VI(t,e){return p_(t,e)}function Uk(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,r,n){return new Uk(t,e,r,n)}function ww(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qk(t){if(typeof t=="function")return ww(t)?1:0;if(t!=null){if(t=t.$$typeof,t===P0)return 11;if(t===L0)return 14}return 2}function kA(t,e){var r=t.alternate;return r===null?(r=kn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Rd(t,e,r,n,s,A){var i=2;if(n=t,typeof t=="function")ww(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Uo:return Qi(r.children,s,A,e);case D0:i=8,s|=8;break;case Np:return t=kn(12,r,e,s|2),t.elementType=Np,t.lanes=A,t;case Rp:return t=kn(13,r,e,s),t.elementType=Rp,t.lanes=A,t;case Dp:return t=kn(19,r,e,s),t.elementType=Dp,t.lanes=A,t;case Zb:return xf(r,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xb:i=10;break e;case Yb:i=9;break e;case P0:i=11;break e;case L0:i=14;break e;case iA:i=16,n=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=kn(i,r,e,s),e.elementType=t,e.type=n,e.lanes=A,e}function Qi(t,e,r,n){return t=kn(7,t,n,e),t.lanes=r,t}function xf(t,e,r,n){return t=kn(22,t,n,e),t.elementType=Zb,t.lanes=r,t.stateNode={isHidden:!1},t}function Wg(t,e,r){return t=kn(6,t,null,e),t.lanes=r,t}function qg(t,e,r){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kk(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fg(0),this.expirationTimes=Fg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yw(t,e,r,n,s,A,i,a,o){return t=new kk(t,e,r,a,o),e===1?(e=1,A===!0&&(e|=8)):e=0,A=kn(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},rw(A),t}function Nk(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:So,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function KI(t){if(!t)return HA;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var r=t.type;if(fn(r))return K_(t,r,e)}return e}function GI(t,e,r,n,s,A,i,a,o){return t=yw(r,n,!0,t,s,A,i,a,o),t.context=KI(null),r=t.current,n=en(),s=QA(r),A=Ss(n,s),A.callback=e??null,SA(r,A,s),t.current.lanes=s,Vc(t,s,n),gn(t,n),t}function Bf(t,e,r,n){var s=e.current,A=en(),i=QA(s);return r=KI(r),e.context===null?e.context=r:e.pendingContext=r,e=Ss(A,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=SA(s,e,i),t!==null&&($n(t,s,i,A),Fd(t,s,i)),i}function _h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ux(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function vw(t,e){Ux(t,e),(t=t.alternate)&&Ux(t,e)}function Rk(){return null}var zI=typeof reportError=="function"?reportError:function(t){console.error(t)};function xw(t){this._internalRoot=t}Cf.prototype.render=xw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));Bf(t,e,null,null)};Cf.prototype.unmount=xw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oi(function(){Bf(null,t,null,null)}),e[ks]=null}};function Cf(t){this._internalRoot=t}Cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=C_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<lA.length&&e!==0&&e<lA[r].priority;r++);lA.splice(r,0,t),r===0&&__(t)}};function Bw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qx(){}function Dk(t,e,r,n,s){if(s){if(typeof n=="function"){var A=n;n=function(){var c=_h(i);A.call(c)}}var i=GI(e,n,t,0,null,!1,!1,"",Qx);return t._reactRootContainer=i,t[ks]=i.current,fc(t.nodeType===8?t.parentNode:t),Oi(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=_h(o);a.call(c)}}var o=yw(t,0,!1,null,null,!1,!1,"",Qx);return t._reactRootContainer=o,t[ks]=o.current,fc(t.nodeType===8?t.parentNode:t),Oi(function(){Bf(e,o,r,n)}),o}function _f(t,e,r,n,s){var A=r._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var a=s;s=function(){var o=_h(i);a.call(o)}}Bf(e,i,t,s)}else i=Dk(r,e,t,s,n);return _h(i)}x_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Cl(e.pendingLanes);r!==0&&(O0(e,r|1),gn(e,lr()),!(yt&6)&&(aa=lr()+500,ri()))}break;case 13:Oi(function(){var n=Ns(t,1);if(n!==null){var s=en();$n(n,t,1,s)}}),vw(t,1)}};H0=function(t){if(t.tag===13){var e=Ns(t,134217728);if(e!==null){var r=en();$n(e,t,134217728,r)}vw(t,134217728)}};B_=function(t){if(t.tag===13){var e=QA(t),r=Ns(t,e);if(r!==null){var n=en();$n(r,t,e,n)}vw(t,e)}};C_=function(){return Et};b_=function(t,e){var r=Et;try{return Et=t,e()}finally{Et=r}};zp=function(t,e,r){switch(e){case"input":if(jp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=gf(n);if(!s)throw Error(he(90));t_(n),jp(n,s)}}}break;case"textarea":n_(t,r);break;case"select":e=r.value,e!=null&&Ko(t,!!r.multiple,e,!1)}};c_=gw;u_=Oi;var Pk={usingClientEntryPoint:!1,Events:[Gc,Ro,gf,a_,l_,gw]},ll={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lk={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=f_(t),t===null?null:t.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||Rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{uf=Ku.inject(Lk),is=Ku}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pk;In.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bw(e))throw Error(he(200));return Nk(t,e,null,r)};In.createRoot=function(t,e){if(!Bw(t))throw Error(he(299));var r=!1,n="",s=zI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yw(t,1,!1,null,null,r,!1,n,s),t[ks]=e.current,fc(t.nodeType===8?t.parentNode:t),new xw(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=f_(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return Oi(t)};In.hydrate=function(t,e,r){if(!bf(e))throw Error(he(200));return _f(null,t,e,!0,r)};In.hydrateRoot=function(t,e,r){if(!Bw(t))throw Error(he(405));var n=r!=null&&r.hydratedSources||null,s=!1,A="",i=zI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(A=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=GI(e,null,t,1,r??null,s,!1,A,i),t[ks]=e.current,fc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Cf(e)};In.render=function(t,e,r){if(!bf(e))throw Error(he(200));return _f(null,t,e,!1,r)};In.unmountComponentAtNode=function(t){if(!bf(t))throw Error(he(40));return t._reactRootContainer?(Oi(function(){_f(null,null,t,!1,function(){t._reactRootContainer=null,t[ks]=null})}),!0):!1};In.unstable_batchedUpdates=gw;In.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!bf(r))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return _f(t,e,r,!1,n)};In.version="18.3.1-next-f1338f8080-20240426";function $I(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($I)}catch(t){console.error(t)}}$I(),$b.exports=In;var jk=$b.exports,kx=jk;Qp.createRoot=kx.createRoot,Qp.hydrateRoot=kx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cc.apply(this,arguments)}var vA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vA||(vA={}));const Nx="popstate";function Mk(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:a="",hash:o=""}=ro(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),_m("",{pathname:i,search:a,hash:o},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(s,A){let i=s.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let o=s.location.href,c=o.indexOf("#");a=c===-1?o:o.slice(0,c)}return a+"#"+(typeof A=="string"?A:Ih(A))}function n(s,A){If(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return Hk(e,r,n,t)}function er(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function If(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ok(){return Math.random().toString(36).substr(2,8)}function Rx(t,e){return{usr:t.state,key:t.key,idx:e}}function _m(t,e,r,n){return r===void 0&&(r=null),Cc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:r,key:e&&e.key||n||Ok()})}function Ih(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ro(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Hk(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:A=!1}=n,i=s.history,a=vA.Pop,o=null,c=d();c==null&&(c=0,i.replaceState(Cc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){a=vA.Pop;let I=d(),C=I==null?null:I-c;c=I,o&&o({action:a,location:y.location,delta:C})}function f(I,C){a=vA.Push;let w=_m(y.location,I,C);r&&r(w,I),c=d()+1;let B=Rx(w,c),S=y.createHref(w);try{i.pushState(B,"",S)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(S)}A&&o&&o({action:a,location:y.location,delta:1})}function m(I,C){a=vA.Replace;let w=_m(y.location,I,C);r&&r(w,I),c=d();let B=Rx(w,c),S=y.createHref(w);i.replaceState(B,"",S),A&&o&&o({action:a,location:y.location,delta:0})}function v(I){let C=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof I=="string"?I:Ih(I);return w=w.replace(/ $/,"%20"),er(C,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,C)}let y={get action(){return a},get location(){return t(s,i)},listen(I){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(Nx,h),o=I,()=>{s.removeEventListener(Nx,h),o=null}},createHref(I){return e(s,I)},createURL:v,encodeLocation(I){let C=v(I);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:m,go(I){return i.go(I)}};return y}var Dx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Dx||(Dx={}));function Vk(t,e,r){return r===void 0&&(r="/"),Kk(t,e,r)}function Kk(t,e,r,n){let s=typeof e=="string"?ro(e):e,A=la(s.pathname||"/",r);if(A==null)return null;let i=WI(t);Gk(i);let a=null;for(let o=0;a==null&&o<i.length;++o){let c=r2(A);a=e2(i[o],c)}return a}function WI(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(A,i,a)=>{let o={relativePath:a===void 0?A.path||"":a,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};o.relativePath.startsWith("/")&&(er(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=NA([n,o.relativePath]),d=r.concat(o);A.children&&A.children.length>0&&(er(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),WI(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:Yk(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var a;if(A.path===""||!((a=A.path)!=null&&a.includes("?")))s(A,i);else for(let o of qI(A.path))s(A,i,o)}),e}function qI(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return s?[A,""]:[A];let i=qI(n.join("/")),a=[];return a.push(...i.map(o=>o===""?A:[A,o].join("/"))),s&&a.push(...i),a.map(o=>t.startsWith("/")&&o===""?"/":o)}function Gk(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Zk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const zk=/^:[\w-]+$/,$k=3,Wk=2,qk=1,Jk=10,Xk=-2,Px=t=>t==="*";function Yk(t,e){let r=t.split("/"),n=r.length;return r.some(Px)&&(n+=Xk),e&&(n+=Wk),r.filter(s=>!Px(s)).reduce((s,A)=>s+(zk.test(A)?$k:A===""?qk:Jk),n)}function Zk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function e2(t,e,r){let{routesMeta:n}=t,s={},A="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],c=a===n.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=Im({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d),f=o.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:NA([A,h.pathname]),pathnameBase:o2(NA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=NA([A,h.pathnameBase]))}return i}function Im(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=t2(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let y=a[h]||"";i=A.slice(0,A.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function t2(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),If(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(n.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function r2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return If(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function la(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const n2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,s2=t=>n2.test(t);function A2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ro(t):t,A;if(r)if(s2(r))A=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),If(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?A=Lx(r.substring(1),"/"):A=Lx(r,e)}else A=e;return{pathname:A,search:a2(n),hash:l2(s)}}function Lx(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Jg(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Cw(t,e){let r=i2(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function bw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ro(t):(s=Cc({},t),er(!s.pathname||!s.pathname.includes("?"),Jg("?","pathname","search",s)),er(!s.pathname||!s.pathname.includes("#"),Jg("#","pathname","hash",s)),er(!s.search||!s.search.includes("#"),Jg("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,a;if(i==null)a=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let o=A2(s,a),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||d)&&(o.pathname+="/"),o}const NA=t=>t.join("/").replace(/\/\/+/g,"/"),o2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),a2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,l2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function c2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JI=["post","put","patch","delete"];new Set(JI);const u2=["get",...JI];new Set(u2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bc.apply(this,arguments)}const Ef=U.createContext(null),XI=U.createContext(null),Hs=U.createContext(null),Tf=U.createContext(null),Vs=U.createContext({outlet:null,matches:[],isDataRoute:!1}),YI=U.createContext(null);function d2(t,e){let{relative:r}=e===void 0?{}:e;Ua()||er(!1);let{basename:n,navigator:s}=U.useContext(Hs),{hash:A,pathname:i,search:a}=Ff(t,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:NA([n,i])),s.createHref({pathname:o,search:a,hash:A})}function Ua(){return U.useContext(Tf)!=null}function ni(){return Ua()||er(!1),U.useContext(Tf).location}function ZI(t){U.useContext(Hs).static||U.useLayoutEffect(t)}function $c(){let{isDataRoute:t}=U.useContext(Vs);return t?E2():h2()}function h2(){Ua()||er(!1);let t=U.useContext(Ef),{basename:e,future:r,navigator:n}=U.useContext(Hs),{matches:s}=U.useContext(Vs),{pathname:A}=ni(),i=JSON.stringify(Cw(s,r.v7_relativeSplatPath)),a=U.useRef(!1);return ZI(()=>{a.current=!0}),U.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=bw(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:NA([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,A,t])}const f2=U.createContext(null);function g2(t){let e=U.useContext(Vs).outlet;return e&&U.createElement(f2.Provider,{value:t},e)}function Ff(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=U.useContext(Hs),{matches:s}=U.useContext(Vs),{pathname:A}=ni(),i=JSON.stringify(Cw(s,n.v7_relativeSplatPath));return U.useMemo(()=>bw(t,JSON.parse(i),A,r==="path"),[t,i,A,r])}function p2(t,e){return m2(t,e)}function m2(t,e,r,n){Ua()||er(!1);let{navigator:s}=U.useContext(Hs),{matches:A}=U.useContext(Vs),i=A[A.length-1],a=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c=ni(),d;if(e){var h;let I=typeof e=="string"?ro(e):e;o==="/"||(h=I.pathname)!=null&&h.startsWith(o)||er(!1),d=I}else d=c;let f=d.pathname||"/",m=f;if(o!=="/"){let I=o.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let v=Vk(t,{pathname:m}),y=B2(v&&v.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:NA([o,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?o:NA([o,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),A,r,n);return e&&y?U.createElement(Tf.Provider,{value:{location:bc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:vA.Pop}},y):y}function w2(){let t=I2(),e=c2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),r?U.createElement("pre",{style:s},r):null,null)}const y2=U.createElement(w2,null);class v2 extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?U.createElement(Vs.Provider,{value:this.props.routeContext},U.createElement(YI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function x2(t){let{routeContext:e,match:r,children:n}=t,s=U.useContext(Ef);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),U.createElement(Vs.Provider,{value:e},n)}function B2(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var A;if(!r)return null;if(r.errors)t=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||er(!1),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,v=!1,y=null,I=null;r&&(m=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||y2,o&&(c<0&&f===0?(T2("route-fallback"),v=!0,I=null):c===f&&(v=!0,I=h.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,f+1)),w=()=>{let B;return m?B=y:v?B=I:h.route.Component?B=U.createElement(h.route.Component,null):h.route.element?B=h.route.element:B=d,U.createElement(x2,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:B})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?U.createElement(v2,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):w()},null)}var eE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eE||{}),tE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tE||{});function C2(t){let e=U.useContext(Ef);return e||er(!1),e}function b2(t){let e=U.useContext(XI);return e||er(!1),e}function _2(t){let e=U.useContext(Vs);return e||er(!1),e}function rE(t){let e=_2(),r=e.matches[e.matches.length-1];return r.route.id||er(!1),r.route.id}function I2(){var t;let e=U.useContext(YI),r=b2(),n=rE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function E2(){let{router:t}=C2(eE.UseNavigateStable),e=rE(tE.UseNavigateStable),r=U.useRef(!1);return ZI(()=>{r.current=!0}),U.useCallback(function(s,A){A===void 0&&(A={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bc({fromRouteId:e},A)))},[t,e])}const jx={};function T2(t,e,r){jx[t]||(jx[t]=!0)}function F2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Eh(t){let{to:e,replace:r,state:n,relative:s}=t;Ua()||er(!1);let{future:A,static:i}=U.useContext(Hs),{matches:a}=U.useContext(Vs),{pathname:o}=ni(),c=$c(),d=bw(e,Cw(a,A.v7_relativeSplatPath),o,s==="path"),h=JSON.stringify(d);return U.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function S2(t){return g2(t.context)}function sn(t){er(!1)}function U2(t){let{basename:e="/",children:r=null,location:n,navigationType:s=vA.Pop,navigator:A,static:i=!1,future:a}=t;Ua()&&er(!1);let o=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:o,navigator:A,static:i,future:bc({v7_relativeSplatPath:!1},a)}),[o,a,A,i]);typeof n=="string"&&(n=ro(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=n,y=U.useMemo(()=>{let I=la(d,o);return I==null?null:{location:{pathname:I,search:h,hash:f,state:m,key:v},navigationType:s}},[o,d,h,f,m,v,s]);return y==null?null:U.createElement(Hs.Provider,{value:c},U.createElement(Tf.Provider,{children:r,value:y}))}function Q2(t){let{children:e,location:r}=t;return p2(Em(e),r)}new Promise(()=>{});function Em(t,e){e===void 0&&(e=[]);let r=[];return U.Children.forEach(t,(n,s)=>{if(!U.isValidElement(n))return;let A=[...e,s];if(n.type===U.Fragment){r.push.apply(r,Em(n.props.children,A));return}n.type!==sn&&er(!1),!n.props.index||!n.props.children||er(!1);let i={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Em(n.props.children,A)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Th.apply(this,arguments)}function nE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,A;for(A=0;A<n.length;A++)s=n[A],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function k2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function N2(t,e){return t.button===0&&(!e||e==="_self")&&!k2(t)}function Tm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function R2(t,e){let r=Tm(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(A=>{r.append(s,A)})}),r}const D2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],P2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],L2="6";try{window.__reactRouterVersion=L2}catch{}const j2=U.createContext({isTransitioning:!1}),M2="startTransition",Mx=TU[M2];function O2(t){let{basename:e,children:r,future:n,window:s}=t,A=U.useRef();A.current==null&&(A.current=Mk({window:s,v5Compat:!0}));let i=A.current,[a,o]=U.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=U.useCallback(h=>{c&&Mx?Mx(()=>o(h)):o(h)},[o,c]);return U.useLayoutEffect(()=>i.listen(d),[i,d]),U.useEffect(()=>F2(n),[n]),U.createElement(U2,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const H2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K2=U.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:A,replace:i,state:a,target:o,to:c,preventScrollReset:d,viewTransition:h}=e,f=nE(e,D2),{basename:m}=U.useContext(Hs),v,y=!1;if(typeof c=="string"&&V2.test(c)&&(v=c,H2))try{let B=new URL(window.location.href),S=c.startsWith("//")?new URL(B.protocol+c):new URL(c),N=la(S.pathname,m);S.origin===B.origin&&N!=null?c=N+S.search+S.hash:y=!0}catch{}let I=d2(c,{relative:s}),C=z2(c,{replace:i,state:a,target:o,preventScrollReset:d,relative:s,viewTransition:h});function w(B){n&&n(B),B.defaultPrevented||C(B)}return U.createElement("a",Th({},f,{href:v||I,onClick:y||A?n:w,ref:r,target:o}))}),Dd=U.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:A="",end:i=!1,style:a,to:o,viewTransition:c,children:d}=e,h=nE(e,P2),f=Ff(o,{relative:h.relative}),m=ni(),v=U.useContext(XI),{navigator:y,basename:I}=U.useContext(Hs),C=v!=null&&W2(f)&&c===!0,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,B=m.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(B=B.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&I&&(S=la(S,I)||S);const N=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let Q=B===w||!i&&B.startsWith(w)&&B.charAt(N)==="/",x=S!=null&&(S===w||!i&&S.startsWith(w)&&S.charAt(w.length)==="/"),b={isActive:Q,isPending:x,isTransitioning:C},_=Q?n:void 0,k;typeof A=="function"?k=A(b):k=[A,Q?"active":null,x?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(b):a;return U.createElement(K2,Th({},h,{"aria-current":_,className:k,ref:r,style:R,to:o,viewTransition:c}),typeof d=="function"?d(b):d)});var Fm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fm||(Fm={}));var Ox;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ox||(Ox={}));function G2(t){let e=U.useContext(Ef);return e||er(!1),e}function z2(t,e){let{target:r,replace:n,state:s,preventScrollReset:A,relative:i,viewTransition:a}=e===void 0?{}:e,o=$c(),c=ni(),d=Ff(t,{relative:i});return U.useCallback(h=>{if(N2(h,r)){h.preventDefault();let f=n!==void 0?n:Ih(c)===Ih(d);o(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:a})}},[c,o,d,n,s,r,t,A,i,a])}function $2(t){let e=U.useRef(Tm(t)),r=U.useRef(!1),n=ni(),s=U.useMemo(()=>R2(n.search,r.current?null:e.current),[n.search]),A=$c(),i=U.useCallback((a,o)=>{const c=Tm(typeof a=="function"?a(s):a);r.current=!0,A("?"+c,o)},[A,s]);return[s,i]}function W2(t,e){e===void 0&&(e={});let r=U.useContext(j2);r==null&&er(!1);let{basename:n}=G2(Fm.useViewTransitionState),s=Ff(t,{relative:e.relative});if(!r.isTransitioning)return!1;let A=la(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=la(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Im(s.pathname,i)!=null||Im(s.pathname,A)!=null}var ie=(t=>(t.First="1 ",t.Second="2 ",t))(ie||{}),ct=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ct||{});const bt=["","","","",""],yn={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Hx=["","","/","","","",""," "],Fh=[{shift:ie.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ie.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ie.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ie.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ie.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ie.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ie.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ie.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ie.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ie.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ie.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ie.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ie.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ie.Second,period:6,start:"18:50",end:"19:35",day:"default"}],q2=[{shift:ie.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:ie.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:ie.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:ie.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:ie.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:ie.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:ie.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:ie.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:ie.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:ie.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:ie.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:ie.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:ie.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:ie.Second,period:6,start:"17:00",end:"17:35",day:"default"}],cl=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),sE=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:cl(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:cl(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:cl(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:cl(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:cl(78,86),order:5}],an={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ie.First,studentsCount:25},{id:"c2",name:"6",shift:ie.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2ndHalf:[],substitutions:[],bellSchedule:Fh,dutyZones:sE,dutySchedule:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",bellPresets:[{id:"preset_normal",name:" (45 )",bells:Fh},{id:"preset_short",name:" (35 )",bells:q2}]}},J2="modulepreload",X2=function(t){return"/zamenygymn/"+t},Vx={},Y2=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(o=>{if(o=X2(o),o in Vx)return;Vx[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":J2,c||(h.as="script"),h.crossOrigin="",h.href=o,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function A(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&A(a.reason);return e().catch(A)})};var Kx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},Z2=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[r++];e[n++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[r++],i=t[r++],a=t[r++],o=((s&7)<<18|(A&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const A=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,a=i?t[s+1]:0,o=s+2<t.length,c=o?t[s+2]:0,d=A>>2,h=(A&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;o||(m=64,i||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const A=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,A==null||a==null||c==null||h==null)throw new eN;const f=A<<2|a>>4;if(n.push(f),c!==64){const m=a<<4&240|c>>2;if(n.push(m),h!==64){const v=c<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tN=function(t){const e=AE(t);return iE.encodeByteArray(e,!0)},Sh=function(t){return tN(t).replace(/\./g,"")},oE=function(t){try{return iE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=()=>rN().__FIREBASE_DEFAULTS__,sN=()=>{if(typeof process>"u"||typeof Kx>"u")return;const t=Kx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oE(t[1]);return e&&JSON.parse(e)},Sf=()=>{try{return nN()||sN()||AN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aE=t=>{var e,r;return(r=(e=Sf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},iN=t=>{const e=aE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},lE=()=>{var t;return(t=Sf())===null||t===void 0?void 0:t.config},cE=t=>{var e;return(e=Sf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sh(JSON.stringify(r)),Sh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function cN(){var t;const e=(t=Sf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fN(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uE(){return!cN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dE(){try{return typeof indexedDB=="object"}catch{return!1}}function gN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="FirebaseError";class Ks extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=pN,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?mN(A,n):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Ks(s,a,n)}}function mN(t,e){return t.replace(wN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const wN=/\{\$([^}]+)}/g;function yN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function VA(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const A=t[s],i=e[s];if(Gx(A)&&Gx(i)){if(!VA(A,i))return!1}else if(A!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Gx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function _l(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,A]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Il(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function vN(t,e){const r=new xN(t,e);return r.subscribe.bind(r)}class xN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");BN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Xg),s.error===void 0&&(s.error=Xg),s.complete===void 0&&(s.complete=Xg);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class Hi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new oN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_N(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const A=this.getOrInitializeService({instanceIdentifier:s});n.resolve(A)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[A,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(A);n===a&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),A=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:bN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bN(t){return t===vi?void 0:t}function _N(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new CN(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const EN={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},TN=ft.INFO,FN={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},SN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=FN[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let _w=class{constructor(e){this.name=e,this._logLevel=TN,this._logHandler=SN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}};const UN=(t,e)=>e.some(r=>t instanceof r);let zx,$x;function QN(){return zx||(zx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kN(){return $x||($x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,Sm=new WeakMap,fE=new WeakMap,Yg=new WeakMap,Iw=new WeakMap;function NN(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{r(RA(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&hE.set(r,t)}).catch(()=>{}),Iw.set(e,t),e}function RN(t){if(Sm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});Sm.set(t,e)}let Um={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return RA(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DN(t){Um=t(Um)}function PN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Zg(this),e,...r);return fE.set(n,e.sort?e.sort():[e]),RA(n)}:kN().includes(t)?function(...e){return t.apply(Zg(this),e),RA(hE.get(this))}:function(...e){return RA(t.apply(Zg(this),e))}}function LN(t){return typeof t=="function"?PN(t):(t instanceof IDBTransaction&&RN(t),UN(t,QN())?new Proxy(t,Um):t)}function RA(t){if(t instanceof IDBRequest)return NN(t);if(Yg.has(t))return Yg.get(t);const e=LN(t);return e!==t&&(Yg.set(t,e),Iw.set(e,t)),e}const Zg=t=>Iw.get(t);function jN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),a=RA(i);return n&&i.addEventListener("upgradeneeded",o=>{n(RA(i.result),o.oldVersion,o.newVersion,RA(i.transaction),o)}),r&&i.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{A&&o.addEventListener("close",()=>A()),s&&o.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const MN=["get","getKey","getAll","getAllKeys","count"],ON=["put","add","delete","clear"],ep=new Map;function Wx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ep.get(e))return ep.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=ON.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||MN.includes(r)))return;const A=async function(i,...a){const o=this.transaction(i,s?"readwrite":"readonly");let c=o.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),s&&o.done]))[0]};return ep.set(e,A),A}DN(t=>({...t,get:(e,r,n)=>Wx(e,r)||t.get(e,r,n),has:(e,r)=>!!Wx(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(VN(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function VN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qm="@firebase/app",qx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new _w("@firebase/app"),KN="@firebase/app-compat",GN="@firebase/analytics-compat",zN="@firebase/analytics",$N="@firebase/app-check-compat",WN="@firebase/app-check",qN="@firebase/auth",JN="@firebase/auth-compat",XN="@firebase/database",YN="@firebase/data-connect",ZN="@firebase/database-compat",eR="@firebase/functions",tR="@firebase/functions-compat",rR="@firebase/installations",nR="@firebase/installations-compat",sR="@firebase/messaging",AR="@firebase/messaging-compat",iR="@firebase/performance",oR="@firebase/performance-compat",aR="@firebase/remote-config",lR="@firebase/remote-config-compat",cR="@firebase/storage",uR="@firebase/storage-compat",dR="@firebase/firestore",hR="@firebase/vertexai-preview",fR="@firebase/firestore-compat",gR="firebase",pR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="[DEFAULT]",mR={[Qm]:"fire-core",[KN]:"fire-core-compat",[zN]:"fire-analytics",[GN]:"fire-analytics-compat",[WN]:"fire-app-check",[$N]:"fire-app-check-compat",[qN]:"fire-auth",[JN]:"fire-auth-compat",[XN]:"fire-rtdb",[YN]:"fire-data-connect",[ZN]:"fire-rtdb-compat",[eR]:"fire-fn",[tR]:"fire-fn-compat",[rR]:"fire-iid",[nR]:"fire-iid-compat",[sR]:"fire-fcm",[AR]:"fire-fcm-compat",[iR]:"fire-perf",[oR]:"fire-perf-compat",[aR]:"fire-rc",[lR]:"fire-rc-compat",[cR]:"fire-gcs",[uR]:"fire-gcs-compat",[dR]:"fire-fst",[fR]:"fire-fst-compat",[hR]:"fire-vertex","fire-js":"fire-js",[gR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,wR=new Map,km=new Map;function Jx(t,e){try{t.container.addComponent(e)}catch(r){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ca(t){const e=t.name;if(km.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,t);for(const r of _c.values())Jx(r,t);for(const r of wR.values())Jx(r,t);return!0}function Jc(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function yR(t,e,r=Uh){Jc(t,e).clearInstance(r)}function _s(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},DA=new Wc("app","Firebase",vR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw DA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=pR;function gE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Uh,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw DA.create("bad-app-name",{appName:String(s)});if(r||(r=lE()),!r)throw DA.create("no-options");const A=_c.get(s);if(A){if(VA(r,A.options)&&VA(n,A.config))return A;throw DA.create("duplicate-app",{appName:s})}const i=new IN(s);for(const o of km.values())i.addComponent(o);const a=new xR(r,n,i);return _c.set(s,a),a}function Ew(t=Uh){const e=_c.get(t);if(!e&&t===Uh&&lE())return gE();if(!e)throw DA.create("no-app",{appName:t});return e}function BR(){return Array.from(_c.values())}function PA(t,e,r){var n;let s=(n=mR[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const a=[`Unable to register library "${s}" with version "${e}":`];A&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(a.join(" "));return}ca(new Hi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firebase-heartbeat-database",bR=1,Ic="firebase-heartbeat-store";let tp=null;function pE(){return tp||(tp=jN(CR,bR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ic)}catch(r){console.warn(r)}}}}).catch(t=>{throw DA.create("idb-open",{originalErrorMessage:t.message})})),tp}async function _R(t){try{const r=(await pE()).transaction(Ic),n=await r.objectStore(Ic).get(mE(t));return await r.done,n}catch(e){if(e instanceof Ks)Ds.warn(e.message);else{const r=DA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(r.message)}}}async function Xx(t,e){try{const n=(await pE()).transaction(Ic,"readwrite");await n.objectStore(Ic).put(e,mE(t)),await n.done}catch(r){if(r instanceof Ks)Ds.warn(r.message);else{const n=DA.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ds.warn(n.message)}}}function mE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1024,ER=30*24*60*60*1e3;class TR{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new SR(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=Yx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=ER}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ds.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Yx(),{heartbeatsToSend:n,unsentEntries:s}=FR(this._heartbeatsCache.heartbeats),A=Sh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(r){return Ds.warn(r),""}}}function Yx(){return new Date().toISOString().substring(0,10)}function FR(t,e=IR){const r=[];let n=t.slice();for(const s of t){const A=r.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),Zx(r)>e){A.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Zx(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class SR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dE()?gN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await _R(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xx(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xx(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zx(t){return Sh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){ca(new Hi("platform-logger",e=>new HN(e),"PRIVATE")),ca(new Hi("heartbeat",e=>new TR(e),"PRIVATE")),PA(Qm,qx,t),PA(Qm,qx,"esm2017"),PA("fire-js","")}UR("");var QR="firebase",kR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */PA(QR,kR,"app");var eB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,wE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,b){function _(){}_.prototype=b.prototype,x.D=b.prototype,x.prototype=new _,x.prototype.constructor=x,x.C=function(k,R,P){for(var E=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)E[Me-2]=arguments[Me];return b.prototype[R].apply(k,E)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,b,_){_||(_=0);var k=Array(16);if(typeof b=="string")for(var R=0;16>R;++R)k[R]=b.charCodeAt(_++)|b.charCodeAt(_++)<<8|b.charCodeAt(_++)<<16|b.charCodeAt(_++)<<24;else for(R=0;16>R;++R)k[R]=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24;b=x.g[0],_=x.g[1],R=x.g[2];var P=x.g[3],E=b+(P^_&(R^P))+k[0]+3614090360&4294967295;b=_+(E<<7&4294967295|E>>>25),E=P+(R^b&(_^R))+k[1]+3905402710&4294967295,P=b+(E<<12&4294967295|E>>>20),E=R+(_^P&(b^_))+k[2]+606105819&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(b^R&(P^b))+k[3]+3250441966&4294967295,_=R+(E<<22&4294967295|E>>>10),E=b+(P^_&(R^P))+k[4]+4118548399&4294967295,b=_+(E<<7&4294967295|E>>>25),E=P+(R^b&(_^R))+k[5]+1200080426&4294967295,P=b+(E<<12&4294967295|E>>>20),E=R+(_^P&(b^_))+k[6]+2821735955&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(b^R&(P^b))+k[7]+4249261313&4294967295,_=R+(E<<22&4294967295|E>>>10),E=b+(P^_&(R^P))+k[8]+1770035416&4294967295,b=_+(E<<7&4294967295|E>>>25),E=P+(R^b&(_^R))+k[9]+2336552879&4294967295,P=b+(E<<12&4294967295|E>>>20),E=R+(_^P&(b^_))+k[10]+4294925233&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(b^R&(P^b))+k[11]+2304563134&4294967295,_=R+(E<<22&4294967295|E>>>10),E=b+(P^_&(R^P))+k[12]+1804603682&4294967295,b=_+(E<<7&4294967295|E>>>25),E=P+(R^b&(_^R))+k[13]+4254626195&4294967295,P=b+(E<<12&4294967295|E>>>20),E=R+(_^P&(b^_))+k[14]+2792965006&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(b^R&(P^b))+k[15]+1236535329&4294967295,_=R+(E<<22&4294967295|E>>>10),E=b+(R^P&(_^R))+k[1]+4129170786&4294967295,b=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(b^_))+k[6]+3225465664&4294967295,P=b+(E<<9&4294967295|E>>>23),E=R+(b^_&(P^b))+k[11]+643717713&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^b&(R^P))+k[0]+3921069994&4294967295,_=R+(E<<20&4294967295|E>>>12),E=b+(R^P&(_^R))+k[5]+3593408605&4294967295,b=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(b^_))+k[10]+38016083&4294967295,P=b+(E<<9&4294967295|E>>>23),E=R+(b^_&(P^b))+k[15]+3634488961&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^b&(R^P))+k[4]+3889429448&4294967295,_=R+(E<<20&4294967295|E>>>12),E=b+(R^P&(_^R))+k[9]+568446438&4294967295,b=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(b^_))+k[14]+3275163606&4294967295,P=b+(E<<9&4294967295|E>>>23),E=R+(b^_&(P^b))+k[3]+4107603335&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^b&(R^P))+k[8]+1163531501&4294967295,_=R+(E<<20&4294967295|E>>>12),E=b+(R^P&(_^R))+k[13]+2850285829&4294967295,b=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(b^_))+k[2]+4243563512&4294967295,P=b+(E<<9&4294967295|E>>>23),E=R+(b^_&(P^b))+k[7]+1735328473&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^b&(R^P))+k[12]+2368359562&4294967295,_=R+(E<<20&4294967295|E>>>12),E=b+(_^R^P)+k[5]+4294588738&4294967295,b=_+(E<<4&4294967295|E>>>28),E=P+(b^_^R)+k[8]+2272392833&4294967295,P=b+(E<<11&4294967295|E>>>21),E=R+(P^b^_)+k[11]+1839030562&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^b)+k[14]+4259657740&4294967295,_=R+(E<<23&4294967295|E>>>9),E=b+(_^R^P)+k[1]+2763975236&4294967295,b=_+(E<<4&4294967295|E>>>28),E=P+(b^_^R)+k[4]+1272893353&4294967295,P=b+(E<<11&4294967295|E>>>21),E=R+(P^b^_)+k[7]+4139469664&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^b)+k[10]+3200236656&4294967295,_=R+(E<<23&4294967295|E>>>9),E=b+(_^R^P)+k[13]+681279174&4294967295,b=_+(E<<4&4294967295|E>>>28),E=P+(b^_^R)+k[0]+3936430074&4294967295,P=b+(E<<11&4294967295|E>>>21),E=R+(P^b^_)+k[3]+3572445317&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^b)+k[6]+76029189&4294967295,_=R+(E<<23&4294967295|E>>>9),E=b+(_^R^P)+k[9]+3654602809&4294967295,b=_+(E<<4&4294967295|E>>>28),E=P+(b^_^R)+k[12]+3873151461&4294967295,P=b+(E<<11&4294967295|E>>>21),E=R+(P^b^_)+k[15]+530742520&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^b)+k[2]+3299628645&4294967295,_=R+(E<<23&4294967295|E>>>9),E=b+(R^(_|~P))+k[0]+4096336452&4294967295,b=_+(E<<6&4294967295|E>>>26),E=P+(_^(b|~R))+k[7]+1126891415&4294967295,P=b+(E<<10&4294967295|E>>>22),E=R+(b^(P|~_))+k[14]+2878612391&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~b))+k[5]+4237533241&4294967295,_=R+(E<<21&4294967295|E>>>11),E=b+(R^(_|~P))+k[12]+1700485571&4294967295,b=_+(E<<6&4294967295|E>>>26),E=P+(_^(b|~R))+k[3]+2399980690&4294967295,P=b+(E<<10&4294967295|E>>>22),E=R+(b^(P|~_))+k[10]+4293915773&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~b))+k[1]+2240044497&4294967295,_=R+(E<<21&4294967295|E>>>11),E=b+(R^(_|~P))+k[8]+1873313359&4294967295,b=_+(E<<6&4294967295|E>>>26),E=P+(_^(b|~R))+k[15]+4264355552&4294967295,P=b+(E<<10&4294967295|E>>>22),E=R+(b^(P|~_))+k[6]+2734768916&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~b))+k[13]+1309151649&4294967295,_=R+(E<<21&4294967295|E>>>11),E=b+(R^(_|~P))+k[4]+4149444226&4294967295,b=_+(E<<6&4294967295|E>>>26),E=P+(_^(b|~R))+k[11]+3174756917&4294967295,P=b+(E<<10&4294967295|E>>>22),E=R+(b^(P|~_))+k[2]+718787259&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~b))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+b&4294967295,x.g[1]=x.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+P&4294967295}n.prototype.u=function(x,b){b===void 0&&(b=x.length);for(var _=b-this.blockSize,k=this.B,R=this.h,P=0;P<b;){if(R==0)for(;P<=_;)s(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<b;)if(k[R++]=x.charCodeAt(P++),R==this.blockSize){s(this,k),R=0;break}}else for(;P<b;)if(k[R++]=x[P++],R==this.blockSize){s(this,k),R=0;break}}this.h=R,this.o+=b},n.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var b=1;b<x.length-8;++b)x[b]=0;var _=8*this.o;for(b=x.length-8;b<x.length;++b)x[b]=_&255,_/=256;for(this.u(x),x=Array(16),b=_=0;4>b;++b)for(var k=0;32>k;k+=8)x[_++]=this.g[b]>>>k&255;return x};function A(x,b){var _=a;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=b(x)}function i(x,b){this.h=b;for(var _=[],k=!0,R=x.length-1;0<=R;R--){var P=x[R]|0;k&&P==b||(_[R]=P,k=!1)}this.g=_}var a={};function o(x){return-128<=x&&128>x?A(x,function(b){return new i([b|0],0>b?-1:0)}):new i([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return I(c(-x));for(var b=[],_=1,k=0;x>=_;k++)b[k]=x/_|0,_*=4294967296;return new i(b,0)}function d(x,b){if(x.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x.charAt(0)=="-")return I(d(x.substring(1),b));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(b,8)),k=h,R=0;R<x.length;R+=8){var P=Math.min(8,x.length-R),E=parseInt(x.substring(R,R+P),b);8>P?(P=c(Math.pow(b,P)),k=k.j(P).add(c(E))):(k=k.j(_),k=k.add(c(E)))}return k}var h=o(0),f=o(1),m=o(16777216);t=i.prototype,t.m=function(){if(y(this))return-I(this).m();for(var x=0,b=1,_=0;_<this.g.length;_++){var k=this.i(_);x+=(0<=k?k:4294967296+k)*b,b*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(y(this))return"-"+I(this).toString(x);for(var b=c(Math.pow(x,6)),_=this,k="";;){var R=S(_,b).g;_=C(_,R.j(b));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(x);if(_=R,v(_))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var b=0;b<x.g.length;b++)if(x.g[b]!=0)return!1;return!0}function y(x){return x.h==-1}t.l=function(x){return x=C(this,x),y(x)?-1:v(x)?0:1};function I(x){for(var b=x.g.length,_=[],k=0;k<b;k++)_[k]=~x.g[k];return new i(_,~x.h).add(f)}t.abs=function(){return y(this)?I(this):this},t.add=function(x){for(var b=Math.max(this.g.length,x.g.length),_=[],k=0,R=0;R<=b;R++){var P=k+(this.i(R)&65535)+(x.i(R)&65535),E=(P>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);k=E>>>16,P&=65535,E&=65535,_[R]=E<<16|P}return new i(_,_[_.length-1]&-2147483648?-1:0)};function C(x,b){return x.add(I(b))}t.j=function(x){if(v(this)||v(x))return h;if(y(this))return y(x)?I(this).j(I(x)):I(I(this).j(x));if(y(x))return I(this.j(I(x)));if(0>this.l(m)&&0>x.l(m))return c(this.m()*x.m());for(var b=this.g.length+x.g.length,_=[],k=0;k<2*b;k++)_[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<x.g.length;R++){var P=this.i(k)>>>16,E=this.i(k)&65535,Me=x.i(R)>>>16,Ge=x.i(R)&65535;_[2*k+2*R]+=E*Ge,w(_,2*k+2*R),_[2*k+2*R+1]+=P*Ge,w(_,2*k+2*R+1),_[2*k+2*R+1]+=E*Me,w(_,2*k+2*R+1),_[2*k+2*R+2]+=P*Me,w(_,2*k+2*R+2)}for(k=0;k<b;k++)_[k]=_[2*k+1]<<16|_[2*k];for(k=b;k<2*b;k++)_[k]=0;return new i(_,0)};function w(x,b){for(;(x[b]&65535)!=x[b];)x[b+1]+=x[b]>>>16,x[b]&=65535,b++}function B(x,b){this.g=x,this.h=b}function S(x,b){if(v(b))throw Error("division by zero");if(v(x))return new B(h,h);if(y(x))return b=S(I(x),b),new B(I(b.g),I(b.h));if(y(b))return b=S(x,I(b)),new B(I(b.g),b.h);if(30<x.g.length){if(y(x)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var _=f,k=b;0>=k.l(x);)_=N(_),k=N(k);var R=Q(_,1),P=Q(k,1);for(k=Q(k,2),_=Q(_,2);!v(k);){var E=P.add(k);0>=E.l(x)&&(R=R.add(_),P=E),k=Q(k,1),_=Q(_,1)}return b=C(x,R.j(b)),new B(R,b)}for(R=h;0<=x.l(b);){for(_=Math.max(1,Math.floor(x.m()/b.m())),k=Math.ceil(Math.log(_)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=c(_),E=P.j(b);y(E)||0<E.l(x);)_-=k,P=c(_),E=P.j(b);v(P)&&(P=f),R=R.add(P),x=C(x,E)}return new B(R,x)}t.A=function(x){return S(this,x).h},t.and=function(x){for(var b=Math.max(this.g.length,x.g.length),_=[],k=0;k<b;k++)_[k]=this.i(k)&x.i(k);return new i(_,this.h&x.h)},t.or=function(x){for(var b=Math.max(this.g.length,x.g.length),_=[],k=0;k<b;k++)_[k]=this.i(k)|x.i(k);return new i(_,this.h|x.h)},t.xor=function(x){for(var b=Math.max(this.g.length,x.g.length),_=[],k=0;k<b;k++)_[k]=this.i(k)^x.i(k);return new i(_,this.h^x.h)};function N(x){for(var b=x.g.length+1,_=[],k=0;k<b;k++)_[k]=x.i(k)<<1|x.i(k-1)>>>31;return new i(_,x.h)}function Q(x,b){var _=b>>5;b%=32;for(var k=x.g.length-_,R=[],P=0;P<k;P++)R[P]=0<b?x.i(P+_)>>>b|x.i(P+_+1)<<32-b:x.i(P+_);return new i(R,x.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,wE=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,ki=i}).apply(typeof eB<"u"?eB:typeof self<"u"?self:typeof window<"u"?window:{});var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,El,vE,Pd,Nm,xE,BE,CE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gu=="object"&&Gu];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function s(u,g){if(g)e:{var p=n;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in p))break e;p=p[M]}u=u[u.length-1],T=p[u],g=g(T),g!=T&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var p=0,T=!1,M={next:function(){if(!T&&p<u.length){var W=p++;return{value:g(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(g,M)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function v(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,M,W){for(var ve=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)ve[Nt-2]=arguments[Nt];return g.prototype[M].apply(T,ve)}}function y(u){const g=u.length;if(0<g){const p=Array(g);for(let T=0;T<g;T++)p[T]=u[T];return p}return[]}function I(u,g){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(o(T)){const M=u.length||0,W=T.length||0;u.length=M+W;for(let ve=0;ve<W;ve++)u[M+ve]=T[ve]}else u.push(T)}}class C{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function S(u){return S[" "](u),u}S[" "]=function(){};var N=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function Q(u,g,p){for(const T in u)g.call(p,u[T],T,u)}function x(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function b(u){const g={};for(const p in u)g[p]=u[p];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,g){let p,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(p in T)u[p]=T[p];for(let W=0;W<_.length;W++)p=_[W],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function R(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function P(u){a.setTimeout(()=>{throw u},0)}function E(){var u=xe;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Me{constructor(){this.h=this.g=null}add(g,p){const T=Ge.get();T.set(g,p),this.h?this.h.next=T:this.g=T,this.h=T}}var Ge=new C(()=>new it,u=>u.reset());class it{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let We,ae=!1,xe=new Me,Re=()=>{const u=a.Promise.resolve(void 0);We=()=>{u.then(X)}};var X=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){P(p)}var g=Ge;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ae=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,g),a.removeEventListener("test",p,g)}catch{}return u}();function ze(u,g){if(Te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(N){e:{try{S(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ye[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ze.aa.h.call(this)}}v(ze,Te);var Ye={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function Oe(u,g,p,T,M){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!T,this.ha=M,this.key=++Tt,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function we(u){this.src=u,this.g={},this.h=0}we.prototype.add=function(u,g,p,T,M){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ve=be(u,g,T,M);return-1<ve?(g=u[ve],p||(g.fa=!1)):(g=new Oe(g,this.src,W,!!T,M),g.fa=p,u.push(g)),g};function ne(u,g){var p=g.type;if(p in u.g){var T=u.g[p],M=Array.prototype.indexOf.call(T,g,void 0),W;(W=0<=M)&&Array.prototype.splice.call(T,M,1),W&&(re(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function be(u,g,p,T){for(var M=0;M<u.length;++M){var W=u[M];if(!W.da&&W.listener==g&&W.capture==!!p&&W.ha==T)return M}return-1}var L="closure_lm_"+(1e6*Math.random()|0),O={};function z(u,g,p,T,M){if(Array.isArray(g)){for(var W=0;W<g.length;W++)z(u,g[W],p,T,M);return null}return p=Be(p),u&&u[Ke]?u.K(g,p,c(T)?!!T.capture:!1,M):me(u,g,p,!1,T,M)}function me(u,g,p,T,M,W){if(!g)throw Error("Invalid event type");var ve=c(M)?!!M.capture:!!M,Nt=ce(u);if(Nt||(u[L]=Nt=new we(u)),p=Nt.add(g,p,T,ve,W),p.proxy)return p;if(T=$e(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)qe||(M=ve),M===void 0&&(M=!1),u.addEventListener(g.toString(),T,M);else if(u.attachEvent)u.attachEvent(se(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function $e(){function u(p){return g.call(u.src,u.listener,p)}const g=nt;return u}function Z(u,g,p,T,M){if(Array.isArray(g))for(var W=0;W<g.length;W++)Z(u,g[W],p,T,M);else T=c(T)?!!T.capture:!!T,p=Be(p),u&&u[Ke]?(u=u.i,g=String(g).toString(),g in u.g&&(W=u.g[g],p=be(W,p,T,M),-1<p&&(re(W[p]),Array.prototype.splice.call(W,p,1),W.length==0&&(delete u.g[g],u.h--)))):u&&(u=ce(u))&&(g=u.g[g.toString()],u=-1,g&&(u=be(g,p,T,M)),(p=-1<u?g[u]:null)&&Y(p))}function Y(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ke])ne(g.i,u);else{var p=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(p,T,u.capture):g.detachEvent?g.detachEvent(se(p),T):g.addListener&&g.removeListener&&g.removeListener(T),(p=ce(g))?(ne(p,u),p.h==0&&(p.src=null,g[L]=null)):re(u)}}}function se(u){return u in O?O[u]:O[u]="on"+u}function nt(u,g){if(u.da)u=!0;else{g=new ze(g,this);var p=u.listener,T=u.ha||u.src;u.fa&&Y(u),u=p.call(T,g)}return u}function ce(u){return u=u[L],u instanceof we?u:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(u){return typeof u=="function"?u:(u[_e]||(u[_e]=function(g){return u.handleEvent(g)}),u[_e])}function ue(){Ee.call(this),this.i=new we(this),this.M=this,this.F=null}v(ue,Ee),ue.prototype[Ke]=!0,ue.prototype.removeEventListener=function(u,g,p,T){Z(this,u,g,p,T)};function ge(u,g){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new Te(g,u);else if(g instanceof Te)g.target=g.target||u;else{var M=g;g=new Te(T,u),k(g,M)}if(M=!0,p)for(var W=p.length-1;0<=W;W--){var ve=g.g=p[W];M=Qe(ve,T,!0,g)&&M}if(ve=g.g=u,M=Qe(ve,T,!0,g)&&M,M=Qe(ve,T,!1,g)&&M,p)for(W=0;W<p.length;W++)ve=g.g=p[W],M=Qe(ve,T,!1,g)&&M}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],T=0;T<p.length;T++)re(p[T]);delete u.g[g],u.h--}}this.F=null},ue.prototype.K=function(u,g,p,T){return this.i.add(String(u),g,!1,p,T)},ue.prototype.L=function(u,g,p,T){return this.i.add(String(u),g,!0,p,T)};function Qe(u,g,p,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,W=0;W<g.length;++W){var ve=g[W];if(ve&&!ve.da&&ve.capture==p){var Nt=ve.listener,Tr=ve.ha||ve.src;ve.fa&&ne(u.i,ve),M=Nt.call(Tr,T)!==!1&&M}}return M&&!T.defaultPrevented}function je(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function fe(u){u.g=je(()=>{u.g=null,u.i&&(u.i=!1,fe(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class lt extends Ee{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:fe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ze(u){Ee.call(this),this.h=u,this.g={}}v(Ze,Ee);var at=[];function Le(u){Q(u.g,function(g,p){this.g.hasOwnProperty(p)&&Y(g)},u),u.g={}}Ze.prototype.N=function(){Ze.aa.N.call(this),Le(this)},Ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pe=a.JSON.stringify,He=a.JSON.parse,et=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function vt(){}vt.prototype.h=null;function wt(u){return u.h||(u.h=u.i())}function D(){}var q={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $(){Te.call(this,"d")}v($,Te);function H(){Te.call(this,"c")}v(H,Te);var Se={},Fe=null;function de(){return Fe=Fe||new ue}Se.La="serverreachability";function F(u){Te.call(this,Se.La,u)}v(F,Te);function V(u){const g=de();ge(g,new F(g))}Se.STAT_EVENT="statevent";function ee(u,g){Te.call(this,Se.STAT_EVENT,u),this.stat=g}v(ee,Te);function Ae(u){const g=de();ge(g,new ee(g,u))}Se.Ma="timingevent";function te(u,g){Te.call(this,Se.Ma,u),this.size=g}v(te,Te);function J(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function Ie(){this.g=!0}Ie.prototype.xa=function(){this.g=!1};function Xe(u,g,p,T,M,W){u.info(function(){if(u.g)if(W)for(var ve="",Nt=W.split("&"),Tr=0;Tr<Nt.length;Tr++){var xt=Nt[Tr].split("=");if(1<xt.length){var jr=xt[0];xt=xt[1];var Mr=jr.split("_");ve=2<=Mr.length&&Mr[1]=="type"?ve+(jr+"="+xt+"&"):ve+(jr+"=redacted&")}}else ve=null;else ve=W;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+g+`
`+p+`
`+ve})}function st(u,g,p,T,M,W,ve){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+g+`
`+p+`
`+W+" "+ve})}function At(u,g,p,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+kt(u,p)+(T?" "+T:"")})}function Je(u,g){u.info(function(){return"TIMEOUT: "+g})}Ie.prototype.info=function(){};function kt(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var W=M[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ve=1;ve<M.length;ve++)M[ve]=""}}}}return pe(p)}catch{return g}}var Bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ft={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_t;function Xr(){}v(Xr,vt),Xr.prototype.g=function(){return new XMLHttpRequest},Xr.prototype.i=function(){return{}},_t=new Xr;function ir(u,g,p,T){this.j=u,this.i=g,this.l=p,this.R=T||1,this.U=new Ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lr}function Lr(){this.i=null,this.g="",this.h=!1}var Tn={},Yn={};function qs(u,g,p){u.L=1,u.v=yu(ps(g)),u.m=p,u.P=!0,nn(u,null)}function nn(u,g){u.F=Date.now(),di(u),u.A=ps(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),nv(p.i,"t",T),u.C=0,p=u.j.J,u.h=new Lr,u.g=xv(u.j,p?g:null,!u.m),0<u.O&&(u.M=new lt(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(at[0]=M.toString()),M=at);for(var W=0;W<M.length;W++){var ve=z(p,M[W],T||g.handleEvent,!1,g.h||g);if(!ve)break;g.g[ve.key]=ve}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),V(),Xe(u.i,u.u,u.A,u.l,u.R,u.m)}ir.prototype.ca=function(u){u=u.target;const g=this.M;g&&ms(u)==3?g.j():this.Y(u)},ir.prototype.Y=function(u){try{if(u==this.g)e:{const Mr=ms(this.g);var g=this.g.Ba();const uo=this.g.Z();if(!(3>Mr)&&(Mr!=3||this.g&&(this.h.h||this.g.oa()||cv(this.g)))){this.J||Mr!=4||g==7||(g==8||0>=uo?V(3):V(2)),gg(this);var p=this.g.Z();this.X=p;t:if(Js(this)){var T=cv(this.g);u="";var M=T.length,W=ms(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),Wa(this);var ve="";break t}this.h.i=new a.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,u+=this.h.i.decode(T[g],{stream:!(W&&g==M-1)});T.length=0,this.h.g+=u,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=p==200,st(this.i,this.u,this.A,this.l,this.R,Mr,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,Tr=this.g;if((Nt=Tr.g?Tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Nt)){var xt=Nt;break t}}xt=null}if(p=xt)At(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pg(this,p);else{this.o=!1,this.s=3,Ae(12),hi(this),Wa(this);break e}}if(this.P){p=!0;let Mn;for(;!this.J&&this.C<ve.length;)if(Mn=Xt(this,ve),Mn==Yn){Mr==4&&(this.s=4,Ae(14),p=!1),At(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Tn){this.s=4,Ae(15),At(this.i,this.l,ve,"[Invalid Chunk]"),p=!1;break}else At(this.i,this.l,Mn,null),pg(this,Mn);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mr!=4||ve.length!=0||this.h.h||(this.s=1,Ae(16),p=!1),this.o=this.o&&p,!p)At(this.i,this.l,ve,"[Invalid Chunked Response]"),hi(this),Wa(this);else if(0<ve.length&&!this.W){this.W=!0;var jr=this.j;jr.g==this&&jr.ba&&!jr.M&&(jr.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Bg(jr),jr.M=!0,Ae(11))}}else At(this.i,this.l,ve,null),pg(this,ve);Mr==4&&hi(this),this.o&&!this.J&&(Mr==4?mv(this.j,this):(this.o=!1,di(this)))}else cU(this.g),p==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),hi(this),Wa(this)}}}catch{}finally{}};function Js(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xt(u,g){var p=u.C,T=g.indexOf(`
`,p);return T==-1?Yn:(p=Number(g.substring(p,T)),isNaN(p)?Tn:(T+=1,T+p>g.length?Yn:(g=g.slice(T,T+p),u.C=T+p,g)))}ir.prototype.cancel=function(){this.J=!0,hi(this)};function di(u){u.S=Date.now()+u.I,vr(u,u.I)}function vr(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=J(f(u.ba,u),g)}function gg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ir.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Je(this.i,this.A),this.L!=2&&(V(),Ae(17)),hi(this),this.s=2,Wa(this)):vr(this,this.S-u)};function Wa(u){u.j.G==0||u.J||mv(u.j,u)}function hi(u){gg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Le(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function pg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||mg(p.h,u))){if(!u.K&&mg(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)_u(p),Cu(p);else break e;xg(p),Ae(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=J(f(p.Za,p),6e3));if(1>=Wy(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else gi(p,11)}else if((u.K||p.g==u)&&_u(p),!w(g))for(M=p.Da.g.parse(g),g=0;g<M.length;g++){let xt=M[g];if(p.T=xt[0],xt=xt[1],p.G==2)if(xt[0]=="c"){p.K=xt[1],p.ia=xt[2];const jr=xt[3];jr!=null&&(p.la=jr,p.j.info("VER="+p.la));const Mr=xt[4];Mr!=null&&(p.Aa=Mr,p.j.info("SVER="+p.Aa));const uo=xt[5];uo!=null&&typeof uo=="number"&&0<uo&&(T=1.5*uo,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Mn=u.g;if(Mn){const Eu=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eu){var W=T.h;W.g||Eu.indexOf("spdy")==-1&&Eu.indexOf("quic")==-1&&Eu.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wg(W,W.h),W.h=null))}if(T.D){const Cg=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cg&&(T.ya=Cg,jt(T.I,T.D,Cg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var ve=u;if(T.qa=vv(T,T.J?T.ia:null,T.W),ve.K){qy(T.h,ve);var Nt=ve,Tr=T.L;Tr&&(Nt.I=Tr),Nt.B&&(gg(Nt),di(Nt)),T.g=ve}else gv(T);0<p.i.length&&bu(p)}else xt[0]!="stop"&&xt[0]!="close"||gi(p,7);else p.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?gi(p,7):vg(p):xt[0]!="noop"&&p.l&&p.l.ta(xt),p.v=0)}}V(4)}catch{}}var WS=class{constructor(u,g){this.g=u,this.map=g}};function zy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $y(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Wy(u){return u.h?1:u.g?u.g.size:0}function mg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function wg(u,g){u.g?u.g.add(g):u.h=g}function qy(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}zy.prototype.cancel=function(){if(this.i=Jy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return y(u.i)}function qS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(o(u)){for(var g=[],p=u.length,T=0;T<p;T++)g.push(u[T]);return g}g=[],p=0;for(T in u)g[p++]=u[T];return g}function JS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(o(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const T in u)g[p++]=T;return g}}}function Xy(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(o(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=JS(u),T=qS(u),M=T.length,W=0;W<M;W++)g.call(void 0,T[W],p&&p[W],u)}var Yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XS(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),M=null;if(0<=T){var W=u[p].substring(0,T);M=u[p].substring(T+1)}else W=u[p];g(W,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function fi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fi){this.h=u.h,mu(this,u.j),this.o=u.o,this.g=u.g,wu(this,u.s),this.l=u.l;var g=u.i,p=new Xa;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),Zy(this,p),this.m=u.m}else u&&(g=String(u).match(Yy))?(this.h=!1,mu(this,g[1]||"",!0),this.o=qa(g[2]||""),this.g=qa(g[3]||"",!0),wu(this,g[4]),this.l=qa(g[5]||"",!0),Zy(this,g[6]||"",!0),this.m=qa(g[7]||"")):(this.h=!1,this.i=new Xa(null,this.h))}fi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Ja(g,ev,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ja(g,ev,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ja(p,p.charAt(0)=="/"?eU:ZS,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ja(p,rU)),u.join("")};function ps(u){return new fi(u)}function mu(u,g,p){u.j=p?qa(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function wu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Zy(u,g,p){g instanceof Xa?(u.i=g,nU(u.i,u.h)):(p||(g=Ja(g,tU)),u.i=new Xa(g,u.h))}function jt(u,g,p){u.i.set(g,p)}function yu(u){return jt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function qa(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ja(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,YS),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function YS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ev=/[#\/\?@]/g,ZS=/[#\?:]/g,eU=/[#\?]/g,tU=/[#\?@]/g,rU=/#/g;function Xa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Xs(u){u.g||(u.g=new Map,u.h=0,u.i&&XS(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=Xa.prototype,t.add=function(u,g){Xs(this),this.i=null,u=lo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function tv(u,g){Xs(u),g=lo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function rv(u,g){return Xs(u),g=lo(u,g),u.g.has(g)}t.forEach=function(u,g){Xs(this),this.g.forEach(function(p,T){p.forEach(function(M){u.call(g,M,T,this)},this)},this)},t.na=function(){Xs(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let T=0;T<g.length;T++){const M=u[T];for(let W=0;W<M.length;W++)p.push(g[T])}return p},t.V=function(u){Xs(this);let g=[];if(typeof u=="string")rv(this,u)&&(g=g.concat(this.g.get(lo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return Xs(this),this.i=null,u=lo(this,u),rv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function nv(u,g,p){tv(u,g),0<p.length&&(u.i=null,u.g.set(lo(u,g),y(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var T=g[p];const W=encodeURIComponent(String(T)),ve=this.V(T);for(T=0;T<ve.length;T++){var M=W;ve[T]!==""&&(M+="="+encodeURIComponent(String(ve[T]))),u.push(M)}}return this.i=u.join("&")};function lo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function nU(u,g){g&&!u.j&&(Xs(u),u.i=null,u.g.forEach(function(p,T){var M=T.toLowerCase();T!=M&&(tv(this,T),nv(this,M,p))},u)),u.j=g}function sU(u,g){const p=new Ie;if(a.Image){const T=new Image;T.onload=m(Ys,p,"TestLoadImage: loaded",!0,g,T),T.onerror=m(Ys,p,"TestLoadImage: error",!1,g,T),T.onabort=m(Ys,p,"TestLoadImage: abort",!1,g,T),T.ontimeout=m(Ys,p,"TestLoadImage: timeout",!1,g,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function AU(u,g){const p=new Ie,T=new AbortController,M=setTimeout(()=>{T.abort(),Ys(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(M),W.ok?Ys(p,"TestPingServer: ok",!0,g):Ys(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Ys(p,"TestPingServer: error",!1,g)})}function Ys(u,g,p,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(p)}catch{}}function iU(){this.g=new et}function oU(u,g,p){const T=p||"";try{Xy(u,function(M,W){let ve=M;c(M)&&(ve=pe(M)),g.push(T+W+"="+encodeURIComponent(ve))})}catch(M){throw g.push(T+"type="+encodeURIComponent("_badmap")),M}}function vu(u){this.l=u.Ub||null,this.j=u.eb||!1}v(vu,vt),vu.prototype.g=function(){return new xu(this.l,this.j)},vu.prototype.i=function(u){return function(){return u}}({});function xu(u,g){ue.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(xu,ue),t=xu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Za(this)),this.g&&(this.readyState=3,Za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function sv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ya(this):Za(this),this.readyState==3&&sv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ya(this))},t.Qa=function(u){this.g&&(this.response=u,Ya(this))},t.ga=function(){this.g&&Ya(this)};function Ya(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Za(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function Za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Av(u){let g="";return Q(u,function(p,T){g+=T,g+=":",g+=p,g+=`\r
`}),g}function yg(u,g,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=Av(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):jt(u,g,p))}function nr(u){ue.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(nr,ue);var aU=/^https?$/i,lU=["POST","PUT"];t=nr.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_t.g(),this.v=this.o?wt(this.o):wt(_t),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(W){iv(this,W);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)p.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())p.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(W=>W.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(lU,g,void 0))||T||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ve]of p)this.g.setRequestHeader(W,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lv(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){iv(this,W)}};function iv(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,ov(u),Bu(u)}function ov(u){u.A||(u.A=!0,ge(u,"complete"),ge(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ge(this,"complete"),ge(this,"abort"),Bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bu(this,!0)),nr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?av(this):this.bb())},t.bb=function(){av(this)};function av(u){if(u.h&&typeof i<"u"&&(!u.v[1]||ms(u)!=4||u.Z()!=2)){if(u.u&&ms(u)==4)je(u.Ea,0,u);else if(ge(u,"readystatechange"),ms(u)==4){u.h=!1;try{const ve=u.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var T;if(T=ve===0){var M=String(u.D).match(Yy)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),T=!aU.test(M?M.toLowerCase():"")}p=T}if(p)ge(u,"complete"),ge(u,"success");else{u.m=6;try{var W=2<ms(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",ov(u)}}finally{Bu(u)}}}}function Bu(u,g){if(u.g){lv(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ge(u,"ready");try{p.onreadystatechange=T}catch{}}}function lv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ms(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ms(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),He(g)}};function cv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cU(u){const g={};u=(u.g&&2<=ms(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(w(u[T]))continue;var p=R(u[T]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const W=g[M]||[];g[M]=W,W.push(p)}x(g,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function el(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function uv(u){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=el("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=el("baseRetryDelayMs",5e3,u),this.cb=el("retryDelaySeedMs",1e4,u),this.Wa=el("forwardChannelMaxRetries",2,u),this.wa=el("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zy(u&&u.concurrentRequestLimit),this.Da=new iU,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uv.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,T){Ae(0),this.W=u,this.H=g||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=vv(this,null,this.W),bu(this)};function vg(u){if(dv(u),u.G==3){var g=u.U++,p=ps(u.I);if(jt(p,"SID",u.K),jt(p,"RID",g),jt(p,"TYPE","terminate"),tl(u,p),g=new ir(u,u.j,g),g.L=2,g.v=yu(ps(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=g.v,p=!0),p||(g.g=xv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),di(g)}yv(u)}function Cu(u){u.g&&(Bg(u),u.g.cancel(),u.g=null)}function dv(u){Cu(u),u.u&&(a.clearTimeout(u.u),u.u=null),_u(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function bu(u){if(!$y(u.h)&&!u.s){u.s=!0;var g=u.Ga;We||Re(),ae||(We(),ae=!0),xe.add(g,u),u.B=0}}function uU(u,g){return Wy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=J(f(u.Ga,u,g),wv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new ir(this,this.j,u);let W=this.o;if(this.S&&(W?(W=b(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(M.H=W,W=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=fv(this,M,g),p=ps(this.I),jt(p,"RID",u),jt(p,"CVER",22),this.D&&jt(p,"X-HTTP-Session-Id",this.D),tl(this,p),W&&(this.O?g="headers="+encodeURIComponent(String(Av(W)))+"&"+g:this.m&&yg(p,this.m,W)),wg(this.h,M),this.Ua&&jt(p,"TYPE","init"),this.P?(jt(p,"$req",g),jt(p,"SID","null"),M.T=!0,qs(M,p,null)):qs(M,p,g),this.G=2}}else this.G==3&&(u?hv(this,u):this.i.length==0||$y(this.h)||hv(this))};function hv(u,g){var p;g?p=g.l:p=u.U++;const T=ps(u.I);jt(T,"SID",u.K),jt(T,"RID",p),jt(T,"AID",u.T),tl(u,T),u.m&&u.o&&yg(T,u.m,u.o),p=new ir(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=fv(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wg(u.h,p),qs(p,T,g)}function tl(u,g){u.H&&Q(u.H,function(p,T){jt(g,T,p)}),u.l&&Xy({},function(p,T){jt(g,T,p)})}function fv(u,g,p){p=Math.min(u.i.length,p);var T=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let W=-1;for(;;){const ve=["count="+p];W==-1?0<p?(W=M[0].g,ve.push("ofs="+W)):W=0:ve.push("ofs="+W);let Nt=!0;for(let Tr=0;Tr<p;Tr++){let xt=M[Tr].g;const jr=M[Tr].map;if(xt-=W,0>xt)W=Math.max(0,M[Tr].g-100),Nt=!1;else try{oU(jr,ve,"req"+xt+"_")}catch{T&&T(jr)}}if(Nt){T=ve.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,T}function gv(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;We||Re(),ae||(We(),ae=!0),xe.add(g,u),u.v=0}}function xg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=J(f(u.Fa,u),wv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,pv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=J(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),Cu(this),pv(this))};function Bg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function pv(u){u.g=new ir(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ps(u.qa);jt(g,"RID","rpc"),jt(g,"SID",u.K),jt(g,"AID",u.T),jt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&jt(g,"TO",u.ja),jt(g,"TYPE","xmlhttp"),tl(u,g),u.m&&u.o&&yg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=yu(ps(g)),p.m=null,p.P=!0,nn(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Cu(this),xg(this),Ae(19))};function _u(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function mv(u,g){var p=null;if(u.g==g){_u(u),Bg(u),u.g=null;var T=2}else if(mg(u.h,g))p=g.D,qy(u.h,g),T=1;else return;if(u.G!=0){if(g.o)if(T==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var M=u.B;T=de(),ge(T,new te(T,p)),bu(u)}else gv(u);else if(M=g.s,M==3||M==0&&0<g.X||!(T==1&&uU(u,g)||T==2&&xg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),M){case 1:gi(u,5);break;case 4:gi(u,10);break;case 3:gi(u,6);break;default:gi(u,2)}}}function wv(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function gi(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),T=u.Xa;const M=!T;T=new fi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mu(T,"https"),yu(T),M?sU(T.toString(),p):AU(T.toString(),p)}else Ae(2);u.G=0,u.l&&u.l.sa(g),yv(u),dv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function yv(u){if(u.G=0,u.ka=[],u.l){const g=Jy(u.h);(g.length!=0||u.i.length!=0)&&(I(u.ka,g),I(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function vv(u,g,p){var T=p instanceof fi?ps(p):new fi(p);if(T.g!="")g&&(T.g=g+"."+T.g),wu(T,T.s);else{var M=a.location;T=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var W=new fi(null);T&&mu(W,T),g&&(W.g=g),M&&wu(W,M),p&&(W.l=p),T=W}return p=u.D,g=u.ya,p&&g&&jt(T,p,g),jt(T,"VER",u.la),tl(u,T),T}function xv(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new nr(new vu({eb:p})):new nr(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bv(){}t=Bv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Iu(){}Iu.prototype.g=function(u,g){return new pn(u,g)};function pn(u,g){ue.call(this),this.g=new uv(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new co(this)}v(pn,ue),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){vg(this.g)},pn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=pe(u),u=p);g.i.push(new WS(g.Ya++,u)),g.G==3&&bu(g)},pn.prototype.N=function(){this.g.l=null,delete this.j,vg(this.g),delete this.g,pn.aa.N.call(this)};function Cv(u){$.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}v(Cv,$);function bv(){H.call(this),this.status=1}v(bv,H);function co(u){this.g=u}v(co,Bv),co.prototype.ua=function(){ge(this.g,"a")},co.prototype.ta=function(u){ge(this.g,new Cv(u))},co.prototype.sa=function(u){ge(this.g,new bv)},co.prototype.ra=function(){ge(this.g,"b")},Iu.prototype.createWebChannel=Iu.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,CE=function(){return new Iu},BE=function(){return de()},xE=Se,Nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bt.NO_ERROR=0,Bt.TIMEOUT=8,Bt.HTTP_ERROR=6,Pd=Bt,Ft.COMPLETE="complete",vE=Ft,D.EventType=q,q.OPEN="a",q.CLOSE="b",q.ERROR="c",q.MESSAGE="d",ue.prototype.listen=ue.prototype.K,El=D,nr.prototype.listenOnce=nr.prototype.L,nr.prototype.getLastError=nr.prototype.Ka,nr.prototype.getLastErrorCode=nr.prototype.Ba,nr.prototype.getStatus=nr.prototype.Z,nr.prototype.getResponseJson=nr.prototype.Oa,nr.prototype.getResponseText=nr.prototype.oa,nr.prototype.send=nr.prototype.ea,nr.prototype.setWithCredentials=nr.prototype.Ha,yE=nr}).apply(typeof Gu<"u"?Gu:typeof self<"u"?self:typeof window<"u"?window:{});const tB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new _w("@firebase/firestore");function bo(){return KA.logLevel}function NR(t){KA.setLogLevel(t)}function le(t,...e){if(KA.logLevel<=ft.DEBUG){const r=e.map(Tw);KA.debug(`Firestore (${ka}): ${t}`,...r)}}function cr(t,...e){if(KA.logLevel<=ft.ERROR){const r=e.map(Tw);KA.error(`Firestore (${ka}): ${t}`,...r)}}function bn(t,...e){if(KA.logLevel<=ft.WARN){const r=e.map(Tw);KA.warn(`Firestore (${ka}): ${t}`,...r)}}function Tw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function Pe(t,e){t||Ne()}function RR(t,e){t||Ne()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Ks{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _E{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(br.UNAUTHENTICATED))}shutdown(){}}class DR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class PR{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Pe(this.o===void 0);let n=this.i;const s=o=>this.i!==n?(n=this.i,r(o)):Promise.resolve();let A=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Ir,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const o=A;e.enqueueRetryable(async()=>{await o.promise,await s(this.currentUser)})},a=o=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Ir)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pe(typeof n.accessToken=="string"),new bE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new br(e)}}class LR{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=br.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jR{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new LR(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Pe(this.o===void 0);const n=A=>{A.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,le("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>n(A))};const s=A=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Pe(typeof r.token=="string"),this.R=r.token,new IE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class OR{getToken(){return Promise.resolve(new IE(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=HR(40);for(let A=0;A<s.length;++A)n.length<20&&s[A]<r&&(n+=e.charAt(s[A]%e.length))}return n}}function rt(t,e){return t<e?-1:t>e?1:0}function ua(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function EE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new qt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new qt(0,0))}static max(){return new Ve(new qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ne(),n===void 0?n=e.length-r:n>e.length-r&&Ne(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ec.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ec?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const A=e.get(s),i=r.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class gt extends Ec{construct(e,r,n){return new gt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new oe(G.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new gt(r)}static emptyPath(){return new gt([])}}const VR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Ec{construct(e,r,n){return new Vt(e,r,n)}static isValidIdentifier(e){return VR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const A=()=>{if(n.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new oe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[s+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new oe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=o,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(n+=a,s++):(A(),s++)}if(A(),i)throw new oe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(r)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(gt.fromString(e))}static fromName(e){return new Ce(gt.fromString(e).popFirst(5))}static empty(){return new Ce(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return gt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new gt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function Rm(t){return t.fields.find(e=>e.kind===2)}function xi(t){return t.fields.filter(e=>e.kind!==2)}function KR(t,e){let r=rt(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=GR(t.fields[n],e.fields[n]),r!==0)return r;return rt(t.fields.length,e.fields.length)}da.UNKNOWN_ID=-1;class Ni{constructor(e,r){this.fieldPath=e,this.kind=r}}function GR(t,e){const r=Vt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:rt(t.kind,e.kind)}class ha{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ha(0,_n.min())}}function TE(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(n===1e9?new qt(r+1,0):new qt(r,n));return new _n(s,Ce.empty(),e)}function FE(t){return new _n(t.readTime,t.key,-1)}class _n{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new _n(Ve.min(),Ce.empty(),-1)}static max(){return new _n(Ve.max(),Ce.empty(),-1)}}function Sw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ce.comparator(t.documentKey,e.documentKey),r!==0?r:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==SE)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new j((n,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(n,s)},this.catchCallback=A=>{this.wrapFailure(r,A).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof j?r:j.resolve(r)}catch(r){return j.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):j.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):j.reject(r)}static resolve(e){return new j((r,n)=>{r(e)})}static reject(e){return new j((r,n)=>{n(e)})}static waitFor(e){return new j((r,n)=>{let s=0,A=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++A,i&&A===s&&r()},o=>n(o))}),i=!0,A===s&&r()})}static or(e){let r=j.resolve(!1);for(const n of e)r=r.next(s=>s?j.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,A)=>{n.push(r.call(this,s,A))}),this.waitFor(n)}static mapArray(e,r){return new j((n,s)=>{const A=e.length,i=new Array(A);let a=0;for(let o=0;o<A;o++){const c=o;r(e[c]).next(d=>{i[c]=d,++a,a===A&&n(i)},d=>s(d))}})}static doWhile(e,r){return new j((n,s)=>{const A=()=>{e()===!0?r().next(()=>{A()},s):n()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Ir,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Wl(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Uw(n.target.error);this.V.reject(new Wl(e,s))}}static open(e,r,n,s){try{return new Uf(r,e.transaction(s,n))}catch(A){throw new Wl(r,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new $R(r)}}class as{constructor(e,r,n){this.name=e,this.version=r,this.p=n,as.S(wr())===12.2&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return le("SimpleDb","Removing database:",e),Bi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!dE())return!1;if(as.v())return!0;const e=wr(),r=as.S(e),n=0<r&&r<10,s=QE(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(le("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;r(i)},s.onblocked=()=>{n(new Wl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?n(new oe(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new oe(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Wl(e,i))},s.onupgradeneeded=A=>{le("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{le("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const A=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const a=Uf.open(this.db,e,A?"readonly":"readwrite",n),o=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),j.reject(c))).toPromise();return o.catch(()=>{}),await a.m,o}catch(a){const o=a,c=o.name!=="FirebaseError"&&i<3;if(le("SimpleDb","Transaction failed with error:",o.message,"Retrying:",c),this.close(),!c)return Promise.reject(o)}}}close(){this.db&&this.db.close(),this.db=void 0}}function QE(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class zR{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Bi(this.B.delete())}}class Wl extends oe{constructor(e,r){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ai(t){return t.name==="IndexedDbTransactionError"}class $R{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(le("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(le("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bi(n)}add(e){return le("SimpleDb","ADD",this.store.name,e,e),Bi(this.store.add(e))}get(e){return Bi(this.store.get(e)).next(r=>(r===void 0&&(r=null),le("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return le("SimpleDb","DELETE",this.store.name,e),Bi(this.store.delete(e))}count(){return le("SimpleDb","COUNT",this.store.name),Bi(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(n.range);return new j((i,a)=>{A.onerror=o=>{a(o.target.error)},A.onsuccess=o=>{i(o.target.result)}})}{const A=this.cursor(n),i=[];return this.W(A,(a,o)=>{i.push(o)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new j((s,A)=>{n.onerror=i=>{A(i.target.error)},n.onsuccess=i=>{s(i.target.result)}})}j(e,r){le("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(A,i,a)=>a.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new j((n,s)=>{r.onerror=A=>{const i=Uw(A.target.error);s(i)},r.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():n()}):n()}})}W(e,r){const n=[];return new j((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const o=new zR(a),c=r(a.primaryKey,a.value,o);if(c instanceof j){const d=c.catch(h=>(o.done(),j.reject(h)));n.push(d)}o.isDone?s():o.K===null?a.continue():a.continue(o.K)}}).next(()=>j.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Bi(t){return new j((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Uw(n.target.error);r(s)}})}let rB=!1;function Uw(t){const e=as.S(wr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rB||(rB=!0,setTimeout(()=>{throw n},0)),n}}return t}class WR{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){le("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{le("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Ai(r)?le("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await si(r)}await this.X(6e4)})}}class qR{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,A=!0;return j.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return le("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(a=>{s-=a,n.add(i)});A=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(a=>(le("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,r,a))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((s,A)=>{const i=FE(A);Sw(i,n)>0&&(n=i)}),new _n(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cn.oe=-1;function Xc(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function kE(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=nB(e)),e=JR(t.get(r),e);return nB(e)}function JR(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const A=t.charAt(s);switch(A){case"\0":r+="";break;case"":r+="";break;default:r+=A}}return r}function nB(t){return t+""}function ss(t){const e=t.length;if(Pe(e>=2),e===2)return Pe(t.charAt(0)===""&&t.charAt(1)===""),gt.emptyPath();const r=e-2,n=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>r)&&Ne(),t.charAt(i+1)){case"":const a=t.substring(A,i);let o;s.length===0?o=a:(s+=a,o=s,s=""),n.push(o);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:Ne()}A=i+2}return new gt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t,e){return[t,Wr(e)]}function NE(t,e,r){return[t,Wr(e),r]}const XR={},YR=["prefixPath","collectionGroup","readTime","documentId"],ZR=["prefixPath","collectionGroup","documentId"],e4=["collectionGroup","readTime","prefixPath","documentId"],t4=["canonicalId","targetId"],r4=["targetId","path"],n4=["path","targetId"],s4=["collectionId","parent"],A4=["indexId","uid"],i4=["uid","sequenceNumber"],o4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],a4=["indexId","uid","orderedDocumentKey"],l4=["userId","collectionPath","documentId"],c4=["userId","collectionPath","largestBatchId"],u4=["userId","collectionGroup","largestBatchId"],RE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],d4=[...RE,"documentOverlays"],DE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PE=DE,Qw=[...PE,"indexConfiguration","indexState","indexEntries"],h4=Qw,f4=[...Qw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm extends UE{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function yr(t,e){const r=ye(t);return as.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ii(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function LE(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function jE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){this.comparator=e,this.root=r||kr.EMPTY}insert(e,r){return new Lt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=r?n(e.key,r):1,r&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kr{constructor(e,r,n,s,A){this.key=e,this.value=r,this.color=n??kr.RED,this.left=s??kr.EMPTY,this.right=A??kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,A){return new kr(e??this.key,r??this.value,n??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const A=n(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,r,n),null):A===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return kr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1;kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,r,n,s,A){return this}insert(e,r,n){return new kr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new iB(this.data.getIterator())}getIteratorFrom(e){return new iB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ut(this.comparator);return r.data=e,r}}class iB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new un([])}unionWith(e){let r=new Ut(Vt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new un(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new ME("Invalid base64 string: "+A):A}}(e);return new rr(r)}static fromUint8Array(e){const r=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new rr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const p4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(Pe(!!t),typeof t=="string"){let e=0;const r=p4.exec(t);if(Pe(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ls(t){return typeof t=="string"?rr.fromBase64String(t):rr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function kf(t){const e=t.mapValue.fields.__previous_value__;return Qf(e)?kf(e):e}function Fc(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,r,n,s,A,i,a,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class GA{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new GA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof GA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jd={nullValue:"NULL_VALUE"};function zA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qf(t)?4:OE(t)?9007199254740991:Nf(t)?10:11:Ne()}function ds(t,e){if(t===e)return!0;const r=zA(t);if(r!==zA(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fc(t).isEqual(Fc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=Ps(s.timestampValue),a=Ps(A.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return Ls(s.bytesValue).isEqual(Ls(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return zt(s.geoPointValue.latitude)===zt(A.geoPointValue.latitude)&&zt(s.geoPointValue.longitude)===zt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return zt(s.integerValue)===zt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=zt(s.doubleValue),a=zt(A.doubleValue);return i===a?Tc(i)===Tc(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},a=A.mapValue.fields||{};if(AB(i)!==AB(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!ds(i[o],a[o])))return!1;return!0}(t,e);default:return Ne()}}function Sc(t,e){return(t.values||[]).find(r=>ds(r,e))!==void 0}function $A(t,e){if(t===e)return 0;const r=zA(t),n=zA(e);if(r!==n)return rt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(A,i){const a=zt(A.integerValue||A.doubleValue),o=zt(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return oB(t.timestampValue,e.timestampValue);case 4:return oB(Fc(t),Fc(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(A,i){const a=Ls(A),o=Ls(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const a=A.split("/"),o=i.split("/");for(let c=0;c<a.length&&c<o.length;c++){const d=rt(a[c],o[c]);if(d!==0)return d}return rt(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const a=rt(zt(A.latitude),zt(i.latitude));return a!==0?a:rt(zt(A.longitude),zt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aB(t.arrayValue,e.arrayValue);case 10:return function(A,i){var a,o,c,d;const h=A.fields||{},f=i.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=(o=f.value)===null||o===void 0?void 0:o.arrayValue,y=rt(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:aB(m,v)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===xA.mapValue&&i===xA.mapValue)return 0;if(A===xA.mapValue)return 1;if(i===xA.mapValue)return-1;const a=A.fields||{},o=Object.keys(a),c=i.fields||{},d=Object.keys(c);o.sort(),d.sort();for(let h=0;h<o.length&&h<d.length;++h){const f=rt(o[h],d[h]);if(f!==0)return f;const m=$A(a[o[h]],c[d[h]]);if(m!==0)return m}return rt(o.length,d.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function oB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const r=Ps(t),n=Ps(e),s=rt(r.seconds,n.seconds);return s!==0?s:rt(r.nanos,n.nanos)}function aB(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const A=$A(r[s],n[s]);if(A)return A}return rt(r.length,n.length)}function fa(t){return Pm(t)}function Pm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ps(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ls(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ce.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const A of r.values||[])s?s=!1:n+=",",n+=Pm(A);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",A=!0;for(const i of n)A?A=!1:s+=",",s+=`${i}:${Pm(r.fields[i])}`;return s+"}"}(t.mapValue):Ne()}function Md(t){switch(zA(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(t);return e?16+Md(e):16;case 5:return 2*t.stringValue.length;case 6:return Ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,A)=>s+Md(A),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return ii(n.fields,(A,i)=>{s+=A.length+Md(i)}),s}(t.mapValue);default:throw Ne()}}function Vi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lm(t){return!!t&&"integerValue"in t}function Uc(t){return!!t&&"arrayValue"in t}function lB(t){return!!t&&"nullValue"in t}function cB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Od(t){return!!t&&"mapValue"in t}function Nf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ql(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ii(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ql(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ql(t.arrayValue.values[r]);return e}return Object.assign({},t)}function OE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const HE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function w4(t){return"nullValue"in t?jd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vi(GA.empty(),Ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Nf(t)?HE:{mapValue:{}}:Ne()}function y4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vi(GA.empty(),Ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?HE:"mapValue"in t?Nf(t)?{mapValue:{}}:xA:Ne()}function uB(t,e){const r=$A(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function dB(t,e){const r=$A(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Od(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ql(r)}setAll(e){let r=Vt.emptyPath(),n={},s=[];e.forEach((i,a)=>{if(!r.isImmediateParentOf(a)){const o=this.getFieldsMap(r);this.applyChanges(o,n,s),n={},s=[],r=a.popLast()}i?n[a.lastSegment()]=ql(i):s.push(a.lastSegment())});const A=this.getFieldsMap(r);this.applyChanges(A,n,s)}delete(e){const r=this.field(e.popLast());Od(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Od(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){ii(r,(s,A)=>e[s]=A);for(const s of n)delete e[s]}clone(){return new Nr(ql(this.value))}}function VE(t){const e=[];return ii(t.fields,(r,n)=>{const s=new Vt([r]);if(Od(n)){const A=VE(n.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,r,n,s,A,i,a){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=A,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,Ve.min(),Ve.min(),Ve.min(),Nr.empty(),0)}static newFoundDocument(e,r,n,s){return new Ht(e,1,r,Ve.min(),n,s,0)}static newNoDocument(e,r){return new Ht(e,2,r,Ve.min(),Ve.min(),Nr.empty(),0)}static newUnknownDocument(e,r){return new Ht(e,3,r,Ve.min(),Ve.min(),Nr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,r){this.position=e,this.inclusive=r}}function hB(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?n=Ce.comparator(Ce.fromName(i.referenceValue),r.key):n=$A(i,r.data.field(A.field)),A.dir==="desc"&&(n*=-1),n!==0)break}return n}function fB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ds(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,r="asc"){this.field=e,this.dir=r}}function v4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{}class pt extends KE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new x4(e,r,n):r==="array-contains"?new b4(e,n):r==="in"?new JE(e,n):r==="not-in"?new _4(e,n):r==="array-contains-any"?new I4(e,n):new pt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new B4(e,n):new C4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison($A(r,this.value)):r!==null&&zA(this.value)===zA(r)&&this.matchesComparison($A(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class It extends KE{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new It(e,r)}matches(e){return ga(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ga(t){return t.op==="and"}function jm(t){return t.op==="or"}function kw(t){return GE(t)&&ga(t)}function GE(t){for(const e of t.filters)if(e instanceof It)return!1;return!0}function Mm(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(kw(t))return t.filters.map(e=>Mm(e)).join(",");{const e=t.filters.map(r=>Mm(r)).join(",");return`${t.op}(${e})`}}function zE(t,e){return t instanceof pt?function(n,s){return s instanceof pt&&n.op===s.op&&n.field.isEqual(s.field)&&ds(n.value,s.value)}(t,e):t instanceof It?function(n,s){return s instanceof It&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((A,i,a)=>A&&zE(i,s.filters[a]),!0):!1}(t,e):void Ne()}function $E(t,e){const r=t.filters.concat(e);return It.create(r,t.op)}function WE(t){return t instanceof pt?function(r){return`${r.field.canonicalString()} ${r.op} ${fa(r.value)}`}(t):t instanceof It?function(r){return r.op.toString()+" {"+r.getFilters().map(WE).join(" ,")+"}"}(t):"Filter"}class x4 extends pt{constructor(e,r,n){super(e,r,n),this.key=Ce.fromName(n.referenceValue)}matches(e){const r=Ce.comparator(e.key,this.key);return this.matchesComparison(r)}}class B4 extends pt{constructor(e,r){super(e,"in",r),this.keys=qE("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class C4 extends pt{constructor(e,r){super(e,"not-in",r),this.keys=qE("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function qE(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ce.fromName(n.referenceValue))}class b4 extends pt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Uc(r)&&Sc(r.arrayValue,this.value)}}class JE extends pt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Sc(this.value.arrayValue,r)}}class _4 extends pt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Sc(this.value.arrayValue,r)}}class I4 extends pt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Uc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Sc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,r=null,n=[],s=[],A=null,i=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=A,this.startAt=i,this.endAt=a,this.ue=null}}function Om(t,e=null,r=[],n=[],s=null,A=null,i=null){return new E4(t,e,r,n,s,A,i)}function Ki(t){const e=ye(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Mm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(A){return A.field.canonicalString()+A.dir}(n)).join(","),Xc(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>fa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>fa(n)).join(",")),e.ue=r}return e.ue}function Yc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!v4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!zE(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fB(t.startAt,e.startAt)&&fB(t.endAt,e.endAt)}function Qh(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function kh(t,e){return t.filters.filter(r=>r instanceof pt&&r.field.isEqual(e))}function gB(t,e,r){let n=jd,s=!0;for(const A of kh(t,e)){let i=jd,a=!0;switch(A.op){case"<":case"<=":i=w4(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,a=!1;break;case"!=":case"not-in":i=jd}uB({value:n,inclusive:s},{value:i,inclusive:a})<0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];uB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function pB(t,e,r){let n=xA,s=!0;for(const A of kh(t,e)){let i=xA,a=!0;switch(A.op){case">=":case">":i=y4(A.value),a=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,a=!1;break;case"!=":case"not-in":i=xA}dB({value:n,inclusive:s},{value:i,inclusive:a})>0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];dB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,r=null,n=[],s=[],A=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=A,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function XE(t,e,r,n,s,A,i,a){return new Gs(t,e,r,n,s,A,i,a)}function Na(t){return new Gs(t)}function mB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nw(t){return t.collectionGroup!==null}function Jo(t){const e=ye(t);if(e.ce===null){e.ce=[];const r=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),r.add(A.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new Ut(Vt.comparator);return i.filters.forEach(o=>{o.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(A=>{r.has(A.canonicalString())||A.isKeyField()||e.ce.push(new Qc(A,n))}),r.has(Vt.keyField().canonicalString())||e.ce.push(new Qc(Vt.keyField(),n))}return e.ce}function qr(t){const e=ye(t);return e.le||(e.le=ZE(e,Jo(t))),e.le}function YE(t){const e=ye(t);return e.he||(e.he=ZE(e,t.explicitOrderBy)),e.he}function ZE(t,e){if(t.limitType==="F")return Om(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new Qc(s.field,A)});const r=t.endAt?new WA(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new WA(t.startAt.position,t.startAt.inclusive):null;return Om(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Hm(t,e){const r=t.filters.concat([e]);return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Nh(t,e,r){return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Zc(t,e){return Yc(qr(t),qr(e))&&t.limitType===e.limitType}function e1(t){return`${Ki(qr(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>WE(s)).join(", ")}]`),Xc(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>fa(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>fa(s)).join(",")),`Target(${n})`}(qr(t))}; limitType=${t.limitType})`}function eu(t,e){return e.isFoundDocument()&&function(n,s){const A=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(A):Ce.isDocumentKey(n.path)?n.path.isEqual(A):n.path.isImmediateParentOf(A)}(t,e)&&function(n,s){for(const A of Jo(n))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const A of n.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,a,o){const c=hB(i,a,o);return i.inclusive?c<=0:c<0}(n.startAt,Jo(n),s)||n.endAt&&!function(i,a,o){const c=hB(i,a,o);return i.inclusive?c>=0:c>0}(n.endAt,Jo(n),s))}(t,e)}function t1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function r1(t){return(e,r)=>{let n=!1;for(const s of Jo(t)){const A=T4(s,e,r);if(A!==0)return A;n=n||s.field.isKeyField()}return 0}}function T4(t,e,r){const n=t.field.isKeyField()?Ce.comparator(e.key,r.key):function(A,i,a){const o=i.data.field(A),c=a.data.field(A);return o!==null&&c!==null?$A(o,c):Ne()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,A]of n)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ii(this.inner,(r,n)=>{for(const[s,A]of n)e(s,A)})}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new Lt(Ce.comparator);function dn(){return F4}const n1=new Lt(Ce.comparator);function Tl(...t){let e=n1;for(const r of t)e=e.insert(r.key,r);return e}function s1(t){let e=n1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function As(){return Jl()}function A1(){return Jl()}function Jl(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const S4=new Lt(Ce.comparator),U4=new Ut(Ce.comparator);function ot(...t){let e=U4;for(const r of t)e=e.add(r);return e}const Q4=new Ut(rt);function Rw(){return Q4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function i1(t){return{integerValue:""+t}}function o1(t,e){return kE(e)?i1(e):Dw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this._=void 0}}function k4(t,e,r){return t instanceof pa?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&Qf(A)&&(A=kf(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(r,e):t instanceof Gi?l1(t,e):t instanceof zi?c1(t,e):function(s,A){const i=a1(s,A),a=wB(i)+wB(s.Pe);return Lm(i)&&Lm(s.Pe)?i1(a):Dw(s.serializer,a)}(t,e)}function N4(t,e,r){return t instanceof Gi?l1(t,e):t instanceof zi?c1(t,e):r}function a1(t,e){return t instanceof ma?function(n){return Lm(n)||function(A){return!!A&&"doubleValue"in A}(n)}(e)?e:{integerValue:0}:null}class pa extends Rf{}class Gi extends Rf{constructor(e){super(),this.elements=e}}function l1(t,e){const r=u1(e);for(const n of t.elements)r.some(s=>ds(s,n))||r.push(n);return{arrayValue:{values:r}}}class zi extends Rf{constructor(e){super(),this.elements=e}}function c1(t,e){let r=u1(e);for(const n of t.elements)r=r.filter(s=>!ds(s,n));return{arrayValue:{values:r}}}class ma extends Rf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function wB(t){return zt(t.integerValue||t.doubleValue)}function u1(t){return Uc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,r){this.field=e,this.transform=r}}function R4(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Gi&&s instanceof Gi||n instanceof zi&&s instanceof zi?ua(n.elements,s.elements,ds):n instanceof ma&&s instanceof ma?ds(n.Pe,s.Pe):n instanceof pa&&s instanceof pa}(t.transform,e.transform)}class D4{constructor(e,r){this.version=e,this.transformResults=r}}class Wt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Df{}function d1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Da(t.key,Wt.none()):new Ra(t.key,t.data,Wt.none());{const r=t.data,n=Nr.empty();let s=new Ut(Vt.comparator);for(let A of e.fields)if(!s.has(A)){let i=r.field(A);i===null&&A.length>1&&(A=A.popLast(),i=r.field(A)),i===null?n.delete(A):n.set(A,i),s=s.add(A)}return new $s(t.key,n,new un(s.toArray()),Wt.none())}}function P4(t,e,r){t instanceof Ra?function(s,A,i){const a=s.value.clone(),o=vB(s.fieldTransforms,A,i.transformResults);a.setAll(o),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):t instanceof $s?function(s,A,i){if(!Hd(s.precondition,A))return void A.convertToUnknownDocument(i.version);const a=vB(s.fieldTransforms,A,i.transformResults),o=A.data;o.setAll(h1(s)),o.setAll(a),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Xl(t,e,r,n){return t instanceof Ra?function(A,i,a,o){if(!Hd(A.precondition,i))return a;const c=A.value.clone(),d=xB(A.fieldTransforms,o,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof $s?function(A,i,a,o){if(!Hd(A.precondition,i))return a;const c=xB(A.fieldTransforms,o,i),d=i.data;return d.setAll(h1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(A,i,a){return Hd(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,r)}function L4(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),A=a1(n.transform,s||null);A!=null&&(r===null&&(r=Nr.empty()),r.set(n.field,A))}return r||null}function yB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ua(n,s,(A,i)=>R4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ra extends Df{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $s extends Df{constructor(e,r,n,s,A=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function h1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function vB(t,e,r){const n=new Map;Pe(t.length===r.length);for(let s=0;s<r.length;s++){const A=t[s],i=A.transform,a=e.data.field(A.field);n.set(A.field,N4(i,a,r[s]))}return n}function xB(t,e,r){const n=new Map;for(const s of t){const A=s.transform,i=r.data.field(s.field);n.set(s.field,k4(A,i,e))}return n}class Da extends Df{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pw extends Df{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&P4(A,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Xl(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Xl(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=A1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let a=this.applyToLocalView(i,A.mutatedFields);a=r.has(s.key)?null:a;const o=d1(i,a);o!==null&&n.set(s.key,o),i.isValidDocument()||i.convertToNoDocument(Ve.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ot())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(r,n)=>yB(r,n))&&ua(this.baseMutations,e.baseMutations,(r,n)=>yB(r,n))}}class jw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Pe(e.mutations.length===n.length);let s=function(){return S4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,n[i].version);return new jw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr,mt;function g1(t){switch(t){default:return Ne();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function p1(t){if(t===void 0)return cr("GRPC error has no .code"),G.UNKNOWN;switch(t){case dr.OK:return G.OK;case dr.CANCELLED:return G.CANCELLED;case dr.UNKNOWN:return G.UNKNOWN;case dr.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case dr.INTERNAL:return G.INTERNAL;case dr.UNAVAILABLE:return G.UNAVAILABLE;case dr.UNAUTHENTICATED:return G.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case dr.NOT_FOUND:return G.NOT_FOUND;case dr.ALREADY_EXISTS:return G.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return G.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case dr.ABORTED:return G.ABORTED;case dr.OUT_OF_RANGE:return G.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return G.UNIMPLEMENTED;case dr.DATA_LOSS:return G.DATA_LOSS;default:return Ne()}}(mt=dr||(dr={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new ki([4294967295,4294967295],0);function BB(t){const e=m1().encode(t),r=new wE;return r.update(e),new Uint8Array(r.digest())}function CB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new ki([r,n],0),new ki([s,A],0)]}class Ow{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Fl(`Invalid padding: ${r}`);if(n<0)throw new Fl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=ki.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(ki.fromNumber(n)));return s.compare(M4)===1&&(s=new ki([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=BB(e),[n,s]=CB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new Ow(A,s,r);return n.forEach(a=>i.insert(a)),i}insert(e){if(this.Ie===0)return;const r=BB(e),[n,s]=CB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,r,n,s,A){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new ru(Ve.min(),s,new Lt(rt),dn(),ot())}}class nu{constructor(e,r,n,s,A){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new nu(n,r,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class w1{constructor(e,r){this.targetId=e,this.me=r}}class y1{constructor(e,r,n=rr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class bB{constructor(){this.fe=0,this.ge=IB(),this.pe=rr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ot(),r=ot(),n=ot();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ne()}}),new nu(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=IB()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class O4{constructor(e){this.Le=e,this.Be=new Map,this.ke=dn(),this.qe=_B(),this.Qe=new Lt(rt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const A=s.target;if(Qh(A))if(n===0){const i=new Ce(A.path);this.Ue(r,i,Ht.newNoDocument(i,Ve.min()))}else Pe(n===1);else{const i=this.Ye(r);if(i!==n){const a=this.Ze(e),o=a?this.Xe(a,e,i):1;if(o!==0){this.je(r);const c=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Rh==null||Rh.et(function(d,h,f,m,v){var y,I,C,w,B,S;const N={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},Q=h.unchangedNames;return Q&&(N.bloomFilter={applied:v===0,hashCount:(y=Q==null?void 0:Q.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(w=(C=(I=Q==null?void 0:Q.bits)===null||I===void 0?void 0:I.bitmap)===null||C===void 0?void 0:C.length)!==null&&w!==void 0?w:0,padding:(S=(B=Q==null?void 0:Q.bits)===null||B===void 0?void 0:B.padding)!==null&&S!==void 0?S:0,mightContain:x=>{var b;return(b=m==null?void 0:m.mightContain(x))!==null&&b!==void 0&&b}}),N}(i,e.me,this.Le.tt(),a,o))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:A=0}=r;let i,a;try{i=Ls(n).toUint8Array()}catch(o){if(o instanceof ME)return bn("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Ow(i,s,A)}catch(o){return bn(o instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(A=>{const i=this.Le.tt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,A,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((A,i)=>{const a=this.Je(i);if(a){if(A.current&&Qh(a.target)){const o=new Ce(a.target.path);this.ke.get(o)!==null||this.it(i,o)||this.Ue(i,o,Ht.newNoDocument(o,e))}A.be&&(r.set(i,A.ve()),A.Ce())}});let n=ot();this.qe.forEach((A,i)=>{let a=!0;i.forEachWhile(o=>{const c=this.Je(o);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new ru(e,r,this.Qe,this.ke,n);return this.ke=dn(),this.qe=_B(),this.Qe=new Lt(rt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new bB,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ut(rt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||le("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bB),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function _B(){return new Lt(Ce.comparator)}function IB(){return new Lt(Ce.comparator)}const H4={asc:"ASCENDING",desc:"DESCENDING"},V4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K4={and:"AND",or:"OR"};class G4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Vm(t,e){return t.useProto3Json||Xc(e)?e:{value:e}}function wa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function z4(t,e){return wa(t,e.toTimestamp())}function ur(t){return Pe(!!t),Ve.fromTimestamp(function(r){const n=Ps(r);return new qt(n.seconds,n.nanos)}(t))}function Hw(t,e){return Km(t,e).canonicalString()}function Km(t,e){const r=function(s){return new gt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function x1(t){const e=gt.fromString(t);return Pe(U1(e)),e}function kc(t,e){return Hw(t.databaseId,e.path)}function ls(t,e){const r=x1(e);if(r.get(1)!==t.databaseId.projectId)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ce(b1(r))}function B1(t,e){return Hw(t.databaseId,e)}function C1(t){const e=x1(t);return e.length===4?gt.emptyPath():b1(e)}function Gm(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function b1(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function EB(t,e,r){return{name:kc(t,e),fields:r.value.mapValue.fields}}function _1(t,e,r){const n=ls(t,e.name),s=ur(e.updateTime),A=e.createTime?ur(e.createTime):Ve.min(),i=new Nr({mapValue:{fields:e.fields}}),a=Ht.newFoundDocument(n,s,A,i);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function $4(t,e){return"found"in e?function(n,s){Pe(!!s.found),s.found.name,s.found.updateTime;const A=ls(n,s.found.name),i=ur(s.found.updateTime),a=s.found.createTime?ur(s.found.createTime):Ve.min(),o=new Nr({mapValue:{fields:s.found.fields}});return Ht.newFoundDocument(A,i,a,o)}(t,e):"missing"in e?function(n,s){Pe(!!s.missing),Pe(!!s.readTime);const A=ls(n,s.missing),i=ur(s.readTime);return Ht.newNoDocument(A,i)}(t,e):Ne()}function W4(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string"),rr.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),rr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const d=c.code===void 0?G.UNKNOWN:p1(c.code);return new oe(d,c.message||"")}(i);r=new y1(n,s,A,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=ls(t,n.document.name),A=ur(n.document.updateTime),i=n.document.createTime?ur(n.document.createTime):Ve.min(),a=new Nr({mapValue:{fields:n.document.fields}}),o=Ht.newFoundDocument(s,A,i,a),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Vd(c,d,o.key,o)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=ls(t,n.document),A=n.readTime?ur(n.readTime):Ve.min(),i=Ht.newNoDocument(s,A),a=n.removedTargetIds||[];r=new Vd([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=ls(t,n.document),A=n.removedTargetIds||[];r=new Vd([],A,s,null)}else{if(!("filter"in e))return Ne();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:A}=n,i=new j4(s,A),a=n.targetId;r=new w1(a,i)}}return r}function Nc(t,e){let r;if(e instanceof Ra)r={update:EB(t,e.key,e.value)};else if(e instanceof Da)r={delete:kc(t,e.key)};else if(e instanceof $s)r={update:EB(t,e.key,e.data),updateMask:eD(e.fieldMask)};else{if(!(e instanceof Pw))return Ne();r={verify:kc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(A,i){const a=i.transform;if(a instanceof pa)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ma)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw Ne()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:z4(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:Ne()}(t,e.precondition)),r}function zm(t,e){const r=e.currentDocument?function(A){return A.updateTime!==void 0?Wt.updateTime(ur(A.updateTime)):A.exists!==void 0?Wt.exists(A.exists):Wt.none()}(e.currentDocument):Wt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(i,a){let o=null;if("setToServerValue"in a)Pe(a.setToServerValue==="REQUEST_TIME"),o=new pa;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];o=new Gi(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];o=new zi(d)}else"increment"in a?o=new ma(i,a.increment):Ne();const c=Vt.fromServerFormat(a.fieldPath);return new tu(c,o)}(t,s)):[];if(e.update){e.update.name;const s=ls(t,e.update.name),A=new Nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(o){const c=o.fieldPaths||[];return new un(c.map(d=>Vt.fromServerFormat(d)))}(e.updateMask);return new $s(s,A,i,r,n)}return new Ra(s,A,r,n)}if(e.delete){const s=ls(t,e.delete);return new Da(s,r)}if(e.verify){const s=ls(t,e.verify);return new Pw(s,r)}return Ne()}function q4(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(r=>function(s,A){let i=s.updateTime?ur(s.updateTime):ur(A);return i.isEqual(Ve.min())&&(i=ur(A)),new D4(i,s.transformResults||[])}(r,e))):[]}function I1(t,e){return{documents:[B1(t,e.path)]}}function Pf(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=B1(t,s);const A=function(c){if(c.length!==0)return S1(It.create(c,"and"))}(e.filters);A&&(r.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:uA(f.field),direction:X4(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const a=Vm(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function E1(t,e,r,n){const{_t:s,parent:A}=Pf(t,e),i={},a=[];let o=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+o++;i[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:uA(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:uA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:A}}function T1(t){let e=C1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Pe(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];r.where&&(A=function(h){const f=F1(h);return f instanceof It&&kw(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(v){return new Qc(Io(v.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Xc(f)?null:f}(r.limit));let o=null;r.startAt&&(o=function(h){const f=!!h.before,m=h.values||[];return new WA(m,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new WA(m,f)}(r.endAt)),XE(e,s,i,A,a,"F",o,c)}function J4(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function F1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Io(r.unaryFilter.field);return pt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Io(r.unaryFilter.field);return pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=Io(r.unaryFilter.field);return pt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Io(r.unaryFilter.field);return pt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(r){return pt.create(Io(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return It.create(r.compositeFilter.filters.map(n=>F1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne()}}(r.compositeFilter.op))}(t):Ne()}function X4(t){return H4[t]}function Y4(t){return V4[t]}function Z4(t){return K4[t]}function uA(t){return{fieldPath:t.canonicalString()}}function Io(t){return Vt.fromServerFormat(t.fieldPath)}function S1(t){return t instanceof pt?function(r){if(r.op==="=="){if(cB(r.value))return{unaryFilter:{field:uA(r.field),op:"IS_NAN"}};if(lB(r.value))return{unaryFilter:{field:uA(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(cB(r.value))return{unaryFilter:{field:uA(r.field),op:"IS_NOT_NAN"}};if(lB(r.value))return{unaryFilter:{field:uA(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uA(r.field),op:Y4(r.op),value:r.value}}}(t):t instanceof It?function(r){const n=r.getFilters().map(s=>S1(s));return n.length===1?n[0]:{compositeFilter:{op:Z4(r.op),filters:n}}}(t):Ne()}function eD(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function U1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,r,n,s,A=Ve.min(),i=Ve.min(),a=rr.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.ct=e}}function tD(t,e){let r;if(e.document)r=_1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Ce.fromSegments(e.noDocument.path),s=Wi(e.noDocument.readTime);r=Ht.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne();{const n=Ce.fromSegments(e.unknownDocument.path),s=Wi(e.unknownDocument.version);r=Ht.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const A=new qt(s[0],s[1]);return Ve.fromTimestamp(A)}(e.readTime)),r}function TB(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Dh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(A,i){return{name:kc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:wa(A,i.version.toTimestamp()),createTime:wa(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return Ne();n.unknownDocument={path:r.path.toArray(),version:$i(e.version)}}return n}function Dh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wi(t){const e=new qt(t.seconds,t.nanoseconds);return Ve.fromTimestamp(e)}function Ci(t,e){const r=(e.baseMutations||[]).map(A=>zm(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const a=e.mutations[A+1];i.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const n=e.mutations.map(A=>zm(t.ct,A)),s=qt.fromMillis(e.localWriteTimeMs);return new Lw(e.batchId,s,r,n)}function Sl(t){const e=Wi(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Wi(t.lastLimboFreeSnapshotVersion):Ve.min();let n;return n=function(A){return A.documents!==void 0}(t.query)?function(A){return Pe(A.documents.length===1),qr(Na(C1(A.documents[0])))}(t.query):function(A){return qr(T1(A))}(t.query),new Is(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,rr.fromBase64String(t.resumeToken))}function k1(t,e){const r=$i(e.snapshotVersion),n=$i(e.lastLimboFreeSnapshotVersion);let s;s=Qh(e.target)?I1(t.ct,e.target):Pf(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ki(e.target),readTime:r,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function Vw(t){const e=T1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nh(e,e.limit,"L"):e}function rp(t,e){return new Mw(e.largestBatchId,zm(t.ct,e.overlayMutation))}function FB(t,e){const r=e.path.lastSegment();return[t,Wr(e.path.popLast()),r]}function SB(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:$i(n.readTime),documentKey:Wr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{getBundleMetadata(e,r){return UB(e).get(r).next(n=>{if(n)return function(A){return{id:A.bundleId,createTime:Wi(A.createTime),version:A.version}}(n)})}saveBundleMetadata(e,r){return UB(e).put(function(s){return{bundleId:s.id,createTime:$i(ur(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return QB(e).get(r).next(n=>{if(n)return function(A){return{name:A.name,query:Vw(A.bundledQuery),readTime:Wi(A.readTime)}}(n)})}saveNamedQuery(e,r){return QB(e).put(function(s){return{name:s.name,readTime:$i(ur(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function UB(t){return yr(t,"bundles")}function QB(t){return yr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Lf(e,n)}getOverlay(e,r){return ul(e).get(FB(this.userId,r)).next(n=>n?rp(this.serializer,n):null)}getOverlays(e,r){const n=As();return j.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((A,i)=>{const a=new Mw(r,i);s.push(this.ht(e,a))}),j.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(i=>s.add(Wr(i.getCollectionPath())));const A=[];return s.forEach(i=>{const a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);A.push(ul(e).j("collectionPathOverlayIndex",a))}),j.waitFor(A)}getOverlaysForCollection(e,r,n){const s=As(),A=Wr(r),i=IDBKeyRange.bound([this.userId,A,n],[this.userId,A,Number.POSITIVE_INFINITY],!0);return ul(e).U("collectionPathOverlayIndex",i).next(a=>{for(const o of a){const c=rp(this.serializer,o);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const A=As();let i;const a=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ul(e).J({index:"collectionGroupOverlayIndex",range:a},(o,c,d)=>{const h=rp(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,r){return ul(e).put(function(s,A,i){const[a,o,c]=FB(A,i.mutation.key);return{userId:A,collectionPath:o,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Nc(s.ct,i.mutation)}}(this.serializer,this.userId,r))}}function ul(t){return yr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{Pt(e){return yr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?rr.fromUint8Array(n):rr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(zt(e.integerValue));else if("doubleValue"in e){const n=zt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Tc(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ps(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Ls(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?OE(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Nf(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Ne()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const A=e.fields||{};this.dt(r,53);const i="value",a=((s=(n=A[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(zt(a)),this.Vt(i,r),this.Tt(A[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),Ce.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}bi.vt=new bi;function sD(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function kB(t){const e=64-function(n){let s=0;for(let A=0;A<8;++A){const i=sD(255&n[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class AD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=kB(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=kB(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class iD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class oD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class dl{constructor(){this.jt=new AD,this.Ht=new iD(this.jt),this.Jt=new oD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new _i(this.indexId,this.documentKey,this.arrayValue,n)}}function eA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=NB(t.arrayValue,e.arrayValue),r!==0?r:(r=NB(t.directionalValue,e.directionalValue),r!==0?r:Ce.comparator(t.documentKey,e.documentKey)))}function NB(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.Xt=new Ut((r,n)=>Vt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Pe(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Rm(e);if(r!==void 0&&!this.sn(r))return!1;const n=xi(e);let s=new Set,A=0,i=0;for(;A<n.length&&this.sn(n[A]);++A)s=s.add(n[A].fieldPath.canonicalString());if(A===n.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const o=n[A];if(!this.on(a,o)||!this._n(this.en[i++],o))return!1}++A}for(;A<n.length;++A){const a=n[A];if(i>=this.en.length||!this._n(this.en[i++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ut(Vt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Ni(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Ni(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Ni(n.field,n.dir==="asc"?0:1)));return new da(da.UNKNOWN_ID,this.collectionId,r,ha.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){var e,r;if(Pe(t instanceof pt||t instanceof It),t instanceof pt){if(t instanceof JE){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(A=>pt.create(t.field,"==",A)))||[];return It.create(s,"or")}return t}const n=t.filters.map(s=>N1(s));return It.create(n,t.op)}function aD(t){if(t.getFilters().length===0)return[];const e=qm(N1(t));return Pe(R1(e)),$m(e)||Wm(e)?[e]:e.getFilters()}function $m(t){return t instanceof pt}function Wm(t){return t instanceof It&&kw(t)}function R1(t){return $m(t)||Wm(t)||function(r){if(r instanceof It&&jm(r)){for(const n of r.getFilters())if(!$m(n)&&!Wm(n))return!1;return!0}return!1}(t)}function qm(t){if(Pe(t instanceof pt||t instanceof It),t instanceof pt)return t;if(t.filters.length===1)return qm(t.filters[0]);const e=t.filters.map(n=>qm(n));let r=It.create(e,t.op);return r=Ph(r),R1(r)?r:(Pe(r instanceof It),Pe(ga(r)),Pe(r.filters.length>1),r.filters.reduce((n,s)=>Kw(n,s)))}function Kw(t,e){let r;return Pe(t instanceof pt||t instanceof It),Pe(e instanceof pt||e instanceof It),r=t instanceof pt?e instanceof pt?function(s,A){return It.create([s,A],"and")}(t,e):DB(t,e):e instanceof pt?DB(e,t):function(s,A){if(Pe(s.filters.length>0&&A.filters.length>0),ga(s)&&ga(A))return $E(s,A.getFilters());const i=jm(s)?s:A,a=jm(s)?A:s,o=i.filters.map(c=>Kw(c,a));return It.create(o,"or")}(t,e),Ph(r)}function DB(t,e){if(ga(e))return $E(e,t.getFilters());{const r=e.filters.map(n=>Kw(t,n));return It.create(r,"or")}}function Ph(t){if(Pe(t instanceof pt||t instanceof It),t instanceof pt)return t;const e=t.getFilters();if(e.length===1)return Ph(e[0]);if(GE(t))return t;const r=e.map(s=>Ph(s)),n=[];return r.forEach(s=>{s instanceof pt?n.push(s):s instanceof It&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:It.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.un=new Gw}addToCollectionParentIndex(e,r){return this.un.add(r),j.resolve()}getCollectionParents(e,r){return j.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return j.resolve()}deleteFieldIndex(e,r){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,r){return j.resolve()}getDocumentsMatchingTarget(e,r){return j.resolve(null)}getIndexType(e,r){return j.resolve(0)}getFieldIndexes(e,r){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,r){return j.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,r){return j.resolve(_n.min())}updateCollectionGroup(e,r,n){return j.resolve()}updateIndexEntries(e,r){return j.resolve()}}class Gw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ut(gt.comparator),A=!s.has(n);return this.index[r]=s.add(n),A}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ut(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=new Uint8Array(0);class cD{constructor(e,r){this.databaseId=r,this.cn=new Gw,this.ln=new zs(n=>Ki(n),(n,s)=>Yc(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const A={collectionId:n,parent:Wr(s)};return PB(e).put(A)}return j.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[EE(r),""],!1,!0);return PB(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==r)break;n.push(ss(i.parent))}return n})}addFieldIndex(e,r){const n=hl(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(r);delete s.indexId;const A=n.add(s);if(r.indexState){const i=po(e);return A.next(a=>{i.put(SB(a,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return A.next()}deleteFieldIndex(e,r){const n=hl(e),s=po(e),A=go(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=hl(e),n=go(e),s=po(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return j.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const A=new RB(n).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,r){const n=go(e);let s=!0;const A=new Map;return j.forEach(this.hn(r),i=>this.Pn(e,i).next(a=>{s&&(s=!!a),A.set(i,a)})).next(()=>{if(s){let i=ot();const a=[];return j.forEach(A,(o,c)=>{le("IndexedDbIndexManager",`Using index ${function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(o)} to execute ${Ki(r)}`);const d=function(B,S){const N=Rm(S);if(N===void 0)return null;for(const Q of kh(B,N.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(c,o),h=function(B,S){const N=new Map;for(const Q of xi(S))for(const x of kh(B,Q.fieldPath))switch(x.op){case"==":case"in":N.set(Q.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return N.set(Q.fieldPath.canonicalString(),x.value),Array.from(N.values())}return null}(c,o),f=function(B,S){const N=[];let Q=!0;for(const x of xi(S)){const b=x.kind===0?gB(B,x.fieldPath,B.startAt):pB(B,x.fieldPath,B.startAt);N.push(b.value),Q&&(Q=b.inclusive)}return new WA(N,Q)}(c,o),m=function(B,S){const N=[];let Q=!0;for(const x of xi(S)){const b=x.kind===0?pB(B,x.fieldPath,B.endAt):gB(B,x.fieldPath,B.endAt);N.push(b.value),Q&&(Q=b.inclusive)}return new WA(N,Q)}(c,o),v=this.In(o,c,f),y=this.In(o,c,m),I=this.Tn(o,c,h),C=this.En(o.indexId,d,v,f.inclusive,y,m.inclusive,I);return j.forEach(C,w=>n.G(w,r.limit).next(B=>{B.forEach(S=>{const N=Ce.fromSegments(S.documentKey);i.has(N)||(i=i.add(N),a.push(N))})}))}).next(()=>a)}return j.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=aD(It.create(e.filters,"and")).map(n=>Om(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,A,i,a){const o=(r!=null?r.length:1)*Math.max(n.length,A.length),c=o/(r!=null?r.length:1),d=[];for(let h=0;h<o;++h){const f=r?this.dn(r[h/c]):$u,m=this.An(e,f,n[h%c],s),v=this.Rn(e,f,A[h%c],i),y=a.map(I=>this.An(e,f,I,!0));d.push(...this.createRange(m,v,y))}return d}An(e,r,n,s){const A=new _i(e,Ce.empty(),r,n);return s?A:A.Zt()}Rn(e,r,n,s){const A=new _i(e,Ce.empty(),r,n);return s?A.Zt():A}Pn(e,r){const n=new RB(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const a of A)n.rn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a);return i})}getIndexType(e,r){let n=2;const s=this.hn(r);return j.forEach(s,A=>this.Pn(e,A).next(i=>{i?n!==0&&i.fields.length<function(o){let c=new Ut(Vt.comparator),d=!1;for(const h of o.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of o.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new dl;for(const s of xi(e)){const A=r.data.field(s.fieldPath);if(A==null)return null;const i=n.Yt(s.kind);bi.vt.It(A,i)}return n.zt()}dn(e){const r=new dl;return bi.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new dl;return bi.vt.It(Vi(this.databaseId,r),n.Yt(function(A){const i=xi(A);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new dl);let A=0;for(const i of xi(e)){const a=n[A++];for(const o of s)if(this.fn(r,i.fieldPath)&&Uc(a))s=this.gn(s,i,a);else{const c=o.Yt(i.kind);bi.vt.It(a,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],A=[];for(const i of n.arrayValue.values||[])for(const a of s){const o=new dl;o.seed(a.zt()),bi.vt.It(i,o.Yt(r.kind)),A.push(o)}return A}fn(e,r){return!!e.filters.find(n=>n instanceof pt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=hl(e),s=po(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(A=>{const i=[];return j.forEach(A,a=>s.get([a.indexId,this.uid]).next(o=>{i.push(function(d,h){const f=h?new ha(h.sequenceNumber,new _n(Wi(h.readTime),new Ce(ss(h.documentKey)),h.largestBatchId)):ha.empty(),m=d.fields.map(([v,y])=>new Ni(Vt.fromServerFormat(v),y));return new da(d.indexId,d.collectionGroup,m,f)}(a,o))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const A=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:rt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=hl(e),A=po(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(a=>j.forEach(a,o=>A.put(SB(o.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return j.forEach(r,(s,A)=>{const i=n.get(s.collectionGroup);return(i?j.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(n.set(s.collectionGroup,a),j.forEach(a,o=>this.wn(e,s,o).next(c=>{const d=this.Sn(A,o);return c.isEqual(d)?j.resolve():this.bn(e,A,o,c,d)}))))})}Dn(e,r,n,s){return go(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return go(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=go(e);let A=new Ut(eA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,a)=>{A=A.add(new _i(n.indexId,r,a.arrayValue,a.directionalValue))}).next(()=>A)}Sn(e,r){let n=new Ut(eA);const s=this.Vn(r,e);if(s==null)return n;const A=Rm(r);if(A!=null){const i=e.data.field(A.fieldPath);if(Uc(i))for(const a of i.arrayValue.values||[])n=n.add(new _i(r.indexId,e.key,this.dn(a),s))}else n=n.add(new _i(r.indexId,e.key,$u,s));return n}bn(e,r,n,s,A){le("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(o,c,d,h,f){const m=o.getIterator(),v=c.getIterator();let y=fo(m),I=fo(v);for(;y||I;){let C=!1,w=!1;if(y&&I){const B=d(y,I);B<0?w=!0:B>0&&(C=!0)}else y!=null?w=!0:C=!0;C?(h(I),I=fo(v)):w?(f(y),y=fo(m)):(y=fo(m),I=fo(v))}}(s,A,eA,a=>{i.push(this.Dn(e,r,n,a))},a=>{i.push(this.vn(e,r,n,a))}),j.waitFor(i)}yn(e){let r=1;return po(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,A)=>{A.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,a)=>eA(i,a)).filter((i,a,o)=>!a||eA(i,o[a-1])!==0);const s=[];s.push(e);for(const i of n){const a=eA(i,e),o=eA(i,r);if(a===0)s[0]=e.Zt();else if(a>0&&o<0)s.push(i),s.push(i.Zt());else if(o>0)break}s.push(r);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const a=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,$u,[]],o=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,$u,[]];A.push(IDBKeyRange.bound(a,o))}return A}Cn(e,r){return eA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(LB)}getMinOffset(e,r){return j.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Ne())).next(LB)}}function PB(t){return yr(t,"collectionParents")}function go(t){return yr(t,"indexEntries")}function hl(t){return yr(t,"indexConfiguration")}function po(t){return yr(t,"indexState")}function LB(t){Pe(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Sw(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new _n(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Gr(e,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(r.batchId);let a=0;const o=n.J({range:i},(d,h,f)=>(a++,f.delete()));A.push(o.next(()=>{Pe(a===1)}));const c=[];for(const d of r.mutations){const h=NE(e,d.key.path,r.batchId);A.push(s.delete(h)),c.push(d.key)}return j.waitFor(A).next(()=>c)}function Lh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ne();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(41943040,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);class jf{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Pe(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new jf(A,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tA(e).J({index:"userMutationsIndex",range:n},(s,A,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const A=Eo(e),i=tA(e);return i.add({}).next(a=>{Pe(typeof a=="number");const o=new Lw(a,r,n,s),c=function(m,v,y){const I=y.baseMutations.map(w=>Nc(m.ct,w)),C=y.mutations.map(w=>Nc(m.ct,w));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:I,mutations:C}}(this.serializer,this.userId,o),d=[];let h=new Ut((f,m)=>rt(f.canonicalString(),m.canonicalString()));for(const f of s){const m=NE(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(m,XR))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),j.waitFor(d).next(()=>o)})}lookupMutationBatch(e,r){return tA(e).get(r).next(n=>n?(Pe(n.userId===this.userId),Ci(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?j.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let A=null;return tA(e).J({index:"userMutationsIndex",range:s},(i,a,o)=>{a.userId===this.userId&&(Pe(a.batchId>=n),A=Ci(this.serializer,a)),o.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return tA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,A,i)=>{n=A.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Ci(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Ld(this.userId,r.path),s=IDBKeyRange.lowerBound(n),A=[];return Eo(e).J({range:s},(i,a,o)=>{const[c,d,h]=i,f=ss(d);if(c===this.userId&&r.path.isEqual(f))return tA(e).get(h).next(m=>{if(!m)throw Ne();Pe(m.userId===this.userId),A.push(Ci(this.serializer,m))});o.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ut(rt);const s=[];return r.forEach(A=>{const i=Ld(this.userId,A.path),a=IDBKeyRange.lowerBound(i),o=Eo(e).J({range:a},(c,d,h)=>{const[f,m,v]=c,y=ss(m);f===this.userId&&A.path.isEqual(y)?n=n.add(v):h.done()});s.push(o)}),j.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,A=Ld(this.userId,n),i=IDBKeyRange.lowerBound(A);let a=new Ut(rt);return Eo(e).J({range:i},(o,c,d)=>{const[h,f,m]=o,v=ss(f);h===this.userId&&n.isPrefixOf(v)?v.length===s&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,r){const n=[],s=[];return r.forEach(A=>{s.push(tA(e).get(A).next(i=>{if(i===null)throw Ne();Pe(i.userId===this.userId),n.push(Ci(this.serializer,i))}))}),j.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return D1(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),j.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return j.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return Eo(e).J({range:n},(A,i,a)=>{if(A[0]===this.userId){const o=ss(A[1]);s.push(o)}else a.done()}).next(()=>{Pe(s.length===0)})})}containsKey(e,r){return P1(e,this.userId,r)}Nn(e){return L1(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function P1(t,e,r){const n=Ld(e,r.path),s=n[1],A=IDBKeyRange.lowerBound(n);let i=!1;return Eo(t).J({range:A,H:!0},(a,o,c)=>{const[d,h,f]=a;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function tA(t){return yr(t,"mutations")}function Eo(t){return yr(t,"documentMutations")}function L1(t){return yr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qi(0)}static kn(){return new qi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new qi(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Ve.fromTimestamp(new qt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>mo(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Pe(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const A=[];return mo(e).J((i,a)=>{const o=Sl(a);o.sequenceNumber<=r&&n.get(o.targetId)===null&&(s++,A.push(this.removeTargetData(e,o)))}).next(()=>j.waitFor(A)).next(()=>s)}forEachTarget(e,r){return mo(e).J((n,s)=>{const A=Sl(s);r(A)})}qn(e){return MB(e).get("targetGlobalKey").next(r=>(Pe(r!==null),r))}Qn(e,r){return MB(e).put("targetGlobalKey",r)}Kn(e,r){return mo(e).put(k1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Ki(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let A=null;return mo(e).J({range:s,index:"queryTargetsIndex"},(i,a,o)=>{const c=Sl(a);Yc(r,c.target)&&(A=c,o.done())}).next(()=>A)}addMatchingKeys(e,r,n){const s=[],A=dA(e);return r.forEach(i=>{const a=Wr(i.path);s.push(A.put({targetId:n,path:a})),s.push(this.referenceDelegate.addReference(e,n,i))}),j.waitFor(s)}removeMatchingKeys(e,r,n){const s=dA(e);return j.forEach(r,A=>{const i=Wr(A.path);return j.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,A)])})}removeMatchingKeysForTargetId(e,r){const n=dA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=dA(e);let A=ot();return s.J({range:n,H:!0},(i,a,o)=>{const c=ss(i[1]),d=new Ce(c);A=A.add(d)}).next(()=>A)}containsKey(e,r){const n=Wr(r.path),s=IDBKeyRange.bound([n],[EE(n)],!1,!0);let A=0;return dA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,a],o,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,r){return mo(e).get(r).next(n=>n?Sl(n):null)}}function mo(t){return yr(t,"targets")}function MB(t){return yr(t,"targetGlobal")}function dA(t){return yr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OB([t,e],[r,n]){const s=rt(t,r);return s===0?rt(e,n):s}class dD{constructor(e){this.Un=e,this.buffer=new Ut(OB),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();OB(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class j1{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ai(r)?le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await si(r)}await this.Hn(3e5)})}}class hD{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return j.resolve(cn.oe);const n=new dD(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(jB)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jB):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,A,i,a,o,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(A=h,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),bo()<=ft.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(a-i)+`ms
	Removed ${A} targets in `+(o-a)+`ms
	Removed ${h} documents in `+(c-o)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function M1(t,e){return new hD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,r){this.db=e,this.garbageCollector=M1(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Wu(e,n)}removeReference(e,r,n){return Wu(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Wu(e,r)}nr(e,r){return function(s,A){let i=!1;return L1(s).Y(a=>P1(s,a,A).next(o=>(o&&(i=!0),j.resolve(!o)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,a)=>{if(a<=r){const o=this.nr(e,i).next(c=>{if(!c)return A++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Ve.min()),dA(e).delete(function(h){return[0,Wr(h.path)]}(i))))});s.push(o)}}).next(()=>j.waitFor(s)).next(()=>n.apply(e)).next(()=>A)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Wu(e,r)}tr(e,r){const n=dA(e);let s,A=cn.oe;return n.J({index:"documentTargetsIndex"},([i,a],{path:o,sequenceNumber:c})=>{i===0?(A!==cn.oe&&r(new Ce(ss(s)),A),A=c,s=o):A=cn.oe}).next(()=>{A!==cn.oe&&r(new Ce(ss(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wu(t,e){return dA(t).put(function(n,s){return{targetId:0,path:Wr(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.changes=new zs(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?j.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return pi(e).put(n)}removeEntry(e,r,n){return pi(e).delete(function(A,i){const a=A.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Dh(i),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Ht.newInvalidDocument(r);return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fl(r))},(s,A)=>{n=this.ir(r,A)}).next(()=>n)}sr(e,r){let n={size:0,document:Ht.newInvalidDocument(r)};return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fl(r))},(s,A)=>{n={document:this.ir(r,A),size:Lh(A)}}).next(()=>n)}getEntries(e,r){let n=dn();return this._r(e,r,(s,A)=>{const i=this.ir(s,A);n=n.insert(s,i)}).next(()=>n)}ar(e,r){let n=dn(),s=new Lt(Ce.comparator);return this._r(e,r,(A,i)=>{const a=this.ir(A,i);n=n.insert(A,a),s=s.insert(A,Lh(i))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return j.resolve();let s=new Ut(KB);r.forEach(o=>s=s.add(o));const A=IDBKeyRange.bound(fl(s.first()),fl(s.last())),i=s.getIterator();let a=i.getNext();return pi(e).J({index:"documentKeyIndex",range:A},(o,c,d)=>{const h=Ce.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&KB(a,h)<0;)n(a,null),a=i.getNext();a&&a.isEqual(h)&&(n(a,c),a=i.hasNext()?i.getNext():null),a?d.$(fl(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,A){const i=r.path,a=[i.popLast().toArray(),i.lastSegment(),Dh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pi(e).U(IDBKeyRange.bound(a,o,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=dn();for(const h of c){const f=this.ir(Ce.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(eu(r,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,s){let A=dn();const i=VB(r,n),a=VB(r,_n.max());return pi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(o,c,d)=>{const h=this.ir(Ce.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new pD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return HB(e).get("remoteDocumentGlobalKey").next(r=>(Pe(!!r),r))}rr(e,r){return HB(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=tD(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ve.min())))return n}return Ht.newInvalidDocument(e)}}function H1(t){return new gD(t)}class pD extends O1{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new zs(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Ut((A,i)=>rt(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const a=this.lr.get(A);if(r.push(this.cr.removeEntry(e,A,a.readTime)),i.isValidDocument()){const o=TB(this.cr.serializer,i);s=s.add(A.path.popLast());const c=Lh(o);n+=c-a.size,r.push(this.cr.addEntry(e,A,o))}else if(n-=a.size,this.trackRemovals){const o=TB(this.cr.serializer,i.convertToNoDocument(Ve.min()));r.push(this.cr.addEntry(e,A,o))}}),s.forEach(A=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),r.push(this.cr.updateMetadata(e,n)),j.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:n.get(A).readTime})}),n))}}function HB(t){return yr(t,"remoteDocumentGlobal")}function pi(t){return yr(t,"remoteDocumentsV14")}function fl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VB(t,e){const r=e.documentKey.path.toArray();return[t,Dh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function KB(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let A=0;A<r.length-2&&A<n.length-2;++A)if(s=rt(r[A],n[A]),s)return s;return s=rt(r.length,n.length),s||(s=rt(r[r.length-2],n[n.length-2]),s||rt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Xl(n.mutation,s,un.empty(),qt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ot()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ot()){const s=As();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(A=>{let i=Tl();return A.forEach((a,o)=>{i=i.insert(a,o.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=As();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ot()))}populateOverlays(e,r,n){const s=[];return n.forEach(A=>{r.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,a)=>{r.set(i,a)})})}computeViews(e,r,n,s){let A=dn();const i=Jl(),a=function(){return Jl()}();return r.forEach((o,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof $s)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),Xl(d.mutation,c,d.mutation.getFieldMask(),qt.now())):i.set(c.key,un.empty())}),this.recalculateAndSaveOverlays(e,A).next(o=>(o.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return a.set(c,new mD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=Jl();let s=new Lt((i,a)=>i-a),A=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const a of i)a.keys().forEach(o=>{const c=r.get(o);if(c===null)return;let d=n.get(o)||un.empty();d=a.applyToLocalView(c,d),n.set(o,d);const h=(s.get(a.batchId)||ot()).add(o);s=s.insert(a.batchId,h)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),c=o.key,d=o.value,h=A1();d.forEach(f=>{if(!A.has(f)){const m=d1(r.get(f),n.get(f));m!==null&&h.set(f,m),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return j.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return Ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Nw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-A.size):j.resolve(As());let a=-1,o=A;return i.next(c=>j.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),A.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{o=o.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,o,c,ot())).next(d=>({batchId:a,changes:s1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ce(r)).next(n=>{let s=Tl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const A=r.collectionGroup;let i=Tl();return this.indexManager.getCollectionParents(e,A).next(a=>j.forEach(a,o=>{const c=function(h,f){return new Gs(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,o.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,A,s))).next(i=>{A.forEach((o,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Ht.newInvalidDocument(d)))});let a=Tl();return i.forEach((o,c)=>{const d=A.get(o);d!==void 0&&Xl(d.mutation,c,un.empty(),qt.now()),eu(r,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return j.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ur(s.createTime)}}(r)),j.resolve()}getNamedQuery(e,r){return j.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:Vw(s.bundledQuery),readTime:ur(s.readTime)}}(r)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.overlays=new Lt(Ce.comparator),this.Ir=new Map}getOverlay(e,r){return j.resolve(this.overlays.get(r))}getOverlays(e,r){const n=As();return j.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,A)=>{this.ht(e,r,A)}),j.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(n)),j.resolve()}getOverlaysForCollection(e,r,n){const s=As(),A=r.length+1,i=new Ce(r.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const o=a.getNext().value,c=o.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===A&&o.largestBatchId>n&&s.set(o.getKey(),o)}return j.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let A=new Lt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=A.get(c.largestBatchId);d===null&&(d=As(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=As(),o=A.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return j.resolve(a)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Mw(r,n));let A=this.Ir.get(r);A===void 0&&(A=ot(),this.Ir.set(r,A)),this.Ir.set(r,A.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.Tr=new Ut(Br.Er),this.dr=new Ut(Br.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Br(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Br(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Ce(new gt([])),n=new Br(r,e),s=new Br(r,e+1),A=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ce(new gt([])),n=new Br(r,e),s=new Br(r,e+1);let A=ot();return this.dr.forEachInRange([n,s],i=>{A=A.add(i.key)}),A}containsKey(e){const r=new Br(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Br{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ce.comparator(e.key,r.key)||rt(e.wr,r.wr)}static Ar(e,r){return rt(e.wr,r.wr)||Ce.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ut(Br.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Lw(A,r,n,s);this.mutationQueue.push(i);for(const a of s)this.br=this.br.add(new Br(a.key,A)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(i)}lookupMutationBatch(e,r){return j.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),A=s<0?0:s;return j.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Br(r,0),s=new Br(r,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([n,s],i=>{const a=this.Dr(i.wr);A.push(a)}),j.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ut(rt);return r.forEach(s=>{const A=new Br(s,0),i=new Br(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],a=>{n=n.add(a.wr)})}),j.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let A=n;Ce.isDocumentKey(A)||(A=A.child(""));const i=new Br(new Ce(A),0);let a=new Ut(rt);return this.br.forEachWhile(o=>{const c=o.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(a=a.add(o.wr)),!0)},i),j.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Pe(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return j.forEach(r.mutations,s=>{const A=new Br(s.key,r.batchId);return n=n.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Br(r,0),s=this.br.firstAfterOrEqual(n);return j.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.Mr=e,this.docs=function(){return new Lt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),A=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return j.resolve(n?n.document.mutableCopy():Ht.newInvalidDocument(r))}getEntries(e,r){let n=dn();return r.forEach(s=>{const A=this.docs.get(s);n=n.insert(s,A?A.document.mutableCopy():Ht.newInvalidDocument(s))}),j.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let A=dn();const i=r.path,a=new Ce(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:c,value:{document:d}}=o.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Sw(FE(d),n)<=0||(s.has(d.key)||eu(r,d))&&(A=A.insert(d.key,d.mutableCopy()))}return j.resolve(A)}getAllFromCollectionGroup(e,r,n,s){Ne()}Or(e,r){return j.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new CD(this)}getSize(e){return j.resolve(this.size)}}class CD extends O1{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),j.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.persistence=e,this.Nr=new zs(r=>Ki(r),Yc),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zw,this.targetCount=0,this.kr=qi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),j.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new qi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,j.resolve()}updateTargetData(e,r){return this.Kn(r),j.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,r,n){let s=0;const A=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),j.waitFor(A).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return j.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),j.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,A=[];return s&&r.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),j.waitFor(A)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),j.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return j.resolve(n)}containsKey(e,r){return j.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,r){this.qr={},this.overlays={},this.Qr=new cn(0),this.Kr=!1,this.Kr=!0,this.$r=new vD,this.referenceDelegate=e(this),this.Ur=new bD(this),this.indexManager=new lD,this.remoteDocumentCache=function(s){return new BD(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Q1(r),this.Gr=new wD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new yD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new xD(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){le("MemoryPersistence","Starting transaction:",e);const s=new _D(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,r){return j.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class _D extends UE{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Jr=new zw,this.Yr=null}static Zr(e){return new Mf(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),j.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),j.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),j.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,n=>{const s=Ce.fromPath(n);return this.ei(e,s).next(A=>{A||r.removeEntry(s,Ve.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return j.or([()=>j.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class jh{constructor(e,r){this.persistence=e,this.ti=new zs(n=>Wr(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=M1(this,r)}static Zr(e,r){return new jh(e,r)}zr(){}jr(e){return j.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return j.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(A=>A?j.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),A=s.newChangeBuffer();return s.Or(e,i=>this.nr(e,i,r).next(a=>{a||(n++,A.removeEntry(i,Ve.min()))})).next(()=>A.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Md(e.data.value)),r}nr(e,r,n){return j.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return j.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.serializer=e}O(e,r,n,s){const A=new Uf("createOrUpgrade",r);n<1&&s>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sB,{unique:!0}),o.createObjectStore("documentMutations")}(e),GB(e),function(o){o.createObjectStore("remoteDocuments")}(e));let i=j.resolve();return n<3&&s>=3&&(n!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),GB(e)),i=i.next(()=>function(o){const c=o.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ve.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),n<4&&s>=4&&(n!==0&&(i=i.next(()=>function(o,c){return c.store("mutations").U().next(d=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sB,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return j.waitFor(f)})}(e,A))),i=i.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(i=i.next(()=>this.ni(A))),n<6&&s>=6&&(i=i.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),n<7&&s>=7&&(i=i.next(()=>this.ii(A))),n<8&&s>=8&&(i=i.next(()=>this.si(e,A))),n<9&&s>=9&&(i=i.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(i=i.next(()=>this.oi(A))),n<11&&s>=11&&(i=i.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:l4});c.createIndex("collectionPathOverlayIndex",c4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",u4,{unique:!1})})(e)})),n<13&&s>=13&&(i=i.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:YR});c.createIndex("documentKeyIndex",ZR),c.createIndex("collectionGroupIndex",e4)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),n<15&&s>=15&&(i=i.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:A4}).createIndex("sequenceNumberIndex",i4,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:o4}).createIndex("documentKeyIndex",a4,{unique:!1})}(e))),n<16&&s>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(i=i.next(()=>{(function(o){o.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Lh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>j.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(a=>j.forEach(a,o=>{Pe(o.userId===A.userId);const c=Ci(this.serializer,o);return D1(e,A.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return n.J((i,a)=>{const o=new gt(i),c=function(h){return[0,Wr(h)]}(o);A.push(r.get(c).next(d=>d?j.resolve():(h=>r.put({targetId:0,path:Wr(h),sequenceNumber:s.highestListenSequenceNumber}))(o)))}).next(()=>j.waitFor(A))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:s4});const n=r.store("collectionParents"),s=new Gw,A=i=>{if(s.add(i)){const a=i.lastSegment(),o=i.popLast();return n.put({collectionId:a,parent:Wr(o)})}};return r.store("remoteDocuments").J({H:!0},(i,a)=>{const o=new gt(i);return A(o.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,a,o],c)=>{const d=ss(a);return A(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const A=Sl(s),i=k1(this.serializer,A);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((A,i)=>{const a=r.store("remoteDocumentsV14"),o=function(h){return h.document?new Ce(gt.fromString(h.document.name).popFirst(5)):h.noDocument?Ce.fromSegments(h.noDocument.path):h.unknownDocument?Ce.fromSegments(h.unknownDocument.path):Ne()}(i).path.toArray(),c={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(a.put(c))}).next(()=>j.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=H1(this.serializer),A=new $w(Mf.Zr,this.serializer.ct);return n.U().next(i=>{const a=new Map;return i.forEach(o=>{var c;let d=(c=a.get(o.userId))!==null&&c!==void 0?c:ot();Ci(this.serializer,o).keys().forEach(h=>d=d.add(h)),a.set(o.userId,d)}),j.forEach(a,(o,c)=>{const d=new br(c),h=Lf.lt(this.serializer,d),f=A.getIndexManager(d),m=jf.lt(d,this.serializer,f,A.referenceDelegate);return new V1(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Dm(r,cn.oe),o).next()})})}}function GB(t){t.createObjectStore("targetDocuments",{keyPath:r4}).createIndex("documentTargetsIndex",n4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",t4,{unique:!0}),t.createObjectStore("targetGlobal")}const np="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ww{constructor(e,r,n,s,A,i,a,o,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=A,this.window=i,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Ww.D())throw new oe(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fD(this,s),this.Ai=r+"main",this.serializer=new Q1(o),this.Ri=new as(this.Ai,this.hi,new ID(this.serializer)),this.$r=new nD,this.Ur=new uD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=H1(this.serializer),this.Gr=new rD,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(G.FAILED_PRECONDITION,np);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new cn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Ai(e))return le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return gl(e).get("owner").next(r=>j.resolve(this.vi(r)))}Ci(e){return qu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=yr(r,"clientMetadata");return n.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(a=>A.indexOf(a)===-1);return j.forEach(i,a=>n.delete(a.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?j.resolve(!0):gl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new oe(G.FAILED_PRECONDITION,np);return!1}}return!(!this.networkEnabled||!this.inForeground)||qu(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(A||i&&a)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&le("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Dm(e,cn.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>qu(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return jf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){le("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",A=function(o){return o===17?f4:o===16?h4:o===15?Qw:o===14?PE:o===13?DE:o===12?d4:o===11?RE:void Ne()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,a=>(i=new Dm(a,this.Qr?this.Qr.next():cn.oe),r==="readwrite-primary"?this.wi(i).next(o=>!!o||this.Si(i)).next(o=>{if(!o)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new oe(G.FAILED_PRECONDITION,SE);return n(i)}).next(o=>this.Di(i).next(()=>o)):this.Ki(i).next(()=>n(i)))).then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e){return gl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new oe(G.FAILED_PRECONDITION,np)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gl(e).put("owner",r)}static D(){return as.D()}bi(e){const r=gl(e);return r.get("owner").next(n=>this.vi(n)?(le("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):j.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(cr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;uE()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return le("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return cr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gl(t){return yr(t,"owner")}function qu(t){return yr(t,"clientMetadata")}function qw(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=ot(),s=ot();for(const A of r.docChanges)switch(A.type){case 0:n=n.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new Jw(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return uE()?8:QE(wr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const A={result:null};return this.Yi(e,r).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,r,s,n).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new ED;return this.Xi(e,r,i).next(a=>{if(A.result=a,this.zi)return this.es(e,r,i,a.size)})}).next(()=>A.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(bo()<=ft.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",_o(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(bo()<=ft.DEBUG&&le("QueryEngine","Query:",_o(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(bo()<=ft.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",_o(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(r))):j.resolve())}Yi(e,r){if(mB(r))return j.resolve(null);let n=qr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Nh(r,null,"F"),n=qr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(A=>{const i=ot(...A);return this.Ji.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,n).next(o=>{const c=this.ts(r,a);return this.ns(r,c,i,o.readTime)?this.Yi(e,Nh(r,null,"F")):this.rs(e,c,r,o)}))})))}Zi(e,r,n,s){return mB(r)||s.isEqual(Ve.min())?j.resolve(null):this.Ji.getDocuments(e,n).next(A=>{const i=this.ts(r,A);return this.ns(r,i,n,s)?j.resolve(null):(bo()<=ft.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_o(r)),this.rs(e,i,r,TE(s,-1)).next(a=>a))})}ts(e,r){let n=new Ut(r1(e));return r.forEach((s,A)=>{eu(e,A)&&(n=n.add(A))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const A=e.limitType==="F"?r.last():r.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,r,n){return bo()<=ft.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",_o(r)),this.Ji.getDocumentsMatchingQuery(e,r,_n.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(A=>(r.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Lt(rt),this._s=new zs(A=>Ki(A),Yc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function G1(t,e,r,n){return new TD(t,e,r,n)}async function z1(t,e){const r=ye(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(A=>(s=A,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(A=>{const i=[],a=[];let o=ot();for(const c of s){i.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}for(const c of A){a.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}return r.localDocuments.getDocuments(n,o).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:a}))})})}function FD(t,e){const r=ye(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),A=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,o,c,d){const h=c.batch,f=h.keys();let m=j.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(o,v)).next(y=>{const I=c.docVersions.get(v);Pe(I!==null),y.version.compareTo(I)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(o,h))}(r,n,e,A).next(()=>A.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let o=ot();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function $1(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function SD(t,e){const r=ye(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(r.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(A,d.addedDocuments,h)));let m=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(rr.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(h,m),function(y,I,C){return y.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(f,m,d)&&a.push(r.Ur.updateTargetData(A,m))});let o=dn(),c=ot();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(A,d))}),a.push(W1(A,i,e.documentUpdates).next(d=>{o=d.Ps,c=d.Is})),!n.isEqual(Ve.min())){const d=r.Ur.getLastRemoteSnapshotVersion(A).next(h=>r.Ur.setTargetsMetadata(A,A.currentSequenceNumber,n));a.push(d)}return j.waitFor(a).next(()=>i.apply(A)).next(()=>r.localDocuments.getLocalViewOfDocuments(A,o,c)).next(()=>o)}).then(A=>(r.os=s,A))}function W1(t,e,r){let n=ot(),s=ot();return r.forEach(A=>n=n.add(A)),e.getEntries(t,n).next(A=>{let i=dn();return r.forEach((a,o)=>{const c=A.get(a);o.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),o.isNoDocument()&&o.version.isEqual(Ve.min())?(e.removeEntry(a,o.readTime),i=i.insert(a,o)):!c.isValidDocument()||o.version.compareTo(c.version)>0||o.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(o),i=i.insert(a,o)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",o.version)}),{Ps:i,Is:s}})}function UD(t,e){const r=ye(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ya(t,e){const r=ye(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(A=>A?(s=A,j.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Is(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function va(t,e,r){const n=ye(t),s=n.os.get(e),A=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",A,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Ai(i))throw i;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Mh(t,e,r){const n=ye(t);let s=Ve.min(),A=ot();return n.persistence.runTransaction("Execute query","readwrite",i=>function(o,c,d){const h=ye(o),f=h._s.get(d);return f!==void 0?j.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,qr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,a.targetId).next(o=>{A=o})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:Ve.min(),r?A:ot())).next(a=>(X1(n,t1(e),a),{documents:a,Ts:A})))}function q1(t,e){const r=ye(t),n=ye(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",A=>n.ot(A,e).next(i=>i?i.target:null))}function J1(t,e){const r=ye(t),n=r.us.get(e)||Ve.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,TE(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(X1(r,e,s),s))}function X1(t,e,r){let n=t.us.get(e)||Ve.min();r.forEach((s,A)=>{A.readTime.compareTo(n)>0&&(n=A.readTime)}),t.us.set(e,n)}async function QD(t,e,r,n){const s=ye(t);let A=ot(),i=dn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),o=await ya(s,function(d){return qr(Na(gt.fromString(`__bundle__/docs/${d}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>W1(c,a,i).next(d=>(a.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,o.targetId).next(()=>s.Ur.addMatchingKeys(c,A,o.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function kD(t,e,r=ot()){const n=await ya(t,qr(Vw(e.bundledQuery))),s=ye(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=ur(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const a=n.withResumeToken(rr.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(A,a).next(()=>s.Ur.removeMatchingKeysForTargetId(A,n.targetId)).next(()=>s.Ur.addMatchingKeys(A,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function zB(t,e){return`firestore_clients_${t}_${e}`}function $B(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function sp(t,e){return`firestore_targets_${t}_${e}`}class Oh{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new oe(s.error.code,s.error.message))),i?new Oh(e,r,s.state,A):(cr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yl{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,A=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return A&&n.error&&(A=typeof n.error.message=="string"&&typeof n.error.code=="string",A&&(s=new oe(n.error.code,n.error.message))),A?new Yl(e,n.state,s):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,A=Rw();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=kE(n.activeTargetIds[i]),A=A.add(n.activeTargetIds[i]);return s?new Hh(e,A):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Xw{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Xw(r.clientId,r.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jm{constructor(){this.activeTargetIds=Rw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ap{constructor(e,r,n,s,A){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Lt(rt),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=zB(this.persistenceKey,this.ps),this.vs=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Jm),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Os=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(zB(this.persistenceKey,n));if(s){const A=Hh.Rs(n,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(sp(this.persistenceKey,e));if(s){const A=Yl.Rs(e,s);A&&(n=A.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sp(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return le("SharedClientState","READ",e,r),r}setItem(e,r){le("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(A){let i=cn.oe;if(A!=null)try{const a=JSON.parse(A);Pe(typeof a=="number"),i=a}catch(a){cr("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(r.newValue);n!==cn.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new Oh(this.currentUser,e,r,n),A=$B(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const r=$B(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=sp(this.persistenceKey,e),A=new Yl(e,r,n);this.setItem(s,A.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Hh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),A=n[2]!==void 0?n[2]:null;return Oh.Rs(new br(A),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return Yl.Rs(s,r)}Ls(e){return Xw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(n),i=[],a=[];return A.forEach(o=>{s.has(o)||i.push(o)}),s.forEach(o=>{A.has(o)||a.push(o)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Rw();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class Y1{constructor(){this.so=new Jm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Jm,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function ip(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="WebChannelConnection";class PD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(r,n,s,A,i){const a=ip(),o=this.xo(r,n.toUriEncodedString());le("RestConnection",`Sending RPC '${r}' ${a}:`,o,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(r,o,c,s).then(d=>(le("RestConnection",`Received RPC '${r}' ${a}: `,d),d),d=>{throw bn("RestConnection",`RPC '${r}' ${a} failed with error: `,d,"url: ",o,"request:",s),d})}Lo(r,n,s,A,i,a){return this.Mo(r,n,s,A,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ka}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((A,i)=>r[i]=A),s&&s.headers.forEach((A,i)=>r[i]=A)}xo(r,n){const s=RD[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const A=ip();return new Promise((i,a)=>{const o=new yE;o.setWithCredentials(!0),o.listenOnce(vE.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Pd.NO_ERROR:const d=o.getResponseJson();le(Vr,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case Pd.TIMEOUT:le(Vr,`RPC '${e}' ${A} timed out`),a(new oe(G.DEADLINE_EXCEEDED,"Request time out"));break;case Pd.HTTP_ERROR:const h=o.getStatus();if(le(Vr,`RPC '${e}' ${A} failed with status:`,h,"response text:",o.getResponseText()),h>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(I){const C=I.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(C)>=0?C:G.UNKNOWN}(m.status);a(new oe(v,m.message))}else a(new oe(G.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new oe(G.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{le(Vr,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);le(Vr,`RPC '${e}' ${A} sending request:`,s),o.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=ip(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=CE(),a=BE(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const d=A.join("");le(Vr,`Creating RPC '${e}' stream ${s}: ${d}`,o);const h=i.createWebChannel(d,o);let f=!1,m=!1;const v=new DD({Io:I=>{m?le(Vr,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(f||(le(Vr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),le(Vr,`RPC '${e}' stream ${s} sending:`,I),h.send(I))},To:()=>h.close()}),y=(I,C,w)=>{I.listen(C,B=>{try{w(B)}catch(S){setTimeout(()=>{throw S},0)}})};return y(h,El.EventType.OPEN,()=>{m||(le(Vr,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),y(h,El.EventType.CLOSE,()=>{m||(m=!0,le(Vr,`RPC '${e}' stream ${s} transport closed`),v.So())}),y(h,El.EventType.ERROR,I=>{m||(m=!0,bn(Vr,`RPC '${e}' stream ${s} transport errored:`,I),v.So(new oe(G.UNAVAILABLE,"The operation could not be completed")))}),y(h,El.EventType.MESSAGE,I=>{var C;if(!m){const w=I.data[0];Pe(!!w);const B=w,S=B.error||((C=B[0])===null||C===void 0?void 0:C.error);if(S){le(Vr,`RPC '${e}' stream ${s} received error:`,S);const N=S.status;let Q=function(_){const k=dr[_];if(k!==void 0)return p1(k)}(N),x=S.message;Q===void 0&&(Q=G.INTERNAL,x="Unknown error status: "+N+" with message "+S.message),m=!0,v.So(new oe(Q,x)),h.close()}else le(Vr,`RPC '${e}' stream ${s} received:`,w),v.bo(w)}}),y(a,xE.STAT_EVENT,I=>{I.stat===Nm.PROXY?le(Vr,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Nm.NOPROXY&&le(Vr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){return typeof window<"u"?window:null}function Kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){return new G4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,r,n=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,r,n,s,A,i,a,o){this.ui=e,this.Ho=n,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===G.RESOURCE_EXHAUSTED?(cr(r.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new oe(G.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LD extends eT{constructor(e,r,n,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=W4(this.serializer,e),n=function(A){if(!("targetChange"in A))return Ve.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?Ve.min():i.readTime?ur(i.readTime):Ve.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Gm(this.serializer),r.addTarget=function(A,i){let a;const o=i.target;if(a=Qh(o)?{documents:I1(A,o)}:{query:Pf(A,o)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=v1(A,i.resumeToken);const c=Vm(A,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ve.min())>0){a.readTime=wa(A,i.snapshotVersion.toTimestamp());const c=Vm(A,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=J4(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Gm(this.serializer),r.removeTarget=e,this.a_(r)}}class jD extends eT{constructor(e,r,n,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=q4(e.writeResults,e.commitTime),n=ur(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Gm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Nc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,Km(r,n),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new oe(G.UNKNOWN,A.toString())})}Lo(e,r,n,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Lo(e,Km(r,n),s,i,a,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(G.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(r),this.D_=!1):le("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,r,n,s,A){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{n.enqueueAndForget(async()=>{oi(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=ye(o);c.L_.add(4),await Pa(c),c.q_.set("Unknown"),c.L_.delete(4),await Au(c)}(this))})}),this.q_=new OD(n,s)}}async function Au(t){if(oi(t))for(const e of t.B_)await e(!0)}async function Pa(t){for(const e of t.B_)await e(!1)}function Of(t,e){const r=ye(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),ty(r)?ey(r):ja(r).r_()&&Zw(r,e))}function xa(t,e){const r=ye(t),n=ja(r);r.N_.delete(e),n.r_()&&tT(r,e),r.N_.size===0&&(n.r_()?n.o_():oi(r)&&r.q_.set("Unknown"))}function Zw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ja(t).A_(e)}function tT(t,e){t.Q_.xe(e),ja(t).R_(e)}function ey(t){t.Q_=new O4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.q_.v_()}function ty(t){return oi(t)&&!ja(t).n_()&&t.N_.size>0}function oi(t){return ye(t).L_.size===0}function rT(t){t.Q_=void 0}async function VD(t){t.q_.set("Online")}async function KD(t){t.N_.forEach((e,r)=>{Zw(t,e)})}async function GD(t,e){rT(t),ty(t)?(t.q_.M_(e),ey(t)):t.q_.set("Unknown")}async function zD(t,e,r){if(t.q_.set("Online"),e instanceof y1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const a of A.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(n){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Vh(t,n)}else if(e instanceof Vd?t.Q_.Ke(e):e instanceof w1?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ve.min()))try{const n=await $1(t.localStore);r.compareTo(n)>=0&&await function(A,i){const a=A.Q_.rt(i);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,c)=>{const d=A.N_.get(o);if(!d)return;A.N_.set(o,d.withResumeToken(rr.EMPTY_BYTE_STRING,d.snapshotVersion)),tT(A,o);const h=new Is(d.target,o,c,d.sequenceNumber);Zw(A,h)}),A.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){le("RemoteStore","Failed to raise snapshot:",n),await Vh(t,n)}}async function Vh(t,e,r){if(!Ai(e))throw e;t.L_.add(1),await Pa(t),t.q_.set("Offline"),r||(r=()=>$1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Au(t)})}function nT(t,e){return e().catch(r=>Vh(t,r,e))}async function La(t){const e=ye(t),r=qA(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$D(e);)try{const s=await UD(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,WD(e,s)}catch(s){await Vh(e,s)}sT(e)&&AT(e)}function $D(t){return oi(t)&&t.O_.length<10}function WD(t,e){t.O_.push(e);const r=qA(t);r.r_()&&r.V_&&r.m_(e.mutations)}function sT(t){return oi(t)&&!qA(t).n_()&&t.O_.length>0}function AT(t){qA(t).start()}async function qD(t){qA(t).p_()}async function JD(t){const e=qA(t);for(const r of t.O_)e.m_(r.mutations)}async function XD(t,e,r){const n=t.O_.shift(),s=jw.from(n,e,r);await nT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await La(t)}async function YD(t,e){e&&qA(t).V_&&await async function(n,s){if(function(i){return g1(i)&&i!==G.ABORTED}(s.code)){const A=n.O_.shift();qA(n).s_(),await nT(n,()=>n.remoteSyncer.rejectFailedWrite(A.batchId,s)),await La(n)}}(t,e),sT(t)&&AT(t)}async function qB(t,e){const r=ye(t);r.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const n=oi(r);r.L_.add(3),await Pa(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Au(r)}async function Xm(t,e){const r=ye(t);e?(r.L_.delete(2),await Au(r)):e||(r.L_.add(2),await Pa(r),r.q_.set("Unknown"))}function ja(t){return t.K_||(t.K_=function(r,n,s){const A=ye(r);return A.w_(),new LD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:VD.bind(null,t),Ro:KD.bind(null,t),mo:GD.bind(null,t),d_:zD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ty(t)?ey(t):t.q_.set("Unknown")):(await t.K_.stop(),rT(t))})),t.K_}function qA(t){return t.U_||(t.U_=function(r,n,s){const A=ye(r);return A.w_(),new jD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qD.bind(null,t),mo:YD.bind(null,t),f_:JD.bind(null,t),g_:XD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await La(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,r,n,s,A){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=A,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,A){const i=Date.now()+n,a=new ry(e,r,i,s,A);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ma(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Ai(t))return new oe(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ce.comparator(r.key,n.key):(r,n)=>Ce.comparator(r.key,n.key),this.keyedMap=Tl(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new Xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Xo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(){this.W_=new Lt(Ce.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ba{constructor(e,r,n,s,A,i,a,o,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,A){const i=[];return r.forEach(a=>{i.push({type:0,doc:a})}),new Ba(e,r,Xo.emptySet(r),i,n,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class eP{constructor(){this.queries=XB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=ye(r),A=s.queries;s.queries=XB(),A.forEach((i,a)=>{for(const o of a.j_)o.onError(n)})})(this,new oe(G.ABORTED,"Firestore shutting down"))}}function XB(){return new zs(t=>e1(t),Zc)}async function ny(t,e){const r=ye(t);let n=3;const s=e.query;let A=r.queries.get(s);A?!A.H_()&&e.J_()&&(n=2):(A=new ZD,n=e.J_()?0:1);try{switch(n){case 0:A.z_=await r.onListen(s,!0);break;case 1:A.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const a=Ma(i,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(a)}r.queries.set(s,A),A.j_.push(e),e.Z_(r.onlineState),A.z_&&e.X_(A.z_)&&Ay(r)}async function sy(t,e){const r=ye(t),n=e.query;let s=3;const A=r.queries.get(n);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function tP(t,e){const r=ye(t);let n=!1;for(const s of e){const A=s.query,i=r.queries.get(A);if(i){for(const a of i.j_)a.X_(s)&&(n=!0);i.z_=s}}n&&Ay(r)}function rP(t,e,r){const n=ye(t),s=n.queries.get(e);if(s)for(const A of s.j_)A.onError(r);n.queries.delete(e)}function Ay(t){t.Y_.forEach(e=>{e.next()})}var Ym,YB;(YB=Ym||(Ym={})).ea="default",YB.Cache="cache";class iy{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ba(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e){this.serializer=e}Es(e){return ls(this.serializer,e)}ds(e){return e.metadata.exists?_1(this.serializer,e.document,!1):Ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ur(e)}}class sP{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=gt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new ZB(this.serializer);for(const s of e)if(s.metadata.queries){const A=n.Es(s.metadata.name);for(const i of s.metadata.queries){const a=(r.get(i)||ot()).add(A);r.set(i,a)}}return r}async complete(){const e=await QD(this.localStore,new ZB(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await kD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function iT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.key=e}}class aT{constructor(e){this.key=e}}class lT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ot(),this.mutatedKeys=ot(),this.Aa=r1(e),this.Ra=new Xo(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new JB,s=r?r.Ra:this.Ra;let A=r?r.mutatedKeys:this.mutatedKeys,i=s,a=!1;const o=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=eu(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?v!==y&&(n.track({type:3,doc:m}),I=!0):this.ga(f,m)||(n.track({type:2,doc:m}),I=!0,(o&&this.Aa(m,o)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(n.track({type:0,doc:m}),I=!0):f&&!m&&(n.track({type:1,doc:f}),I=!0,(o||c)&&(a=!0)),I&&(m?(i=i.add(m),A=y?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:a,mutatedKeys:A}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,v){const y=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return y(m)-y(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const a=r&&!s?this.ya():[],o=this.da.size===0&&this.current&&!s?1:0,c=o!==this.Ea;return this.Ea=o,i.length!==0||c?{snapshot:new Ba(this.query,e.Ra,A,i,e.mutatedKeys,o===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new JB,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ot(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new aT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new oT(n))}),r}ba(e){this.Ta=e.Ts,this.da=ot();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ba.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class iP{constructor(e){this.key=e,this.va=!1}}class oP{constructor(e,r,n,s,A,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new zs(a=>e1(a),Zc),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(Ce.comparator),this.Na=new Map,this.La=new zw,this.Ba={},this.ka=new Map,this.qa=qi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aP(t,e,r=!0){const n=Hf(t);let s;const A=n.Fa.get(e);return A?(n.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await cT(n,e,r,!0),s}async function lP(t,e){const r=Hf(t);await cT(r,e,!0,!1)}async function cT(t,e,r,n){const s=await ya(t.localStore,qr(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,r);let a;return n&&(a=await oy(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&Of(t.remoteStore,s),a}async function oy(t,e,r,n,s){t.Ka=(h,f,m)=>async function(y,I,C,w){let B=I.view.ma(C);B.ns&&(B=await Mh(y.localStore,I.query,!1).then(({documents:x})=>I.view.ma(x,B)));const S=w&&w.targetChanges.get(I.targetId),N=w&&w.targetMismatches.get(I.targetId)!=null,Q=I.view.applyChanges(B,y.isPrimaryClient,S,N);return Zm(y,I.targetId,Q.wa),Q.snapshot}(t,h,f,m);const A=await Mh(t.localStore,e,!0),i=new lT(e,A.Ts),a=i.ma(A.documents),o=nu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(a,t.isPrimaryClient,o);Zm(t,r,c.wa);const d=new AP(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function cP(t,e,r){const n=ye(t),s=n.Fa.get(e),A=n.Ma.get(s.targetId);if(A.length>1)return n.Ma.set(s.targetId,A.filter(i=>!Zc(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await va(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&xa(n.remoteStore,s.targetId),Ca(n,s.targetId)}).catch(si)):(Ca(n,s.targetId),await va(n.localStore,s.targetId,!0))}async function uP(t,e){const r=ye(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),xa(r.remoteStore,n.targetId))}async function dP(t,e,r){const n=uy(t);try{const s=await function(i,a){const o=ye(i),c=qt.now(),d=a.reduce((m,v)=>m.add(v.key),ot());let h,f;return o.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=dn(),y=ot();return o.cs.getEntries(m,d).next(I=>{v=I,v.forEach((C,w)=>{w.isValidDocument()||(y=y.add(C))})}).next(()=>o.localDocuments.getOverlayedDocuments(m,v)).next(I=>{h=I;const C=[];for(const w of a){const B=L4(w,h.get(w.key).overlayedDocument);B!=null&&C.push(new $s(w.key,B,VE(B.value.mapValue),Wt.exists(!0)))}return o.mutationQueue.addMutationBatch(m,c,C,a)}).next(I=>{f=I;const C=I.applyToLocalDocumentSet(h,y);return o.documentOverlayCache.saveOverlays(m,I.batchId,C)})}).then(()=>({batchId:f.batchId,changes:s1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,a,o){let c=i.Ba[i.currentUser.toKey()];c||(c=new Lt(rt)),c=c.insert(a,o),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await Ws(n,s.changes),await La(n.remoteStore)}catch(s){const A=Ma(s,"Failed to persist write");r.reject(A)}}async function uT(t,e){const r=ye(t);try{const n=await SD(r.localStore,e);e.targetChanges.forEach((s,A)=>{const i=r.Na.get(A);i&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Pe(i.va):s.removedDocuments.size>0&&(Pe(i.va),i.va=!1))}),await Ws(r,n,e)}catch(n){await si(n)}}function eC(t,e,r){const n=ye(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((A,i)=>{const a=i.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const o=ye(i);o.onlineState=a;let c=!1;o.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&Ay(o)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function hP(t,e,r){const n=ye(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),A=s&&s.key;if(A){let i=new Lt(Ce.comparator);i=i.insert(A,Ht.newNoDocument(A,Ve.min()));const a=ot().add(A),o=new ru(Ve.min(),new Map,new Lt(rt),i,a);await uT(n,o),n.Oa=n.Oa.remove(A),n.Na.delete(e),cy(n)}else await va(n.localStore,e,!1).then(()=>Ca(n,e,r)).catch(si)}async function fP(t,e){const r=ye(t),n=e.batch.batchId;try{const s=await FD(r.localStore,e);ly(r,n,null),ay(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ws(r,s)}catch(s){await si(s)}}async function gP(t,e,r){const n=ye(t);try{const s=await function(i,a){const o=ye(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return o.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pe(h!==null),d=h.keys(),o.mutationQueue.removeMutationBatch(c,h))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>o.localDocuments.getDocuments(c,d))})}(n.localStore,e);ly(n,e,r),ay(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ws(n,s)}catch(s){await si(s)}}async function pP(t,e){const r=ye(t);oi(r.remoteStore)||le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const a=ye(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=Ma(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function ay(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function ly(t,e,r){const n=ye(t);let s=n.Ba[n.currentUser.toKey()];if(s){const A=s.get(e);A&&(r?A.reject(r):A.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Ca(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||dT(t,n)})}function dT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(xa(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),cy(t))}function Zm(t,e,r){for(const n of r)n instanceof oT?(t.La.addReference(n.key,e),mP(t,n)):n instanceof aT?(le("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||dT(t,n.key)):Ne()}function mP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(le("SyncEngine","New document in limbo: "+r),t.xa.add(n),cy(t))}function cy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Ce(gt.fromString(e)),n=t.qa.next();t.Na.set(n,new iP(r)),t.Oa=t.Oa.insert(r,n),Of(t.remoteStore,new Is(qr(Na(r.path)),n,"TargetPurposeLimboResolution",cn.oe))}}async function Ws(t,e,r){const n=ye(t),s=[],A=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((a,o)=>{i.push(n.Ka(o,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(o.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(o.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Jw.Wi(o.targetId,c);A.push(h)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(o,c){const d=ye(o);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(c,f=>j.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>j.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Ai(h))throw h;le("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(f,y)}}}(n.localStore,A))}async function wP(t,e){const r=ye(t);if(!r.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const n=await z1(r.localStore,e);r.currentUser=e,function(A,i){A.ka.forEach(a=>{a.forEach(o=>{o.reject(new oe(G.CANCELLED,i))})}),A.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ws(r,n.hs)}}function yP(t,e){const r=ye(t),n=r.Na.get(e);if(n&&n.va)return ot().add(n.key);{let s=ot();const A=r.Ma.get(e);if(!A)return s;for(const i of A){const a=r.Fa.get(i);s=s.unionWith(a.view.Va)}return s}}async function vP(t,e){const r=ye(t),n=await Mh(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&Zm(r,e.targetId,s.wa),s}async function xP(t,e){const r=ye(t);return J1(r.localStore,e).then(n=>Ws(r,n))}async function BP(t,e,r,n){const s=ye(t),A=await function(a,o){const c=ye(a),d=ye(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,o).next(f=>f?c.localDocuments.getDocuments(h,f):j.resolve(null)))}(s.localStore,e);A!==null?(r==="pending"?await La(s.remoteStore):r==="acknowledged"||r==="rejected"?(ly(s,e,n||null),ay(s,e),function(a,o){ye(ye(a).mutationQueue).On(o)}(s.localStore,e)):Ne(),await Ws(s,A)):le("SyncEngine","Cannot apply mutation batch with id: "+e)}async function CP(t,e){const r=ye(t);if(Hf(r),uy(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await tC(r,n.toArray());r.Qa=!0,await Xm(r.remoteStore,!0);for(const A of s)Of(r.remoteStore,A)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((A,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then(()=>(Ca(r,i),va(r.localStore,i,!0))),xa(r.remoteStore,i)}),await s,await tC(r,n),function(i){const a=ye(i);a.Na.forEach((o,c)=>{xa(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Lt(Ce.comparator)}(r),r.Qa=!1,await Xm(r.remoteStore,!1)}}async function tC(t,e,r){const n=ye(t),s=[],A=[];for(const i of e){let a;const o=n.Ma.get(i);if(o&&o.length!==0){a=await ya(n.localStore,qr(o[0]));for(const c of o){const d=n.Fa.get(c),h=await vP(n,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await q1(n.localStore,i);a=await ya(n.localStore,c),await oy(n,hT(c),i,!1,a.resumeToken)}s.push(a)}return n.Ca.d_(A),s}function hT(t){return XE(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bP(t){return function(r){return ye(ye(r).persistence).Qi()}(ye(t).localStore)}async function _P(t,e,r,n){const s=ye(t);if(s.Qa)return void le("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(r){case"current":case"not-current":{const i=await J1(s.localStore,t1(A[0])),a=ru.createSynthesizedRemoteEventForCurrentChange(e,r==="current",rr.EMPTY_BYTE_STRING);await Ws(s,i,a);break}case"rejected":await va(s.localStore,e,!0),Ca(s,e,n);break;default:Ne()}}async function IP(t,e,r){const n=Hf(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){le("SyncEngine","Adding an already active target "+s);continue}const A=await q1(n.localStore,s),i=await ya(n.localStore,A);await oy(n,hT(A),i.targetId,!1,i.resumeToken),Of(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await va(n.localStore,s,!1).then(()=>{xa(n.remoteStore,s),Ca(n,s)}).catch(si)}}function Hf(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hP.bind(null,e),e.Ca.d_=tP.bind(null,e.eventManager),e.Ca.$a=rP.bind(null,e.eventManager),e}function uy(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gP.bind(null,e),e}function EP(t,e,r){const n=ye(t);(async function(A,i,a){try{const o=await i.getMetadata();if(await function(m,v){const y=ye(m),I=ur(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",C=>y.Gr.getBundleMetadata(C,v.id)).then(C=>!!C&&C.createTime.compareTo(I)>=0)}(A.localStore,o))return await i.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(iT(o));const c=new sP(o,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&a._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await Ws(A,h.Ia,void 0),await function(m,v){const y=ye(m);return y.persistence.runTransaction("Save bundle","readwrite",I=>y.Gr.saveBundleMetadata(I,v))}(A.localStore,o),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(o){return bn("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class JA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=su(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return G1(this.persistence,new K1,e.initialUser,this.serializer)}Ga(e){return new $w(Mf.Zr,this.serializer)}Wa(e){return new Y1}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}JA.provider={build:()=>new JA};class TP extends JA{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Pe(this.persistence.referenceDelegate instanceof jh);const n=this.persistence.referenceDelegate.garbageCollector;return new j1(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Gr.withCacheSize(this.cacheSizeBytes):Gr.DEFAULT;return new $w(n=>jh.Zr(n,r),this.serializer)}}class dy extends JA{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await uy(this.Ja.syncEngine),await La(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return G1(this.persistence,new K1,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new j1(n,e.asyncQueue,r)}Ha(e,r){const n=new qR(r,this.persistence);return new WR(e.asyncQueue,n)}Ga(e){const r=qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Gr.withCacheSize(this.cacheSizeBytes):Gr.DEFAULT;return new Ww(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Z1(),Kd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Y1}}class fT extends dy{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Ap&&(this.sharedClientState.syncEngine={no:BP.bind(null,r),ro:_P.bind(null,r),io:IP.bind(null,r),Qi:bP.bind(null,r),eo:xP.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await CP(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=Z1();if(!Ap.D(r))throw new oe(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ap(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class XA{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>eC(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=wP.bind(null,this.syncEngine),await Xm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eP}()}createDatastore(e){const r=su(e.databaseInfo.databaseId),n=function(A){return new PD(A)}(e.databaseInfo);return function(A,i,a,o){return new MD(A,i,a,o)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,A,i,a){return new HD(n,s,A,i,a)}(this.localStore,this.datastore,e.asyncQueue,r=>eC(this.syncEngine,r,0),function(){return WB.D()?new WB:new ND}())}createSyncEngine(e,r){return function(s,A,i,a,o,c,d){const h=new oP(s,A,i,a,o,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const A=ye(s);le("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Pa(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}XA.provider={build:()=>new XA};function rC(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Ir,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new nP(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,A){const i=ye(s),a={documents:A.map(h=>kc(i.serializer,h))},o=await i.Lo("BatchGetDocuments",i.serializer.databaseId,gt.emptyPath(),a,A.length),c=new Map;o.forEach(h=>{const f=$4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());Pe(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Da(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=Ce.fromPath(n);this.mutations.push(new Pw(s,this.precondition(s)))}),await async function(n,s){const A=ye(n),i={writes:s.map(a=>Nc(A.serializer,a))};await A.Mo("Commit",A.serializer.databaseId,gt.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Ne();r=Ve.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new oe(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ve.min())?Wt.exists(!1):Wt.updateTime(r):Wt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ve.min()))throw new oe(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(r)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,r,n,s,A){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=A,this._u=n.maxAttempts,this.t_=new Yw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new SP(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Xc(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!g1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,r,n,s,A){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=br.UNAUTHENTICATED,this.clientId=Fw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(n,async i=>{le("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(le("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Ma(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function op(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await z1(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nC(t,e){t.asyncQueue.verifyOperationInProgress();const r=await hy(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>qB(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>qB(e.remoteStore,s)),t._onlineComponents=e}async function hy(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await op(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;bn("Error using user provided cache. Falling back to memory cache: "+r),await op(t,new JA)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await op(t,new JA);return t._offlineComponents}async function Kf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await nC(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await nC(t,new XA))),t._onlineComponents}function gT(t){return hy(t).then(e=>e.persistence)}function Oa(t){return hy(t).then(e=>e.localStore)}function pT(t){return Kf(t).then(e=>e.remoteStore)}function fy(t){return Kf(t).then(e=>e.syncEngine)}function mT(t){return Kf(t).then(e=>e.datastore)}async function ba(t){const e=await Kf(t),r=e.eventManager;return r.onListen=aP.bind(null,e.syncEngine),r.onUnlisten=cP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=lP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=uP.bind(null,e.syncEngine),r}function kP(t){return t.asyncQueue.enqueue(async()=>{const e=await gT(t),r=await pT(t);return e.setNetworkEnabled(!0),function(s){const A=ye(s);return A.L_.delete(0),Au(A)}(r)})}function NP(t){return t.asyncQueue.enqueue(async()=>{const e=await gT(t),r=await pT(t);return e.setNetworkEnabled(!1),async function(s){const A=ye(s);A.L_.add(0),await Pa(A),A.q_.set("Offline")}(r)})}function RP(t,e){const r=new Ir;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await function(c,d){const h=ye(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new oe(G.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=Ma(a,`Failed to get document '${A} from cache`);i.reject(o)}}(await Oa(t),e,r)),r.promise}function wT(t,e,r={}){const n=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,o,c){const d=new Vf({next:f=>{d.Za(),i.enqueueAndForget(()=>sy(A,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new oe(G.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&o&&o.source==="server"?c.reject(new oe(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new iy(Na(a.path),d,{includeMetadataChanges:!0,_a:!0});return ny(A,h)}(await ba(t),t.asyncQueue,e,r,n)),n.promise}function DP(t,e){const r=new Ir;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await Mh(s,A,!0),o=new lT(A,a.Ts),c=o.ma(a.documents),d=o.applyChanges(c,!1);i.resolve(d.snapshot)}catch(a){const o=Ma(a,`Failed to execute query '${A} against cache`);i.reject(o)}}(await Oa(t),e,r)),r.promise}function yT(t,e,r={}){const n=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,o,c){const d=new Vf({next:f=>{d.Za(),i.enqueueAndForget(()=>sy(A,h)),f.fromCache&&o.source==="server"?c.reject(new oe(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new iy(a,d,{includeMetadataChanges:!0,_a:!0});return ny(A,h)}(await ba(t),t.asyncQueue,e,r,n)),n.promise}function PP(t,e,r){const n=new Ir;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await mT(t);n.resolve(async function(i,a,o){var c;const d=ye(i),{request:h,ut:f,parent:m}=E1(d.serializer,YE(a),o);d.connection.Fo||delete h.parent;const v=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(I=>!!I.result);Pe(v.length===1);const y=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(y).reduce((I,C)=>(I[f[C]]=y[C],I),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function LP(t,e){const r=new Vf(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){ye(s).Y_.add(A),A.next()}(await ba(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){ye(s).Y_.delete(A)}(await ba(t),r))}}function jP(t,e,r,n){const s=function(i,a){let o;return o=typeof i=="string"?m1().encode(i):i,function(d,h){return new FP(d,h)}(function(d,h){if(d instanceof Uint8Array)return rC(d,h);if(d instanceof ArrayBuffer)return rC(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(r,su(e));t.asyncQueue.enqueueAndForget(async()=>{EP(await fy(t),s,n)})}function MP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const A=ye(n);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await Oa(t),e))}function OP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const A=ye(n),i=A.indexManager,a=[];return A.persistence.runTransaction("Configure indexes","readwrite",o=>i.getFieldIndexes(o).next(c=>function(h,f,m,v,y){h=[...h],f=[...f],h.sort(m),f.sort(m);const I=h.length,C=f.length;let w=0,B=0;for(;w<C&&B<I;){const S=m(h[B],f[w]);S<0?y(h[B++]):S>0?v(f[w++]):(w++,B++)}for(;w<C;)v(f[w++]);for(;B<I;)y(h[B++])}(c,s,KR,d=>{a.push(i.addFieldIndex(o,d))},d=>{a.push(i.deleteFieldIndex(o,d))})).next(()=>j.waitFor(a)))}(await Oa(t),e))}function HP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){ye(n).ss.zi=s}(await Oa(t),e))}function VP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=ye(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",A=>s.deleteAllFieldIndexes(A))}(await Oa(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e,r){if(!r)throw new oe(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xT(t,e,r,n){if(e===!0&&n===!0)throw new oe(G.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function AC(t){if(!Ce.isDocumentKey(t))throw new oe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iC(t){if(Ce.isDocumentKey(t))throw new oe(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Gf(t);throw new oe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function BT(t,e){if(e<=0)throw new oe(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iu{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new _E;switch(n.type){case"firstParty":return new jR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new oe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=sC.get(r);n&&(le("ComponentProvider","Removing Datastore"),sC.delete(r),n.terminate())}(this),Promise.resolve()}}function CT(t,e,r,n={}){var s;const A=(t=ut(t,iu))._getSettings(),i=`${e}:${r}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&bn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),n.mockUserToken){let a,o;if(typeof n.mockUserToken=="string")a=n.mockUserToken,o=br.MOCK_USER;else{a=aN(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new oe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new br(c)}t._authCredentials=new DR(new bE(a,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class Ar{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class Wn extends Er{constructor(e,r,n){super(e,r,Na(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new Ce(e))}withConverter(e){return new Wn(this.firestore,e,this._path)}}function e0(t,e,...r){if(t=Rt(t),gy("collection","path",e),t instanceof iu){const n=gt.fromString(e,...r);return iC(n),new Wn(t,null,n)}{if(!(t instanceof Ar||t instanceof Wn))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(gt.fromString(e,...r));return iC(n),new Wn(t.firestore,null,n)}}function KP(t,e){if(t=ut(t,iu),gy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oe(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Er(t,null,function(n){return new Gs(gt.emptyPath(),n)}(e))}function rs(t,e,...r){if(t=Rt(t),arguments.length===1&&(e=Fw.newId()),gy("doc","path",e),t instanceof iu){const n=gt.fromString(e,...r);return AC(n),new Ar(t,null,new Ce(n))}{if(!(t instanceof Ar||t instanceof Wn))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(gt.fromString(e,...r));return AC(n),new Ar(t.firestore,t instanceof Wn?t.converter:null,new Ce(n))}}function GP(t,e){return t=Rt(t),e=Rt(e),(t instanceof Ar||t instanceof Wn)&&(e instanceof Ar||e instanceof Wn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function py(t,e){return t=Rt(t),e=Rt(e),t instanceof Er&&e instanceof Er&&t.firestore===e.firestore&&Zc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yw(this,"async_queue_retry"),this.Vu=()=>{const n=Kd();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Kd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Kd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Ir;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ai(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(n);throw cr("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=ry.createAndSchedule(this,e,r,n,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function t0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const A of n)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class bT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=-1;class Qt extends iu{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new aC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aC(e),this._firestoreClient=void 0,await e}}}function $P(t,e,r){r||(r="(default)");const n=Jc(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),A=n.getOptions(r);if(VA(A,e))return s;throw new oe(G.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new oe(G.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function _T(t,e){const r=typeof t=="object"?t:Ew(),n=typeof t=="string"?t:e||"(default)",s=Jc(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const A=iN("firestore");A&&CT(s,...A)}return s}function Jt(t){if(t._terminated)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IT(t),t._firestoreClient}function IT(t){var e,r,n;const s=t._freezeSettings(),A=function(a,o,c,d){return new m4(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,vT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new QP(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}function WP(t,e){bn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return ET(t,XA.provider,{build:n=>new dy(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function qP(t){bn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();ET(t,XA.provider,{build:r=>new fT(r,e.cacheSizeBytes)})}function ET(t,e,r){if((t=ut(t,Qt))._firestoreClient||t._terminated)throw new oe(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new oe(G.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},IT(t)}function JP(t){if(t._initialized&&!t._terminated)throw new oe(G.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!as.D())return Promise.resolve();const s=n+"main";await as.delete(s)}(qw(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function XP(t){return function(r){const n=new Ir;return r.asyncQueue.enqueueAndForget(async()=>pP(await fy(r),n)),n.promise}(Jt(t=ut(t,Qt)))}function YP(t){return kP(Jt(t=ut(t,Qt)))}function ZP(t){return NP(Jt(t=ut(t,Qt)))}function eL(t){return yR(t.app,"firestore",t._databaseId.database),t._delete()}function tL(t,e){const r=Jt(t=ut(t,Qt)),n=new bT;return jP(r,t._databaseId,e,n),n}function rL(t,e){return MP(Jt(t=ut(t,Qt)),e).then(r=>r?new Er(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class TT{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new YA(rr.fromBase64String(e))}catch(r){throw new oe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new YA(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new oe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function nL(){return new ai("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new oe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new oe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let A=0;A<n.length;++A)if(n[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=/^__.*__$/;class AL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new $s(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ra(e,this.data,r,this.fieldTransforms)}}class FT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new $s(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ST(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class $f{constructor(e,r,n,s,A,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ST(this.Cu)&&sL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||su(e)}Qu(e,r,n,s=!1){return new $f({Cu:e,methodName:r,qu:n,path:Vt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function no(t){const e=t._freezeSettings(),r=su(t._databaseId);return new iL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Wf(t,e,r,n,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,r,s);Cy("Data must be an object, but it was:",i,n);const a=kT(n,i);let o,c;if(A.merge)o=new un(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=Rc(e,h,r);if(!i.contains(f))throw new oe(G.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);RT(d,f)||d.push(f)}o=new un(d),c=i.fieldTransforms.filter(h=>o.covers(h.field))}else o=null,c=i.fieldTransforms;return new AL(new Nr(a),o,c)}class au extends li{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof au}}function UT(t,e,r){return new $f({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class my extends li{_toFieldTransform(e){return new tu(e.path,new pa)}isEqual(e){return e instanceof my}}class wy extends li{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=UT(this,e,!0),n=this.Ku.map(A=>so(A,r)),s=new Gi(n);return new tu(e.path,s)}isEqual(e){return e instanceof wy&&VA(this.Ku,e.Ku)}}class yy extends li{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=UT(this,e,!0),n=this.Ku.map(A=>so(A,r)),s=new zi(n);return new tu(e.path,s)}isEqual(e){return e instanceof yy&&VA(this.Ku,e.Ku)}}class vy extends li{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new ma(e.serializer,o1(e.serializer,this.$u));return new tu(e.path,r)}isEqual(e){return e instanceof vy&&this.$u===e.$u}}function xy(t,e,r,n){const s=t.Qu(1,e,r);Cy("Data must be an object, but it was:",s,n);const A=[],i=Nr.empty();ii(n,(o,c)=>{const d=qf(e,o,r);c=Rt(c);const h=s.Nu(d);if(c instanceof au)A.push(d);else{const f=so(c,h);f!=null&&(A.push(d),i.set(d,f))}});const a=new un(A);return new FT(i,a,s.fieldTransforms)}function By(t,e,r,n,s,A){const i=t.Qu(1,e,r),a=[Rc(e,n,r)],o=[s];if(A.length%2!=0)throw new oe(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)a.push(Rc(e,A[f])),o.push(A[f+1]);const c=[],d=Nr.empty();for(let f=a.length-1;f>=0;--f)if(!RT(c,a[f])){const m=a[f];let v=o[f];v=Rt(v);const y=i.Nu(m);if(v instanceof au)c.push(m);else{const I=so(v,y);I!=null&&(c.push(m),d.set(m,I))}}const h=new un(c);return new FT(d,h,i.fieldTransforms)}function QT(t,e,r,n=!1){return so(r,t.Qu(n?4:3,e))}function so(t,e){if(NT(t=Rt(t)))return Cy("Unsupported field value:",e,t),kT(t,e);if(t instanceof li)return function(n,s){if(!ST(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const A=n._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const A=[];let i=0;for(const a of n){let o=so(a,s.Lu(i));o==null&&(o={nullValue:"NULL_VALUE"}),A.push(o),i++}return{arrayValue:{values:A}}}(t,e)}return function(n,s){if((n=Rt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return o1(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const A=qt.fromDate(n);return{timestampValue:wa(s.serializer,A)}}if(n instanceof qt){const A=new qt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wa(s.serializer,A)}}if(n instanceof zf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof YA)return{bytesValue:v1(s.serializer,n._byteString)};if(n instanceof Ar){const A=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:Hw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ou)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(o=>{if(typeof o!="number")throw a.Bu("VectorValues must only contain numeric values.");return Dw(a.serializer,o)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Gf(n)}`)}(t,e)}function kT(t,e){const r={};return jE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ii(t,(n,s)=>{const A=so(s,e.Mu(n));A!=null&&(r[n]=A)}),{mapValue:{fields:r}}}function NT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof zf||t instanceof YA||t instanceof Ar||t instanceof li||t instanceof ou)}function Cy(t,e,r){if(!NT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Gf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Rc(t,e,r){if((e=Rt(e))instanceof ai)return e._internalPath;if(typeof e=="string")return qf(t,e);throw Kh("Field path arguments must be of type string or ",t,!1,void 0,r)}const oL=new RegExp("[~\\*/\\[\\]]");function qf(t,e,r){if(e.search(oL)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ai(...e.split("."))._internalPath}catch{throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Kh(t,e,r,n,s){const A=n&&!n.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(A||i)&&(o+=" (found",A&&(o+=` in field ${n}`),i&&(o+=` in document ${s}`),o+=")"),new oe(G.INVALID_ARGUMENT,a+t+o)}function RT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,r,n,s,A){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class aL extends Dc{data(){return super.data()}}function Jf(t,e){return typeof e=="string"?qf(t,e):e instanceof ai?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class Ha extends by{}function r0(t,e,...r){let n=[];e instanceof by&&n.push(e),n=n.concat(r),function(A){const i=A.filter(o=>o instanceof Ao).length,a=A.filter(o=>o instanceof Va).length;if(i>1||i>0&&a>0)throw new oe(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Va extends Ha{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Va(e,r,n)}_apply(e){const r=this._parse(e);return LT(e._query,r),new Er(e.firestore,e.converter,Hm(e._query,r))}_parse(e){const r=no(e.firestore);return function(A,i,a,o,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){cC(h,d);const m=[];for(const v of h)m.push(lC(o,A,v));f={arrayValue:{values:m}}}else f=lC(o,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||cC(h,d),f=QT(a,i,h,d==="in"||d==="not-in");return pt.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function lL(t,e,r){const n=e,s=Jf("where",t);return Va._create(s,n,r)}class Ao extends by{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Ao(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:It.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,A){let i=s;const a=A.getFlattenedFilters();for(const o of a)LT(i,o),i=Hm(i,o)}(e._query,r),new Er(e.firestore,e.converter,Hm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cL(...t){return t.forEach(e=>jT("or",e)),Ao._create("or",t)}function uL(...t){return t.forEach(e=>jT("and",e)),Ao._create("and",t)}class Xf extends Ha{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Xf(e,r)}_apply(e){const r=function(s,A,i){if(s.startAt!==null)throw new oe(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new oe(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qc(A,i)}(e._query,this._field,this._direction);return new Er(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new Gs(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function dL(t,e="asc"){const r=e,n=Jf("orderBy",t);return Xf._create(n,r)}class lu extends Ha{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new lu(e,r,n)}_apply(e){return new Er(e.firestore,e.converter,Nh(e._query,this._limit,this._limitType))}}function hL(t){return BT("limit",t),lu._create("limit",t,"F")}function fL(t){return BT("limitToLast",t),lu._create("limitToLast",t,"L")}class cu extends Ha{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new cu(e,r,n)}_apply(e){const r=PT(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,function(s,A){return new Gs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,r))}}function gL(...t){return cu._create("startAt",t,!0)}function pL(...t){return cu._create("startAfter",t,!1)}class uu extends Ha{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new uu(e,r,n)}_apply(e){const r=PT(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,function(s,A){return new Gs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,r))}}function mL(...t){return uu._create("endBefore",t,!1)}function wL(...t){return uu._create("endAt",t,!0)}function PT(t,e,r,n){if(r[0]=Rt(r[0]),r[0]instanceof Dc)return function(A,i,a,o,c){if(!o)throw new oe(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Jo(A))if(h.field.isKeyField())d.push(Vi(i,o.key));else{const f=o.data.field(h.field);if(Qf(f))throw new oe(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new oe(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new WA(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=no(t.firestore);return function(i,a,o,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new oe(G.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let v=0;v<d.length;v++){const y=d[v];if(f[v].field.isKeyField()){if(typeof y!="string")throw new oe(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!Nw(i)&&y.indexOf("/")!==-1)throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const I=i.path.child(gt.fromString(y));if(!Ce.isDocumentKey(I))throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const C=new Ce(I);m.push(Vi(a,C))}else{const I=QT(o,c,y);m.push(I)}}return new WA(m,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function lC(t,e,r){if(typeof(r=Rt(r))=="string"){if(r==="")throw new oe(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nw(e)&&r.indexOf("/")!==-1)throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(gt.fromString(r));if(!Ce.isDocumentKey(n))throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Vi(t,new Ce(n))}if(r instanceof Ar)return Vi(t,r._key);throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(r)}.`)}function cC(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LT(t,e){const r=function(s,A){for(const i of s)for(const a of i.getFlattenedFilters())if(A.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function jT(t,e){if(!(e instanceof Va||e instanceof Ao))throw new oe(G.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class _y{convertValue(e,r="none"){switch(zA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return ii(e,(s,A)=>{n[s]=this.convertValue(A,r)}),n}convertVectorValue(e){var r,n,s;const A=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>zt(i.doubleValue));return new ou(A)}convertGeoPoint(e){return new zf(zt(e.latitude),zt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=kf(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const r=Ps(e);return new qt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=gt.fromString(e);Pe(U1(n));const s=new GA(n.get(1),n.get(3)),A=new Ce(n.popFirst(5));return s.isEqual(r)||cr(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class yL extends _y{constructor(e){super(),this.firestore=e}convertBytes(e){return new YA(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t){return new _a("sum",Rc("sum",t))}function xL(t){return new _a("avg",Rc("average",t))}function MT(){return new _a("count")}function BL(t,e){var r,n;return t instanceof _a&&e instanceof _a&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function CL(t,e){return py(t.query,e.query)&&VA(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ji extends Dc{constructor(e,r,n,s,A,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Zl extends Ji{data(e={}){return super.data(e)}}class Xi{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new BA(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Zl(this._firestore,this._userDataWriter,n.key,n,new BA(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new oe(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const o=new Zl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new BA(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>A||a.type!==3).map(a=>{const o=new Zl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new BA(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:bL(a.type),doc:o,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function bL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}function _L(t,e){return t instanceof Ji&&e instanceof Ji?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xi&&e instanceof Xi&&t._firestore===e._firestore&&py(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){t=ut(t,Ar);const e=ut(t.firestore,Qt);return wT(Jt(e),t._key).then(r=>Iy(e,t,r))}class ci extends _y{constructor(e){super(),this.firestore=e}convertBytes(e){return new YA(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,r)}}function EL(t){t=ut(t,Ar);const e=ut(t.firestore,Qt),r=Jt(e),n=new ci(e);return RP(r,t._key).then(s=>new Ji(e,n,t._key,s,new BA(s!==null&&s.hasLocalMutations,!0),t.converter))}function TL(t){t=ut(t,Ar);const e=ut(t.firestore,Qt);return wT(Jt(e),t._key,{source:"server"}).then(r=>Iy(e,t,r))}function OT(t){t=ut(t,Er);const e=ut(t.firestore,Qt),r=Jt(e),n=new ci(e);return DT(t._query),yT(r,t._query).then(s=>new Xi(e,n,t,s))}function FL(t){t=ut(t,Er);const e=ut(t.firestore,Qt),r=Jt(e),n=new ci(e);return DP(r,t._query).then(s=>new Xi(e,n,t,s))}function SL(t){t=ut(t,Er);const e=ut(t.firestore,Qt),r=Jt(e),n=new ci(e);return yT(r,t._query,{source:"server"}).then(s=>new Xi(e,n,t,s))}function Gd(t,e,r){t=ut(t,Ar);const n=ut(t.firestore,Qt),s=Yf(t.converter,e,r);return Ka(n,[Wf(no(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Wt.none())])}function UL(t,e,r,...n){t=ut(t,Ar);const s=ut(t.firestore,Qt),A=no(s);let i;return i=typeof(e=Rt(e))=="string"||e instanceof ai?By(A,"updateDoc",t._key,e,r,n):xy(A,"updateDoc",t._key,e),Ka(s,[i.toMutation(t._key,Wt.exists(!0))])}function HT(t){return Ka(ut(t.firestore,Qt),[new Da(t._key,Wt.none())])}function QL(t,e){const r=ut(t.firestore,Qt),n=rs(t),s=Yf(t.converter,e);return Ka(r,[Wf(no(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Wt.exists(!1))]).then(()=>n)}function zd(t,...e){var r,n,s;t=Rt(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||t0(e[i])||(A=e[i],i++);const a={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(t0(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let o,c,d;if(t instanceof Ar)c=ut(t.firestore,Qt),d=Na(t._key.path),o={next:h=>{e[i]&&e[i](Iy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=ut(t,Er);c=ut(h.firestore,Qt),d=h._query;const f=new ci(c);o={next:m=>{e[i]&&e[i](new Xi(c,f,h,m))},error:e[i+1],complete:e[i+2]},DT(t._query)}return function(f,m,v,y){const I=new Vf(y),C=new iy(m,I,v);return f.asyncQueue.enqueueAndForget(async()=>ny(await ba(f),C)),()=>{I.Za(),f.asyncQueue.enqueueAndForget(async()=>sy(await ba(f),C))}}(Jt(c),d,a,o)}function kL(t,e){return LP(Jt(t=ut(t,Qt)),t0(e)?e:{next:e})}function Ka(t,e){return function(n,s){const A=new Ir;return n.asyncQueue.enqueueAndForget(async()=>dP(await fy(n),s,A)),A.promise}(Jt(t),e)}function Iy(t,e,r){const n=r.docs.get(e._key),s=new ci(t);return new Ji(t,s,e._key,n,new BA(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){return VT(t,{count:MT()})}function VT(t,e){const r=ut(t.firestore,Qt),n=Jt(r),s=LE(e,(A,i)=>new f1(i,A.aggregateType,A._internalFieldPath));return PP(n,t._query,s).then(A=>function(a,o,c){const d=new ci(a);return new TT(o,d,c)}(r,t,A))}class RL{constructor(e){this.kind="memory",this._onlineComponentProvider=XA.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=JA.provider}toJSON(){return{kind:this.kind}}}class DL{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=KT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class PL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=JA.provider}toJSON(){return{kind:this.kind}}}class LL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new TP(e)}}toJSON(){return{kind:this.kind}}}function jL(){return new PL}function ML(t){return new LL(t==null?void 0:t.cacheSizeBytes)}function OL(t){return new RL(t)}function HL(t){return new DL(t)}class VL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=XA.provider,this._offlineComponentProvider={build:r=>new dy(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class KL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=XA.provider,this._offlineComponentProvider={build:r=>new fT(r,e==null?void 0:e.cacheSizeBytes)}}}function KT(t){return new VL(t==null?void 0:t.forceOwnership)}function GL(){return new KL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=no(e)}set(e,r,n){this._verifyNotCommitted();const s=hA(e,this._firestore),A=Yf(s.converter,r,n),i=Wf(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,Wt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const A=hA(e,this._firestore);let i;return i=typeof(r=Rt(r))=="string"||r instanceof ai?By(this._dataReader,"WriteBatch.update",A._key,r,n,s):xy(this._dataReader,"WriteBatch.update",A._key,r),this._mutations.push(i.toMutation(A._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=hA(e,this._firestore);return this._mutations=this._mutations.concat(new Da(r._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hA(t,e){if((t=Rt(t)).firestore!==e)throw new oe(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=no(r)}get(r){const n=hA(r,this._firestore),s=new yL(this._firestore);return this._transaction.lookup([n._key]).then(A=>{if(!A||A.length!==1)return Ne();const i=A[0];if(i.isFoundDocument())return new Dc(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new Dc(this._firestore,s,n._key,null,n.converter);throw Ne()})}set(r,n,s){const A=hA(r,this._firestore),i=Yf(A.converter,n,s),a=Wf(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,a),this}update(r,n,s,...A){const i=hA(r,this._firestore);let a;return a=typeof(n=Rt(n))=="string"||n instanceof ai?By(this._dataReader,"Transaction.update",i._key,n,s,A):xy(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(r){const n=hA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=hA(e,this._firestore),n=new ci(this._firestore);return super.get(e).then(s=>new Ji(this._firestore,n,r._key,s._document,new BA(!1,!1),r.converter))}}function $L(t,e,r){t=ut(t,Qt);const n=Object.assign(Object.assign({},zL),r);return function(A){if(A.maxAttempts<1)throw new oe(G.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(A,i,a){const o=new Ir;return A.asyncQueue.enqueueAndForget(async()=>{const c=await mT(A);new UP(A.asyncQueue,c,a,i,o).au()}),o.promise}(Jt(t),s=>e(new zT(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(){return new au("deleteField")}function qL(){return new my("serverTimestamp")}function JL(...t){return new wy("arrayUnion",t)}function XL(...t){return new yy("arrayRemove",t)}function YL(t){return new vy("increment",t)}function ZL(t){return new ou(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){return Jt(t=ut(t,Qt)),new GT(t,e=>Ka(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e){const r=Jt(t=ut(t,Qt));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return bn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(A){const i=typeof A=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new oe(G.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(A):A,a=[];if(Array.isArray(i.indexes))for(const o of i.indexes){const c=uC(o,"collectionGroup"),d=[];if(Array.isArray(o.fields))for(const h of o.fields){const f=qf("setIndexConfiguration",uC(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Ni(f,2)):h.order==="ASCENDING"?d.push(new Ni(f,0)):h.order==="DESCENDING"&&d.push(new Ni(f,1))}a.push(new da(da.UNKNOWN_ID,c,d,ha.empty()))}return a}(e);return OP(r,n)}function uC(t,e){if(typeof t[e]!="string")throw new oe(G.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function tj(t){var e;t=ut(t,Qt);const r=dC.get(t);if(r)return r;if(((e=Jt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new WT(t);return dC.set(t,n),n}function rj(t){qT(t,!0)}function nj(t){qT(t,!1)}function sj(t){VP(Jt(t._firestore)).then(e=>le("deleting all persistent cache indexes succeeded")).catch(e=>bn("deleting all persistent cache indexes failed",e))}function qT(t,e){HP(Jt(t._firestore),e).then(r=>le(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>bn(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const dC=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){var e;const r=(e=Jt(ut(t.firestore,Qt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Pf(r,qr(t._query))._t}function ij(t,e){var r;const n=LE(e,(A,i)=>new f1(i,A.aggregateType,A._internalFieldPath)),s=(r=Jt(ut(t.firestore,Qt))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:E1(s,YE(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Ey.instance.onExistenceFilterMismatch(e)}}class Ey{constructor(){this.Uu=new Map}static get instance(){return Xu||(Xu=new Ey,function(r){if(Rh)throw new Error("a TestingHooksSpi instance is already set");Rh=r}(Xu)),Xu}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Xu=null;(function(e,r=!0){(function(s){ka=s})(Qa),ca(new Hi("firestore",(n,{instanceIdentifier:s,options:A})=>{const i=n.getProvider("app").getImmediate(),a=new Qt(new PR(n.getProvider("auth-internal")),new MR(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new GA(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:r},A),a._setSettings(A),a},"PUBLIC").setMultipleInstances(!0)),PA(tB,"4.7.3",e),PA(tB,"4.7.3","esm2017")})();const aj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:_y,AggregateField:_a,AggregateQuerySnapshot:TT,Bytes:YA,CACHE_SIZE_UNLIMITED:zP,CollectionReference:Wn,DocumentReference:Ar,DocumentSnapshot:Ji,FieldPath:ai,FieldValue:li,Firestore:Qt,FirestoreError:oe,GeoPoint:zf,LoadBundleTask:bT,PersistentCacheIndexManager:WT,Query:Er,QueryCompositeFilterConstraint:Ao,QueryConstraint:Ha,QueryDocumentSnapshot:Zl,QueryEndAtConstraint:uu,QueryFieldFilterConstraint:Va,QueryLimitConstraint:lu,QueryOrderByConstraint:Xf,QuerySnapshot:Xi,QueryStartAtConstraint:cu,SnapshotMetadata:BA,Timestamp:qt,Transaction:zT,VectorValue:ou,WriteBatch:GT,_AutoId:Fw,_ByteString:rr,_DatabaseId:GA,_DocumentKey:Ce,_EmptyAppCheckTokenProvider:OR,_EmptyAuthCredentialsProvider:_E,_FieldPath:Vt,_TestingHooks:oj,_cast:ut,_debugAssert:RR,_internalAggregationQueryToProtoRunAggregationQueryRequest:ij,_internalQueryToProtoQueryTarget:Aj,_isBase64Available:g4,_logWarn:bn,_validateIsNotUsedTogether:xT,addDoc:QL,aggregateFieldEqual:BL,aggregateQuerySnapshotEqual:CL,and:uL,arrayRemove:XL,arrayUnion:JL,average:xL,clearIndexedDbPersistence:JP,collection:e0,collectionGroup:KP,connectFirestoreEmulator:CT,count:MT,deleteAllPersistentCacheIndexes:sj,deleteDoc:HT,deleteField:WL,disableNetwork:ZP,disablePersistentCacheIndexAutoCreation:nj,doc:rs,documentId:nL,enableIndexedDbPersistence:WP,enableMultiTabIndexedDbPersistence:qP,enableNetwork:YP,enablePersistentCacheIndexAutoCreation:rj,endAt:wL,endBefore:mL,ensureFirestoreConfigured:Jt,executeWrite:Ka,getAggregateFromServer:VT,getCountFromServer:NL,getDoc:IL,getDocFromCache:EL,getDocFromServer:TL,getDocs:OT,getDocsFromCache:FL,getDocsFromServer:SL,getFirestore:_T,getPersistentCacheIndexManager:tj,increment:YL,initializeFirestore:$P,limit:hL,limitToLast:fL,loadBundle:tL,memoryEagerGarbageCollector:jL,memoryLocalCache:OL,memoryLruGarbageCollector:ML,namedQuery:rL,onSnapshot:zd,onSnapshotsInSync:kL,or:cL,orderBy:dL,persistentLocalCache:HL,persistentMultipleTabManager:GL,persistentSingleTabManager:KT,query:r0,queryEqual:py,refEqual:GP,runTransaction:$L,serverTimestamp:qL,setDoc:Gd,setIndexConfiguration:ej,setLogLevel:NR,snapshotEqual:_L,startAfter:pL,startAt:gL,sum:vL,terminate:eL,updateDoc:UL,vector:ZL,waitForPendingWrites:XP,where:lL,writeBatch:$T},Symbol.toStringTag,{value:"Module"}));function Ty(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function JT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lj=JT,XT=new Wc("auth","Firebase",JT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new _w("@firebase/auth");function cj(t,...e){Gh.logLevel<=ft.WARN&&Gh.warn(`Auth (${Qa}): ${t}`,...e)}function $d(t,...e){Gh.logLevel<=ft.ERROR&&Gh.error(`Auth (${Qa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,...e){throw Fy(t,...e)}function cs(t,...e){return Fy(t,...e)}function YT(t,e,r){const n=Object.assign(Object.assign({},lj()),{[e]:r});return new Wc("auth","Firebase",n).create(e,{appName:t.name})}function LA(t){return YT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fy(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return XT.create(t,...e)}function tt(t,e,...r){if(!t)throw Fy(e,...r)}function Es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $d(e),new Error(e)}function js(t,e){t||Es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uj(){return hC()==="http:"||hC()==="https:"}function hC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uj()||dN()||"connection"in navigator)?navigator.onLine:!0}function hj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,r){this.shortDelay=e,this.longDelay=r,js(r>e,"Short delay should be less than long delay!"),this.isMobile=lN()||hN()}get(){return dj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){js(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new du(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ui(t,e,r,n,s={}){return eF(t,s,async()=>{let A={},i={};n&&(e==="GET"?i=n:A={body:JSON.stringify(n)});const a=qc(Object.assign({key:t.config.apiKey},i)).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:o},A);return uN()||(c.referrerPolicy="no-referrer"),ZT.fetch()(tF(t,t.config.apiHost,r,a),c)})}async function eF(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},fj),e);try{const s=new mj(t),A=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw Yu(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const a=A.ok?i.errorMessage:i.error.message,[o,c]=a.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yu(t,"credential-already-in-use",i);if(o==="EMAIL_EXISTS")throw Yu(t,"email-already-in-use",i);if(o==="USER_DISABLED")throw Yu(t,"user-disabled",i);const d=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw YT(t,d,c);Jn(t,d)}}catch(s){if(s instanceof Ks)throw s;Jn(t,"network-request-failed",{message:String(s)})}}async function Zf(t,e,r,n,s={}){const A=await ui(t,e,r,n,s);return"mfaPendingCredential"in A&&Jn(t,"multi-factor-auth-required",{_serverResponse:A}),A}function tF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Sy(t.config,s):`${t.config.apiScheme}://${s}`}function pj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(cs(this.auth,"network-request-failed")),gj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=cs(t,e,n);return s.customData._tokenResponse=r,s}function fC(t){return t!==void 0&&t.enterprise!==void 0}class wj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return pj(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function yj(t,e){return ui(t,"GET","/v2/recaptchaConfig",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){return ui(t,"POST","/v1/accounts:delete",e)}async function rF(t,e){return ui(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xj(t,e=!1){const r=Rt(t),n=await r.getIdToken(e),s=Uy(n);tt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:n,authTime:ec(ap(s.auth_time)),issuedAtTime:ec(ap(s.iat)),expirationTime:ec(ap(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function ap(t){return Number(t)*1e3}function Uy(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const s=oE(r);return s?JSON.parse(s):($d("Failed to decode base64 JWT payload"),null)}catch(s){return $d("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function gC(t){const e=Uy(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ks&&Bj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Bj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Pc(t,rF(r,{idToken:n}));tt(s==null?void 0:s.users.length,r,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?nF(A.providerUserInfo):[],a=_j(t.providerData,i),o=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(a!=null&&a.length),d=o?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:a,metadata:new s0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function bj(t){const e=Rt(t);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _j(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function nF(t){return t.map(e=>{var{providerId:r}=e,n=Ty(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t,e){const r=await eF(t,{},async()=>{const n=qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=tF(t,s,"/v1/token",`key=${A}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZT.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Ej(t,e){return ui(t,"POST","/v2/accounts:revokeToken",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const r=gC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:A}=await Ij(e,r);this.updateTokensAndExpiration(n,s,Number(A))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:A}=r,i=new Yo;return n&&(tt(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(tt(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(tt(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ts{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,A=Ty(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new s0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const r=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return tt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return xj(this,e)}reload(){return bj(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ts(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await zh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_s(this.auth.app))return Promise.reject(LA(this.auth));const e=await this.getIdToken();return await Pc(this,vj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,A,i,a,o,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,m=(A=r.phoneNumber)!==null&&A!==void 0?A:void 0,v=(i=r.photoURL)!==null&&i!==void 0?i:void 0,y=(a=r.tenantId)!==null&&a!==void 0?a:void 0,I=(o=r._redirectEventId)!==null&&o!==void 0?o:void 0,C=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:B,emailVerified:S,isAnonymous:N,providerData:Q,stsTokenManager:x}=r;tt(B&&x,e,"internal-error");const b=Yo.fromJSON(this.name,x);tt(typeof B=="string",e,"internal-error"),rA(h,e.name),rA(f,e.name),tt(typeof S=="boolean",e,"internal-error"),tt(typeof N=="boolean",e,"internal-error"),rA(m,e.name),rA(v,e.name),rA(y,e.name),rA(I,e.name),rA(C,e.name),rA(w,e.name);const _=new Ts({uid:B,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:N,photoURL:v,phoneNumber:m,tenantId:y,stsTokenManager:b,createdAt:C,lastLoginAt:w});return Q&&Array.isArray(Q)&&(_.providerData=Q.map(k=>Object.assign({},k))),I&&(_._redirectEventId=I),_}static async _fromIdTokenResponse(e,r,n=!1){const s=new Yo;s.updateFromServerResponse(r);const A=new Ts({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await zh(A),A}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];tt(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?nF(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),a=new Yo;a.updateFromIdToken(n);const o=new Ts({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new s0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Map;function Fs(t){js(t instanceof Function,"Expected a class definition");let e=pC.get(t);return e?(js(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}sF.type="NONE";const mC=sF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t,e,r){return`firebase:${t}:${e}:${r}`}class Zo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:A}=this.auth;this.fullUserKey=Wd(this.userKey,s.apiKey,A),this.fullPersistenceKey=Wd("persistence",s.apiKey,A),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ts._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Zo(Fs(mC),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||Fs(mC);const i=Wd(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const d=await c._get(i);if(d){const h=Ts._fromJSON(e,d);c!==A&&(a=h),A=c;break}}catch{}const o=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!o.length?new Zo(A,e,n):(A=o[0],a&&await A._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new Zo(A,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cF(e))return"Blackberry";if(uF(e))return"Webos";if(iF(e))return"Safari";if((e.includes("chrome/")||oF(e))&&!e.includes("edge/"))return"Chrome";if(lF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function AF(t=wr()){return/firefox\//i.test(t)}function iF(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oF(t=wr()){return/crios\//i.test(t)}function aF(t=wr()){return/iemobile/i.test(t)}function lF(t=wr()){return/android/i.test(t)}function cF(t=wr()){return/blackberry/i.test(t)}function uF(t=wr()){return/webos/i.test(t)}function Qy(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Tj(t=wr()){var e;return Qy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Fj(){return fN()&&document.documentMode===10}function dF(t=wr()){return Qy(t)||lF(t)||uF(t)||cF(t)||/windows phone/i.test(t)||aF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t,e=[]){let r;switch(t){case"Browser":r=wC(wr());break;case"Worker":r=`${wC(wr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Qa}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=A=>new Promise((i,a)=>{try{const o=e(A);i(o)}catch(o){a(o)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e={}){return ui(t,"GET","/v2/passwordPolicy",io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=6;class kj{constructor(e){var r,n,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:Qj,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,A,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(r=o.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(n=o.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),o.isValid&&(o.isValid=(s=o.containsLowercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(A=o.containsUppercaseLetter)!==null&&A!==void 0?A:!0),o.isValid&&(o.isValid=(i=o.containsNumericCharacter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(a=o.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),o}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yC(this),this.idTokenSubscription=new yC(this),this.beforeStateQueue=new Sj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Fs(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await rF(this,{idToken:e}),n=await Ts._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(_s(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=s==null?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&(o!=null&&o.user)&&(s=o.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_s(this.app))return Promise.reject(LA(this));const r=e?Rt(e):null;return r&&tt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _s(this.app)?Promise.reject(LA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _s(this.app)?Promise.reject(LA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Uj(this),r=new kj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ej(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Fs(e)||this._popupRedirectResolver;tt(r,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Fs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const A=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(a,this,"internal-error"),a.then(()=>{i||A(this.currentUser)}),typeof r=="function"){const o=e.addObserver(r,n,s);return()=>{i=!0,o()}}else{const o=e.addObserver(r);return()=>{i=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&cj(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ga(t){return Rt(t)}class yC{constructor(e){this.auth=e,this.observer=null,this.addObserver=vN(r=>this.observer=r)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rj(t){eg=t}function fF(t){return eg.loadJS(t)}function Dj(){return eg.recaptchaEnterpriseScript}function Pj(){return eg.gapiScript}function Lj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const jj="recaptcha-enterprise",Mj="NO_RECAPTCHA";class Oj{constructor(e){this.type=jj,this.auth=Ga(e)}async verify(e="verify",r=!1){async function n(A){if(!r){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,a)=>{yj(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new wj(o);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(o=>{a(o)})})}function s(A,i,a){const o=window.grecaptcha;fC(o)?o.enterprise.ready(()=>{o.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(Mj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{n(this.auth).then(a=>{if(!r&&fC(window.grecaptcha))s(a,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let o=Dj();o.length!==0&&(o+=a),fF(o).then(()=>{s(a,A,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function vC(t,e,r,n=!1){const s=new Oj(t);let A;try{A=await s.verify(r)}catch{A=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function xC(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await vC(t,e,r,r==="getOobCode");return n(t,A)}else return n(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await vC(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(A)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t,e){const r=Jc(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),A=r.getOptions();if(VA(A,e??{}))return s;Jn(s,"already-initialized")}return r.initialize({options:e})}function Vj(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Kj(t,e,r){const n=Ga(t);tt(n._canInitEmulator,n,"emulator-config-failed"),tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,A=gF(e),{host:i,port:a}=Gj(e),o=a===null?"":`:${a}`;n.config.emulator={url:`${A}//${i}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:a,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),zj()}function gF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Gj(t){const e=gF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const A=s[1];return{host:A,port:BC(n.substr(A.length+1))}}else{const[A,i]=n.split(":");return{host:A,port:BC(i)}}}function BC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zj(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Es("not implemented")}_getIdTokenResponse(e){return Es("not implemented")}_linkToIdToken(e,r){return Es("not implemented")}_getReauthenticationResolver(e){return Es("not implemented")}}async function $j(t,e){return ui(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wj(t,e){return Zf(t,"POST","/v1/accounts:signInWithPassword",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e){return Zf(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}async function Jj(t,e){return Zf(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends ky{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Lc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Lc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xC(e,r,"signInWithPassword",Wj);case"emailLink":return qj(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xC(e,n,"signUpPassword",$j);case"emailLink":return Jj(e,{idToken:r,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e){return Zf(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="http://localhost";class Yi extends ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Jn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,A=Ty(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new Yi(n,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return ea(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ea(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ea(e,r)}buildRequest(){const e={requestUri:Xj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=qc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zj(t){const e=_l(Il(t)).link,r=e?_l(Il(e)).deep_link_id:null,n=_l(Il(t)).deep_link_id;return(n?_l(Il(n)).link:null)||n||r||e||t}class Ny{constructor(e){var r,n,s,A,i,a;const o=_l(Il(e)),c=(r=o.apiKey)!==null&&r!==void 0?r:null,d=(n=o.oobCode)!==null&&n!==void 0?n:null,h=Yj((s=o.mode)!==null&&s!==void 0?s:null);tt(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=o.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=o.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=o.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=Zj(e);try{return new Ny(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.providerId=za.PROVIDER_ID}static credential(e,r){return Lc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Ny.parseLink(r);return tt(n,"argument-error"),Lc._fromEmailAndCode(e,n.code,n.tenantId)}}za.PROVIDER_ID="password";za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends pF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends hu{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:fA.PROVIDER_ID,signInMethod:fA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fA.credentialFromTaggedObject(e)}static credentialFromError(e){return fA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fA.credential(e.oauthAccessToken)}catch{return null}}}fA.FACEBOOK_SIGN_IN_METHOD="facebook.com";fA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Yi._fromParams({providerId:gA.PROVIDER_ID,signInMethod:gA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return gA.credentialFromTaggedObject(e)}static credentialFromError(e){return gA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return gA.credential(r,n)}catch{return null}}}gA.GOOGLE_SIGN_IN_METHOD="google.com";gA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends hu{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:pA.PROVIDER_ID,signInMethod:pA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pA.credentialFromTaggedObject(e)}static credentialFromError(e){return pA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pA.credential(e.oauthAccessToken)}catch{return null}}}pA.GITHUB_SIGN_IN_METHOD="github.com";pA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends hu{constructor(){super("twitter.com")}static credential(e,r){return Yi._fromParams({providerId:mA.PROVIDER_ID,signInMethod:mA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return mA.credentialFromTaggedObject(e)}static credentialFromError(e){return mA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return mA.credential(r,n)}catch{return null}}}mA.TWITTER_SIGN_IN_METHOD="twitter.com";mA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const A=await Ts._fromIdTokenResponse(e,n,s),i=CC(n);return new Ia({user:A,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=CC(n);return new Ia({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function CC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Ks{constructor(e,r,n,s){var A;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new $h(e,r,n,s)}}function mF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(t,A,e,n):A})}async function eM(t,e,r=!1){const n=await Pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ia._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e,r=!1){const{auth:n}=t;if(_s(n.app))return Promise.reject(LA(n));const s="reauthenticate";try{const A=await Pc(t,mF(n,s,e,t),r);tt(A.idToken,n,"internal-error");const i=Uy(A.idToken);tt(i,n,"internal-error");const{sub:a}=i;return tt(t.uid===a,n,"user-mismatch"),Ia._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&Jn(n,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e,r=!1){if(_s(t.app))return Promise.reject(LA(t));const n="signIn",s=await mF(t,n,e),A=await Ia._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(A.user),A}async function rM(t,e){return wF(Ga(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t){const e=Ga(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sM(t,e,r){return _s(t.app)?Promise.reject(LA(t)):rM(Rt(t),za.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nM(t),n})}function AM(t,e,r,n){return Rt(t).onIdTokenChanged(e,r,n)}function iM(t,e,r){return Rt(t).beforeAuthStateChanged(e,r)}function oM(t,e,r,n){return Rt(t).onAuthStateChanged(e,r,n)}function bC(t){return Rt(t).signOut()}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=1e3,lM=10;class vF extends yF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,o)=>{this.notifyListeners(i,o)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},A=this.storage.getItem(n);Fj()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lM):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},aM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}vF.type="LOCAL";const cM=vF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF extends yF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}xF.type="SESSION";const BF=xF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new tg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:A}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(i).map(async c=>c(r.origin,A)),o=await uM(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:o})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((a,o)=>{const c=Ry("",20);s.port1.start();const d=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),a(f.data.response);break;default:clearTimeout(d),clearTimeout(A),o(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function hM(t){us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function fM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pM(){return CF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF="firebaseLocalStorageDb",mM=1,qh="firebaseLocalStorage",_F="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function rg(t,e){return t.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function wM(){const t=indexedDB.deleteDatabase(bF);return new fu(t).toPromise()}function A0(){const t=indexedDB.open(bF,mM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(qh,{keyPath:_F})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(qh)?e(n):(n.close(),await wM(),e(await A0()))})})}async function _C(t,e,r){const n=rg(t,!0).put({[_F]:e,value:r});return new fu(n).toPromise()}async function yM(t,e){const r=rg(t,!1).get(e),n=await new fu(r).toPromise();return n===void 0?null:n.value}function IC(t,e){const r=rg(t,!0).delete(e);return new fu(r).toPromise()}const vM=800,xM=3;class IF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>xM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tg._getInstance(pM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await fM(),!this.activeServiceWorker)return;this.sender=new dM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A0();return await _C(e,Wh,"1"),await IC(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>_C(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>yM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>IC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=rg(s,!1).getAll();return new fu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IF.type="LOCAL";const BM=IF;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t,e){return e?Fs(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ea(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ea(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function bM(t){return wF(t.auth,new Dy(t),t.bypassAuthState)}function _M(t){const{auth:e,user:r}=t;return tt(r,e,"internal-error"),tM(r,new Dy(t),t.bypassAuthState)}async function IM(t){const{auth:e,user:r}=t;return tt(r,e,"internal-error"),eM(r,new Dy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,r,n,s,A=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:A,error:i,type:a}=e;if(i){this.reject(i);return}const o={auth:this.auth,requestUri:r,sessionId:n,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bM;case"linkViaPopup":case"linkViaRedirect":return IM;case"reauthViaPopup":case"reauthViaRedirect":return _M;default:Jn(this.auth,"internal-error")}}resolve(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new du(2e3,1e4);class Ho extends EF{constructor(e,r,n,s,A){super(e,r,s,A),this.provider=n,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){js(this.filter.length===1,"Popup operations only handle one event");const e=Ry();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EM.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="pendingRedirect",qd=new Map;class FM extends EF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const n=await SM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SM(t,e){const r=kM(e),n=QM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function UM(t,e){qd.set(t._key(),e)}function QM(t){return Fs(t._redirectPersistence)}function kM(t){return Wd(TM,t.config.apiKey,t.name)}async function NM(t,e,r=!1){if(_s(t.app))return Promise.reject(LA(t));const n=Ga(t),s=CM(n,e),i=await new FM(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=10*60*1e3;class DM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!TF(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(cs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RM&&this.cachedEventUids.clear(),this.cachedEventUids.has(EC(e))}saveEventToCache(e){this.cachedEventUids.add(EC(e)),this.lastProcessedEventTime=Date.now()}}function EC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t,e={}){return ui(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MM=/^https?/;async function OM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LM(t);for(const r of e)try{if(HM(r))return}catch{}Jn(t,"unauthorized-domain")}function HM(t){const e=n0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!MM.test(r))return!1;if(jM.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new du(3e4,6e4);function TC(){const t=us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function KM(t){return new Promise((e,r)=>{var n,s,A;function i(){TC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TC(),r(cs(t,"network-request-failed"))},timeout:VM.get()})}if(!((s=(n=us().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=us().gapi)===null||A===void 0)&&A.load)i();else{const a=Lj("iframefcb");return us()[a]=()=>{gapi.load?i():r(cs(t,"network-request-failed"))},fF(`${Pj()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function GM(t){return Jd=Jd||KM(t),Jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=new du(5e3,15e3),$M="__/auth/iframe",WM="emulator/auth/iframe",qM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XM(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Sy(e,WM):`https://${t.config.authDomain}/${$M}`,n={apiKey:e.apiKey,appName:t.name,v:Qa},s=JM.get(t.config.apiHost);s&&(n.eid=s);const A=t._getFrameworks();return A.length&&(n.fw=A.join(",")),`${r}?${qc(n).slice(1)}`}async function YM(t){const e=await GM(t),r=us().gapi;return tt(r,t,"internal-error"),e.open({where:document.body,url:XM(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qM,dontclear:!0},n=>new Promise(async(s,A)=>{await n.restyle({setHideOnLeave:!1});const i=cs(t,"network-request-failed"),a=us().setTimeout(()=>{A(i)},zM.get());function o(){us().clearTimeout(a),s(n)}n.ping(o).then(o,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eO=500,tO=600,rO="_blank",nO="http://localhost";class FC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sO(t,e,r,n=eO,s=tO){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const o=Object.assign(Object.assign({},ZM),{width:n.toString(),height:s.toString(),top:A,left:i}),c=wr().toLowerCase();r&&(a=oF(c)?rO:r),AF(c)&&(e=e||nO,o.scrollbars="yes");const d=Object.entries(o).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(Tj(c)&&a!=="_self")return AO(e||"",a),new FC(null);const h=window.open(e||"",a,d);tt(h,t,"popup-blocked");try{h.focus()}catch{}return new FC(h)}function AO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="__/auth/handler",oO="emulator/auth/handler",aO=encodeURIComponent("fac");async function SC(t,e,r,n,s,A){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Qa,eventId:s};if(e instanceof pF){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",yN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof hu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const o=await t._getAppCheckToken(),c=o?`#${aO}=${encodeURIComponent(o)}`:"";return`${lO(t)}?${qc(a).slice(1)}${c}`}function lO({config:t}){return t.emulator?Sy(t,oO):`https://${t.authDomain}/${iO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class cO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BF,this._completeRedirectFn=NM,this._overrideRedirectResult=UM}async _openPopup(e,r,n,s){var A;js((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await SC(e,r,n,n0(),s);return sO(e,i,Ry())}async _openRedirect(e,r,n,s){await this._originValidation(e);const A=await SC(e,r,n,n0(),s);return hM(A),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:A}=this.eventManagers[r];return s?Promise.resolve(s):(js(A,"If manager is not set, promise should be"),A)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await YM(e),n=new DM(e);return r.register("authEvent",s=>(tt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(lp,{type:lp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[lp];i!==void 0&&r(!!i),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=OM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return dF()||iF()||Qy()}}const uO=cO;var UC="@firebase/auth",QC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fO(t){ca(new Hi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;tt(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hF(t)},c=new Nj(n,s,A,o);return Vj(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ca(new Hi("auth-internal",e=>{const r=Ga(e.getProvider("auth").getImmediate());return(n=>new dO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),PA(UC,QC,hO(t)),PA(UC,QC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=5*60,pO=cE("authIdTokenMaxAge")||gO;let kC=null;const mO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>pO)return;const s=r==null?void 0:r.token;kC!==s&&(kC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wO(t=Ew()){const e=Jc(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Hj(t,{popupRedirectResolver:uO,persistence:[BM,cM,BF]}),n=cE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const A=new URL(n,location.origin);if(location.origin===A.origin){const i=mO(A.toString());iM(r,i,()=>i(r.currentUser)),AM(r,a=>i(a))}}const s=aE("auth");return s&&Kj(r,`http://${s}`),r}function yO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Rj({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const A=cs("internal-error");A.customData=s,r(A)},n.type="text/javascript",n.charset="UTF-8",yO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fO("Browser");const vO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",xO="zameny-b6c3f.firebaseapp.com",BO="zameny-b6c3f",CO="zameny-b6c3f.firebasestorage.app",bO="323355347910",_O="1:323355347910:web:c81f2813dce5ee9373c0c7",FF={apiKey:vO,authDomain:xO,projectId:BO,storageBucket:CO,messagingSenderId:bO,appId:_O};let Jh;BR().length?Jh=Ew():Jh=gE(FF);const Fr=_T(Jh),vn=wO(Jh);FF.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Mt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule"},IO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},Zu=t=>JSON.parse(JSON.stringify(t)),Ur={syncCollection:async(t,e)=>{if(!Fr)return;const r=r0(e0(Fr,t)),n=await EO(async()=>await OT(r)),s=new Map;n.docs.forEach(o=>{s.set(o.id,o.data())});const A=new Map;e.forEach(o=>A.set(o.id,o));const i=[];if(s.forEach((o,c)=>{A.has(c)||i.push({type:"delete",id:c})}),e.forEach(o=>{const c=s.get(o.id),d=Zu(o);(!c||JSON.stringify(c)!==JSON.stringify(d))&&i.push({type:"set",item:d})}),i.length===0)return;console.log(`Syncing ${t}: ${i.length} changes.`);const a=IO(i,450);for(const o of a){const c=$T(Fr);o.forEach(d=>{const h=rs(Fr,t,d.id||d.item.id);d.type==="delete"?c.delete(h):c.set(h,d.item)}),await c.commit()}},save:async t=>{if(!Fr){console.error("Database not initialized");return}const e=vn==null?void 0:vn.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :   .");return}const r=[];t.teachers&&r.push(Ur.syncCollection(Mt.TEACHERS,t.teachers)),t.subjects&&r.push(Ur.syncCollection(Mt.SUBJECTS,t.subjects)),t.classes&&r.push(Ur.syncCollection(Mt.CLASSES,t.classes)),t.rooms&&r.push(Ur.syncCollection(Mt.ROOMS,t.rooms)),t.schedule&&r.push(Ur.syncCollection(Mt.SCHEDULE_1,t.schedule)),t.schedule2ndHalf&&r.push(Ur.syncCollection(Mt.SCHEDULE_2,t.schedule2ndHalf)),t.substitutions&&r.push(Ur.syncCollection(Mt.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&r.push(Ur.syncCollection(Mt.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&r.push(Ur.syncCollection(Mt.DUTY_SCHEDULE,t.dutySchedule)),t.settings&&r.push(Gd(rs(Fr,Mt.CONFIG,"settings"),Zu(t.settings))),t.bellSchedule&&r.push(Gd(rs(Fr,Mt.CONFIG,"bells"),Zu({items:t.bellSchedule}))),await Promise.all(r),console.log("Data saved successfully to collections")},subscribe:(t,e)=>{if(!Fr)return()=>{};let r={...an},n;const s=()=>{clearTimeout(n),n=setTimeout(()=>{t({...r})},50)},A=[],i=(a,o)=>{const c=r0(e0(Fr,a));return zd(c,d=>{const h=d.docs.map(f=>f.data());h.sort((f,m)=>{const v=typeof f.order=="number"?f.order:999999,y=typeof m.order=="number"?m.order:999999;return v-y}),r[o]=h,s()},d=>{console.warn(`Error reading ${a}:`,d)})};return A.push(i(Mt.TEACHERS,"teachers")),A.push(i(Mt.SUBJECTS,"subjects")),A.push(i(Mt.CLASSES,"classes")),A.push(i(Mt.ROOMS,"rooms")),A.push(i(Mt.SCHEDULE_1,"schedule")),A.push(i(Mt.SCHEDULE_2,"schedule2ndHalf")),A.push(i(Mt.SUBSTITUTIONS,"substitutions")),A.push(i(Mt.DUTY_ZONES,"dutyZones")),A.push(i(Mt.DUTY_SCHEDULE,"dutySchedule")),A.push(zd(rs(Fr,Mt.CONFIG,"settings"),a=>{a.exists()&&(r.settings={...an.settings,...a.data()},s())})),A.push(zd(rs(Fr,Mt.CONFIG,"bells"),a=>{if(a.exists()){const o=a.data();r.bellSchedule=o.items||an.bellSchedule,s()}})),()=>{A.forEach(a=>a()),clearTimeout(n)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Fr)throw new Error("Database not initialized");const r=vn==null?void 0:vn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects,teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:""})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,schedule2ndHalf:e.schedule2ndHalf,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=Zu(n);await Gd(rs(Fr,Mt.PUBLIC,t),s)},getPublicData:async t=>{if(!Fr)return null;try{const e=await Y2(()=>Promise.resolve().then(()=>aj),void 0).then(r=>r.getDoc(rs(Fr,Mt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Fr&&await HT(rs(Fr,Mt.PUBLIC,t))}};async function EO(t){try{return await t()}catch(e){return console.error("Firestore read error (likely quota):",e),{docs:[]}}}const SF=U.createContext(void 0),TO="admin@gymnasium22.com",FO="teacher@gymnasium22.com",SO=({children:t})=>{const[e,r]=U.useState(null),[n,s]=U.useState(null),[A,i]=U.useState(!0);U.useEffect(()=>{if(!vn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=oM(vn,d=>{r(d),d?d.email===TO?s("admin"):d.email===FO?s("teacher"):(s(null),bC(vn)):s(null),i(!1)});return()=>c()},[]);const a=async()=>{vn&&await bC(vn),s(null)},o=()=>{s("guest"),i(!1)};return l.jsx(SF.Provider,{value:{user:e,role:n,loading:A,logout:a,setGuestRole:o},children:t})},oo=()=>{const t=U.useContext(SF);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},UF=U.createContext(void 0),pl="gym_data_local_backup_v2",QF=({children:t,initialData:e})=>{const[r,n]=U.useState(an),[s,A]=U.useState(!0),[i,a]=U.useState([]),[o,c]=U.useState(-1),{user:d,role:h,loading:f}=oo();U.useEffect(()=>{if(e){n(e),a([e]),c(0),A(!1);return}if(f)return;const w=localStorage.getItem(pl);if(w)try{const N=JSON.parse(w);N&&N.teachers&&(n(Q=>({...Q,...N})),console.log("Loaded from local storage backup"))}catch(N){console.error("Error parsing local backup",N)}if(!(d||h==="guest")){w||n(an),A(!1);return}A(!0);const S=Ur.subscribe(N=>{const Q={...an,...N};Q.teachers||(Q.teachers=[]),Q.teachers=Q.teachers.map(x=>({telegramChatId:"",...x,shifts:x.shifts||[ie.First,ie.Second]})),Q.schedule||(Q.schedule=[]),Q.schedule2ndHalf||(Q.schedule2ndHalf=[]),Q.substitutions||(Q.substitutions=[]),Q.bellSchedule||(Q.bellSchedule=Fh),(!Q.dutyZones||Q.dutyZones.length===0)&&(Q.dutyZones=sE),Q.dutySchedule||(Q.dutySchedule=[]),Q.settings?Q.settings={...an.settings,...Q.settings}:Q.settings=an.settings,n(Q),localStorage.setItem(pl,JSON.stringify(Q)),a(x=>x.length===0?[Q]:x),c(x=>x===-1?0:x),A(!1)},N=>{console.error("Failed to subscribe to data:",N),A(!1)});return()=>{S&&S()}},[e,d,h,f]);const m=U.useCallback(async(w,B=!0)=>{const S=!d&&h==="guest",N={...r,...w};n(N);try{localStorage.setItem(pl,JSON.stringify(N))}catch(Q){console.error("Local storage quota exceeded",Q)}if(!e&&d&&!S)try{await Ur.save(w)}catch(Q){console.error("Save failed:",Q),(Q==null?void 0:Q.code)==="resource-exhausted"?console.warn("Quota exceeded. Saved locally only."):(Q==null?void 0:Q.code)==="permission-denied"?alert("  .    ."):console.warn("Cloud save error. Saved locally.",Q.message)}else S&&console.warn("       .");if(B){const Q=i.slice(0,o+1);Q.push(N),Q.length>50&&Q.shift(),a(Q),c(Q.length-1)}},[r,i,o,d,h,e]),v=U.useCallback(async()=>{if(o>0){const w=i[o-1];if(c(o-1),n(w),localStorage.setItem(pl,JSON.stringify(w)),!e&&d)try{await Ur.save(w)}catch(B){console.error(B)}}},[i,o,d,e]),y=U.useCallback(async()=>{if(o<i.length-1){const w=i[o+1];if(c(o+1),n(w),localStorage.setItem(pl,JSON.stringify(w)),!e&&d)try{await Ur.save(w)}catch(B){console.error(B)}}},[i,o,d,e]),I=U.useCallback(async()=>{await m(an)},[m]),C=U.useMemo(()=>({data:r,isLoading:s,saveData:m,resetData:I,undo:v,redo:y,canUndo:o>0,canRedo:o<i.length-1}),[r,s,m,I,v,y,o]);return l.jsx(UF.Provider,{value:C,children:t})},ng=()=>{const t=U.useContext(UF);if(!t)throw new Error("useFullData must be used within DataProvider");return t},kF=U.createContext(void 0),NF=U.createContext(void 0),RF=({children:t})=>{const{data:e,saveData:r}=ng(),n=U.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=U.useCallback(async(i,a)=>{await r(i,a)},[r]),A=U.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return l.jsx(kF.Provider,{value:A,children:t})},DF=({children:t})=>{const{data:e,saveData:r}=ng(),n=new Date().getMonth(),A=n>=0&&n<=4?e.schedule2ndHalf||[]:e.schedule,i=U.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2ndHalf:h})},[r]),a=U.useCallback(async(d,h)=>{await r(d,h)},[r]),o=U.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2ndHalf||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,saveSemesterSchedule:i,saveScheduleData:a}),[A,e.schedule,e.schedule2ndHalf,e.substitutions,e.dutySchedule,i,a]),c=U.useMemo(()=>({...o,saveScheduleData:a}),[o,a]);return l.jsx(NF.Provider,{value:c,children:t})},hs=()=>{const t=U.useContext(kF);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=ng();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},ao=()=>{const t=U.useContext(NF);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=ng();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},UO={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),l.jsx("path",{d:"m20 16-4-4 4-4"}),l.jsx("path",{d:"m4 8 4 4-4 4"}),l.jsx("path",{d:"m16 4-4 4-4-4"}),l.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})},K=({name:t,size:e=24,className:r="",...n})=>{const s=UO[t];return s?l.jsx(s,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},Pn=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(U.useEffect(()=>{if(!t)return;const A=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:A=>A.target===A.currentTarget&&e(),children:l.jsxs("div",{className:`glass-panel bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx(K,{name:"X",size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),QO=({x:t,y:e,onClose:r,actions:n})=>{const s=U.useRef(null);if(U.useEffect(()=>{if(t===null||e===null)return;const a=c=>{s.current&&!s.current.contains(c.target)&&r()},o=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",a,!0),document.addEventListener("keydown",o),()=>{window.removeEventListener("click",a,!0),document.removeEventListener("keydown",o)}},[t,e,r]),t===null||e===null)return null;const A=window.innerWidth-t<200?t-200:t,i={top:e,left:A};return l.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:i,children:n.map(a=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),a.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${a.color||"text-slate-700 dark:text-slate-200"}`,children:[a.icon&&l.jsx(K,{name:a.icon,size:16}),a.label]},a.id||a.label))})},kO=()=>{const{bellSchedule:t}=hs(),[e,r]=U.useState("..."),[n,s]=U.useState(""),[A,i]=U.useState(0),[a,o]=U.useState("bg-slate-500"),[c,d]=U.useState("");return U.useEffect(()=>{const h=()=>{const m=new Date,v=m.getDay(),I=[null,ct.Monday,ct.Tuesday,ct.Wednesday,ct.Thursday,ct.Friday,null][v];if(d(I||""),!I){r(" "),s(" "),o("bg-slate-400"),i(0);return}const C=Q=>{const[x,b]=Q.split(":").map(Number);return x*60+b},w=m.getHours()*60+m.getMinutes();let B=t.filter(Q=>Q.day===I);B.length===0&&(B=t.filter(Q=>Q.day==="default")),B.sort((Q,x)=>C(Q.start)-C(x.start));let S=null,N=null;for(let Q=0;Q<B.length;Q++){const x=B[Q],b=C(x.start),_=C(x.end);if(w>=b&&w<_){S={...x,duration:_-b,passed:w-b};break}if(Q<B.length-1){const k=B[Q+1],R=C(k.start);if(w>=_&&w<R){const P=R-_;if(P>0&&P<60){const E=w-_,Me=R-w;N={nextLesson:k,duration:P,passed:E,remaining:Me};break}}}}if(S){r(`${S.period} `);const Q=Math.max(0,S.duration-S.passed);s(`${S.shift===ie.First?"1 ":"2 "}  . ${Q} `);const x=S.duration>0?S.passed/S.duration*100:0;i(Math.min(100,Math.max(0,x))),o("bg-indigo-600")}else if(N){r(""),s(` ${N.remaining}  ${N.nextLesson.period} `),o("bg-amber-500");const Q=N.duration>0?N.passed/N.duration*100:0;i(Math.min(100,Math.max(0,Q)))}else r(" "),s(" "),o("bg-slate-400"),i(0)};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 glass-panel rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${a}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:n})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${a} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center`,children:l.jsx(K,{name:"Clock",size:16,className:a==="bg-indigo-600"?"text-indigo-600":a==="bg-amber-500"?"text-amber-500":"text-slate-400"})})]}),A>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${a} transition-all duration-1000`,style:{width:`${A}%`}})})]})},Xd=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var v;const[A,i]=U.useState(!1),[a,o]=U.useState(""),c=U.useRef(null);U.useEffect(()=>{const y=C=>{c.current&&!c.current.contains(C.target)&&i(!1)},I=C=>{C.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",y),document.addEventListener("keydown",I),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("keydown",I)}},[]);const h=((v=(s?t.flatMap(y=>y.options):t).find(y=>y.value===e))==null?void 0:v.label)||n,f=s?t.map(y=>({...y,options:y.options.filter(I=>I.label.toLowerCase().includes(a.toLowerCase()))})).filter(y=>y.options.length>0):null,m=s?null:t.filter(y=>y.label.toLowerCase().includes(a.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(K,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:l.jsx("input",{autoFocus:!0,value:a,onChange:y=>o(y.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&f?f.map(y=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:y.label}),y.options.map(I=>l.jsx("div",{onClick:()=>{r(I.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===I.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:I.label},I.value))]},y.id||y.label)):m?m.map(y=>l.jsx("div",{onClick:()=>{r(y.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===y.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:y.label},y.value)):null]})]})},ed=({children:t,className:e=""})=>{const r=Bs.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,s)=>{const A=Bs.isValidElement(n)&&n.key?n.key:s;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},A)})})},cp=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(s=>{const A=s.id??s.label,i=Math.min(100,Math.max(0,s.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},A)})})},NO=({onMenuClick:t,role:e})=>{const r=e==="admin"||e==="teacher",n=e==="admin";return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:l.jsxs("div",{className:"flex justify-around items-center h-16",children:[r&&l.jsx(Dd,{to:"/dashboard",className:({isActive:s})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${s?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx(K,{name:"Home",size:24,strokeWidth:2.5})}),l.jsx(Dd,{to:"/schedule",className:({isActive:s})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${s?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx(K,{name:"Calendar",size:24,strokeWidth:2.5})}),n&&l.jsx(Dd,{to:"/substitutions",className:({isActive:s})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${s?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx(K,{name:"Repeat",size:24,strokeWidth:2.5})}),l.jsx("button",{onClick:t,className:"flex flex-col items-center gap-1 p-2 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 transition-all duration-300",children:l.jsx(K,{name:"Menu",size:24,strokeWidth:2.5})})]})})},RO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:A}=hs(),{schedule:i,substitutions:a}=ao(),{role:o}=oo(),c=$c(),[d,h]=U.useState(localStorage.getItem("gym_notes")||""),[f]=U.useState(new Date),[m,v]=U.useState(""),[y,I]=U.useState(null),[C,w]=U.useState(!1),[B,S]=U.useState(""),[N,Q]=U.useState(!1),[x,b]=U.useState(""),[_,k]=U.useState(!1);U.useEffect(()=>{if(localStorage.setItem("gym_notes",d),d){S("");const X=setTimeout(()=>S(""),2e3);return()=>clearTimeout(X)}},[d]);const R=U.useMemo(()=>{const X=f.getHours();return X<5?" ":X<12?" ":X<18?" ":" "},[f]),P=X=>new Date(X.getTime()-X.getTimezoneOffset()*6e4).toISOString().split("T")[0],E=U.useMemo(()=>P(f),[f]),Me=U.useMemo(()=>{const X=f.getDay();return X===0||X===6?null:bt[X-1]},[f]),Ge=U.useMemo(()=>{const X=new Date;return X.setHours(0,0,0,0),e.filter(Ee=>Ee.birthDate).map(Ee=>{const Te=new Date(Ee.birthDate);let qe=new Date(X.getFullYear(),Te.getMonth(),Te.getDate());qe<X&&qe.setFullYear(X.getFullYear()+1);const ze=Math.ceil((qe.getTime()-X.getTime())/(1e3*60*60*24));return{...Ee,diff:ze,age:X.getFullYear()-Te.getFullYear()}}).filter(Ee=>Ee.diff<=30).sort((Ee,Te)=>Ee.diff-Te.diff)},[e]),it=U.useMemo(()=>{const X=e.length,Ee=new Map;e.filter(Oe=>Oe.unavailableDates.includes(E)).forEach(Oe=>{var ne;const we=((ne=Oe.absenceReasons)==null?void 0:ne[E])===" "?" ":"";Ee.set(Oe.id,{id:Oe.id,name:Oe.name,displayReason:we})});const Te=a.filter(Oe=>Oe.date===E&&Oe.replacementTeacherId!=="conducted"&&Oe.replacementTeacherId!==Oe.originalTeacherId),qe=new Map;Te.forEach(Oe=>{if(Ee.has(Oe.originalTeacherId))return;const re=e.find(be=>be.id===Oe.originalTeacherId);if(!re)return;const we=i.find(be=>be.id===Oe.scheduleItemId);if(!we)return;qe.has(Oe.originalTeacherId)||qe.set(Oe.originalTeacherId,{teacher:re,lessons:[]}),qe.get(Oe.originalTeacherId).lessons.push({period:we.period,reason:Oe.lessonAbsenceReason})});const ze=Array.from(Ee.values());qe.forEach((Oe,re)=>{const we=Oe.lessons.sort((O,z)=>O.period-z.period),ne=we.map(O=>O.period).join(", "),L=we.some(O=>O.reason===" ")?" ":"";ze.push({id:re,name:Oe.teacher.name,displayReason:`${ne} : ${L}`})}),ze.sort((Oe,re)=>Oe.name.localeCompare(re.name));const Ye=ze.length,Ke=X-Ye;return{presentPercent:X>0?Math.round(Ke/X*100):0,absentCount:Ye,totalTeachers:X,absentTeachersList:ze}},[e,E,a,i]),We=U.useMemo(()=>{const X=new Date(f);for(X.setDate(f.getDate()+1);X.getDay()===0||X.getDay()===6;)X.setDate(X.getDate()+1);const Te=[null,"","","","","",null][X.getDay()];if(!Te)return[];const qe=[];return r.forEach(ze=>{const Ye=i.filter(Ke=>Ke.classId===ze.id&&Ke.day===Te);Ye.length===0?qe.push({class:ze.name,issue:`   ${Te}`}):Ye.length<4&&qe.push({class:ze.name,issue:`  (${Ye.length})`}),Ye.forEach(Ke=>{if(i.some(Oe=>Oe.id!==Ke.id&&Oe.day===Te&&Oe.period===Ke.period&&Oe.shift===Ke.shift&&Oe.teacherId===Ke.teacherId)&&qe.push({class:ze.name,issue:`  (${Ke.period} )`}),Ke.roomId){const Oe=n.find(re=>re.id===Ke.roomId);Oe&&Oe.capacity<ze.studentsCount&&qe.push({class:ze.name,issue:`: ${Oe.name} (${Ke.period} )`})}})}),qe.filter((ze,Ye,Ke)=>Ke.findIndex(Tt=>Tt.class===ze.class&&Tt.issue===ze.issue)===Ye).slice(0,10)},[i,r,e,n,f]),ae=U.useMemo(()=>{if(!Me)return 0;let X=0;const Ee=i.filter(Te=>Te.day===Me);for(const Te of Ee){const qe=e.find(ze=>ze.id===Te.teacherId);qe&&qe.unavailableDates.includes(E)&&(a.find(Ye=>Ye.scheduleItemId===Te.id&&Ye.date===E)||X++)}return X},[i,e,a,E,Me]),xe=()=>{var we;if(!m){I(null);return}const X=new Date,Te=[null,ct.Monday,ct.Tuesday,ct.Wednesday,ct.Thursday,ct.Friday,null][X.getDay()];if(!Te){I({status:"",detail:"  ",color:"text-slate-500"});return}const qe=ne=>{const[be,L]=ne.split(":").map(Number);return be*60+L},ze=X.getHours()*60+X.getMinutes();let Ye=s.filter(ne=>ne.day===Te);Ye.length===0&&(Ye=s.filter(ne=>ne.day==="default"));const Ke=Ye.find(ne=>{const be=qe(ne.start),L=qe(ne.end);return ze>=be&&ze<=L}),Tt=m.toLowerCase(),Oe=e.find(ne=>ne.name.toLowerCase().includes(Tt)),re=r.find(ne=>ne.name.toLowerCase().includes(Tt));if(!Oe&&!re){I({status:" ",detail:" ",color:"text-red-500"});return}if(Oe){if(Oe.unavailableDates.includes(E)){const z=((we=Oe.absenceReasons)==null?void 0:we[E])===" "?" ":"";I({status:"",detail:z,color:"text-red-500",icon:"UserX",items:[]});return}if(!Ke){I({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const ne=i.filter(O=>O.teacherId===Oe.id&&O.day===Te&&O.period===Ke.period&&O.shift===Ke.shift),be=a.filter(O=>O.date===E&&O.replacementTeacherId===Oe.id).map(O=>i.find(z=>z.id===O.scheduleItemId)).filter(O=>!!O&&O.day===Te&&O.period===Ke.period&&O.shift===Ke.shift);let L=[];ne.forEach(O=>{var me,$e,Z;const z=a.find(Y=>Y.date===E&&Y.scheduleItemId===O.id);if(!z||z.replacementTeacherId===Oe.id){const Y=((me=n.find(ce=>ce.id===((z==null?void 0:z.replacementRoomId)||O.roomId)))==null?void 0:me.name)||(z==null?void 0:z.replacementRoomId)||O.roomId||" .",se=($e=t.find(ce=>ce.id===O.subjectId))==null?void 0:$e.name,nt=(Z=r.find(ce=>ce.id===O.classId))==null?void 0:Z.name;L.push({room:Y,subject:se,entityName:nt,direction:O.direction,isSubstitution:!!(z&&z.replacementTeacherId===Oe.id),originalTeacherName:null})}}),be.forEach(O=>{var se,nt,ce;const z=a.find(_e=>_e.date===E&&_e.scheduleItemId===O.id&&_e.replacementTeacherId===Oe.id);if(!z)return;const me=((se=n.find(_e=>_e.id===(z.replacementRoomId||O.roomId)))==null?void 0:se.name)||z.replacementRoomId||O.roomId||" .",$e=(nt=t.find(_e=>_e.id===O.subjectId))==null?void 0:nt.name,Z=(ce=r.find(_e=>_e.id===O.classId))==null?void 0:ce.name,Y=e.find(_e=>_e.id===z.originalTeacherId);L.push({room:me,subject:$e,entityName:Z,direction:O.direction,isSubstitution:!0,originalTeacherName:Y==null?void 0:Y.name})}),L.length>0?I({status:` ${Ke.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:L}):I({status:"",detail:` ( ${Ke.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(re){if(!Ke){I({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const ne=i.filter(be=>be.classId===re.id&&be.day===Te&&be.period===Ke.period&&be.shift===Ke.shift);if(ne.length>0){const be=ne.map(z=>{var Be,ue,ge,Qe,je;const me=a.find(fe=>fe.scheduleItemId===z.id&&fe.date===E);if(me&&me.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(Be=t.find(fe=>fe.id===z.subjectId))==null?void 0:Be.name};const $e=!!(me&&me.replacementTeacherId!=="conducted"&&me.replacementTeacherId!=="cancelled"),Z=$e?me.replacementTeacherId:z.teacherId,Y=(me==null?void 0:me.replacementRoomId)||z.roomId,se=(ue=e.find(fe=>fe.id===Z))==null?void 0:ue.name,nt=((ge=n.find(fe=>fe.id===Y))==null?void 0:ge.name)||Y||" .",ce=(Qe=t.find(fe=>fe.id===z.subjectId))==null?void 0:Qe.name,_e=$e?(je=e.find(fe=>fe.id===me.originalTeacherId))==null?void 0:je.name:null;return{room:nt,subject:ce,entityName:se,direction:z.direction,isSubstitution:$e,originalTeacherName:_e}}),L=be.filter(z=>!z.cancelled),O=be.filter(z=>!!z.cancelled);L.length>0?I({status:` ${Ke.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:L}):O.length>0?I({status:" ",detail:O.map(z=>z.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):I({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else I({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},Re=async()=>{if(!x.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}k(!0);const X=` *   :*

${x}`;try{const Te=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:X,parse_mode:"Markdown"})})).json();if(Te.ok)alert("!   ."),Q(!1),b("");else throw new Error(Te.description)}catch(Ee){console.error("   Telegram:",Ee),alert(`   . : ${Ee}`)}finally{k(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[l.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 animate-fade-in",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[R,", ",o==="admin"?"":"","!"]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:[" ",f.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:()=>Q(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[l.jsx(K,{name:"Send",size:18}),"  "]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:l.jsx(K,{name:"Search",size:22})}),l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:m,onChange:X=>v(X.target.value),onKeyDown:X=>X.key==="Enter"&&xe(),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl p-3.5 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),l.jsx("button",{onClick:xe,className:"bg-slate-800 dark:bg-indigo-600 hover:bg-slate-700 text-white p-3.5 rounded-xl transition-all shadow-md active:scale-95",children:l.jsx(K,{name:"Search",size:20})})]}),y&&l.jsxs("div",{className:"mt-auto p-4 bg-slate-50/80 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 animate-fade-in backdrop-blur-sm",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-3 flex items-center gap-2 ${y.color}`,children:[l.jsx(K,{name:y.icon||"Info",size:16})," ",y.status]}),y.items&&y.items.length>0?l.jsx("div",{className:"space-y-2.5",children:y.items.map((X,Ee)=>l.jsxs("div",{className:"bg-white dark:bg-dark-900/80 p-3 rounded-xl border border-slate-100 dark:border-slate-600 text-sm shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:X.subject}),X.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-md",children:X.direction})]}),X.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500 mt-1",children:X.originalTeacherName?` (${X.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-slate-500 dark:text-slate-400 text-xs",children:[l.jsx("span",{children:X.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg font-mono font-bold text-slate-600 dark:text-slate-300",children:X.room})]})]},`${X.room}-${X.subject}-${X.entityName}-${Ee}`))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-base leading-snug",children:y.detail})]})]}),l.jsxs("div",{className:`glass-panel p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden ${ae>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[ae>0&&l.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[l.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${ae>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:l.jsx(K,{name:ae>0?"AlertTriangle":"CheckCircle",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:ae>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:ae}),l.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),l.jsxs("button",{onClick:()=>c("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",l.jsx(K,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:l.jsx(K,{name:"CheckCircle",size:64})}),l.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full card-hover",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:l.jsx(K,{name:"PieChart",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>w(!C),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:C?" ":" ",children:l.jsx(K,{name:C?"PieChart":"List",size:20})})]}),C?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:it.absentTeachersList.length>0?l.jsx("div",{className:"space-y-3",children:it.absentTeachersList.map(X=>l.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:X.name}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:X.displayReason})]},X.id))}):l.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:l.jsx("p",{className:"text-sm font-medium",children:"   "})})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[l.jsxs("div",{className:"relative w-28 h-28",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${it.presentPercent}, 100`,strokeLinecap:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),l.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),l.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[it.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:it.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full group card-hover relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:l.jsx(K,{name:"Edit2",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(d),alert("")},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(K,{name:"Copy",size:16})}),l.jsx("button",{onClick:()=>{confirm(" ?")&&h("")},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(K,{name:"Trash2",size:16})})]})]}),l.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[l.jsx("textarea",{className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:d,onChange:X=>h(X.target.value)}),B&&l.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-emerald-500 animate-fade-in flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[l.jsx(K,{name:"CheckCircle",size:10})," ",B]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:l.jsx(K,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:We.length?We.map(X=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:X.class}),l.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:X.issue})]},`${X.class}-${X.issue}`)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:l.jsx(K,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:Ge.length?Ge.map(X=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:X.name}),l.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${X.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:X.diff===0?"!":` ${X.diff} .`})]},X.id)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]})]}),l.jsx(Pn,{isOpen:N,onClose:()=>Q(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),l.jsx("textarea",{value:x,onChange:X=>b(X.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:Re,disabled:_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-500/30 flex items-center gap-2 disabled:opacity-50",children:[_?l.jsx(K,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(K,{name:"Send",size:16}),_?"...":""]})})]})})]})};var PF={},LF={},jF={},sg={};Object.defineProperty(sg,"__esModule",{value:!0});function DO(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}sg.default=DO;var Py={};Object.defineProperty(Py,"__esModule",{value:!0});var PO=sg,LO=" and ";function jO(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=PO.default(r),A=n;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(LO)}Py.default=jO;var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});function MO(){}Ly.default=MO;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=sg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=Py;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=Ly;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(jF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=U,r=jF;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(A,i){i===void 0&&(i=!1);var a=e.useState(i),o=a[0],c=a[1],d=r.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),o}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(LF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=LF;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(PF);const MF=Rb(PF),OF=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:A}=hs(),{schedule1:i,schedule2:a,saveSemesterSchedule:o,canUndo:c,canRedo:d,undo:h,redo:f}=ao(),m=e===2?a:i,v=async F=>{await o(e,F)},[y,I]=U.useState(ie.First),[C,w]=U.useState(ct.Monday),[B,S]=U.useState(!1),[N,Q]=U.useState({}),[x,b]=U.useState("class"),[_,k]=U.useState(""),[R,P]=U.useState(""),[E,Me]=U.useState(""),[Ge,it]=U.useState(!1),[We,ae]=U.useState({visible:!1,x:0,y:0,item:null,cell:null}),[xe,Re]=U.useState(null),[X,Ee]=U.useState([]),[Te,qe]=U.useState(null),[ze,Ye]=U.useState(null),Ke=MF({maxWidth:767}),[Tt,Oe]=U.useState(!0),[re,we]=U.useState(!1),[ne,be]=U.useState({isOpen:!1,type:"",day:"",classId:""}),[L,O]=U.useState(ct.Monday),[z,me]=U.useState(""),$e=yn[y],Z=()=>x==="week"?yn[y].map(F=>({id:F.toString(),name:`${F} `})):x==="class"?_?s.filter(F=>F.id===_&&F.shift===y):s.filter(F=>F.shift===y):x==="teacher"?_?n.filter(F=>F.id===_):n:x==="subject"?_?r.filter(F=>F.id===_):r:[],Y=(F,V)=>{let ee=[];if(x==="week"){const Ae=parseInt(F),te=V;ee=m.filter(J=>J.shift===y&&J.period===Ae&&J.day===te),_&&(ee=ee.filter(J=>J.classId===_))}else{const Ae=V;x==="class"&&(ee=m.filter(te=>te.classId===F&&te.period===Ae&&te.day===C&&te.shift===y)),x==="teacher"&&(ee=m.filter(te=>te.teacherId===F&&te.period===Ae&&te.day===C&&te.shift===y)),x==="subject"&&(ee=m.filter(te=>te.subjectId===F&&te.period===Ae&&te.day===C&&te.shift===y))}return R&&(ee=ee.filter(Ae=>{if(!Ae.roomId)return!1;const te=A.find(Ie=>Ie.id===Ae.roomId);return((te?te.name:Ae.roomId)||"").toLowerCase().includes(R.toLowerCase())})),E&&(ee=ee.filter(Ae=>{var te;return(te=Ae.direction)==null?void 0:te.toLowerCase().includes(E.toLowerCase())})),ee},se=F=>{const V=[],ee=m.filter(J=>J.id!==F.id&&J.day===F.day&&J.period===F.period&&J.shift===F.shift);return ee.find(J=>J.teacherId===F.teacherId)&&V.push("teacher"),ee.find(J=>!(J.classId!==F.classId||J.direction&&F.direction&&J.direction!==F.direction))&&V.push("class"),F.roomId&&ee.find(Ie=>Ie.roomId===F.roomId)&&V.push("room"),V},nt=(F,V,ee)=>{const Ae=[],te=s.find(Xe=>Xe.id===F),J=r.find(Xe=>Xe.id===V),Ie=A.find(Xe=>Xe.id===ee);return Ie&&(te&&Ie.capacity<te.studentsCount&&Ae.push(`  !   ${te.studentsCount} .,     ${Ie.capacity}.`),J&&J.requiredRoomType&&J.requiredRoomType!==""&&Ie.type!==J.requiredRoomType&&Ae.push(`   !   "${J.requiredRoomType}",   "${Ie.type}".`)),Ae},ce=F=>{if(!F.classId||!F.subjectId||!F.roomId){Ee([]);return}const V=nt(F.classId,F.subjectId,F.roomId);Ee(V)},_e=F=>{t||(Q(F),ce(F),S(!0))},Be=(F,V,ee=C)=>{if(t)return;const Ae={period:V,day:ee,shift:y,id:Math.random().toString(36).substr(2,9)};x==="class"&&(Ae.classId=F),x==="teacher"&&(Ae.teacherId=F),x==="subject"&&(Ae.subjectId=F),x==="week"&&(Ae.period=parseInt(F),Ae.day=ee,_&&s.find(te=>te.id===_)&&(Ae.classId=_)),Q(Ae),Ee([]),S(!0)},ue=async()=>{if(!N.subjectId||!N.teacherId||!N.classId)return;let F=[...m];const V=F.findIndex(ee=>ee.id===N.id);V>=0?F[V]=N:F.push(N),await v(F),S(!1)},ge=async F=>{const V=m.filter(ee=>ee.id!==(F||N.id));await v(V),S(!1)},Qe=(F,V,ee)=>{t||(F.preventDefault(),F.stopPropagation(),ae({visible:!0,x:F.clientX,y:F.clientY,item:V,cell:ee}))},je=(F,V)=>{if(t)return;qe(V),F.dataTransfer.effectAllowed="move";const ee=F.currentTarget;setTimeout(()=>ee.classList.add("dragging"),0)},fe=F=>{F.currentTarget.classList.remove("dragging"),qe(null),Ye(null)},lt=(F,V)=>{F.preventDefault(),!t&&Ye(`${V.rowId}-${V.colKey}`)},Ze=async(F,V)=>{if(F.preventDefault(),!Te||t)return;const ee={...Te};x==="week"?(ee.period=parseInt(V.rowId),ee.day=V.colKey):(ee.period=V.colKey,ee.day=C,x==="class"&&(ee.classId=V.rowId),x==="teacher"&&(ee.teacherId=V.rowId),x==="subject"&&(ee.subjectId=V.rowId));let Ae=m.map(te=>te.id===ee.id?ee:te);await v(Ae),qe(null),Ye(null)},at=[];if(We.item)at.push({label:"",icon:"Copy",onClick:()=>Re(We.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>ge(We.item.id)});else if(We.cell){const F=We.cell;xe&&at.push({label:"",icon:"Clipboard",onClick:async()=>{const V={...xe,id:Math.random().toString(36).substr(2,9),day:C,shift:y,period:F.colKey};x==="week"&&(V.day=F.colKey,V.period=parseInt(F.rowId)),x==="class"?V.classId=F.rowId:x==="teacher"?V.teacherId=F.rowId:x==="subject"&&(V.subjectId=F.rowId);let ee=[...m,V];await v(ee),Re(null)}}),at.push({label:" ",icon:"Plus",onClick:()=>Be(F.rowId||"",typeof F.colKey=="number"?F.colKey:parseInt(F.rowId||"0"),x==="week"?F.colKey:C)})}const Le=N.subjectId?n.filter(F=>F.subjectIds.includes(N.subjectId)):[],pe=N.subjectId?n.filter(F=>!F.subjectIds.includes(N.subjectId)):n,He=U.useMemo(()=>{var V,ee,Ae,te;const F=e===2?" (2- )":"";if(_){if(x==="teacher")return((V=n.find(J=>J.id===_))==null?void 0:V.name)+F;if(x==="class")return((ee=s.find(J=>J.id===_))==null?void 0:ee.name)+F;if(x==="subject")return((Ae=r.find(J=>J.id===_))==null?void 0:Ae.name)+F;if(x==="week")return((te=s.find(J=>J.id===_))==null?void 0:te.name)+F}return`  ${C}`+F},[_,x,n,s,r,C,e]),et=!!_,vt=U.useMemo(()=>et?bt:$e,[et,$e]),wt=U.useMemo(()=>et?yn[y].map(F=>({id:F.toString(),name:`${F} `})):Z(),[et,y,Z]),D=(F,V)=>{if(et){const ee=parseInt(F),Ae=V;let te=m.filter(J=>J.shift===y&&J.period===ee&&J.day===Ae);return x==="class"||x==="week"?te=te.filter(J=>J.classId===_):x==="teacher"?te=te.filter(J=>J.teacherId===_):x==="subject"&&(te=te.filter(J=>J.subjectId===_)),te}else return Y(F,V)},q=Z(),$=x==="week"?bt:$e,H=(F,V,ee)=>{be({isOpen:!0,type:F,day:V||"",classId:ee||""})},Se=async()=>{let F=[...m];ne.type==="clearAll"?F=[]:ne.type==="clearDay"&&ne.day?F=F.filter(V=>V.day!==ne.day):ne.type==="clearClass"&&ne.classId&&(F=F.filter(V=>V.classId!==ne.classId)),await v(F),be({isOpen:!1,type:"",day:"",classId:""}),we(!1)},Fe=(F,V,ee)=>t&&F.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[F.map(Ae=>{const te=r.find(Je=>Je.id===Ae.subjectId),J=n.find(Je=>Je.id===Ae.teacherId),Ie=s.find(Je=>Je.id===Ae.classId),Xe=se(Ae),st=A.find(Je=>Je.id===Ae.roomId),At=st?st.name:Ae.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:Je=>je(Je,Ae),onDragEnd:t?void 0:fe,onClick:t?void 0:()=>_e(Ae),onContextMenu:t?void 0:Je=>Qe(Je,Ae,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Xe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Xe.length===0&&(te!=null&&te.color)?{backgroundColor:`${te.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:x==="subject"||x==="week"?Ie==null?void 0:Ie.name:te==null?void 0:te.name}),Ae.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Ae.direction})]}),x==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:te==null?void 0:te.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:J==null?void 0:J.name,children:[l.jsx(K,{name:x==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:x==="teacher"?Ie==null?void 0:Ie.name:J==null?void 0:J.name})]}),At&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:st?`: ${st.capacity}, : ${st.type}`:"",children:At})]}),Xe.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${Xe.join(", ")}`,children:"!"})]},Ae.id)}),!t&&F.length<3&&l.jsx("button",{onClick:()=>Be(ee,typeof V=="number"?V:parseInt(ee),x==="week"?V:C),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(K,{name:"Plus",size:16})})]}),de=()=>{if(!_)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const F=m.filter(V=>V.day===C&&V.shift===y&&(x==="class"&&V.classId===_||x==="teacher"&&V.teacherId===_||x==="subject"&&V.subjectId===_)).sort((V,ee)=>V.period-ee.period);return F.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",C,"  ",y,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:F.map(V=>{const ee=r.find(st=>st.id===V.subjectId),Ae=n.find(st=>st.id===V.teacherId),te=s.find(st=>st.id===V.classId),J=A.find(st=>st.id===V.roomId),Ie=J?J.name:V.roomId,Xe=se(V);return l.jsxs("div",{onClick:t?void 0:()=>_e(V),className:`rounded-xl p-4 shadow-sm border ${Xe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[V.period," "]}),Xe.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${Xe.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ee==null?void 0:ee.name," ",V.direction&&`(${V.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[te==null?void 0:te.name,"  ",Ae==null?void 0:Ae.name]}),Ie&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Ie]})]},V.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),We.visible&&l.jsx(QO,{x:We.x,y:We.y,onClose:()=>ae({...We,visible:!1}),actions:at}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>I(ie.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>I(ie.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),x!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:bt.map(F=>l.jsx("button",{onClick:()=>w(F),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${C===F?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:F},F))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(K,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(K,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{b("class"),k("")},className:`p-2 rounded-md ${x==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(K,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{b("teacher"),k("")},className:`p-2 rounded-md ${x==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(K,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{b("subject"),k("")},className:`p-2 rounded-md ${x==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(K,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var F;b("week"),k(((F=s[0])==null?void 0:F.id)||"")},className:`p-2 rounded-md ${x==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(K,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(K,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:_,onChange:F=>k(F.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",x==="class"?"":x==="teacher"?"":x==="week"?" ()":""]}),(x==="class"||x==="week")&&s.filter(F=>F.shift===y).map(F=>l.jsx("option",{value:F.id,children:F.name},F.id)),x==="teacher"&&n.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id)),x==="subject"&&r.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]})]}),l.jsx("input",{placeholder:"...",value:R,onChange:F=>P(F.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:E,onChange:F=>Me(F.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>we(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(K,{name:"List",size:16})," . ."]}),(_||x==="week")&&l.jsx("button",{onClick:()=>it(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(K,{name:"Printer",size:16})})]})]}),Ke&&!t&&_&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>Oe(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Tt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(K,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>Oe(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Tt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(K,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Ke&&Tt&&!t&&_?de():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:x==="week"?"":x==="class"?"":x==="teacher"?"":""}),$.map(F=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:x==="week"?F:`${F} `},F))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:q.length>0?q.map(F=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:F.name}),$.map(V=>{const ee=Y(F.id,V),Ae=`${F.id}-${V}`,te={rowId:F.id,colKey:V};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${ze===Ae?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:J=>Qe(J,null,te),onDragOver:t?void 0:J=>lt(J,te),onDrop:t?void 0:J=>Ze(J,te),children:Fe(ee,V,F.id)},V)})]},F.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(Pn,{isOpen:B,onClose:()=>S(!1),title:N.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",N.day]}),l.jsxs("span",{children:[": ",N.period]}),l.jsxs("span",{children:[": ",N.shift===ie.First?"1 ":"2 "]})]}),X.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:X.map(F=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(K,{name:"AlertTriangle",size:14}),F]},F))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Xd,{options:s.filter(F=>F.shift===y).map(F=>({value:F.id,label:F.name})),value:N.classId||null,onChange:F=>{Q({...N,classId:F}),ce({...N,classId:F})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Xd,{options:r.map(F=>({value:F.id,label:F.name})),value:N.subjectId||null,onChange:F=>{Q({...N,subjectId:F}),ce({...N,subjectId:F})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Xd,{options:[{label:"",options:Le.map(F=>({value:F.id,label:F.name}))},{label:"",options:pe.map(F=>({value:F.id,label:F.name}))}],value:N.teacherId||null,onChange:F=>Q({...N,teacherId:F}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:N.direction||"",onChange:F=>Q({...N,direction:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:N.roomId||"",onChange:F=>{Q({...N,roomId:F.target.value}),ce({...N,roomId:F.target.value})},children:[l.jsx("option",{value:"",children:" "}),A.map(F=>l.jsxs("option",{value:F.id,children:[F.name," (",F.capacity," )"]},F.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[N.id&&l.jsx("button",{onClick:()=>ge(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:ue,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(Pn,{isOpen:re,onClose:()=>we(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>H("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:L,onChange:F=>O(F.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:bt.map(F=>l.jsx("option",{value:F,children:F},F))})}),l.jsxs("button",{onClick:()=>H("clearDay",L),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",L]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:z,onChange:F=>me(F.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),s.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]})}),l.jsx("button",{onClick:()=>{z&&H("clearClass",void 0,z)},disabled:!z,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(Pn,{isOpen:ne.isOpen,onClose:()=>be({...ne,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>be({...ne,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Se,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),Ge&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(K,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>it(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:He}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:et||x==="week"?"":x==="class"?"":x==="teacher"?"":""}),vt.map(F=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:et||x==="week"?F:`${F} `},F))]})}),l.jsx("tbody",{children:wt.map(F=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:F.name}),vt.map(V=>{const ee=D(F.id,V);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ee.map(Ae=>{const te=r.find(_t=>_t.id===Ae.subjectId),J=n.find(_t=>_t.id===Ae.teacherId),Ie=s.find(_t=>_t.id===Ae.classId),Xe=A.find(_t=>_t.id===Ae.roomId),st=Xe?Xe.name:Ae.roomId,At=x==="teacher",Bt=x==="subject"||x==="week"||et&&At?Ie==null?void 0:Ie.name:te==null?void 0:te.name,Ft=At?Ie==null?void 0:Ie.name:J==null?void 0:J.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Bt,Ae.direction&&` (${Ae.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:Ft}),st&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:st})]})]},Ae.id)})},V)})]},F.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i0=function(t,e){return i0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},i0(t,e)};function Xn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var o0=function(){return o0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},o0.apply(this,arguments)};function Yr(t,e,r,n){function s(A){return A instanceof r?A:new r(function(i){i(A)})}return new(r||(r=Promise))(function(A,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function o(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(a,o)}c((n=n.apply(t,[])).next())})}function Kr(t,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,s,A,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return o([c,d])}}function o(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){r.label=c[1];break}if(c[0]===6&&r.label<A[1]){r.label=A[1],A=c;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(c);break}A[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function td(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,A;n<s;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||e)}var Ms=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Ag=function(t,e){return Ms.fromClientRect(t,e.getBoundingClientRect())},OO=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Ms(0,0,n,s)},ig=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},NC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rd=0;rd<NC.length;rd++)HO[NC.charCodeAt(rd)]=rd;var RC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ul=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nd=0;nd<RC.length;nd++)Ul[RC.charCodeAt(nd)]=nd;var VO=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Ul[t.charCodeAt(n)],i=Ul[t.charCodeAt(n+1)],a=Ul[t.charCodeAt(n+2)],o=Ul[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|o&63;return c},KO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},GO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Ri=5,jy=11,up=2,zO=jy-Ri,HF=65536>>Ri,$O=1<<Ri,dp=$O-1,WO=1024>>Ri,qO=HF+WO,JO=qO,XO=32,YO=JO+XO,ZO=65536>>jy,eH=1<<zO,tH=eH-1,DC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},rH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},nH=function(t,e){var r=VO(t),n=Array.isArray(r)?GO(r):new Uint32Array(r),s=Array.isArray(r)?KO(r):new Uint16Array(r),A=24,i=DC(s,A/2,n[4]/2),a=n[5]===2?DC(s,(A+n[4])/2):rH(n,Math.ceil((A+n[4])/4));return new sH(n[0],n[1],n[2],n[3],i,a)},sH=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Ri],r=(r<<up)+(e&dp),this.data[r];if(e<=65535)return r=this.index[HF+(e-55296>>Ri)],r=(r<<up)+(e&dp),this.data[r];if(e<this.highStart)return r=YO-ZO+(e>>jy),r=this.index[r],r+=e>>Ri&tH,r=this.index[r],r=(r<<up)+(e&dp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),PC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sd=0;sd<PC.length;sd++)AH[PC.charCodeAt(sd)]=sd;var iH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LC=50,oH=1,VF=2,KF=3,aH=4,lH=5,jC=7,GF=8,MC=9,CA=10,a0=11,OC=12,l0=13,cH=14,Ql=15,c0=16,Ad=17,ml=18,uH=19,HC=20,u0=21,wl=22,hp=23,wo=24,mn=25,kl=26,Nl=27,yo=28,dH=29,Ii=30,hH=31,id=32,od=33,d0=34,h0=35,f0=36,jc=37,g0=38,Yd=39,Zd=40,fp=41,zF=42,fH=43,gH=[9001,65288],$F="!",ht="",ad="",p0=nH(iH),ws=[Ii,f0],m0=[oH,VF,KF,lH],WF=[CA,GF],VC=[Nl,kl],pH=m0.concat(WF),KC=[g0,Yd,Zd,d0,h0],mH=[Ql,l0],wH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(A,i){var a=p0.get(A);if(a>LC?(s.push(!0),a-=LC):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(i),r.push(c0);if(a===aH||a===a0){if(i===0)return n.push(i),r.push(Ii);var o=r[i-1];return pH.indexOf(o)===-1?(n.push(n[i-1]),r.push(o)):(n.push(i),r.push(Ii))}if(n.push(i),a===hH)return r.push(e==="strict"?u0:jc);if(a===zF||a===dH)return r.push(Ii);if(a===fH)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(jc):r.push(Ii);r.push(a)}),[n,r,s]},gp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=r;A<=n.length;){A++;var i=n[A];if(i===e)return!0;if(i!==CA)break}if(s===CA)for(var A=r;A>0;){A--;var a=n[A];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var o=r;o<=n.length;){o++;var i=n[o];if(i===e)return!0;if(i!==CA)break}if(a!==CA)break}return!1},GC=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===CA)r--;else return n}return 0},yH=function(t,e,r,n,s){if(r[n]===0)return ht;var A=n-1;if(Array.isArray(s)&&s[A]===!0)return ht;var i=A-1,a=A+1,o=e[A],c=i>=0?e[i]:0,d=e[a];if(o===VF&&d===KF)return ht;if(m0.indexOf(o)!==-1)return $F;if(m0.indexOf(d)!==-1||WF.indexOf(d)!==-1)return ht;if(GC(A,e)===GF)return ad;if(p0.get(t[A])===a0||(o===id||o===od)&&p0.get(t[a])===a0||o===jC||d===jC||o===MC||[CA,l0,Ql].indexOf(o)===-1&&d===MC||[Ad,ml,uH,wo,yo].indexOf(d)!==-1||GC(A,e)===wl||gp(hp,wl,A,e)||gp([Ad,ml],u0,A,e)||gp(OC,OC,A,e))return ht;if(o===CA)return ad;if(o===hp||d===hp)return ht;if(d===c0||o===c0)return ad;if([l0,Ql,u0].indexOf(d)!==-1||o===cH||c===f0&&mH.indexOf(o)!==-1||o===yo&&d===f0||d===HC||ws.indexOf(d)!==-1&&o===mn||ws.indexOf(o)!==-1&&d===mn||o===Nl&&[jc,id,od].indexOf(d)!==-1||[jc,id,od].indexOf(o)!==-1&&d===kl||ws.indexOf(o)!==-1&&VC.indexOf(d)!==-1||VC.indexOf(o)!==-1&&ws.indexOf(d)!==-1||[Nl,kl].indexOf(o)!==-1&&(d===mn||[wl,Ql].indexOf(d)!==-1&&e[a+1]===mn)||[wl,Ql].indexOf(o)!==-1&&d===mn||o===mn&&[mn,yo,wo].indexOf(d)!==-1)return ht;if([mn,yo,wo,Ad,ml].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===mn)return ht;if([yo,wo].indexOf(f)!==-1)h--;else break}if([Nl,kl].indexOf(d)!==-1)for(var h=[Ad,ml].indexOf(o)!==-1?i:A;h>=0;){var f=e[h];if(f===mn)return ht;if([yo,wo].indexOf(f)!==-1)h--;else break}if(g0===o&&[g0,Yd,d0,h0].indexOf(d)!==-1||[Yd,d0].indexOf(o)!==-1&&[Yd,Zd].indexOf(d)!==-1||[Zd,h0].indexOf(o)!==-1&&d===Zd||KC.indexOf(o)!==-1&&[HC,kl].indexOf(d)!==-1||KC.indexOf(d)!==-1&&o===Nl||ws.indexOf(o)!==-1&&ws.indexOf(d)!==-1||o===wo&&ws.indexOf(d)!==-1||ws.concat(mn).indexOf(o)!==-1&&d===wl&&gH.indexOf(t[a])===-1||ws.concat(mn).indexOf(d)!==-1&&o===ml)return ht;if(o===fp&&d===fp){for(var m=r[A],v=1;m>0&&(m--,e[m]===fp);)v++;if(v%2!==0)return ht}return o===id&&d===od?ht:ad},vH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=wH(t,e.lineBreak),n=r[0],s=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(a){return[mn,Ii,zF].indexOf(a)!==-1?jc:a}));var i=e.wordBreak==="keep-all"?A.map(function(a,o){return a&&t[o]>=19968&&t[o]<=40959}):void 0;return[n,s,i]},xH=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===$F,this.start=n,this.end=s}return t.prototype.slice=function(){return ar.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),BH=function(t,e){var r=ig(t),n=vH(r,e),s=n[0],A=n[1],i=n[2],a=r.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var d=ht;c<a&&(d=yH(r,A,s,++c,i))===ht;);if(d!==ht||c===a){var h=new xH(r,d,o,c);return o=c,{value:h,done:!1}}return{done:!0,value:null}}}},CH=1,bH=2,gu=4,zC=8,Xh=10,$C=47,tc=92,_H=9,IH=32,ld=34,yl=61,EH=35,TH=36,FH=37,cd=39,ud=40,vl=41,SH=95,An=45,UH=33,QH=60,kH=62,NH=64,RH=91,DH=93,PH=61,LH=123,dd=63,jH=125,WC=124,MH=126,OH=128,qC=65533,pp=42,Si=43,HH=44,VH=58,KH=59,Mc=46,GH=0,zH=8,$H=11,WH=14,qH=31,JH=127,es=-1,qF=48,JF=97,XF=101,XH=102,YH=117,ZH=122,YF=65,ZF=69,eS=70,eV=85,tV=90,zr=function(t){return t>=qF&&t<=57},rV=function(t){return t>=55296&&t<=57343},vo=function(t){return zr(t)||t>=YF&&t<=eS||t>=JF&&t<=XH},nV=function(t){return t>=JF&&t<=ZH},sV=function(t){return t>=YF&&t<=tV},AV=function(t){return nV(t)||sV(t)},iV=function(t){return t>=OH},hd=function(t){return t===Xh||t===_H||t===IH},Yh=function(t){return AV(t)||iV(t)||t===SH},JC=function(t){return Yh(t)||zr(t)||t===An},oV=function(t){return t>=GH&&t<=zH||t===$H||t>=WH&&t<=qH||t===JH},aA=function(t,e){return t!==tc?!1:e!==Xh},fd=function(t,e,r){return t===An?Yh(e)||aA(e,r):Yh(t)?!0:!!(t===tc&&aA(t,e))},mp=function(t,e,r){return t===Si||t===An?zr(e)?!0:e===Mc&&zr(r):zr(t===Mc?e:t)},aV=function(t){var e=0,r=1;(t[e]===Si||t[e]===An)&&(t[e]===An&&(r=-1),e++);for(var n=[];zr(t[e]);)n.push(t[e++]);var s=n.length?parseInt(ar.apply(void 0,n),10):0;t[e]===Mc&&e++;for(var A=[];zr(t[e]);)A.push(t[e++]);var i=A.length,a=i?parseInt(ar.apply(void 0,A),10):0;(t[e]===ZF||t[e]===XF)&&e++;var o=1;(t[e]===Si||t[e]===An)&&(t[e]===An&&(o=-1),e++);for(var c=[];zr(t[e]);)c.push(t[e++]);var d=c.length?parseInt(ar.apply(void 0,c),10):0;return r*(s+a*Math.pow(10,-i))*Math.pow(10,o*d)},lV={type:2},cV={type:3},uV={type:4},dV={type:13},hV={type:8},fV={type:21},gV={type:9},pV={type:10},mV={type:11},wV={type:12},yV={type:14},gd={type:23},vV={type:1},xV={type:25},BV={type:24},CV={type:26},bV={type:27},_V={type:28},IV={type:29},EV={type:31},w0={type:32},tS=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(ig(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==w0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ld:return this.consumeStringToken(ld);case EH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(JC(r)||aA(n,s)){var A=fd(r,n,s)?bH:CH,i=this.consumeName();return{type:5,value:i,flags:A}}break;case TH:if(this.peekCodePoint(0)===yl)return this.consumeCodePoint(),dV;break;case cd:return this.consumeStringToken(cd);case ud:return lV;case vl:return cV;case pp:if(this.peekCodePoint(0)===yl)return this.consumeCodePoint(),yV;break;case Si:if(mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case HH:return uV;case An:var a=e,o=this.peekCodePoint(0),c=this.peekCodePoint(1);if(mp(a,o,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(fd(a,o,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===An&&c===kH)return this.consumeCodePoint(),this.consumeCodePoint(),BV;break;case Mc:if(mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case $C:if(this.peekCodePoint(0)===pp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===pp&&(d=this.consumeCodePoint(),d===$C))return this.consumeToken();if(d===es)return this.consumeToken()}break;case VH:return CV;case KH:return bV;case QH:if(this.peekCodePoint(0)===UH&&this.peekCodePoint(1)===An&&this.peekCodePoint(2)===An)return this.consumeCodePoint(),this.consumeCodePoint(),xV;break;case NH:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(fd(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case RH:return _V;case tc:if(aA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case DH:return IV;case PH:if(this.peekCodePoint(0)===yl)return this.consumeCodePoint(),hV;break;case LH:return mV;case jH:return wV;case YH:case eV:var v=this.peekCodePoint(0),y=this.peekCodePoint(1);return v===Si&&(vo(y)||y===dd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case WC:if(this.peekCodePoint(0)===yl)return this.consumeCodePoint(),gV;if(this.peekCodePoint(0)===WC)return this.consumeCodePoint(),fV;break;case MH:if(this.peekCodePoint(0)===yl)return this.consumeCodePoint(),pV;break;case es:return w0}return hd(e)?(this.consumeWhiteSpace(),EV):zr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Yh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ar(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();vo(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===dd&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(ar.apply(void 0,e.map(function(o){return o===dd?qF:o})),16),A=parseInt(ar.apply(void 0,e.map(function(o){return o===dd?eS:o})),16);return{type:30,start:s,end:A}}var i=parseInt(ar.apply(void 0,e),16);if(this.peekCodePoint(0)===An&&vo(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var a=[];vo(r)&&a.length<6;)a.push(r),r=this.consumeCodePoint();var A=parseInt(ar.apply(void 0,a),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ud?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ud?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===es)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===cd||r===ld){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===es||this.peekCodePoint(0)===vl)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),gd)}for(;;){var s=this.consumeCodePoint();if(s===es||s===vl)return{type:22,value:ar.apply(void 0,e)};if(hd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===es||this.peekCodePoint(0)===vl?(this.consumeCodePoint(),{type:22,value:ar.apply(void 0,e)}):(this.consumeBadUrlRemnants(),gd);if(s===ld||s===cd||s===ud||oV(s))return this.consumeBadUrlRemnants(),gd;if(s===tc)if(aA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),gd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;hd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===vl||e===es)return;aA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=ar.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===es||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===Xh)return this._value.splice(0,n),vV;if(s===tc){var A=this._value[n+1];A!==es&&A!==void 0&&(A===Xh?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):aA(s,A)&&(r+=this.consumeStringSlice(n),r+=ar(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=gu,n=this.peekCodePoint(0);for((n===Si||n===An)&&e.push(this.consumeCodePoint());zr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===Mc&&zr(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=zC;zr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===ZF||n===XF)&&((s===Si||s===An)&&zr(A)||zr(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=zC;zr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[aV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(fd(s,A,i)){var a=this.consumeName();return{type:15,number:r,flags:n,unit:a}}return s===FH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(vo(e)){for(var r=ar(e);vo(this.peekCodePoint(0))&&r.length<6;)r+=ar(this.consumeCodePoint());hd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||rV(n)||n>1114111?qC:n}return e===es?qC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(JC(r))e+=ar(r);else if(aA(r,this.peekCodePoint(0)))e+=ar(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),rS=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new tS;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||FV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?w0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),pu=function(t){return t.type===15},$a=function(t){return t.type===17},St=function(t){return t.type===20},TV=function(t){return t.type===0},y0=function(t,e){return St(t)&&t.value===e},nS=function(t){return t.type!==31},Ea=function(t){return t.type!==31&&t.type!==4},fs=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},FV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ZA=function(t){return t.type===17||t.type===15},hr=function(t){return t.type===16||ZA(t)},sS=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Rr={type:17,number:0,flags:gu},My={type:16,number:50,flags:gu},bA={type:16,number:100,flags:gu},Rl=function(t,e,r){var n=t[0],s=t[1];return[Dt(n,e),Dt(typeof s<"u"?s:n,r)]},Dt=function(t,e){if(t.type===16)return t.number/100*e;if(pu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},AS="deg",iS="grad",oS="rad",aS="turn",og={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case AS:return Math.PI*e.number/180;case iS:return Math.PI/200*e.number;case oS:return e.number;case aS:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},lS=function(t){return t.type===15&&(t.unit===AS||t.unit===iS||t.unit===oS||t.unit===aS)},cS=function(t){var e=t.filter(St).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Rr,Rr];case"to top":case"bottom":return Nn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Rr,bA];case"to right":case"left":return Nn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[bA,bA];case"to bottom":case"top":return Nn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[bA,Rr];case"to left":case"right":return Nn(270)}return 0},Nn=function(t){return Math.PI*t/180},jA={name:"color",parse:function(t,e){if(e.type===18){var r=SV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return _A(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return _A(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return _A(parseInt(n,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return _A(parseInt(n,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var a=Us[e.value.toUpperCase()];if(typeof a<"u")return a}return Us.TRANSPARENT}},MA=function(t){return(255&t)===0},xr=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},_A=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},XC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},YC=function(t,e){var r=e.filter(Ea);if(r.length===3){var n=r.map(XC),s=n[0],A=n[1],i=n[2];return _A(s,A,i,1)}if(r.length===4){var a=r.map(XC),s=a[0],A=a[1],i=a[2],o=a[3];return _A(s,A,i,o)}return 0};function wp(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var ZC=function(t,e){var r=e.filter(Ea),n=r[0],s=r[1],A=r[2],i=r[3],a=(n.type===17?Nn(n.number):og.parse(t,n))/(Math.PI*2),o=hr(s)?s.number/100:0,c=hr(A)?A.number/100:0,d=typeof i<"u"&&hr(i)?Dt(i,1):1;if(o===0)return _A(c*255,c*255,c*255,1);var h=c<=.5?c*(o+1):c+o-c*o,f=c*2-h,m=wp(f,h,a+1/3),v=wp(f,h,a),y=wp(f,h,a-1/3);return _A(m*255,v*255,y*255,d)},SV={hsl:ZC,hsla:ZC,rgb:YC,rgba:YC},rc=function(t,e){return jA.parse(t,rS.create(e).parseComponentValue())},Us={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},UV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(St(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},QV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ag=function(t,e){var r=jA.parse(t,e[0]),n=e[1];return n&&hr(n)?{color:r,stop:n}:{color:r,stop:null}},eb=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Rr),n.stop===null&&(n.stop=bA);for(var s=[],A=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var o=Dt(a,e);o>A?s.push(o):s.push(A),A=o}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],m=(d-f)/(h+1),v=1;v<=h;v++)s[c+v-1]=m*v;c=null}}return t.map(function(y,I){var C=y.color;return{color:C,stop:Math.max(Math.min(1,s[I]/e),0)}})},kV=function(t,e,r){var n=e/2,s=r/2,A=Dt(t[0],e)-n,i=s-Dt(t[1],r);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},NV=function(t,e,r){var n=typeof t=="number"?t:kV(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,i=r/2,a=s/2,o=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[s,A-c,A+c,i-o,i+o]},Hn=function(t,e){return Math.sqrt(t*t+e*e)},tb=function(t,e,r,n,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,a){var o=a[0],c=a[1],d=Hn(r-o,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:a,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},RV=function(t,e,r,n,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)A=i=Math.min(Hn(e,r),Hn(e,r-s),Hn(e-n,r),Hn(e-n,r-s));else if(t.shape===1){var a=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),o=tb(n,s,e,r,!0),c=o[0],d=o[1];A=Hn(c-e,(d-r)/a),i=a*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)A=i=Math.max(Hn(e,r),Hn(e,r-s),Hn(e-n,r),Hn(e-n,r-s));else if(t.shape===1){var a=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=tb(n,s,e,r,!1),c=h[0],d=h[1];A=Hn(c-e,(d-r)/a),i=a*A}break}return Array.isArray(t.size)&&(A=Dt(t.size[0],n),i=t.size.length===2?Dt(t.size[1],s):A),[A,i]},DV=function(t,e){var r=Nn(180),n=[];return fs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){r=cS(s);return}else if(lS(i)){r=og.parse(t,i);return}}var a=ag(t,s);n.push(a)}),{angle:r,stops:n,type:1}},pd=function(t,e){var r=Nn(180),n=[];return fs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=cS(s);return}else if(lS(i)){r=(og.parse(t,i)+Nn(270))%Nn(360);return}}var a=ag(t,s);n.push(a)}),{angle:r,stops:n,type:1}},PV=function(t,e){var r=Nn(180),n=[],s=1,A=0,i=3,a=[];return fs(e).forEach(function(o,c){var d=o[0];if(c===0){if(St(d)&&d.value==="linear"){s=1;return}else if(St(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=jA.parse(t,d.values[0]);n.push({stop:Rr,color:h})}else if(d.name==="to"){var h=jA.parse(t,d.values[0]);n.push({stop:bA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Ea);if(f.length===2){var h=jA.parse(t,f[1]),m=f[0];$a(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),s===1?{angle:(r+Nn(180))%Nn(360),stops:n,type:s}:{size:i,shape:A,stops:n,position:a,type:s}},uS="closest-side",dS="farthest-side",hS="closest-corner",fS="farthest-corner",gS="circle",pS="ellipse",mS="cover",wS="contain",LV=function(t,e){var r=0,n=3,s=[],A=[];return fs(e).forEach(function(i,a){var o=!0;if(a===0){var c=!1;o=i.reduce(function(h,f){if(c)if(St(f))switch(f.value){case"center":return A.push(My),h;case"top":case"left":return A.push(Rr),h;case"right":case"bottom":return A.push(bA),h}else(hr(f)||ZA(f))&&A.push(f);else if(St(f))switch(f.value){case gS:return r=0,!1;case pS:return r=1,!1;case"at":return c=!0,!1;case uS:return n=0,!1;case mS:case dS:return n=1,!1;case wS:case hS:return n=2,!1;case fS:return n=3,!1}else if(ZA(f)||hr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},o)}if(o){var d=ag(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:A,type:2}},md=function(t,e){var r=0,n=3,s=[],A=[];return fs(e).forEach(function(i,a){var o=!0;if(a===0?o=i.reduce(function(d,h){if(St(h))switch(h.value){case"center":return A.push(My),!1;case"top":case"left":return A.push(Rr),!1;case"right":case"bottom":return A.push(bA),!1}else if(hr(h)||ZA(h))return A.push(h),!1;return d},o):a===1&&(o=i.reduce(function(d,h){if(St(h))switch(h.value){case gS:return r=0,!1;case pS:return r=1,!1;case wS:case uS:return n=0,!1;case dS:return n=1,!1;case hS:return n=2,!1;case mS:case fS:return n=3,!1}else if(ZA(h)||hr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},o)),o){var c=ag(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:A,type:2}},jV=function(t){return t.type===1},MV=function(t){return t.type===2},Oy={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=yS[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function OV(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!yS[t.name])}var yS={"linear-gradient":DV,"-moz-linear-gradient":pd,"-ms-linear-gradient":pd,"-o-linear-gradient":pd,"-webkit-linear-gradient":pd,"radial-gradient":LV,"-moz-radial-gradient":md,"-ms-radial-gradient":md,"-o-radial-gradient":md,"-webkit-radial-gradient":md,"-webkit-gradient":PV},HV={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Ea(n)&&OV(n)}).map(function(n){return Oy.parse(t,n)})}},VV={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(St(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},KV={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return fs(e).map(function(r){return r.filter(hr)}).map(sS)}},GV={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return fs(e).map(function(r){return r.filter(St).map(function(n){return n.value}).join(" ")}).map(zV)}},zV=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ta;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ta||(ta={}));var $V={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return fs(e).map(function(r){return r.filter(WV)})}},WV=function(t){return St(t)||hr(t)},lg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},qV=lg("top"),JV=lg("right"),XV=lg("bottom"),YV=lg("left"),cg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return sS(r.filter(hr))}}},ZV=cg("top-left"),e3=cg("top-right"),t3=cg("bottom-right"),r3=cg("bottom-left"),ug=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},n3=ug("top"),s3=ug("right"),A3=ug("bottom"),i3=ug("left"),dg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return pu(r)?r.number:0}}},o3=dg("top"),a3=dg("right"),l3=dg("bottom"),c3=dg("left"),u3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},d3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},h3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(St).reduce(function(r,n){return r|f3(n.value)},0)}},f3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},g3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},p3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Zh;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Zh||(Zh={}));var m3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Zh.STRICT;case"normal":default:return Zh.NORMAL}}},w3={name:"line-height",initialValue:"normal",prefix:!1,type:4},rb=function(t,e){return St(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:hr(t)?Dt(t,e):e},y3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Oy.parse(t,e)}},v3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},v0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},hg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},x3=hg("top"),B3=hg("right"),C3=hg("bottom"),b3=hg("left"),_3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(St).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},I3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},fg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},E3=fg("top"),T3=fg("right"),F3=fg("bottom"),S3=fg("left"),U3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Q3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},k3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&y0(e[0],"none")?[]:fs(e).map(function(r){for(var n={color:Us.TRANSPARENT,offsetX:Rr,offsetY:Rr,blur:Rr},s=0,A=0;A<r.length;A++){var i=r[A];ZA(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=jA.parse(t,i)}return n})}},N3={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},R3={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=L3[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},D3=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},P3=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[r,n,s,A,i,a]:null},L3={matrix:D3,matrix3d:P3},nb={type:16,number:50,flags:gu},j3=[nb,nb],M3={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(hr);return r.length!==2?j3:[r[0],r[1]]}},O3={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},nc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(nc||(nc={}));var H3={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return nc.BREAK_ALL;case"keep-all":return nc.KEEP_ALL;case"normal":default:return nc.NORMAL}}},V3={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if($a(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},vS={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},K3={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return $a(e)?e.number:1}},G3={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},z3={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(St).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},$3={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},W3={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},q3={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if($a(e))return e.number;if(St(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},J3={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(St).map(function(r){return r.value})}},X3={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pr=function(t,e){return(t&e)!==0},Y3={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Z3={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(nS),A=0;A<s.length;A++){var i=s[A],a=s[A+1];if(i.type===20){var o=a&&$a(a)?a.number:1;n.push({counter:i.value,increment:o})}}return n}},e5={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(nS),s=0;s<n.length;s++){var A=n[s],i=n[s+1];if(St(A)&&A.value!=="none"){var a=i&&$a(i)?i.number:0;r.push({counter:A.value,reset:a})}}return r}},t5={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(pu).map(function(r){return vS.parse(t,r)})}},r5={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(TV);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,a=s[A+1].value;n.push({open:i,close:a})}return n}},sb=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},n5={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&y0(e[0],"none")?[]:fs(e).map(function(r){for(var n={color:255,offsetX:Rr,offsetY:Rr,blur:Rr,spread:Rr,inset:!1},s=0,A=0;A<r.length;A++){var i=r[A];y0(i,"inset")?n.inset=!0:ZA(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=jA.parse(t,i)}return n})}},s5={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(St).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},A5={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},i5={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return pu(e)?e.number:0}},o5=function(){function t(e,r){var n,s;this.animationDuration=ke(e,t5,r.animationDuration),this.backgroundClip=ke(e,UV,r.backgroundClip),this.backgroundColor=ke(e,QV,r.backgroundColor),this.backgroundImage=ke(e,HV,r.backgroundImage),this.backgroundOrigin=ke(e,VV,r.backgroundOrigin),this.backgroundPosition=ke(e,KV,r.backgroundPosition),this.backgroundRepeat=ke(e,GV,r.backgroundRepeat),this.backgroundSize=ke(e,$V,r.backgroundSize),this.borderTopColor=ke(e,qV,r.borderTopColor),this.borderRightColor=ke(e,JV,r.borderRightColor),this.borderBottomColor=ke(e,XV,r.borderBottomColor),this.borderLeftColor=ke(e,YV,r.borderLeftColor),this.borderTopLeftRadius=ke(e,ZV,r.borderTopLeftRadius),this.borderTopRightRadius=ke(e,e3,r.borderTopRightRadius),this.borderBottomRightRadius=ke(e,t3,r.borderBottomRightRadius),this.borderBottomLeftRadius=ke(e,r3,r.borderBottomLeftRadius),this.borderTopStyle=ke(e,n3,r.borderTopStyle),this.borderRightStyle=ke(e,s3,r.borderRightStyle),this.borderBottomStyle=ke(e,A3,r.borderBottomStyle),this.borderLeftStyle=ke(e,i3,r.borderLeftStyle),this.borderTopWidth=ke(e,o3,r.borderTopWidth),this.borderRightWidth=ke(e,a3,r.borderRightWidth),this.borderBottomWidth=ke(e,l3,r.borderBottomWidth),this.borderLeftWidth=ke(e,c3,r.borderLeftWidth),this.boxShadow=ke(e,n5,r.boxShadow),this.color=ke(e,u3,r.color),this.direction=ke(e,d3,r.direction),this.display=ke(e,h3,r.display),this.float=ke(e,g3,r.cssFloat),this.fontFamily=ke(e,$3,r.fontFamily),this.fontSize=ke(e,W3,r.fontSize),this.fontStyle=ke(e,X3,r.fontStyle),this.fontVariant=ke(e,J3,r.fontVariant),this.fontWeight=ke(e,q3,r.fontWeight),this.letterSpacing=ke(e,p3,r.letterSpacing),this.lineBreak=ke(e,m3,r.lineBreak),this.lineHeight=ke(e,w3,r.lineHeight),this.listStyleImage=ke(e,y3,r.listStyleImage),this.listStylePosition=ke(e,v3,r.listStylePosition),this.listStyleType=ke(e,v0,r.listStyleType),this.marginTop=ke(e,x3,r.marginTop),this.marginRight=ke(e,B3,r.marginRight),this.marginBottom=ke(e,C3,r.marginBottom),this.marginLeft=ke(e,b3,r.marginLeft),this.opacity=ke(e,K3,r.opacity);var A=ke(e,_3,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=ke(e,I3,r.overflowWrap),this.paddingTop=ke(e,E3,r.paddingTop),this.paddingRight=ke(e,T3,r.paddingRight),this.paddingBottom=ke(e,F3,r.paddingBottom),this.paddingLeft=ke(e,S3,r.paddingLeft),this.paintOrder=ke(e,s5,r.paintOrder),this.position=ke(e,Q3,r.position),this.textAlign=ke(e,U3,r.textAlign),this.textDecorationColor=ke(e,G3,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=ke(e,z3,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=ke(e,k3,r.textShadow),this.textTransform=ke(e,N3,r.textTransform),this.transform=ke(e,R3,r.transform),this.transformOrigin=ke(e,M3,r.transformOrigin),this.visibility=ke(e,O3,r.visibility),this.webkitTextStrokeColor=ke(e,A5,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=ke(e,i5,r.webkitTextStrokeWidth),this.wordBreak=ke(e,H3,r.wordBreak),this.zIndex=ke(e,V3,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return MA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return pr(this.display,4)||pr(this.display,33554432)||pr(this.display,268435456)||pr(this.display,536870912)||pr(this.display,67108864)||pr(this.display,134217728)},t}(),a5=function(){function t(e,r){this.content=ke(e,Y3,r.content),this.quotes=ke(e,r5,r.quotes)}return t}(),Ab=function(){function t(e,r){this.counterIncrement=ke(e,Z3,r.counterIncrement),this.counterReset=ke(e,e5,r.counterReset)}return t}(),ke=function(t,e,r){var n=new tS,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var A=new rS(n.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,St(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return og.parse(t,A.parseComponentValue());case"color":return jA.parse(t,A.parseComponentValue());case"image":return Oy.parse(t,A.parseComponentValue());case"length":var a=A.parseComponentValue();return ZA(a)?a:Rr;case"length-percentage":var o=A.parseComponentValue();return hr(o)?o:Rr;case"time":return vS.parse(t,A.parseComponentValue())}break}},l5="data-html2canvas-debug",c5=function(t){var e=t.getAttribute(l5);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},x0=function(t,e){var r=c5(t);return r===1||e===r},gs=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,x0(r,3))debugger;this.styles=new o5(e,window.getComputedStyle(r,null)),b0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Ag(this.context,r),x0(r,4)&&(this.flags|=16)}return t}(),u5="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ib="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wd=0;wd<ib.length;wd++)Dl[ib.charCodeAt(wd)]=wd;var d5=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Dl[t.charCodeAt(n)],i=Dl[t.charCodeAt(n+1)],a=Dl[t.charCodeAt(n+2)],o=Dl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|o&63;return c},h5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},f5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Di=5,Hy=11,yp=2,g5=Hy-Di,xS=65536>>Di,p5=1<<Di,vp=p5-1,m5=1024>>Di,w5=xS+m5,y5=w5,v5=32,x5=y5+v5,B5=65536>>Hy,C5=1<<g5,b5=C5-1,ob=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},_5=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},I5=function(t,e){var r=d5(t),n=Array.isArray(r)?f5(r):new Uint32Array(r),s=Array.isArray(r)?h5(r):new Uint16Array(r),A=24,i=ob(s,A/2,n[4]/2),a=n[5]===2?ob(s,(A+n[4])/2):_5(n,Math.ceil((A+n[4])/4));return new E5(n[0],n[1],n[2],n[3],i,a)},E5=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Di],r=(r<<yp)+(e&vp),this.data[r];if(e<=65535)return r=this.index[xS+(e-55296>>Di)],r=(r<<yp)+(e&vp),this.data[r];if(e<this.highStart)return r=x5-B5+(e>>Hy),r=this.index[r],r+=e>>Di&b5,r=this.index[r],r=(r<<yp)+(e&vp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),ab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yd=0;yd<ab.length;yd++)T5[ab.charCodeAt(yd)]=yd;var F5=1,xp=2,Bp=3,lb=4,cb=5,S5=7,ub=8,Cp=9,bp=10,db=11,hb=12,fb=13,gb=14,_p=15,U5=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Q5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},k5=I5(u5),Fn="",Ip="",N5=function(t){return k5.get(t)},R5=function(t,e,r){var n=r-2,s=e[n],A=e[r-1],i=e[r];if(A===xp&&i===Bp)return Fn;if(A===xp||A===Bp||A===lb||i===xp||i===Bp||i===lb)return Ip;if(A===ub&&[ub,Cp,db,hb].indexOf(i)!==-1||(A===db||A===Cp)&&(i===Cp||i===bp)||(A===hb||A===bp)&&i===bp||i===fb||i===cb||i===S5||A===F5)return Fn;if(A===fb&&i===gb){for(;s===cb;)s=e[--n];if(s===gb)return Fn}if(A===_p&&i===_p){for(var a=0;s===_p;)a++,s=e[--n];if(a%2===0)return Fn}return Ip},D5=function(t){var e=U5(t),r=e.length,n=0,s=0,A=e.map(N5);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Fn;n<r&&(i=R5(e,A,++n))===Fn;);if(i!==Fn||n===r){var a=Q5.apply(null,e.slice(s,n));return s=n,{value:a,done:!1}}return{done:!0,value:null}}}},P5=function(t){for(var e=D5(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},L5=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(n),A===e)return!0}}return!1},j5=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=ig(n.data).map(function(o){return ar(o)}),A=0,i={},a=s.every(function(o,c){r.setStart(n,A),r.setEnd(n,A+o.length);var d=r.getBoundingClientRect();A+=o.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),a},M5=function(){return typeof new Image().crossOrigin<"u"},O5=function(){return typeof new XMLHttpRequest().responseType=="string"},H5=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},pb=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},V5=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,A=e.toDataURL();s.src=A;var i=B0(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),mb(i).then(function(a){n.drawImage(a,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=r+"px",pb(o)?mb(B0(r,r,0,0,c)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),pb(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},B0=function(t,e,r,n,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),a=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(s),i},mb=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Qr={get SUPPORT_RANGE_BOUNDS(){var t=L5(document);return Object.defineProperty(Qr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Qr.SUPPORT_RANGE_BOUNDS&&j5(document);return Object.defineProperty(Qr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=H5(document);return Object.defineProperty(Qr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?V5(document):Promise.resolve(!1);return Object.defineProperty(Qr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=M5();return Object.defineProperty(Qr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=O5();return Object.defineProperty(Qr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},sc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),K5=function(t,e,r,n){var s=$5(e,r),A=[],i=0;return s.forEach(function(a){if(r.textDecorationLine.length||a.trim().length>0)if(Qr.SUPPORT_RANGE_BOUNDS){var o=wb(n,i,a.length).getClientRects();if(o.length>1){var c=Vy(a),d=0;c.forEach(function(f){A.push(new sc(f,Ms.fromDOMRectList(t,wb(n,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new sc(a,Ms.fromDOMRectList(t,o)))}else{var h=n.splitText(a.length);A.push(new sc(a,G5(t,n))),n=h}else Qr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),A},G5=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var A=Ag(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),A}}return Ms.EMPTY},wb=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},Vy=function(t){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return P5(t)},z5=function(t,e){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return q5(t,e)},$5=function(t,e){return e.letterSpacing!==0?Vy(t):z5(t,e)},W5=[32,160,4961,65792,65793,4153,4241],q5=function(t,e){for(var r=BH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,A=function(){if(s.value){var i=s.value.slice(),a=ig(i),o="";a.forEach(function(c){W5.indexOf(c)===-1?o+=ar(c):(o.length&&n.push(o),n.push(ar(c)),o="")}),o.length&&n.push(o)}};!(s=r.next()).done;)A();return n},J5=function(){function t(e,r,n){this.text=X5(r.data,n.textTransform),this.textBounds=K5(e,this.text,n,r)}return t}(),X5=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Y5,Z5);case 2:return t.toUpperCase();default:return t}},Y5=/(^|\s|:|-|\(|\))([a-z])/g,Z5=function(t,e,r){return t.length>0?e+r.toUpperCase():t},BS=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(gs),CS=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(gs),bS=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=new XMLSerializer,i=Ag(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(gs),_S=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(gs),C0=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(gs),eK=[{type:15,flags:0,unit:"px",number:3}],tK=[{type:16,flags:0,number:50}],rK=function(t){return t.width>t.height?new Ms(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ms(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},nK=function(t){var e=t.type===sK?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},ef="checkbox",tf="radio",sK="password",yb=707406591,Ky=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=nK(n),(s.type===ef||s.type===tf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=rK(s.bounds)),s.type){case ef:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=eK;break;case tf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=tK;break}return s}return e}(gs),IS=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(gs),ES=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(gs),TS=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=SS(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?rc(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Us.TRANSPARENT,i=n.contentWindow.document.body?rc(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Us.TRANSPARENT;s.backgroundColor=MA(A)?MA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(gs),AK=["OL","UL","MENU"],eh=function(t,e,r,n){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,US(s)&&s.data.trim().length>0)r.textNodes.push(new J5(t,s,r.styles));else if(Vo(s))if(RS(s)&&s.assignedNodes)s.assignedNodes().forEach(function(a){return eh(t,a,r,n)});else{var i=FS(t,s);i.styles.isVisible()&&(iK(s,i,n)?i.flags|=4:oK(i.styles)&&(i.flags|=2),AK.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?eh(t,s.shadowRoot,i,n):!rf(s)&&!QS(s)&&!nf(s)&&eh(t,s,i,n))}},FS=function(t,e){return _0(e)?new BS(t,e):kS(e)?new CS(t,e):QS(e)?new bS(t,e):aK(e)?new _S(t,e):lK(e)?new C0(t,e):cK(e)?new Ky(t,e):nf(e)?new IS(t,e):rf(e)?new ES(t,e):NS(e)?new TS(t,e):new gs(t,e)},SS=function(t,e){var r=FS(t,e);return r.flags|=4,eh(t,e,r,r),r},iK=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Gy(t)&&r.styles.isTransparent()},oK=function(t){return t.isPositioned()||t.isFloating()},US=function(t){return t.nodeType===Node.TEXT_NODE},Vo=function(t){return t.nodeType===Node.ELEMENT_NODE},b0=function(t){return Vo(t)&&typeof t.style<"u"&&!th(t)},th=function(t){return typeof t.className=="object"},aK=function(t){return t.tagName==="LI"},lK=function(t){return t.tagName==="OL"},cK=function(t){return t.tagName==="INPUT"},uK=function(t){return t.tagName==="HTML"},QS=function(t){return t.tagName==="svg"},Gy=function(t){return t.tagName==="BODY"},kS=function(t){return t.tagName==="CANVAS"},vb=function(t){return t.tagName==="VIDEO"},_0=function(t){return t.tagName==="IMG"},NS=function(t){return t.tagName==="IFRAME"},xb=function(t){return t.tagName==="STYLE"},dK=function(t){return t.tagName==="SCRIPT"},rf=function(t){return t.tagName==="TEXTAREA"},nf=function(t){return t.tagName==="SELECT"},RS=function(t){return t.tagName==="SLOT"},Bb=function(t){return t.tagName.indexOf("-")>0},hK=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,A=!0;n!==null&&n.forEach(function(a){var o=r.counters[a.counter];o&&a.increment!==0&&(A=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=a.increment)});var i=[];return A&&s.forEach(function(a){var o=r.counters[a.counter];i.push(a.counter),o||(o=r.counters[a.counter]=[]),o.push(a.reset)}),i},t}(),Cb={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},bb={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},fK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},xo=function(t,e,r,n,s,A){return t<e||t>r?Oc(t,s,A.length>0):n.integers.reduce(function(i,a,o){for(;t>=a;)t-=a,i+=n.values[o];return i},"")+A},DS=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},or=function(t,e,r,n,s){var A=r-e+1;return(t<0?"-":"")+(DS(Math.abs(t),A,n,function(i){return ar(Math.floor(i%A)+e)})+s)},mi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return DS(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},To=1,sA=2,AA=4,Pl=8,ys=function(t,e,r,n,s,A){if(t<-9999||t>9999)return Oc(t,4,s.length>0);var i=Math.abs(t),a=s;if(i===0)return e[0]+a;for(var o=0;i>0&&o<=4;o++){var c=i%10;c===0&&pr(A,To)&&a!==""?a=e[c]+a:c>1||c===1&&o===0||c===1&&o===1&&pr(A,sA)||c===1&&o===1&&pr(A,AA)&&t>100||c===1&&o>1&&pr(A,Pl)?a=e[c]+(o>0?r[o-1]:"")+a:c===1&&o>0&&(a=r[o-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},_b="",Ib="",Eb="",Ep="",Oc=function(t,e,r){var n=r?". ":"",s=r?"":"",A=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=or(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return mi(t,"",s);case 6:return xo(t,1,3999,Cb,3,n).toLowerCase();case 7:return xo(t,1,3999,Cb,3,n);case 8:return or(t,945,969,!1,n);case 9:return or(t,97,122,!1,n);case 10:return or(t,65,90,!1,n);case 11:return or(t,1632,1641,!0,n);case 12:case 49:return xo(t,1,9999,bb,3,n);case 35:return xo(t,1,9999,bb,3,n).toLowerCase();case 13:return or(t,2534,2543,!0,n);case 14:case 30:return or(t,6112,6121,!0,n);case 15:return mi(t,"",s);case 16:return mi(t,"",s);case 17:case 48:return ys(t,"",_b,"",s,sA|AA|Pl);case 47:return ys(t,"",Ib,"",s,To|sA|AA|Pl);case 42:return ys(t,"",_b,"",s,sA|AA|Pl);case 41:return ys(t,"",Ib,"",s,To|sA|AA|Pl);case 26:return ys(t,"","",Eb,s,0);case 25:return ys(t,"","",Eb,s,To|sA|AA);case 31:return ys(t,"","",Ep,A,To|sA|AA);case 33:return ys(t,"","",Ep,A,0);case 32:return ys(t,"","",Ep,A,To|sA|AA);case 18:return or(t,2406,2415,!0,n);case 20:return xo(t,1,19999,gK,3,n);case 21:return or(t,2790,2799,!0,n);case 22:return or(t,2662,2671,!0,n);case 22:return xo(t,1,10999,fK,3,n);case 23:return mi(t,"");case 24:return mi(t,"");case 27:return or(t,3302,3311,!0,n);case 28:return mi(t,"",s);case 29:return mi(t,"",s);case 34:return or(t,3792,3801,!0,n);case 37:return or(t,6160,6169,!0,n);case 38:return or(t,4160,4169,!0,n);case 39:return or(t,2918,2927,!0,n);case 40:return or(t,1776,1785,!0,n);case 43:return or(t,3046,3055,!0,n);case 44:return or(t,3174,3183,!0,n);case 45:return or(t,3664,3673,!0,n);case 46:return or(t,3872,3881,!0,n);case 3:default:return or(t,48,57,!0,n)}},PS="data-html2canvas-ignore",Tb=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new hK,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=pK(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=s.contentWindow,o=a.document,c=yK(s).then(function(){return Yr(n,void 0,void 0,function(){var d,h;return Kr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(CK),a&&(a.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-r.left,a.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,wK(o)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(o,h)}).then(function(){return s})]:[2,s]}})})});return o.open(),o.write(xK(document.doctype)+"<html></html>"),BK(this.referenceElement.ownerDocument,A,i),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),c},t.prototype.createElementClone=function(e){if(x0(e,2))debugger;if(kS(e))return this.createCanvasClone(e);if(vb(e))return this.createVideoClone(e);if(xb(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return _0(r)&&(_0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Bb(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Tp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var a=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(a){var o=a.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!Vo(r)||!dK(r)&&!r.hasAttribute(PS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Vo(r)||!xb(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(Vo(A)&&RS(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(a){return s.appendChildNode(r,a,n)})}else this.appendChildNode(r,A,n)},t.prototype.cloneNode=function(e,r){if(US(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Vo(e)&&(b0(e)||th(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&b0(s)&&(this.clonedReferenceElement=s),Gy(s)&&IK(s);var o=this.counters.parse(new Ab(this.context,A)),c=this.resolvePseudoContent(e,s,i,Ac.BEFORE);Bb(e)&&(r=!0),vb(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,a,Ac.AFTER);return d&&s.appendChild(d),this.counters.pop(o),(A&&(this.options.copyStyles||th(e))&&!NS(e)||r)&&Tp(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(rf(e)||nf(e))&&(rf(s)||nf(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var A=this;if(n){var i=n.content,a=r.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new Ab(this.context,n));var o=new a5(this.context,n),c=a.createElement("html2canvaspseudoelement");Tp(n,c),o.content.forEach(function(h){if(h.type===0)c.appendChild(a.createTextNode(h.value));else if(h.type===22){var f=a.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(St);m.length&&c.appendChild(a.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var v=h.values.filter(Ea),y=v[0],I=v[1];if(y&&St(y)){var C=A.counters.getCounterValue(y.value),w=I&&St(I)?v0.parse(A.context,I.value):3;c.appendChild(a.createTextNode(Oc(C,w,!1)))}}else if(h.name==="counters"){var B=h.values.filter(Ea),y=B[0],S=B[1],I=B[2];if(y&&St(y)){var N=A.counters.getCounterValues(y.value),Q=I&&St(I)?v0.parse(A.context,I.value):3,x=S&&S.type===0?S.value:"",b=N.map(function(R){return Oc(R,Q,!1)}).join(x);c.appendChild(a.createTextNode(b))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(a.createTextNode(sb(o.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(sb(o.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(h.value))}}),c.className=I0+" "+E0;var d=s===Ac.BEFORE?" "+I0:" "+E0;return th(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ac;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ac||(Ac={}));var pK=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(PS,"true"),t.body.appendChild(r),r},mK=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},wK=function(t){return Promise.all([].slice.call(t.images,0).map(mK))},yK=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},vK=["all","d","content"],Tp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);vK.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},xK=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},BK=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},CK=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},bK=":before",_K=":after",I0="___html2canvas___pseudoelement_before",E0="___html2canvas___pseudoelement_after",Fb=`{
    content: "" !important;
    display: none !important;
}`,IK=function(t){EK(t,"."+I0+bK+Fb+`
         .`+E0+_K+Fb)},EK=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},LS=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),TK=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Sp(e)||QK(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Yr(this,void 0,void 0,function(){var r,n,s,A,i=this;return Kr(this,function(a){switch(a.label){case 0:return r=LS.isSameOrigin(e),n=!Fp(e)&&this._options.useCORS===!0&&Qr.SUPPORT_CORS_IMAGES&&!r,s=!Fp(e)&&!r&&!Sp(e)&&typeof this._options.proxy=="string"&&Qr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Fp(e)&&!Sp(e)&&!s&&!n?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,c){var d=new Image;d.onload=function(){return o(d)},d.onerror=c,(kK(A)||n)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return o(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var a=Qr.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(a==="text")A(o.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(o.response)}else i("Failed to proxy resource "+s+" with status code "+o.status)},o.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=a),r._options.imageTimeout){var d=r._options.imageTimeout;o.timeout=d,o.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}o.send()})},t}(),FK=/^data:image\/svg\+xml/i,SK=/^data:image\/.*;base64,/i,UK=/^data:image\/.*/i,QK=function(t){return Qr.SUPPORT_SVG_DRAWING||!NK(t)},Fp=function(t){return UK.test(t)},kK=function(t){return SK.test(t)},Sp=function(t){return t.substr(0,4)==="blob"},NK=function(t){return t.substr(-3).toLowerCase()==="svg"||FK.test(t)},Ue=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Bo=function(t,e,r){return new Ue(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},vd=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Bo(this.start,this.startControl,e),s=Bo(this.startControl,this.endControl,e),A=Bo(this.endControl,this.end,e),i=Bo(n,s,e),a=Bo(s,A,e),o=Bo(i,a,e);return r?new t(this.start,n,i,o):new t(o,a,A,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Qn=function(t){return t.type===1},RK=function(){function t(e){var r=e.styles,n=e.bounds,s=Rl(r.borderTopLeftRadius,n.width,n.height),A=s[0],i=s[1],a=Rl(r.borderTopRightRadius,n.width,n.height),o=a[0],c=a[1],d=Rl(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],m=Rl(r.borderBottomLeftRadius,n.width,n.height),v=m[0],y=m[1],I=[];I.push((A+o)/n.width),I.push((v+h)/n.width),I.push((i+y)/n.height),I.push((c+f)/n.height);var C=Math.max.apply(Math,I);C>1&&(A/=C,i/=C,o/=C,c/=C,h/=C,f/=C,v/=C,y/=C);var w=n.width-o,B=n.height-f,S=n.width-h,N=n.height-y,Q=r.borderTopWidth,x=r.borderRightWidth,b=r.borderBottomWidth,_=r.borderLeftWidth,k=Dt(r.paddingTop,e.bounds.width),R=Dt(r.paddingRight,e.bounds.width),P=Dt(r.paddingBottom,e.bounds.width),E=Dt(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?Gt(n.left+_/3,n.top+Q/3,A-_/3,i-Q/3,Ct.TOP_LEFT):new Ue(n.left+_/3,n.top+Q/3),this.topRightBorderDoubleOuterBox=A>0||i>0?Gt(n.left+w,n.top+Q/3,o-x/3,c-Q/3,Ct.TOP_RIGHT):new Ue(n.left+n.width-x/3,n.top+Q/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Gt(n.left+S,n.top+B,h-x/3,f-b/3,Ct.BOTTOM_RIGHT):new Ue(n.left+n.width-x/3,n.top+n.height-b/3),this.bottomLeftBorderDoubleOuterBox=v>0||y>0?Gt(n.left+_/3,n.top+N,v-_/3,y-b/3,Ct.BOTTOM_LEFT):new Ue(n.left+_/3,n.top+n.height-b/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?Gt(n.left+_*2/3,n.top+Q*2/3,A-_*2/3,i-Q*2/3,Ct.TOP_LEFT):new Ue(n.left+_*2/3,n.top+Q*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?Gt(n.left+w,n.top+Q*2/3,o-x*2/3,c-Q*2/3,Ct.TOP_RIGHT):new Ue(n.left+n.width-x*2/3,n.top+Q*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Gt(n.left+S,n.top+B,h-x*2/3,f-b*2/3,Ct.BOTTOM_RIGHT):new Ue(n.left+n.width-x*2/3,n.top+n.height-b*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||y>0?Gt(n.left+_*2/3,n.top+N,v-_*2/3,y-b*2/3,Ct.BOTTOM_LEFT):new Ue(n.left+_*2/3,n.top+n.height-b*2/3),this.topLeftBorderStroke=A>0||i>0?Gt(n.left+_/2,n.top+Q/2,A-_/2,i-Q/2,Ct.TOP_LEFT):new Ue(n.left+_/2,n.top+Q/2),this.topRightBorderStroke=A>0||i>0?Gt(n.left+w,n.top+Q/2,o-x/2,c-Q/2,Ct.TOP_RIGHT):new Ue(n.left+n.width-x/2,n.top+Q/2),this.bottomRightBorderStroke=h>0||f>0?Gt(n.left+S,n.top+B,h-x/2,f-b/2,Ct.BOTTOM_RIGHT):new Ue(n.left+n.width-x/2,n.top+n.height-b/2),this.bottomLeftBorderStroke=v>0||y>0?Gt(n.left+_/2,n.top+N,v-_/2,y-b/2,Ct.BOTTOM_LEFT):new Ue(n.left+_/2,n.top+n.height-b/2),this.topLeftBorderBox=A>0||i>0?Gt(n.left,n.top,A,i,Ct.TOP_LEFT):new Ue(n.left,n.top),this.topRightBorderBox=o>0||c>0?Gt(n.left+w,n.top,o,c,Ct.TOP_RIGHT):new Ue(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Gt(n.left+S,n.top+B,h,f,Ct.BOTTOM_RIGHT):new Ue(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||y>0?Gt(n.left,n.top+N,v,y,Ct.BOTTOM_LEFT):new Ue(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||i>0?Gt(n.left+_,n.top+Q,Math.max(0,A-_),Math.max(0,i-Q),Ct.TOP_LEFT):new Ue(n.left+_,n.top+Q),this.topRightPaddingBox=o>0||c>0?Gt(n.left+Math.min(w,n.width-x),n.top+Q,w>n.width+x?0:Math.max(0,o-x),Math.max(0,c-Q),Ct.TOP_RIGHT):new Ue(n.left+n.width-x,n.top+Q),this.bottomRightPaddingBox=h>0||f>0?Gt(n.left+Math.min(S,n.width-_),n.top+Math.min(B,n.height-b),Math.max(0,h-x),Math.max(0,f-b),Ct.BOTTOM_RIGHT):new Ue(n.left+n.width-x,n.top+n.height-b),this.bottomLeftPaddingBox=v>0||y>0?Gt(n.left+_,n.top+Math.min(N,n.height-b),Math.max(0,v-_),Math.max(0,y-b),Ct.BOTTOM_LEFT):new Ue(n.left+_,n.top+n.height-b),this.topLeftContentBox=A>0||i>0?Gt(n.left+_+E,n.top+Q+k,Math.max(0,A-(_+E)),Math.max(0,i-(Q+k)),Ct.TOP_LEFT):new Ue(n.left+_+E,n.top+Q+k),this.topRightContentBox=o>0||c>0?Gt(n.left+Math.min(w,n.width+_+E),n.top+Q+k,w>n.width+_+E?0:o-_+E,c-(Q+k),Ct.TOP_RIGHT):new Ue(n.left+n.width-(x+R),n.top+Q+k),this.bottomRightContentBox=h>0||f>0?Gt(n.left+Math.min(S,n.width-(_+E)),n.top+Math.min(B,n.height+Q+k),Math.max(0,h-(x+R)),f-(b+P),Ct.BOTTOM_RIGHT):new Ue(n.left+n.width-(x+R),n.top+n.height-(b+P)),this.bottomLeftContentBox=v>0||y>0?Gt(n.left+_+E,n.top+N,Math.max(0,v-(_+E)),y-(b+P),Ct.BOTTOM_LEFT):new Ue(n.left+_+E,n.top+n.height-(b+P))}return t}(),Ct;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ct||(Ct={}));var Gt=function(t,e,r,n,s){var A=4*((Math.sqrt(2)-1)/3),i=r*A,a=n*A,o=t+r,c=e+n;switch(s){case Ct.TOP_LEFT:return new vd(new Ue(t,c),new Ue(t,c-a),new Ue(o-i,e),new Ue(o,e));case Ct.TOP_RIGHT:return new vd(new Ue(t,e),new Ue(t+i,e),new Ue(o,c-a),new Ue(o,c));case Ct.BOTTOM_RIGHT:return new vd(new Ue(o,e),new Ue(o,e+a),new Ue(t+i,c),new Ue(t,c));case Ct.BOTTOM_LEFT:default:return new vd(new Ue(o,c),new Ue(o-i,c),new Ue(t,e+a),new Ue(t,e))}},sf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},DK=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Af=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},PK=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),xd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),LK=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),jK=function(t){return t.type===0},jS=function(t){return t.type===1},MK=function(t){return t.type===2},Sb=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},OK=function(t,e,r,n,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+s);case 3:return A.add(e,r+s)}return A})},MS=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),OS=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new RK(this.container),this.container.styles.opacity<1&&this.effects.push(new LK(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new PK(n,s,A))}if(this.container.styles.overflowX!==0){var i=sf(this.curves),a=Af(this.curves);Sb(i,a)?this.effects.push(new xd(i,6)):(this.effects.push(new xd(i,2)),this.effects.push(new xd(a,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var A=n.effects.filter(function(o){return!jS(o)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=sf(n.curves),a=Af(n.curves);Sb(i,a)||s.unshift(new xd(a,6))}}else s.unshift.apply(s,A);n=n.parent}return s.filter(function(o){return pr(o.target,e)})},t}(),T0=function(t,e,r,n){t.container.elements.forEach(function(s){var A=pr(s.flags,4),i=pr(s.flags,2),a=new OS(s,t);pr(s.styles.display,2048)&&n.push(a);var o=pr(s.flags,8)?[]:n;if(A||i){var c=A||s.styles.isPositioned()?r:e,d=new MS(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(v,y){return h>v.element.container.styles.zIndex.order?(f=y,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(v,y){return h>=v.element.container.styles.zIndex.order?(m=y+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);T0(a,d,A?d:r,o)}else s.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),T0(a,e,r,o);pr(s.flags,8)&&HS(s,o)})},HS=function(t,e){for(var r=t instanceof C0?t.start:1,n=t instanceof C0?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof _S&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=Oc(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},HK=function(t){var e=new OS(t,null),r=new MS(e),n=[];return T0(e,r,r,n),HS(e.container,n),r},Ub=function(t,e){switch(e){case 0:return Rn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Rn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Rn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Rn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},VK=function(t,e){switch(e){case 0:return Rn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Rn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Rn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Rn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},KK=function(t,e){switch(e){case 0:return Rn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Rn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Rn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Rn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},GK=function(t,e){switch(e){case 0:return Bd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Bd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Bd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Bd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Bd=function(t,e){var r=[];return Qn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Qn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Rn=function(t,e,r,n){var s=[];return Qn(t)?s.push(t.subdivide(.5,!1)):s.push(t),Qn(r)?s.push(r.subdivide(.5,!0)):s.push(r),Qn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Qn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},VS=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},of=function(t){var e=t.styles,r=t.bounds,n=Dt(e.paddingLeft,r.width),s=Dt(e.paddingRight,r.width),A=Dt(e.paddingTop,r.width),i=Dt(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},zK=function(t,e){return t===0?e.bounds:t===2?of(e):VS(e)},$K=function(t,e){return t===0?e.bounds:t===2?of(e):VS(e)},Up=function(t,e,r){var n=zK(Fo(t.styles.backgroundOrigin,e),t),s=$K(Fo(t.styles.backgroundClip,e),t),A=WK(Fo(t.styles.backgroundSize,e),r,n),i=A[0],a=A[1],o=Rl(Fo(t.styles.backgroundPosition,e),n.width-i,n.height-a),c=qK(Fo(t.styles.backgroundRepeat,e),o,A,n,s),d=Math.round(n.left+o[0]),h=Math.round(n.top+o[1]);return[c,d,h,i,a]},Co=function(t){return St(t)&&t.value===ta.AUTO},Cd=function(t){return typeof t=="number"},WK=function(t,e,r){var n=e[0],s=e[1],A=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(hr(i)&&a&&hr(a))return[Dt(i,r.width),Dt(a,r.height)];var o=Cd(A);if(St(i)&&(i.value===ta.CONTAIN||i.value===ta.COVER)){if(Cd(A)){var c=r.width/r.height;return c<A!=(i.value===ta.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var d=Cd(n),h=Cd(s),f=d||h;if(Co(i)&&(!a||Co(a))){if(d&&h)return[n,s];if(!o&&!f)return[r.width,r.height];if(f&&o){var m=d?n:s*A,v=h?s:n/A;return[m,v]}var y=d?n:r.width,I=h?s:r.height;return[y,I]}if(o){var C=0,w=0;return hr(i)?C=Dt(i,r.width):hr(a)&&(w=Dt(a,r.height)),Co(i)?C=w*A:(!a||Co(a))&&(w=C/A),[C,w]}var B=null,S=null;if(hr(i)?B=Dt(i,r.width):a&&hr(a)&&(S=Dt(a,r.height)),B!==null&&(!a||Co(a))&&(S=d&&h?B/n*s:r.height),S!==null&&Co(i)&&(B=d&&h?S/s*n:r.width),B!==null&&S!==null)return[B,S];throw new Error("Unable to calculate background-size for element")},Fo=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},qK=function(t,e,r,n,s){var A=e[0],i=e[1],a=r[0],o=r[1];switch(t){case 2:return[new Ue(Math.round(n.left),Math.round(n.top+i)),new Ue(Math.round(n.left+n.width),Math.round(n.top+i)),new Ue(Math.round(n.left+n.width),Math.round(o+n.top+i)),new Ue(Math.round(n.left),Math.round(o+n.top+i))];case 3:return[new Ue(Math.round(n.left+A),Math.round(n.top)),new Ue(Math.round(n.left+A+a),Math.round(n.top)),new Ue(Math.round(n.left+A+a),Math.round(n.height+n.top)),new Ue(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new Ue(Math.round(n.left+A),Math.round(n.top+i)),new Ue(Math.round(n.left+A+a),Math.round(n.top+i)),new Ue(Math.round(n.left+A+a),Math.round(n.top+i+o)),new Ue(Math.round(n.left+A),Math.round(n.top+i+o))];default:return[new Ue(Math.round(s.left),Math.round(s.top)),new Ue(Math.round(s.left+s.width),Math.round(s.top)),new Ue(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ue(Math.round(s.left),Math.round(s.height+s.top))]}},JK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Qb="Hidden Text",XK=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=JK,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(Qb)),n.appendChild(A),n.appendChild(s);var a=s.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode(Qb)),n.style.lineHeight="normal",s.style.verticalAlign="super";var o=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),KS=function(){function t(e,r){this.context=e,this.options=r}return t}(),YK=1e4,ZK=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new XK(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),MK(r)&&(this.ctx.globalAlpha=r.opacity),jK(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),jS(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Yr(this,void 0,void 0,function(){var n;return Kr(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Yr(this,void 0,void 0,function(){return Kr(this,function(n){switch(n.label){case 0:if(pr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=Vy(r.text);i.reduce(function(a,o){return A.ctx.fillText(o,a,r.bounds.top+s),a+A.ctx.measureText(o).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=s6(r.fontFamily).join(", "),A=pu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(r,n){return Yr(this,void 0,void 0,function(){var s,A,i,a,o,c,d,h,f=this;return Kr(this,function(m){return s=this.createFontStyle(n),A=s[0],i=s[1],a=s[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),c=o.baseline,d=o.middle,h=n.paintOrder,r.textBounds.forEach(function(v){h.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=xr(n.color),f.renderTextWithLetterSpacing(v,n.letterSpacing,c);var I=n.textShadow;I.length&&v.text.trim().length&&(I.slice(0).reverse().forEach(function(C){f.ctx.shadowColor=xr(C.color),f.ctx.shadowOffsetX=C.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=C.offsetY.number*f.options.scale,f.ctx.shadowBlur=C.blur.number,f.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=xr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(C){switch(C){case 1:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:f.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+d),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(f.ctx.strokeStyle=xr(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=of(r),i=Af(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Yr(this,void 0,void 0,function(){var n,s,A,i,a,o,w,w,c,d,h,f,S,m,v,N,y,I,C,w,B,S,N;return Kr(this,function(Q){switch(Q.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,A=n.styles,i=0,a=n.textNodes,Q.label=1;case 1:return i<a.length?(o=a[i],[4,this.renderTextNode(o,A)]):[3,4];case 2:Q.sent(),Q.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof BS))return[3,8];Q.label=5;case 5:return Q.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=Q.sent(),this.renderReplacedElement(n,s,w),[3,8];case 7:return Q.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof CS&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof bS))return[3,12];Q.label=9;case 9:return Q.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=Q.sent(),this.renderReplacedElement(n,s,w),[3,12];case 11:return Q.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof TS&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=Q.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),Q.label=14;case 14:if(n instanceof Ky&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===ef?n.checked&&(this.ctx.save(),this.path([new Ue(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Ue(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Ue(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Ue(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Ue(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Ue(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Ue(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=xr(yb),this.ctx.fill(),this.ctx.restore()):n.type===tf&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=xr(yb),this.ctx.fill(),this.ctx.restore())),e6(n)&&n.value.length){switch(f=this.createFontStyle(A),S=f[0],m=f[1],v=this.fontMetrics.getMetrics(S,m).baseline,this.ctx.font=S,this.ctx.fillStyle=xr(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=r6(n.styles.textAlign),N=of(n),y=0,n.styles.textAlign){case 1:y+=N.width/2;break;case 2:y+=N.width;break}I=N.add(y,0,0,-N.height/2+1),this.ctx.save(),this.path([new Ue(N.left,N.top),new Ue(N.left+N.width,N.top),new Ue(N.left+N.width,N.top+N.height),new Ue(N.left,N.top+N.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new sc(n.value,I),A.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(C=n.styles.listStyleImage,C.type!==0)return[3,18];w=void 0,B=C.url,Q.label=15;case 15:return Q.trys.push([15,17,,18]),[4,this.context.cache.match(B)];case 16:return w=Q.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return Q.sent(),this.context.logger.error("Error loading list-style-image "+B),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(S=this.createFontStyle(A)[0],this.ctx.font=S,this.ctx.fillStyle=xr(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",N=new Ms(n.bounds.left,n.bounds.top+Dt(n.styles.paddingTop,n.bounds.width),n.bounds.width,rb(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new sc(r.listValue,N),A.letterSpacing,rb(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Q.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Yr(this,void 0,void 0,function(){var n,s,C,A,i,C,a,o,C,c,d,C,h,f,C,m,v,C,y,I,C;return Kr(this,function(w){switch(w.label){case 0:if(pr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,s=r.negativeZIndex,w.label=2;case 2:return n<s.length?(C=s[n],[4,this.renderStack(C)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),A=0,i=r.nonInlineLevel,w.label=7;case 7:return A<i.length?(C=i[A],[4,this.renderNode(C)]):[3,10];case 8:w.sent(),w.label=9;case 9:return A++,[3,7];case 10:a=0,o=r.nonPositionedFloats,w.label=11;case 11:return a<o.length?(C=o[a],[4,this.renderStack(C)]):[3,14];case 12:w.sent(),w.label=13;case 13:return a++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(C=d[c],[4,this.renderStack(C)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,w.label=19;case 19:return h<f.length?(C=f[h],[4,this.renderNode(C)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:m=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<v.length?(C=v[m],[4,this.renderStack(C)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:y=0,I=r.positiveZIndex,w.label=27;case 27:return y<I.length?(C=I[y],[4,this.renderStack(C)]):[3,30];case 28:w.sent(),w.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,A){var i=Qn(s)?s.start:s;A===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Qn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(r,n,s){var A;if(r.width===n&&r.height===s)return r;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,s);var o=a.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,s),a},e.prototype.renderBackgroundImage=function(r){return Yr(this,void 0,void 0,function(){var n,s,A,i,a,o;return Kr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,f,m,k,it,We,E,Me,b,v,k,it,We,E,Me,y,I,C,w,B,S,N,Q,x,b,_,k,R,P,E,Me,Ge,it,We,ae,xe,Re,X,Ee,Te,qe,ze;return Kr(this,function(Ye){switch(Ye.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ye.label=1;case 1:return Ye.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=Ye.sent(),[3,4];case 3:return Ye.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=Up(r,n,[h.width,h.height,h.width/h.height]),k=m[0],it=m[1],We=m[2],E=m[3],Me=m[4],b=A.ctx.createPattern(A.resizeImage(h,E,Me),"repeat"),A.renderRepeat(k,b,it,We)),[3,6];case 5:jV(d)?(v=Up(r,n,[null,null,null]),k=v[0],it=v[1],We=v[2],E=v[3],Me=v[4],y=NV(d.angle,E,Me),I=y[0],C=y[1],w=y[2],B=y[3],S=y[4],N=document.createElement("canvas"),N.width=E,N.height=Me,Q=N.getContext("2d"),x=Q.createLinearGradient(C,B,w,S),eb(d.stops,I).forEach(function(Ke){return x.addColorStop(Ke.stop,xr(Ke.color))}),Q.fillStyle=x,Q.fillRect(0,0,E,Me),E>0&&Me>0&&(b=A.ctx.createPattern(N,"repeat"),A.renderRepeat(k,b,it,We))):MV(d)&&(_=Up(r,n,[null,null,null]),k=_[0],R=_[1],P=_[2],E=_[3],Me=_[4],Ge=d.position.length===0?[My]:d.position,it=Dt(Ge[0],E),We=Dt(Ge[Ge.length-1],Me),ae=RV(d,it,We,E,Me),xe=ae[0],Re=ae[1],xe>0&&Re>0&&(X=A.ctx.createRadialGradient(R+it,P+We,0,R+it,P+We,xe),eb(d.stops,xe*2).forEach(function(Ke){return X.addColorStop(Ke.stop,xr(Ke.color))}),A.path(k),A.ctx.fillStyle=X,xe!==Re?(Ee=r.bounds.left+.5*r.bounds.width,Te=r.bounds.top+.5*r.bounds.height,qe=Re/xe,ze=1/qe,A.ctx.save(),A.ctx.translate(Ee,Te),A.ctx.transform(1,0,0,qe,0,0),A.ctx.translate(-Ee,-Te),A.ctx.fillRect(R,ze*(P-Te)+Te,E,Me*ze),A.ctx.restore()):A.ctx.fill())),Ye.label=6;case 6:return n--,[2]}})},A=this,i=0,a=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<a.length?(o=a[i],[5,s(o)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Yr(this,void 0,void 0,function(){return Kr(this,function(A){return this.path(Ub(s,n)),this.ctx.fillStyle=xr(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,A){return Yr(this,void 0,void 0,function(){var i,a;return Kr(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,A)]:[3,2];case 1:return o.sent(),[2];case 2:return i=VK(A,s),this.path(i),this.ctx.fillStyle=xr(r),this.ctx.fill(),a=KK(A,s),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Yr(this,void 0,void 0,function(){var n,s,A,i,a,o,c,d,h=this;return Kr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!MA(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=t6(Fo(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),MA(n.backgroundColor)||(this.ctx.fillStyle=xr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var v=sf(r.curves),y=m.inset?0:YK,I=OK(v,-y+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(v),h.ctx.clip(),h.mask(I)):(h.mask(v),h.ctx.clip(),h.path(I)),h.ctx.shadowOffsetX=m.offsetX.number+y,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=xr(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?xr(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:a=0,o=0,c=A,f.label=3;case 3:return o<c.length?(d=c[o],d.style!==0&&!MA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,a,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,a,r.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,A,i){return Yr(this,void 0,void 0,function(){var a,o,c,d,h,f,m,v,y,I,C,w,B,S,N,Q,N,Q;return Kr(this,function(x){return this.ctx.save(),a=GK(A,s),o=Ub(A,s),i===2&&(this.path(o),this.ctx.clip()),Qn(o[0])?(c=o[0].start.x,d=o[0].start.y):(c=o[0].x,d=o[0].y),Qn(o[1])?(h=o[1].end.x,f=o[1].end.y):(h=o[1].x,f=o[1].y),s===0||s===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(o.slice(0,2)),v=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(v=n,y=n),I=!0,m<=v*2?I=!1:m<=v*2+y?(C=m/(2*v+y),v*=C,y*=C):(w=Math.floor((m+y)/(v+y)),B=(m-w*v)/(w-1),S=(m-(w+1)*v)/w,y=S<=0||Math.abs(y-B)<Math.abs(y-S)?B:S),I&&(i===3?this.ctx.setLineDash([0,v+y]):this.ctx.setLineDash([v,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=xr(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Qn(o[0])&&(N=o[3],Q=o[0],this.ctx.beginPath(),this.formatPath([new Ue(N.end.x,N.end.y),new Ue(Q.start.x,Q.start.y)]),this.ctx.stroke()),Qn(o[1])&&(N=o[1],Q=o[2],this.ctx.beginPath(),this.formatPath([new Ue(N.end.x,N.end.y),new Ue(Q.start.x,Q.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Yr(this,void 0,void 0,function(){var n;return Kr(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=xr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=HK(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(KS),e6=function(t){return t instanceof ES||t instanceof IS?!0:t instanceof Ky&&t.type!==tf&&t.type!==ef},t6=function(t,e){switch(t){case 0:return sf(e);case 2:return DK(e);case 1:default:return Af(e)}},r6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},n6=["-apple-system","system-ui"],s6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return n6.indexOf(e)===-1}):t},A6=function(t){Xn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Yr(this,void 0,void 0,function(){var n,s;return Kr(this,function(A){switch(A.label){case 0:return n=B0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,i6(n)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=xr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(KS),i6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},o6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,td([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),a6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new o6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new TK(this,e)}return t.instanceCount=1,t}(),af=function(t,e){return e===void 0&&(e={}),l6(t,e)};typeof window<"u"&&LS.setContext(window);var l6=function(t,e){return Yr(void 0,void 0,void 0,function(){var r,n,s,A,i,a,o,c,d,h,f,m,v,y,I,C,w,B,S,N,x,Q,x,b,_,k,R,P,E,Me,Ge,it,We,ae,xe,Re,X,Ee,Te,qe;return Kr(this,function(ze){switch(ze.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(b=e.allowTaint)!==null&&b!==void 0?b:!1,imageTimeout:(_=e.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},A=o0({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(E=e.windowHeight)!==null&&E!==void 0?E:n.innerHeight,scrollX:(Me=e.scrollX)!==null&&Me!==void 0?Me:n.pageXOffset,scrollY:(Ge=e.scrollY)!==null&&Ge!==void 0?Ge:n.pageYOffset},a=new Ms(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),o=new a6(A,a),c=(it=e.foreignObjectRendering)!==null&&it!==void 0?it:!1,d={allowTaint:(We=e.allowTaint)!==null&&We!==void 0?We:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},o.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new Tb(o,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=ze.sent(),v=Gy(f)||uK(f)?OO(f.ownerDocument):Ag(o,f),y=v.width,I=v.height,C=v.left,w=v.top,B=c6(o,f,e.backgroundColor),S={canvas:e.canvas,backgroundColor:B,scale:(xe=(ae=e.scale)!==null&&ae!==void 0?ae:n.devicePixelRatio)!==null&&xe!==void 0?xe:1,x:((Re=e.x)!==null&&Re!==void 0?Re:0)+C,y:((X=e.y)!==null&&X!==void 0?X:0)+w,width:(Ee=e.width)!==null&&Ee!==void 0?Ee:Math.ceil(y),height:(Te=e.height)!==null&&Te!==void 0?Te:Math.ceil(I)},c?(o.logger.debug("Document cloned, using foreign object rendering"),x=new A6(o,S),[4,x.render(f)]):[3,3];case 2:return N=ze.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+C+","+w+" with size "+y+"x"+I+" using computed rendering"),o.logger.debug("Starting DOM parsing"),Q=SS(o,f),B===Q.styles.backgroundColor&&(Q.styles.backgroundColor=Us.TRANSPARENT),o.logger.debug("Starting renderer for element at "+S.x+","+S.y+" with size "+S.width+"x"+S.height),x=new ZK(o,S),[4,x.render(Q)];case 4:N=ze.sent(),ze.label=5;case 5:return(!((qe=e.removeContainer)!==null&&qe!==void 0)||qe)&&(Tb.destroy(m)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,N]}})})},c6=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?rc(t,getComputedStyle(n.documentElement).backgroundColor):Us.TRANSPARENT,A=n.body?rc(t,getComputedStyle(n.body).backgroundColor):Us.TRANSPARENT,i=typeof r=="string"?rc(t,r):r===null?Us.TRANSPARENT:4294967295;return e===n.documentElement?MA(s)?MA(A)?i:A:s:i};const u6=()=>{var re,we,ne,be;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=hs(),[i,a]=U.useState("teachers"),[o,c]=U.useState(!1),[d,h]=U.useState(null),[f,m]=U.useState({}),[v,y]=U.useState({}),[I,C]=U.useState({}),[w,B]=U.useState({}),[S,N]=U.useState("preset_normal"),[Q,x]=U.useState([]),[b,_]=U.useState(!1),[k,R]=U.useState(""),P=U.useRef(null),[E,Me]=U.useState(null);U.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const L=s.bellPresets.find(O=>O.id===S);if(L){x(L.bells);return}}x(Fh)},[S,s.bellPresets]);const Ge=L=>{h(L||null),i==="teachers"?m(L?e.find(O=>O.id===L)??{}:{subjectIds:[],unavailableDates:[],shifts:[ie.First,ie.Second],telegramChatId:""}):i==="subjects"?y(L?t.find(O=>O.id===L)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?C(L?r.find(O=>O.id===L)??{}:{shift:ie.First,studentsCount:25}):i==="rooms"&&B(L?n.find(O=>O.id===L)??{}:{capacity:30,type:""}),c(!0)},it=async()=>{const L=()=>Math.random().toString(36).substr(2,9),O={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:v,key:"subjects"},classes:{list:r,form:I,key:"classes"},rooms:{list:n,form:w,key:"rooms"}};if(i==="bells"||!(i in O))return;const z=O[i],{list:me,form:$e,key:Z}=z;if(!$e.name)return;let Y=[...me];if(d)Y=Y.map(se=>se.id===d?{...se,...$e}:se);else{const se=me.reduce((nt,ce)=>Math.max(nt,ce.order||0),0);Y.push({...$e,id:L(),order:se+1})}await A({[Z]:Y}),c(!1)},We=async L=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(O=>O.id!==L)});break;case"subjects":await A({subjects:t.filter(O=>O.id!==L)});break;case"classes":await A({classes:r.filter(O=>O.id!==L)});break;case"rooms":await A({rooms:n.filter(O=>O.id!==L)});break}},ae=(L,O)=>{Me(O),L.dataTransfer.effectAllowed="move"},xe=L=>{L.preventDefault()},Re=async(L,O)=>{if(E===null||E===O)return;const z=me=>{const $e=[...me],[Z]=$e.splice(E,1);return $e.splice(O,0,Z),$e.map((Y,se)=>({...Y,order:se}))};switch(i){case"teachers":{await A({teachers:z(e)});break}case"subjects":{await A({subjects:z(t)});break}case"classes":{await A({classes:z(r)});break}case"rooms":{await A({rooms:z(n)});break}}Me(null)},X=(L,O,z,me)=>{const $e=[...Q],Z=$e.findIndex(Y=>Y.shift===L&&Y.period===O&&Y.day==="default");Z>=0?$e[Z]={...$e[Z],[z]:me}:$e.push({shift:L,period:O,[z]:me,start:"00:00",end:"00:00",day:"default"}),x($e)},Ee=(L,O)=>{const z=[...Q],me=z.findIndex($e=>$e.shift===L&&$e.period===O&&$e.day==="default");me>=0?z[me]={...z[me],cancelled:!z[me].cancelled}:z.push({shift:L,period:O,start:"00:00",end:"00:00",day:"default",cancelled:!0}),x(z)},Te=async()=>{let L=[...s.bellPresets||[]];const O=L.findIndex(z=>z.id===S);O>=0?L[O]={...L[O],bells:Q}:L.push({id:S,name:k||" ",bells:Q}),await A({settings:{...s,bellPresets:L}}),alert(" !")},qe=()=>{R(""),_(!0)},ze=async()=>{if(!k)return;const L=`preset_${Math.random().toString(36).substr(2,9)}`,O=[...s.bellPresets||[]];O.push({id:L,name:k,bells:JSON.parse(JSON.stringify(Q))}),await A({settings:{...s,bellPresets:O}}),N(L),_(!1)},Ye=async()=>{if(S==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const L=(s.bellPresets||[]).filter(O=>O.id!==S);await A({settings:{...s,bellPresets:L}}),N("preset_normal")},Ke=async()=>{var L,O;window.confirm(`   "${(O=(L=s.bellPresets)==null?void 0:L.find(z=>z.id===S))==null?void 0:O.name}"   ?`)&&(await A({bellSchedule:Q}),alert("  !"))},Tt=async()=>{var z,me;if(!P.current)return;const L=await af(P.current,{scale:2,backgroundColor:"#ffffff"}),O=document.createElement("a");O.href=L.toDataURL("image/png"),O.download=`_${(me=(z=s.bellPresets)==null?void 0:z.find($e=>$e.id===S))==null?void 0:me.name}.png`,document.body.appendChild(O),O.click(),document.body.removeChild(O)},Oe=L=>{const O=f.shifts||[];O.includes(L)?m({...f,shifts:O.filter(z=>z!==L)}):m({...f,shifts:[...O,L]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(L=>l.jsxs("button",{onClick:()=>a(L.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===L.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(K,{name:L.icon,size:18})," ",L.label]},L.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>Ge(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(K,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(ed,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((L,O)=>l.jsxs("div",{draggable:!0,onDragStart:z=>ae(z,O),onDragOver:xe,onDrop:z=>Re(z,O),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(K,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:L.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ge(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(K,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>We(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(K,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:L.birthDate?`: ${new Date(L.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[L.shifts.includes(ie.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),L.shifts.includes(ie.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:L.subjectIds.map(z=>{const me=t.find($e=>$e.id===z);return me?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:me.color,color:"#334155"},children:me.name},z):null})})]},L.id))}),i==="subjects"&&l.jsx(ed,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((L,O)=>l.jsxs("div",{draggable:!0,onDragStart:z=>ae(z,O),onDragOver:xe,onDrop:z=>Re(z,O),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:L.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(K,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",L.difficulty,"  ",L.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ge(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>We(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(K,{name:"Trash2",size:16})})]})]},L.id))}),i==="classes"&&l.jsx(ed,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((L,O)=>l.jsxs("div",{draggable:!0,onDragStart:z=>ae(z,O),onDragOver:xe,onDrop:z=>Re(z,O),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(K,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[L.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${L.shift===ie.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[L.shift===ie.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ge(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>We(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(K,{name:"Trash2",size:14})})]})]},L.id))}),i==="rooms"&&l.jsx(ed,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((L,O)=>l.jsxs("div",{draggable:!0,onDragStart:z=>ae(z,O),onDragOver:xe,onDrop:z=>Re(z,O),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(K,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(K,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",L.capacity,"  ",L.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ge(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>We(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(K,{name:"Trash2",size:16})})]})]},L.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-wrap items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:S,onChange:L=>N(L.target.value),className:"appearance-none bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500 cursor-pointer",children:(s.bellPresets||[]).map(L=>l.jsx("option",{value:L.id,children:L.name},L.id))}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:l.jsx(K,{name:"Filter",size:14})})]}),l.jsx("button",{onClick:qe,className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition",title:"  ",children:l.jsx(K,{name:"Plus",size:18})}),l.jsx("button",{onClick:Ye,className:"p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",title:" ",children:l.jsx(K,{name:"Trash2",size:18})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:Te,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Save",size:18}),"  "]}),l.jsxs("button",{onClick:Ke,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(K,{name:"CheckCircle",size:18}),"  "]}),l.jsxs("button",{onClick:Tt,className:"px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Image",size:18})," PNG"]})]})]}),l.jsxs("div",{ref:P,className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 text-slate-900",children:[l.jsxs("h3",{className:"text-2xl font-black text-center mb-6 uppercase text-slate-800",children:[" : ",(we=(re=s.bellPresets)==null?void 0:re.find(L=>L.id===S))==null?void 0:we.name]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ie.First,ie.Second].map(L=>l.jsxs("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white text-center ${L===ie.First?"bg-indigo-600":"bg-purple-600"}`,children:L}),l.jsx("div",{className:"p-4 space-y-2 bg-white",children:yn[L].map(O=>{const z=Q.find(me=>me.shift===L&&me.period===O&&me.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-lg border ${z.cancelled?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded bg-white flex items-center justify-center font-black text-slate-500 shadow-sm border border-slate-200",children:O}),z.cancelled?l.jsx("div",{className:"flex-1 flex justify-center items-center",children:l.jsx("span",{className:"text-red-500 font-bold uppercase tracking-wider text-sm",children:" "})}):l.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[l.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:z.start,onChange:me=>X(L,O,"start",me.target.value)}),l.jsx("span",{className:"text-slate-400 font-bold",children:""}),l.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:z.end,onChange:me=>X(L,O,"end",me.target.value)})]}),l.jsx("button",{onClick:()=>Ee(L,O),className:`w-8 h-8 rounded flex items-center justify-center transition-colors ${z.cancelled?"bg-white text-emerald-500 hover:text-emerald-700":"text-slate-400 hover:text-red-500 hover:bg-red-50"}`,title:z.cancelled?" ":" ","data-html2canvas-ignore":"true",children:l.jsx(K,{name:z.cancelled?"RotateCcw":"X",size:16})})]},O)})})]},L))}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 flex justify-between items-end text-sm font-bold text-slate-500",children:[l.jsxs("div",{children:["",l.jsx("br",{})," "]}),l.jsx("div",{children:"____________"})]})]})]})]}),l.jsx(Pn,{isOpen:o,onClose:()=>c(!1),title:d?"":"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:L=>m({...f,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:L=>m({...f,birthDate:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:L=>m({...f,telegramChatId:L.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(ne=f.shifts)==null?void 0:ne.includes(ie.First),onChange:()=>Oe(ie.First)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(be=f.shifts)==null?void 0:be.includes(ie.Second),onChange:()=>Oe(ie.Second)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(L=>{var O;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(O=f.subjectIds)==null?void 0:O.includes(L.id),onChange:z=>{const me=f.subjectIds||[];m({...f,subjectIds:z.target.checked?[...me,L.id]:me.filter($e=>$e!==L.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:L.name})]},L.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:v.name||"",onChange:L=>y({...v,name:L.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:v.color||"#ffffff",onChange:L=>y({...v,color:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.difficulty||5,onChange:L=>y({...v,difficulty:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.requiredRoomType,onChange:L=>y({...v,requiredRoomType:L.target.value}),children:Hx.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:I.name||"",onChange:L=>C({...I,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.studentsCount||25,onChange:L=>C({...I,studentsCount:parseInt(L.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>C({...I,shift:ie.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===ie.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>C({...I,shift:ie.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===ie.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:w.name||"",onChange:L=>B({...w,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.capacity||30,onChange:L=>B({...w,capacity:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.type,onChange:L=>B({...w,type:L.target.value}),children:Hx.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:it,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),l.jsx(Pn,{isOpen:b,onClose:()=>_(!1),title:"  ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:k,onChange:L=>R(L.target.value),autoFocus:!0})]}),l.jsx("div",{className:"flex justify-end pt-2",children:l.jsx("button",{onClick:ze,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})})]})},d6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=hs(),{schedule1:i,schedule2:a,substitutions:o,saveScheduleData:c}=ao(),d=ni(),[h,f]=U.useState(new Date().toISOString().split("T")[0]),[m,v]=U.useState(!1),[y,I]=U.useState(null),[C,w]=U.useState(!1),[B,S]=U.useState(!1),[N,Q]=U.useState(null),[x,b]=U.useState(""),[_,k]=U.useState(!1),[R,P]=U.useState(""),[E,Me]=U.useState(""),[Ge,it]=U.useState("all"),[We,ae]=U.useState(""),[xe,Re]=U.useState(""),[X,Ee]=U.useState(""),[Te,qe]=U.useState(""),[ze,Ye]=U.useState([]),[Ke,Tt]=U.useState(!1),[Oe,re]=U.useState(!1),[we,ne]=U.useState(!1),be=MF({maxWidth:767}),[L,O]=U.useState("lessons"),z=U.useMemo(()=>{const D=new Date(h).getMonth();return D>=0&&D<=4?a:i},[h,i,a]);U.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(I(d.state.subParams),Ee(""),qe(""),Ye([]),Tt(!1),re(!1),ne(!1),v(!0),window.history.replaceState({},document.title))},[d.state]),U.useEffect(()=>{if(m&&y){const D=o.find(q=>q.scheduleItemId===y.scheduleItemId&&q.date===h);Ye(D?D.refusals||[]:[]),Tt(!1),re(!1),ne(!1)}},[m,y,o,h]);const me=U.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:bt[D-1]},[h]),$e=U.useMemo(()=>e.filter(D=>{const q=D.name.toLowerCase().includes(E.toLowerCase()),$=Ge==="all"?!0:D.shifts.includes(Ge);return q&&$}),[e,E,Ge]),Z=U.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),Y=U.useMemo(()=>{if(!me)return[];const D=Z.map(de=>de.id),q=z.filter(de=>de.day===me&&D.includes(de.teacherId)),H=o.filter(de=>de.date===h).map(de=>de.scheduleItemId),Se=z.filter(de=>H.includes(de.id)),Fe=[...q];return Se.forEach(de=>{Fe.find(F=>F.id===de.id)||Fe.push(de)}),Fe.sort((de,F)=>de.period-F.period)},[z,me,Z,o,h]),se=D=>{var $;const q=e.find(H=>H.id===D);Q(D),b((($=q==null?void 0:q.absenceReasons)==null?void 0:$[h])||""),w(!0)},nt=U.useCallback(async()=>{let D=[...e];const q=D.findIndex(H=>H.id===N);if(q===-1)return;const $={...D[q]};$.unavailableDates.includes(h)||($.unavailableDates=[...$.unavailableDates,h]),$.absenceReasons||($.absenceReasons={}),$.absenceReasons[h]=x,D[q]=$,await A({teachers:D}),w(!1)},[e,N,h,x,A]),ce=U.useCallback(async D=>{let q=[...e];const $=q.findIndex(Se=>Se.id===D);if($===-1)return;const H={...q[$]};H.unavailableDates=H.unavailableDates.filter(Se=>Se!==h),H.absenceReasons&&delete H.absenceReasons[h],q[$]=H,await A({teachers:q})},[e,h,A]),_e=U.useCallback(async(D,q=!1)=>{if(!y){alert(":   .    .");return}const $=[...o],H=z.find(de=>de.id===y.scheduleItemId);if(!H){alert(":     .");return}const Se=$.filter(de=>!(de.scheduleItemId===y.scheduleItemId&&de.date===h)),Fe={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:y.scheduleItemId,originalTeacherId:H.teacherId,replacementTeacherId:D,replacementRoomId:X||void 0,isMerger:q,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&Te?Te:void 0,refusals:ze};Se.push(Fe),await c({substitutions:Se}),v(!1),ae(""),Ee(""),qe(""),Ye([]),I(null)},[y,h,X,z,o,e,Te,ze,c]),Be=U.useCallback(async D=>{if(!y||!me)return;const q=z.filter(H=>H.classId===D&&H.day===me&&H.period===y.period&&H.shift===y.shift);if(q.length===0){alert("    .");return}const $=o.filter(H=>!(H.scheduleItemId===y.scheduleItemId&&H.date===h));q.forEach(H=>{const Se={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:y.scheduleItemId,originalTeacherId:y.teacherId,replacementTeacherId:H.teacherId,replacementClassId:H.classId,replacementSubjectId:H.subjectId,isMerger:!0,replacementRoomId:H.roomId,lessonAbsenceReason:Te||void 0};$.push(Se)}),await c({substitutions:$}),v(!1),ae(""),Ee(""),qe(""),I(null),re(!1)},[y,h,me,z,o,Te,c]),ue=U.useCallback(async D=>{if(!y)return;const q=z.find(Ae=>Ae.id===y.scheduleItemId),$=z.find(Ae=>Ae.id===D);if(!q||!$){alert(":     .");return}const H=[...o];let Se;X?Se=X:Se=we?q.roomId:$.roomId;const Fe=we?$.roomId:q.roomId,de=H.findIndex(Ae=>Ae.scheduleItemId===q.id&&Ae.date===h),F={id:de>=0?H[de].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:q.id,originalTeacherId:q.teacherId,replacementTeacherId:q.teacherId,replacementClassId:$.classId,replacementSubjectId:$.subjectId,replacementRoomId:Se!==q.roomId?Se:void 0};de>=0?H[de]=F:H.push(F);const V=H.findIndex(Ae=>Ae.scheduleItemId===$.id&&Ae.date===h),ee={id:V>=0?H[V].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:$.id,originalTeacherId:$.teacherId,replacementTeacherId:$.teacherId,replacementClassId:q.classId,replacementSubjectId:q.subjectId,replacementRoomId:Fe!==$.roomId?Fe:void 0};V>=0?H[V]=ee:H.push(ee),await c({substitutions:H}),v(!1),I(null),Ee(""),Tt(!1),ne(!1)},[y,z,o,h,c,X,we]),ge=U.useCallback(async D=>{const q=o.filter($=>!($.scheduleItemId===D&&$.date===h));await c({substitutions:q})},[o,h,c]),Qe=U.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const q=o.some(H=>H.date===h&&H.replacementTeacherId!=="conducted"),$=(H,Se)=>{const de=Y.filter(F=>F.shift===Se).filter(F=>{const V=o.filter(ee=>ee.scheduleItemId===F.id&&ee.date===h);return V.length>0&&V.some(ee=>ee.replacementTeacherId!=="conducted")});de.length>0&&(D+=`
 *${H.toUpperCase()}*
`,de.forEach(F=>{var Ae;const V=o.filter(te=>te.scheduleItemId===F.id&&te.date===h);if(V.some(te=>te.isMerger)){const te=r.find(Ft=>Ft.id===F.classId),J=t.find(Ft=>Ft.id===F.subjectId),Ie=e.find(Ft=>Ft.id===F.teacherId),Xe=(Ie==null?void 0:Ie.name)||"?",st=V.map(Ft=>{var _t;return(_t=e.find(Xr=>Xr.id===Ft.replacementTeacherId))==null?void 0:_t.name}).filter(Boolean).join(", "),At=V[0],Je=At!=null&&At.replacementClassId?r.find(Ft=>Ft.id===At.replacementClassId):null;let kt=` ${te==null?void 0:te.name} (${F.period} ): ${J==null?void 0:J.name} -> ${st} (${Je?`  ${Je.name}`:""}) ( ${Xe})`;const Bt=At==null?void 0:At.replacementRoomId;if(Bt){const Ft=((Ae=n.find(_t=>_t.id===Bt))==null?void 0:Ae.name)||Bt;kt+=`  . ${Ft}`}D+=kt+`
`}else V.forEach(te=>{var qs,nn,Js;if(te.replacementTeacherId==="conducted")return;const J=r.find(Xt=>Xt.id===F.classId),Ie=t.find(Xt=>Xt.id===F.subjectId),Xe=e.find(Xt=>Xt.id===te.replacementTeacherId),st=e.find(Xt=>Xt.id===F.teacherId),At=((qs=n.find(Xt=>Xt.id===F.roomId))==null?void 0:qs.name)||F.roomId||"?",Je=(nn=st==null?void 0:st.absenceReasons)==null?void 0:nn[h],kt=te==null?void 0:te.lessonAbsenceReason,_t=(kt===" "?kt:null)||(Je===" "?Je:null),Xr=(st==null?void 0:st.name)+(_t?` (${_t})`:""),ir=te!=null&&te.replacementRoomId?((Js=n.find(Xt=>Xt.id===te.replacementRoomId))==null?void 0:Js.name)||te.replacementRoomId:null,Lr=te!=null&&te.replacementClassId?r.find(Xt=>Xt.id===te.replacementClassId):null,Tn=te!=null&&te.replacementSubjectId?t.find(Xt=>Xt.id===te.replacementSubjectId):null,Yn=Lr&&Tn&&!te.isMerger;if(te.replacementTeacherId==="cancelled")D+=` ${J==null?void 0:J.name} (${F.period} ): ${Ie==null?void 0:Ie.name} (${Xr}) ->  
`;else if(te.replacementTeacherId===te.originalTeacherId&&ir&&!Lr)D+=` ${J==null?void 0:J.name} (${F.period} ): ${Ie==null?void 0:Ie.name} (${st==null?void 0:st.name}) ->  ${At}  ${ir}
`;else if(Yn)D+=` ${J==null?void 0:J.name} (${F.period} ): ${Ie==null?void 0:Ie.name} ->  ${Lr==null?void 0:Lr.name} ${Tn==null?void 0:Tn.name} ( )${ir?`  . ${ir}`:""}
`;else{let Xt=` ${J==null?void 0:J.name} (${F.period} ): ${Ie==null?void 0:Ie.name} -> ${Xe==null?void 0:Xe.name} ( ${Xr})`;ir&&(Xt+=`  . ${ir}`),D+=Xt+`
`}})}),D+=`
`)};q?($(ie.First,ie.First),$(ie.Second,ie.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,o,Y,r,t,e,n]),je=U.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(Fe=>Fe.date===h).forEach(Fe=>{var Je;const de=z.find(kt=>kt.id===Fe.scheduleItemId);if(!de)return;let F="Unknown";if(Fe.replacementTeacherId==="cancelled")F=" ";else if(Fe.replacementTeacherId==="conducted")F=" ";else{const kt=e.find(Bt=>Bt.id===Fe.replacementTeacherId);kt&&(F=kt.name)}const V=t.find(kt=>kt.id===de.subjectId),ee=r.find(kt=>kt.id===de.classId),Ae=Fe.date.replace(/-/g,""),te=e.find(kt=>kt.id===Fe.originalTeacherId),J=(Je=te==null?void 0:te.absenceReasons)==null?void 0:Je[h],Ie=Fe.lessonAbsenceReason,At=(Ie===" "?Ie:null)||(J===" "?J:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${Ae}
SUMMARY:: ${ee==null?void 0:ee.name} - ${V==null?void 0:V.name}
DESCRIPTION:: ${F}${Fe.isMerger?" ()":""}${At?` (: ${At})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const $=new Blob([D],{type:"text/calendar"}),H=URL.createObjectURL($),Se=document.createElement("a");Se.href=H,Se.download="substitutions.ics",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)},[h,o,z,e,t,r]),fe=U.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,q=!1;const $=new Set,H=[ie.First,ie.Second];for(const Fe of H){const F=Y.filter(V=>V.shift===Fe).filter(V=>o.some(ee=>ee.scheduleItemId===V.id&&ee.date===h&&ee.replacementTeacherId!=="conducted"));F.length>0&&(q=!0,D+=` *${Fe.toUpperCase()}*
`,F.forEach(V=>{var te;const ee=o.filter(J=>J.scheduleItemId===V.id&&J.date===h);if(ee.some(J=>J.isMerger)){const J=r.find(Bt=>Bt.id===V.classId),Ie=t.find(Bt=>Bt.id===V.subjectId),Xe=e.find(Bt=>Bt.id===V.teacherId),st=ee.map(Bt=>{var Ft;return(Ft=e.find(_t=>_t.id===Bt.replacementTeacherId))==null?void 0:Ft.name}).filter(Boolean).join(", "),At=ee[0],Je=At!=null&&At.replacementClassId?r.find(Bt=>Bt.id===At.replacementClassId):null;Xe!=null&&Xe.telegramChatId&&$.add(Xe.telegramChatId),ee.forEach(Bt=>{const Ft=e.find(_t=>_t.id===Bt.replacementTeacherId);Ft!=null&&Ft.telegramChatId&&$.add(Ft.telegramChatId)});const kt=At!=null&&At.replacementRoomId?((te=n.find(Bt=>Bt.id===At.replacementRoomId))==null?void 0:te.name)||At.replacementRoomId:"";D+=`${V.period}  (${J==null?void 0:J.name} ${Ie==null?void 0:Ie.name}): *${st}* (${Je?`  ${Je.name}`:""}). : ${kt}
`}else ee.forEach(J=>{var Js,Xt,di;if(!J)return;const Ie=r.find(vr=>vr.id===V.classId),Xe=t.find(vr=>vr.id===V.subjectId),st=e.find(vr=>vr.id===J.originalTeacherId),At=e.find(vr=>vr.id===J.replacementTeacherId),Je=(Js=st==null?void 0:st.absenceReasons)==null?void 0:Js[h],kt=J.lessonAbsenceReason,_t=(kt===" "?kt:null)||(Je===" "?Je:null),Xr=(st==null?void 0:st.name)+(_t?` (${_t})`:""),ir=((Xt=n.find(vr=>vr.id===V.roomId))==null?void 0:Xt.name)||V.roomId||"",Lr=J.replacementRoomId?((di=n.find(vr=>vr.id===J.replacementRoomId))==null?void 0:di.name)||J.replacementRoomId:ir,Tn=J.replacementClassId?r.find(vr=>vr.id===J.replacementClassId):null,Yn=J.replacementSubjectId?t.find(vr=>vr.id===J.replacementSubjectId):null,qs=Tn&&Yn&&!J.isMerger;let nn=`${V.period}  (${Ie==null?void 0:Ie.name} ${Xe==null?void 0:Xe.name}${V.direction?` ${V.direction}`:""}): `;J.replacementTeacherId==="cancelled"?nn+=`* * ( ${Xr})`:qs?(nn+=`  : ${Tn==null?void 0:Tn.name} ${Yn==null?void 0:Yn.name} ( ${Ie==null?void 0:Ie.name} ${Xe==null?void 0:Xe.name})`,Lr!==ir&&(nn+=`  . ${Lr}`)):J.replacementTeacherId===J.originalTeacherId?nn+=`: ${Xr}.  : ${ir}  ${Lr}`:(nn+=`*${At==null?void 0:At.name}* ( *${Xr}*)`,ir!==Lr?nn+=`. : ${ir}  ${Lr}`:Lr!==""&&(nn+=`. : ${Lr}`)),D+=`${nn}
`,st!=null&&st.telegramChatId&&$.add(st.telegramChatId),At!=null&&At.telegramChatId&&$.add(At.telegramChatId)})}),D+=`
`)}if(q||(D+=` .
`),Z.forEach(Fe=>{var ee;const de=o.some(Ae=>Ae.date===h&&Ae.originalTeacherId===Fe.id&&Ae.replacementTeacherId!=="cancelled"&&Ae.replacementTeacherId!=="conducted"),F=(ee=Fe.absenceReasons)==null?void 0:ee[h],V=F===" "?F:"";Fe.telegramChatId&&!de&&Fe.unavailableDates.includes(h)&&($.add(Fe.telegramChatId),q?D+=`_:  ${Fe.name} ${V},        /._
`:D+=`_:  ${Fe.name} ${V},      ._
`)}),$.size===0){alert("    Telegram Chat ID   .");return}const Se=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const Fe=Array.from($).map(de=>fetch(Se,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:de,text:D,parse_mode:"Markdown"})}));await Promise.all(Fe),alert(`   ${$.size} !`)}catch(Fe){console.error("    Telegram:",Fe),alert("     Telegram.     .")}},[h,Y,o,r,t,e,n,Z,s==null?void 0:s.telegramToken]),lt=U.useCallback(async(D,q,$,H,Se,Fe)=>{const F=new Date(Fe).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),V=q.shift===ie.First?"1 ":"2 ",ee=` *  *
${D.name}

 : ${F}
 : ${V}
 : ${$==null?void 0:$.name}
1 : ${q.period}
 : ${H==null?void 0:H.name}
 : ${Se||" "}`;if(s!=null&&s.telegramToken&&D.telegramChatId)try{const te=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:ee,parse_mode:"Markdown"})})).json();te.ok?alert(`   Telegram  ${D.name}!`):te.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${te.description}`)}catch(Ae){alert("   Telegram (/)."),console.error(Ae)}else navigator.share?navigator.share({title:"",text:ee}).catch(()=>{}):(navigator.clipboard.writeText(ee),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),Ze=U.useMemo(()=>y?new Set(o.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const q=z.find($=>$.id===D.scheduleItemId);return q&&q.period===y.period&&q.shift===y.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[o,z,h,y]),at=U.useMemo(()=>{if(!y||!me)return[];const D=h.substring(0,7);return e.filter(q=>q.name.toLowerCase().includes(We.toLowerCase())).map(q=>{const $=q.unavailableDates.includes(h),H=z.some(ee=>ee.teacherId===q.id&&ee.day===me&&ee.period===y.period&&ee.shift===y.shift),Se=Ze.has(q.id),Fe=H||Se,de=q.subjectIds.includes(y.subjectId),F=o.filter(ee=>ee.replacementTeacherId===q.id&&ee.date.startsWith(D)).length;let V=0;return $&&(V-=1e3),Fe&&(V-=100),de&&(V+=50),{teacher:q,isAbsent:$,isBusy:Fe,isSpecialist:de,score:V,subsCount:F}}).sort((q,$)=>$.score-q.score)},[e,y,h,We,me,z,o,Ze]),Le=U.useMemo(()=>{if(!y||!me)return[];const D=z.filter($=>$.day===me&&$.period===y.period&&$.shift===y.shift&&$.classId!==y.classId),q=new Map;return D.forEach($=>{const H=r.find(de=>de.id===$.classId),Se=e.find(de=>de.id===$.teacherId),Fe=t.find(de=>de.id===$.subjectId);if(H&&Se){q.has(H.id)||q.set(H.id,{classEntity:H,teachers:[],subjects:[]});const de=q.get(H.id);de.teachers.includes(Se.name)||de.teachers.push(Se.name),Fe&&!de.subjects.includes(Fe.name)&&de.subjects.push(Fe.name)}}),Array.from(q.values())},[z,y,me,r,e,t]),pe=U.useMemo(()=>{var Fe;if(!y)return null;const D=z.find(de=>de.id===y.scheduleItemId);if(!D)return null;const q=r.find(de=>de.id===D.classId),$=t.find(de=>de.id===D.subjectId),H=e.find(de=>de.id===D.teacherId),Se=((Fe=H==null?void 0:H.unavailableDates)==null?void 0:Fe.includes(h))||!1;return{className:q==null?void 0:q.name,subjectName:$==null?void 0:$.name,teacherName:H==null?void 0:H.name,teacherId:H==null?void 0:H.id,period:D.period,roomId:D.roomId,isTeacherAbsent:Se}},[y,z,r,t,e,h]),He=U.useMemo(()=>!(pe!=null&&pe.teacherId)||!me?[]:z.filter(D=>D.teacherId===pe.teacherId&&D.day===me&&D.id!==(y==null?void 0:y.scheduleItemId)).sort((D,q)=>D.period-q.period),[z,pe,me,y]),et=U.useMemo(()=>{if(!me||xe.length<2)return[];const D=xe.toLowerCase(),q=e.filter(Se=>Se.name.toLowerCase().includes(D)),$=r.filter(Se=>Se.name.toLowerCase().includes(D)),H=[];return q.forEach(Se=>{z.filter(de=>de.teacherId===Se.id&&de.day===me).forEach(de=>{const F=r.find(ee=>ee.id===de.classId),V=t.find(ee=>ee.id===de.subjectId);H.push({...de,entityName:Se.name,subInfo:F==null?void 0:F.name,subjectName:V==null?void 0:V.name})})}),$.forEach(Se=>{z.filter(de=>de.classId===Se.id&&de.day===me).forEach(de=>{if(H.find(ee=>ee.id===de.id))return;const F=e.find(ee=>ee.id===de.teacherId),V=t.find(ee=>ee.id===de.subjectId);H.push({...de,entityName:Se.name,subInfo:F==null?void 0:F.name,subjectName:V==null?void 0:V.name})})}),H.sort((Se,Fe)=>Se.period-Fe.period)},[xe,me,e,r,z,t]),vt=(D,q)=>{let $=!1;if(q){if(!window.confirm("     .     ?"))return;$=!0}_e(D,$)},wt=(D,q)=>{q.stopPropagation(),ze.includes(D)?Ye(ze.filter($=>$!==D)):Ye([...ze,D])};return l.jsxs("div",{className:"h-full flex flex-col gap-6",children:[l.jsx("div",{className:"flex flex-col gap-4",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]})]}),l.jsxs("div",{className:"flex md:hidden bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-full",children:[l.jsxs("button",{onClick:()=>O("lessons"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${L==="lessons"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:["  ",Y.length>0&&`(${Y.length})`]}),l.jsx("button",{onClick:()=>O("teachers"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${L==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]}),l.jsx("div",{className:"hidden md:block",children:l.jsxs("button",{onClick:()=>k(!_),className:`h-[50px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all mt-6 ${_?"bg-indigo-600 text-white border-indigo-600":"bg-slate-50 dark:bg-slate-700 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-600"}`,children:[l.jsx(K,{name:"History",size:18})," ",_?" ":""]})})]})})}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[l.jsxs("div",{className:`w-full md:w-80 flex-col gap-4 ${be&&L!=="teachers"?"hidden":"flex"}`,children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("button",{onClick:()=>k(!_),className:`w-full py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all ${_?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-dark-800 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-700"}`,children:[l.jsx(K,{name:"History",size:18})," ",_?" ":"  "]})}),_?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:R,onChange:D=>P(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(D=>{var q;return D.date.includes(R)||((q=e.find($=>$.id===D.replacementTeacherId))==null?void 0:q.name.toLowerCase().includes(R.toLowerCase()))}).map(D=>{const q=e.find(H=>H.id===D.replacementTeacherId),$=n.find(H=>H.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[(q==null?void 0:q.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),$&&l.jsxs("div",{className:"text-indigo-500",children:[". ",$.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>it("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ge==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>it(ie.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ge===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>it(ie.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ge===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:E,onChange:D=>Me(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[$e.map(D=>{const q=D.unavailableDates.includes(h),$=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${q?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${q?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>q?ce(D.id):se(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${q?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:q?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(H=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:H===ie.First?"1":"2"},H))}),q&&l.jsxs("div",{className:"flex items-center gap-1",children:[$&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:$}),l.jsx("button",{onClick:()=>se(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(K,{name:"Edit2",size:14})})]})]})]},D.id)}),$e.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${be&&L!=="lessons"?"hidden":"flex"}`,children:[l.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["   (",Y.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 w-full xl:w-auto",children:[l.jsxs("button",{onClick:je,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-xs font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(K,{name:"Calendar",size:16})," iCal"]}),Y.length>0&&l.jsxs("button",{onClick:Qe,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-xs font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(K,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:fe,className:"px-3 py-2 bg-blue-500 text-white rounded-xl text-xs font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{Re(""),S(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-xs font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(K,{name:"Search",size:16})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:Y.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(K,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):Y.map(D=>{var At;const q=o.filter(Je=>Je.scheduleItemId===D.id&&Je.date===h),$=q.length>0,H=$?q[0]:null,Se=H&&H.replacementTeacherId!=="cancelled"&&H.replacementTeacherId!=="conducted"?e.find(Je=>Je.id===H.replacementTeacherId):null,Fe=e.find(Je=>Je.id===D.teacherId),de=t.find(Je=>Je.id===D.subjectId),F=r.find(Je=>Je.id===D.classId),V=n.find(Je=>Je.id===D.roomId),ee=V?V.name:D.roomId,Ae=H==null?void 0:H.replacementRoomId,te=Ae?((At=n.find(Je=>Je.id===Ae))==null?void 0:At.name)||Ae:void 0,J=H!=null&&H.replacementClassId?r.find(Je=>Je.id===H.replacementClassId):null,Ie=H!=null&&H.replacementSubjectId?t.find(Je=>Je.id===H.replacementSubjectId):null;let Xe=null;if((H==null?void 0:H.replacementTeacherId)==="conducted")Xe=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ge(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(K,{name:"X",size:16})})]});else if((H==null?void 0:H.replacementTeacherId)==="cancelled")Xe=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ge(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(K,{name:"X",size:16})})]});else if($){const Je=(H==null?void 0:H.replacementTeacherId)===(H==null?void 0:H.originalTeacherId)&&Ae&&!J,kt=J&&Ie&&!(H!=null&&H.isMerger),Bt=q.map(Ft=>{var _t;return(_t=e.find(Xr=>Xr.id===Ft.replacementTeacherId))==null?void 0:_t.name}).filter(Boolean).join(", ");Xe=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl flex-1 justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Je?" ":kt?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm truncate",title:Bt,children:Je?"  ":kt?` ${J==null?void 0:J.name}`:Bt}),(H==null?void 0:H.isMerger)&&l.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",J?`(  ${J.name})`:""]}),(H==null?void 0:H.lessonAbsenceReason)&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",H.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1 shrink-0",children:[l.jsx("button",{onClick:()=>{(Se||Fe)&&lt(Se||Fe,D,F,de,te||ee||void 0,h)},className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(K,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>ge(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(K,{name:"UserX",size:18})})]})]})}else Xe=l.jsxs("button",{onClick:()=>{I({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(K,{name:"ArrowRight",size:16})]});const st=!Z.find(Je=>Je.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:F==null?void 0:F.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===ie.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:de==null?void 0:de.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:st?"font-semibold":"line-through decoration-red-400 decoration-2",children:Fe==null?void 0:Fe.name}),ee&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[ee," ",te&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",te]})]}),(H==null?void 0:H.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",H.lessonAbsenceReason,")"]}),J&&Ie&&!(H!=null&&H.isMerger)&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",J.name]})]})]})]}),l.jsx("div",{className:"w-full xl:w-auto mt-2 xl:mt-0",children:Xe})]},D.id)})})]})]}),l.jsxs(Pn,{isOpen:m,onClose:()=>v(!1),title:" ",children:[pe&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[pe.className,"  ",pe.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:pe.subjectName}),l.jsx("span",{className:pe.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:pe.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:X,onChange:D=>Ee(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),n.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),pe&&!pe.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:Te,onChange:D=>qe(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>_e("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>_e("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>re(!Oe),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[l.jsx(K,{name:"Users",size:16})," :    (  )"]}),Oe&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),Le.length===0?l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):Le.map(D=>l.jsxs("button",{onClick:()=>Be(D.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.classEntity.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D.subjects.join(", ")," ",l.jsx("span",{className:"text-slate-400",children:"|"})," ",D.teachers.join(", ")]})]},D.classEntity.id))]})]}),(pe==null?void 0:pe.teacherId)&&!pe.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>_e(pe.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),He.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>Tt(!Ke),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx(K,{name:"RotateCw",size:16}),"     "]}),Ke&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:we,onChange:D=>ne(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),He.map(D=>{const q=r.find(H=>H.id===D.classId),$=t.find(H=>H.id===D.subjectId);return l.jsxs("button",{onClick:()=>ue(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",q==null?void 0:q.name," - ",$==null?void 0:$.name]},D.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(K,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:We,onChange:D=>ae(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[at.map(({teacher:D,isAbsent:q,isBusy:$,isSpecialist:H,subsCount:Se})=>{const Fe=ze.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${q?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":Fe?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":$?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${H?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:H?l.jsx(K,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[H&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),$&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),q&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),Fe&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${Se>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Se]})]})]})]}),!q&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:de=>wt(D.id,de),className:`px-3 py-1 text-xs font-bold rounded border ${Fe?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:Fe?"":""}),!Fe&&!$&&l.jsx("button",{onClick:()=>vt(D.id,$),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!Fe&&$&&l.jsx("button",{onClick:()=>vt(D.id,$),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),at.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(Pn,{isOpen:B,onClose:()=>S(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:xe,onChange:D=>Re(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[et.map(D=>{var q;return l.jsxs("button",{onClick:()=>{S(!1),I({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((q=n.find($=>$.id===D.roomId))==null?void 0:q.name)||D.roomId]})]})]},D.id)}),xe.length>1&&et.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(Pn,{isOpen:C,onClose:()=>w(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:x,onChange:D=>b(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:nt,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},h6=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=hs(),{schedule1:A,schedule2:i}=ao(),[a,o]=U.useState("teachers"),[c,d]=U.useState(new Date().toISOString().split("T")[0]),[h,f]=U.useState(ie.First),[m,v]=U.useState(1),[y,I]=U.useState(ie.First),[C,w]=U.useState(1),[B,S]=U.useState(""),[N,Q]=U.useState(""),x=U.useMemo(()=>{const E=new Date(c).getMonth();return E>=0&&E<=4?i:A},[c,A,i]);U.useEffect(()=>{n&&(S(n.telegramToken||""),Q(n.feedbackChatId||""))},[n]),U.useEffect(()=>{v(h===ie.First?1:0)},[h]),U.useEffect(()=>{w(y===ie.First?1:0)},[y]);const b=U.useMemo(()=>{const E=new Date(c).getDay();return E===0||E===6?null:bt[E-1]},[c]),_=yn[h],k=U.useMemo(()=>b?e.filter(E=>E.shifts&&!E.shifts.includes(h)||E.unavailableDates.includes(c)?!1:!x.some(Ge=>Ge.teacherId===E.id&&Ge.day===b&&Ge.period>m&&Ge.shift===h)).sort((E,Me)=>E.name.localeCompare(Me.name)):[],[e,c,b,m,h,x]),R=U.useMemo(()=>{if(!b)return[];const E=new Set;return x.forEach(Ge=>{Ge.day===b&&Ge.period===C&&Ge.shift===y&&Ge.roomId&&E.add(Ge.roomId)}),r.filter(Ge=>!E.has(Ge.id)).map(Ge=>Ge.name)},[x,r,b,C,y]),P=async()=>{await s({settings:{...n,telegramToken:B,feedbackChatId:N}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(K,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),a!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:E=>d(E.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),a==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ie.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ie.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:_.map(E=>l.jsx("button",{onClick:()=>v(E),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${m===E?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:E},E))})]})]}),a==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>I(ie.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>I(ie.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:yn[y].map(E=>l.jsx("button",{onClick:()=>w(E),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${C===E?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:E},E))})]})]}),a==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:B,onChange:E=>S(E.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:N,onChange:E=>Q(E.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:P,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Save",size:20}),"  "]})]})]}),a==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[k.map(E=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(K,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:E.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:E.subjectIds.slice(0,2).map(Me=>{const Ge=t.find(it=>it.id===Me);return Ge?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:Ge.name},Me):null})})]})]},E.id)),k.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",m,"   ",h]})]}),a==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[R.map(E=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(K,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:E}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},E)),R.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(K,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};var f6=Object.defineProperty,lf=Object.getOwnPropertySymbols,GS=Object.prototype.hasOwnProperty,zS=Object.prototype.propertyIsEnumerable,kb=(t,e,r)=>e in t?f6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g6=(t,e)=>{for(var r in e||(e={}))GS.call(e,r)&&kb(t,r,e[r]);if(lf)for(var r of lf(e))zS.call(e,r)&&kb(t,r,e[r]);return t},p6=(t,e)=>{var r={};for(var n in t)GS.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&lf)for(var n of lf(t))e.indexOf(n)<0&&zS.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Zi;(t=>{const e=class{constructor(o,c,d,h){if(this.version=o,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const I=this.getPenaltyScore();I<v&&(h=y,v=I),this.applyMask(y)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(o,c){const d=t.QrSegment.makeSegments(o);return e.encodeSegments(d,c)}static encodeBinary(o,c){const d=t.QrSegment.makeBytes(o);return e.encodeSegments([d],c)}static encodeSegments(o,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,y;for(v=d;;v++){const B=e.getNumDataCodewords(v,c)*8,S=a.getTotalBits(o,v);if(S<=B){y=S;break}if(v>=h)throw new RangeError("Data too long")}for(const B of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&y<=e.getNumDataCodewords(v,B)*8&&(c=B);let I=[];for(const B of o){n(B.mode.modeBits,4,I),n(B.numChars,B.mode.numCharCountBits(v),I);for(const S of B.getData())I.push(S)}A(I.length==y);const C=e.getNumDataCodewords(v,c)*8;A(I.length<=C),n(0,Math.min(4,C-I.length),I),n(0,(8-I.length%8)%8,I),A(I.length%8==0);for(let B=236;I.length<C;B^=253)n(B,8,I);let w=[];for(;w.length*8<I.length;)w.push(0);return I.forEach((B,S)=>w[S>>>3]|=B<<7-(S&7)),new e(v,c,w,f)}getModule(o,c){return 0<=o&&o<this.size&&0<=c&&c<this.size&&this.modules[c][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),c=o.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(o[d],o[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const c=this.errorCorrectionLevel.formatBits<<3|o;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let d=0;d<12;d++)o=o<<1^(o>>>11)*7973;const c=this.version<<12|o;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(o,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=o+h,v=c+d;0<=m&&m<this.size&&0<=v&&v<this.size&&this.setFunctionModule(m,v,f!=2&&f!=4)}}drawAlignmentPattern(o,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(o+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(o,c,d){this.modules[c][o]=d,this.isFunction[c][o]=!0}addEccAndInterleave(o){const c=this.version,d=this.errorCorrectionLevel;if(o.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),v=h-m%h,y=Math.floor(m/h);let I=[];const C=e.reedSolomonComputeDivisor(f);for(let B=0,S=0;B<h;B++){let N=o.slice(S,S+y-f+(B<v?0:1));S+=N.length;const Q=e.reedSolomonComputeRemainder(N,C);B<v&&N.push(0),I.push(N.concat(Q))}let w=[];for(let B=0;B<I[0].length;B++)I.forEach((S,N)=>{(B!=y-f||N>=v)&&w.push(S[B])});return A(w.length==m),w}drawCodewords(o){if(o.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,y=(d+1&2)==0?this.size-1-h:h;!this.isFunction[y][m]&&c<o.length*8&&(this.modules[y][m]=s(o[c>>>3],7-(c&7)),c++)}}A(c==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(o){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let o=0;for(let f=0;f<this.size;f++){let m=!1,v=0,y=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[f][I]==m?(v++,v==5?o+=e.PENALTY_N1:v>5&&o++):(this.finderPenaltyAddHistory(v,y),m||(o+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[f][I],v=1);o+=this.finderPenaltyTerminateAndCount(m,v,y)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,v=0,y=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][f]==m?(v++,v==5?o+=e.PENALTY_N1:v>5&&o++):(this.finderPenaltyAddHistory(v,y),m||(o+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[I][f],v=1);o+=this.finderPenaltyTerminateAndCount(m,v,y)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const v=this.modules[f][m];v==this.modules[f][m+1]&&v==this.modules[f+1][m]&&v==this.modules[f+1][m+1]&&(o+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,v)=>m+(v?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),o+=h*e.PENALTY_N4,A(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let d=[6];for(let h=this.size-7;d.length<o;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(o){if(o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*o+128)*o+64;if(o>=2){const d=Math.floor(o/7)+2;c-=(25*d-10)*d-55,o>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(o,c){return Math.floor(e.getNumRawDataModules(o)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][o]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<o-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<o;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(o,c){let d=c.map(h=>0);for(const h of o){const f=h^d.shift();d.push(0),c.forEach((m,v)=>d[v]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(o,c){if(o>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*o;return A(d>>>8==0),d}finderPenaltyCountPatterns(o){const c=o[1];A(c<=this.size*3);const d=c>0&&o[2]==c&&o[3]==c*3&&o[4]==c&&o[5]==c;return(d&&o[0]>=c*4&&o[6]>=c?1:0)+(d&&o[6]>=c*4&&o[0]>=c?1:0)}finderPenaltyTerminateAndCount(o,c,d){return o&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(o,c){c[0]==0&&(o+=this.size),c.pop(),c.unshift(o)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(o,c,d){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(o>>>h&1)}function s(o,c){return(o>>>c&1)!=0}function A(o){if(!o)throw new Error("Assertion error")}const i=class{constructor(o,c,d){if(this.mode=o,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(o){let c=[];for(const d of o)n(d,8,c);return new i(i.Mode.BYTE,o.length,c)}static makeNumeric(o){if(!i.isNumeric(o))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<o.length;){const h=Math.min(o.length-d,3);n(parseInt(o.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,o.length,c)}static makeAlphanumeric(o){if(!i.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=o.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d+1)),n(h,11,c)}return d<o.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,o.length,c)}static makeSegments(o){return o==""?[]:i.isNumeric(o)?[i.makeNumeric(o)]:i.isAlphanumeric(o)?[i.makeAlphanumeric(o)]:[i.makeBytes(i.toUtf8ByteArray(o))]}static makeEci(o){let c=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,c);else if(o<16384)n(2,2,c),n(o,14,c);else if(o<1e6)n(6,3,c),n(o,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(o){return i.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return i.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,c){let d=0;for(const h of o){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(o){o=encodeURI(o);let c=[];for(let d=0;d<o.length;d++)o.charAt(d)!="%"?c.push(o.charCodeAt(d)):(c.push(parseInt(o.substr(d+1,2),16)),d+=2);return c}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(Zi||(Zi={}));(t=>{(e=>{const r=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Zi||(Zi={}));(t=>{(e=>{const r=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Zi||(Zi={}));var Ll=Zi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var m6={L:Ll.QrCode.Ecc.LOW,M:Ll.QrCode.Ecc.MEDIUM,Q:Ll.QrCode.Ecc.QUARTILE,H:Ll.QrCode.Ecc.HIGH},w6=128,y6="L",v6="#FFFFFF",x6="#000000",B6=!1,$S=4,C6=.1;function b6(t,e=0){const r=[];return t.forEach(function(n,s){let A=null;n.forEach(function(i,a){if(!i&&A!==null){r.push(`M${A+e} ${s+e}h${a-A}v1H${A+e}z`),A=null;return}if(a===n.length-1){if(!i)return;A===null?r.push(`M${a+e},${s+e} h1v1H${a+e}z`):r.push(`M${A+e},${s+e} h${a+1-A}v1H${A+e}z`);return}i&&A===null&&(A=a)})}),r.join("")}function _6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function I6(t,e,r,n){if(n==null)return null;const s=r?$S:0,A=t.length+s*2,i=Math.floor(e*C6),a=A/e,o=(n.width||i)*a,c=(n.height||i)*a,d=n.x==null?t.length/2-o/2:n.x*a,h=n.y==null?t.length/2-c/2:n.y*a;let f=null;if(n.excavate){let m=Math.floor(d),v=Math.floor(h),y=Math.ceil(o+d-m),I=Math.ceil(c+h-v);f={x:m,y:v,w:y,h:I}}return{x:d,y:h,h:c,w:o,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function E6(t){const e=t,{value:r,size:n=w6,level:s=y6,bgColor:A=v6,fgColor:i=x6,includeMargin:a=B6,imageSettings:o}=e,c=p6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Ll.QrCode.encodeText(r,m6[s]).getModules();const h=a?$S:0,f=d.length+h*2,m=I6(d,n,a,o);let v=null;o!=null&&m!=null&&(m.excavation!=null&&(d=_6(d,m.excavation)),v=Bs.createElement("image",{xlinkHref:o.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const y=b6(d,h);return Bs.createElement("svg",g6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),Bs.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Bs.createElement("path",{fill:i,d:y,shapeRendering:"crispEdges"}),v)}const T6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,saveStaticData:i,dutyZones:a}=hs(),{schedule1:o,schedule2:c,substitutions:d,saveScheduleData:h,dutySchedule:f}=ao(),m=U.useRef(null),v=U.useRef(null),y=U.useRef(null),[I,C]=U.useState(new Date().toISOString().split("T")[0]),[w,B]=U.useState(()=>{const Z=new Date().getMonth();return Z>=0&&Z<=4?2:1}),[S,N]=U.useState(!1),[Q,x]=U.useState(!1),[b,_]=U.useState(""),[k,R]=U.useState(""),[P,E]=U.useState(!1),[Me,Ge]=U.useState(""),it=U.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,schedule:o,schedule2ndHalf:c,substitutions:d,dutyZones:a,dutySchedule:f}),[t,e,r,n,s,A,o,c,d,a,f]),We=()=>w===2?c:o,ae=Z=>{const Y=new Date(Z).getMonth();return Y>=0&&Y<=4?c:o},xe=U.useMemo(()=>{const Z=new Set;return r.forEach(Y=>{const se=Y.name.match(/^(\d+)/);se&&Z.add(se[1])}),Array.from(Z).sort((Y,se)=>parseInt(Y)-parseInt(se))},[r]);U.useEffect(()=>{xe.length>0&&!Me&&Ge(xe[0])},[xe]);const Re=Z=>{var nt;const Y=(nt=Z.target.files)==null?void 0:nt[0];if(!Y)return;const se=new FileReader;se.onload=async ce=>{var _e;try{const Be=JSON.parse((_e=ce.target)==null?void 0:_e.result);if(Be.teachers&&(Be.schedule||Be.schedule2ndHalf)){if(window.confirm("    . ?")){const ue={...an,...Be,rooms:Be.rooms||an.rooms,classes:Be.classes||[],schedule:Be.schedule||[],schedule2ndHalf:Be.schedule2ndHalf||[],teachers:Be.teachers||[],subjects:Be.subjects||[],substitutions:Be.substitutions||[],settings:{...an.settings,...Be.settings}};await i(ue),await h(ue),alert("  !")}}else alert("  .")}catch{alert("  .")}},se.readAsText(Y)},X=()=>{const Z=We();let Y=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;bt.forEach(_e=>{Y+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${_e}</td></tr>`,[ie.First,ie.Second].forEach(Be=>{const ue=r.filter(ge=>ge.shift===Be);ue.length!==0&&(Y+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${Be}</td></tr>`,Y+='<tr><th class="header"></th>',yn[Be].forEach(ge=>Y+=`<th class="header">${ge} </th>`),Y+="</tr>",ue.forEach(ge=>{Y+=`<tr><td class="class-cell">${ge.name}</td>`,yn[Be].forEach(Qe=>{const je=Z.filter(fe=>fe.classId===ge.id&&fe.day===_e&&fe.shift===Be&&fe.period===Qe);Y+='<td style="height: 60px;">',je.forEach(fe=>{const lt=t.find(pe=>pe.id===fe.subjectId),Ze=e.find(pe=>pe.id===fe.teacherId),at=n.find(pe=>pe.id===fe.roomId),Le=at?at.name:fe.roomId;Y+=`<div style="background-color: ${(lt==null?void 0:lt.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(lt==null?void 0:lt.name)||""} ${fe.direction||""}</div>
                                <div class="meta">${(Ze==null?void 0:Ze.name)||""} ${Le?`(. ${Le})`:""}</div>
                            </div>`}),Y+="</td>"}),Y+="</tr>"}))})}),Y+="</table></body></html>";const se=new Blob([Y],{type:"application/vnd.ms-excel"}),nt=URL.createObjectURL(se),ce=document.createElement("a");ce.href=nt,ce.download=`_22_${w}.xls`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},Ee=()=>{const Z=We(),Y={[ct.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ct.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ct.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ct.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ct.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let se=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;se+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[ie.First,ie.Second].forEach(Be=>{const ue=yn[Be];se+="<table>",se+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${bt.length*ue.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,se+="<tr>",bt.forEach(Qe=>{var fe;const je=((fe=Y[Qe])==null?void 0:fe.header)||"#f3f4f6";se+=`<th colspan="${ue.length}" class="header" style="border: 2px solid #000; background-color: ${je};">${Qe}</th>`}),se+="</tr>",se+="<tr>",bt.forEach(Qe=>{var fe;const je=((fe=Y[Qe])==null?void 0:fe.header)||"#f3f4f6";ue.forEach(lt=>se+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${je};"></th>`)}),se+="</tr>";const ge="#e5e7eb";se+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${ge};">${Be}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${ge};"></th>
            `,bt.forEach(Qe=>{var fe;const je=((fe=Y[Qe])==null?void 0:fe.header)||"#f3f4f6";ue.forEach(lt=>se+=`<th class="header" style="width: 40px; background-color: ${je};">${lt}</th>`)}),se+="</tr>",t.forEach(Qe=>{const je=e.filter(fe=>fe.subjectIds.includes(Qe.id)&&fe.shifts.includes(Be));je.length!==0&&(je.forEach((fe,lt)=>{se+="<tr>",lt===0&&(se+=`<td rowspan="${je.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Qe.name}</td>`),se+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${fe.name}</td>`,bt.forEach(Ze=>{var Le;const at=((Le=Y[Ze])==null?void 0:Le.cell)||"#fff";ue.forEach(pe=>{const He=Z.find(et=>et.teacherId===fe.id&&et.subjectId===Qe.id&&et.day===Ze&&et.period===pe&&et.shift===Be);if(He){const et=r.find(H=>H.id===He.classId),vt=n.find(H=>H.id===He.roomId),wt=vt?vt.name:He.roomId,D=wt?`<sub>${wt}</sub>`:"",q=He.direction?` <span style="font-size:10px">(${He.direction})</span>`:"";se+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${at};">${et?et.name:""}${q}${D}</td>`}else se+=`<td style="border: 1px solid #000; background-color: ${at};"></td>`})}),se+="</tr>"}),se+=`<tr><td colspan="${2+bt.length*ue.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),se+="</table><br/><br/>"}),se+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,se+="</body></html>";const nt=new Blob([se],{type:"application/vnd.ms-excel"}),ce=URL.createObjectURL(nt),_e=document.createElement("a");_e.href=ce,_e.download=`__${w}.xls`,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)},Te=()=>{const Z=We(),Y={[ct.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ct.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ct.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ct.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ct.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let se=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;se+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[ie.First,ie.Second].forEach(Be=>{const ue=yn[Be];se+="<table>",se+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${bt.length*ue.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,se+="<tr>",bt.forEach(Qe=>{var fe;const je=((fe=Y[Qe])==null?void 0:fe.header)||"#f3f4f6";se+=`<th colspan="${ue.length}" class="header" style="border: 3px solid #000; background-color: ${je}; font-size: 20pt;">${Qe}</th>`}),se+="</tr>",se+="<tr>",bt.forEach(Qe=>{var fe;const je=((fe=Y[Qe])==null?void 0:fe.header)||"#f3f4f6";se+=`<th colspan="${ue.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${je}; font-size: 16pt;"></th>`}),se+="</tr>";const ge="#e5e7eb";se+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${ge}; font-size: 24pt;">${Be}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${ge};"></th>
            `,bt.forEach(Qe=>{var fe;const je=((fe=Y[Qe])==null?void 0:fe.header)||"#f3f4f6";ue.forEach(lt=>se+=`<th class="header" style="width: 20px; background-color: ${je}; font-size: 16pt;">${lt}</th>`)}),se+="</tr>",t.forEach(Qe=>{const je=e.filter(fe=>fe.subjectIds.includes(Qe.id)&&fe.shifts.includes(Be));je.length!==0&&(je.forEach((fe,lt)=>{se+="<tr>",lt===0&&(se+=`<td rowspan="${je.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Qe.name}</td>`),se+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${fe.name}</td>`,bt.forEach(Ze=>{var Le;const at=((Le=Y[Ze])==null?void 0:Le.cell)||"#fff";ue.forEach(pe=>{const He=Z.find(et=>et.teacherId===fe.id&&et.subjectId===Qe.id&&et.day===Ze&&et.period===pe&&et.shift===Be);if(He){const et=r.find($=>$.id===He.classId),vt=n.find($=>$.id===He.roomId),wt=vt?vt.name:He.roomId,D=wt?`<sub>${wt}</sub>`:"",q=He.direction?` <span style="font-size:14px">(${He.direction})</span>`:"";se+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${at}; height: 60px;">${et?et.name:""}${q}${D}</td>`}else se+=`<td style="border: 1px solid #000; background-color: ${at};"></td>`})}),se+="</tr>"}),se+=`<tr><td colspan="${2+bt.length*ue.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),se+="</table><br/><br/>"}),se+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,se+="</body></html>";const nt=new Blob([se],{type:"application/vnd.ms-excel"}),ce=URL.createObjectURL(nt),_e=document.createElement("a");_e.href=ce,_e.download=`__${w}.xls`,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)},qe=()=>{const Z=We(),Y=r.filter(ge=>ge.name.startsWith(Me)).sort((ge,Qe)=>ge.name.localeCompare(Qe.name)),se=Array.from(new Set(Y.map(ge=>ge.shift))).sort(),nt={[ct.Monday]:{label:"#fecaca",cell:"#fee2e2"},[ct.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[ct.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[ct.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[ct.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;se.forEach(ge=>{const Qe=Y.filter(fe=>fe.shift===ge),je=yn[ge];Qe.length!==0&&(ce+="<table>",ce+="<tr>",ce+='<td style="border:none"></td>',ce+='<td style="border:none"></td>',ce+=`<td colspan="${Qe.length}" class="shift-header">${ge}</td>`,ce+="</tr>",ce+="<tr>",ce+='<td style="border:none"></td>',ce+='<td style="border:none"></td>',Qe.forEach(fe=>{ce+=`<td class="class-header">${fe.name}</td>`}),ce+="</tr>",bt.forEach(fe=>{const lt=nt[fe]||{label:"#e5e7eb",cell:"#f3f4f6"};je.forEach((Ze,at)=>{ce+="<tr>",at===0&&(ce+=`<td rowspan="${je.length}" class="day-cell" style="background-color: ${lt.label};">${fe.toUpperCase()}</td>`),ce+=`<td class="period-cell" style="background-color: ${lt.label};">${Ze}</td>`,Qe.forEach(Le=>{const pe=Z.filter(He=>He.classId===Le.id&&He.day===fe&&He.shift===ge&&He.period===Ze);ce+=`<td class="content-cell" style="background-color: ${lt.cell};">`,pe.forEach((He,et)=>{et>0&&(ce+='<br style="mso-data-placement:same-cell;">');const vt=t.find(q=>q.id===He.subjectId),wt=n.find(q=>q.id===He.roomId),D=wt?wt.name:He.roomId||"";ce+=`<span class="subject">${(vt==null?void 0:vt.name)||""}</span>`,D&&(ce+=` <span class="room">${D}</span>`)}),ce+="</td>"}),ce+="</tr>"}),ce+=`<tr><td colspan="${2+Qe.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),ce+="</table><br><br>")}),ce+="</body></html>";const _e=new Blob([ce],{type:"application/vnd.ms-excel"}),Be=URL.createObjectURL(_e),ue=document.createElement("a");ue.href=Be,ue.download=`__${Me}_.xls`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},ze=()=>{const Z=new Date(I),Y=Z.getMonth(),se=Z.getFullYear(),nt=d.filter(Le=>{const pe=new Date(Le.date);return pe.getMonth()===Y&&pe.getFullYear()===se}).sort((Le,pe)=>new Date(Le.date).getTime()-new Date(pe.date).getTime());if(nt.length===0){alert("      .");return}const ce=new Map;nt.forEach(Le=>{const pe=`${Le.scheduleItemId}_${Le.date}`,He=ce.get(pe)||[];He.push(Le),ce.set(pe,He)});const _e=[],Be=[];ce.forEach(Le=>{var $;const pe=Le[0],He=o.find(H=>H.id===pe.scheduleItemId)||c.find(H=>H.id===pe.scheduleItemId);if(!He)return;const et=r.find(H=>H.id===He.classId),vt=t.find(H=>H.id===He.subjectId),wt=e.find(H=>H.id===pe.originalTeacherId);let D=pe.lessonAbsenceReason||(($=wt==null?void 0:wt.absenceReasons)==null?void 0:$[pe.date])||"";pe.replacementTeacherId===pe.originalTeacherId&&pe.replacementRoomId&&!pe.replacementClassId&&(D=" "),pe.replacementClassId&&pe.replacementSubjectId&&!pe.isMerger&&(D=" ");const q={subs:Le,scheduleItem:He,cls:et,subj:vt,origTeacher:wt,reason:D};D===" "?Be.push(q):_e.push(q)});let ue=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${Z.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const ge=Le=>Le.map(pe=>{const{subs:He,scheduleItem:et,cls:vt,subj:wt,origTeacher:D,reason:q}=pe,$=He[0],H=new Date($.date).toLocaleDateString("ru-RU");let Se="";if($.replacementTeacherId==="conducted")Se=" ";else if($.replacementTeacherId==="cancelled")Se=" ";else if(Se=He.map(J=>{const Ie=e.find(Xe=>Xe.id===J.replacementTeacherId);return Ie?Ie.name:""}).join(", "),$.isMerger){let J=" ()";if($.replacementClassId){const Ie=r.find(Xe=>Xe.id===$.replacementClassId);Ie&&(J=` (  ${Ie.name})`)}Se+=J}else if($.replacementClassId&&$.replacementSubjectId){const J=r.find(Xe=>Xe.id===$.replacementClassId),Ie=t.find(Xe=>Xe.id===$.replacementSubjectId);Se+=` ( ${(J==null?void 0:J.name)||"?"} ${(Ie==null?void 0:Ie.name)||"?"})`}const Fe=et.roomId,de=$.replacementRoomId,F=de||Fe,V=n.find(te=>te.id===F),ee=V?V.name:F||"-",Ae=de?`${ee} ( .)`:ee;return`
                    <tr>
                        <td>${H}</td>
                        <td>${et.period}</td>
                        <td>${et.shift}</td>
                        <td>${(vt==null?void 0:vt.name)||"?"}</td>
                        <td>${(wt==null?void 0:wt.name)||"?"}</td>
                        <td>${(D==null?void 0:D.name)||"?"}</td>
                        <td>${Se}</td>
                        <td>${Ae}</td>
                        <td>${q}</td>
                    </tr>
                `}).join(""),Qe=(Le,pe=!1)=>`
            <table>
            <thead>
                <tr class="${pe?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${ge(Le)}
            </tbody>
            </table>
        `;_e.length>0?ue+=Qe(_e):ue+="<p>     .</p>",Be.length>0&&(ue+="<br/><br/>",ue+='<h3 style="color: #b91c1c;">   (  )</h3>',ue+=Qe(Be,!0));const je=new Map;nt.forEach(Le=>{var wt;if(Le.replacementTeacherId==="conducted"||Le.replacementTeacherId==="cancelled"||Le.replacementTeacherId===Le.originalTeacherId)return;const pe=e.find(D=>D.id===Le.replacementTeacherId);if(!pe)return;const He=je.get(pe.id)||{name:pe.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},et=e.find(D=>D.id===Le.originalTeacherId);let vt=Le.lessonAbsenceReason||((wt=et==null?void 0:et.absenceReasons)==null?void 0:wt[Le.date])||"";Le.replacementClassId&&Le.replacementSubjectId&&!Le.isMerger&&(vt=" "),He.total++,Le.isMerger?He.merger++:vt===""?He.illness++:vt===" "?He.withoutRecord++:He.other++,je.set(pe.id,He)});const fe=Array.from(je.values()).sort((Le,pe)=>Le.name.localeCompare(pe.name));fe.length>0&&(ue+="<br/><br/>",ue+="<h3>   </h3>",ue+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,fe.forEach(Le=>{ue+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${Le.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Le.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Le.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Le.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Le.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Le.other}</td>
                     </tr>
                 `}),ue+="</tbody></table>"),ue+="</body></html>";const lt=new Blob([ue],{type:"application/vnd.ms-excel"}),Ze=URL.createObjectURL(lt),at=document.createElement("a");at.href=Ze,at.download=`__${Z.getMonth()+1}_${Z.getFullYear()}.xls`,document.body.appendChild(at),at.click(),document.body.removeChild(at)},Ye=()=>{const Z=new Date(I),Y=Z.getMonth(),se=Z.getFullYear(),nt=d.filter(ge=>{const Qe=new Date(ge.date),je=Qe.getMonth()===Y&&Qe.getFullYear()===se,fe=ge.refusals&&ge.refusals.length>0;return je&&fe}).sort((ge,Qe)=>new Date(ge.date).getTime()-new Date(Qe.date).getTime());if(nt.length===0){alert("      .");return}let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${Z.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;nt.forEach(ge=>{const Qe=o.find(pe=>pe.id===ge.scheduleItemId)||c.find(pe=>pe.id===ge.scheduleItemId);if(!Qe)return;const je=new Date(ge.date).toLocaleDateString("ru-RU"),fe=r.find(pe=>pe.id===Qe.classId),lt=t.find(pe=>pe.id===Qe.subjectId),Ze=e.find(pe=>pe.id===ge.originalTeacherId);let at="";if(ge.replacementTeacherId==="conducted")at=" ";else if(ge.replacementTeacherId==="cancelled")at=" ";else{const pe=e.find(He=>He.id===ge.replacementTeacherId);at=pe?pe.name:""}const Le=(ge.refusals||[]).map(pe=>{const He=e.find(et=>et.id===pe);return He?He.name:""}).join(", ");ce+=`
                <tr>
                    <td>${je}</td>
                    <td>${Qe.period}</td>
                    <td>${Qe.shift}</td>
                    <td>${(fe==null?void 0:fe.name)||"?"}</td>
                    <td>${(lt==null?void 0:lt.name)||"?"}</td>
                    <td>${(Ze==null?void 0:Ze.name)||"?"}</td>
                    <td>${at}</td>
                    <td>${Le}</td>
                </tr>
            `}),ce+="</tbody></table></body></html>";const _e=new Blob([ce],{type:"application/vnd.ms-excel"}),Be=URL.createObjectURL(_e),ue=document.createElement("a");ue.href=Be,ue.download=`__${Z.getMonth()+1}_${Z.getFullYear()}.xls`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},Ke=()=>{const Z=We();let Y=`							
`;bt.forEach(se=>{[ie.First,ie.Second].forEach(nt=>{r.filter(_e=>_e.shift===nt).forEach(_e=>{yn[nt].forEach(Be=>{Z.filter(ge=>ge.classId===_e.id&&ge.day===se&&ge.shift===nt&&ge.period===Be).forEach(ge=>{const Qe=t.find(Ze=>Ze.id===ge.subjectId),je=e.find(Ze=>Ze.id===ge.teacherId),fe=n.find(Ze=>Ze.id===ge.roomId),lt=fe?fe.name:ge.roomId||"";Y+=`${se}	${nt}	${_e.name}	${Be}	${(Qe==null?void 0:Qe.name)||""}	${(je==null?void 0:je.name)||""}	${lt}	${ge.direction||""}
`})})})})}),navigator.clipboard.writeText(Y).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},Tt=async()=>{N(!0);try{if(!v.current){alert("   1- .");return}const Z=await af(v.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),Y=document.createElement("a");Y.href=Z.toDataURL("image/png"),Y.download=`_${I}_1.png`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)}catch(Z){console.error(Z),alert("   ")}finally{N(!1)}},Oe=async()=>{N(!0);try{if(!y.current){alert("   2- .");return}const Z=await af(y.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),Y=document.createElement("a");Y.href=Z.toDataURL("image/png"),Y.download=`_${I}_2.png`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)}catch(Z){console.error(Z),alert("   ")}finally{N(!1)}},re=U.useMemo(()=>d.filter(Z=>Z.date===I),[d,I]),we=U.useMemo(()=>{const Z=ae(I);return re.filter(Y=>{const se=Z.find(nt=>nt.id===Y.scheduleItemId);return se&&se.shift===ie.First}).filter(Y=>Y.replacementTeacherId!=="conducted").length>0},[re,ae,I]),ne=U.useMemo(()=>{const Z=ae(I);return re.filter(Y=>{const se=Z.find(nt=>nt.id===Y.scheduleItemId);return se&&se.shift===ie.Second}).filter(Y=>Y.replacementTeacherId!=="conducted").length>0},[re,ae,I]),be=Z=>{const Y=ae(I),se=re.filter(ce=>{const _e=Y.find(Be=>Be.id===ce.scheduleItemId);return _e&&_e.shift===Z}).filter(ce=>ce.replacementTeacherId!=="conducted");if(se.length===0)return null;const nt=Array.from(new Set(se.map(ce=>ce.scheduleItemId))).sort((ce,_e)=>{const Be=Y.find(ge=>ge.id===ce),ue=Y.find(ge=>ge.id===_e);return((Be==null?void 0:Be.period)??0)-((ue==null?void 0:ue.period)??0)});return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:Z}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:nt.map(ce=>{var Se,Fe,de;const _e=se.filter(F=>F.scheduleItemId===ce),Be=_e[0],ue=Y.find(F=>F.id===ce);if(!ue)return null;const ge=r.find(F=>F.id===ue.classId),Qe=t.find(F=>F.id===ue.subjectId),je=e.find(F=>F.id===Be.originalTeacherId),fe=Be.replacementRoomId,lt=ue.roomId?n.find(F=>F.id===ue.roomId):null,Ze=lt?lt.name:ue.roomId||"",at=fe?n.find(F=>F.id===fe):null,Le=at?at.name:fe||"",pe=Be.replacementTeacherId==="cancelled",He=(Se=je==null?void 0:je.absenceReasons)==null?void 0:Se[I],et=Be.lessonAbsenceReason,vt=et===" "?et:He===" "?He:"",wt=Be.replacementClassId?r.find(F=>F.id===Be.replacementClassId):null,D=Be.replacementSubjectId?t.find(F=>F.id===Be.replacementSubjectId):null,q=Be.replacementTeacherId===Be.originalTeacherId&&fe&&!wt,$=wt&&D&&!Be.isMerger,H=Be.replacementTeacherId===Be.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:ue.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:ge==null?void 0:ge.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Qe==null?void 0:Qe.name}),ue.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:ue.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!H&&!q&&!$&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[je==null?void 0:je.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),vt&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:vt})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${pe?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:q?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:je==null?void 0:je.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):$?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:je==null?void 0:je.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",wt==null?void 0:wt.name]})]}):pe?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:_e.length>1||Be.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:_e.map(F=>{const V=e.find(ee=>ee.id===F.replacementTeacherId);return V?V.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",Be.replacementClassId?`(${(Fe=r.find(F=>F.id===Be.replacementClassId))==null?void 0:Fe.name})`:""]})]}):l.jsx("span",{children:(de=e.find(F=>F.id===Be.replacementTeacherId))==null?void 0:de.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${fe?"text-indigo-600":"text-slate-700"}`,children:fe&&fe!==ue.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Ze}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Le})]}):l.jsx("span",{className:"text-xl",children:Ze})})]},String(ce))})})]})]})},L=async()=>{const Z=Math.random().toString(36).substr(2,9);await Ur.setPublicData(Z,it),await i({settings:{...s,publicScheduleId:Z}});const Y=`${window.location.origin}${window.location.pathname}#/public?id=${Z}`;_(Y),R(Z),x(!0)},O=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await Ur.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),_(""),R(""))},z=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(I).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),me=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]}),$e=()=>{const Z=We(),Y=r.filter(ce=>ce.name.startsWith(Me)).sort((ce,_e)=>ce.name.localeCompare(_e.name)),se=Array.from(new Set(Y.map(ce=>ce.shift))).sort(),nt={[ct.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[ct.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[ct.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[ct.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[ct.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return Y.length===0?l.jsx("div",{className:"text-center p-10",children:"    "}):l.jsx("div",{className:"font-sans text-black",children:se.map(ce=>{const _e=Y.filter(ue=>ue.shift===ce),Be=yn[ce];return _e.length===0?null:l.jsx("div",{className:"mb-10 page-break-inside-avoid",children:l.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{colSpan:_e.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:ce})]}),l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),_e.map(ue=>l.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:ue.name},String(ue.id)))]})]}),l.jsx("tbody",{children:bt.map(ue=>{const ge=nt[ue]||{label:"bg-gray-200",cell:"bg-gray-100"};return l.jsxs(Bs.Fragment,{children:[Be.map((Qe,je)=>l.jsxs("tr",{children:[je===0&&l.jsx("td",{rowSpan:Be.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${ge.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:ue===ct.Monday?"":ue===ct.Tuesday?"":ue===ct.Wednesday?"":ue===ct.Thursday?"":ue===ct.Friday?"":ue}),l.jsx("td",{className:`border-2 border-black font-bold text-base ${ge.label}`,children:Qe}),_e.map(fe=>{const lt=Z.filter(Ze=>Ze.classId===fe.id&&Ze.day===ue&&Ze.shift===ce&&Ze.period===Qe);return l.jsx("td",{className:`border-2 border-black p-1 h-12 ${ge.cell}`,children:lt.map(Ze=>{const at=t.find(He=>He.id===Ze.subjectId),Le=n.find(He=>He.id===Ze.roomId),pe=Le?Le.name:Ze.roomId||"";return l.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[l.jsx("span",{children:at==null?void 0:at.name}),pe&&l.jsx("span",{className:"font-black",children:pe})]},String(Ze.id))})},String(fe.id))})]},`${String(ue)}-${Qe}`)),l.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:l.jsx("td",{colSpan:2+_e.length})})]},String(ue))})})]})},String(ce))})})};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>Ur.exportJson(it),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:m,onChange:Re,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var Z;return(Z=m.current)==null?void 0:Z.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(K,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(K,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:I,onChange:Z=>C(Z.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:Tt,disabled:S||!we,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:S?l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:Oe,disabled:S||!ne,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:S?l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:re.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(z,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(me,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[we&&l.jsxs("div",{ref:v,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(z,{}),be(ie.First),l.jsx(me,{})]}),ne&&l.jsxs("div",{ref:y,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(z,{}),be(ie.Second),l.jsx(me,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsx("select",{value:Me,onChange:Z=>Ge(Z.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:xe.map(Z=>l.jsxs("option",{value:Z,children:[Z,"- "]},Z))})]}),l.jsxs("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Printer",size:20}),"    "]}),l.jsxs("button",{onClick:qe,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:w,onChange:Z=>B(Number(Z.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:X,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:Ee,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Te,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Ke,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:ze,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:Ye,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(K,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:O,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:L,disabled:S,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(K,{name:"Share2",size:20}),"  "]})]}),l.jsx(Pn,{isOpen:Q,onClose:()=>x(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),b&&l.jsxs(l.Fragment,{children:[l.jsx(E6,{value:b,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:b}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(b),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Copy",size:16}),"  "]})]})]})}),P&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",Me,"- )"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(K,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:l.jsx($e,{})})]})]})},F6=()=>{var C;const{subjects:t,teachers:e,classes:r}=hs(),{schedule1:n,schedule2:s,substitutions:A}=ao(),[i,a]=U.useState("load"),[o,c]=U.useState(((C=r[0])==null?void 0:C.id)||""),[d,h]=U.useState(()=>{const w=new Date().getMonth();return w>=0&&w<=4?2:1}),f=U.useMemo(()=>d===2?s:n,[d,n,s]),m=U.useMemo(()=>e.map(B=>{const S=f.filter(R=>R.teacherId===B.id),N=S.length,Q=N*4,x=A.filter(R=>R.replacementTeacherId===B.id).length,b=A.filter(R=>R.originalTeacherId===B.id).length,_=Q+x-b,k={};return S.forEach(R=>{const P=t.find(E=>E.id===R.subjectId);P&&(k[P.name]=(k[P.name]||0)+1)}),{id:B.id,name:B.name,weeklyHours:N,subsTaken:x,subsMissed:b,actualHours:_,subjectBreakdown:k}}).sort((B,S)=>S.actualHours-B.actualHours),[e,f,A,t]),v=U.useMemo(()=>o?bt.map(w=>{const S=f.filter(N=>N.classId===o&&N.day===w).reduce((N,Q)=>{const x=t.find(b=>b.id===Q.subjectId);return N+((x==null?void 0:x.difficulty)||5)},0);return{label:w,value:S}}):[],[f,t,o]),y=U.useMemo(()=>{const w=e.map(S=>({name:S.name,count:A.filter(N=>N.replacementTeacherId===S.id).length})).sort((S,N)=>N.count-S.count).slice(0,5),B=e.map(S=>({name:S.name,count:S.unavailableDates.length})).sort((S,N)=>N.count-S.count).slice(0,5);return{heroes:w,absentees:B}},[e,A]),I=()=>{let w="";i==="load"?w=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(N=>`"${N.name}",${N.weeklyHours},${N.subsTaken},${N.subsMissed},${N.actualHours},"${Object.entries(N.subjectBreakdown).map(([Q,x])=>Q+": "+x).join(", ")}"`).join(`
`):i==="sanpin"&&(w=`Day,Score
`+v.map(N=>`${N.label},${N.value}`).join(`
`));const B=new Blob([`\uFEFF${w}`],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(B),S.download=`report_${i}_${d}sem.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(K,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:w=>h(Number(w.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:I,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(K,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>a("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(w=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:w.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:w.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",w.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",w.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:w.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.subjectBreakdown).map(([B,S])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[B,": ",S]},B))})})]},w.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:w=>c(w.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))})]}),l.jsx(cp,{items:v,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(cp,{items:y.heroes.map(w=>({label:w.name,value:w.count})),max:Math.max(...y.heroes.map(w=>w.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(cp,{items:y.absentees.map(w=>({label:w.name,value:w.count})),max:Math.max(...y.absentees.map(w=>w.count),1),barClassName:"bg-red-500"})]})]})]})},S6=()=>{var Oe;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=hs(),{dutySchedule:s,saveScheduleData:A,schedule1:i,schedule2:a}=ao(),o={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,d]=U.useState(()=>{const re=new Date().getMonth();return re>=0&&re<=4?2:1}),[h,f]=U.useState(ie.First),m=c===1?i:a,v=U.useRef(null),[y,I]=U.useState(!1),[C,w]=U.useState(!1),[B,S]=U.useState(null),[N,Q]=U.useState({}),[x,b]=U.useState(""),[_,k]=U.useState(null),R=(re,we,ne)=>{const be=s.find(L=>L.zoneId===re&&L.day===we&&L.shift===ne);return be?t.find(L=>L.id===be.teacherId):null},P=(re,we,ne,be)=>be?!!s.find(O=>O.teacherId===be&&O.day===we&&O.shift===ne&&O.zoneId!==re):!1,E=(re,we)=>{S({zoneId:re,day:we});const ne=R(re,we,h);k((ne==null?void 0:ne.id)||null),I(!0)},Me=async()=>{if(!B)return;let re=[...s];re=re.filter(we=>!(we.zoneId===B.zoneId&&we.day===B.day&&we.shift===h)),_&&re.push({id:Math.random().toString(36).substr(2,9),zoneId:B.zoneId,day:B.day,shift:h,teacherId:_}),await A({dutySchedule:re}),I(!1),k(null)},Ge=async()=>{if(!B)return;let re=[...s];re=re.filter(we=>!(we.zoneId===B.zoneId&&we.day===B.day&&we.shift===h)),await A({dutySchedule:re}),I(!1),k(null)},it=(re,we)=>{if(!re||!we.includedRooms)return!1;const ne=re.replace(/\D/g,"");return ne&&we.includedRooms.includes(ne)?!0:we.includedRooms.includes(re)},We=async()=>{if(!window.confirm("    . ?"))return;let re=[];const we=[ie.First,ie.Second],ne={};bt.forEach(be=>ne[be]=new Set);for(const be of bt)for(const L of we){const O=t.filter(z=>m.filter($e=>$e.teacherId===z.id&&$e.day===be&&$e.shift===L).length>=1);for(const z of e){const me=O.map(Z=>{let Y=0;ne[be].has(Z.id)&&(Y-=2e3);const se=m.filter(ce=>{var _e;return ce.teacherId===Z.id&&ce.day===be&&ce.shift===L&&ce.roomId&&it(((_e=r.find(Be=>Be.id===ce.roomId))==null?void 0:_e.name)||ce.roomId,z)}).length;return se===0?{teacher:Z,score:-9999}:(Y+=se*10,m.filter(ce=>ce.teacherId===Z.id&&ce.day===be&&ce.shift===L).length>=4&&(Y+=5),{teacher:Z,score:Y})});me.sort((Z,Y)=>Y.score-Z.score);const $e=me[0];$e&&$e.score>-500&&(re.push({id:Math.random().toString(36).substr(2,9),zoneId:z.id,day:be,shift:L,teacherId:$e.teacher.id}),ne[be].add($e.teacher.id))}}await A({dutySchedule:re})},ae=async()=>{window.confirm("   (  )?")&&await A({dutySchedule:[]})},xe=async()=>{if(!v.current)return;const re=await af(v.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),we=document.createElement("a");we.href=re.toDataURL("image/png"),we.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(we),we.click(),document.body.removeChild(we)},Re=()=>{const we=Tt.length+1;let ne=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8">
            <style>
                table { border-collapse: collapse; width: 100%; font-family: 'Times New Roman', serif; }
                td, th { border: 1px solid #000; padding: 6px; vertical-align: middle; text-align: center; font-size: 11pt; }
                .title-row td { border: none !important; font-weight: bold; text-align: center; }
                .title-main { font-size: 14pt; text-transform: uppercase; }
                .title-sub { font-size: 12pt; }
                .approval-cell { text-align: left; border: none !important; font-size: 11pt; line-height: 1.2; }
                .header-cell { background-color: #F3F4F6; font-weight: bold; border: 2px solid #000; }
                .floor-cell { background-color: #E5E7EB; font-weight: bold; text-transform: uppercase; font-size: 10pt; border: 2px solid #000; }
                .shift-header { font-size: 13pt; font-weight: bold; text-decoration: underline; border: none !important; text-align: center; padding: 20px 0 10px 0; }
                .day-label { font-weight: bold; background-color: #FAFAFA; text-align: left; border: 2px solid #000; }
                .footer-cell { border: none !important; font-weight: bold; text-align: left; padding-top: 30px; font-size: 11pt; }
                .empty-spacer { border: none !important; height: 15px; }
            </style>
            </head>
            <body>
        `;ne+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,we-3)}" style="border:none"></td>
                    <td colspan="3" class="approval-cell">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-spacer"><td colspan="${we}" style="border:none"></td></tr>
                <tr class="title-row"><td colspan="${we}" class="title-main"> </td></tr>
                <tr class="title-row"><td colspan="${we}" class="title-sub">       22 . </td></tr>
                <tr class="title-row"><td colspan="${we}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-spacer"><td colspan="${we}" style="border:none"></td></tr>
            </table>
        `,[ie.First,ie.Second].forEach(z=>{ne+="<table>",ne+=`<tr><td colspan="${we}" class="shift-header">${z.toUpperCase()}</td></tr>`,ne+="<tr>",ne+='<th rowspan="2" class="header-cell" style="width: 120px;"> </th>',Ke.forEach(me=>{ne+=`<th colspan="${me.zones.length}" class="floor-cell">${me.floor}</th>`}),ne+="</tr>",ne+="<tr>",Tt.forEach(me=>{ne+=`<th class="header-cell" style="width: 150px;">${me.name}</th>`}),ne+="</tr>",bt.forEach(me=>{ne+="<tr>",ne+=`<td class="day-label">${me}</td>`,Tt.forEach($e=>{const Z=R($e.id,me,z);ne+=`<td>${Z?Z.name:"-"}</td>`}),ne+="</tr>"}),ne+="</table><br>"}),ne+=`
            <table>
                <tr class="empty-spacer"><td colspan="${we}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${Math.floor(we/2)}" class="footer-cell">    22 .</td>
                    <td colspan="${Math.ceil(we/4)}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${Math.ceil(we/4)}" class="footer-cell" style="text-align: right;">..</td>
                </tr>
            </table>
        `,ne+="</body></html>";const be=new Blob([ne],{type:"application/vnd.ms-excel"}),L=URL.createObjectURL(be),O=document.createElement("a");O.href=L,O.download=`__${c}_.xls`,document.body.appendChild(O),O.click(),document.body.removeChild(O)},X=async()=>{if(!N.name)return;const re=x.split(",").map(be=>be.trim()).filter(Boolean),we={...N,includedRooms:re};let ne=[...e];N.id?ne=ne.map(be=>be.id===N.id?{...be,...we}:be):ne.push({...we,id:Math.random().toString(36).substr(2,9)}),await n({dutyZones:ne}),w(!1)},Ee=async re=>{if(!window.confirm(" ?"))return;const we=e.filter(ne=>ne.id!==re);await n({dutyZones:we})},Te=re=>{var we;re?(Q(re),b(((we=re.includedRooms)==null?void 0:we.join(", "))||"")):(Q({}),b("")),w(!0)},qe=()=>{if(!B)return{recommended:[],others:[]};const re=B.day,we=e.find(O=>O.id===B.zoneId),ne=t.map(O=>{const z=m.filter(Z=>Z.teacherId===O.id&&Z.day===re&&Z.shift===h).length,me=s.some(Z=>Z.day===re&&Z.teacherId===O.id&&Z.zoneId!==B.zoneId&&Z.shift===h),$e=we&&we.includedRooms?m.filter(Z=>{var Y;return Z.teacherId===O.id&&Z.day===re&&Z.shift===h&&Z.roomId&&it(((Y=r.find(se=>se.id===Z.roomId))==null?void 0:Y.name)||Z.roomId,we)}).length:0;return{t:O,lessonsCount:z,isBusy:me,lessonsInZone:$e}}),be=ne.filter(O=>O.lessonsInZone>0&&!O.isBusy).sort((O,z)=>z.lessonsInZone-O.lessonsInZone).map(O=>({value:O.t.id,label:`${O.t.name} (${O.lessonsInZone} .  )`})),L=ne.filter(O=>(O.lessonsInZone===0||O.isBusy)&&O.lessonsCount>0).map(O=>({value:O.t.id,label:O.t.name+(O.isBusy?" ()":"")+(O.lessonsInZone===0?" (   )":"")}));return{recommended:be,others:L}},{recommended:ze,others:Ye}=qe(),Ke=U.useMemo(()=>{const re={};return e.forEach(ne=>{const be=ne.floor||" ";re[be]||(re[be]=[]),re[be].push(ne)}),Object.keys(re).sort().map(ne=>({floor:ne,zones:re[ne].sort((be,L)=>(be.order||0)-(L.order||0))}))},[e]),Tt=U.useMemo(()=>Ke.flatMap(re=>re.zones),[Ke]);return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(K,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ie.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ie.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:c,onChange:re=>d(Number(re.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1-"}),l.jsx("option",{value:2,children:"2-"})]})]}),l.jsxs("button",{onClick:We,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Zap",size:16})," "]}),l.jsx("button",{onClick:ae,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:l.jsx(K,{name:"Trash2",size:16})}),l.jsxs("button",{onClick:xe,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Image",size:16})," PNG"]}),l.jsxs("button",{onClick:Re,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),l.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(re=>l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[re.name," ",l.jsxs("span",{className:"text-slate-400 text-xs",children:["(",re.floor||"?",")"]})]}),l.jsx("button",{onClick:()=>Te(re),className:"text-slate-400 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:12})})]},re.id)),l.jsxs("button",{onClick:()=>Te(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[l.jsx(K,{name:"Plus",size:14})," "]})]}),l.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),bt.map(re=>l.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:re},re))]})}),l.jsx("tbody",{children:e.map(re=>{var we;return l.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[l.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[l.jsx("div",{children:re.name}),l.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:re.floor}),l.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(we=re.includedRooms)==null?void 0:we.join(", ")})]}),bt.map(ne=>{const be=R(re.id,ne,h),L=be?P(re.id,ne,h,be.id):!1;return l.jsx("td",{onClick:()=>E(re.id,ne),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${be?L?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:be?l.jsxs("div",{className:`font-bold text-sm ${L?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[be.name,L&&l.jsx("div",{className:"text-[9px] uppercase",children:""})]}):l.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${re.id}-${ne}`)})]},re.id)})})]})})]}),l.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Image",size:16}),"  "]}),l.jsx("div",{className:"overflow-auto custom-scrollbar",children:l.jsxs("div",{ref:v,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[l.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:o.approvalBlock},children:l.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[l.jsx("div",{className:"font-bold mb-1",children:""}),l.jsx("div",{children:" "}),l.jsx("div",{children:" "}),l.jsx("div",{children:"  22 . "}),l.jsxs("div",{className:"mt-8 flex items-end",children:[l.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:o.signatureLine}}),l.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),l.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:o.mainTitle},children:[l.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),l.jsx("h2",{className:"text-lg",children:"       22 . "}),l.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/$",new Date().getFullYear()+1,"  "]})]}),[ie.First,ie.Second].map((re,we)=>l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:re}),l.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:" "}),Ke.map(ne=>l.jsx("th",{colSpan:ne.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:ne.floor},ne.floor))]}),l.jsx("tr",{children:Tt.map(ne=>l.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:ne.name},ne.id))})]}),l.jsx("tbody",{children:bt.map(ne=>l.jsxs("tr",{children:[l.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:ne}),Tt.map(be=>{const L=R(be.id,ne,re);return l.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:L?L.name:"-"},be.id)})]},ne))})]})]},re)),l.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:o.footerBlock},children:[l.jsx("div",{children:"    22 ."}),l.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:o.signatureLine}}),l.jsx("div",{children:".."})]})]})})]}),l.jsx(Pn,{isOpen:y,onClose:()=>I(!1),title:" ",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[B&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(Oe=e.find(re=>re.id===B.zoneId))==null?void 0:Oe.name}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[l.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:B.day}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:h})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx(Xd,{options:[{label:" (   )",options:ze},{label:"",options:Ye}],value:_,onChange:re=>k(String(re)),placeholder:"   ",groupBy:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[l.jsx("button",{onClick:Ge,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),l.jsx("button",{onClick:Me,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),l.jsx(Pn,{isOpen:C,onClose:()=>w(!1),title:N.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:N.name||"",onChange:re=>Q({...N,name:re.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:N.floor||"",onChange:re=>Q({...N,floor:re.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:x,onChange:re=>b(re.target.value)}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[N.id&&l.jsx("button",{onClick:()=>{Ee(N.id),w(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:X,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},U6=()=>{const{setGuestRole:t,role:e,loading:r}=oo(),n=$c(),[s,A]=U.useState("select"),[i,a]=U.useState(""),[o,c]=U.useState(""),[d,h]=U.useState(""),[f,m]=U.useState(!1);U.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher")&&n("/dashboard")},[e,r,n]);const v=async I=>{if(I.preventDefault(),h(""),m(!0),!vn){h("Firebase .  ."),m(!1);return}try{let C=i;s==="teacher"&&(C="teacher@gymnasium22.com"),await sM(vn,C,o)}catch(C){console.error("Firebase Auth Error:",C);const w=C==null?void 0:C.code;let B="   .";switch(w){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":B="   .";break;case"auth/invalid-email":B="  email.";break;case"auth/too-many-requests":B="  . .";break;default:B=" .  ."}h(B)}finally{m(!1)}},y=()=>{t(),n("/schedule")};return l.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),l.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),l.jsxs("div",{className:"glass-panel rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:l.jsx(K,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:y,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(K,{name:"Users",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(K,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(K,{name:"BookOpen",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx(K,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(K,{name:"Settings",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(K,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:v,className:"space-y-5 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(K,{name:"ArrowRight",className:"rotate-180",size:24})}),l.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"email",value:i,onChange:I=>a(I.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",value:o,onChange:I=>c(I.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),l.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?l.jsx(K,{name:"Loader",className:"animate-spin",size:20}):l.jsx(K,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},nA=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=oo();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(K,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(Eh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Eh,{to:"/login",replace:!0})},Q6=()=>{const{role:t,loading:e}=oo();return e?null:t==="guest"?l.jsx(Eh,{to:"/schedule",replace:!0}):l.jsx(Eh,{to:"/dashboard",replace:!0})},k6=()=>{const[t,e]=U.useState(!1),[r,n]=U.useState(localStorage.getItem("theme")||"light"),[s,A]=U.useState(localStorage.getItem("new_year_mode")==="true"),{isLoading:i}=hs(),{logout:a,role:o,user:c}=oo();if(U.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",r)},[r]),U.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),localStorage.setItem("new_year_mode",String(s))},[s]),i)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(K,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin","teacher"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(o||""));return l.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&l.jsx("div",{className:"snow-overlay no-print"}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none`,children:l.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&l.jsx("div",{className:"bg-garland"}),l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[l.jsx(K,{name:"GraduationCap",size:24}),s&&l.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:[l.jsx("div",{className:"px-2 mb-2",children:l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""})}),h.map(f=>l.jsxs(Dd,{to:f.to,onClick:()=>e(!1),className:({isActive:m})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${m?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(K,{name:f.icon,size:20}),f.label]},f.to))]}),l.jsx("div",{className:"hidden lg:block",children:l.jsx(kO,{})}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between px-2",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),l.jsx("button",{onClick:a,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(K,{name:"LogOut",size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?l.jsx(K,{name:"Moon",size:18}):l.jsx(K,{name:"Sun",size:18})}),l.jsx("button",{onClick:()=>A(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:l.jsx(K,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&l.jsx("div",{className:"ml-auto text-xl",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:l.jsx(S2,{})}),l.jsx(NO,{onMenuClick:()=>e(!0),role:o})]})]})},N6=()=>{const[t,e]=U.useState(null),[r,n]=U.useState(!0),[s]=$2(),A=s.get("id");return U.useEffect(()=>{A?(n(!0),Ur.getPublicData(A).then(i=>{const a={...an,...i,settings:{...an.settings,...i==null?void 0:i.settings}};e(a),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[A]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(K,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(QF,{initialData:t,children:l.jsx(RF,{children:l.jsx(DF,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(K,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(OF,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(K,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function R6(){return l.jsx(SO,{children:l.jsx(QF,{children:l.jsx(RF,{children:l.jsx(DF,{children:l.jsx(O2,{children:l.jsxs(Q2,{children:[l.jsx(sn,{path:"/login",element:l.jsx(U6,{})}),l.jsxs(sn,{path:"/",element:l.jsx(nA,{children:l.jsx(k6,{})}),children:[l.jsx(sn,{index:!0,element:l.jsx(Q6,{})}),l.jsx(sn,{path:"dashboard",element:l.jsx(nA,{allowedRoles:["admin","teacher"],children:l.jsx(RO,{})})}),l.jsx(sn,{path:"schedule",element:l.jsx(Nb,{semester:1})}),l.jsx(sn,{path:"schedule2",element:l.jsx(Nb,{semester:2})}),l.jsx(sn,{path:"substitutions",element:l.jsx(nA,{allowedRoles:["admin"],children:l.jsx(d6,{})})}),l.jsx(sn,{path:"duty",element:l.jsx(nA,{allowedRoles:["admin","teacher"],children:l.jsx(S6,{})})}),l.jsx(sn,{path:"directory",element:l.jsx(nA,{allowedRoles:["admin"],children:l.jsx(u6,{})})}),l.jsx(sn,{path:"admin",element:l.jsx(nA,{allowedRoles:["admin"],children:l.jsx(h6,{})})}),l.jsx(sn,{path:"reports",element:l.jsx(nA,{allowedRoles:["admin"],children:l.jsx(F6,{})})}),l.jsx(sn,{path:"export",element:l.jsx(nA,{allowedRoles:["admin"],children:l.jsx(T6,{})})})]}),l.jsx(sn,{path:"/public",element:l.jsx(N6,{})})]})})})})})})}const Nb=({semester:t=1})=>{const{role:e}=oo();return l.jsx(OF,{readOnly:e!=="admin",semester:t})};Qp.createRoot(document.getElementById("root")).render(l.jsx(Bs.StrictMode,{children:l.jsx(R6,{})}));
