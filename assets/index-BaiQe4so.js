function xU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(n,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=r(s);fetch(s.href,A)}})();function Ob(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hb={exports:{}},ff={},Vb={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zc=Symbol.for("react.element"),vU=Symbol.for("react.portal"),BU=Symbol.for("react.fragment"),CU=Symbol.for("react.strict_mode"),bU=Symbol.for("react.profiler"),_U=Symbol.for("react.provider"),IU=Symbol.for("react.context"),EU=Symbol.for("react.forward_ref"),TU=Symbol.for("react.suspense"),FU=Symbol.for("react.memo"),SU=Symbol.for("react.lazy"),Fx=Symbol.iterator;function UU(t){return t===null||typeof t!="object"?null:(t=Fx&&t[Fx]||t["@@iterator"],typeof t=="function"?t:null)}var Kb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gb=Object.assign,zb={};function Sa(t,e,r){this.props=t,this.context=e,this.refs=zb,this.updater=r||Kb}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $b(){}$b.prototype=Sa.prototype;function Q0(t,e,r){this.props=t,this.context=e,this.refs=zb,this.updater=r||Kb}var N0=Q0.prototype=new $b;N0.constructor=Q0;Gb(N0,Sa.prototype);N0.isPureReactComponent=!0;var Sx=Array.isArray,Wb=Object.prototype.hasOwnProperty,R0={current:null},qb={key:!0,ref:!0,__self:!0,__source:!0};function Jb(t,e,r){var n,s={},A=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)Wb.call(e,n)&&!qb.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];s.children=o}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:zc,type:t,key:A,ref:i,props:s,_owner:R0.current}}function kU(t,e){return{$$typeof:zc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function D0(t){return typeof t=="object"&&t!==null&&t.$$typeof===zc}function QU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ux=/\/+/g;function Eg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QU(""+t.key):e.toString(36)}function Td(t,e,r,n,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case zc:case vU:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Eg(i,0):n,Sx(s)?(r="",t!=null&&(r=t.replace(Ux,"$&/")+"/"),Td(s,e,r,"",function(c){return c})):s!=null&&(D0(s)&&(s=kU(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ux,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Sx(t))for(var a=0;a<t.length;a++){A=t[a];var o=n+Eg(A,a);i+=Td(A,e,r,o,s)}else if(o=UU(t),typeof o=="function")for(t=o.call(t),a=0;!(A=t.next()).done;)A=A.value,o=n+Eg(A,a++),i+=Td(A,e,r,o,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ku(t,e,r){if(t==null)return t;var n=[],s=0;return Td(t,n,"","",function(A){return e.call(r,A,s++)}),n}function NU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Fd={transition:null},RU={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Fd,ReactCurrentOwner:R0};function Xb(){throw Error("act(...) is not supported in production builds of React.")}pt.Children={map:ku,forEach:function(t,e,r){ku(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ku(t,function(){e++}),e},toArray:function(t){return ku(t,function(e){return e})||[]},only:function(t){if(!D0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pt.Component=Sa;pt.Fragment=BU;pt.Profiler=bU;pt.PureComponent=Q0;pt.StrictMode=CU;pt.Suspense=TU;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RU;pt.act=Xb;pt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Gb({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=R0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)Wb.call(e,o)&&!qb.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:zc,type:t.type,key:s,ref:A,props:n,_owner:i}};pt.createContext=function(t){return t={$$typeof:IU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_U,_context:t},t.Consumer=t};pt.createElement=Jb;pt.createFactory=function(t){var e=Jb.bind(null,t);return e.type=t,e};pt.createRef=function(){return{current:null}};pt.forwardRef=function(t){return{$$typeof:EU,render:t}};pt.isValidElement=D0;pt.lazy=function(t){return{$$typeof:SU,_payload:{_status:-1,_result:t},_init:NU}};pt.memo=function(t,e){return{$$typeof:FU,type:t,compare:e===void 0?null:e}};pt.startTransition=function(t){var e=Fd.transition;Fd.transition={};try{t()}finally{Fd.transition=e}};pt.unstable_act=Xb;pt.useCallback=function(t,e){return nn.current.useCallback(t,e)};pt.useContext=function(t){return nn.current.useContext(t)};pt.useDebugValue=function(){};pt.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};pt.useEffect=function(t,e){return nn.current.useEffect(t,e)};pt.useId=function(){return nn.current.useId()};pt.useImperativeHandle=function(t,e,r){return nn.current.useImperativeHandle(t,e,r)};pt.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};pt.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};pt.useMemo=function(t,e){return nn.current.useMemo(t,e)};pt.useReducer=function(t,e,r){return nn.current.useReducer(t,e,r)};pt.useRef=function(t){return nn.current.useRef(t)};pt.useState=function(t){return nn.current.useState(t)};pt.useSyncExternalStore=function(t,e,r){return nn.current.useSyncExternalStore(t,e,r)};pt.useTransition=function(){return nn.current.useTransition()};pt.version="18.3.1";Vb.exports=pt;var T=Vb.exports;const Cs=Ob(T),DU=xU({__proto__:null,default:Cs},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PU=T,LU=Symbol.for("react.element"),jU=Symbol.for("react.fragment"),MU=Object.prototype.hasOwnProperty,OU=PU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HU={key:!0,ref:!0,__self:!0,__source:!0};function Yb(t,e,r){var n,s={},A=null,i=null;r!==void 0&&(A=""+r),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)MU.call(e,n)&&!HU.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:LU,type:t,key:A,ref:i,props:s,_owner:OU.current}}ff.Fragment=jU;ff.jsx=Yb;ff.jsxs=Yb;Hb.exports=ff;var l=Hb.exports,Dp={},Zb={exports:{}},Tn={},e_={exports:{}},t_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ae,Fe){var ke=ae.length;ae.push(Fe);e:for(;0<ke;){var st=ke-1>>>1,We=ae[st];if(0<s(We,Fe))ae[st]=Fe,ae[ke]=We,ke=st;else break e}}function r(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var Fe=ae[0],ke=ae.pop();if(ke!==Fe){ae[0]=ke;e:for(var st=0,We=ae.length,Ye=We>>>1;st<Ye;){var gt=2*(st+1)-1,ee=ae[gt],ze=gt+1,He=ae[ze];if(0>s(ee,ke))ze<We&&0>s(He,ee)?(ae[st]=He,ae[ze]=ke,st=ze):(ae[st]=ee,ae[gt]=ke,st=gt);else if(ze<We&&0>s(He,ke))ae[st]=He,ae[ze]=ke,st=ze;else break e}}return Fe}function s(ae,Fe){var ke=ae.sortIndex-Fe.sortIndex;return ke!==0?ke:ae.id-Fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var o=[],c=[],d=1,h=null,f=3,m=!1,y=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ae){for(var Fe=r(c);Fe!==null;){if(Fe.callback===null)n(c);else if(Fe.startTime<=ae)n(c),Fe.sortIndex=Fe.expirationTime,e(o,Fe);else break;Fe=r(c)}}function F(ae){if(C=!1,b(ae),!y)if(r(o)!==null)y=!0,$e(Q);else{var Fe=r(c);Fe!==null&&je(F,Fe.startTime-ae)}}function Q(ae,Fe){y=!1,C&&(C=!1,B(v),v=-1),m=!0;var ke=f;try{for(b(Fe),h=r(o);h!==null&&(!(h.expirationTime>Fe)||ae&&!R());){var st=h.callback;if(typeof st=="function"){h.callback=null,f=h.priorityLevel;var We=st(h.expirationTime<=Fe);Fe=t.unstable_now(),typeof We=="function"?h.callback=We:h===r(o)&&n(o),b(Fe)}else n(o);h=r(o)}if(h!==null)var Ye=!0;else{var gt=r(c);gt!==null&&je(F,gt.startTime-Fe),Ye=!1}return Ye}finally{h=null,f=ke,m=!1}}var D=!1,x=null,v=-1,_=5,S=-1;function R(){return!(t.unstable_now()-S<_)}function P(){if(x!==null){var ae=t.unstable_now();S=ae;var Fe=!0;try{Fe=x(!0,ae)}finally{Fe?k():(D=!1,x=null)}}else D=!1}var k;if(typeof w=="function")k=function(){w(P)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ze=me.port2;me.port1.onmessage=P,k=function(){Ze.postMessage(null)}}else k=function(){I(P,0)};function $e(ae){x=ae,D||(D=!0,k())}function je(ae,Fe){v=I(function(){ae(t.unstable_now())},Fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,$e(Q))},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<ae?Math.floor(1e3/ae):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(ae){switch(f){case 1:case 2:case 3:var Fe=3;break;default:Fe=f}var ke=f;f=Fe;try{return ae()}finally{f=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ae,Fe){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ke=f;f=ae;try{return Fe()}finally{f=ke}},t.unstable_scheduleCallback=function(ae,Fe,ke){var st=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?st+ke:st):ke=st,ae){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=ke+We,ae={id:d++,callback:Fe,priorityLevel:ae,startTime:ke,expirationTime:We,sortIndex:-1},ke>st?(ae.sortIndex=ke,e(c,ae),r(o)===null&&ae===r(c)&&(C?(B(v),v=-1):C=!0,je(F,ke-st))):(ae.sortIndex=We,e(o,ae),y||m||(y=!0,$e(Q))),ae},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(ae){var Fe=f;return function(){var ke=f;f=Fe;try{return ae.apply(this,arguments)}finally{f=ke}}}})(t_);e_.exports=t_;var VU=e_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KU=T,_n=VU;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r_=new Set,cc={};function eo(t,e){sa(t,e),sa(t+"Capture",e)}function sa(t,e){for(cc[t]=e,t=0;t<e.length;t++)r_.add(e[t])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=Object.prototype.hasOwnProperty,GU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kx={},Qx={};function zU(t){return Pp.call(Qx,t)?!0:Pp.call(kx,t)?!1:GU.test(t)?Qx[t]=!0:(kx[t]=!0,!1)}function $U(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WU(t,e,r,n){if(e===null||typeof e>"u"||$U(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,r,n,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lr[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lr[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lr[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lr[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lr[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lr[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lr[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lr[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lr[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var P0=/[\-:]([a-z])/g;function L0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(P0,L0);Lr[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(P0,L0);Lr[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(P0,L0);Lr[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lr[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lr[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function j0(t,e,r,n){var s=Lr.hasOwnProperty(e)?Lr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WU(e,r,s,n)&&(r=null),n||s===null?zU(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Hs=KU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qu=Symbol.for("react.element"),Uo=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),M0=Symbol.for("react.strict_mode"),Lp=Symbol.for("react.profiler"),n_=Symbol.for("react.provider"),s_=Symbol.for("react.context"),O0=Symbol.for("react.forward_ref"),jp=Symbol.for("react.suspense"),Mp=Symbol.for("react.suspense_list"),H0=Symbol.for("react.memo"),AA=Symbol.for("react.lazy"),A_=Symbol.for("react.offscreen"),Nx=Symbol.iterator;function Al(t){return t===null||typeof t!="object"?null:(t=Nx&&t[Nx]||t["@@iterator"],typeof t=="function"?t:null)}var sr=Object.assign,Tg;function _l(t){if(Tg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Tg=e&&e[1]||""}return`
`+Tg+t}var Fg=!1;function Sg(t,e){if(!t||Fg)return"";Fg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=n.stack.split(`
`),i=s.length-1,a=A.length-1;1<=i&&0<=a&&s[i]!==A[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==A[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==A[a]){var o=`
`+s[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=a);break}}}finally{Fg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?_l(t):""}function qU(t){switch(t.tag){case 5:return _l(t.type);case 16:return _l("Lazy");case 13:return _l("Suspense");case 19:return _l("SuspenseList");case 0:case 2:case 15:return t=Sg(t.type,!1),t;case 11:return t=Sg(t.type.render,!1),t;case 1:return t=Sg(t.type,!0),t;default:return""}}function Op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ko:return"Fragment";case Uo:return"Portal";case Lp:return"Profiler";case M0:return"StrictMode";case jp:return"Suspense";case Mp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s_:return(t.displayName||"Context")+".Consumer";case n_:return(t._context.displayName||"Context")+".Provider";case O0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case H0:return e=t.displayName||null,e!==null?e:Op(t.type)||"Memo";case AA:e=t._payload,t=t._init;try{return Op(t(e))}catch{}}return null}function JU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Op(e);case 8:return e===M0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function MA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XU(t){var e=i_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,A=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nu(t){t._valueTracker||(t._valueTracker=XU(t))}function o_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=i_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hp(t,e){var r=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Rx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=MA(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a_(t,e){e=e.checked,e!=null&&j0(t,"checked",e,!1)}function Vp(t,e){a_(t,e);var r=MA(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Kp(t,e.type,MA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Kp(t,e,r){(e!=="number"||ih(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Il=Array.isArray;function zo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+MA(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Px(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(pe(92));if(Il(r)){if(1<r.length)throw Error(pe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:MA(r)}}function l_(t,e){var r=MA(e.value),n=MA(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Lx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ru,u_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ru=Ru||document.createElement("div"),Ru.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ru.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YU=["Webkit","ms","Moz","O"];Object.keys(Vl).forEach(function(t){YU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vl[e]=Vl[t]})});function d_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Vl.hasOwnProperty(t)&&Vl[t]?(""+e).trim():e+"px"}function h_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=d_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var ZU=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $p(t,e){if(e){if(ZU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function Wp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=null;function V0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jp=null,$o=null,Wo=null;function jx(t){if(t=qc(t)){if(typeof Jp!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=yf(e),Jp(t.stateNode,t.type,e))}}function f_(t){$o?Wo?Wo.push(t):Wo=[t]:$o=t}function g_(){if($o){var t=$o,e=Wo;if(Wo=$o=null,jx(t),e)for(t=0;t<e.length;t++)jx(e[t])}}function p_(t,e){return t(e)}function m_(){}var Ug=!1;function w_(t,e,r){if(Ug)return t(e,r);Ug=!0;try{return p_(t,e,r)}finally{Ug=!1,($o!==null||Wo!==null)&&(m_(),g_())}}function dc(t,e){var r=t.stateNode;if(r===null)return null;var n=yf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(pe(231,e,typeof r));return r}var Xp=!1;if(Qs)try{var il={};Object.defineProperty(il,"passive",{get:function(){Xp=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{Xp=!1}function ek(t,e,r,n,s,A,i,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Kl=!1,oh=null,ah=!1,Yp=null,tk={onError:function(t){Kl=!0,oh=t}};function rk(t,e,r,n,s,A,i,a,o){Kl=!1,oh=null,ek.apply(tk,arguments)}function nk(t,e,r,n,s,A,i,a,o){if(rk.apply(this,arguments),Kl){if(Kl){var c=oh;Kl=!1,oh=null}else throw Error(pe(198));ah||(ah=!0,Yp=c)}}function to(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function y_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mx(t){if(to(t)!==t)throw Error(pe(188))}function sk(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var A=s.alternate;if(A===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===r)return Mx(s),t;if(A===n)return Mx(s),e;A=A.sibling}throw Error(pe(188))}if(r.return!==n.return)r=s,n=A;else{for(var i=!1,a=s.child;a;){if(a===r){i=!0,r=s,n=A;break}if(a===n){i=!0,n=s,r=A;break}a=a.sibling}if(!i){for(a=A.child;a;){if(a===r){i=!0,r=A,n=s;break}if(a===n){i=!0,n=A,r=s;break}a=a.sibling}if(!i)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?t:e}function x_(t){return t=sk(t),t!==null?v_(t):null}function v_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v_(t);if(e!==null)return e;t=t.sibling}return null}var B_=_n.unstable_scheduleCallback,Ox=_n.unstable_cancelCallback,Ak=_n.unstable_shouldYield,ik=_n.unstable_requestPaint,ur=_n.unstable_now,ok=_n.unstable_getCurrentPriorityLevel,K0=_n.unstable_ImmediatePriority,C_=_n.unstable_UserBlockingPriority,lh=_n.unstable_NormalPriority,ak=_n.unstable_LowPriority,b_=_n.unstable_IdlePriority,gf=null,os=null;function lk(t){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:dk,ck=Math.log,uk=Math.LN2;function dk(t){return t>>>=0,t===0?32:31-(ck(t)/uk|0)|0}var Du=64,Pu=4194304;function El(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ch(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,A=t.pingedLanes,i=r&268435455;if(i!==0){var a=i&~s;a!==0?n=El(a):(A&=i,A!==0&&(n=El(A)))}else i=r&~s,i!==0?n=El(i):A!==0&&(n=El(A));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-$n(e),s=1<<r,n|=t[r],e&=~s;return n}function hk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-$n(A),a=1<<i,o=s[i];o===-1?(!(a&r)||a&n)&&(s[i]=hk(a,e)):o<=e&&(t.expiredLanes|=a),A&=~a}}function Zp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function __(){var t=Du;return Du<<=1,!(Du&4194240)&&(Du=64),t}function kg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function $c(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=r}function gk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-$n(r),A=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~A}}function G0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-$n(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var St=0;function I_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var E_,z0,T_,F_,S_,em=!1,Lu=[],_A=null,IA=null,EA=null,hc=new Map,fc=new Map,aA=[],pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hx(t,e){switch(t){case"focusin":case"focusout":_A=null;break;case"dragenter":case"dragleave":IA=null;break;case"mouseover":case"mouseout":EA=null;break;case"pointerover":case"pointerout":hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(e.pointerId)}}function ol(t,e,r,n,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:A,targetContainers:[s]},e!==null&&(e=qc(e),e!==null&&z0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mk(t,e,r,n,s){switch(e){case"focusin":return _A=ol(_A,t,e,r,n,s),!0;case"dragenter":return IA=ol(IA,t,e,r,n,s),!0;case"mouseover":return EA=ol(EA,t,e,r,n,s),!0;case"pointerover":var A=s.pointerId;return hc.set(A,ol(hc.get(A)||null,t,e,r,n,s)),!0;case"gotpointercapture":return A=s.pointerId,fc.set(A,ol(fc.get(A)||null,t,e,r,n,s)),!0}return!1}function U_(t){var e=Ei(t.target);if(e!==null){var r=to(e);if(r!==null){if(e=r.tag,e===13){if(e=y_(r),e!==null){t.blockedOn=e,S_(t.priority,function(){T_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);qp=n,r.target.dispatchEvent(n),qp=null}else return e=qc(r),e!==null&&z0(e),t.blockedOn=r,!1;e.shift()}return!0}function Vx(t,e,r){Sd(t)&&r.delete(e)}function wk(){em=!1,_A!==null&&Sd(_A)&&(_A=null),IA!==null&&Sd(IA)&&(IA=null),EA!==null&&Sd(EA)&&(EA=null),hc.forEach(Vx),fc.forEach(Vx)}function al(t,e){t.blockedOn===e&&(t.blockedOn=null,em||(em=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,wk)))}function gc(t){function e(s){return al(s,t)}if(0<Lu.length){al(Lu[0],t);for(var r=1;r<Lu.length;r++){var n=Lu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(_A!==null&&al(_A,t),IA!==null&&al(IA,t),EA!==null&&al(EA,t),hc.forEach(e),fc.forEach(e),r=0;r<aA.length;r++)n=aA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<aA.length&&(r=aA[0],r.blockedOn===null);)U_(r),r.blockedOn===null&&aA.shift()}var qo=Hs.ReactCurrentBatchConfig,uh=!0;function yk(t,e,r,n){var s=St,A=qo.transition;qo.transition=null;try{St=1,$0(t,e,r,n)}finally{St=s,qo.transition=A}}function xk(t,e,r,n){var s=St,A=qo.transition;qo.transition=null;try{St=4,$0(t,e,r,n)}finally{St=s,qo.transition=A}}function $0(t,e,r,n){if(uh){var s=tm(t,e,r,n);if(s===null)Hg(t,e,n,dh,r),Hx(t,n);else if(mk(s,t,e,r,n))n.stopPropagation();else if(Hx(t,n),e&4&&-1<pk.indexOf(t)){for(;s!==null;){var A=qc(s);if(A!==null&&E_(A),A=tm(t,e,r,n),A===null&&Hg(t,e,n,dh,r),A===s)break;s=A}s!==null&&n.stopPropagation()}else Hg(t,e,n,null,r)}}var dh=null;function tm(t,e,r,n){if(dh=null,t=V0(n),t=Ei(t),t!==null)if(e=to(t),e===null)t=null;else if(r=e.tag,r===13){if(t=y_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dh=t,null}function k_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ok()){case K0:return 1;case C_:return 4;case lh:case ak:return 16;case b_:return 536870912;default:return 16}default:return 16}}var mA=null,W0=null,Ud=null;function Q_(){if(Ud)return Ud;var t,e=W0,r=e.length,n,s="value"in mA?mA.value:mA.textContent,A=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[A-n];n++);return Ud=s.slice(t,1<n?1-n:void 0)}function kd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ju(){return!0}function Kx(){return!1}function Fn(t){function e(r,n,s,A,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(A):A[a]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ju:Kx,this.isPropagationStopped=Kx,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ju)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ju)},persist:function(){},isPersistent:ju}),e}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q0=Fn(Ua),Wc=sr({},Ua,{view:0,detail:0}),vk=Fn(Wc),Qg,Ng,ll,pf=sr({},Wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:J0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ll&&(ll&&t.type==="mousemove"?(Qg=t.screenX-ll.screenX,Ng=t.screenY-ll.screenY):Ng=Qg=0,ll=t),Qg)},movementY:function(t){return"movementY"in t?t.movementY:Ng}}),Gx=Fn(pf),Bk=sr({},pf,{dataTransfer:0}),Ck=Fn(Bk),bk=sr({},Wc,{relatedTarget:0}),Rg=Fn(bk),_k=sr({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),Ik=Fn(_k),Ek=sr({},Ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tk=Fn(Ek),Fk=sr({},Ua,{data:0}),zx=Fn(Fk),Sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kk[t])?!!e[t]:!1}function J0(){return Qk}var Nk=sr({},Wc,{key:function(t){if(t.key){var e=Sk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:J0,charCode:function(t){return t.type==="keypress"?kd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rk=Fn(Nk),Dk=sr({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$x=Fn(Dk),Pk=sr({},Wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:J0}),Lk=Fn(Pk),jk=sr({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mk=Fn(jk),Ok=sr({},pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hk=Fn(Ok),Vk=[9,13,27,32],X0=Qs&&"CompositionEvent"in window,Gl=null;Qs&&"documentMode"in document&&(Gl=document.documentMode);var Kk=Qs&&"TextEvent"in window&&!Gl,N_=Qs&&(!X0||Gl&&8<Gl&&11>=Gl),Wx=" ",qx=!1;function R_(t,e){switch(t){case"keyup":return Vk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function Gk(t,e){switch(t){case"compositionend":return D_(e);case"keypress":return e.which!==32?null:(qx=!0,Wx);case"textInput":return t=e.data,t===Wx&&qx?null:t;default:return null}}function zk(t,e){if(Qo)return t==="compositionend"||!X0&&R_(t,e)?(t=Q_(),Ud=W0=mA=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return N_&&e.locale!=="ko"?null:e.data;default:return null}}var $k={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$k[t.type]:e==="textarea"}function P_(t,e,r,n){f_(n),e=hh(e,"onChange"),0<e.length&&(r=new q0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var zl=null,pc=null;function Wk(t){W_(t,0)}function mf(t){var e=Do(t);if(o_(e))return t}function qk(t,e){if(t==="change")return e}var L_=!1;if(Qs){var Dg;if(Qs){var Pg="oninput"in document;if(!Pg){var Xx=document.createElement("div");Xx.setAttribute("oninput","return;"),Pg=typeof Xx.oninput=="function"}Dg=Pg}else Dg=!1;L_=Dg&&(!document.documentMode||9<document.documentMode)}function Yx(){zl&&(zl.detachEvent("onpropertychange",j_),pc=zl=null)}function j_(t){if(t.propertyName==="value"&&mf(pc)){var e=[];P_(e,pc,t,V0(t)),w_(Wk,e)}}function Jk(t,e,r){t==="focusin"?(Yx(),zl=e,pc=r,zl.attachEvent("onpropertychange",j_)):t==="focusout"&&Yx()}function Xk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mf(pc)}function Yk(t,e){if(t==="click")return mf(e)}function Zk(t,e){if(t==="input"||t==="change")return mf(e)}function eQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:eQ;function mc(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Pp.call(e,s)||!Jn(t[s],e[s]))return!1}return!0}function Zx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ev(t,e){var r=Zx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zx(r)}}function M_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?M_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function O_(){for(var t=window,e=ih();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ih(t.document)}return e}function Y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tQ(t){var e=O_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&M_(r.ownerDocument.documentElement,r)){if(n!==null&&Y0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,A=Math.min(n.start,s);n=n.end===void 0?A:Math.min(n.end,s),!t.extend&&A>n&&(s=n,n=A,A=s),s=ev(r,A);var i=ev(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rQ=Qs&&"documentMode"in document&&11>=document.documentMode,No=null,rm=null,$l=null,nm=!1;function tv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nm||No==null||No!==ih(n)||(n=No,"selectionStart"in n&&Y0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$l&&mc($l,n)||($l=n,n=hh(rm,"onSelect"),0<n.length&&(e=new q0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=No)))}function Mu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ro={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionend:Mu("Transition","TransitionEnd")},Lg={},H_={};Qs&&(H_=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function wf(t){if(Lg[t])return Lg[t];if(!Ro[t])return t;var e=Ro[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in H_)return Lg[t]=e[r];return t}var V_=wf("animationend"),K_=wf("animationiteration"),G_=wf("animationstart"),z_=wf("transitionend"),$_=new Map,rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ZA(t,e){$_.set(t,e),eo(e,[t])}for(var jg=0;jg<rv.length;jg++){var Mg=rv[jg],nQ=Mg.toLowerCase(),sQ=Mg[0].toUpperCase()+Mg.slice(1);ZA(nQ,"on"+sQ)}ZA(V_,"onAnimationEnd");ZA(K_,"onAnimationIteration");ZA(G_,"onAnimationStart");ZA("dblclick","onDoubleClick");ZA("focusin","onFocus");ZA("focusout","onBlur");ZA(z_,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tl));function nv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,nk(n,e,void 0,t),t.currentTarget=null}function W_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var A=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==A&&s.isPropagationStopped())break e;nv(s,a,c),A=o}else for(i=0;i<n.length;i++){if(a=n[i],o=a.instance,c=a.currentTarget,a=a.listener,o!==A&&s.isPropagationStopped())break e;nv(s,a,c),A=o}}}if(ah)throw t=Yp,ah=!1,Yp=null,t}function Kt(t,e){var r=e[am];r===void 0&&(r=e[am]=new Set);var n=t+"__bubble";r.has(n)||(q_(e,t,2,!1),r.add(n))}function Og(t,e,r){var n=0;e&&(n|=4),q_(r,t,n,e)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function wc(t){if(!t[Ou]){t[Ou]=!0,r_.forEach(function(r){r!=="selectionchange"&&(AQ.has(r)||Og(r,!1,t),Og(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ou]||(e[Ou]=!0,Og("selectionchange",!1,e))}}function q_(t,e,r,n){switch(k_(e)){case 1:var s=yk;break;case 4:s=xk;break;default:s=$0}r=s.bind(null,e,r,t),s=void 0,!Xp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Hg(t,e,r,n,s){var A=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Ei(a),i===null)return;if(o=i.tag,o===5||o===6){n=A=i;continue e}a=a.parentNode}}n=n.return}w_(function(){var c=A,d=V0(r),h=[];e:{var f=$_.get(t);if(f!==void 0){var m=q0,y=t;switch(t){case"keypress":if(kd(r)===0)break e;case"keydown":case"keyup":m=Rk;break;case"focusin":y="focus",m=Rg;break;case"focusout":y="blur",m=Rg;break;case"beforeblur":case"afterblur":m=Rg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Gx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Lk;break;case V_:case K_:case G_:m=Ik;break;case z_:m=Mk;break;case"scroll":m=vk;break;case"wheel":m=Hk;break;case"copy":case"cut":case"paste":m=Tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$x}var C=(e&4)!==0,I=!C&&t==="scroll",B=C?f!==null?f+"Capture":null:f;C=[];for(var w=c,b;w!==null;){b=w;var F=b.stateNode;if(b.tag===5&&F!==null&&(b=F,B!==null&&(F=dc(w,B),F!=null&&C.push(yc(w,F,b)))),I)break;w=w.return}0<C.length&&(f=new m(f,y,null,r,d),h.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==qp&&(y=r.relatedTarget||r.fromElement)&&(Ei(y)||y[Ns]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=c,y=y?Ei(y):null,y!==null&&(I=to(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(C=Gx,F="onMouseLeave",B="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(C=$x,F="onPointerLeave",B="onPointerEnter",w="pointer"),I=m==null?f:Do(m),b=y==null?f:Do(y),f=new C(F,w+"leave",m,r,d),f.target=I,f.relatedTarget=b,F=null,Ei(d)===c&&(C=new C(B,w+"enter",y,r,d),C.target=b,C.relatedTarget=I,F=C),I=F,m&&y)t:{for(C=m,B=y,w=0,b=C;b;b=ho(b))w++;for(b=0,F=B;F;F=ho(F))b++;for(;0<w-b;)C=ho(C),w--;for(;0<b-w;)B=ho(B),b--;for(;w--;){if(C===B||B!==null&&C===B.alternate)break t;C=ho(C),B=ho(B)}C=null}else C=null;m!==null&&sv(h,f,m,C,!1),y!==null&&I!==null&&sv(h,I,y,C,!0)}}e:{if(f=c?Do(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var Q=qk;else if(Jx(f))if(L_)Q=Zk;else{Q=Xk;var D=Jk}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(Q=Yk);if(Q&&(Q=Q(t,c))){P_(h,Q,r,d);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Kp(f,"number",f.value)}switch(D=c?Do(c):window,t){case"focusin":(Jx(D)||D.contentEditable==="true")&&(No=D,rm=c,$l=null);break;case"focusout":$l=rm=No=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,tv(h,r,d);break;case"selectionchange":if(rQ)break;case"keydown":case"keyup":tv(h,r,d)}var x;if(X0)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Qo?R_(t,r)&&(v="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(v="onCompositionStart");v&&(N_&&r.locale!=="ko"&&(Qo||v!=="onCompositionStart"?v==="onCompositionEnd"&&Qo&&(x=Q_()):(mA=d,W0="value"in mA?mA.value:mA.textContent,Qo=!0)),D=hh(c,v),0<D.length&&(v=new zx(v,t,null,r,d),h.push({event:v,listeners:D}),x?v.data=x:(x=D_(r),x!==null&&(v.data=x)))),(x=Kk?Gk(t,r):zk(t,r))&&(c=hh(c,"onBeforeInput"),0<c.length&&(d=new zx("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=x))}W_(h,e)})}function yc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function hh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=dc(t,r),A!=null&&n.unshift(yc(t,A,s)),A=dc(t,e),A!=null&&n.push(yc(t,A,s))),t=t.return}return n}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sv(t,e,r,n,s){for(var A=e._reactName,i=[];r!==null&&r!==n;){var a=r,o=a.alternate,c=a.stateNode;if(o!==null&&o===n)break;a.tag===5&&c!==null&&(a=c,s?(o=dc(r,A),o!=null&&i.unshift(yc(r,o,a))):s||(o=dc(r,A),o!=null&&i.push(yc(r,o,a)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var iQ=/\r\n?/g,oQ=/\u0000|\uFFFD/g;function Av(t){return(typeof t=="string"?t:""+t).replace(iQ,`
`).replace(oQ,"")}function Hu(t,e,r){if(e=Av(e),Av(t)!==e&&r)throw Error(pe(425))}function fh(){}var sm=null,Am=null;function im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var om=typeof setTimeout=="function"?setTimeout:void 0,aQ=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,lQ=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(t){return iv.resolve(null).then(t).catch(cQ)}:om;function cQ(t){setTimeout(function(){throw t})}function Vg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),gc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);gc(e)}function TA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ov(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ka=Math.random().toString(36).slice(2),ss="__reactFiber$"+ka,xc="__reactProps$"+ka,Ns="__reactContainer$"+ka,am="__reactEvents$"+ka,uQ="__reactListeners$"+ka,dQ="__reactHandles$"+ka;function Ei(t){var e=t[ss];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ns]||r[ss]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ov(t);t!==null;){if(r=t[ss])return r;t=ov(t)}return e}t=r,r=t.parentNode}return null}function qc(t){return t=t[ss]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function yf(t){return t[xc]||null}var lm=[],Po=-1;function ei(t){return{current:t}}function $t(t){0>Po||(t.current=lm[Po],lm[Po]=null,Po--)}function Ot(t,e){Po++,lm[Po]=t.current,t.current=e}var OA={},Xr=ei(OA),gn=ei(!1),Pi=OA;function Aa(t,e){var r=t.type.contextTypes;if(!r)return OA;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in r)s[A]=e[A];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function gh(){$t(gn),$t(Xr)}function av(t,e,r){if(Xr.current!==OA)throw Error(pe(168));Ot(Xr,e),Ot(gn,r)}function J_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(pe(108,JU(t)||"Unknown",s));return sr({},r,n)}function ph(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||OA,Pi=Xr.current,Ot(Xr,t),Ot(gn,gn.current),!0}function lv(t,e,r){var n=t.stateNode;if(!n)throw Error(pe(169));r?(t=J_(t,e,Pi),n.__reactInternalMemoizedMergedChildContext=t,$t(gn),$t(Xr),Ot(Xr,t)):$t(gn),Ot(gn,r)}var Bs=null,xf=!1,Kg=!1;function X_(t){Bs===null?Bs=[t]:Bs.push(t)}function hQ(t){xf=!0,X_(t)}function ti(){if(!Kg&&Bs!==null){Kg=!0;var t=0,e=St;try{var r=Bs;for(St=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Bs=null,xf=!1}catch(s){throw Bs!==null&&(Bs=Bs.slice(t+1)),B_(K0,ti),s}finally{St=e,Kg=!1}}return null}var Lo=[],jo=0,mh=null,wh=0,Un=[],kn=0,Li=null,bs=1,_s="";function wi(t,e){Lo[jo++]=wh,Lo[jo++]=mh,mh=t,wh=e}function Y_(t,e,r){Un[kn++]=bs,Un[kn++]=_s,Un[kn++]=Li,Li=t;var n=bs;t=_s;var s=32-$n(n)-1;n&=~(1<<s),r+=1;var A=32-$n(e)+s;if(30<A){var i=s-s%5;A=(n&(1<<i)-1).toString(32),n>>=i,s-=i,bs=1<<32-$n(e)+s|r<<s|n,_s=A+t}else bs=1<<A|r<<s|n,_s=t}function Z0(t){t.return!==null&&(wi(t,1),Y_(t,1,0))}function ew(t){for(;t===mh;)mh=Lo[--jo],Lo[jo]=null,wh=Lo[--jo],Lo[jo]=null;for(;t===Li;)Li=Un[--kn],Un[kn]=null,_s=Un[--kn],Un[kn]=null,bs=Un[--kn],Un[kn]=null}var bn=null,Cn=null,Xt=!1,zn=null;function Z_(t,e){var r=Nn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function cv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,Cn=TA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Li!==null?{id:bs,overflow:_s}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Nn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,bn=t,Cn=null,!0):!1;default:return!1}}function cm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function um(t){if(Xt){var e=Cn;if(e){var r=e;if(!cv(t,e)){if(cm(t))throw Error(pe(418));e=TA(r.nextSibling);var n=bn;e&&cv(t,e)?Z_(n,r):(t.flags=t.flags&-4097|2,Xt=!1,bn=t)}}else{if(cm(t))throw Error(pe(418));t.flags=t.flags&-4097|2,Xt=!1,bn=t}}}function uv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Vu(t){if(t!==bn)return!1;if(!Xt)return uv(t),Xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!im(t.type,t.memoizedProps)),e&&(e=Cn)){if(cm(t))throw eI(),Error(pe(418));for(;e;)Z_(t,e),e=TA(e.nextSibling)}if(uv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Cn=TA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=bn?TA(t.stateNode.nextSibling):null;return!0}function eI(){for(var t=Cn;t;)t=TA(t.nextSibling)}function ia(){Cn=bn=null,Xt=!1}function tw(t){zn===null?zn=[t]:zn.push(t)}var fQ=Hs.ReactCurrentBatchConfig;function cl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,t));var s=n,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var a=s.refs;i===null?delete a[A]:a[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,t))}return t}function Ku(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dv(t){var e=t._init;return e(t._payload)}function tI(t){function e(B,w){if(t){var b=B.deletions;b===null?(B.deletions=[w],B.flags|=16):b.push(w)}}function r(B,w){if(!t)return null;for(;w!==null;)e(B,w),w=w.sibling;return null}function n(B,w){for(B=new Map;w!==null;)w.key!==null?B.set(w.key,w):B.set(w.index,w),w=w.sibling;return B}function s(B,w){return B=kA(B,w),B.index=0,B.sibling=null,B}function A(B,w,b){return B.index=b,t?(b=B.alternate,b!==null?(b=b.index,b<w?(B.flags|=2,w):b):(B.flags|=2,w)):(B.flags|=1048576,w)}function i(B){return t&&B.alternate===null&&(B.flags|=2),B}function a(B,w,b,F){return w===null||w.tag!==6?(w=Xg(b,B.mode,F),w.return=B,w):(w=s(w,b),w.return=B,w)}function o(B,w,b,F){var Q=b.type;return Q===ko?d(B,w,b.props.children,F,b.key):w!==null&&(w.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===AA&&dv(Q)===w.type)?(F=s(w,b.props),F.ref=cl(B,w,b),F.return=B,F):(F=jd(b.type,b.key,b.props,null,B.mode,F),F.ref=cl(B,w,b),F.return=B,F)}function c(B,w,b,F){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Yg(b,B.mode,F),w.return=B,w):(w=s(w,b.children||[]),w.return=B,w)}function d(B,w,b,F,Q){return w===null||w.tag!==7?(w=ki(b,B.mode,F,Q),w.return=B,w):(w=s(w,b),w.return=B,w)}function h(B,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Xg(""+w,B.mode,b),w.return=B,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qu:return b=jd(w.type,w.key,w.props,null,B.mode,b),b.ref=cl(B,null,w),b.return=B,b;case Uo:return w=Yg(w,B.mode,b),w.return=B,w;case AA:var F=w._init;return h(B,F(w._payload),b)}if(Il(w)||Al(w))return w=ki(w,B.mode,b,null),w.return=B,w;Ku(B,w)}return null}function f(B,w,b,F){var Q=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return Q!==null?null:a(B,w,""+b,F);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qu:return b.key===Q?o(B,w,b,F):null;case Uo:return b.key===Q?c(B,w,b,F):null;case AA:return Q=b._init,f(B,w,Q(b._payload),F)}if(Il(b)||Al(b))return Q!==null?null:d(B,w,b,F,null);Ku(B,b)}return null}function m(B,w,b,F,Q){if(typeof F=="string"&&F!==""||typeof F=="number")return B=B.get(b)||null,a(w,B,""+F,Q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Qu:return B=B.get(F.key===null?b:F.key)||null,o(w,B,F,Q);case Uo:return B=B.get(F.key===null?b:F.key)||null,c(w,B,F,Q);case AA:var D=F._init;return m(B,w,b,D(F._payload),Q)}if(Il(F)||Al(F))return B=B.get(b)||null,d(w,B,F,Q,null);Ku(w,F)}return null}function y(B,w,b,F){for(var Q=null,D=null,x=w,v=w=0,_=null;x!==null&&v<b.length;v++){x.index>v?(_=x,x=null):_=x.sibling;var S=f(B,x,b[v],F);if(S===null){x===null&&(x=_);break}t&&x&&S.alternate===null&&e(B,x),w=A(S,w,v),D===null?Q=S:D.sibling=S,D=S,x=_}if(v===b.length)return r(B,x),Xt&&wi(B,v),Q;if(x===null){for(;v<b.length;v++)x=h(B,b[v],F),x!==null&&(w=A(x,w,v),D===null?Q=x:D.sibling=x,D=x);return Xt&&wi(B,v),Q}for(x=n(B,x);v<b.length;v++)_=m(x,B,v,b[v],F),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?v:_.key),w=A(_,w,v),D===null?Q=_:D.sibling=_,D=_);return t&&x.forEach(function(R){return e(B,R)}),Xt&&wi(B,v),Q}function C(B,w,b,F){var Q=Al(b);if(typeof Q!="function")throw Error(pe(150));if(b=Q.call(b),b==null)throw Error(pe(151));for(var D=Q=null,x=w,v=w=0,_=null,S=b.next();x!==null&&!S.done;v++,S=b.next()){x.index>v?(_=x,x=null):_=x.sibling;var R=f(B,x,S.value,F);if(R===null){x===null&&(x=_);break}t&&x&&R.alternate===null&&e(B,x),w=A(R,w,v),D===null?Q=R:D.sibling=R,D=R,x=_}if(S.done)return r(B,x),Xt&&wi(B,v),Q;if(x===null){for(;!S.done;v++,S=b.next())S=h(B,S.value,F),S!==null&&(w=A(S,w,v),D===null?Q=S:D.sibling=S,D=S);return Xt&&wi(B,v),Q}for(x=n(B,x);!S.done;v++,S=b.next())S=m(x,B,v,S.value,F),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?v:S.key),w=A(S,w,v),D===null?Q=S:D.sibling=S,D=S);return t&&x.forEach(function(P){return e(B,P)}),Xt&&wi(B,v),Q}function I(B,w,b,F){if(typeof b=="object"&&b!==null&&b.type===ko&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Qu:e:{for(var Q=b.key,D=w;D!==null;){if(D.key===Q){if(Q=b.type,Q===ko){if(D.tag===7){r(B,D.sibling),w=s(D,b.props.children),w.return=B,B=w;break e}}else if(D.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===AA&&dv(Q)===D.type){r(B,D.sibling),w=s(D,b.props),w.ref=cl(B,D,b),w.return=B,B=w;break e}r(B,D);break}else e(B,D);D=D.sibling}b.type===ko?(w=ki(b.props.children,B.mode,F,b.key),w.return=B,B=w):(F=jd(b.type,b.key,b.props,null,B.mode,F),F.ref=cl(B,w,b),F.return=B,B=F)}return i(B);case Uo:e:{for(D=b.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(B,w.sibling),w=s(w,b.children||[]),w.return=B,B=w;break e}else{r(B,w);break}else e(B,w);w=w.sibling}w=Yg(b,B.mode,F),w.return=B,B=w}return i(B);case AA:return D=b._init,I(B,w,D(b._payload),F)}if(Il(b))return y(B,w,b,F);if(Al(b))return C(B,w,b,F);Ku(B,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(B,w.sibling),w=s(w,b),w.return=B,B=w):(r(B,w),w=Xg(b,B.mode,F),w.return=B,B=w),i(B)):r(B,w)}return I}var oa=tI(!0),rI=tI(!1),yh=ei(null),xh=null,Mo=null,rw=null;function nw(){rw=Mo=xh=null}function sw(t){var e=yh.current;$t(yh),t._currentValue=e}function dm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Jo(t,e){xh=t,rw=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(rw!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(xh===null)throw Error(pe(308));Mo=t,xh.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var Ti=null;function Aw(t){Ti===null?Ti=[t]:Ti.push(t)}function nI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Aw(e)):(r.next=s.next,s.next=r),e.interleaved=r,Rs(t,n)}function Rs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var iA=!1;function iw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function FA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ct&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Rs(t,r)}return s=n.interleaved,s===null?(e.next=e,Aw(n)):(e.next=s.next,s.next=e),n.interleaved=e,Rs(t,r)}function Qd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,G0(t,r)}}function hv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};A===null?s=A=i:A=A.next=i,r=r.next}while(r!==null);A===null?s=A=e:A=A.next=e}else s=A=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function vh(t,e,r,n){var s=t.updateQueue;iA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var o=a,c=o.next;o.next=null,i===null?A=c:i.next=c,i=o;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=o))}if(A!==null){var h=s.baseState;i=0,d=c=o=null,a=A;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,C=a;switch(f=e,m=r,C.tag){case 1:if(y=C.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=C.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=sr({},h,f);break e;case 2:iA=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,o=h):d=d.next=m,i|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(o=h),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Mi|=i,t.lanes=i,t.memoizedState=h}}function fv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(pe(191,s));s.call(n)}}}var Jc={},as=ei(Jc),vc=ei(Jc),Bc=ei(Jc);function Fi(t){if(t===Jc)throw Error(pe(174));return t}function ow(t,e){switch(Ot(Bc,e),Ot(vc,t),Ot(as,Jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zp(e,t)}$t(as),Ot(as,e)}function aa(){$t(as),$t(vc),$t(Bc)}function AI(t){Fi(Bc.current);var e=Fi(as.current),r=zp(e,t.type);e!==r&&(Ot(vc,t),Ot(as,r))}function aw(t){vc.current===t&&($t(as),$t(vc))}var tr=ei(0);function Bh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gg=[];function lw(){for(var t=0;t<Gg.length;t++)Gg[t]._workInProgressVersionPrimary=null;Gg.length=0}var Nd=Hs.ReactCurrentDispatcher,zg=Hs.ReactCurrentBatchConfig,ji=0,rr=null,wr=null,Ir=null,Ch=!1,Wl=!1,Cc=0,gQ=0;function Hr(){throw Error(pe(321))}function cw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Jn(t[r],e[r]))return!1;return!0}function uw(t,e,r,n,s,A){if(ji=A,rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nd.current=t===null||t.memoizedState===null?yQ:xQ,t=r(n,s),Wl){A=0;do{if(Wl=!1,Cc=0,25<=A)throw Error(pe(301));A+=1,Ir=wr=null,e.updateQueue=null,Nd.current=vQ,t=r(n,s)}while(Wl)}if(Nd.current=bh,e=wr!==null&&wr.next!==null,ji=0,Ir=wr=rr=null,Ch=!1,e)throw Error(pe(300));return t}function dw(){var t=Cc!==0;return Cc=0,t}function rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ir===null?rr.memoizedState=Ir=t:Ir=Ir.next=t,Ir}function Mn(){if(wr===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=wr.next;var e=Ir===null?rr.memoizedState:Ir.next;if(e!==null)Ir=e,wr=t;else{if(t===null)throw Error(pe(310));wr=t,t={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},Ir===null?rr.memoizedState=Ir=t:Ir=Ir.next=t}return Ir}function bc(t,e){return typeof e=="function"?e(t):e}function $g(t){var e=Mn(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=wr,s=n.baseQueue,A=r.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}n.baseQueue=s=A,r.pending=null}if(s!==null){A=s.next,n=n.baseState;var a=i=null,o=null,c=A;do{var d=c.lane;if((ji&d)===d)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=h,i=n):o=o.next=h,rr.lanes|=d,Mi|=d}c=c.next}while(c!==null&&c!==A);o===null?i=n:o.next=a,Jn(n,e.memoizedState)||(un=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=o,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do A=s.lane,rr.lanes|=A,Mi|=A,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Wg(t){var e=Mn(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,A=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);Jn(A,e.memoizedState)||(un=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),r.lastRenderedState=A}return[A,n]}function iI(){}function oI(t,e){var r=rr,n=Mn(),s=e(),A=!Jn(n.memoizedState,s);if(A&&(n.memoizedState=s,un=!0),n=n.queue,hw(cI.bind(null,r,n,t),[t]),n.getSnapshot!==e||A||Ir!==null&&Ir.memoizedState.tag&1){if(r.flags|=2048,_c(9,lI.bind(null,r,n,s,e),void 0,null),Tr===null)throw Error(pe(349));ji&30||aI(r,e,s)}return s}function aI(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function lI(t,e,r,n){e.value=r,e.getSnapshot=n,uI(e)&&dI(t)}function cI(t,e,r){return r(function(){uI(e)&&dI(t)})}function uI(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Jn(t,r)}catch{return!0}}function dI(t){var e=Rs(t,1);e!==null&&Wn(e,t,1,-1)}function gv(t){var e=rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:t},e.queue=t,t=t.dispatch=wQ.bind(null,rr,t),[e.memoizedState,t]}function _c(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function hI(){return Mn().memoizedState}function Rd(t,e,r,n){var s=rs();rr.flags|=t,s.memoizedState=_c(1|e,r,void 0,n===void 0?null:n)}function vf(t,e,r,n){var s=Mn();n=n===void 0?null:n;var A=void 0;if(wr!==null){var i=wr.memoizedState;if(A=i.destroy,n!==null&&cw(n,i.deps)){s.memoizedState=_c(e,r,A,n);return}}rr.flags|=t,s.memoizedState=_c(1|e,r,A,n)}function pv(t,e){return Rd(8390656,8,t,e)}function hw(t,e){return vf(2048,8,t,e)}function fI(t,e){return vf(4,2,t,e)}function gI(t,e){return vf(4,4,t,e)}function pI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mI(t,e,r){return r=r!=null?r.concat([t]):null,vf(4,4,pI.bind(null,e,t),r)}function fw(){}function wI(t,e){var r=Mn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function yI(t,e){var r=Mn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function xI(t,e,r){return ji&21?(Jn(r,e)||(r=__(),rr.lanes|=r,Mi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=r)}function pQ(t,e){var r=St;St=r!==0&&4>r?r:4,t(!0);var n=zg.transition;zg.transition={};try{t(!1),e()}finally{St=r,zg.transition=n}}function vI(){return Mn().memoizedState}function mQ(t,e,r){var n=UA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},BI(t))CI(e,r);else if(r=nI(t,e,r,n),r!==null){var s=rn();Wn(r,t,n,s),bI(r,e,n)}}function wQ(t,e,r){var n=UA(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(BI(t))CI(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,a=A(i,r);if(s.hasEagerState=!0,s.eagerState=a,Jn(a,i)){var o=e.interleaved;o===null?(s.next=s,Aw(e)):(s.next=o.next,o.next=s),e.interleaved=s;return}}catch{}finally{}r=nI(t,e,s,n),r!==null&&(s=rn(),Wn(r,t,n,s),bI(r,e,n))}}function BI(t){var e=t.alternate;return t===rr||e!==null&&e===rr}function CI(t,e){Wl=Ch=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function bI(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,G0(t,r)}}var bh={readContext:jn,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},yQ={readContext:jn,useCallback:function(t,e){return rs().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:pv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Rd(4194308,4,pI.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rd(4,2,t,e)},useMemo:function(t,e){var r=rs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=rs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=mQ.bind(null,rr,t),[n.memoizedState,t]},useRef:function(t){var e=rs();return t={current:t},e.memoizedState=t},useState:gv,useDebugValue:fw,useDeferredValue:function(t){return rs().memoizedState=t},useTransition:function(){var t=gv(!1),e=t[0];return t=pQ.bind(null,t[1]),rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=rr,s=rs();if(Xt){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=e(),Tr===null)throw Error(pe(349));ji&30||aI(n,e,r)}s.memoizedState=r;var A={value:r,getSnapshot:e};return s.queue=A,pv(cI.bind(null,n,A,t),[t]),n.flags|=2048,_c(9,lI.bind(null,n,A,r,e),void 0,null),r},useId:function(){var t=rs(),e=Tr.identifierPrefix;if(Xt){var r=_s,n=bs;r=(n&~(1<<32-$n(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Cc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=gQ++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xQ={readContext:jn,useCallback:wI,useContext:jn,useEffect:hw,useImperativeHandle:mI,useInsertionEffect:fI,useLayoutEffect:gI,useMemo:yI,useReducer:$g,useRef:hI,useState:function(){return $g(bc)},useDebugValue:fw,useDeferredValue:function(t){var e=Mn();return xI(e,wr.memoizedState,t)},useTransition:function(){var t=$g(bc)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:iI,useSyncExternalStore:oI,useId:vI,unstable_isNewReconciler:!1},vQ={readContext:jn,useCallback:wI,useContext:jn,useEffect:hw,useImperativeHandle:mI,useInsertionEffect:fI,useLayoutEffect:gI,useMemo:yI,useReducer:Wg,useRef:hI,useState:function(){return Wg(bc)},useDebugValue:fw,useDeferredValue:function(t){var e=Mn();return wr===null?e.memoizedState=t:xI(e,wr.memoizedState,t)},useTransition:function(){var t=Wg(bc)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:iI,useSyncExternalStore:oI,useId:vI,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=sr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function hm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:sr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Bf={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=rn(),s=UA(t),A=Us(n,s);A.payload=e,r!=null&&(A.callback=r),e=FA(t,A,s),e!==null&&(Wn(e,t,s,n),Qd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=rn(),s=UA(t),A=Us(n,s);A.tag=1,A.payload=e,r!=null&&(A.callback=r),e=FA(t,A,s),e!==null&&(Wn(e,t,s,n),Qd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=rn(),n=UA(t),s=Us(r,n);s.tag=2,e!=null&&(s.callback=e),e=FA(t,s,n),e!==null&&(Wn(e,t,n,r),Qd(e,t,n))}};function mv(t,e,r,n,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,A,i):e.prototype&&e.prototype.isPureReactComponent?!mc(r,n)||!mc(s,A):!0}function _I(t,e,r){var n=!1,s=OA,A=e.contextType;return typeof A=="object"&&A!==null?A=jn(A):(s=pn(e)?Pi:Xr.current,n=e.contextTypes,A=(n=n!=null)?Aa(t,s):OA),e=new e(r,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function wv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Bf.enqueueReplaceState(e,e.state,null)}function fm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},iw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=jn(A):(A=pn(e)?Pi:Xr.current,s.context=Aa(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(hm(t,e,A,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Bf.enqueueReplaceState(s,s.state,null),vh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function la(t,e){try{var r="",n=e;do r+=qU(n),n=n.return;while(n);var s=r}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function qg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function gm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var BQ=typeof WeakMap=="function"?WeakMap:Map;function II(t,e,r){r=Us(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ih||(Ih=!0,_m=n),gm(t,e)},r}function EI(t,e,r){r=Us(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){gm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){gm(t,e),typeof n!="function"&&(SA===null?SA=new Set([this]):SA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function yv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new BQ;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=DQ.bind(null,t,e,r),e.then(t,t))}function xv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Us(-1,1),e.tag=2,FA(r,e,1))),r.lanes|=1),t)}var CQ=Hs.ReactCurrentOwner,un=!1;function en(t,e,r,n){e.child=t===null?rI(e,null,r,n):oa(e,t.child,r,n)}function Bv(t,e,r,n,s){r=r.render;var A=e.ref;return Jo(e,s),n=uw(t,e,r,n,A,s),r=dw(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ds(t,e,s)):(Xt&&r&&Z0(e),e.flags|=1,en(t,e,n,s),e.child)}function Cv(t,e,r,n,s){if(t===null){var A=r.type;return typeof A=="function"&&!Bw(A)&&A.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=A,TI(t,e,A,n,s)):(t=jd(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(r=r.compare,r=r!==null?r:mc,r(i,n)&&t.ref===e.ref)return Ds(t,e,s)}return e.flags|=1,t=kA(A,n),t.ref=e.ref,t.return=e,e.child=t}function TI(t,e,r,n,s){if(t!==null){var A=t.memoizedProps;if(mc(A,n)&&t.ref===e.ref)if(un=!1,e.pendingProps=n=A,(t.lanes&s)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,Ds(t,e,s)}return pm(t,e,r,n,s)}function FI(t,e,r){var n=e.pendingProps,s=n.children,A=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(Ho,vn),vn|=r;else{if(!(r&1073741824))return t=A!==null?A.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ot(Ho,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=A!==null?A.baseLanes:r,Ot(Ho,vn),vn|=n}else A!==null?(n=A.baseLanes|r,e.memoizedState=null):n=r,Ot(Ho,vn),vn|=n;return en(t,e,s,r),e.child}function SI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function pm(t,e,r,n,s){var A=pn(r)?Pi:Xr.current;return A=Aa(e,A),Jo(e,s),r=uw(t,e,r,n,A,s),n=dw(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ds(t,e,s)):(Xt&&n&&Z0(e),e.flags|=1,en(t,e,r,s),e.child)}function bv(t,e,r,n,s){if(pn(r)){var A=!0;ph(e)}else A=!1;if(Jo(e,s),e.stateNode===null)Dd(t,e),_I(e,r,n),fm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=pn(r)?Pi:Xr.current,c=Aa(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||o!==c)&&wv(e,i,n,c),iA=!1;var f=e.memoizedState;i.state=f,vh(e,n,i,s),o=e.memoizedState,a!==n||f!==o||gn.current||iA?(typeof d=="function"&&(hm(e,r,d,n),o=e.memoizedState),(a=iA||mv(e,r,a,n,f,o,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),i.props=n,i.state=o,i.context=c,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,sI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Kn(e.type,a),i.props=c,h=e.pendingProps,f=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=jn(o):(o=pn(r)?Pi:Xr.current,o=Aa(e,o));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||f!==o)&&wv(e,i,n,o),iA=!1,f=e.memoizedState,i.state=f,vh(e,n,i,s);var y=e.memoizedState;a!==h||f!==y||gn.current||iA?(typeof m=="function"&&(hm(e,r,m,n),y=e.memoizedState),(c=iA||mv(e,r,c,n,f,y,o)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),i.props=n,i.state=y,i.context=o,n=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return mm(t,e,r,n,A,s)}function mm(t,e,r,n,s,A){SI(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&lv(e,r,!1),Ds(t,e,A);n=e.stateNode,CQ.current=e;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=oa(e,t.child,null,A),e.child=oa(e,null,a,A)):en(t,e,a,A),e.memoizedState=n.state,s&&lv(e,r,!0),e.child}function UI(t){var e=t.stateNode;e.pendingContext?av(t,e.pendingContext,e.pendingContext!==e.context):e.context&&av(t,e.context,!1),ow(t,e.containerInfo)}function _v(t,e,r,n,s){return ia(),tw(s),e.flags|=256,en(t,e,r,n),e.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function ym(t){return{baseLanes:t,cachePool:null,transitions:null}}function kI(t,e,r){var n=e.pendingProps,s=tr.current,A=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ot(tr,s&1),t===null)return um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,A?(n=e.mode,A=e.child,i={mode:"hidden",children:i},!(n&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=_f(i,n,0,null),t=ki(t,n,r,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=ym(r),e.memoizedState=wm,t):gw(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return bQ(t,e,i,n,a,s,r);if(A){A=n.fallback,i=e.mode,s=t.child,a=s.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=kA(s,o),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?A=kA(a,A):(A=ki(A,i,r,null),A.flags|=2),A.return=e,n.return=e,n.sibling=A,e.child=n,n=A,A=e.child,i=t.child.memoizedState,i=i===null?ym(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~r,e.memoizedState=wm,n}return A=t.child,t=A.sibling,n=kA(A,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function gw(t,e){return e=_f({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gu(t,e,r,n){return n!==null&&tw(n),oa(e,t.child,null,r),t=gw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bQ(t,e,r,n,s,A,i){if(r)return e.flags&256?(e.flags&=-257,n=qg(Error(pe(422))),Gu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=n.fallback,s=e.mode,n=_f({mode:"visible",children:n.children},s,0,null),A=ki(A,s,i,null),A.flags|=2,n.return=e,A.return=e,n.sibling=A,e.child=n,e.mode&1&&oa(e,t.child,null,i),e.child.memoizedState=ym(i),e.memoizedState=wm,A);if(!(e.mode&1))return Gu(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,A=Error(pe(419)),n=qg(A,n,void 0),Gu(t,e,i,n)}if(a=(i&t.childLanes)!==0,un||a){if(n=Tr,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Rs(t,s),Wn(n,t,s,-1))}return vw(),n=qg(Error(pe(421))),Gu(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=PQ.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,Cn=TA(s.nextSibling),bn=e,Xt=!0,zn=null,t!==null&&(Un[kn++]=bs,Un[kn++]=_s,Un[kn++]=Li,bs=t.id,_s=t.overflow,Li=e),e=gw(e,n.children),e.flags|=4096,e)}function Iv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),dm(t.return,e,r)}function Jg(t,e,r,n,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=n,A.tail=r,A.tailMode=s)}function QI(t,e,r){var n=e.pendingProps,s=n.revealOrder,A=n.tail;if(en(t,e,n.children,r),n=tr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iv(t,r,e);else if(t.tag===19)Iv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ot(tr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Bh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Jg(e,!1,s,r,A);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Jg(e,!0,r,null,A);break;case"together":Jg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ds(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,r=kA(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=kA(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function _Q(t,e,r){switch(e.tag){case 3:UI(e),ia();break;case 5:AI(e);break;case 1:pn(e.type)&&ph(e);break;case 4:ow(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ot(yh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ot(tr,tr.current&1),e.flags|=128,null):r&e.child.childLanes?kI(t,e,r):(Ot(tr,tr.current&1),t=Ds(t,e,r),t!==null?t.sibling:null);Ot(tr,tr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return QI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ot(tr,tr.current),n)break;return null;case 22:case 23:return e.lanes=0,FI(t,e,r)}return Ds(t,e,r)}var NI,xm,RI,DI;NI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xm=function(){};RI=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Fi(as.current);var A=null;switch(r){case"input":s=Hp(t,s),n=Hp(t,n),A=[];break;case"select":s=sr({},s,{value:void 0}),n=sr({},n,{value:void 0}),A=[];break;case"textarea":s=Gp(t,s),n=Gp(t,n),A=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fh)}$p(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(cc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in n){var o=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&a[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(A||(A=[]),A.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(A=A||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(A=A||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(cc.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Kt("scroll",t),A||a===o||(A=[])):(A=A||[]).push(c,o))}r&&(A=A||[]).push("style",r);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};DI=function(t,e,r,n){r!==n&&(e.flags|=4)};function ul(t,e){if(!Xt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Vr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function IQ(t,e,r){var n=e.pendingProps;switch(ew(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(e),null;case 1:return pn(e.type)&&gh(),Vr(e),null;case 3:return n=e.stateNode,aa(),$t(gn),$t(Xr),lw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Vu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(Tm(zn),zn=null))),xm(t,e),Vr(e),null;case 5:aw(e);var s=Fi(Bc.current);if(r=e.type,t!==null&&e.stateNode!=null)RI(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(pe(166));return Vr(e),null}if(t=Fi(as.current),Vu(e)){n=e.stateNode,r=e.type;var A=e.memoizedProps;switch(n[ss]=e,n[xc]=A,t=(e.mode&1)!==0,r){case"dialog":Kt("cancel",n),Kt("close",n);break;case"iframe":case"object":case"embed":Kt("load",n);break;case"video":case"audio":for(s=0;s<Tl.length;s++)Kt(Tl[s],n);break;case"source":Kt("error",n);break;case"img":case"image":case"link":Kt("error",n),Kt("load",n);break;case"details":Kt("toggle",n);break;case"input":Rx(n,A),Kt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!A.multiple},Kt("invalid",n);break;case"textarea":Px(n,A),Kt("invalid",n)}$p(r,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var a=A[i];i==="children"?typeof a=="string"?n.textContent!==a&&(A.suppressHydrationWarning!==!0&&Hu(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(A.suppressHydrationWarning!==!0&&Hu(n.textContent,a,t),s=["children",""+a]):cc.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Kt("scroll",n)}switch(r){case"input":Nu(n),Dx(n,A,!0);break;case"textarea":Nu(n),Lx(n);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(n.onclick=fh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[ss]=e,t[xc]=n,NI(t,e,!1,!1),e.stateNode=t;e:{switch(i=Wp(r,n),r){case"dialog":Kt("cancel",t),Kt("close",t),s=n;break;case"iframe":case"object":case"embed":Kt("load",t),s=n;break;case"video":case"audio":for(s=0;s<Tl.length;s++)Kt(Tl[s],t);s=n;break;case"source":Kt("error",t),s=n;break;case"img":case"image":case"link":Kt("error",t),Kt("load",t),s=n;break;case"details":Kt("toggle",t),s=n;break;case"input":Rx(t,n),s=Hp(t,n),Kt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=sr({},n,{value:void 0}),Kt("invalid",t);break;case"textarea":Px(t,n),s=Gp(t,n),Kt("invalid",t);break;default:s=n}$p(r,s),a=s;for(A in a)if(a.hasOwnProperty(A)){var o=a[A];A==="style"?h_(t,o):A==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&u_(t,o)):A==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&uc(t,o):typeof o=="number"&&uc(t,""+o):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(cc.hasOwnProperty(A)?o!=null&&A==="onScroll"&&Kt("scroll",t):o!=null&&j0(t,A,o,i))}switch(r){case"input":Nu(t),Dx(t,n,!1);break;case"textarea":Nu(t),Lx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+MA(n.value));break;case"select":t.multiple=!!n.multiple,A=n.value,A!=null?zo(t,!!n.multiple,A,!1):n.defaultValue!=null&&zo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vr(e),null;case 6:if(t&&e.stateNode!=null)DI(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pe(166));if(r=Fi(Bc.current),Fi(as.current),Vu(e)){if(n=e.stateNode,r=e.memoizedProps,n[ss]=e,(A=n.nodeValue!==r)&&(t=bn,t!==null))switch(t.tag){case 3:Hu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hu(n.nodeValue,r,(t.mode&1)!==0)}A&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ss]=e,e.stateNode=n}return Vr(e),null;case 13:if($t(tr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xt&&Cn!==null&&e.mode&1&&!(e.flags&128))eI(),ia(),e.flags|=98560,A=!1;else if(A=Vu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!A)throw Error(pe(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(pe(317));A[ss]=e}else ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vr(e),A=!1}else zn!==null&&(Tm(zn),zn=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||tr.current&1?xr===0&&(xr=3):vw())),e.updateQueue!==null&&(e.flags|=4),Vr(e),null);case 4:return aa(),xm(t,e),t===null&&wc(e.stateNode.containerInfo),Vr(e),null;case 10:return sw(e.type._context),Vr(e),null;case 17:return pn(e.type)&&gh(),Vr(e),null;case 19:if($t(tr),A=e.memoizedState,A===null)return Vr(e),null;if(n=(e.flags&128)!==0,i=A.rendering,i===null)if(n)ul(A,!1);else{if(xr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Bh(t),i!==null){for(e.flags|=128,ul(A,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)A=r,t=n,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ot(tr,tr.current&1|2),e.child}t=t.sibling}A.tail!==null&&ur()>ca&&(e.flags|=128,n=!0,ul(A,!1),e.lanes=4194304)}else{if(!n)if(t=Bh(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ul(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!Xt)return Vr(e),null}else 2*ur()-A.renderingStartTime>ca&&r!==1073741824&&(e.flags|=128,n=!0,ul(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(r=A.last,r!==null?r.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=ur(),e.sibling=null,r=tr.current,Ot(tr,n?r&1|2:r&1),e):(Vr(e),null);case 22:case 23:return xw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?vn&1073741824&&(Vr(e),e.subtreeFlags&6&&(e.flags|=8192)):Vr(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function EQ(t,e){switch(ew(e),e.tag){case 1:return pn(e.type)&&gh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return aa(),$t(gn),$t(Xr),lw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aw(e),null;case 13:if($t(tr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(tr),null;case 4:return aa(),null;case 10:return sw(e.type._context),null;case 22:case 23:return xw(),null;case 24:return null;default:return null}}var zu=!1,Wr=!1,TQ=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Oo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){or(t,e,n)}else r.current=null}function vm(t,e,r){try{r()}catch(n){or(t,e,n)}}var Ev=!1;function FQ(t,e){if(sm=uh,t=O_(),Y0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,A=n.focusNode;n=n.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var i=0,a=-1,o=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(a=i+s),h!==A||n!==0&&h.nodeType!==3||(o=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===s&&(a=i),f===A&&++d===n&&(o=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=a===-1||o===-1?null:{start:a,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(Am={focusedElem:t,selectionRange:r},uh=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){e=Me;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var C=y.memoizedProps,I=y.memoizedState,B=e.stateNode,w=B.getSnapshotBeforeUpdate(e.elementType===e.type?C:Kn(e.type,C),I);B.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(F){or(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}return y=Ev,Ev=!1,y}function ql(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&vm(e,r,A)}s=s.next}while(s!==n)}}function Cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Bm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function PI(t){var e=t.alternate;e!==null&&(t.alternate=null,PI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ss],delete e[xc],delete e[am],delete e[uQ],delete e[dQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LI(t){return t.tag===5||t.tag===3||t.tag===4}function Tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fh));else if(n!==4&&(t=t.child,t!==null))for(Cm(t,e,r),t=t.sibling;t!==null;)Cm(t,e,r),t=t.sibling}function bm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(bm(t,e,r),t=t.sibling;t!==null;)bm(t,e,r),t=t.sibling}var kr=null,Gn=!1;function Ys(t,e,r){for(r=r.child;r!==null;)jI(t,e,r),r=r.sibling}function jI(t,e,r){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(gf,r)}catch{}switch(r.tag){case 5:Wr||Oo(r,e);case 6:var n=kr,s=Gn;kr=null,Ys(t,e,r),kr=n,Gn=s,kr!==null&&(Gn?(t=kr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):kr.removeChild(r.stateNode));break;case 18:kr!==null&&(Gn?(t=kr,r=r.stateNode,t.nodeType===8?Vg(t.parentNode,r):t.nodeType===1&&Vg(t,r),gc(t)):Vg(kr,r.stateNode));break;case 4:n=kr,s=Gn,kr=r.stateNode.containerInfo,Gn=!0,Ys(t,e,r),kr=n,Gn=s;break;case 0:case 11:case 14:case 15:if(!Wr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&vm(r,e,i),s=s.next}while(s!==n)}Ys(t,e,r);break;case 1:if(!Wr&&(Oo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){or(r,e,a)}Ys(t,e,r);break;case 21:Ys(t,e,r);break;case 22:r.mode&1?(Wr=(n=Wr)||r.memoizedState!==null,Ys(t,e,r),Wr=n):Ys(t,e,r);break;default:Ys(t,e,r)}}function Fv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new TQ),e.forEach(function(n){var s=LQ.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Hn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var A=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:kr=a.stateNode,Gn=!1;break e;case 3:kr=a.stateNode.containerInfo,Gn=!0;break e;case 4:kr=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(kr===null)throw Error(pe(160));jI(A,i,s),kr=null,Gn=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(c){or(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MI(e,t),e=e.sibling}function MI(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),es(t),n&4){try{ql(3,t,t.return),Cf(3,t)}catch(C){or(t,t.return,C)}try{ql(5,t,t.return)}catch(C){or(t,t.return,C)}}break;case 1:Hn(e,t),es(t),n&512&&r!==null&&Oo(r,r.return);break;case 5:if(Hn(e,t),es(t),n&512&&r!==null&&Oo(r,r.return),t.flags&32){var s=t.stateNode;try{uc(s,"")}catch(C){or(t,t.return,C)}}if(n&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=r!==null?r.memoizedProps:A,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&A.type==="radio"&&A.name!=null&&a_(s,A),Wp(a,i);var c=Wp(a,A);for(i=0;i<o.length;i+=2){var d=o[i],h=o[i+1];d==="style"?h_(s,h):d==="dangerouslySetInnerHTML"?u_(s,h):d==="children"?uc(s,h):j0(s,d,h,c)}switch(a){case"input":Vp(s,A);break;case"textarea":l_(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var m=A.value;m!=null?zo(s,!!A.multiple,m,!1):f!==!!A.multiple&&(A.defaultValue!=null?zo(s,!!A.multiple,A.defaultValue,!0):zo(s,!!A.multiple,A.multiple?[]:"",!1))}s[xc]=A}catch(C){or(t,t.return,C)}}break;case 6:if(Hn(e,t),es(t),n&4){if(t.stateNode===null)throw Error(pe(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(C){or(t,t.return,C)}}break;case 3:if(Hn(e,t),es(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gc(e.containerInfo)}catch(C){or(t,t.return,C)}break;case 4:Hn(e,t),es(t);break;case 13:Hn(e,t),es(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(ww=ur())),n&4&&Fv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Wr=(c=Wr)||d,Hn(e,t),Wr=c):Hn(e,t),es(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Me=t,d=t.child;d!==null;){for(h=Me=d;Me!==null;){switch(f=Me,m=f.child,f.tag){case 0:case 11:case 14:case 15:ql(4,f,f.return);break;case 1:Oo(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(C){or(n,r,C)}}break;case 5:Oo(f,f.return);break;case 22:if(f.memoizedState!==null){Uv(h);continue}}m!==null?(m.return=f,Me=m):Uv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(a=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=d_("display",i))}catch(C){or(t,t.return,C)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(C){or(t,t.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hn(e,t),es(t),n&4&&Fv(t);break;case 21:break;default:Hn(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(LI(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(uc(s,""),n.flags&=-33);var A=Tv(t);bm(t,A,s);break;case 3:case 4:var i=n.stateNode.containerInfo,a=Tv(t);Cm(t,a,i);break;default:throw Error(pe(161))}}catch(o){or(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SQ(t,e,r){Me=t,OI(t)}function OI(t,e,r){for(var n=(t.mode&1)!==0;Me!==null;){var s=Me,A=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||zu;if(!i){var a=s.alternate,o=a!==null&&a.memoizedState!==null||Wr;a=zu;var c=Wr;if(zu=i,(Wr=o)&&!c)for(Me=s;Me!==null;)i=Me,o=i.child,i.tag===22&&i.memoizedState!==null?kv(s):o!==null?(o.return=i,Me=o):kv(s);for(;A!==null;)Me=A,OI(A),A=A.sibling;Me=s,zu=a,Wr=c}Sv(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,Me=A):Sv(t)}}function Sv(t){for(;Me!==null;){var e=Me;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wr||Cf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Wr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Kn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&fv(e,A,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}fv(e,i,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&gc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}Wr||e.flags&512&&Bm(e)}catch(f){or(e,e.return,f)}}if(e===t){Me=null;break}if(r=e.sibling,r!==null){r.return=e.return,Me=r;break}Me=e.return}}function Uv(t){for(;Me!==null;){var e=Me;if(e===t){Me=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Me=r;break}Me=e.return}}function kv(t){for(;Me!==null;){var e=Me;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Cf(4,e)}catch(o){or(e,r,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(o){or(e,s,o)}}var A=e.return;try{Bm(e)}catch(o){or(e,A,o)}break;case 5:var i=e.return;try{Bm(e)}catch(o){or(e,i,o)}}}catch(o){or(e,e.return,o)}if(e===t){Me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Me=a;break}Me=e.return}}var UQ=Math.ceil,_h=Hs.ReactCurrentDispatcher,pw=Hs.ReactCurrentOwner,Pn=Hs.ReactCurrentBatchConfig,Ct=0,Tr=null,pr=null,Pr=0,vn=0,Ho=ei(0),xr=0,Ic=null,Mi=0,bf=0,mw=0,Jl=null,cn=null,ww=0,ca=1/0,vs=null,Ih=!1,_m=null,SA=null,$u=!1,wA=null,Eh=0,Xl=0,Im=null,Pd=-1,Ld=0;function rn(){return Ct&6?ur():Pd!==-1?Pd:Pd=ur()}function UA(t){return t.mode&1?Ct&2&&Pr!==0?Pr&-Pr:fQ.transition!==null?(Ld===0&&(Ld=__()),Ld):(t=St,t!==0||(t=window.event,t=t===void 0?16:k_(t.type)),t):1}function Wn(t,e,r,n){if(50<Xl)throw Xl=0,Im=null,Error(pe(185));$c(t,r,n),(!(Ct&2)||t!==Tr)&&(t===Tr&&(!(Ct&2)&&(bf|=r),xr===4&&lA(t,Pr)),mn(t,n),r===1&&Ct===0&&!(e.mode&1)&&(ca=ur()+500,xf&&ti()))}function mn(t,e){var r=t.callbackNode;fk(t,e);var n=ch(t,t===Tr?Pr:0);if(n===0)r!==null&&Ox(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ox(r),e===1)t.tag===0?hQ(Qv.bind(null,t)):X_(Qv.bind(null,t)),lQ(function(){!(Ct&6)&&ti()}),r=null;else{switch(I_(n)){case 1:r=K0;break;case 4:r=C_;break;case 16:r=lh;break;case 536870912:r=b_;break;default:r=lh}r=qI(r,HI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function HI(t,e){if(Pd=-1,Ld=0,Ct&6)throw Error(pe(327));var r=t.callbackNode;if(Xo()&&t.callbackNode!==r)return null;var n=ch(t,t===Tr?Pr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Th(t,n);else{e=n;var s=Ct;Ct|=2;var A=KI();(Tr!==t||Pr!==e)&&(vs=null,ca=ur()+500,Ui(t,e));do try{NQ();break}catch(a){VI(t,a)}while(!0);nw(),_h.current=A,Ct=s,pr!==null?e=0:(Tr=null,Pr=0,e=xr)}if(e!==0){if(e===2&&(s=Zp(t),s!==0&&(n=s,e=Em(t,s))),e===1)throw r=Ic,Ui(t,0),lA(t,n),mn(t,ur()),r;if(e===6)lA(t,n);else{if(s=t.current.alternate,!(n&30)&&!kQ(s)&&(e=Th(t,n),e===2&&(A=Zp(t),A!==0&&(n=A,e=Em(t,A))),e===1))throw r=Ic,Ui(t,0),lA(t,n),mn(t,ur()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(pe(345));case 2:yi(t,cn,vs);break;case 3:if(lA(t,n),(n&130023424)===n&&(e=ww+500-ur(),10<e)){if(ch(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){rn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=om(yi.bind(null,t,cn,vs),e);break}yi(t,cn,vs);break;case 4:if(lA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-$n(n);A=1<<i,i=e[i],i>s&&(s=i),n&=~A}if(n=s,n=ur()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*UQ(n/1960))-n,10<n){t.timeoutHandle=om(yi.bind(null,t,cn,vs),n);break}yi(t,cn,vs);break;case 5:yi(t,cn,vs);break;default:throw Error(pe(329))}}}return mn(t,ur()),t.callbackNode===r?HI.bind(null,t):null}function Em(t,e){var r=Jl;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=Th(t,e),t!==2&&(e=cn,cn=r,e!==null&&Tm(e)),t}function Tm(t){cn===null?cn=t:cn.push.apply(cn,t)}function kQ(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],A=s.getSnapshot;s=s.value;try{if(!Jn(A(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lA(t,e){for(e&=~mw,e&=~bf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-$n(e),n=1<<r;t[r]=-1,e&=~n}}function Qv(t){if(Ct&6)throw Error(pe(327));Xo();var e=ch(t,0);if(!(e&1))return mn(t,ur()),null;var r=Th(t,e);if(t.tag!==0&&r===2){var n=Zp(t);n!==0&&(e=n,r=Em(t,n))}if(r===1)throw r=Ic,Ui(t,0),lA(t,e),mn(t,ur()),r;if(r===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yi(t,cn,vs),mn(t,ur()),null}function yw(t,e){var r=Ct;Ct|=1;try{return t(e)}finally{Ct=r,Ct===0&&(ca=ur()+500,xf&&ti())}}function Oi(t){wA!==null&&wA.tag===0&&!(Ct&6)&&Xo();var e=Ct;Ct|=1;var r=Pn.transition,n=St;try{if(Pn.transition=null,St=1,t)return t()}finally{St=n,Pn.transition=r,Ct=e,!(Ct&6)&&ti()}}function xw(){vn=Ho.current,$t(Ho)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,aQ(r)),pr!==null)for(r=pr.return;r!==null;){var n=r;switch(ew(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gh();break;case 3:aa(),$t(gn),$t(Xr),lw();break;case 5:aw(n);break;case 4:aa();break;case 13:$t(tr);break;case 19:$t(tr);break;case 10:sw(n.type._context);break;case 22:case 23:xw()}r=r.return}if(Tr=t,pr=t=kA(t.current,null),Pr=vn=e,xr=0,Ic=null,mw=bf=Mi=0,cn=Jl=null,Ti!==null){for(e=0;e<Ti.length;e++)if(r=Ti[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,A=r.pending;if(A!==null){var i=A.next;A.next=s,n.next=i}r.pending=n}Ti=null}return t}function VI(t,e){do{var r=pr;try{if(nw(),Nd.current=bh,Ch){for(var n=rr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ch=!1}if(ji=0,Ir=wr=rr=null,Wl=!1,Cc=0,pw.current=null,r===null||r.return===null){xr=1,Ic=e,pr=null;break}e:{var A=t,i=r.return,a=r,o=e;if(e=Pr,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=xv(i);if(m!==null){m.flags&=-257,vv(m,i,a,A,e),m.mode&1&&yv(A,c,e),e=m,o=c;var y=e.updateQueue;if(y===null){var C=new Set;C.add(o),e.updateQueue=C}else y.add(o);break e}else{if(!(e&1)){yv(A,c,e),vw();break e}o=Error(pe(426))}}else if(Xt&&a.mode&1){var I=xv(i);if(I!==null){!(I.flags&65536)&&(I.flags|=256),vv(I,i,a,A,e),tw(la(o,a));break e}}A=o=la(o,a),xr!==4&&(xr=2),Jl===null?Jl=[A]:Jl.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var B=II(A,o,e);hv(A,B);break e;case 1:a=o;var w=A.type,b=A.stateNode;if(!(A.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(SA===null||!SA.has(b)))){A.flags|=65536,e&=-e,A.lanes|=e;var F=EI(A,a,e);hv(A,F);break e}}A=A.return}while(A!==null)}zI(r)}catch(Q){e=Q,pr===r&&r!==null&&(pr=r=r.return);continue}break}while(!0)}function KI(){var t=_h.current;return _h.current=bh,t===null?bh:t}function vw(){(xr===0||xr===3||xr===2)&&(xr=4),Tr===null||!(Mi&268435455)&&!(bf&268435455)||lA(Tr,Pr)}function Th(t,e){var r=Ct;Ct|=2;var n=KI();(Tr!==t||Pr!==e)&&(vs=null,Ui(t,e));do try{QQ();break}catch(s){VI(t,s)}while(!0);if(nw(),Ct=r,_h.current=n,pr!==null)throw Error(pe(261));return Tr=null,Pr=0,xr}function QQ(){for(;pr!==null;)GI(pr)}function NQ(){for(;pr!==null&&!Ak();)GI(pr)}function GI(t){var e=WI(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?zI(t):pr=e,pw.current=null}function zI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=EQ(r,e),r!==null){r.flags&=32767,pr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xr=6,pr=null;return}}else if(r=IQ(r,e,vn),r!==null){pr=r;return}if(e=e.sibling,e!==null){pr=e;return}pr=e=t}while(e!==null);xr===0&&(xr=5)}function yi(t,e,r){var n=St,s=Pn.transition;try{Pn.transition=null,St=1,RQ(t,e,r,n)}finally{Pn.transition=s,St=n}return null}function RQ(t,e,r,n){do Xo();while(wA!==null);if(Ct&6)throw Error(pe(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var A=r.lanes|r.childLanes;if(gk(t,A),t===Tr&&(pr=Tr=null,Pr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$u||($u=!0,qI(lh,function(){return Xo(),null})),A=(r.flags&15990)!==0,r.subtreeFlags&15990||A){A=Pn.transition,Pn.transition=null;var i=St;St=1;var a=Ct;Ct|=4,pw.current=null,FQ(t,r),MI(r,t),tQ(Am),uh=!!sm,Am=sm=null,t.current=r,SQ(r),ik(),Ct=a,St=i,Pn.transition=A}else t.current=r;if($u&&($u=!1,wA=t,Eh=s),A=t.pendingLanes,A===0&&(SA=null),lk(r.stateNode),mn(t,ur()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ih)throw Ih=!1,t=_m,_m=null,t;return Eh&1&&t.tag!==0&&Xo(),A=t.pendingLanes,A&1?t===Im?Xl++:(Xl=0,Im=t):Xl=0,ti(),null}function Xo(){if(wA!==null){var t=I_(Eh),e=Pn.transition,r=St;try{if(Pn.transition=null,St=16>t?16:t,wA===null)var n=!1;else{if(t=wA,wA=null,Eh=0,Ct&6)throw Error(pe(331));var s=Ct;for(Ct|=4,Me=t.current;Me!==null;){var A=Me,i=A.child;if(Me.flags&16){var a=A.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(Me=c;Me!==null;){var d=Me;switch(d.tag){case 0:case 11:case 15:ql(8,d,A)}var h=d.child;if(h!==null)h.return=d,Me=h;else for(;Me!==null;){d=Me;var f=d.sibling,m=d.return;if(PI(d),d===c){Me=null;break}if(f!==null){f.return=m,Me=f;break}Me=m}}}var y=A.alternate;if(y!==null){var C=y.child;if(C!==null){y.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}Me=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,Me=i;else e:for(;Me!==null;){if(A=Me,A.flags&2048)switch(A.tag){case 0:case 11:case 15:ql(9,A,A.return)}var B=A.sibling;if(B!==null){B.return=A.return,Me=B;break e}Me=A.return}}var w=t.current;for(Me=w;Me!==null;){i=Me;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Me=b;else e:for(i=w;Me!==null;){if(a=Me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cf(9,a)}}catch(Q){or(a,a.return,Q)}if(a===i){Me=null;break e}var F=a.sibling;if(F!==null){F.return=a.return,Me=F;break e}Me=a.return}}if(Ct=s,ti(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(gf,t)}catch{}n=!0}return n}finally{St=r,Pn.transition=e}}return!1}function Nv(t,e,r){e=la(r,e),e=II(t,e,1),t=FA(t,e,1),e=rn(),t!==null&&($c(t,1,e),mn(t,e))}function or(t,e,r){if(t.tag===3)Nv(t,t,r);else for(;e!==null;){if(e.tag===3){Nv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(SA===null||!SA.has(n))){t=la(r,t),t=EI(e,t,1),e=FA(e,t,1),t=rn(),e!==null&&($c(e,1,t),mn(e,t));break}}e=e.return}}function DQ(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=rn(),t.pingedLanes|=t.suspendedLanes&r,Tr===t&&(Pr&r)===r&&(xr===4||xr===3&&(Pr&130023424)===Pr&&500>ur()-ww?Ui(t,0):mw|=r),mn(t,e)}function $I(t,e){e===0&&(t.mode&1?(e=Pu,Pu<<=1,!(Pu&130023424)&&(Pu=4194304)):e=1);var r=rn();t=Rs(t,e),t!==null&&($c(t,e,r),mn(t,r))}function PQ(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),$I(t,r)}function LQ(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(e),$I(t,r)}var WI;WI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)un=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return un=!1,_Q(t,e,r);un=!!(t.flags&131072)}else un=!1,Xt&&e.flags&1048576&&Y_(e,wh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Dd(t,e),t=e.pendingProps;var s=Aa(e,Xr.current);Jo(e,r),s=uw(null,e,n,t,s,r);var A=dw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(n)?(A=!0,ph(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,iw(e),s.updater=Bf,e.stateNode=s,s._reactInternals=e,fm(e,n,t,r),e=mm(null,e,n,!0,A,r)):(e.tag=0,Xt&&A&&Z0(e),en(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Dd(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=MQ(n),t=Kn(n,t),s){case 0:e=pm(null,e,n,t,r);break e;case 1:e=bv(null,e,n,t,r);break e;case 11:e=Bv(null,e,n,t,r);break e;case 14:e=Cv(null,e,n,Kn(n.type,t),r);break e}throw Error(pe(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),pm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),bv(t,e,n,s,r);case 3:e:{if(UI(e),t===null)throw Error(pe(387));n=e.pendingProps,A=e.memoizedState,s=A.element,sI(t,e),vh(e,n,null,r);var i=e.memoizedState;if(n=i.element,A.isDehydrated)if(A={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=la(Error(pe(423)),e),e=_v(t,e,n,r,s);break e}else if(n!==s){s=la(Error(pe(424)),e),e=_v(t,e,n,r,s);break e}else for(Cn=TA(e.stateNode.containerInfo.firstChild),bn=e,Xt=!0,zn=null,r=rI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ia(),n===s){e=Ds(t,e,r);break e}en(t,e,n,r)}e=e.child}return e;case 5:return AI(e),t===null&&um(e),n=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,im(n,s)?i=null:A!==null&&im(n,A)&&(e.flags|=32),SI(t,e),en(t,e,i,r),e.child;case 6:return t===null&&um(e),null;case 13:return kI(t,e,r);case 4:return ow(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=oa(e,null,n,r):en(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),Bv(t,e,n,s,r);case 7:return en(t,e,e.pendingProps,r),e.child;case 8:return en(t,e,e.pendingProps.children,r),e.child;case 12:return en(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,Ot(yh,n._currentValue),n._currentValue=i,A!==null)if(Jn(A.value,i)){if(A.children===s.children&&!gn.current){e=Ds(t,e,r);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var a=A.dependencies;if(a!==null){i=A.child;for(var o=a.firstContext;o!==null;){if(o.context===n){if(A.tag===1){o=Us(-1,r&-r),o.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o}}A.lanes|=r,o=A.alternate,o!==null&&(o.lanes|=r),dm(A.return,r,e),a.lanes|=r;break}o=o.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(pe(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),dm(i,r,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}en(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Jo(e,r),s=jn(s),n=n(s),e.flags|=1,en(t,e,n,r),e.child;case 14:return n=e.type,s=Kn(n,e.pendingProps),s=Kn(n.type,s),Cv(t,e,n,s,r);case 15:return TI(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),Dd(t,e),e.tag=1,pn(n)?(t=!0,ph(e)):t=!1,Jo(e,r),_I(e,n,s),fm(e,n,s,r),mm(null,e,n,!0,t,r);case 19:return QI(t,e,r);case 22:return FI(t,e,r)}throw Error(pe(156,e.tag))};function qI(t,e){return B_(t,e)}function jQ(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,r,n){return new jQ(t,e,r,n)}function Bw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MQ(t){if(typeof t=="function")return Bw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O0)return 11;if(t===H0)return 14}return 2}function kA(t,e){var r=t.alternate;return r===null?(r=Nn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function jd(t,e,r,n,s,A){var i=2;if(n=t,typeof t=="function")Bw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case ko:return ki(r.children,s,A,e);case M0:i=8,s|=8;break;case Lp:return t=Nn(12,r,e,s|2),t.elementType=Lp,t.lanes=A,t;case jp:return t=Nn(13,r,e,s),t.elementType=jp,t.lanes=A,t;case Mp:return t=Nn(19,r,e,s),t.elementType=Mp,t.lanes=A,t;case A_:return _f(r,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n_:i=10;break e;case s_:i=9;break e;case O0:i=11;break e;case H0:i=14;break e;case AA:i=16,n=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=Nn(i,r,e,s),e.elementType=t,e.type=n,e.lanes=A,e}function ki(t,e,r,n){return t=Nn(7,t,n,e),t.lanes=r,t}function _f(t,e,r,n){return t=Nn(22,t,n,e),t.elementType=A_,t.lanes=r,t.stateNode={isHidden:!1},t}function Xg(t,e,r){return t=Nn(6,t,null,e),t.lanes=r,t}function Yg(t,e,r){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OQ(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kg(0),this.expirationTimes=kg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cw(t,e,r,n,s,A,i,a,o){return t=new OQ(t,e,r,a,o),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Nn(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},iw(A),t}function HQ(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function JI(t){if(!t)return OA;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var r=t.type;if(pn(r))return J_(t,r,e)}return e}function XI(t,e,r,n,s,A,i,a,o){return t=Cw(r,n,!0,t,s,A,i,a,o),t.context=JI(null),r=t.current,n=rn(),s=UA(r),A=Us(n,s),A.callback=e??null,FA(r,A,s),t.current.lanes=s,$c(t,s,n),mn(t,n),t}function If(t,e,r,n){var s=e.current,A=rn(),i=UA(s);return r=JI(r),e.context===null?e.context=r:e.pendingContext=r,e=Us(A,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=FA(s,e,i),t!==null&&(Wn(t,s,i,A),Qd(t,s,i)),i}function Fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function bw(t,e){Rv(t,e),(t=t.alternate)&&Rv(t,e)}function VQ(){return null}var YI=typeof reportError=="function"?reportError:function(t){console.error(t)};function _w(t){this._internalRoot=t}Ef.prototype.render=_w.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));If(t,e,null,null)};Ef.prototype.unmount=_w.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oi(function(){If(null,t,null,null)}),e[Ns]=null}};function Ef(t){this._internalRoot=t}Ef.prototype.unstable_scheduleHydration=function(t){if(t){var e=F_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<aA.length&&e!==0&&e<aA[r].priority;r++);aA.splice(r,0,t),r===0&&U_(t)}};function Iw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dv(){}function KQ(t,e,r,n,s){if(s){if(typeof n=="function"){var A=n;n=function(){var c=Fh(i);A.call(c)}}var i=XI(e,n,t,0,null,!1,!1,"",Dv);return t._reactRootContainer=i,t[Ns]=i.current,wc(t.nodeType===8?t.parentNode:t),Oi(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=Fh(o);a.call(c)}}var o=Cw(t,0,!1,null,null,!1,!1,"",Dv);return t._reactRootContainer=o,t[Ns]=o.current,wc(t.nodeType===8?t.parentNode:t),Oi(function(){If(e,o,r,n)}),o}function Ff(t,e,r,n,s){var A=r._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var a=s;s=function(){var o=Fh(i);a.call(o)}}If(e,i,t,s)}else i=KQ(r,e,t,s,n);return Fh(i)}E_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=El(e.pendingLanes);r!==0&&(G0(e,r|1),mn(e,ur()),!(Ct&6)&&(ca=ur()+500,ti()))}break;case 13:Oi(function(){var n=Rs(t,1);if(n!==null){var s=rn();Wn(n,t,1,s)}}),bw(t,1)}};z0=function(t){if(t.tag===13){var e=Rs(t,134217728);if(e!==null){var r=rn();Wn(e,t,134217728,r)}bw(t,134217728)}};T_=function(t){if(t.tag===13){var e=UA(t),r=Rs(t,e);if(r!==null){var n=rn();Wn(r,t,e,n)}bw(t,e)}};F_=function(){return St};S_=function(t,e){var r=St;try{return St=t,e()}finally{St=r}};Jp=function(t,e,r){switch(e){case"input":if(Vp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=yf(n);if(!s)throw Error(pe(90));o_(n),Vp(n,s)}}}break;case"textarea":l_(t,r);break;case"select":e=r.value,e!=null&&zo(t,!!r.multiple,e,!1)}};p_=yw;m_=Oi;var GQ={usingClientEntryPoint:!1,Events:[qc,Do,yf,f_,g_,yw]},dl={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zQ={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x_(t),t===null?null:t.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||VQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{gf=Wu.inject(zQ),os=Wu}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GQ;Tn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iw(e))throw Error(pe(200));return HQ(t,e,null,r)};Tn.createRoot=function(t,e){if(!Iw(t))throw Error(pe(299));var r=!1,n="",s=YI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cw(t,1,!1,null,null,r,!1,n,s),t[Ns]=e.current,wc(t.nodeType===8?t.parentNode:t),new _w(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=x_(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return Oi(t)};Tn.hydrate=function(t,e,r){if(!Tf(e))throw Error(pe(200));return Ff(null,t,e,!0,r)};Tn.hydrateRoot=function(t,e,r){if(!Iw(t))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,s=!1,A="",i=YI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(A=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=XI(e,null,t,1,r??null,s,!1,A,i),t[Ns]=e.current,wc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ef(e)};Tn.render=function(t,e,r){if(!Tf(e))throw Error(pe(200));return Ff(null,t,e,!1,r)};Tn.unmountComponentAtNode=function(t){if(!Tf(t))throw Error(pe(40));return t._reactRootContainer?(Oi(function(){Ff(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};Tn.unstable_batchedUpdates=yw;Tn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Tf(r))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return Ff(t,e,r,!1,n)};Tn.version="18.3.1-next-f1338f8080-20240426";function ZI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZI)}catch(t){console.error(t)}}ZI(),Zb.exports=Tn;var $Q=Zb.exports,Pv=$Q;Dp.createRoot=Pv.createRoot,Dp.hydrateRoot=Pv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ec.apply(this,arguments)}var yA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yA||(yA={}));const Lv="popstate";function WQ(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:a="",hash:o=""}=ro(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Fm("",{pathname:i,search:a,hash:o},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(s,A){let i=s.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let o=s.location.href,c=o.indexOf("#");a=c===-1?o:o.slice(0,c)}return a+"#"+(typeof A=="string"?A:Sh(A))}function n(s,A){Sf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return JQ(e,r,n,t)}function nr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qQ(){return Math.random().toString(36).substr(2,8)}function jv(t,e){return{usr:t.state,key:t.key,idx:e}}function Fm(t,e,r,n){return r===void 0&&(r=null),Ec({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:r,key:e&&e.key||n||qQ()})}function Sh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ro(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function JQ(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:A=!1}=n,i=s.history,a=yA.Pop,o=null,c=d();c==null&&(c=0,i.replaceState(Ec({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){a=yA.Pop;let I=d(),B=I==null?null:I-c;c=I,o&&o({action:a,location:C.location,delta:B})}function f(I,B){a=yA.Push;let w=Fm(C.location,I,B);r&&r(w,I),c=d()+1;let b=jv(w,c),F=C.createHref(w);try{i.pushState(b,"",F)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(F)}A&&o&&o({action:a,location:C.location,delta:1})}function m(I,B){a=yA.Replace;let w=Fm(C.location,I,B);r&&r(w,I),c=d();let b=jv(w,c),F=C.createHref(w);i.replaceState(b,"",F),A&&o&&o({action:a,location:C.location,delta:0})}function y(I){let B=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof I=="string"?I:Sh(I);return w=w.replace(/ $/,"%20"),nr(B,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,B)}let C={get action(){return a},get location(){return t(s,i)},listen(I){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(Lv,h),o=I,()=>{s.removeEventListener(Lv,h),o=null}},createHref(I){return e(s,I)},createURL:y,encodeLocation(I){let B=y(I);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:f,replace:m,go(I){return i.go(I)}};return C}var Mv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mv||(Mv={}));function XQ(t,e,r){return r===void 0&&(r="/"),YQ(t,e,r)}function YQ(t,e,r,n){let s=typeof e=="string"?ro(e):e,A=ua(s.pathname||"/",r);if(A==null)return null;let i=eE(t);ZQ(i);let a=null;for(let o=0;a==null&&o<i.length;++o){let c=c2(A);a=a2(i[o],c)}return a}function eE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(A,i,a)=>{let o={relativePath:a===void 0?A.path||"":a,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};o.relativePath.startsWith("/")&&(nr(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=QA([n,o.relativePath]),d=r.concat(o);A.children&&A.children.length>0&&(nr(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),eE(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:i2(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var a;if(A.path===""||!((a=A.path)!=null&&a.includes("?")))s(A,i);else for(let o of tE(A.path))s(A,i,o)}),e}function tE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return s?[A,""]:[A];let i=tE(n.join("/")),a=[];return a.push(...i.map(o=>o===""?A:[A,o].join("/"))),s&&a.push(...i),a.map(o=>t.startsWith("/")&&o===""?"/":o)}function ZQ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:o2(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const e2=/^:[\w-]+$/,t2=3,r2=2,n2=1,s2=10,A2=-2,Ov=t=>t==="*";function i2(t,e){let r=t.split("/"),n=r.length;return r.some(Ov)&&(n+=A2),e&&(n+=r2),r.filter(s=>!Ov(s)).reduce((s,A)=>s+(e2.test(A)?t2:A===""?n2:s2),n)}function o2(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function a2(t,e,r){let{routesMeta:n}=t,s={},A="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],c=a===n.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=Sm({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d),f=o.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:QA([A,h.pathname]),pathnameBase:g2(QA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=QA([A,h.pathnameBase]))}return i}function Sm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=l2(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let C=a[h]||"";i=A.slice(0,A.length-C.length).replace(/(.)\/+$/,"$1")}const y=a[h];return m&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function l2(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Sf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(n.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function c2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ua(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const u2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d2=t=>u2.test(t);function h2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ro(t):t,A;if(r)if(d2(r))A=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Sf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?A=Hv(r.substring(1),"/"):A=Hv(r,e)}else A=e;return{pathname:A,search:p2(n),hash:m2(s)}}function Hv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Zg(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function f2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Ew(t,e){let r=f2(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Tw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ro(t):(s=Ec({},t),nr(!s.pathname||!s.pathname.includes("?"),Zg("?","pathname","search",s)),nr(!s.pathname||!s.pathname.includes("#"),Zg("#","pathname","hash",s)),nr(!s.search||!s.search.includes("#"),Zg("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,a;if(i==null)a=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let o=h2(s,a),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||d)&&(o.pathname+="/"),o}const QA=t=>t.join("/").replace(/\/\/+/g,"/"),g2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),p2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,m2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function w2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rE=["post","put","patch","delete"];new Set(rE);const y2=["get",...rE];new Set(y2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tc.apply(this,arguments)}const Uf=T.createContext(null),nE=T.createContext(null),Vs=T.createContext(null),kf=T.createContext(null),Ks=T.createContext({outlet:null,matches:[],isDataRoute:!1}),sE=T.createContext(null);function x2(t,e){let{relative:r}=e===void 0?{}:e;Qa()||nr(!1);let{basename:n,navigator:s}=T.useContext(Vs),{hash:A,pathname:i,search:a}=Qf(t,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:QA([n,i])),s.createHref({pathname:o,search:a,hash:A})}function Qa(){return T.useContext(kf)!=null}function ri(){return Qa()||nr(!1),T.useContext(kf).location}function AE(t){T.useContext(Vs).static||T.useLayoutEffect(t)}function Xc(){let{isDataRoute:t}=T.useContext(Ks);return t?R2():v2()}function v2(){Qa()||nr(!1);let t=T.useContext(Uf),{basename:e,future:r,navigator:n}=T.useContext(Vs),{matches:s}=T.useContext(Ks),{pathname:A}=ri(),i=JSON.stringify(Ew(s,r.v7_relativeSplatPath)),a=T.useRef(!1);return AE(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=Tw(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:QA([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,A,t])}const B2=T.createContext(null);function C2(t){let e=T.useContext(Ks).outlet;return e&&T.createElement(B2.Provider,{value:t},e)}function Qf(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Vs),{matches:s}=T.useContext(Ks),{pathname:A}=ri(),i=JSON.stringify(Ew(s,n.v7_relativeSplatPath));return T.useMemo(()=>Tw(t,JSON.parse(i),A,r==="path"),[t,i,A,r])}function b2(t,e){return _2(t,e)}function _2(t,e,r,n){Qa()||nr(!1);let{navigator:s}=T.useContext(Vs),{matches:A}=T.useContext(Ks),i=A[A.length-1],a=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c=ri(),d;if(e){var h;let I=typeof e=="string"?ro(e):e;o==="/"||(h=I.pathname)!=null&&h.startsWith(o)||nr(!1),d=I}else d=c;let f=d.pathname||"/",m=f;if(o!=="/"){let I=o.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let y=XQ(t,{pathname:m}),C=S2(y&&y.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:QA([o,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?o:QA([o,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),A,r,n);return e&&C?T.createElement(kf.Provider,{value:{location:Tc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:yA.Pop}},C):C}function I2(){let t=N2(),e=w2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:s},r):null,null)}const E2=T.createElement(I2,null);class T2 extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Ks.Provider,{value:this.props.routeContext},T.createElement(sE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F2(t){let{routeContext:e,match:r,children:n}=t,s=T.useContext(Uf);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Ks.Provider,{value:e},n)}function S2(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var A;if(!r)return null;if(r.errors)t=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||nr(!1),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,y=!1,C=null,I=null;r&&(m=a&&h.route.id?a[h.route.id]:void 0,C=h.route.errorElement||E2,o&&(c<0&&f===0?(D2("route-fallback"),y=!0,I=null):c===f&&(y=!0,I=h.route.hydrateFallbackElement||null)));let B=e.concat(i.slice(0,f+1)),w=()=>{let b;return m?b=C:y?b=I:h.route.Component?b=T.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,T.createElement(F2,{match:h,routeContext:{outlet:d,matches:B,isDataRoute:r!=null},children:b})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(T2,{location:r.location,revalidation:r.revalidation,component:C,error:m,children:w(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):w()},null)}var iE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iE||{}),oE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(oE||{});function U2(t){let e=T.useContext(Uf);return e||nr(!1),e}function k2(t){let e=T.useContext(nE);return e||nr(!1),e}function Q2(t){let e=T.useContext(Ks);return e||nr(!1),e}function aE(t){let e=Q2(),r=e.matches[e.matches.length-1];return r.route.id||nr(!1),r.route.id}function N2(){var t;let e=T.useContext(sE),r=k2(),n=aE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function R2(){let{router:t}=U2(iE.UseNavigateStable),e=aE(oE.UseNavigateStable),r=T.useRef(!1);return AE(()=>{r.current=!0}),T.useCallback(function(s,A){A===void 0&&(A={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Tc({fromRouteId:e},A)))},[t,e])}const Vv={};function D2(t,e,r){Vv[t]||(Vv[t]=!0)}function P2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Uh(t){let{to:e,replace:r,state:n,relative:s}=t;Qa()||nr(!1);let{future:A,static:i}=T.useContext(Vs),{matches:a}=T.useContext(Ks),{pathname:o}=ri(),c=Xc(),d=Tw(e,Ew(a,A.v7_relativeSplatPath),o,s==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function L2(t){return C2(t.context)}function on(t){nr(!1)}function j2(t){let{basename:e="/",children:r=null,location:n,navigationType:s=yA.Pop,navigator:A,static:i=!1,future:a}=t;Qa()&&nr(!1);let o=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:o,navigator:A,static:i,future:Tc({v7_relativeSplatPath:!1},a)}),[o,a,A,i]);typeof n=="string"&&(n=ro(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,C=T.useMemo(()=>{let I=ua(d,o);return I==null?null:{location:{pathname:I,search:h,hash:f,state:m,key:y},navigationType:s}},[o,d,h,f,m,y,s]);return C==null?null:T.createElement(Vs.Provider,{value:c},T.createElement(kf.Provider,{children:r,value:C}))}function M2(t){let{children:e,location:r}=t;return b2(Um(e),r)}new Promise(()=>{});function Um(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,s)=>{if(!T.isValidElement(n))return;let A=[...e,s];if(n.type===T.Fragment){r.push.apply(r,Um(n.props.children,A));return}n.type!==on&&nr(!1),!n.props.index||!n.props.children||nr(!1);let i={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Um(n.props.children,A)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(){return kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kh.apply(this,arguments)}function lE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,A;for(A=0;A<n.length;A++)s=n[A],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function O2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function H2(t,e){return t.button===0&&(!e||e==="_self")&&!O2(t)}function km(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function V2(t,e){let r=km(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(A=>{r.append(s,A)})}),r}const K2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],G2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],z2="6";try{window.__reactRouterVersion=z2}catch{}const $2=T.createContext({isTransitioning:!1}),W2="startTransition",Kv=DU[W2];function q2(t){let{basename:e,children:r,future:n,window:s}=t,A=T.useRef();A.current==null&&(A.current=WQ({window:s,v5Compat:!0}));let i=A.current,[a,o]=T.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&Kv?Kv(()=>o(h)):o(h)},[o,c]);return T.useLayoutEffect(()=>i.listen(d),[i,d]),T.useEffect(()=>P2(n),[n]),T.createElement(j2,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const J2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y2=T.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:A,replace:i,state:a,target:o,to:c,preventScrollReset:d,viewTransition:h}=e,f=lE(e,K2),{basename:m}=T.useContext(Vs),y,C=!1;if(typeof c=="string"&&X2.test(c)&&(y=c,J2))try{let b=new URL(window.location.href),F=c.startsWith("//")?new URL(b.protocol+c):new URL(c),Q=ua(F.pathname,m);F.origin===b.origin&&Q!=null?c=Q+F.search+F.hash:C=!0}catch{}let I=x2(c,{relative:s}),B=eN(c,{replace:i,state:a,target:o,preventScrollReset:d,relative:s,viewTransition:h});function w(b){n&&n(b),b.defaultPrevented||B(b)}return T.createElement("a",kh({},f,{href:y||I,onClick:C||A?n:w,ref:r,target:o}))}),Md=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:A="",end:i=!1,style:a,to:o,viewTransition:c,children:d}=e,h=lE(e,G2),f=Qf(o,{relative:h.relative}),m=ri(),y=T.useContext(nE),{navigator:C,basename:I}=T.useContext(Vs),B=y!=null&&rN(f)&&c===!0,w=C.encodeLocation?C.encodeLocation(f).pathname:f.pathname,b=m.pathname,F=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(b=b.toLowerCase(),F=F?F.toLowerCase():null,w=w.toLowerCase()),F&&I&&(F=ua(F,I)||F);const Q=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let D=b===w||!i&&b.startsWith(w)&&b.charAt(Q)==="/",x=F!=null&&(F===w||!i&&F.startsWith(w)&&F.charAt(w.length)==="/"),v={isActive:D,isPending:x,isTransitioning:B},_=D?n:void 0,S;typeof A=="function"?S=A(v):S=[A,D?"active":null,x?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(v):a;return T.createElement(Y2,kh({},h,{"aria-current":_,className:S,ref:r,style:R,to:o,viewTransition:c}),typeof d=="function"?d(v):d)});var Qm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qm||(Qm={}));var Gv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gv||(Gv={}));function Z2(t){let e=T.useContext(Uf);return e||nr(!1),e}function eN(t,e){let{target:r,replace:n,state:s,preventScrollReset:A,relative:i,viewTransition:a}=e===void 0?{}:e,o=Xc(),c=ri(),d=Qf(t,{relative:i});return T.useCallback(h=>{if(H2(h,r)){h.preventDefault();let f=n!==void 0?n:Sh(c)===Sh(d);o(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:a})}},[c,o,d,n,s,r,t,A,i,a])}function tN(t){let e=T.useRef(km(t)),r=T.useRef(!1),n=ri(),s=T.useMemo(()=>V2(n.search,r.current?null:e.current),[n.search]),A=Xc(),i=T.useCallback((a,o)=>{const c=km(typeof a=="function"?a(s):a);r.current=!0,A("?"+c,o)},[A,s]);return[s,i]}function rN(t,e){e===void 0&&(e={});let r=T.useContext($2);r==null&&nr(!1);let{basename:n}=Z2(Qm.useViewTransitionState),s=Qf(t,{relative:e.relative});if(!r.isTransitioning)return!1;let A=ua(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=ua(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Sm(s.pathname,i)!=null||Sm(s.pathname,A)!=null}var se=(t=>(t.First="1 ",t.Second="2 ",t))(se||{}),ht=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ht||{});const Et=["","","","",""],an={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},zv=["","","/","","","",""," "],Qh=[{shift:se.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:se.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:se.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:se.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:se.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:se.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:se.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:se.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:se.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:se.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:se.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:se.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:se.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:se.Second,period:6,start:"18:50",end:"19:35",day:"default"}],nN=[{shift:se.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:se.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:se.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:se.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:se.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:se.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:se.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:se.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:se.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:se.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:se.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:se.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:se.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:se.Second,period:6,start:"17:00",end:"17:35",day:"default"}],hl=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),cE=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:hl(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:hl(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:hl(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:hl(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:hl(78,86),order:5}],tn={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:se.First,studentsCount:25},{id:"c2",name:"6",shift:se.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:Qh,dutyZones:cE,dutySchedule:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",bellPresets:[{id:"preset_normal",name:" (45 )",bells:Qh},{id:"preset_short",name:" (35 )",bells:nN}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]}}},sN="modulepreload",AN=function(t){return"/zamenygymn/"+t},$v={},iN=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(o=>{if(o=AN(o),o in $v)return;$v[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":sN,c||(h.as="script"),h.crossOrigin="",h.href=o,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function A(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&A(a.reason);return e().catch(A)})};var Wv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},oN=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[r++];e[n++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[r++],i=t[r++],a=t[r++],o=((s&7)<<18|(A&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const A=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,a=i?t[s+1]:0,o=s+2<t.length,c=o?t[s+2]:0,d=A>>2,h=(A&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;o||(m=64,i||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const A=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,A==null||a==null||c==null||h==null)throw new aN;const f=A<<2|a>>4;if(n.push(f),c!==64){const m=a<<4&240|c>>2;if(n.push(m),h!==64){const y=c<<6&192|h;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lN=function(t){const e=uE(t);return dE.encodeByteArray(e,!0)},Nh=function(t){return lN(t).replace(/\./g,"")},hE=function(t){try{return dE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=()=>cN().__FIREBASE_DEFAULTS__,dN=()=>{if(typeof process>"u"||typeof Wv>"u")return;const t=Wv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hE(t[1]);return e&&JSON.parse(e)},Nf=()=>{try{return uN()||dN()||hN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fE=t=>{var e,r;return(r=(e=Nf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},fN=t=>{const e=fE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},gE=()=>{var t;return(t=Nf())===null||t===void 0?void 0:t.config},pE=t=>{var e;return(e=Nf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nh(JSON.stringify(r)),Nh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vr())}function wN(){var t;const e=(t=Nf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BN(){const t=vr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mE(){return!wN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wE(){try{return typeof indexedDB=="object"}catch{return!1}}function CN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="FirebaseError";class Gs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=bN,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?_N(A,n):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Gs(s,a,n)}}function _N(t,e){return t.replace(IN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const IN=/\{\$([^}]+)}/g;function EN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function HA(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const A=t[s],i=e[s];if(qv(A)&&qv(i)){if(!HA(A,i))return!1}else if(A!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function qv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Fl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,A]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Sl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function TN(t,e){const r=new FN(t,e);return r.subscribe.bind(r)}class FN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");SN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=ep),s.error===void 0&&(s.error=ep),s.complete===void 0&&(s.complete=ep);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class Hi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new gN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QN(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const A=this.getOrInitializeService({instanceIdentifier:s});n.resolve(A)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[A,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(A);n===a&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),A=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:kN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kN(t){return t===xi?void 0:t}function QN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new UN(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wt||(wt={}));const RN={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},DN=wt.INFO,PN={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},LN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=PN[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Fw=class{constructor(e){this.name=e,this._logLevel=DN,this._logHandler=LN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}};const jN=(t,e)=>e.some(r=>t instanceof r);let Jv,Xv;function MN(){return Jv||(Jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ON(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yE=new WeakMap,Nm=new WeakMap,xE=new WeakMap,tp=new WeakMap,Sw=new WeakMap;function HN(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{r(NA(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&yE.set(r,t)}).catch(()=>{}),Sw.set(e,t),e}function VN(t){if(Nm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});Nm.set(t,e)}let Rm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return NA(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KN(t){Rm=t(Rm)}function GN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(rp(this),e,...r);return xE.set(n,e.sort?e.sort():[e]),NA(n)}:ON().includes(t)?function(...e){return t.apply(rp(this),e),NA(yE.get(this))}:function(...e){return NA(t.apply(rp(this),e))}}function zN(t){return typeof t=="function"?GN(t):(t instanceof IDBTransaction&&VN(t),jN(t,MN())?new Proxy(t,Rm):t)}function NA(t){if(t instanceof IDBRequest)return HN(t);if(tp.has(t))return tp.get(t);const e=zN(t);return e!==t&&(tp.set(t,e),Sw.set(e,t)),e}const rp=t=>Sw.get(t);function $N(t,e,{blocked:r,upgrade:n,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),a=NA(i);return n&&i.addEventListener("upgradeneeded",o=>{n(NA(i.result),o.oldVersion,o.newVersion,NA(i.transaction),o)}),r&&i.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{A&&o.addEventListener("close",()=>A()),s&&o.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const WN=["get","getKey","getAll","getAllKeys","count"],qN=["put","add","delete","clear"],np=new Map;function Yv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(np.get(e))return np.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=qN.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||WN.includes(r)))return;const A=async function(i,...a){const o=this.transaction(i,s?"readwrite":"readonly");let c=o.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),s&&o.done]))[0]};return np.set(e,A),A}KN(t=>({...t,get:(e,r,n)=>Yv(e,r)||t.get(e,r,n),has:(e,r)=>!!Yv(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(XN(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function XN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dm="@firebase/app",Zv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Fw("@firebase/app"),YN="@firebase/app-compat",ZN="@firebase/analytics-compat",eR="@firebase/analytics",tR="@firebase/app-check-compat",rR="@firebase/app-check",nR="@firebase/auth",sR="@firebase/auth-compat",AR="@firebase/database",iR="@firebase/data-connect",oR="@firebase/database-compat",aR="@firebase/functions",lR="@firebase/functions-compat",cR="@firebase/installations",uR="@firebase/installations-compat",dR="@firebase/messaging",hR="@firebase/messaging-compat",fR="@firebase/performance",gR="@firebase/performance-compat",pR="@firebase/remote-config",mR="@firebase/remote-config-compat",wR="@firebase/storage",yR="@firebase/storage-compat",xR="@firebase/firestore",vR="@firebase/vertexai-preview",BR="@firebase/firestore-compat",CR="firebase",bR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="[DEFAULT]",_R={[Dm]:"fire-core",[YN]:"fire-core-compat",[eR]:"fire-analytics",[ZN]:"fire-analytics-compat",[rR]:"fire-app-check",[tR]:"fire-app-check-compat",[nR]:"fire-auth",[sR]:"fire-auth-compat",[AR]:"fire-rtdb",[iR]:"fire-data-connect",[oR]:"fire-rtdb-compat",[aR]:"fire-fn",[lR]:"fire-fn-compat",[cR]:"fire-iid",[uR]:"fire-iid-compat",[dR]:"fire-fcm",[hR]:"fire-fcm-compat",[fR]:"fire-perf",[gR]:"fire-perf-compat",[pR]:"fire-rc",[mR]:"fire-rc-compat",[wR]:"fire-gcs",[yR]:"fire-gcs-compat",[xR]:"fire-fst",[BR]:"fire-fst-compat",[vR]:"fire-vertex","fire-js":"fire-js",[CR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Map,IR=new Map,Pm=new Map;function eB(t,e){try{t.container.addComponent(e)}catch(r){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function da(t){const e=t.name;if(Pm.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;Pm.set(e,t);for(const r of Fc.values())eB(r,t);for(const r of IR.values())eB(r,t);return!0}function eu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ER(t,e,r=Rh){eu(t,e).clearInstance(r)}function Is(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},RA=new Yc("app","Firebase",TR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw RA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=bR;function vE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Rh,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw RA.create("bad-app-name",{appName:String(s)});if(r||(r=gE()),!r)throw RA.create("no-options");const A=Fc.get(s);if(A){if(HA(r,A.options)&&HA(n,A.config))return A;throw RA.create("duplicate-app",{appName:s})}const i=new NN(s);for(const o of Pm.values())i.addComponent(o);const a=new FR(r,n,i);return Fc.set(s,a),a}function Uw(t=Rh){const e=Fc.get(t);if(!e&&t===Rh&&gE())return vE();if(!e)throw RA.create("no-app",{appName:t});return e}function SR(){return Array.from(Fc.values())}function DA(t,e,r){var n;let s=(n=_R[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const a=[`Unable to register library "${s}" with version "${e}":`];A&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(a.join(" "));return}da(new Hi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="firebase-heartbeat-database",kR=1,Sc="firebase-heartbeat-store";let sp=null;function BE(){return sp||(sp=$N(UR,kR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sc)}catch(r){console.warn(r)}}}}).catch(t=>{throw RA.create("idb-open",{originalErrorMessage:t.message})})),sp}async function QR(t){try{const r=(await BE()).transaction(Sc),n=await r.objectStore(Sc).get(CE(t));return await r.done,n}catch(e){if(e instanceof Gs)Ps.warn(e.message);else{const r=RA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(r.message)}}}async function tB(t,e){try{const n=(await BE()).transaction(Sc,"readwrite");await n.objectStore(Sc).put(e,CE(t)),await n.done}catch(r){if(r instanceof Gs)Ps.warn(r.message);else{const n=RA.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ps.warn(n.message)}}}function CE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=1024,RR=30*24*60*60*1e3;class DR{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new LR(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=rB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=RR}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ps.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=rB(),{heartbeatsToSend:n,unsentEntries:s}=PR(this._heartbeatsCache.heartbeats),A=Nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(r){return Ps.warn(r),""}}}function rB(){return new Date().toISOString().substring(0,10)}function PR(t,e=NR){const r=[];let n=t.slice();for(const s of t){const A=r.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),nB(r)>e){A.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),nB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class LR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wE()?CN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await QR(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return tB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return tB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nB(t){return Nh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){da(new Hi("platform-logger",e=>new JN(e),"PRIVATE")),da(new Hi("heartbeat",e=>new DR(e),"PRIVATE")),DA(Dm,Zv,t),DA(Dm,Zv,"esm2017"),DA("fire-js","")}jR("");var MR="firebase",OR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */DA(MR,OR,"app");var sB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,bE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function _(){}_.prototype=v.prototype,x.D=v.prototype,x.prototype=new _,x.prototype.constructor=x,x.C=function(S,R,P){for(var k=Array(arguments.length-2),me=2;me<arguments.length;me++)k[me-2]=arguments[me];return v.prototype[R].apply(S,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,v,_){_||(_=0);var S=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)S[R]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(R=0;16>R;++R)S[R]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=x.g[0],_=x.g[1],R=x.g[2];var P=x.g[3],k=v+(P^_&(R^P))+S[0]+3614090360&4294967295;v=_+(k<<7&4294967295|k>>>25),k=P+(R^v&(_^R))+S[1]+3905402710&4294967295,P=v+(k<<12&4294967295|k>>>20),k=R+(_^P&(v^_))+S[2]+606105819&4294967295,R=P+(k<<17&4294967295|k>>>15),k=_+(v^R&(P^v))+S[3]+3250441966&4294967295,_=R+(k<<22&4294967295|k>>>10),k=v+(P^_&(R^P))+S[4]+4118548399&4294967295,v=_+(k<<7&4294967295|k>>>25),k=P+(R^v&(_^R))+S[5]+1200080426&4294967295,P=v+(k<<12&4294967295|k>>>20),k=R+(_^P&(v^_))+S[6]+2821735955&4294967295,R=P+(k<<17&4294967295|k>>>15),k=_+(v^R&(P^v))+S[7]+4249261313&4294967295,_=R+(k<<22&4294967295|k>>>10),k=v+(P^_&(R^P))+S[8]+1770035416&4294967295,v=_+(k<<7&4294967295|k>>>25),k=P+(R^v&(_^R))+S[9]+2336552879&4294967295,P=v+(k<<12&4294967295|k>>>20),k=R+(_^P&(v^_))+S[10]+4294925233&4294967295,R=P+(k<<17&4294967295|k>>>15),k=_+(v^R&(P^v))+S[11]+2304563134&4294967295,_=R+(k<<22&4294967295|k>>>10),k=v+(P^_&(R^P))+S[12]+1804603682&4294967295,v=_+(k<<7&4294967295|k>>>25),k=P+(R^v&(_^R))+S[13]+4254626195&4294967295,P=v+(k<<12&4294967295|k>>>20),k=R+(_^P&(v^_))+S[14]+2792965006&4294967295,R=P+(k<<17&4294967295|k>>>15),k=_+(v^R&(P^v))+S[15]+1236535329&4294967295,_=R+(k<<22&4294967295|k>>>10),k=v+(R^P&(_^R))+S[1]+4129170786&4294967295,v=_+(k<<5&4294967295|k>>>27),k=P+(_^R&(v^_))+S[6]+3225465664&4294967295,P=v+(k<<9&4294967295|k>>>23),k=R+(v^_&(P^v))+S[11]+643717713&4294967295,R=P+(k<<14&4294967295|k>>>18),k=_+(P^v&(R^P))+S[0]+3921069994&4294967295,_=R+(k<<20&4294967295|k>>>12),k=v+(R^P&(_^R))+S[5]+3593408605&4294967295,v=_+(k<<5&4294967295|k>>>27),k=P+(_^R&(v^_))+S[10]+38016083&4294967295,P=v+(k<<9&4294967295|k>>>23),k=R+(v^_&(P^v))+S[15]+3634488961&4294967295,R=P+(k<<14&4294967295|k>>>18),k=_+(P^v&(R^P))+S[4]+3889429448&4294967295,_=R+(k<<20&4294967295|k>>>12),k=v+(R^P&(_^R))+S[9]+568446438&4294967295,v=_+(k<<5&4294967295|k>>>27),k=P+(_^R&(v^_))+S[14]+3275163606&4294967295,P=v+(k<<9&4294967295|k>>>23),k=R+(v^_&(P^v))+S[3]+4107603335&4294967295,R=P+(k<<14&4294967295|k>>>18),k=_+(P^v&(R^P))+S[8]+1163531501&4294967295,_=R+(k<<20&4294967295|k>>>12),k=v+(R^P&(_^R))+S[13]+2850285829&4294967295,v=_+(k<<5&4294967295|k>>>27),k=P+(_^R&(v^_))+S[2]+4243563512&4294967295,P=v+(k<<9&4294967295|k>>>23),k=R+(v^_&(P^v))+S[7]+1735328473&4294967295,R=P+(k<<14&4294967295|k>>>18),k=_+(P^v&(R^P))+S[12]+2368359562&4294967295,_=R+(k<<20&4294967295|k>>>12),k=v+(_^R^P)+S[5]+4294588738&4294967295,v=_+(k<<4&4294967295|k>>>28),k=P+(v^_^R)+S[8]+2272392833&4294967295,P=v+(k<<11&4294967295|k>>>21),k=R+(P^v^_)+S[11]+1839030562&4294967295,R=P+(k<<16&4294967295|k>>>16),k=_+(R^P^v)+S[14]+4259657740&4294967295,_=R+(k<<23&4294967295|k>>>9),k=v+(_^R^P)+S[1]+2763975236&4294967295,v=_+(k<<4&4294967295|k>>>28),k=P+(v^_^R)+S[4]+1272893353&4294967295,P=v+(k<<11&4294967295|k>>>21),k=R+(P^v^_)+S[7]+4139469664&4294967295,R=P+(k<<16&4294967295|k>>>16),k=_+(R^P^v)+S[10]+3200236656&4294967295,_=R+(k<<23&4294967295|k>>>9),k=v+(_^R^P)+S[13]+681279174&4294967295,v=_+(k<<4&4294967295|k>>>28),k=P+(v^_^R)+S[0]+3936430074&4294967295,P=v+(k<<11&4294967295|k>>>21),k=R+(P^v^_)+S[3]+3572445317&4294967295,R=P+(k<<16&4294967295|k>>>16),k=_+(R^P^v)+S[6]+76029189&4294967295,_=R+(k<<23&4294967295|k>>>9),k=v+(_^R^P)+S[9]+3654602809&4294967295,v=_+(k<<4&4294967295|k>>>28),k=P+(v^_^R)+S[12]+3873151461&4294967295,P=v+(k<<11&4294967295|k>>>21),k=R+(P^v^_)+S[15]+530742520&4294967295,R=P+(k<<16&4294967295|k>>>16),k=_+(R^P^v)+S[2]+3299628645&4294967295,_=R+(k<<23&4294967295|k>>>9),k=v+(R^(_|~P))+S[0]+4096336452&4294967295,v=_+(k<<6&4294967295|k>>>26),k=P+(_^(v|~R))+S[7]+1126891415&4294967295,P=v+(k<<10&4294967295|k>>>22),k=R+(v^(P|~_))+S[14]+2878612391&4294967295,R=P+(k<<15&4294967295|k>>>17),k=_+(P^(R|~v))+S[5]+4237533241&4294967295,_=R+(k<<21&4294967295|k>>>11),k=v+(R^(_|~P))+S[12]+1700485571&4294967295,v=_+(k<<6&4294967295|k>>>26),k=P+(_^(v|~R))+S[3]+2399980690&4294967295,P=v+(k<<10&4294967295|k>>>22),k=R+(v^(P|~_))+S[10]+4293915773&4294967295,R=P+(k<<15&4294967295|k>>>17),k=_+(P^(R|~v))+S[1]+2240044497&4294967295,_=R+(k<<21&4294967295|k>>>11),k=v+(R^(_|~P))+S[8]+1873313359&4294967295,v=_+(k<<6&4294967295|k>>>26),k=P+(_^(v|~R))+S[15]+4264355552&4294967295,P=v+(k<<10&4294967295|k>>>22),k=R+(v^(P|~_))+S[6]+2734768916&4294967295,R=P+(k<<15&4294967295|k>>>17),k=_+(P^(R|~v))+S[13]+1309151649&4294967295,_=R+(k<<21&4294967295|k>>>11),k=v+(R^(_|~P))+S[4]+4149444226&4294967295,v=_+(k<<6&4294967295|k>>>26),k=P+(_^(v|~R))+S[11]+3174756917&4294967295,P=v+(k<<10&4294967295|k>>>22),k=R+(v^(P|~_))+S[2]+718787259&4294967295,R=P+(k<<15&4294967295|k>>>17),k=_+(P^(R|~v))+S[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+P&4294967295}n.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var _=v-this.blockSize,S=this.B,R=this.h,P=0;P<v;){if(R==0)for(;P<=_;)s(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<v;)if(S[R++]=x.charCodeAt(P++),R==this.blockSize){s(this,S),R=0;break}}else for(;P<v;)if(S[R++]=x[P++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=v},n.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var _=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=_&255,_/=256;for(this.u(x),x=Array(16),v=_=0;4>v;++v)for(var S=0;32>S;S+=8)x[_++]=this.g[v]>>>S&255;return x};function A(x,v){var _=a;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=v(x)}function i(x,v){this.h=v;for(var _=[],S=!0,R=x.length-1;0<=R;R--){var P=x[R]|0;S&&P==v||(_[R]=P,S=!1)}this.g=_}var a={};function o(x){return-128<=x&&128>x?A(x,function(v){return new i([v|0],0>v?-1:0)}):new i([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return I(c(-x));for(var v=[],_=1,S=0;x>=_;S++)v[S]=x/_|0,_*=4294967296;return new i(v,0)}function d(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return I(d(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(v,8)),S=h,R=0;R<x.length;R+=8){var P=Math.min(8,x.length-R),k=parseInt(x.substring(R,R+P),v);8>P?(P=c(Math.pow(v,P)),S=S.j(P).add(c(k))):(S=S.j(_),S=S.add(c(k)))}return S}var h=o(0),f=o(1),m=o(16777216);t=i.prototype,t.m=function(){if(C(this))return-I(this).m();for(var x=0,v=1,_=0;_<this.g.length;_++){var S=this.i(_);x+=(0<=S?S:4294967296+S)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(y(this))return"0";if(C(this))return"-"+I(this).toString(x);for(var v=c(Math.pow(x,6)),_=this,S="";;){var R=F(_,v).g;_=B(_,R.j(v));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(x);if(_=R,y(_))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function y(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function C(x){return x.h==-1}t.l=function(x){return x=B(this,x),C(x)?-1:y(x)?0:1};function I(x){for(var v=x.g.length,_=[],S=0;S<v;S++)_[S]=~x.g[S];return new i(_,~x.h).add(f)}t.abs=function(){return C(this)?I(this):this},t.add=function(x){for(var v=Math.max(this.g.length,x.g.length),_=[],S=0,R=0;R<=v;R++){var P=S+(this.i(R)&65535)+(x.i(R)&65535),k=(P>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);S=k>>>16,P&=65535,k&=65535,_[R]=k<<16|P}return new i(_,_[_.length-1]&-2147483648?-1:0)};function B(x,v){return x.add(I(v))}t.j=function(x){if(y(this)||y(x))return h;if(C(this))return C(x)?I(this).j(I(x)):I(I(this).j(x));if(C(x))return I(this.j(I(x)));if(0>this.l(m)&&0>x.l(m))return c(this.m()*x.m());for(var v=this.g.length+x.g.length,_=[],S=0;S<2*v;S++)_[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<x.g.length;R++){var P=this.i(S)>>>16,k=this.i(S)&65535,me=x.i(R)>>>16,Ze=x.i(R)&65535;_[2*S+2*R]+=k*Ze,w(_,2*S+2*R),_[2*S+2*R+1]+=P*Ze,w(_,2*S+2*R+1),_[2*S+2*R+1]+=k*me,w(_,2*S+2*R+1),_[2*S+2*R+2]+=P*me,w(_,2*S+2*R+2)}for(S=0;S<v;S++)_[S]=_[2*S+1]<<16|_[2*S];for(S=v;S<2*v;S++)_[S]=0;return new i(_,0)};function w(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function b(x,v){this.g=x,this.h=v}function F(x,v){if(y(v))throw Error("division by zero");if(y(x))return new b(h,h);if(C(x))return v=F(I(x),v),new b(I(v.g),I(v.h));if(C(v))return v=F(x,I(v)),new b(I(v.g),v.h);if(30<x.g.length){if(C(x)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var _=f,S=v;0>=S.l(x);)_=Q(_),S=Q(S);var R=D(_,1),P=D(S,1);for(S=D(S,2),_=D(_,2);!y(S);){var k=P.add(S);0>=k.l(x)&&(R=R.add(_),P=k),S=D(S,1),_=D(_,1)}return v=B(x,R.j(v)),new b(R,v)}for(R=h;0<=x.l(v);){for(_=Math.max(1,Math.floor(x.m()/v.m())),S=Math.ceil(Math.log(_)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=c(_),k=P.j(v);C(k)||0<k.l(x);)_-=S,P=c(_),k=P.j(v);y(P)&&(P=f),R=R.add(P),x=B(x,k)}return new b(R,x)}t.A=function(x){return F(this,x).h},t.and=function(x){for(var v=Math.max(this.g.length,x.g.length),_=[],S=0;S<v;S++)_[S]=this.i(S)&x.i(S);return new i(_,this.h&x.h)},t.or=function(x){for(var v=Math.max(this.g.length,x.g.length),_=[],S=0;S<v;S++)_[S]=this.i(S)|x.i(S);return new i(_,this.h|x.h)},t.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),_=[],S=0;S<v;S++)_[S]=this.i(S)^x.i(S);return new i(_,this.h^x.h)};function Q(x){for(var v=x.g.length+1,_=[],S=0;S<v;S++)_[S]=x.i(S)<<1|x.i(S-1)>>>31;return new i(_,x.h)}function D(x,v){var _=v>>5;v%=32;for(var S=x.g.length-_,R=[],P=0;P<S;P++)R[P]=0<v?x.i(P+_)>>>v|x.i(P+_+1)<<32-v:x.i(P+_);return new i(R,x.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,bE=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Qi=i}).apply(typeof sB<"u"?sB:typeof self<"u"?self:typeof window<"u"?window:{});var qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _E,Ul,IE,Od,Lm,EE,TE,FE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qu=="object"&&qu];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function s(u,g){if(g)e:{var p=n;u=u.split(".");for(var E=0;E<u.length-1;E++){var H=u[E];if(!(H in p))break e;p=p[H]}u=u[u.length-1],E=p[u],g=g(E),g!=E&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var p=0,E=!1,H={next:function(){if(!E&&p<u.length){var W=p++;return{value:g(W,u[W]),done:!1}}return E=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,E),u.apply(g,H)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function y(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(E,H,W){for(var Ie=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)Ie[Dt-2]=arguments[Dt];return g.prototype[H].apply(E,Ie)}}function C(u){const g=u.length;if(0<g){const p=Array(g);for(let E=0;E<g;E++)p[E]=u[E];return p}return[]}function I(u,g){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(o(E)){const H=u.length||0,W=E.length||0;u.length=H+W;for(let Ie=0;Ie<W;Ie++)u[H+Ie]=E[Ie]}else u.push(E)}}class B{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var Q=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(u,g,p){for(const E in u)g.call(p,u[E],E,u)}function x(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function v(u){const g={};for(const p in u)g[p]=u[p];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,g){let p,E;for(let H=1;H<arguments.length;H++){E=arguments[H];for(p in E)u[p]=E[p];for(let W=0;W<_.length;W++)p=_[W],Object.prototype.hasOwnProperty.call(E,p)&&(u[p]=E[p])}}function R(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function P(u){a.setTimeout(()=>{throw u},0)}function k(){var u=Fe;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class me{constructor(){this.h=this.g=null}add(g,p){const E=Ze.get();E.set(g,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Ze=new B(()=>new $e,u=>u.reset());class $e{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let je,ae=!1,Fe=new me,ke=()=>{const u=a.Promise.resolve(void 0);je=()=>{u.then(st)}};var st=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(p){P(p)}var g=Ze;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ae=!1};function We(){this.s=this.s,this.C=this.C}We.prototype.s=!1,We.prototype.ma=function(){this.s||(this.s=!0,this.N())},We.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,g),a.removeEventListener("test",p,g)}catch{}return u}();function ee(u,g){if(Ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(Q){e:{try{F(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ze[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ee.aa.h.call(this)}}y(ee,Ye);var ze={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),ct=0;function ut(u,g,p,E,H){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!E,this.ha=H,this.key=++ct,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ne(u){this.src=u,this.g={},this.h=0}ne.prototype.add=function(u,g,p,E,H){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var Ie=oe(u,g,E,H);return-1<Ie?(g=u[Ie],p||(g.fa=!1)):(g=new ut(g,this.src,W,!!E,H),g.fa=p,u.push(g)),g};function ue(u,g){var p=g.type;if(p in u.g){var E=u.g[p],H=Array.prototype.indexOf.call(E,g,void 0),W;(W=0<=H)&&Array.prototype.splice.call(E,H,1),W&&(te(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function oe(u,g,p,E){for(var H=0;H<u.length;++H){var W=u[H];if(!W.da&&W.listener==g&&W.capture==!!p&&W.ha==E)return H}return-1}var L="closure_lm_"+(1e6*Math.random()|0),z={};function le(u,g,p,E,H){if(Array.isArray(g)){for(var W=0;W<g.length;W++)le(u,g[W],p,E,H);return null}return p=Re(p),u&&u[He]?u.K(g,p,c(E)?!!E.capture:!1,H):de(u,g,p,!1,E,H)}function de(u,g,p,E,H,W){if(!g)throw Error("Invalid event type");var Ie=c(H)?!!H.capture:!!H,Dt=Ke(u);if(Dt||(u[L]=Dt=new ne(u)),p=Dt.add(g,p,E,Ie,W),p.proxy)return p;if(E=Ee(),p.proxy=E,E.src=u,E.listener=p,u.addEventListener)gt||(H=Ie),H===void 0&&(H=!1),u.addEventListener(g.toString(),E,H);else if(u.attachEvent)u.attachEvent(X(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ee(){function u(p){return g.call(u.src,u.listener,p)}const g=ce;return u}function Ce(u,g,p,E,H){if(Array.isArray(g))for(var W=0;W<g.length;W++)Ce(u,g[W],p,E,H);else E=c(E)?!!E.capture:!!E,p=Re(p),u&&u[He]?(u=u.i,g=String(g).toString(),g in u.g&&(W=u.g[g],p=oe(W,p,E,H),-1<p&&(te(W[p]),Array.prototype.splice.call(W,p,1),W.length==0&&(delete u.g[g],u.h--)))):u&&(u=Ke(u))&&(g=u.g[g.toString()],u=-1,g&&(u=oe(g,p,E,H)),(p=-1<u?g[u]:null)&&G(p))}function G(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[He])ue(g.i,u);else{var p=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(p,E,u.capture):g.detachEvent?g.detachEvent(X(p),E):g.addListener&&g.removeListener&&g.removeListener(E),(p=Ke(g))?(ue(p,u),p.h==0&&(p.src=null,g[L]=null)):te(u)}}}function X(u){return u in z?z[u]:z[u]="on"+u}function ce(u,g){if(u.da)u=!0;else{g=new ee(g,this);var p=u.listener,E=u.ha||u.src;u.fa&&G(u),u=p.call(E,g)}return u}function Ke(u){return u=u[L],u instanceof ne?u:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(u){return typeof u=="function"?u:(u[we]||(u[we]=function(g){return u.handleEvent(g)}),u[we])}function he(){We.call(this),this.i=new ne(this),this.M=this,this.F=null}y(he,We),he.prototype[He]=!0,he.prototype.removeEventListener=function(u,g,p,E){Ce(this,u,g,p,E)};function re(u,g){var p,E=u.F;if(E)for(p=[];E;E=E.F)p.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new Ye(g,u);else if(g instanceof Ye)g.target=g.target||u;else{var H=g;g=new Ye(E,u),S(g,H)}if(H=!0,p)for(var W=p.length-1;0<=W;W--){var Ie=g.g=p[W];H=ve(Ie,E,!0,g)&&H}if(Ie=g.g=u,H=ve(Ie,E,!0,g)&&H,H=ve(Ie,E,!1,g)&&H,p)for(W=0;W<p.length;W++)Ie=g.g=p[W],H=ve(Ie,E,!1,g)&&H}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],E=0;E<p.length;E++)te(p[E]);delete u.g[g],u.h--}}this.F=null},he.prototype.K=function(u,g,p,E){return this.i.add(String(u),g,!1,p,E)},he.prototype.L=function(u,g,p,E){return this.i.add(String(u),g,!0,p,E)};function ve(u,g,p,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,W=0;W<g.length;++W){var Ie=g[W];if(Ie&&!Ie.da&&Ie.capture==p){var Dt=Ie.listener,Ur=Ie.ha||Ie.src;Ie.fa&&ue(u.i,Ie),H=Dt.call(Ur,E)!==!1&&H}}return H&&!E.defaultPrevented}function Le(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Ge(u){u.g=Le(()=>{u.g=null,u.i&&(u.i=!1,Ge(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Te extends We{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function it(u){We.call(this),this.h=u,this.g={}}y(it,We);var tt=[];function et(u){D(u.g,function(g,p){this.g.hasOwnProperty(p)&&G(g)},u),u.g={}}it.prototype.N=function(){it.aa.N.call(this),et(this)},it.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ve=a.JSON.stringify,xe=a.JSON.parse,qe=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ot(){}ot.prototype.h=null;function _t(u){return u.h||(u.h=u.i())}function dt(){}var N={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function q(){Ye.call(this,"d")}y(q,Ye);function $(){Ye.call(this,"c")}y($,Ye);var O={},Ne=null;function Se(){return Ne=Ne||new he}O.La="serverreachability";function ge(u){Ye.call(this,O.La,u)}y(ge,Ye);function Be(u){const g=Se();re(g,new ge(g))}O.STAT_EVENT="statevent";function U(u,g){Ye.call(this,O.STAT_EVENT,u),this.stat=g}y(U,Ye);function j(u){const g=Se();re(g,new U(g,u))}O.Ma="timingevent";function fe(u,g){Ye.call(this,O.Ma,u),this.size=g}y(fe,Ye);function Z(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function J(){this.g=!0}J.prototype.xa=function(){this.g=!1};function Y(u,g,p,E,H,W){u.info(function(){if(u.g)if(W)for(var Ie="",Dt=W.split("&"),Ur=0;Ur<Dt.length;Ur++){var bt=Dt[Ur].split("=");if(1<bt.length){var Mr=bt[0];bt=bt[1];var Or=Mr.split("_");Ie=2<=Or.length&&Or[1]=="type"?Ie+(Mr+"="+bt+"&"):Ie+(Mr+"=redacted&")}}else Ie=null;else Ie=W;return"XMLHTTP REQ ("+E+") [attempt "+H+"]: "+g+`
`+p+`
`+Ie})}function ye(u,g,p,E,H,W,Ie){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+H+"]: "+g+`
`+p+`
`+W+" "+Ie})}function be(u,g,p,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+rt(u,p)+(E?" "+E:"")})}function Je(u,g){u.info(function(){return"TIMEOUT: "+g})}J.prototype.info=function(){};function rt(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var E=p[u];if(!(2>E.length)){var H=E[1];if(Array.isArray(H)&&!(1>H.length)){var W=H[0];if(W!="noop"&&W!="stop"&&W!="close")for(var Ie=1;Ie<H.length;Ie++)H[Ie]=""}}}}return Ve(p)}catch{return g}}var at={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tt;function Wt(){}y(Wt,ot),Wt.prototype.g=function(){return new XMLHttpRequest},Wt.prototype.i=function(){return{}},Tt=new Wt;function Rt(u,g,p,E){this.j=u,this.i=g,this.l=p,this.R=E||1,this.U=new it(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yr}function Yr(){this.i=null,this.g="",this.h=!1}var jr={},wn={};function Zn(u,g,p){u.L=1,u.v=Cu(ms(g)),u.m=p,u.P=!0,ui(u,null)}function ui(u,g){u.F=Date.now(),Lt(u),u.A=ms(u.v);var p=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),ox(p.i,"t",E),u.C=0,p=u.j.J,u.h=new Yr,u.g=_x(u.j,p?g:null,!u.m),0<u.O&&(u.M=new Te(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,E=u.ca;var H="readystatechange";Array.isArray(H)||(H&&(tt[0]=H.toString()),H=tt);for(var W=0;W<H.length;W++){var Ie=le(p,H[W],E||g.handleEvent,!1,g.h||g);if(!Ie)break;g.g[Ie.key]=Ie}g=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Be(),Y(u.i,u.u,u.A,u.l,u.R,u.m)}Rt.prototype.ca=function(u){u=u.target;const g=this.M;g&&ws(u)==3?g.j():this.Y(u)},Rt.prototype.Y=function(u){try{if(u==this.g)e:{const Or=ws(this.g);var g=this.g.Ba();const uo=this.g.Z();if(!(3>Or)&&(Or!=3||this.g&&(this.h.h||this.g.oa()||fx(this.g)))){this.J||Or!=4||g==7||(g==8||0>=uo?Be(3):Be(2)),mr(this);var p=this.g.Z();this.X=p;t:if(An(this)){var E=fx(this.g);u="";var H=E.length,W=ws(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),Xa(this);var Ie="";break t}this.h.i=new a.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(W&&g==H-1)});E.length=0,this.h.g+=u,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=p==200,ye(this.i,this.u,this.A,this.l,this.R,Or,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,Ur=this.g;if((Dt=Ur.g?Ur.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Dt)){var bt=Dt;break t}}bt=null}if(p=bt)be(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yg(this,p);else{this.o=!1,this.s=3,j(12),hi(this),Xa(this);break e}}if(this.P){p=!0;let On;for(;!this.J&&this.C<Ie.length;)if(On=di(this,Ie),On==wn){Or==4&&(this.s=4,j(14),p=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(On==jr){this.s=4,j(15),be(this.i,this.l,Ie,"[Invalid Chunk]"),p=!1;break}else be(this.i,this.l,On,null),yg(this,On);if(An(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Or!=4||Ie.length!=0||this.h.h||(this.s=1,j(16),p=!1),this.o=this.o&&p,!p)be(this.i,this.l,Ie,"[Invalid Chunked Response]"),hi(this),Xa(this);else if(0<Ie.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),_g(Mr),Mr.M=!0,j(11))}}else be(this.i,this.l,Ie,null),yg(this,Ie);Or==4&&hi(this),this.o&&!this.J&&(Or==4?vx(this.j,this):(this.o=!1,Lt(this)))}else wU(this.g),p==400&&0<Ie.indexOf("Unknown SID")?(this.s=3,j(12)):(this.s=0,j(13)),hi(this),Xa(this)}}}catch{}finally{}};function An(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function di(u,g){var p=u.C,E=g.indexOf(`
`,p);return E==-1?wn:(p=Number(g.substring(p,E)),isNaN(p)?jr:(E+=1,E+p>g.length?wn:(g=g.slice(E,E+p),u.C=E+p,g)))}Rt.prototype.cancel=function(){this.J=!0,hi(this)};function Lt(u){u.S=Date.now()+u.I,Ja(u,u.I)}function Ja(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Z(f(u.ba,u),g)}function mr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Rt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Je(this.i,this.A),this.L!=2&&(Be(),j(17)),hi(this),this.s=2,Xa(this)):Ja(this,this.S-u)};function Xa(u){u.j.G==0||u.J||vx(u.j,u)}function hi(u){mr(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,et(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function yg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||xg(p.h,u))){if(!u.K&&xg(p.h,u)&&p.G==3){try{var E=p.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var H=E;if(H[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Fu(p),Eu(p);else break e;bg(p),j(18)}}else p.za=H[1],0<p.za-p.T&&37500>H[2]&&p.F&&p.v==0&&!p.C&&(p.C=Z(f(p.Za,p),6e3));if(1>=Yy(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else gi(p,11)}else if((u.K||p.g==u)&&Fu(p),!w(g))for(H=p.Da.g.parse(g),g=0;g<H.length;g++){let bt=H[g];if(p.T=bt[0],bt=bt[1],p.G==2)if(bt[0]=="c"){p.K=bt[1],p.ia=bt[2];const Mr=bt[3];Mr!=null&&(p.la=Mr,p.j.info("VER="+p.la));const Or=bt[4];Or!=null&&(p.Aa=Or,p.j.info("SVER="+p.Aa));const uo=bt[5];uo!=null&&typeof uo=="number"&&0<uo&&(E=1.5*uo,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const On=u.g;if(On){const Uu=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uu){var W=E.h;W.g||Uu.indexOf("spdy")==-1&&Uu.indexOf("quic")==-1&&Uu.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(vg(W,W.h),W.h=null))}if(E.D){const Ig=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Ig&&(E.ya=Ig,Vt(E.I,E.D,Ig))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var Ie=u;if(E.qa=bx(E,E.J?E.ia:null,E.W),Ie.K){Zy(E.h,Ie);var Dt=Ie,Ur=E.L;Ur&&(Dt.I=Ur),Dt.B&&(mr(Dt),Lt(Dt)),E.g=Ie}else yx(E);0<p.i.length&&Tu(p)}else bt[0]!="stop"&&bt[0]!="close"||gi(p,7);else p.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?gi(p,7):Cg(p):bt[0]!="noop"&&p.l&&p.l.ta(bt),p.v=0)}}Be(4)}catch{}}var rU=class{constructor(u,g){this.g=u,this.map=g}};function Jy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Yy(u){return u.h?1:u.g?u.g.size:0}function xg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function vg(u,g){u.g?u.g.add(g):u.h=g}function Zy(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Jy.prototype.cancel=function(){if(this.i=ex(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ex(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return C(u.i)}function nU(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(o(u)){for(var g=[],p=u.length,E=0;E<p;E++)g.push(u[E]);return g}g=[],p=0;for(E in u)g[p++]=u[E];return g}function sU(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(o(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const E in u)g[p++]=E;return g}}}function tx(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(o(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=sU(u),E=nU(u),H=E.length,W=0;W<H;W++)g.call(void 0,E[W],p&&p[W],u)}var rx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AU(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var E=u[p].indexOf("="),H=null;if(0<=E){var W=u[p].substring(0,E);H=u[p].substring(E+1)}else W=u[p];g(W,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function fi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fi){this.h=u.h,vu(this,u.j),this.o=u.o,this.g=u.g,Bu(this,u.s),this.l=u.l;var g=u.i,p=new el;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),nx(this,p),this.m=u.m}else u&&(g=String(u).match(rx))?(this.h=!1,vu(this,g[1]||"",!0),this.o=Ya(g[2]||""),this.g=Ya(g[3]||"",!0),Bu(this,g[4]),this.l=Ya(g[5]||"",!0),nx(this,g[6]||"",!0),this.m=Ya(g[7]||"")):(this.h=!1,this.i=new el(null,this.h))}fi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Za(g,sx,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Za(g,sx,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Za(p,p.charAt(0)=="/"?aU:oU,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Za(p,cU)),u.join("")};function ms(u){return new fi(u)}function vu(u,g,p){u.j=p?Ya(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Bu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function nx(u,g,p){g instanceof el?(u.i=g,uU(u.i,u.h)):(p||(g=Za(g,lU)),u.i=new el(g,u.h))}function Vt(u,g,p){u.i.set(g,p)}function Cu(u){return Vt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ya(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Za(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,iU),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function iU(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sx=/[#\/\?@]/g,oU=/[#\?:]/g,aU=/[#\?]/g,lU=/[#\?@]/g,cU=/#/g;function el(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Js(u){u.g||(u.g=new Map,u.h=0,u.i&&AU(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=el.prototype,t.add=function(u,g){Js(this),this.i=null,u=lo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function Ax(u,g){Js(u),g=lo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function ix(u,g){return Js(u),g=lo(u,g),u.g.has(g)}t.forEach=function(u,g){Js(this),this.g.forEach(function(p,E){p.forEach(function(H){u.call(g,H,E,this)},this)},this)},t.na=function(){Js(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let E=0;E<g.length;E++){const H=u[E];for(let W=0;W<H.length;W++)p.push(g[E])}return p},t.V=function(u){Js(this);let g=[];if(typeof u=="string")ix(this,u)&&(g=g.concat(this.g.get(lo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return Js(this),this.i=null,u=lo(this,u),ix(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function ox(u,g,p){Ax(u,g),0<p.length&&(u.i=null,u.g.set(lo(u,g),C(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var E=g[p];const W=encodeURIComponent(String(E)),Ie=this.V(E);for(E=0;E<Ie.length;E++){var H=W;Ie[E]!==""&&(H+="="+encodeURIComponent(String(Ie[E]))),u.push(H)}}return this.i=u.join("&")};function lo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function uU(u,g){g&&!u.j&&(Js(u),u.i=null,u.g.forEach(function(p,E){var H=E.toLowerCase();E!=H&&(Ax(this,E),ox(this,H,p))},u)),u.j=g}function dU(u,g){const p=new J;if(a.Image){const E=new Image;E.onload=m(Xs,p,"TestLoadImage: loaded",!0,g,E),E.onerror=m(Xs,p,"TestLoadImage: error",!1,g,E),E.onabort=m(Xs,p,"TestLoadImage: abort",!1,g,E),E.ontimeout=m(Xs,p,"TestLoadImage: timeout",!1,g,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function hU(u,g){const p=new J,E=new AbortController,H=setTimeout(()=>{E.abort(),Xs(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(W=>{clearTimeout(H),W.ok?Xs(p,"TestPingServer: ok",!0,g):Xs(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),Xs(p,"TestPingServer: error",!1,g)})}function Xs(u,g,p,E,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),E(p)}catch{}}function fU(){this.g=new qe}function gU(u,g,p){const E=p||"";try{tx(u,function(H,W){let Ie=H;c(H)&&(Ie=Ve(H)),g.push(E+W+"="+encodeURIComponent(Ie))})}catch(H){throw g.push(E+"type="+encodeURIComponent("_badmap")),H}}function bu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(bu,ot),bu.prototype.g=function(){return new _u(this.l,this.j)},bu.prototype.i=function(u){return function(){return u}}({});function _u(u,g){he.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(_u,he),t=_u.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,rl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rl(this)),this.g&&(this.readyState=3,rl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ax(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ax(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?tl(this):rl(this),this.readyState==3&&ax(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,tl(this))},t.Qa=function(u){this.g&&(this.response=u,tl(this))},t.ga=function(){this.g&&tl(this)};function tl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function rl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function lx(u){let g="";return D(u,function(p,E){g+=E,g+=":",g+=p,g+=`\r
`}),g}function Bg(u,g,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=lx(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Vt(u,g,p))}function ir(u){he.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ir,he);var pU=/^https?$/i,mU=["POST","PUT"];t=ir.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tt.g(),this.v=this.o?_t(this.o):_t(Tt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(W){cx(this,W);return}if(u=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var H in E)p.set(H,E[H]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const W of E.keys())p.set(W,E.get(W));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(W=>W.toLowerCase()=="content-type"),H=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(mU,g,void 0))||E||H||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,Ie]of p)this.g.setRequestHeader(W,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hx(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){cx(this,W)}};function cx(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,ux(u),Iu(u)}function ux(u){u.A||(u.A=!0,re(u,"complete"),re(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,re(this,"complete"),re(this,"abort"),Iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Iu(this,!0)),ir.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dx(this):this.bb())},t.bb=function(){dx(this)};function dx(u){if(u.h&&typeof i<"u"&&(!u.v[1]||ws(u)!=4||u.Z()!=2)){if(u.u&&ws(u)==4)Le(u.Ea,0,u);else if(re(u,"readystatechange"),ws(u)==4){u.h=!1;try{const Ie=u.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var E;if(E=Ie===0){var H=String(u.D).match(rx)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),E=!pU.test(H?H.toLowerCase():"")}p=E}if(p)re(u,"complete"),re(u,"success");else{u.m=6;try{var W=2<ws(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",ux(u)}}finally{Iu(u)}}}}function Iu(u,g){if(u.g){hx(u);const p=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||re(u,"ready");try{p.onreadystatechange=E}catch{}}}function hx(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ws(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ws(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),xe(g)}};function fx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wU(u){const g={};u=(u.g&&2<=ws(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(w(u[E]))continue;var p=R(u[E]);const H=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const W=g[H]||[];g[H]=W,W.push(p)}x(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nl(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function gx(u){this.Aa=0,this.i=[],this.j=new J,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nl("baseRetryDelayMs",5e3,u),this.cb=nl("retryDelaySeedMs",1e4,u),this.Wa=nl("forwardChannelMaxRetries",2,u),this.wa=nl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Jy(u&&u.concurrentRequestLimit),this.Da=new fU,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gx.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,E){j(0),this.W=u,this.H=g||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=bx(this,null,this.W),Tu(this)};function Cg(u){if(px(u),u.G==3){var g=u.U++,p=ms(u.I);if(Vt(p,"SID",u.K),Vt(p,"RID",g),Vt(p,"TYPE","terminate"),sl(u,p),g=new Rt(u,u.j,g),g.L=2,g.v=Cu(ms(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=g.v,p=!0),p||(g.g=_x(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Lt(g)}Cx(u)}function Eu(u){u.g&&(_g(u),u.g.cancel(),u.g=null)}function px(u){Eu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Fu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Tu(u){if(!Xy(u.h)&&!u.s){u.s=!0;var g=u.Ga;je||ke(),ae||(je(),ae=!0),Fe.add(g,u),u.B=0}}function yU(u,g){return Yy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Z(f(u.Ga,u,g),Bx(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const H=new Rt(this,this.j,u);let W=this.o;if(this.S&&(W?(W=v(W),S(W,this.S)):W=this.S),this.m!==null||this.O||(H.H=W,W=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=wx(this,H,g),p=ms(this.I),Vt(p,"RID",u),Vt(p,"CVER",22),this.D&&Vt(p,"X-HTTP-Session-Id",this.D),sl(this,p),W&&(this.O?g="headers="+encodeURIComponent(String(lx(W)))+"&"+g:this.m&&Bg(p,this.m,W)),vg(this.h,H),this.Ua&&Vt(p,"TYPE","init"),this.P?(Vt(p,"$req",g),Vt(p,"SID","null"),H.T=!0,Zn(H,p,null)):Zn(H,p,g),this.G=2}}else this.G==3&&(u?mx(this,u):this.i.length==0||Xy(this.h)||mx(this))};function mx(u,g){var p;g?p=g.l:p=u.U++;const E=ms(u.I);Vt(E,"SID",u.K),Vt(E,"RID",p),Vt(E,"AID",u.T),sl(u,E),u.m&&u.o&&Bg(E,u.m,u.o),p=new Rt(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=wx(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),vg(u.h,p),Zn(p,E,g)}function sl(u,g){u.H&&D(u.H,function(p,E){Vt(g,E,p)}),u.l&&tx({},function(p,E){Vt(g,E,p)})}function wx(u,g,p){p=Math.min(u.i.length,p);var E=u.l?f(u.l.Na,u.l,u):null;e:{var H=u.i;let W=-1;for(;;){const Ie=["count="+p];W==-1?0<p?(W=H[0].g,Ie.push("ofs="+W)):W=0:Ie.push("ofs="+W);let Dt=!0;for(let Ur=0;Ur<p;Ur++){let bt=H[Ur].g;const Mr=H[Ur].map;if(bt-=W,0>bt)W=Math.max(0,H[Ur].g-100),Dt=!1;else try{gU(Mr,Ie,"req"+bt+"_")}catch{E&&E(Mr)}}if(Dt){E=Ie.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,E}function yx(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;je||ke(),ae||(je(),ae=!0),Fe.add(g,u),u.v=0}}function bg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Z(f(u.Fa,u),Bx(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,xx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Z(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,j(10),Eu(this),xx(this))};function _g(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function xx(u){u.g=new Rt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ms(u.qa);Vt(g,"RID","rpc"),Vt(g,"SID",u.K),Vt(g,"AID",u.T),Vt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Vt(g,"TO",u.ja),Vt(g,"TYPE","xmlhttp"),sl(u,g),u.m&&u.o&&Bg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Cu(ms(g)),p.m=null,p.P=!0,ui(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Eu(this),bg(this),j(19))};function Fu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function vx(u,g){var p=null;if(u.g==g){Fu(u),_g(u),u.g=null;var E=2}else if(xg(u.h,g))p=g.D,Zy(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var H=u.B;E=Se(),re(E,new fe(E,p)),Tu(u)}else yx(u);else if(H=g.s,H==3||H==0&&0<g.X||!(E==1&&yU(u,g)||E==2&&bg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),H){case 1:gi(u,5);break;case 4:gi(u,10);break;case 3:gi(u,6);break;default:gi(u,2)}}}function Bx(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function gi(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),E=u.Xa;const H=!E;E=new fi(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vu(E,"https"),Cu(E),H?dU(E.toString(),p):hU(E.toString(),p)}else j(2);u.G=0,u.l&&u.l.sa(g),Cx(u),px(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),j(2)):(this.j.info("Failed to ping google.com"),j(1))};function Cx(u){if(u.G=0,u.ka=[],u.l){const g=ex(u.h);(g.length!=0||u.i.length!=0)&&(I(u.ka,g),I(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function bx(u,g,p){var E=p instanceof fi?ms(p):new fi(p);if(E.g!="")g&&(E.g=g+"."+E.g),Bu(E,E.s);else{var H=a.location;E=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var W=new fi(null);E&&vu(W,E),g&&(W.g=g),H&&Bu(W,H),p&&(W.l=p),E=W}return p=u.D,g=u.ya,p&&g&&Vt(E,p,g),Vt(E,"VER",u.la),sl(u,E),E}function _x(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new ir(new bu({eb:p})):new ir(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ix(){}t=Ix.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Su(){}Su.prototype.g=function(u,g){return new yn(u,g)};function yn(u,g){he.call(this),this.g=new gx(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new co(this)}y(yn,he),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Cg(this.g)},yn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Ve(u),u=p);g.i.push(new rU(g.Ya++,u)),g.G==3&&Tu(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,Cg(this.g),delete this.g,yn.aa.N.call(this)};function Ex(u){q.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(Ex,q);function Tx(){$.call(this),this.status=1}y(Tx,$);function co(u){this.g=u}y(co,Ix),co.prototype.ua=function(){re(this.g,"a")},co.prototype.ta=function(u){re(this.g,new Ex(u))},co.prototype.sa=function(u){re(this.g,new Tx)},co.prototype.ra=function(){re(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,FE=function(){return new Su},TE=function(){return Se()},EE=O,Lm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,Od=at,Ut.COMPLETE="complete",IE=Ut,dt.EventType=N,N.OPEN="a",N.CLOSE="b",N.ERROR="c",N.MESSAGE="d",he.prototype.listen=he.prototype.K,Ul=dt,ir.prototype.listenOnce=ir.prototype.L,ir.prototype.getLastError=ir.prototype.Ka,ir.prototype.getLastErrorCode=ir.prototype.Ba,ir.prototype.getStatus=ir.prototype.Z,ir.prototype.getResponseJson=ir.prototype.Oa,ir.prototype.getResponseText=ir.prototype.oa,ir.prototype.send=ir.prototype.ea,ir.prototype.setWithCredentials=ir.prototype.Ha,_E=ir}).apply(typeof qu<"u"?qu:typeof self<"u"?self:typeof window<"u"?window:{});const AB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new Fw("@firebase/firestore");function _o(){return VA.logLevel}function HR(t){VA.setLogLevel(t)}function ie(t,...e){if(VA.logLevel<=wt.DEBUG){const r=e.map(kw);VA.debug(`Firestore (${Ra}): ${t}`,...r)}}function dr(t,...e){if(VA.logLevel<=wt.ERROR){const r=e.map(kw);VA.error(`Firestore (${Ra}): ${t}`,...r)}}function In(t,...e){if(VA.logLevel<=wt.WARN){const r=e.map(kw);VA.warn(`Firestore (${Ra}): ${t}`,...r)}}function kw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: `+t;throw dr(e),new Error(e)}function Oe(t,e){t||Pe()}function VR(t,e){t||Pe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Gs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Er.UNAUTHENTICATED))}shutdown(){}}class KR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class GR{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Oe(this.o===void 0);let n=this.i;const s=o=>this.i!==n?(n=this.i,r(o)):Promise.resolve();let A=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const o=A;e.enqueueRetryable(async()=>{await o.promise,await s(this.currentUser)})},a=o=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Fr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Oe(typeof n.accessToken=="string"),new SE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Er(e)}}class zR{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $R{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new zR(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Oe(this.o===void 0);const n=A=>{A.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,ie("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>n(A))};const s=A=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Oe(typeof r.token=="string"),this.R=r.token,new kE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class qR{getToken(){return Promise.resolve(new kE(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=JR(40);for(let A=0;A<s.length;++A)n.length<20&&s[A]<r&&(n+=e.charAt(s[A]%e.length))}return n}}function At(t,e){return t<e?-1:t>e?1:0}function ha(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function QE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ae(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ae(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ae(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Zt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Zt(0,0))}static max(){return new Xe(new Zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,r,n){r===void 0?r=0:r>e.length&&Pe(),n===void 0?n=e.length-r:n>e.length-r&&Pe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Uc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Uc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const A=e.get(s),i=r.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class yt extends Uc{construct(e,r,n){return new yt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ae(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new yt(r)}static emptyPath(){return new yt([])}}const XR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Uc{construct(e,r,n){return new zt(e,r,n)}static isValidIdentifier(e){return XR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const A=()=>{if(n.length===0)throw new Ae(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Ae(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[s+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new Ae(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=o,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(n+=a,s++):(A(),s++)}if(A(),i)throw new Ae(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(r)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(yt.fromString(e))}static fromName(e){return new Ue(yt.fromString(e).popFirst(5))}static empty(){return new Ue(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return yt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new yt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function jm(t){return t.fields.find(e=>e.kind===2)}function vi(t){return t.fields.filter(e=>e.kind!==2)}function YR(t,e){let r=At(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=ZR(t.fields[n],e.fields[n]),r!==0)return r;return At(t.fields.length,e.fields.length)}fa.UNKNOWN_ID=-1;class Ni{constructor(e,r){this.fieldPath=e,this.kind=r}}function ZR(t,e){const r=zt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:At(t.kind,e.kind)}class ga{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ga(0,En.min())}}function NE(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(n===1e9?new Zt(r+1,0):new Zt(r,n));return new En(s,Ue.empty(),e)}function RE(t){return new En(t.readTime,t.key,-1)}class En{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new En(Xe.min(),Ue.empty(),-1)}static max(){return new En(Xe.max(),Ue.empty(),-1)}}function Nw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ue.comparator(t.documentKey,e.documentKey),r!==0?r:At(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==DE)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new M((n,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(n,s)},this.catchCallback=A=>{this.wrapFailure(r,A).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof M?r:M.resolve(r)}catch(r){return M.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):M.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):M.reject(r)}static resolve(e){return new M((r,n)=>{r(e)})}static reject(e){return new M((r,n)=>{n(e)})}static waitFor(e){return new M((r,n)=>{let s=0,A=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++A,i&&A===s&&r()},o=>n(o))}),i=!0,A===s&&r()})}static or(e){let r=M.resolve(!1);for(const n of e)r=r.next(s=>s?M.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,A)=>{n.push(r.call(this,s,A))}),this.waitFor(n)}static mapArray(e,r){return new M((n,s)=>{const A=e.length,i=new Array(A);let a=0;for(let o=0;o<A;o++){const c=o;r(e[c]).next(d=>{i[c]=d,++a,a===A&&n(i)},d=>s(d))}})}static doWhile(e,r){return new M((n,s)=>{const A=()=>{e()===!0?r().next(()=>{A()},s):n()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Fr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Yl(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Rw(n.target.error);this.V.reject(new Yl(e,s))}}static open(e,r,n,s){try{return new Rf(r,e.transaction(s,n))}catch(A){throw new Yl(r,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new t4(r)}}class ls{constructor(e,r,n){this.name=e,this.version=r,this.p=n,ls.S(vr())===12.2&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ie("SimpleDb","Removing database:",e),Bi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!wE())return!1;if(ls.v())return!0;const e=vr(),r=ls.S(e),n=0<r&&r<10,s=LE(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ie("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;r(i)},s.onblocked=()=>{n(new Yl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?n(new Ae(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new Ae(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Yl(e,i))},s.onupgradeneeded=A=>{ie("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{ie("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const A=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const a=Rf.open(this.db,e,A?"readonly":"readwrite",n),o=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return o.catch(()=>{}),await a.m,o}catch(a){const o=a,c=o.name!=="FirebaseError"&&i<3;if(ie("SimpleDb","Transaction failed with error:",o.message,"Retrying:",c),this.close(),!c)return Promise.reject(o)}}}close(){this.db&&this.db.close(),this.db=void 0}}function LE(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class e4{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Bi(this.B.delete())}}class Yl extends Ae{constructor(e,r){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function si(t){return t.name==="IndexedDbTransactionError"}class t4{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ie("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bi(n)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),Bi(this.store.add(e))}get(e){return Bi(this.store.get(e)).next(r=>(r===void 0&&(r=null),ie("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),Bi(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),Bi(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(n.range);return new M((i,a)=>{A.onerror=o=>{a(o.target.error)},A.onsuccess=o=>{i(o.target.result)}})}{const A=this.cursor(n),i=[];return this.W(A,(a,o)=>{i.push(o)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new M((s,A)=>{n.onerror=i=>{A(i.target.error)},n.onsuccess=i=>{s(i.target.result)}})}j(e,r){ie("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(A,i,a)=>a.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new M((n,s)=>{r.onerror=A=>{const i=Rw(A.target.error);s(i)},r.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():n()}):n()}})}W(e,r){const n=[];return new M((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const o=new e4(a),c=r(a.primaryKey,a.value,o);if(c instanceof M){const d=c.catch(h=>(o.done(),M.reject(h)));n.push(d)}o.isDone?s():o.K===null?a.continue():a.continue(o.K)}}).next(()=>M.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Bi(t){return new M((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Rw(n.target.error);r(s)}})}let iB=!1;function Rw(t){const e=ls.S(vr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iB||(iB=!0,setTimeout(()=>{throw n},0)),n}}return t}class r4{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ie("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){si(r)?ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ni(r)}await this.X(6e4)})}}class n4{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,A=!0;return M.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return ie("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(a=>{s-=a,n.add(i)});A=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(a=>(ie("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,r,a))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((s,A)=>{const i=RE(A);Nw(i,n)>0&&(n=i)}),new En(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dn.oe=-1;function tu(t){return t==null}function kc(t){return t===0&&1/t==-1/0}function jE(t){return typeof t=="number"&&Number.isInteger(t)&&!kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=oB(e)),e=s4(t.get(r),e);return oB(e)}function s4(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const A=t.charAt(s);switch(A){case"\0":r+="";break;case"":r+="";break;default:r+=A}}return r}function oB(t){return t+""}function As(t){const e=t.length;if(Oe(e>=2),e===2)return Oe(t.charAt(0)===""&&t.charAt(1)===""),yt.emptyPath();const r=e-2,n=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>r)&&Pe(),t.charAt(i+1)){case"":const a=t.substring(A,i);let o;s.length===0?o=a:(s+=a,o=s,s=""),n.push(o);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:Pe()}A=i+2}return new yt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e){return[t,qr(e)]}function ME(t,e,r){return[t,qr(e),r]}const A4={},i4=["prefixPath","collectionGroup","readTime","documentId"],o4=["prefixPath","collectionGroup","documentId"],a4=["collectionGroup","readTime","prefixPath","documentId"],l4=["canonicalId","targetId"],c4=["targetId","path"],u4=["path","targetId"],d4=["collectionId","parent"],h4=["indexId","uid"],f4=["uid","sequenceNumber"],g4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],p4=["indexId","uid","orderedDocumentKey"],m4=["userId","collectionPath","documentId"],w4=["userId","collectionPath","largestBatchId"],y4=["userId","collectionGroup","largestBatchId"],OE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],x4=[...OE,"documentOverlays"],HE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VE=HE,Dw=[...VE,"indexConfiguration","indexState","indexEntries"],v4=Dw,B4=[...Dw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends PE{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Br(t,e){const r=_e(t);return ls.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ai(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function KE(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function GE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,r){this.comparator=e,this.root=r||Nr.EMPTY}insert(e,r){return new Ht(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new Ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=r?n(e.key,r):1,r&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,r,n,s,A){this.key=e,this.value=r,this.color=n??Nr.RED,this.left=s??Nr.EMPTY,this.right=A??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,A){return new Nr(e??this.key,r??this.value,n??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const A=n(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,r,n),null):A===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Nr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,r,n,s,A){return this}insert(e,r,n){return new Nr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new cB(this.data.getIterator())}getIteratorFrom(e){return new cB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Qt(this.comparator);return r.data=e,r}}class cB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new hn([])}unionWith(e){let r=new Qt(zt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new hn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new zE("Invalid base64 string: "+A):A}}(e);return new Ar(r)}static fromUint8Array(e){const r=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new Ar(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const b4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(t){if(Oe(!!t),typeof t=="string"){let e=0;const r=b4.exec(t);if(Oe(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Jt(t.seconds),nanos:Jt(t.nanos)}}function Jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?Ar.fromBase64String(t):Ar.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Pf(t){const e=t.mapValue.fields.__previous_value__;return Df(e)?Pf(e):e}function Qc(t){const e=Ls(t.mapValue.fields.__local_write_time__.timestampValue);return new Zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,r,n,s,A,i,a,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class KA{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new KA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof KA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vd={nullValue:"NULL_VALUE"};function GA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Df(t)?4:$E(t)?9007199254740991:Lf(t)?10:11:Pe()}function hs(t,e){if(t===e)return!0;const r=GA(t);if(r!==GA(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=Ls(s.timestampValue),a=Ls(A.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return js(s.bytesValue).isEqual(js(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return Jt(s.geoPointValue.latitude)===Jt(A.geoPointValue.latitude)&&Jt(s.geoPointValue.longitude)===Jt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return Jt(s.integerValue)===Jt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=Jt(s.doubleValue),a=Jt(A.doubleValue);return i===a?kc(i)===kc(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return ha(t.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},a=A.mapValue.fields||{};if(lB(i)!==lB(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!hs(i[o],a[o])))return!1;return!0}(t,e);default:return Pe()}}function Nc(t,e){return(t.values||[]).find(r=>hs(r,e))!==void 0}function zA(t,e){if(t===e)return 0;const r=GA(t),n=GA(e);if(r!==n)return At(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return At(t.booleanValue,e.booleanValue);case 2:return function(A,i){const a=Jt(A.integerValue||A.doubleValue),o=Jt(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return uB(t.timestampValue,e.timestampValue);case 4:return uB(Qc(t),Qc(e));case 5:return At(t.stringValue,e.stringValue);case 6:return function(A,i){const a=js(A),o=js(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const a=A.split("/"),o=i.split("/");for(let c=0;c<a.length&&c<o.length;c++){const d=At(a[c],o[c]);if(d!==0)return d}return At(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const a=At(Jt(A.latitude),Jt(i.latitude));return a!==0?a:At(Jt(A.longitude),Jt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dB(t.arrayValue,e.arrayValue);case 10:return function(A,i){var a,o,c,d;const h=A.fields||{},f=i.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(o=f.value)===null||o===void 0?void 0:o.arrayValue,C=At(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:dB(m,y)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===xA.mapValue&&i===xA.mapValue)return 0;if(A===xA.mapValue)return 1;if(i===xA.mapValue)return-1;const a=A.fields||{},o=Object.keys(a),c=i.fields||{},d=Object.keys(c);o.sort(),d.sort();for(let h=0;h<o.length&&h<d.length;++h){const f=At(o[h],d[h]);if(f!==0)return f;const m=zA(a[o[h]],c[d[h]]);if(m!==0)return m}return At(o.length,d.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function uB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return At(t,e);const r=Ls(t),n=Ls(e),s=At(r.seconds,n.seconds);return s!==0?s:At(r.nanos,n.nanos)}function dB(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const A=zA(r[s],n[s]);if(A)return A}return At(r.length,n.length)}function pa(t){return Om(t)}function Om(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ls(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return js(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ue.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const A of r.values||[])s?s=!1:n+=",",n+=Om(A);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",A=!0;for(const i of n)A?A=!1:s+=",",s+=`${i}:${Om(r.fields[i])}`;return s+"}"}(t.mapValue):Pe()}function Kd(t){switch(GA(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(t);return e?16+Kd(e):16;case 5:return 2*t.stringValue.length;case 6:return js(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,A)=>s+Kd(A),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Ai(n.fields,(A,i)=>{s+=A.length+Kd(i)}),s}(t.mapValue);default:throw Pe()}}function Vi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hm(t){return!!t&&"integerValue"in t}function Rc(t){return!!t&&"arrayValue"in t}function hB(t){return!!t&&"nullValue"in t}function fB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gd(t){return!!t&&"mapValue"in t}function Lf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Zl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Zl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Zl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function $E(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const WE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function I4(t){return"nullValue"in t?Vd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vi(KA.empty(),Ue.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Lf(t)?WE:{mapValue:{}}:Pe()}function E4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vi(KA.empty(),Ue.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?WE:"mapValue"in t?Lf(t)?{mapValue:{}}:xA:Pe()}function gB(t,e){const r=zA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pB(t,e){const r=zA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Gd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(r)}setAll(e){let r=zt.emptyPath(),n={},s=[];e.forEach((i,a)=>{if(!r.isImmediateParentOf(a)){const o=this.getFieldsMap(r);this.applyChanges(o,n,s),n={},s=[],r=a.popLast()}i?n[a.lastSegment()]=Zl(i):s.push(a.lastSegment())});const A=this.getFieldsMap(r);this.applyChanges(A,n,s)}delete(e){const r=this.field(e.popLast());Gd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Gd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Ai(r,(s,A)=>e[s]=A);for(const s of n)delete e[s]}clone(){return new Rr(Zl(this.value))}}function qE(t){const e=[];return Ai(t.fields,(r,n)=>{const s=new zt([r]);if(Gd(n)){const A=qE(n.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,r,n,s,A,i,a){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=A,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Gt(e,0,Xe.min(),Xe.min(),Xe.min(),Rr.empty(),0)}static newFoundDocument(e,r,n,s){return new Gt(e,1,r,Xe.min(),n,s,0)}static newNoDocument(e,r){return new Gt(e,2,r,Xe.min(),Xe.min(),Rr.empty(),0)}static newUnknownDocument(e,r){return new Gt(e,3,r,Xe.min(),Xe.min(),Rr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,r){this.position=e,this.inclusive=r}}function mB(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?n=Ue.comparator(Ue.fromName(i.referenceValue),r.key):n=zA(i,r.data.field(A.field)),A.dir==="desc"&&(n*=-1),n!==0)break}return n}function wB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!hs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,r="asc"){this.field=e,this.dir=r}}function T4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{}class xt extends JE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new F4(e,r,n):r==="array-contains"?new k4(e,n):r==="in"?new r1(e,n):r==="not-in"?new Q4(e,n):r==="array-contains-any"?new N4(e,n):new xt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new S4(e,n):new U4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(zA(r,this.value)):r!==null&&GA(this.value)===GA(r)&&this.matchesComparison(zA(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ft extends JE{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Ft(e,r)}matches(e){return ma(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ma(t){return t.op==="and"}function Vm(t){return t.op==="or"}function Pw(t){return XE(t)&&ma(t)}function XE(t){for(const e of t.filters)if(e instanceof Ft)return!1;return!0}function Km(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+pa(t.value);if(Pw(t))return t.filters.map(e=>Km(e)).join(",");{const e=t.filters.map(r=>Km(r)).join(",");return`${t.op}(${e})`}}function YE(t,e){return t instanceof xt?function(n,s){return s instanceof xt&&n.op===s.op&&n.field.isEqual(s.field)&&hs(n.value,s.value)}(t,e):t instanceof Ft?function(n,s){return s instanceof Ft&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((A,i,a)=>A&&YE(i,s.filters[a]),!0):!1}(t,e):void Pe()}function ZE(t,e){const r=t.filters.concat(e);return Ft.create(r,t.op)}function e1(t){return t instanceof xt?function(r){return`${r.field.canonicalString()} ${r.op} ${pa(r.value)}`}(t):t instanceof Ft?function(r){return r.op.toString()+" {"+r.getFilters().map(e1).join(" ,")+"}"}(t):"Filter"}class F4 extends xt{constructor(e,r,n){super(e,r,n),this.key=Ue.fromName(n.referenceValue)}matches(e){const r=Ue.comparator(e.key,this.key);return this.matchesComparison(r)}}class S4 extends xt{constructor(e,r){super(e,"in",r),this.keys=t1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class U4 extends xt{constructor(e,r){super(e,"not-in",r),this.keys=t1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function t1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ue.fromName(n.referenceValue))}class k4 extends xt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Rc(r)&&Nc(r.arrayValue,this.value)}}class r1 extends xt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Nc(this.value.arrayValue,r)}}class Q4 extends xt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Nc(this.value.arrayValue,r)}}class N4 extends xt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Rc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Nc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,r=null,n=[],s=[],A=null,i=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=A,this.startAt=i,this.endAt=a,this.ue=null}}function Gm(t,e=null,r=[],n=[],s=null,A=null,i=null){return new R4(t,e,r,n,s,A,i)}function Ki(t){const e=_e(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Km(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(A){return A.field.canonicalString()+A.dir}(n)).join(","),tu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>pa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>pa(n)).join(",")),e.ue=r}return e.ue}function ru(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!T4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!YE(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wB(t.startAt,e.startAt)&&wB(t.endAt,e.endAt)}function Dh(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ph(t,e){return t.filters.filter(r=>r instanceof xt&&r.field.isEqual(e))}function yB(t,e,r){let n=Vd,s=!0;for(const A of Ph(t,e)){let i=Vd,a=!0;switch(A.op){case"<":case"<=":i=I4(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,a=!1;break;case"!=":case"not-in":i=Vd}gB({value:n,inclusive:s},{value:i,inclusive:a})<0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];gB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function xB(t,e,r){let n=xA,s=!0;for(const A of Ph(t,e)){let i=xA,a=!0;switch(A.op){case">=":case">":i=E4(A.value),a=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,a=!1;break;case"!=":case"not-in":i=xA}pB({value:n,inclusive:s},{value:i,inclusive:a})>0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];pB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,r=null,n=[],s=[],A=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=A,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function n1(t,e,r,n,s,A,i,a){return new zs(t,e,r,n,s,A,i,a)}function Da(t){return new zs(t)}function vB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lw(t){return t.collectionGroup!==null}function Yo(t){const e=_e(t);if(e.ce===null){e.ce=[];const r=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),r.add(A.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new Qt(zt.comparator);return i.filters.forEach(o=>{o.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(A=>{r.has(A.canonicalString())||A.isKeyField()||e.ce.push(new Dc(A,n))}),r.has(zt.keyField().canonicalString())||e.ce.push(new Dc(zt.keyField(),n))}return e.ce}function Jr(t){const e=_e(t);return e.le||(e.le=A1(e,Yo(t))),e.le}function s1(t){const e=_e(t);return e.he||(e.he=A1(e,t.explicitOrderBy)),e.he}function A1(t,e){if(t.limitType==="F")return Gm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new Dc(s.field,A)});const r=t.endAt?new $A(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new $A(t.startAt.position,t.startAt.inclusive):null;return Gm(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function zm(t,e){const r=t.filters.concat([e]);return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Lh(t,e,r){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function nu(t,e){return ru(Jr(t),Jr(e))&&t.limitType===e.limitType}function i1(t){return`${Ki(Jr(t))}|lt:${t.limitType}`}function Io(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>e1(s)).join(", ")}]`),tu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>pa(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>pa(s)).join(",")),`Target(${n})`}(Jr(t))}; limitType=${t.limitType})`}function su(t,e){return e.isFoundDocument()&&function(n,s){const A=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(A):Ue.isDocumentKey(n.path)?n.path.isEqual(A):n.path.isImmediateParentOf(A)}(t,e)&&function(n,s){for(const A of Yo(n))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const A of n.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,a,o){const c=mB(i,a,o);return i.inclusive?c<=0:c<0}(n.startAt,Yo(n),s)||n.endAt&&!function(i,a,o){const c=mB(i,a,o);return i.inclusive?c>=0:c>0}(n.endAt,Yo(n),s))}(t,e)}function o1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a1(t){return(e,r)=>{let n=!1;for(const s of Yo(t)){const A=D4(s,e,r);if(A!==0)return A;n=n||s.field.isKeyField()}return 0}}function D4(t,e,r){const n=t.field.isKeyField()?Ue.comparator(e.key,r.key):function(A,i,a){const o=i.data.field(A),c=a.data.field(A);return o!==null&&c!==null?zA(o,c):Pe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,A]of n)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,(r,n)=>{for(const[s,A]of n)e(s,A)})}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new Ht(Ue.comparator);function fn(){return P4}const l1=new Ht(Ue.comparator);function kl(...t){let e=l1;for(const r of t)e=e.insert(r.key,r);return e}function c1(t){let e=l1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function is(){return ec()}function u1(){return ec()}function ec(){return new $s(t=>t.toString(),(t,e)=>t.isEqual(e))}const L4=new Ht(Ue.comparator),j4=new Qt(Ue.comparator);function lt(...t){let e=j4;for(const r of t)e=e.add(r);return e}const M4=new Qt(At);function jw(){return M4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function d1(t){return{integerValue:""+t}}function h1(t,e){return jE(e)?d1(e):Mw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function O4(t,e,r){return t instanceof wa?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&Df(A)&&(A=Pf(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(r,e):t instanceof Gi?g1(t,e):t instanceof zi?p1(t,e):function(s,A){const i=f1(s,A),a=BB(i)+BB(s.Pe);return Hm(i)&&Hm(s.Pe)?d1(a):Mw(s.serializer,a)}(t,e)}function H4(t,e,r){return t instanceof Gi?g1(t,e):t instanceof zi?p1(t,e):r}function f1(t,e){return t instanceof ya?function(n){return Hm(n)||function(A){return!!A&&"doubleValue"in A}(n)}(e)?e:{integerValue:0}:null}class wa extends jf{}class Gi extends jf{constructor(e){super(),this.elements=e}}function g1(t,e){const r=m1(e);for(const n of t.elements)r.some(s=>hs(s,n))||r.push(n);return{arrayValue:{values:r}}}class zi extends jf{constructor(e){super(),this.elements=e}}function p1(t,e){let r=m1(e);for(const n of t.elements)r=r.filter(s=>!hs(s,n));return{arrayValue:{values:r}}}class ya extends jf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function BB(t){return Jt(t.integerValue||t.doubleValue)}function m1(t){return Rc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,r){this.field=e,this.transform=r}}function V4(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Gi&&s instanceof Gi||n instanceof zi&&s instanceof zi?ha(n.elements,s.elements,hs):n instanceof ya&&s instanceof ya?hs(n.Pe,s.Pe):n instanceof wa&&s instanceof wa}(t.transform,e.transform)}class K4{constructor(e,r){this.version=e,this.transformResults=r}}class Yt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function w1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new La(t.key,Yt.none()):new Pa(t.key,t.data,Yt.none());{const r=t.data,n=Rr.empty();let s=new Qt(zt.comparator);for(let A of e.fields)if(!s.has(A)){let i=r.field(A);i===null&&A.length>1&&(A=A.popLast(),i=r.field(A)),i===null?n.delete(A):n.set(A,i),s=s.add(A)}return new Ws(t.key,n,new hn(s.toArray()),Yt.none())}}function G4(t,e,r){t instanceof Pa?function(s,A,i){const a=s.value.clone(),o=bB(s.fieldTransforms,A,i.transformResults);a.setAll(o),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Ws?function(s,A,i){if(!zd(s.precondition,A))return void A.convertToUnknownDocument(i.version);const a=bB(s.fieldTransforms,A,i.transformResults),o=A.data;o.setAll(y1(s)),o.setAll(a),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function tc(t,e,r,n){return t instanceof Pa?function(A,i,a,o){if(!zd(A.precondition,i))return a;const c=A.value.clone(),d=_B(A.fieldTransforms,o,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ws?function(A,i,a,o){if(!zd(A.precondition,i))return a;const c=_B(A.fieldTransforms,o,i),d=i.data;return d.setAll(y1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(A,i,a){return zd(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,r)}function z4(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),A=f1(n.transform,s||null);A!=null&&(r===null&&(r=Rr.empty()),r.set(n.field,A))}return r||null}function CB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ha(n,s,(A,i)=>V4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pa extends Mf{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ws extends Mf{constructor(e,r,n,s,A=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function y1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function bB(t,e,r){const n=new Map;Oe(t.length===r.length);for(let s=0;s<r.length;s++){const A=t[s],i=A.transform,a=e.data.field(A.field);n.set(A.field,H4(i,a,r[s]))}return n}function _B(t,e,r){const n=new Map;for(const s of t){const A=s.transform,i=r.data.field(s.field);n.set(s.field,O4(A,i,e))}return n}class La extends Mf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ow extends Mf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&G4(A,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=tc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=tc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=u1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let a=this.applyToLocalView(i,A.mutatedFields);a=r.has(s.key)?null:a;const o=w1(i,a);o!==null&&n.set(s.key,o),i.isValidDocument()||i.convertToNoDocument(Xe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),lt())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(r,n)=>CB(r,n))&&ha(this.baseMutations,e.baseMutations,(r,n)=>CB(r,n))}}class Vw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Oe(e.mutations.length===n.length);let s=function(){return L4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,n[i].version);return new Vw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr,vt;function v1(t){switch(t){default:return Pe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function B1(t){if(t===void 0)return dr("GRPC error has no .code"),K.UNKNOWN;switch(t){case fr.OK:return K.OK;case fr.CANCELLED:return K.CANCELLED;case fr.UNKNOWN:return K.UNKNOWN;case fr.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case fr.INTERNAL:return K.INTERNAL;case fr.UNAVAILABLE:return K.UNAVAILABLE;case fr.UNAUTHENTICATED:return K.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case fr.NOT_FOUND:return K.NOT_FOUND;case fr.ALREADY_EXISTS:return K.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return K.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case fr.ABORTED:return K.ABORTED;case fr.OUT_OF_RANGE:return K.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return K.UNIMPLEMENTED;case fr.DATA_LOSS:return K.DATA_LOSS;default:return Pe()}}(vt=fr||(fr={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new Qi([4294967295,4294967295],0);function IB(t){const e=C1().encode(t),r=new bE;return r.update(e),new Uint8Array(r.digest())}function EB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new Qi([r,n],0),new Qi([s,A],0)]}class Gw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Ql(`Invalid padding: ${r}`);if(n<0)throw new Ql(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Qi.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Qi.fromNumber(n)));return s.compare(W4)===1&&(s=new Qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=IB(e),[n,s]=EB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new Gw(A,s,r);return n.forEach(a=>i.insert(a)),i}insert(e){if(this.Ie===0)return;const r=IB(e),[n,s]=EB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,r,n,s,A){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new iu(Xe.min(),s,new Ht(At),fn(),lt())}}class ou{constructor(e,r,n,s,A){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new ou(n,r,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class b1{constructor(e,r){this.targetId=e,this.me=r}}class _1{constructor(e,r,n=Ar.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class TB{constructor(){this.fe=0,this.ge=SB(),this.pe=Ar.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=lt(),r=lt(),n=lt();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Pe()}}),new ou(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=SB()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class q4{constructor(e){this.Le=e,this.Be=new Map,this.ke=fn(),this.qe=FB(),this.Qe=new Ht(At)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const A=s.target;if(Dh(A))if(n===0){const i=new Ue(A.path);this.Ue(r,i,Gt.newNoDocument(i,Xe.min()))}else Oe(n===1);else{const i=this.Ye(r);if(i!==n){const a=this.Ze(e),o=a?this.Xe(a,e,i):1;if(o!==0){this.je(r);const c=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}jh==null||jh.et(function(d,h,f,m,y){var C,I,B,w,b,F;const Q={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},D=h.unchangedNames;return D&&(Q.bloomFilter={applied:y===0,hashCount:(C=D==null?void 0:D.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(w=(B=(I=D==null?void 0:D.bits)===null||I===void 0?void 0:I.bitmap)===null||B===void 0?void 0:B.length)!==null&&w!==void 0?w:0,padding:(F=(b=D==null?void 0:D.bits)===null||b===void 0?void 0:b.padding)!==null&&F!==void 0?F:0,mightContain:x=>{var v;return(v=m==null?void 0:m.mightContain(x))!==null&&v!==void 0&&v}}),Q}(i,e.me,this.Le.tt(),a,o))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:A=0}=r;let i,a;try{i=js(n).toUint8Array()}catch(o){if(o instanceof zE)return In("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Gw(i,s,A)}catch(o){return In(o instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(A=>{const i=this.Le.tt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,A,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((A,i)=>{const a=this.Je(i);if(a){if(A.current&&Dh(a.target)){const o=new Ue(a.target.path);this.ke.get(o)!==null||this.it(i,o)||this.Ue(i,o,Gt.newNoDocument(o,e))}A.be&&(r.set(i,A.ve()),A.Ce())}});let n=lt();this.qe.forEach((A,i)=>{let a=!0;i.forEachWhile(o=>{const c=this.Je(o);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new iu(e,r,this.Qe,this.ke,n);return this.ke=fn(),this.qe=FB(),this.Qe=new Ht(At),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new TB,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Qt(At),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ie("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new TB),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function FB(){return new Ht(Ue.comparator)}function SB(){return new Ht(Ue.comparator)}const J4={asc:"ASCENDING",desc:"DESCENDING"},X4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y4={and:"AND",or:"OR"};class Z4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function $m(t,e){return t.useProto3Json||tu(e)?e:{value:e}}function xa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eD(t,e){return xa(t,e.toTimestamp())}function hr(t){return Oe(!!t),Xe.fromTimestamp(function(r){const n=Ls(r);return new Zt(n.seconds,n.nanos)}(t))}function zw(t,e){return Wm(t,e).canonicalString()}function Wm(t,e){const r=function(s){return new yt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function E1(t){const e=yt.fromString(t);return Oe(P1(e)),e}function Pc(t,e){return zw(t.databaseId,e.path)}function cs(t,e){const r=E1(e);if(r.get(1)!==t.databaseId.projectId)throw new Ae(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ae(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ue(S1(r))}function T1(t,e){return zw(t.databaseId,e)}function F1(t){const e=E1(t);return e.length===4?yt.emptyPath():S1(e)}function qm(t){return new yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S1(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function UB(t,e,r){return{name:Pc(t,e),fields:r.value.mapValue.fields}}function U1(t,e,r){const n=cs(t,e.name),s=hr(e.updateTime),A=e.createTime?hr(e.createTime):Xe.min(),i=new Rr({mapValue:{fields:e.fields}}),a=Gt.newFoundDocument(n,s,A,i);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function tD(t,e){return"found"in e?function(n,s){Oe(!!s.found),s.found.name,s.found.updateTime;const A=cs(n,s.found.name),i=hr(s.found.updateTime),a=s.found.createTime?hr(s.found.createTime):Xe.min(),o=new Rr({mapValue:{fields:s.found.fields}});return Gt.newFoundDocument(A,i,a,o)}(t,e):"missing"in e?function(n,s){Oe(!!s.missing),Oe(!!s.readTime);const A=cs(n,s.missing),i=hr(s.readTime);return Gt.newNoDocument(A,i)}(t,e):Pe()}function rD(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(Oe(d===void 0||typeof d=="string"),Ar.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ar.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const d=c.code===void 0?K.UNKNOWN:B1(c.code);return new Ae(d,c.message||"")}(i);r=new _1(n,s,A,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=cs(t,n.document.name),A=hr(n.document.updateTime),i=n.document.createTime?hr(n.document.createTime):Xe.min(),a=new Rr({mapValue:{fields:n.document.fields}}),o=Gt.newFoundDocument(s,A,i,a),c=n.targetIds||[],d=n.removedTargetIds||[];r=new $d(c,d,o.key,o)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=cs(t,n.document),A=n.readTime?hr(n.readTime):Xe.min(),i=Gt.newNoDocument(s,A),a=n.removedTargetIds||[];r=new $d([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=cs(t,n.document),A=n.removedTargetIds||[];r=new $d([],A,s,null)}else{if(!("filter"in e))return Pe();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:A}=n,i=new $4(s,A),a=n.targetId;r=new b1(a,i)}}return r}function Lc(t,e){let r;if(e instanceof Pa)r={update:UB(t,e.key,e.value)};else if(e instanceof La)r={delete:Pc(t,e.key)};else if(e instanceof Ws)r={update:UB(t,e.key,e.data),updateMask:aD(e.fieldMask)};else{if(!(e instanceof Ow))return Pe();r={verify:Pc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(A,i){const a=i.transform;if(a instanceof wa)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ya)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw Pe()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:eD(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:Pe()}(t,e.precondition)),r}function Jm(t,e){const r=e.currentDocument?function(A){return A.updateTime!==void 0?Yt.updateTime(hr(A.updateTime)):A.exists!==void 0?Yt.exists(A.exists):Yt.none()}(e.currentDocument):Yt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(i,a){let o=null;if("setToServerValue"in a)Oe(a.setToServerValue==="REQUEST_TIME"),o=new wa;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];o=new Gi(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];o=new zi(d)}else"increment"in a?o=new ya(i,a.increment):Pe();const c=zt.fromServerFormat(a.fieldPath);return new Au(c,o)}(t,s)):[];if(e.update){e.update.name;const s=cs(t,e.update.name),A=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(o){const c=o.fieldPaths||[];return new hn(c.map(d=>zt.fromServerFormat(d)))}(e.updateMask);return new Ws(s,A,i,r,n)}return new Pa(s,A,r,n)}if(e.delete){const s=cs(t,e.delete);return new La(s,r)}if(e.verify){const s=cs(t,e.verify);return new Ow(s,r)}return Pe()}function nD(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(r=>function(s,A){let i=s.updateTime?hr(s.updateTime):hr(A);return i.isEqual(Xe.min())&&(i=hr(A)),new K4(i,s.transformResults||[])}(r,e))):[]}function k1(t,e){return{documents:[T1(t,e.path)]}}function Of(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=T1(t,s);const A=function(c){if(c.length!==0)return D1(Ft.create(c,"and"))}(e.filters);A&&(r.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:cA(f.field),direction:AD(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const a=$m(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function Q1(t,e,r,n){const{_t:s,parent:A}=Of(t,e),i={},a=[];let o=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+o++;i[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:cA(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:cA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:A}}function N1(t){let e=F1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Oe(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];r.where&&(A=function(h){const f=R1(h);return f instanceof Ft&&Pw(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(y){return new Dc(Eo(y.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,tu(f)?null:f}(r.limit));let o=null;r.startAt&&(o=function(h){const f=!!h.before,m=h.values||[];return new $A(m,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new $A(m,f)}(r.endAt)),n1(e,s,i,A,a,"F",o,c)}function sD(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function R1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Eo(r.unaryFilter.field);return xt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Eo(r.unaryFilter.field);return xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=Eo(r.unaryFilter.field);return xt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Eo(r.unaryFilter.field);return xt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(r){return xt.create(Eo(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ft.create(r.compositeFilter.filters.map(n=>R1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pe()}}(r.compositeFilter.op))}(t):Pe()}function AD(t){return J4[t]}function iD(t){return X4[t]}function oD(t){return Y4[t]}function cA(t){return{fieldPath:t.canonicalString()}}function Eo(t){return zt.fromServerFormat(t.fieldPath)}function D1(t){return t instanceof xt?function(r){if(r.op==="=="){if(fB(r.value))return{unaryFilter:{field:cA(r.field),op:"IS_NAN"}};if(hB(r.value))return{unaryFilter:{field:cA(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(fB(r.value))return{unaryFilter:{field:cA(r.field),op:"IS_NOT_NAN"}};if(hB(r.value))return{unaryFilter:{field:cA(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cA(r.field),op:iD(r.op),value:r.value}}}(t):t instanceof Ft?function(r){const n=r.getFilters().map(s=>D1(s));return n.length===1?n[0]:{compositeFilter:{op:oD(r.op),filters:n}}}(t):Pe()}function aD(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function P1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,r,n,s,A=Xe.min(),i=Xe.min(),a=Ar.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.ct=e}}function lD(t,e){let r;if(e.document)r=U1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Ue.fromSegments(e.noDocument.path),s=Wi(e.noDocument.readTime);r=Gt.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Pe();{const n=Ue.fromSegments(e.unknownDocument.path),s=Wi(e.unknownDocument.version);r=Gt.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const A=new Zt(s[0],s[1]);return Xe.fromTimestamp(A)}(e.readTime)),r}function kB(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Mh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(A,i){return{name:Pc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:xa(A,i.version.toTimestamp()),createTime:xa(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return Pe();n.unknownDocument={path:r.path.toArray(),version:$i(e.version)}}return n}function Mh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wi(t){const e=new Zt(t.seconds,t.nanoseconds);return Xe.fromTimestamp(e)}function Ci(t,e){const r=(e.baseMutations||[]).map(A=>Jm(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const a=e.mutations[A+1];i.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const n=e.mutations.map(A=>Jm(t.ct,A)),s=Zt.fromMillis(e.localWriteTimeMs);return new Hw(e.batchId,s,r,n)}function Nl(t){const e=Wi(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Wi(t.lastLimboFreeSnapshotVersion):Xe.min();let n;return n=function(A){return A.documents!==void 0}(t.query)?function(A){return Oe(A.documents.length===1),Jr(Da(F1(A.documents[0])))}(t.query):function(A){return Jr(N1(A))}(t.query),new Es(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Ar.fromBase64String(t.resumeToken))}function j1(t,e){const r=$i(e.snapshotVersion),n=$i(e.lastLimboFreeSnapshotVersion);let s;s=Dh(e.target)?k1(t.ct,e.target):Of(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ki(e.target),readTime:r,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function $w(t){const e=N1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lh(e,e.limit,"L"):e}function Ap(t,e){return new Kw(e.largestBatchId,Jm(t.ct,e.overlayMutation))}function QB(t,e){const r=e.path.lastSegment();return[t,qr(e.path.popLast()),r]}function NB(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:$i(n.readTime),documentKey:qr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{getBundleMetadata(e,r){return RB(e).get(r).next(n=>{if(n)return function(A){return{id:A.bundleId,createTime:Wi(A.createTime),version:A.version}}(n)})}saveBundleMetadata(e,r){return RB(e).put(function(s){return{bundleId:s.id,createTime:$i(hr(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return DB(e).get(r).next(n=>{if(n)return function(A){return{name:A.name,query:$w(A.bundledQuery),readTime:Wi(A.readTime)}}(n)})}saveNamedQuery(e,r){return DB(e).put(function(s){return{name:s.name,readTime:$i(hr(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function RB(t){return Br(t,"bundles")}function DB(t){return Br(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Hf(e,n)}getOverlay(e,r){return fl(e).get(QB(this.userId,r)).next(n=>n?Ap(this.serializer,n):null)}getOverlays(e,r){const n=is();return M.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((A,i)=>{const a=new Kw(r,i);s.push(this.ht(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(i=>s.add(qr(i.getCollectionPath())));const A=[];return s.forEach(i=>{const a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);A.push(fl(e).j("collectionPathOverlayIndex",a))}),M.waitFor(A)}getOverlaysForCollection(e,r,n){const s=is(),A=qr(r),i=IDBKeyRange.bound([this.userId,A,n],[this.userId,A,Number.POSITIVE_INFINITY],!0);return fl(e).U("collectionPathOverlayIndex",i).next(a=>{for(const o of a){const c=Ap(this.serializer,o);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const A=is();let i;const a=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return fl(e).J({index:"collectionGroupOverlayIndex",range:a},(o,c,d)=>{const h=Ap(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,r){return fl(e).put(function(s,A,i){const[a,o,c]=QB(A,i.mutation.key);return{userId:A,collectionPath:o,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Lc(s.ct,i.mutation)}}(this.serializer,this.userId,r))}}function fl(t){return Br(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{Pt(e){return Br(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Ar.fromUint8Array(n):Ar.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Jt(e.integerValue));else if("doubleValue"in e){const n=Jt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),kc(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ls(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(js(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?$E(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Lf(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Pe()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const A=e.fields||{};this.dt(r,53);const i="value",a=((s=(n=A[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Jt(a)),this.Vt(i,r),this.Tt(A[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),Ue.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}bi.vt=new bi;function dD(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function PB(t){const e=64-function(n){let s=0;for(let A=0;A<8;++A){const i=dD(255&n[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class hD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=PB(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=PB(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class fD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class gD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class gl{constructor(){this.jt=new hD,this.Ht=new fD(this.jt),this.Jt=new gD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new _i(this.indexId,this.documentKey,this.arrayValue,n)}}function Zs(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=LB(t.arrayValue,e.arrayValue),r!==0?r:(r=LB(t.directionalValue,e.directionalValue),r!==0?r:Ue.comparator(t.documentKey,e.documentKey)))}function LB(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.Xt=new Qt((r,n)=>zt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Oe(e.collectionGroup===this.collectionId),this.nn)return!1;const r=jm(e);if(r!==void 0&&!this.sn(r))return!1;const n=vi(e);let s=new Set,A=0,i=0;for(;A<n.length&&this.sn(n[A]);++A)s=s.add(n[A].fieldPath.canonicalString());if(A===n.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const o=n[A];if(!this.on(a,o)||!this._n(this.en[i++],o))return!1}++A}for(;A<n.length;++A){const a=n[A];if(i>=this.en.length||!this._n(this.en[i++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Qt(zt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Ni(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Ni(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Ni(n.field,n.dir==="asc"?0:1)));return new fa(fa.UNKNOWN_ID,this.collectionId,r,ga.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t){var e,r;if(Oe(t instanceof xt||t instanceof Ft),t instanceof xt){if(t instanceof r1){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(A=>xt.create(t.field,"==",A)))||[];return Ft.create(s,"or")}return t}const n=t.filters.map(s=>M1(s));return Ft.create(n,t.op)}function pD(t){if(t.getFilters().length===0)return[];const e=Zm(M1(t));return Oe(O1(e)),Xm(e)||Ym(e)?[e]:e.getFilters()}function Xm(t){return t instanceof xt}function Ym(t){return t instanceof Ft&&Pw(t)}function O1(t){return Xm(t)||Ym(t)||function(r){if(r instanceof Ft&&Vm(r)){for(const n of r.getFilters())if(!Xm(n)&&!Ym(n))return!1;return!0}return!1}(t)}function Zm(t){if(Oe(t instanceof xt||t instanceof Ft),t instanceof xt)return t;if(t.filters.length===1)return Zm(t.filters[0]);const e=t.filters.map(n=>Zm(n));let r=Ft.create(e,t.op);return r=Oh(r),O1(r)?r:(Oe(r instanceof Ft),Oe(ma(r)),Oe(r.filters.length>1),r.filters.reduce((n,s)=>Ww(n,s)))}function Ww(t,e){let r;return Oe(t instanceof xt||t instanceof Ft),Oe(e instanceof xt||e instanceof Ft),r=t instanceof xt?e instanceof xt?function(s,A){return Ft.create([s,A],"and")}(t,e):MB(t,e):e instanceof xt?MB(e,t):function(s,A){if(Oe(s.filters.length>0&&A.filters.length>0),ma(s)&&ma(A))return ZE(s,A.getFilters());const i=Vm(s)?s:A,a=Vm(s)?A:s,o=i.filters.map(c=>Ww(c,a));return Ft.create(o,"or")}(t,e),Oh(r)}function MB(t,e){if(ma(e))return ZE(e,t.getFilters());{const r=e.filters.map(n=>Ww(t,n));return Ft.create(r,"or")}}function Oh(t){if(Oe(t instanceof xt||t instanceof Ft),t instanceof xt)return t;const e=t.getFilters();if(e.length===1)return Oh(e[0]);if(XE(t))return t;const r=e.map(s=>Oh(s)),n=[];return r.forEach(s=>{s instanceof xt?n.push(s):s instanceof Ft&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Ft.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.un=new qw}addToCollectionParentIndex(e,r){return this.un.add(r),M.resolve()}getCollectionParents(e,r){return M.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return M.resolve()}deleteFieldIndex(e,r){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,r){return M.resolve()}getDocumentsMatchingTarget(e,r){return M.resolve(null)}getIndexType(e,r){return M.resolve(0)}getFieldIndexes(e,r){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,r){return M.resolve(En.min())}getMinOffsetFromCollectionGroup(e,r){return M.resolve(En.min())}updateCollectionGroup(e,r,n){return M.resolve()}updateIndexEntries(e,r){return M.resolve()}}class qw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Qt(yt.comparator),A=!s.has(n);return this.index[r]=s.add(n),A}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Qt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Uint8Array(0);class wD{constructor(e,r){this.databaseId=r,this.cn=new qw,this.ln=new $s(n=>Ki(n),(n,s)=>ru(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const A={collectionId:n,parent:qr(s)};return OB(e).put(A)}return M.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[QE(r),""],!1,!0);return OB(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==r)break;n.push(As(i.parent))}return n})}addFieldIndex(e,r){const n=pl(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(r);delete s.indexId;const A=n.add(s);if(r.indexState){const i=po(e);return A.next(a=>{i.put(NB(a,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return A.next()}deleteFieldIndex(e,r){const n=pl(e),s=po(e),A=go(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=pl(e),n=go(e),s=po(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return M.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const A=new jB(n).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,r){const n=go(e);let s=!0;const A=new Map;return M.forEach(this.hn(r),i=>this.Pn(e,i).next(a=>{s&&(s=!!a),A.set(i,a)})).next(()=>{if(s){let i=lt();const a=[];return M.forEach(A,(o,c)=>{ie("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(o)} to execute ${Ki(r)}`);const d=function(b,F){const Q=jm(F);if(Q===void 0)return null;for(const D of Ph(b,Q.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(c,o),h=function(b,F){const Q=new Map;for(const D of vi(F))for(const x of Ph(b,D.fieldPath))switch(x.op){case"==":case"in":Q.set(D.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return Q.set(D.fieldPath.canonicalString(),x.value),Array.from(Q.values())}return null}(c,o),f=function(b,F){const Q=[];let D=!0;for(const x of vi(F)){const v=x.kind===0?yB(b,x.fieldPath,b.startAt):xB(b,x.fieldPath,b.startAt);Q.push(v.value),D&&(D=v.inclusive)}return new $A(Q,D)}(c,o),m=function(b,F){const Q=[];let D=!0;for(const x of vi(F)){const v=x.kind===0?xB(b,x.fieldPath,b.endAt):yB(b,x.fieldPath,b.endAt);Q.push(v.value),D&&(D=v.inclusive)}return new $A(Q,D)}(c,o),y=this.In(o,c,f),C=this.In(o,c,m),I=this.Tn(o,c,h),B=this.En(o.indexId,d,y,f.inclusive,C,m.inclusive,I);return M.forEach(B,w=>n.G(w,r.limit).next(b=>{b.forEach(F=>{const Q=Ue.fromSegments(F.documentKey);i.has(Q)||(i=i.add(Q),a.push(Q))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=pD(Ft.create(e.filters,"and")).map(n=>Gm(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,A,i,a){const o=(r!=null?r.length:1)*Math.max(n.length,A.length),c=o/(r!=null?r.length:1),d=[];for(let h=0;h<o;++h){const f=r?this.dn(r[h/c]):Xu,m=this.An(e,f,n[h%c],s),y=this.Rn(e,f,A[h%c],i),C=a.map(I=>this.An(e,f,I,!0));d.push(...this.createRange(m,y,C))}return d}An(e,r,n,s){const A=new _i(e,Ue.empty(),r,n);return s?A:A.Zt()}Rn(e,r,n,s){const A=new _i(e,Ue.empty(),r,n);return s?A.Zt():A}Pn(e,r){const n=new jB(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const a of A)n.rn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a);return i})}getIndexType(e,r){let n=2;const s=this.hn(r);return M.forEach(s,A=>this.Pn(e,A).next(i=>{i?n!==0&&i.fields.length<function(o){let c=new Qt(zt.comparator),d=!1;for(const h of o.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of o.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new gl;for(const s of vi(e)){const A=r.data.field(s.fieldPath);if(A==null)return null;const i=n.Yt(s.kind);bi.vt.It(A,i)}return n.zt()}dn(e){const r=new gl;return bi.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new gl;return bi.vt.It(Vi(this.databaseId,r),n.Yt(function(A){const i=vi(A);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new gl);let A=0;for(const i of vi(e)){const a=n[A++];for(const o of s)if(this.fn(r,i.fieldPath)&&Rc(a))s=this.gn(s,i,a);else{const c=o.Yt(i.kind);bi.vt.It(a,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],A=[];for(const i of n.arrayValue.values||[])for(const a of s){const o=new gl;o.seed(a.zt()),bi.vt.It(i,o.Yt(r.kind)),A.push(o)}return A}fn(e,r){return!!e.filters.find(n=>n instanceof xt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=pl(e),s=po(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(A=>{const i=[];return M.forEach(A,a=>s.get([a.indexId,this.uid]).next(o=>{i.push(function(d,h){const f=h?new ga(h.sequenceNumber,new En(Wi(h.readTime),new Ue(As(h.documentKey)),h.largestBatchId)):ga.empty(),m=d.fields.map(([y,C])=>new Ni(zt.fromServerFormat(y),C));return new fa(d.indexId,d.collectionGroup,m,f)}(a,o))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const A=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:At(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=pl(e),A=po(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(a=>M.forEach(a,o=>A.put(NB(o.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return M.forEach(r,(s,A)=>{const i=n.get(s.collectionGroup);return(i?M.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(n.set(s.collectionGroup,a),M.forEach(a,o=>this.wn(e,s,o).next(c=>{const d=this.Sn(A,o);return c.isEqual(d)?M.resolve():this.bn(e,A,o,c,d)}))))})}Dn(e,r,n,s){return go(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return go(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=go(e);let A=new Qt(Zs);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,a)=>{A=A.add(new _i(n.indexId,r,a.arrayValue,a.directionalValue))}).next(()=>A)}Sn(e,r){let n=new Qt(Zs);const s=this.Vn(r,e);if(s==null)return n;const A=jm(r);if(A!=null){const i=e.data.field(A.fieldPath);if(Rc(i))for(const a of i.arrayValue.values||[])n=n.add(new _i(r.indexId,e.key,this.dn(a),s))}else n=n.add(new _i(r.indexId,e.key,Xu,s));return n}bn(e,r,n,s,A){ie("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(o,c,d,h,f){const m=o.getIterator(),y=c.getIterator();let C=fo(m),I=fo(y);for(;C||I;){let B=!1,w=!1;if(C&&I){const b=d(C,I);b<0?w=!0:b>0&&(B=!0)}else C!=null?w=!0:B=!0;B?(h(I),I=fo(y)):w?(f(C),C=fo(m)):(C=fo(m),I=fo(y))}}(s,A,Zs,a=>{i.push(this.Dn(e,r,n,a))},a=>{i.push(this.vn(e,r,n,a))}),M.waitFor(i)}yn(e){let r=1;return po(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,A)=>{A.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,a)=>Zs(i,a)).filter((i,a,o)=>!a||Zs(i,o[a-1])!==0);const s=[];s.push(e);for(const i of n){const a=Zs(i,e),o=Zs(i,r);if(a===0)s[0]=e.Zt();else if(a>0&&o<0)s.push(i),s.push(i.Zt());else if(o>0)break}s.push(r);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const a=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,Xu,[]],o=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,Xu,[]];A.push(IDBKeyRange.bound(a,o))}return A}Cn(e,r){return Zs(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(HB)}getMinOffset(e,r){return M.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Pe())).next(HB)}}function OB(t){return Br(t,"collectionParents")}function go(t){return Br(t,"indexEntries")}function pl(t){return Br(t,"indexConfiguration")}function po(t){return Br(t,"indexState")}function HB(t){Oe(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Nw(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new En(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(r.batchId);let a=0;const o=n.J({range:i},(d,h,f)=>(a++,f.delete()));A.push(o.next(()=>{Oe(a===1)}));const c=[];for(const d of r.mutations){const h=ME(e,d.key.path,r.batchId);A.push(s.delete(h)),c.push(d.key)}return M.waitFor(A).next(()=>c)}function Hh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Pe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);class Vf{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Oe(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new Vf(A,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eA(e).J({index:"userMutationsIndex",range:n},(s,A,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const A=To(e),i=eA(e);return i.add({}).next(a=>{Oe(typeof a=="number");const o=new Hw(a,r,n,s),c=function(m,y,C){const I=C.baseMutations.map(w=>Lc(m.ct,w)),B=C.mutations.map(w=>Lc(m.ct,w));return{userId:y,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:I,mutations:B}}(this.serializer,this.userId,o),d=[];let h=new Qt((f,m)=>At(f.canonicalString(),m.canonicalString()));for(const f of s){const m=ME(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(m,A4))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),M.waitFor(d).next(()=>o)})}lookupMutationBatch(e,r){return eA(e).get(r).next(n=>n?(Oe(n.userId===this.userId),Ci(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?M.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let A=null;return eA(e).J({index:"userMutationsIndex",range:s},(i,a,o)=>{a.userId===this.userId&&(Oe(a.batchId>=n),A=Ci(this.serializer,a)),o.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return eA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,A,i)=>{n=A.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Ci(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Hd(this.userId,r.path),s=IDBKeyRange.lowerBound(n),A=[];return To(e).J({range:s},(i,a,o)=>{const[c,d,h]=i,f=As(d);if(c===this.userId&&r.path.isEqual(f))return eA(e).get(h).next(m=>{if(!m)throw Pe();Oe(m.userId===this.userId),A.push(Ci(this.serializer,m))});o.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qt(At);const s=[];return r.forEach(A=>{const i=Hd(this.userId,A.path),a=IDBKeyRange.lowerBound(i),o=To(e).J({range:a},(c,d,h)=>{const[f,m,y]=c,C=As(m);f===this.userId&&A.path.isEqual(C)?n=n.add(y):h.done()});s.push(o)}),M.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,A=Hd(this.userId,n),i=IDBKeyRange.lowerBound(A);let a=new Qt(At);return To(e).J({range:i},(o,c,d)=>{const[h,f,m]=o,y=As(f);h===this.userId&&n.isPrefixOf(y)?y.length===s&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,r){const n=[],s=[];return r.forEach(A=>{s.push(eA(e).get(A).next(i=>{if(i===null)throw Pe();Oe(i.userId===this.userId),n.push(Ci(this.serializer,i))}))}),M.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return H1(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),M.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return M.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return To(e).J({range:n},(A,i,a)=>{if(A[0]===this.userId){const o=As(A[1]);s.push(o)}else a.done()}).next(()=>{Oe(s.length===0)})})}containsKey(e,r){return V1(e,this.userId,r)}Nn(e){return K1(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function V1(t,e,r){const n=Hd(e,r.path),s=n[1],A=IDBKeyRange.lowerBound(n);let i=!1;return To(t).J({range:A,H:!0},(a,o,c)=>{const[d,h,f]=a;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function eA(t){return Br(t,"mutations")}function To(t){return Br(t,"documentMutations")}function K1(t){return Br(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qi(0)}static kn(){return new qi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new qi(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Xe.fromTimestamp(new Zt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>mo(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Oe(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const A=[];return mo(e).J((i,a)=>{const o=Nl(a);o.sequenceNumber<=r&&n.get(o.targetId)===null&&(s++,A.push(this.removeTargetData(e,o)))}).next(()=>M.waitFor(A)).next(()=>s)}forEachTarget(e,r){return mo(e).J((n,s)=>{const A=Nl(s);r(A)})}qn(e){return KB(e).get("targetGlobalKey").next(r=>(Oe(r!==null),r))}Qn(e,r){return KB(e).put("targetGlobalKey",r)}Kn(e,r){return mo(e).put(j1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Ki(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let A=null;return mo(e).J({range:s,index:"queryTargetsIndex"},(i,a,o)=>{const c=Nl(a);ru(r,c.target)&&(A=c,o.done())}).next(()=>A)}addMatchingKeys(e,r,n){const s=[],A=uA(e);return r.forEach(i=>{const a=qr(i.path);s.push(A.put({targetId:n,path:a})),s.push(this.referenceDelegate.addReference(e,n,i))}),M.waitFor(s)}removeMatchingKeys(e,r,n){const s=uA(e);return M.forEach(r,A=>{const i=qr(A.path);return M.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,A)])})}removeMatchingKeysForTargetId(e,r){const n=uA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=uA(e);let A=lt();return s.J({range:n,H:!0},(i,a,o)=>{const c=As(i[1]),d=new Ue(c);A=A.add(d)}).next(()=>A)}containsKey(e,r){const n=qr(r.path),s=IDBKeyRange.bound([n],[QE(n)],!1,!0);let A=0;return uA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,a],o,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,r){return mo(e).get(r).next(n=>n?Nl(n):null)}}function mo(t){return Br(t,"targets")}function KB(t){return Br(t,"targetGlobal")}function uA(t){return Br(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB([t,e],[r,n]){const s=At(t,r);return s===0?At(e,n):s}class xD{constructor(e){this.Un=e,this.buffer=new Qt(GB),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();GB(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class G1{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){si(r)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ni(r)}await this.Hn(3e5)})}}class vD{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return M.resolve(dn.oe);const n=new xD(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(VB)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VB):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,A,i,a,o,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(A=h,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),_o()<=wt.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(a-i)+`ms
	Removed ${A} targets in `+(o-a)+`ms
	Removed ${h} documents in `+(c-o)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function z1(t,e){return new vD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,r){this.db=e,this.garbageCollector=z1(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Yu(e,n)}removeReference(e,r,n){return Yu(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Yu(e,r)}nr(e,r){return function(s,A){let i=!1;return K1(s).Y(a=>V1(s,a,A).next(o=>(o&&(i=!0),M.resolve(!o)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,a)=>{if(a<=r){const o=this.nr(e,i).next(c=>{if(!c)return A++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Xe.min()),uA(e).delete(function(h){return[0,qr(h.path)]}(i))))});s.push(o)}}).next(()=>M.waitFor(s)).next(()=>n.apply(e)).next(()=>A)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Yu(e,r)}tr(e,r){const n=uA(e);let s,A=dn.oe;return n.J({index:"documentTargetsIndex"},([i,a],{path:o,sequenceNumber:c})=>{i===0?(A!==dn.oe&&r(new Ue(As(s)),A),A=c,s=o):A=dn.oe}).next(()=>{A!==dn.oe&&r(new Ue(As(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yu(t,e){return uA(t).put(function(n,s){return{targetId:0,path:qr(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.changes=new $s(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?M.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return pi(e).put(n)}removeEntry(e,r,n){return pi(e).delete(function(A,i){const a=A.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Mh(i),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Gt.newInvalidDocument(r);return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ml(r))},(s,A)=>{n=this.ir(r,A)}).next(()=>n)}sr(e,r){let n={size:0,document:Gt.newInvalidDocument(r)};return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ml(r))},(s,A)=>{n={document:this.ir(r,A),size:Hh(A)}}).next(()=>n)}getEntries(e,r){let n=fn();return this._r(e,r,(s,A)=>{const i=this.ir(s,A);n=n.insert(s,i)}).next(()=>n)}ar(e,r){let n=fn(),s=new Ht(Ue.comparator);return this._r(e,r,(A,i)=>{const a=this.ir(A,i);n=n.insert(A,a),s=s.insert(A,Hh(i))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return M.resolve();let s=new Qt(WB);r.forEach(o=>s=s.add(o));const A=IDBKeyRange.bound(ml(s.first()),ml(s.last())),i=s.getIterator();let a=i.getNext();return pi(e).J({index:"documentKeyIndex",range:A},(o,c,d)=>{const h=Ue.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&WB(a,h)<0;)n(a,null),a=i.getNext();a&&a.isEqual(h)&&(n(a,c),a=i.hasNext()?i.getNext():null),a?d.$(ml(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,A){const i=r.path,a=[i.popLast().toArray(),i.lastSegment(),Mh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pi(e).U(IDBKeyRange.bound(a,o,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=fn();for(const h of c){const f=this.ir(Ue.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(su(r,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,s){let A=fn();const i=$B(r,n),a=$B(r,En.max());return pi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(o,c,d)=>{const h=this.ir(Ue.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new bD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return zB(e).get("remoteDocumentGlobalKey").next(r=>(Oe(!!r),r))}rr(e,r){return zB(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=lD(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Xe.min())))return n}return Gt.newInvalidDocument(e)}}function W1(t){return new CD(t)}class bD extends $1{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new $s(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Qt((A,i)=>At(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const a=this.lr.get(A);if(r.push(this.cr.removeEntry(e,A,a.readTime)),i.isValidDocument()){const o=kB(this.cr.serializer,i);s=s.add(A.path.popLast());const c=Hh(o);n+=c-a.size,r.push(this.cr.addEntry(e,A,o))}else if(n-=a.size,this.trackRemovals){const o=kB(this.cr.serializer,i.convertToNoDocument(Xe.min()));r.push(this.cr.addEntry(e,A,o))}}),s.forEach(A=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),r.push(this.cr.updateMetadata(e,n)),M.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:n.get(A).readTime})}),n))}}function zB(t){return Br(t,"remoteDocumentGlobal")}function pi(t){return Br(t,"remoteDocumentsV14")}function ml(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $B(t,e){const r=e.documentKey.path.toArray();return[t,Mh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function WB(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let A=0;A<r.length-2&&A<n.length-2;++A)if(s=At(r[A],n[A]),s)return s;return s=At(r.length,n.length),s||(s=At(r[r.length-2],n[n.length-2]),s||At(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&tc(n.mutation,s,hn.empty(),Zt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,lt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=lt()){const s=is();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(A=>{let i=kl();return A.forEach((a,o)=>{i=i.insert(a,o.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=is();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,lt()))}populateOverlays(e,r,n){const s=[];return n.forEach(A=>{r.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,a)=>{r.set(i,a)})})}computeViews(e,r,n,s){let A=fn();const i=ec(),a=function(){return ec()}();return r.forEach((o,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ws)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),tc(d.mutation,c,d.mutation.getFieldMask(),Zt.now())):i.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,A).next(o=>(o.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return a.set(c,new _D(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=ec();let s=new Ht((i,a)=>i-a),A=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const a of i)a.keys().forEach(o=>{const c=r.get(o);if(c===null)return;let d=n.get(o)||hn.empty();d=a.applyToLocalView(c,d),n.set(o,d);const h=(s.get(a.batchId)||lt()).add(o);s=s.insert(a.batchId,h)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),c=o.key,d=o.value,h=u1();d.forEach(f=>{if(!A.has(f)){const m=w1(r.get(f),n.get(f));m!==null&&h.set(f,m),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return Ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Lw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-A.size):M.resolve(is());let a=-1,o=A;return i.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),A.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{o=o.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,o,c,lt())).next(d=>({batchId:a,changes:c1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ue(r)).next(n=>{let s=kl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const A=r.collectionGroup;let i=kl();return this.indexManager.getCollectionParents(e,A).next(a=>M.forEach(a,o=>{const c=function(h,f){return new zs(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,o.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,A,s))).next(i=>{A.forEach((o,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Gt.newInvalidDocument(d)))});let a=kl();return i.forEach((o,c)=>{const d=A.get(o);d!==void 0&&tc(d.mutation,c,hn.empty(),Zt.now()),su(r,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return M.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(r)),M.resolve()}getNamedQuery(e,r){return M.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:$w(s.bundledQuery),readTime:hr(s.readTime)}}(r)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.overlays=new Ht(Ue.comparator),this.Ir=new Map}getOverlay(e,r){return M.resolve(this.overlays.get(r))}getOverlays(e,r){const n=is();return M.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,A)=>{this.ht(e,r,A)}),M.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(n)),M.resolve()}getOverlaysForCollection(e,r,n){const s=is(),A=r.length+1,i=new Ue(r.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const o=a.getNext().value,c=o.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===A&&o.largestBatchId>n&&s.set(o.getKey(),o)}return M.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let A=new Ht((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=A.get(c.largestBatchId);d===null&&(d=is(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=is(),o=A.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Kw(r,n));let A=this.Ir.get(r);A===void 0&&(A=lt(),this.Ir.set(r,A)),this.Ir.set(r,A.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.sessionToken=Ar.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.Tr=new Qt(_r.Er),this.dr=new Qt(_r.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new _r(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new _r(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Ue(new yt([])),n=new _r(r,e),s=new _r(r,e+1),A=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ue(new yt([])),n=new _r(r,e),s=new _r(r,e+1);let A=lt();return this.dr.forEachInRange([n,s],i=>{A=A.add(i.key)}),A}containsKey(e){const r=new _r(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class _r{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ue.comparator(e.key,r.key)||At(e.wr,r.wr)}static Ar(e,r){return At(e.wr,r.wr)||Ue.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Qt(_r.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Hw(A,r,n,s);this.mutationQueue.push(i);for(const a of s)this.br=this.br.add(new _r(a.key,A)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(i)}lookupMutationBatch(e,r){return M.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),A=s<0?0:s;return M.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new _r(r,0),s=new _r(r,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([n,s],i=>{const a=this.Dr(i.wr);A.push(a)}),M.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qt(At);return r.forEach(s=>{const A=new _r(s,0),i=new _r(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],a=>{n=n.add(a.wr)})}),M.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let A=n;Ue.isDocumentKey(A)||(A=A.child(""));const i=new _r(new Ue(A),0);let a=new Qt(At);return this.br.forEachWhile(o=>{const c=o.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(a=a.add(o.wr)),!0)},i),M.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Oe(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return M.forEach(r.mutations,s=>{const A=new _r(s.key,r.batchId);return n=n.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new _r(r,0),s=this.br.firstAfterOrEqual(n);return M.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.Mr=e,this.docs=function(){return new Ht(Ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),A=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return M.resolve(n?n.document.mutableCopy():Gt.newInvalidDocument(r))}getEntries(e,r){let n=fn();return r.forEach(s=>{const A=this.docs.get(s);n=n.insert(s,A?A.document.mutableCopy():Gt.newInvalidDocument(s))}),M.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let A=fn();const i=r.path,a=new Ue(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:c,value:{document:d}}=o.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Nw(RE(d),n)<=0||(s.has(d.key)||su(r,d))&&(A=A.insert(d.key,d.mutableCopy()))}return M.resolve(A)}getAllFromCollectionGroup(e,r,n,s){Pe()}Or(e,r){return M.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new UD(this)}getSize(e){return M.resolve(this.size)}}class UD extends $1{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),M.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.persistence=e,this.Nr=new $s(r=>Ki(r),ru),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jw,this.targetCount=0,this.kr=qi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),M.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new qi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,M.resolve()}updateTargetData(e,r){return this.Kn(r),M.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,r,n){let s=0;const A=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(A).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return M.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),M.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,A=[];return s&&r.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),M.waitFor(A)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),M.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return M.resolve(n)}containsKey(e,r){return M.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new dn(0),this.Kr=!1,this.Kr=!0,this.$r=new TD,this.referenceDelegate=e(this),this.Ur=new kD(this),this.indexManager=new mD,this.remoteDocumentCache=function(s){return new SD(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new L1(r),this.Gr=new ID(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new ED,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new FD(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ie("MemoryPersistence","Starting transaction:",e);const s=new QD(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,r){return M.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class QD extends PE{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Jr=new Jw,this.Yr=null}static Zr(e){return new Kf(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),M.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),M.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),M.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,n=>{const s=Ue.fromPath(n);return this.ei(e,s).next(A=>{A||r.removeEntry(s,Xe.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return M.or([()=>M.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Vh{constructor(e,r){this.persistence=e,this.ti=new $s(n=>qr(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=z1(this,r)}static Zr(e,r){return new Vh(e,r)}zr(){}jr(e){return M.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return M.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(A=>A?M.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),A=s.newChangeBuffer();return s.Or(e,i=>this.nr(e,i,r).next(a=>{a||(n++,A.removeEntry(i,Xe.min()))})).next(()=>A.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),M.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),M.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),M.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Kd(e.data.value)),r}nr(e,r,n){return M.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return M.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.serializer=e}O(e,r,n,s){const A=new Rf("createOrUpgrade",r);n<1&&s>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aB,{unique:!0}),o.createObjectStore("documentMutations")}(e),qB(e),function(o){o.createObjectStore("remoteDocuments")}(e));let i=M.resolve();return n<3&&s>=3&&(n!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),qB(e)),i=i.next(()=>function(o){const c=o.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),n<4&&s>=4&&(n!==0&&(i=i.next(()=>function(o,c){return c.store("mutations").U().next(d=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aB,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return M.waitFor(f)})}(e,A))),i=i.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(i=i.next(()=>this.ni(A))),n<6&&s>=6&&(i=i.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),n<7&&s>=7&&(i=i.next(()=>this.ii(A))),n<8&&s>=8&&(i=i.next(()=>this.si(e,A))),n<9&&s>=9&&(i=i.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(i=i.next(()=>this.oi(A))),n<11&&s>=11&&(i=i.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:m4});c.createIndex("collectionPathOverlayIndex",w4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",y4,{unique:!1})})(e)})),n<13&&s>=13&&(i=i.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:i4});c.createIndex("documentKeyIndex",o4),c.createIndex("collectionGroupIndex",a4)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),n<15&&s>=15&&(i=i.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:h4}).createIndex("sequenceNumberIndex",f4,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:g4}).createIndex("documentKeyIndex",p4,{unique:!1})}(e))),n<16&&s>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(i=i.next(()=>{(function(o){o.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Hh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>M.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(a=>M.forEach(a,o=>{Oe(o.userId===A.userId);const c=Ci(this.serializer,o);return H1(e,A.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return n.J((i,a)=>{const o=new yt(i),c=function(h){return[0,qr(h)]}(o);A.push(r.get(c).next(d=>d?M.resolve():(h=>r.put({targetId:0,path:qr(h),sequenceNumber:s.highestListenSequenceNumber}))(o)))}).next(()=>M.waitFor(A))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:d4});const n=r.store("collectionParents"),s=new qw,A=i=>{if(s.add(i)){const a=i.lastSegment(),o=i.popLast();return n.put({collectionId:a,parent:qr(o)})}};return r.store("remoteDocuments").J({H:!0},(i,a)=>{const o=new yt(i);return A(o.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,a,o],c)=>{const d=As(a);return A(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const A=Nl(s),i=j1(this.serializer,A);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((A,i)=>{const a=r.store("remoteDocumentsV14"),o=function(h){return h.document?new Ue(yt.fromString(h.document.name).popFirst(5)):h.noDocument?Ue.fromSegments(h.noDocument.path):h.unknownDocument?Ue.fromSegments(h.unknownDocument.path):Pe()}(i).path.toArray(),c={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=W1(this.serializer),A=new Xw(Kf.Zr,this.serializer.ct);return n.U().next(i=>{const a=new Map;return i.forEach(o=>{var c;let d=(c=a.get(o.userId))!==null&&c!==void 0?c:lt();Ci(this.serializer,o).keys().forEach(h=>d=d.add(h)),a.set(o.userId,d)}),M.forEach(a,(o,c)=>{const d=new Er(c),h=Hf.lt(this.serializer,d),f=A.getIndexManager(d),m=Vf.lt(d,this.serializer,f,A.referenceDelegate);return new q1(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Mm(r,dn.oe),o).next()})})}}function qB(t){t.createObjectStore("targetDocuments",{keyPath:c4}).createIndex("documentTargetsIndex",u4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",l4,{unique:!0}),t.createObjectStore("targetGlobal")}const ip="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yw{constructor(e,r,n,s,A,i,a,o,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=A,this.window=i,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Yw.D())throw new Ae(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BD(this,s),this.Ai=r+"main",this.serializer=new L1(o),this.Ri=new ls(this.Ai,this.hi,new ND(this.serializer)),this.$r=new uD,this.Ur=new yD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=W1(this.serializer),this.Gr=new cD,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(K.FAILED_PRECONDITION,ip);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new dn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(si(e))return ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return wl(e).get("owner").next(r=>M.resolve(this.vi(r)))}Ci(e){return Zu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Br(r,"clientMetadata");return n.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(a=>A.indexOf(a)===-1);return M.forEach(i,a=>n.delete(a.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):wl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Ae(K.FAILED_PRECONDITION,ip);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zu(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(A||i&&a)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&ie("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Mm(e,dn.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Zu(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Vf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Hf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ie("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",A=function(o){return o===17?B4:o===16?v4:o===15?Dw:o===14?VE:o===13?HE:o===12?x4:o===11?OE:void Pe()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,a=>(i=new Mm(a,this.Qr?this.Qr.next():dn.oe),r==="readwrite-primary"?this.wi(i).next(o=>!!o||this.Si(i)).next(o=>{if(!o)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ae(K.FAILED_PRECONDITION,DE);return n(i)}).next(o=>this.Di(i).next(()=>o)):this.Ki(i).next(()=>n(i)))).then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e){return wl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ae(K.FAILED_PRECONDITION,ip)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wl(e).put("owner",r)}static D(){return ls.D()}bi(e){const r=wl(e);return r.get("owner").next(n=>this.vi(n)?(ie("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):M.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(dr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;mE()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ie("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return dr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wl(t){return Br(t,"owner")}function Zu(t){return Br(t,"clientMetadata")}function Zw(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=lt(),s=lt();for(const A of r.docChanges)switch(A.type){case 0:n=n.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new ey(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mE()?8:LE(vr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const A={result:null};return this.Yi(e,r).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,r,s,n).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new RD;return this.Xi(e,r,i).next(a=>{if(A.result=a,this.zi)return this.es(e,r,i,a.size)})}).next(()=>A.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(_o()<=wt.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Io(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(_o()<=wt.DEBUG&&ie("QueryEngine","Query:",Io(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(_o()<=wt.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Io(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(r))):M.resolve())}Yi(e,r){if(vB(r))return M.resolve(null);let n=Jr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Lh(r,null,"F"),n=Jr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(A=>{const i=lt(...A);return this.Ji.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,n).next(o=>{const c=this.ts(r,a);return this.ns(r,c,i,o.readTime)?this.Yi(e,Lh(r,null,"F")):this.rs(e,c,r,o)}))})))}Zi(e,r,n,s){return vB(r)||s.isEqual(Xe.min())?M.resolve(null):this.Ji.getDocuments(e,n).next(A=>{const i=this.ts(r,A);return this.ns(r,i,n,s)?M.resolve(null):(_o()<=wt.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Io(r)),this.rs(e,i,r,NE(s,-1)).next(a=>a))})}ts(e,r){let n=new Qt(a1(e));return r.forEach((s,A)=>{su(e,A)&&(n=n.add(A))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const A=e.limitType==="F"?r.last():r.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,r,n){return _o()<=wt.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Io(r)),this.Ji.getDocumentsMatchingQuery(e,r,En.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(A=>(r.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Ht(At),this._s=new $s(A=>Ki(A),ru),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function X1(t,e,r,n){return new DD(t,e,r,n)}async function Y1(t,e){const r=_e(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(A=>(s=A,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(A=>{const i=[],a=[];let o=lt();for(const c of s){i.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}for(const c of A){a.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}return r.localDocuments.getDocuments(n,o).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:a}))})})}function PD(t,e){const r=_e(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),A=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,o,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(y=>{m=m.next(()=>d.getEntry(o,y)).next(C=>{const I=c.docVersions.get(y);Oe(I!==null),C.version.compareTo(I)<0&&(h.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),d.addEntry(C)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(o,h))}(r,n,e,A).next(()=>A.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let o=lt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function Z1(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function LD(t,e){const r=_e(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(r.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(A,d.addedDocuments,h)));let m=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ar.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(h,m),function(C,I,B){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(f,m,d)&&a.push(r.Ur.updateTargetData(A,m))});let o=fn(),c=lt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(A,d))}),a.push(eT(A,i,e.documentUpdates).next(d=>{o=d.Ps,c=d.Is})),!n.isEqual(Xe.min())){const d=r.Ur.getLastRemoteSnapshotVersion(A).next(h=>r.Ur.setTargetsMetadata(A,A.currentSequenceNumber,n));a.push(d)}return M.waitFor(a).next(()=>i.apply(A)).next(()=>r.localDocuments.getLocalViewOfDocuments(A,o,c)).next(()=>o)}).then(A=>(r.os=s,A))}function eT(t,e,r){let n=lt(),s=lt();return r.forEach(A=>n=n.add(A)),e.getEntries(t,n).next(A=>{let i=fn();return r.forEach((a,o)=>{const c=A.get(a);o.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),o.isNoDocument()&&o.version.isEqual(Xe.min())?(e.removeEntry(a,o.readTime),i=i.insert(a,o)):!c.isValidDocument()||o.version.compareTo(c.version)>0||o.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(o),i=i.insert(a,o)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",o.version)}),{Ps:i,Is:s}})}function jD(t,e){const r=_e(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function va(t,e){const r=_e(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(A=>A?(s=A,M.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Es(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ba(t,e,r){const n=_e(t),s=n.os.get(e),A=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",A,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!si(i))throw i;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Kh(t,e,r){const n=_e(t);let s=Xe.min(),A=lt();return n.persistence.runTransaction("Execute query","readwrite",i=>function(o,c,d){const h=_e(o),f=h._s.get(d);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,Jr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,a.targetId).next(o=>{A=o})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:Xe.min(),r?A:lt())).next(a=>(nT(n,o1(e),a),{documents:a,Ts:A})))}function tT(t,e){const r=_e(t),n=_e(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",A=>n.ot(A,e).next(i=>i?i.target:null))}function rT(t,e){const r=_e(t),n=r.us.get(e)||Xe.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,NE(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(nT(r,e,s),s))}function nT(t,e,r){let n=t.us.get(e)||Xe.min();r.forEach((s,A)=>{A.readTime.compareTo(n)>0&&(n=A.readTime)}),t.us.set(e,n)}async function MD(t,e,r,n){const s=_e(t);let A=lt(),i=fn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),o=await va(s,function(d){return Jr(Da(yt.fromString(`__bundle__/docs/${d}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>eT(c,a,i).next(d=>(a.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,o.targetId).next(()=>s.Ur.addMatchingKeys(c,A,o.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function OD(t,e,r=lt()){const n=await va(t,Jr($w(e.bundledQuery))),s=_e(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=hr(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const a=n.withResumeToken(Ar.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(A,a).next(()=>s.Ur.removeMatchingKeysForTargetId(A,n.targetId)).next(()=>s.Ur.addMatchingKeys(A,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function JB(t,e){return`firestore_clients_${t}_${e}`}function XB(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function op(t,e){return`firestore_targets_${t}_${e}`}class Gh{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new Ae(s.error.code,s.error.message))),i?new Gh(e,r,s.state,A):(dr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rc{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,A=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return A&&n.error&&(A=typeof n.error.message=="string"&&typeof n.error.code=="string",A&&(s=new Ae(n.error.code,n.error.message))),A?new rc(e,n.state,s):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,A=jw();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=jE(n.activeTargetIds[i]),A=A.add(n.activeTargetIds[i]);return s?new zh(e,A):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class ty{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new ty(r.clientId,r.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class e0{constructor(){this.activeTargetIds=jw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ap{constructor(e,r,n,s,A){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ht(At),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=JB(this.persistenceKey,this.ps),this.vs=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new e0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Os=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(JB(this.persistenceKey,n));if(s){const A=zh.Rs(n,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(op(this.persistenceKey,e));if(s){const A=rc.Rs(e,s);A&&(n=A.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(op(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ie("SharedClientState","READ",e,r),r}setItem(e,r){ie("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ie("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(A){let i=dn.oe;if(A!=null)try{const a=JSON.parse(A);Oe(typeof a=="number"),i=a}catch(a){dr("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(r.newValue);n!==dn.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new Gh(this.currentUser,e,r,n),A=XB(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const r=XB(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=op(this.persistenceKey,e),A=new rc(e,r,n);this.setItem(s,A.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return zh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),A=n[2]!==void 0?n[2]:null;return Gh.Rs(new Er(A),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return rc.Rs(s,r)}Ls(e){return ty.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(n),i=[],a=[];return A.forEach(o=>{s.has(o)||i.push(o)}),s.forEach(o=>{A.has(o)||a.push(o)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=jw();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class sT{constructor(){this.so=new e0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new e0,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed=null;function lp(){return ed===null?ed=function(){return 268435456+Math.round(2147483648*Math.random())}():ed++,"0x"+ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="WebChannelConnection";class GD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(r,n,s,A,i){const a=lp(),o=this.xo(r,n.toUriEncodedString());ie("RestConnection",`Sending RPC '${r}' ${a}:`,o,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(r,o,c,s).then(d=>(ie("RestConnection",`Received RPC '${r}' ${a}: `,d),d),d=>{throw In("RestConnection",`RPC '${r}' ${a} failed with error: `,d,"url: ",o,"request:",s),d})}Lo(r,n,s,A,i,a){return this.Mo(r,n,s,A,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ra}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((A,i)=>r[i]=A),s&&s.headers.forEach((A,i)=>r[i]=A)}xo(r,n){const s=VD[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const A=lp();return new Promise((i,a)=>{const o=new _E;o.setWithCredentials(!0),o.listenOnce(IE.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Od.NO_ERROR:const d=o.getResponseJson();ie(Kr,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case Od.TIMEOUT:ie(Kr,`RPC '${e}' ${A} timed out`),a(new Ae(K.DEADLINE_EXCEEDED,"Request time out"));break;case Od.HTTP_ERROR:const h=o.getStatus();if(ie(Kr,`RPC '${e}' ${A} failed with status:`,h,"response text:",o.getResponseText()),h>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const y=function(I){const B=I.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(B)>=0?B:K.UNKNOWN}(m.status);a(new Ae(y,m.message))}else a(new Ae(K.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ae(K.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{ie(Kr,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);ie(Kr,`RPC '${e}' ${A} sending request:`,s),o.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=lp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=FE(),a=TE(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const d=A.join("");ie(Kr,`Creating RPC '${e}' stream ${s}: ${d}`,o);const h=i.createWebChannel(d,o);let f=!1,m=!1;const y=new KD({Io:I=>{m?ie(Kr,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(f||(ie(Kr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ie(Kr,`RPC '${e}' stream ${s} sending:`,I),h.send(I))},To:()=>h.close()}),C=(I,B,w)=>{I.listen(B,b=>{try{w(b)}catch(F){setTimeout(()=>{throw F},0)}})};return C(h,Ul.EventType.OPEN,()=>{m||(ie(Kr,`RPC '${e}' stream ${s} transport opened.`),y.yo())}),C(h,Ul.EventType.CLOSE,()=>{m||(m=!0,ie(Kr,`RPC '${e}' stream ${s} transport closed`),y.So())}),C(h,Ul.EventType.ERROR,I=>{m||(m=!0,In(Kr,`RPC '${e}' stream ${s} transport errored:`,I),y.So(new Ae(K.UNAVAILABLE,"The operation could not be completed")))}),C(h,Ul.EventType.MESSAGE,I=>{var B;if(!m){const w=I.data[0];Oe(!!w);const b=w,F=b.error||((B=b[0])===null||B===void 0?void 0:B.error);if(F){ie(Kr,`RPC '${e}' stream ${s} received error:`,F);const Q=F.status;let D=function(_){const S=fr[_];if(S!==void 0)return B1(S)}(Q),x=F.message;D===void 0&&(D=K.INTERNAL,x="Unknown error status: "+Q+" with message "+F.message),m=!0,y.So(new Ae(D,x)),h.close()}else ie(Kr,`RPC '${e}' stream ${s} received:`,w),y.bo(w)}}),C(a,EE.STAT_EVENT,I=>{I.stat===Lm.PROXY?ie(Kr,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Lm.NOPROXY&&ie(Kr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(){return typeof window<"u"?window:null}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){return new Z4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,r,n=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,r,n,s,A,i,a,o){this.ui=e,this.Ho=n,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ry(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===K.RESOURCE_EXHAUSTED?(dr(r.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new Ae(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zD extends iT{constructor(e,r,n,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=rD(this.serializer,e),n=function(A){if(!("targetChange"in A))return Xe.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?Xe.min():i.readTime?hr(i.readTime):Xe.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=qm(this.serializer),r.addTarget=function(A,i){let a;const o=i.target;if(a=Dh(o)?{documents:k1(A,o)}:{query:Of(A,o)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=I1(A,i.resumeToken);const c=$m(A,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(Xe.min())>0){a.readTime=xa(A,i.snapshotVersion.toTimestamp());const c=$m(A,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=sD(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=qm(this.serializer),r.removeTarget=e,this.a_(r)}}class $D extends iT{constructor(e,r,n,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=nD(e.writeResults,e.commitTime),n=hr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=qm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Lc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ae(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,Wm(r,n),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new Ae(K.UNKNOWN,A.toString())})}Lo(e,r,n,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Lo(e,Wm(r,n),s,i,a,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(K.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class qD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(dr(r),this.D_=!1):ie("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,r,n,s,A){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{n.enqueueAndForget(async()=>{ii(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=_e(o);c.L_.add(4),await ja(c),c.q_.set("Unknown"),c.L_.delete(4),await lu(c)}(this))})}),this.q_=new qD(n,s)}}async function lu(t){if(ii(t))for(const e of t.B_)await e(!0)}async function ja(t){for(const e of t.B_)await e(!1)}function Gf(t,e){const r=_e(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Ay(r)?sy(r):Oa(r).r_()&&ny(r,e))}function Ca(t,e){const r=_e(t),n=Oa(r);r.N_.delete(e),n.r_()&&oT(r,e),r.N_.size===0&&(n.r_()?n.o_():ii(r)&&r.q_.set("Unknown"))}function ny(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Oa(t).A_(e)}function oT(t,e){t.Q_.xe(e),Oa(t).R_(e)}function sy(t){t.Q_=new q4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oa(t).start(),t.q_.v_()}function Ay(t){return ii(t)&&!Oa(t).n_()&&t.N_.size>0}function ii(t){return _e(t).L_.size===0}function aT(t){t.Q_=void 0}async function XD(t){t.q_.set("Online")}async function YD(t){t.N_.forEach((e,r)=>{ny(t,e)})}async function ZD(t,e){aT(t),Ay(t)?(t.q_.M_(e),sy(t)):t.q_.set("Unknown")}async function eP(t,e,r){if(t.q_.set("Online"),e instanceof _1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const a of A.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(n){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await $h(t,n)}else if(e instanceof $d?t.Q_.Ke(e):e instanceof b1?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Xe.min()))try{const n=await Z1(t.localStore);r.compareTo(n)>=0&&await function(A,i){const a=A.Q_.rt(i);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,c)=>{const d=A.N_.get(o);if(!d)return;A.N_.set(o,d.withResumeToken(Ar.EMPTY_BYTE_STRING,d.snapshotVersion)),oT(A,o);const h=new Es(d.target,o,c,d.sequenceNumber);ny(A,h)}),A.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ie("RemoteStore","Failed to raise snapshot:",n),await $h(t,n)}}async function $h(t,e,r){if(!si(e))throw e;t.L_.add(1),await ja(t),t.q_.set("Offline"),r||(r=()=>Z1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await lu(t)})}function lT(t,e){return e().catch(r=>$h(t,r,e))}async function Ma(t){const e=_e(t),r=WA(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tP(e);)try{const s=await jD(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,rP(e,s)}catch(s){await $h(e,s)}cT(e)&&uT(e)}function tP(t){return ii(t)&&t.O_.length<10}function rP(t,e){t.O_.push(e);const r=WA(t);r.r_()&&r.V_&&r.m_(e.mutations)}function cT(t){return ii(t)&&!WA(t).n_()&&t.O_.length>0}function uT(t){WA(t).start()}async function nP(t){WA(t).p_()}async function sP(t){const e=WA(t);for(const r of t.O_)e.m_(r.mutations)}async function AP(t,e,r){const n=t.O_.shift(),s=Vw.from(n,e,r);await lT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ma(t)}async function iP(t,e){e&&WA(t).V_&&await async function(n,s){if(function(i){return v1(i)&&i!==K.ABORTED}(s.code)){const A=n.O_.shift();WA(n).s_(),await lT(n,()=>n.remoteSyncer.rejectFailedWrite(A.batchId,s)),await Ma(n)}}(t,e),cT(t)&&uT(t)}async function ZB(t,e){const r=_e(t);r.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const n=ii(r);r.L_.add(3),await ja(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await lu(r)}async function t0(t,e){const r=_e(t);e?(r.L_.delete(2),await lu(r)):e||(r.L_.add(2),await ja(r),r.q_.set("Unknown"))}function Oa(t){return t.K_||(t.K_=function(r,n,s){const A=_e(r);return A.w_(),new zD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:XD.bind(null,t),Ro:YD.bind(null,t),mo:ZD.bind(null,t),d_:eP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ay(t)?sy(t):t.q_.set("Unknown")):(await t.K_.stop(),aT(t))})),t.K_}function WA(t){return t.U_||(t.U_=function(r,n,s){const A=_e(r);return A.w_(),new $D(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nP.bind(null,t),mo:iP.bind(null,t),f_:sP.bind(null,t),g_:AP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ma(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,r,n,s,A){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=A,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,A){const i=Date.now()+n,a=new iy(e,r,i,s,A);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ha(t,e){if(dr("AsyncQueue",`${e}: ${t}`),si(t))return new Ae(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ue.comparator(r.key,n.key):(r,n)=>Ue.comparator(r.key,n.key),this.keyedMap=kl(),this.sortedSet=new Ht(this.comparator)}static emptySet(e){return new Zo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Zo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.W_=new Ht(Ue.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class ba{constructor(e,r,n,s,A,i,a,o,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,A){const i=[];return r.forEach(a=>{i.push({type:0,doc:a})}),new ba(e,r,Zo.emptySet(r),i,n,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class aP{constructor(){this.queries=tC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=_e(r),A=s.queries;s.queries=tC(),A.forEach((i,a)=>{for(const o of a.j_)o.onError(n)})})(this,new Ae(K.ABORTED,"Firestore shutting down"))}}function tC(){return new $s(t=>i1(t),nu)}async function oy(t,e){const r=_e(t);let n=3;const s=e.query;let A=r.queries.get(s);A?!A.H_()&&e.J_()&&(n=2):(A=new oP,n=e.J_()?0:1);try{switch(n){case 0:A.z_=await r.onListen(s,!0);break;case 1:A.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const a=Ha(i,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(a)}r.queries.set(s,A),A.j_.push(e),e.Z_(r.onlineState),A.z_&&e.X_(A.z_)&&ly(r)}async function ay(t,e){const r=_e(t),n=e.query;let s=3;const A=r.queries.get(n);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function lP(t,e){const r=_e(t);let n=!1;for(const s of e){const A=s.query,i=r.queries.get(A);if(i){for(const a of i.j_)a.X_(s)&&(n=!0);i.z_=s}}n&&ly(r)}function cP(t,e,r){const n=_e(t),s=n.queries.get(e);if(s)for(const A of s.j_)A.onError(r);n.queries.delete(e)}function ly(t){t.Y_.forEach(e=>{e.next()})}var r0,rC;(rC=r0||(r0={})).ea="default",rC.Cache="cache";class cy{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new ba(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==r0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.serializer=e}Es(e){return cs(this.serializer,e)}ds(e){return e.metadata.exists?U1(this.serializer,e.document,!1):Gt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return hr(e)}}class dP{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=yt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new nC(this.serializer);for(const s of e)if(s.metadata.queries){const A=n.Es(s.metadata.name);for(const i of s.metadata.queries){const a=(r.get(i)||lt()).add(A);r.set(i,a)}}return r}async complete(){const e=await MD(this.localStore,new nC(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await OD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function dT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.key=e}}class fT{constructor(e){this.key=e}}class gT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=lt(),this.mutatedKeys=lt(),this.Aa=a1(e),this.Ra=new Zo(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new eC,s=r?r.Ra:this.Ra;let A=r?r.mutatedKeys:this.mutatedKeys,i=s,a=!1;const o=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=su(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),C=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?y!==C&&(n.track({type:3,doc:m}),I=!0):this.ga(f,m)||(n.track({type:2,doc:m}),I=!0,(o&&this.Aa(m,o)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(n.track({type:0,doc:m}),I=!0):f&&!m&&(n.track({type:1,doc:f}),I=!0,(o||c)&&(a=!0)),I&&(m?(i=i.add(m),A=C?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:a,mutatedKeys:A}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,y){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return C(m)-C(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const a=r&&!s?this.ya():[],o=this.da.size===0&&this.current&&!s?1:0,c=o!==this.Ea;return this.Ea=o,i.length!==0||c?{snapshot:new ba(this.query,e.Ra,A,i,e.mutatedKeys,o===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new eC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=lt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new fT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new hT(n))}),r}ba(e){this.Ta=e.Ts,this.da=lt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ba.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class fP{constructor(e){this.key=e,this.va=!1}}class gP{constructor(e,r,n,s,A,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new $s(a=>i1(a),nu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ht(Ue.comparator),this.Na=new Map,this.La=new Jw,this.Ba={},this.ka=new Map,this.qa=qi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pP(t,e,r=!0){const n=zf(t);let s;const A=n.Fa.get(e);return A?(n.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await pT(n,e,r,!0),s}async function mP(t,e){const r=zf(t);await pT(r,e,!0,!1)}async function pT(t,e,r,n){const s=await va(t.localStore,Jr(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,r);let a;return n&&(a=await uy(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&Gf(t.remoteStore,s),a}async function uy(t,e,r,n,s){t.Ka=(h,f,m)=>async function(C,I,B,w){let b=I.view.ma(B);b.ns&&(b=await Kh(C.localStore,I.query,!1).then(({documents:x})=>I.view.ma(x,b)));const F=w&&w.targetChanges.get(I.targetId),Q=w&&w.targetMismatches.get(I.targetId)!=null,D=I.view.applyChanges(b,C.isPrimaryClient,F,Q);return n0(C,I.targetId,D.wa),D.snapshot}(t,h,f,m);const A=await Kh(t.localStore,e,!0),i=new gT(e,A.Ts),a=i.ma(A.documents),o=ou.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(a,t.isPrimaryClient,o);n0(t,r,c.wa);const d=new hP(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function wP(t,e,r){const n=_e(t),s=n.Fa.get(e),A=n.Ma.get(s.targetId);if(A.length>1)return n.Ma.set(s.targetId,A.filter(i=>!nu(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ba(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Ca(n.remoteStore,s.targetId),_a(n,s.targetId)}).catch(ni)):(_a(n,s.targetId),await Ba(n.localStore,s.targetId,!0))}async function yP(t,e){const r=_e(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ca(r.remoteStore,n.targetId))}async function xP(t,e,r){const n=gy(t);try{const s=await function(i,a){const o=_e(i),c=Zt.now(),d=a.reduce((m,y)=>m.add(y.key),lt());let h,f;return o.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=fn(),C=lt();return o.cs.getEntries(m,d).next(I=>{y=I,y.forEach((B,w)=>{w.isValidDocument()||(C=C.add(B))})}).next(()=>o.localDocuments.getOverlayedDocuments(m,y)).next(I=>{h=I;const B=[];for(const w of a){const b=z4(w,h.get(w.key).overlayedDocument);b!=null&&B.push(new Ws(w.key,b,qE(b.value.mapValue),Yt.exists(!0)))}return o.mutationQueue.addMutationBatch(m,c,B,a)}).next(I=>{f=I;const B=I.applyToLocalDocumentSet(h,C);return o.documentOverlayCache.saveOverlays(m,I.batchId,B)})}).then(()=>({batchId:f.batchId,changes:c1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,a,o){let c=i.Ba[i.currentUser.toKey()];c||(c=new Ht(At)),c=c.insert(a,o),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await qs(n,s.changes),await Ma(n.remoteStore)}catch(s){const A=Ha(s,"Failed to persist write");r.reject(A)}}async function mT(t,e){const r=_e(t);try{const n=await LD(r.localStore,e);e.targetChanges.forEach((s,A)=>{const i=r.Na.get(A);i&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Oe(i.va):s.removedDocuments.size>0&&(Oe(i.va),i.va=!1))}),await qs(r,n,e)}catch(n){await ni(n)}}function sC(t,e,r){const n=_e(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((A,i)=>{const a=i.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const o=_e(i);o.onlineState=a;let c=!1;o.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&ly(o)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function vP(t,e,r){const n=_e(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),A=s&&s.key;if(A){let i=new Ht(Ue.comparator);i=i.insert(A,Gt.newNoDocument(A,Xe.min()));const a=lt().add(A),o=new iu(Xe.min(),new Map,new Ht(At),i,a);await mT(n,o),n.Oa=n.Oa.remove(A),n.Na.delete(e),fy(n)}else await Ba(n.localStore,e,!1).then(()=>_a(n,e,r)).catch(ni)}async function BP(t,e){const r=_e(t),n=e.batch.batchId;try{const s=await PD(r.localStore,e);hy(r,n,null),dy(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await qs(r,s)}catch(s){await ni(s)}}async function CP(t,e,r){const n=_e(t);try{const s=await function(i,a){const o=_e(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return o.mutationQueue.lookupMutationBatch(c,a).next(h=>(Oe(h!==null),d=h.keys(),o.mutationQueue.removeMutationBatch(c,h))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>o.localDocuments.getDocuments(c,d))})}(n.localStore,e);hy(n,e,r),dy(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await qs(n,s)}catch(s){await ni(s)}}async function bP(t,e){const r=_e(t);ii(r.remoteStore)||ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const a=_e(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=Ha(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function dy(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function hy(t,e,r){const n=_e(t);let s=n.Ba[n.currentUser.toKey()];if(s){const A=s.get(e);A&&(r?A.reject(r):A.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function _a(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||wT(t,n)})}function wT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Ca(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),fy(t))}function n0(t,e,r){for(const n of r)n instanceof hT?(t.La.addReference(n.key,e),_P(t,n)):n instanceof fT?(ie("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||wT(t,n.key)):Pe()}function _P(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ie("SyncEngine","New document in limbo: "+r),t.xa.add(n),fy(t))}function fy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Ue(yt.fromString(e)),n=t.qa.next();t.Na.set(n,new fP(r)),t.Oa=t.Oa.insert(r,n),Gf(t.remoteStore,new Es(Jr(Da(r.path)),n,"TargetPurposeLimboResolution",dn.oe))}}async function qs(t,e,r){const n=_e(t),s=[],A=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((a,o)=>{i.push(n.Ka(o,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(o.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(o.targetId,h?"current":"not-current")}if(c){s.push(c);const h=ey.Wi(o.targetId,c);A.push(h)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(o,c){const d=_e(o);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!si(h))throw h;ie("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),y=m.snapshotVersion,C=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,C)}}}(n.localStore,A))}async function IP(t,e){const r=_e(t);if(!r.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const n=await Y1(r.localStore,e);r.currentUser=e,function(A,i){A.ka.forEach(a=>{a.forEach(o=>{o.reject(new Ae(K.CANCELLED,i))})}),A.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qs(r,n.hs)}}function EP(t,e){const r=_e(t),n=r.Na.get(e);if(n&&n.va)return lt().add(n.key);{let s=lt();const A=r.Ma.get(e);if(!A)return s;for(const i of A){const a=r.Fa.get(i);s=s.unionWith(a.view.Va)}return s}}async function TP(t,e){const r=_e(t),n=await Kh(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&n0(r,e.targetId,s.wa),s}async function FP(t,e){const r=_e(t);return rT(r.localStore,e).then(n=>qs(r,n))}async function SP(t,e,r,n){const s=_e(t),A=await function(a,o){const c=_e(a),d=_e(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,o).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);A!==null?(r==="pending"?await Ma(s.remoteStore):r==="acknowledged"||r==="rejected"?(hy(s,e,n||null),dy(s,e),function(a,o){_e(_e(a).mutationQueue).On(o)}(s.localStore,e)):Pe(),await qs(s,A)):ie("SyncEngine","Cannot apply mutation batch with id: "+e)}async function UP(t,e){const r=_e(t);if(zf(r),gy(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await AC(r,n.toArray());r.Qa=!0,await t0(r.remoteStore,!0);for(const A of s)Gf(r.remoteStore,A)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((A,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then(()=>(_a(r,i),Ba(r.localStore,i,!0))),Ca(r.remoteStore,i)}),await s,await AC(r,n),function(i){const a=_e(i);a.Na.forEach((o,c)=>{Ca(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Ht(Ue.comparator)}(r),r.Qa=!1,await t0(r.remoteStore,!1)}}async function AC(t,e,r){const n=_e(t),s=[],A=[];for(const i of e){let a;const o=n.Ma.get(i);if(o&&o.length!==0){a=await va(n.localStore,Jr(o[0]));for(const c of o){const d=n.Fa.get(c),h=await TP(n,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await tT(n.localStore,i);a=await va(n.localStore,c),await uy(n,yT(c),i,!1,a.resumeToken)}s.push(a)}return n.Ca.d_(A),s}function yT(t){return n1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function kP(t){return function(r){return _e(_e(r).persistence).Qi()}(_e(t).localStore)}async function QP(t,e,r,n){const s=_e(t);if(s.Qa)return void ie("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(r){case"current":case"not-current":{const i=await rT(s.localStore,o1(A[0])),a=iu.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Ar.EMPTY_BYTE_STRING);await qs(s,i,a);break}case"rejected":await Ba(s.localStore,e,!0),_a(s,e,n);break;default:Pe()}}async function NP(t,e,r){const n=zf(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){ie("SyncEngine","Adding an already active target "+s);continue}const A=await tT(n.localStore,s),i=await va(n.localStore,A);await uy(n,yT(A),i.targetId,!1,i.resumeToken),Gf(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await Ba(n.localStore,s,!1).then(()=>{Ca(n.remoteStore,s),_a(n,s)}).catch(ni)}}function zf(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vP.bind(null,e),e.Ca.d_=lP.bind(null,e.eventManager),e.Ca.$a=cP.bind(null,e.eventManager),e}function gy(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CP.bind(null,e),e}function RP(t,e,r){const n=_e(t);(async function(A,i,a){try{const o=await i.getMetadata();if(await function(m,y){const C=_e(m),I=hr(y.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",B=>C.Gr.getBundleMetadata(B,y.id)).then(B=>!!B&&B.createTime.compareTo(I)>=0)}(A.localStore,o))return await i.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(dT(o));const c=new dP(o,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&a._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await qs(A,h.Ia,void 0),await function(m,y){const C=_e(m);return C.persistence.runTransaction("Save bundle","readwrite",I=>C.Gr.saveBundleMetadata(I,y))}(A.localStore,o),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(o){return In("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class qA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=au(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return X1(this.persistence,new J1,e.initialUser,this.serializer)}Ga(e){return new Xw(Kf.Zr,this.serializer)}Wa(e){return new sT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qA.provider={build:()=>new qA};class DP extends qA{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Oe(this.persistence.referenceDelegate instanceof Vh);const n=this.persistence.referenceDelegate.garbageCollector;return new G1(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new Xw(n=>Vh.Zr(n,r),this.serializer)}}class py extends qA{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await gy(this.Ja.syncEngine),await Ma(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return X1(this.persistence,new J1,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new G1(n,e.asyncQueue,r)}Ha(e,r){const n=new n4(r,this.persistence);return new r4(e.asyncQueue,n)}Ga(e){const r=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new Yw(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,AT(),Wd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new sT}}class xT extends py{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof ap&&(this.sharedClientState.syncEngine={no:SP.bind(null,r),ro:QP.bind(null,r),io:NP.bind(null,r),Qi:kP.bind(null,r),eo:FP.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await UP(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=AT();if(!ap.D(r))throw new Ae(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ap(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class JA{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>sC(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=IP.bind(null,this.syncEngine),await t0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aP}()}createDatastore(e){const r=au(e.databaseInfo.databaseId),n=function(A){return new GD(A)}(e.databaseInfo);return function(A,i,a,o){return new WD(A,i,a,o)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,A,i,a){return new JD(n,s,A,i,a)}(this.localStore,this.datastore,e.asyncQueue,r=>sC(this.syncEngine,r,0),function(){return YB.D()?new YB:new HD}())}createSyncEngine(e,r){return function(s,A,i,a,o,c,d){const h=new gP(s,A,i,a,o,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const A=_e(s);ie("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await ja(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}JA.provider={build:()=>new JA};function iC(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Fr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new uP(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ae(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,A){const i=_e(s),a={documents:A.map(h=>Pc(i.serializer,h))},o=await i.Lo("BatchGetDocuments",i.serializer.databaseId,yt.emptyPath(),a,A.length),c=new Map;o.forEach(h=>{const f=tD(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());Oe(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new La(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=Ue.fromPath(n);this.mutations.push(new Ow(s,this.precondition(s)))}),await async function(n,s){const A=_e(n),i={writes:s.map(a=>Lc(A.serializer,a))};await A.Mo("Commit",A.serializer.databaseId,yt.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Pe();r=Xe.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Ae(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Xe.min())?Yt.exists(!1):Yt.updateTime(r):Yt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Xe.min()))throw new Ae(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(r)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,r,n,s,A){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=A,this._u=n.maxAttempts,this.t_=new ry(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new LP(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!tu(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!v1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,r,n,s,A){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Er.UNAUTHENTICATED,this.clientId=Qw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(n,async i=>{ie("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ie("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Ha(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function cp(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await Y1(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function oC(t,e){t.asyncQueue.verifyOperationInProgress();const r=await my(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>ZB(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>ZB(e.remoteStore,s)),t._onlineComponents=e}async function my(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await cp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;In("Error using user provided cache. Falling back to memory cache: "+r),await cp(t,new qA)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await cp(t,new qA);return t._offlineComponents}async function Wf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await oC(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await oC(t,new JA))),t._onlineComponents}function vT(t){return my(t).then(e=>e.persistence)}function Va(t){return my(t).then(e=>e.localStore)}function BT(t){return Wf(t).then(e=>e.remoteStore)}function wy(t){return Wf(t).then(e=>e.syncEngine)}function CT(t){return Wf(t).then(e=>e.datastore)}async function Ia(t){const e=await Wf(t),r=e.eventManager;return r.onListen=pP.bind(null,e.syncEngine),r.onUnlisten=wP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=mP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=yP.bind(null,e.syncEngine),r}function OP(t){return t.asyncQueue.enqueue(async()=>{const e=await vT(t),r=await BT(t);return e.setNetworkEnabled(!0),function(s){const A=_e(s);return A.L_.delete(0),lu(A)}(r)})}function HP(t){return t.asyncQueue.enqueue(async()=>{const e=await vT(t),r=await BT(t);return e.setNetworkEnabled(!1),async function(s){const A=_e(s);A.L_.add(0),await ja(A),A.q_.set("Offline")}(r)})}function VP(t,e){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await function(c,d){const h=_e(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new Ae(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=Ha(a,`Failed to get document '${A} from cache`);i.reject(o)}}(await Va(t),e,r)),r.promise}function bT(t,e,r={}){const n=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,o,c){const d=new $f({next:f=>{d.Za(),i.enqueueAndForget(()=>ay(A,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new Ae(K.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&o&&o.source==="server"?c.reject(new Ae(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new cy(Da(a.path),d,{includeMetadataChanges:!0,_a:!0});return oy(A,h)}(await Ia(t),t.asyncQueue,e,r,n)),n.promise}function KP(t,e){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await Kh(s,A,!0),o=new gT(A,a.Ts),c=o.ma(a.documents),d=o.applyChanges(c,!1);i.resolve(d.snapshot)}catch(a){const o=Ha(a,`Failed to execute query '${A} against cache`);i.reject(o)}}(await Va(t),e,r)),r.promise}function _T(t,e,r={}){const n=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,o,c){const d=new $f({next:f=>{d.Za(),i.enqueueAndForget(()=>ay(A,h)),f.fromCache&&o.source==="server"?c.reject(new Ae(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new cy(a,d,{includeMetadataChanges:!0,_a:!0});return oy(A,h)}(await Ia(t),t.asyncQueue,e,r,n)),n.promise}function GP(t,e,r){const n=new Fr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await CT(t);n.resolve(async function(i,a,o){var c;const d=_e(i),{request:h,ut:f,parent:m}=Q1(d.serializer,s1(a),o);d.connection.Fo||delete h.parent;const y=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(I=>!!I.result);Oe(y.length===1);const C=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(C).reduce((I,B)=>(I[f[B]]=C[B],I),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function zP(t,e){const r=new $f(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){_e(s).Y_.add(A),A.next()}(await Ia(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){_e(s).Y_.delete(A)}(await Ia(t),r))}}function $P(t,e,r,n){const s=function(i,a){let o;return o=typeof i=="string"?C1().encode(i):i,function(d,h){return new PP(d,h)}(function(d,h){if(d instanceof Uint8Array)return iC(d,h);if(d instanceof ArrayBuffer)return iC(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(r,au(e));t.asyncQueue.enqueueAndForget(async()=>{RP(await wy(t),s,n)})}function WP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const A=_e(n);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await Va(t),e))}function qP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const A=_e(n),i=A.indexManager,a=[];return A.persistence.runTransaction("Configure indexes","readwrite",o=>i.getFieldIndexes(o).next(c=>function(h,f,m,y,C){h=[...h],f=[...f],h.sort(m),f.sort(m);const I=h.length,B=f.length;let w=0,b=0;for(;w<B&&b<I;){const F=m(h[b],f[w]);F<0?C(h[b++]):F>0?y(f[w++]):(w++,b++)}for(;w<B;)y(f[w++]);for(;b<I;)C(h[b++])}(c,s,YR,d=>{a.push(i.addFieldIndex(o,d))},d=>{a.push(i.deleteFieldIndex(o,d))})).next(()=>M.waitFor(a)))}(await Va(t),e))}function JP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){_e(n).ss.zi=s}(await Va(t),e))}function XP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=_e(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",A=>s.deleteAllFieldIndexes(A))}(await Va(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e,r){if(!r)throw new Ae(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ET(t,e,r,n){if(e===!0&&n===!0)throw new Ae(K.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function lC(t){if(!Ue.isDocumentKey(t))throw new Ae(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cC(t){if(Ue.isDocumentKey(t))throw new Ae(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function ft(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qf(t);throw new Ae(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function TT(t,e){if(e<=0)throw new Ae(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ET("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new Ae(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new Ae(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new Ae(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new UE;switch(n.type){case"firstParty":return new $R(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ae(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=aC.get(r);n&&(ie("ComponentProvider","Removing Datastore"),aC.delete(r),n.terminate())}(this),Promise.resolve()}}function FT(t,e,r,n={}){var s;const A=(t=ft(t,cu))._getSettings(),i=`${e}:${r}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),n.mockUserToken){let a,o;if(typeof n.mockUserToken=="string")a=n.mockUserToken,o=Er.MOCK_USER;else{a=pN(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Ae(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new Er(c)}t._authCredentials=new KR(new SE(a,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Sr(this.firestore,e,this._query)}}class ar{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class qn extends Sr{constructor(e,r,n){super(e,r,Da(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Ue(e))}withConverter(e){return new qn(this.firestore,e,this._path)}}function s0(t,e,...r){if(t=Pt(t),yy("collection","path",e),t instanceof cu){const n=yt.fromString(e,...r);return cC(n),new qn(t,null,n)}{if(!(t instanceof ar||t instanceof qn))throw new Ae(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yt.fromString(e,...r));return cC(n),new qn(t.firestore,null,n)}}function YP(t,e){if(t=ft(t,cu),yy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Sr(t,null,function(n){return new zs(yt.emptyPath(),n)}(e))}function ns(t,e,...r){if(t=Pt(t),arguments.length===1&&(e=Qw.newId()),yy("doc","path",e),t instanceof cu){const n=yt.fromString(e,...r);return lC(n),new ar(t,null,new Ue(n))}{if(!(t instanceof ar||t instanceof qn))throw new Ae(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yt.fromString(e,...r));return lC(n),new ar(t.firestore,t instanceof qn?t.converter:null,new Ue(n))}}function ZP(t,e){return t=Pt(t),e=Pt(e),(t instanceof ar||t instanceof qn)&&(e instanceof ar||e instanceof qn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function xy(t,e){return t=Pt(t),e=Pt(e),t instanceof Sr&&e instanceof Sr&&t.firestore===e.firestore&&nu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ry(this,"async_queue_retry"),this.Vu=()=>{const n=Wd();n&&ie("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Wd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Wd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!si(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(n);throw dr("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=iy.createAndSchedule(this,e,r,n,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function A0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const A of n)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class ST{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=-1;class Nt extends cu{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new dC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dC(e),this._firestoreClient=void 0,await e}}}function tL(t,e,r){r||(r="(default)");const n=eu(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),A=n.getOptions(r);if(HA(A,e))return s;throw new Ae(K.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ae(K.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function UT(t,e){const r=typeof t=="object"?t:Uw(),n=typeof t=="string"?t:e||"(default)",s=eu(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const A=fN("firestore");A&&FT(s,...A)}return s}function er(t){if(t._terminated)throw new Ae(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kT(t),t._firestoreClient}function kT(t){var e,r,n;const s=t._freezeSettings(),A=function(a,o,c,d){return new _4(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,IT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new MP(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}function rL(t,e){In("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return QT(t,JA.provider,{build:n=>new py(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function nL(t){In("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();QT(t,JA.provider,{build:r=>new xT(r,e.cacheSizeBytes)})}function QT(t,e,r){if((t=ft(t,Nt))._firestoreClient||t._terminated)throw new Ae(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ae(K.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},kT(t)}function sL(t){if(t._initialized&&!t._terminated)throw new Ae(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!ls.D())return Promise.resolve();const s=n+"main";await ls.delete(s)}(Zw(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function AL(t){return function(r){const n=new Fr;return r.asyncQueue.enqueueAndForget(async()=>bP(await wy(r),n)),n.promise}(er(t=ft(t,Nt)))}function iL(t){return OP(er(t=ft(t,Nt)))}function oL(t){return HP(er(t=ft(t,Nt)))}function aL(t){return ER(t.app,"firestore",t._databaseId.database),t._delete()}function lL(t,e){const r=er(t=ft(t,Nt)),n=new ST;return $P(r,t._databaseId,e,n),n}function cL(t,e){return WP(er(t=ft(t,Nt)),e).then(r=>r?new Sr(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class NT{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new XA(Ar.fromBase64String(e))}catch(r){throw new Ae(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new XA(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ae(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function uL(){return new oi("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ae(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ae(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let A=0;A<n.length;++A)if(n[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=/^__.*__$/;class hL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,r,this.fieldTransforms):new Pa(e,this.data,r,this.fieldTransforms)}}class RT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ws(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function DT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Xf{constructor(e,r,n,s,A,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DT(this.Cu)&&dL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||au(e)}Qu(e,r,n,s=!1){return new Xf({Cu:e,methodName:r,qu:n,path:zt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function no(t){const e=t._freezeSettings(),r=au(t._databaseId);return new fL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Yf(t,e,r,n,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,r,s);Ey("Data must be an object, but it was:",i,n);const a=jT(n,i);let o,c;if(A.merge)o=new hn(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=jc(e,h,r);if(!i.contains(f))throw new Ae(K.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);OT(d,f)||d.push(f)}o=new hn(d),c=i.fieldTransforms.filter(h=>o.covers(h.field))}else o=null,c=i.fieldTransforms;return new hL(new Rr(a),o,c)}class du extends ai{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof du}}function PT(t,e,r){return new Xf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vy extends ai{_toFieldTransform(e){return new Au(e.path,new wa)}isEqual(e){return e instanceof vy}}class By extends ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=PT(this,e,!0),n=this.Ku.map(A=>so(A,r)),s=new Gi(n);return new Au(e.path,s)}isEqual(e){return e instanceof By&&HA(this.Ku,e.Ku)}}class Cy extends ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=PT(this,e,!0),n=this.Ku.map(A=>so(A,r)),s=new zi(n);return new Au(e.path,s)}isEqual(e){return e instanceof Cy&&HA(this.Ku,e.Ku)}}class by extends ai{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new ya(e.serializer,h1(e.serializer,this.$u));return new Au(e.path,r)}isEqual(e){return e instanceof by&&this.$u===e.$u}}function _y(t,e,r,n){const s=t.Qu(1,e,r);Ey("Data must be an object, but it was:",s,n);const A=[],i=Rr.empty();Ai(n,(o,c)=>{const d=Zf(e,o,r);c=Pt(c);const h=s.Nu(d);if(c instanceof du)A.push(d);else{const f=so(c,h);f!=null&&(A.push(d),i.set(d,f))}});const a=new hn(A);return new RT(i,a,s.fieldTransforms)}function Iy(t,e,r,n,s,A){const i=t.Qu(1,e,r),a=[jc(e,n,r)],o=[s];if(A.length%2!=0)throw new Ae(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)a.push(jc(e,A[f])),o.push(A[f+1]);const c=[],d=Rr.empty();for(let f=a.length-1;f>=0;--f)if(!OT(c,a[f])){const m=a[f];let y=o[f];y=Pt(y);const C=i.Nu(m);if(y instanceof du)c.push(m);else{const I=so(y,C);I!=null&&(c.push(m),d.set(m,I))}}const h=new hn(c);return new RT(d,h,i.fieldTransforms)}function LT(t,e,r,n=!1){return so(r,t.Qu(n?4:3,e))}function so(t,e){if(MT(t=Pt(t)))return Ey("Unsupported field value:",e,t),jT(t,e);if(t instanceof ai)return function(n,s){if(!DT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const A=n._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const A=[];let i=0;for(const a of n){let o=so(a,s.Lu(i));o==null&&(o={nullValue:"NULL_VALUE"}),A.push(o),i++}return{arrayValue:{values:A}}}(t,e)}return function(n,s){if((n=Pt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return h1(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const A=Zt.fromDate(n);return{timestampValue:xa(s.serializer,A)}}if(n instanceof Zt){const A=new Zt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xa(s.serializer,A)}}if(n instanceof Jf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof XA)return{bytesValue:I1(s.serializer,n._byteString)};if(n instanceof ar){const A=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:zw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof uu)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(o=>{if(typeof o!="number")throw a.Bu("VectorValues must only contain numeric values.");return Mw(a.serializer,o)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${qf(n)}`)}(t,e)}function jT(t,e){const r={};return GE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,(n,s)=>{const A=so(s,e.Mu(n));A!=null&&(r[n]=A)}),{mapValue:{fields:r}}}function MT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zt||t instanceof Jf||t instanceof XA||t instanceof ar||t instanceof ai||t instanceof uu)}function Ey(t,e,r){if(!MT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=qf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function jc(t,e,r){if((e=Pt(e))instanceof oi)return e._internalPath;if(typeof e=="string")return Zf(t,e);throw Wh("Field path arguments must be of type string or ",t,!1,void 0,r)}const gL=new RegExp("[~\\*/\\[\\]]");function Zf(t,e,r){if(e.search(gL)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new oi(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Wh(t,e,r,n,s){const A=n&&!n.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(A||i)&&(o+=" (found",A&&(o+=` in field ${n}`),i&&(o+=` in document ${s}`),o+=")"),new Ae(K.INVALID_ARGUMENT,a+t+o)}function OT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,r,n,s,A){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class pL extends Mc{data(){return super.data()}}function eg(t,e){return typeof e=="string"?Zf(t,e):e instanceof oi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}class Ka extends Ty{}function i0(t,e,...r){let n=[];e instanceof Ty&&n.push(e),n=n.concat(r),function(A){const i=A.filter(o=>o instanceof Ao).length,a=A.filter(o=>o instanceof Ga).length;if(i>1||i>0&&a>0)throw new Ae(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Ga extends Ka{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Ga(e,r,n)}_apply(e){const r=this._parse(e);return KT(e._query,r),new Sr(e.firestore,e.converter,zm(e._query,r))}_parse(e){const r=no(e.firestore);return function(A,i,a,o,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ae(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){fC(h,d);const m=[];for(const y of h)m.push(hC(o,A,y));f={arrayValue:{values:m}}}else f=hC(o,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||fC(h,d),f=LT(a,i,h,d==="in"||d==="not-in");return xt.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function mL(t,e,r){const n=e,s=eg("where",t);return Ga._create(s,n,r)}class Ao extends Ty{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Ao(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ft.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,A){let i=s;const a=A.getFlattenedFilters();for(const o of a)KT(i,o),i=zm(i,o)}(e._query,r),new Sr(e.firestore,e.converter,zm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function wL(...t){return t.forEach(e=>GT("or",e)),Ao._create("or",t)}function yL(...t){return t.forEach(e=>GT("and",e)),Ao._create("and",t)}class tg extends Ka{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new tg(e,r)}_apply(e){const r=function(s,A,i){if(s.startAt!==null)throw new Ae(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ae(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dc(A,i)}(e._query,this._field,this._direction);return new Sr(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new zs(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function xL(t,e="asc"){const r=e,n=eg("orderBy",t);return tg._create(n,r)}class hu extends Ka{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new hu(e,r,n)}_apply(e){return new Sr(e.firestore,e.converter,Lh(e._query,this._limit,this._limitType))}}function vL(t){return TT("limit",t),hu._create("limit",t,"F")}function BL(t){return TT("limitToLast",t),hu._create("limitToLast",t,"L")}class fu extends Ka{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new fu(e,r,n)}_apply(e){const r=VT(e,this.type,this._docOrFields,this._inclusive);return new Sr(e.firestore,e.converter,function(s,A){return new zs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,r))}}function CL(...t){return fu._create("startAt",t,!0)}function bL(...t){return fu._create("startAfter",t,!1)}class gu extends Ka{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new gu(e,r,n)}_apply(e){const r=VT(e,this.type,this._docOrFields,this._inclusive);return new Sr(e.firestore,e.converter,function(s,A){return new zs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,r))}}function _L(...t){return gu._create("endBefore",t,!1)}function IL(...t){return gu._create("endAt",t,!0)}function VT(t,e,r,n){if(r[0]=Pt(r[0]),r[0]instanceof Mc)return function(A,i,a,o,c){if(!o)throw new Ae(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Yo(A))if(h.field.isKeyField())d.push(Vi(i,o.key));else{const f=o.data.field(h.field);if(Df(f))throw new Ae(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new Ae(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new $A(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=no(t.firestore);return function(i,a,o,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new Ae(K.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<d.length;y++){const C=d[y];if(f[y].field.isKeyField()){if(typeof C!="string")throw new Ae(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof C}`);if(!Lw(i)&&C.indexOf("/")!==-1)throw new Ae(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${C}' contains a slash.`);const I=i.path.child(yt.fromString(C));if(!Ue.isDocumentKey(I))throw new Ae(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const B=new Ue(I);m.push(Vi(a,B))}else{const I=LT(o,c,C);m.push(I)}}return new $A(m,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function hC(t,e,r){if(typeof(r=Pt(r))=="string"){if(r==="")throw new Ae(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lw(e)&&r.indexOf("/")!==-1)throw new Ae(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(yt.fromString(r));if(!Ue.isDocumentKey(n))throw new Ae(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Vi(t,new Ue(n))}if(r instanceof ar)return Vi(t,r._key);throw new Ae(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(r)}.`)}function fC(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KT(t,e){const r=function(s,A){for(const i of s)for(const a of i.getFlattenedFilters())if(A.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ae(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function GT(t,e){if(!(e instanceof Ga||e instanceof Ao))throw new Ae(K.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Fy{convertValue(e,r="none"){switch(GA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ai(e,(s,A)=>{n[s]=this.convertValue(A,r)}),n}convertVectorValue(e){var r,n,s;const A=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>Jt(i.doubleValue));return new uu(A)}convertGeoPoint(e){return new Jf(Jt(e.latitude),Jt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Pf(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const r=Ls(e);return new Zt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=yt.fromString(e);Oe(P1(n));const s=new KA(n.get(1),n.get(3)),A=new Ue(n.popFirst(5));return s.isEqual(r)||dr(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class EL extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new XA(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){return new Ea("sum",jc("sum",t))}function FL(t){return new Ea("avg",jc("average",t))}function zT(){return new Ea("count")}function SL(t,e){var r,n;return t instanceof Ea&&e instanceof Ea&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function UL(t,e){return xy(t.query,e.query)&&HA(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ji extends Mc{constructor(e,r,n,s,A,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class nc extends Ji{data(e={}){return super.data(e)}}class Xi{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new vA(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new nc(this._firestore,this._userDataWriter,n.key,n,new vA(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ae(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const o=new nc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new vA(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>A||a.type!==3).map(a=>{const o=new nc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new vA(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:kL(a.type),doc:o,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function kL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}function QL(t,e){return t instanceof Ji&&e instanceof Ji?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xi&&e instanceof Xi&&t._firestore===e._firestore&&xy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){t=ft(t,ar);const e=ft(t.firestore,Nt);return bT(er(e),t._key).then(r=>Sy(e,t,r))}class li extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new XA(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,r)}}function RL(t){t=ft(t,ar);const e=ft(t.firestore,Nt),r=er(e),n=new li(e);return VP(r,t._key).then(s=>new Ji(e,n,t._key,s,new vA(s!==null&&s.hasLocalMutations,!0),t.converter))}function DL(t){t=ft(t,ar);const e=ft(t.firestore,Nt);return bT(er(e),t._key,{source:"server"}).then(r=>Sy(e,t,r))}function $T(t){t=ft(t,Sr);const e=ft(t.firestore,Nt),r=er(e),n=new li(e);return HT(t._query),_T(r,t._query).then(s=>new Xi(e,n,t,s))}function PL(t){t=ft(t,Sr);const e=ft(t.firestore,Nt),r=er(e),n=new li(e);return KP(r,t._query).then(s=>new Xi(e,n,t,s))}function LL(t){t=ft(t,Sr);const e=ft(t.firestore,Nt),r=er(e),n=new li(e);return _T(r,t._query,{source:"server"}).then(s=>new Xi(e,n,t,s))}function qd(t,e,r){t=ft(t,ar);const n=ft(t.firestore,Nt),s=rg(t.converter,e,r);return za(n,[Yf(no(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Yt.none())])}function jL(t,e,r,...n){t=ft(t,ar);const s=ft(t.firestore,Nt),A=no(s);let i;return i=typeof(e=Pt(e))=="string"||e instanceof oi?Iy(A,"updateDoc",t._key,e,r,n):_y(A,"updateDoc",t._key,e),za(s,[i.toMutation(t._key,Yt.exists(!0))])}function WT(t){return za(ft(t.firestore,Nt),[new La(t._key,Yt.none())])}function ML(t,e){const r=ft(t.firestore,Nt),n=ns(t),s=rg(t.converter,e);return za(r,[Yf(no(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Yt.exists(!1))]).then(()=>n)}function Jd(t,...e){var r,n,s;t=Pt(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||A0(e[i])||(A=e[i],i++);const a={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(A0(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let o,c,d;if(t instanceof ar)c=ft(t.firestore,Nt),d=Da(t._key.path),o={next:h=>{e[i]&&e[i](Sy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=ft(t,Sr);c=ft(h.firestore,Nt),d=h._query;const f=new li(c);o={next:m=>{e[i]&&e[i](new Xi(c,f,h,m))},error:e[i+1],complete:e[i+2]},HT(t._query)}return function(f,m,y,C){const I=new $f(C),B=new cy(m,I,y);return f.asyncQueue.enqueueAndForget(async()=>oy(await Ia(f),B)),()=>{I.Za(),f.asyncQueue.enqueueAndForget(async()=>ay(await Ia(f),B))}}(er(c),d,a,o)}function OL(t,e){return zP(er(t=ft(t,Nt)),A0(e)?e:{next:e})}function za(t,e){return function(n,s){const A=new Fr;return n.asyncQueue.enqueueAndForget(async()=>xP(await wy(n),s,A)),A.promise}(er(t),e)}function Sy(t,e,r){const n=r.docs.get(e._key),s=new li(t);return new Ji(t,s,e._key,n,new vA(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t){return qT(t,{count:zT()})}function qT(t,e){const r=ft(t.firestore,Nt),n=er(r),s=KE(e,(A,i)=>new x1(i,A.aggregateType,A._internalFieldPath));return GP(n,t._query,s).then(A=>function(a,o,c){const d=new li(a);return new NT(o,d,c)}(r,t,A))}class VL{constructor(e){this.kind="memory",this._onlineComponentProvider=JA.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=qA.provider}toJSON(){return{kind:this.kind}}}class KL{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=JT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class GL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=qA.provider}toJSON(){return{kind:this.kind}}}class zL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new DP(e)}}toJSON(){return{kind:this.kind}}}function $L(){return new GL}function WL(t){return new zL(t==null?void 0:t.cacheSizeBytes)}function qL(t){return new VL(t)}function JL(t){return new KL(t)}class XL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=JA.provider,this._offlineComponentProvider={build:r=>new py(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class YL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=JA.provider,this._offlineComponentProvider={build:r=>new xT(r,e==null?void 0:e.cacheSizeBytes)}}}function JT(t){return new XL(t==null?void 0:t.forceOwnership)}function ZL(){return new YL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=no(e)}set(e,r,n){this._verifyNotCommitted();const s=dA(e,this._firestore),A=rg(s.converter,r,n),i=Yf(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,Yt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const A=dA(e,this._firestore);let i;return i=typeof(r=Pt(r))=="string"||r instanceof oi?Iy(this._dataReader,"WriteBatch.update",A._key,r,n,s):_y(this._dataReader,"WriteBatch.update",A._key,r),this._mutations.push(i.toMutation(A._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=dA(e,this._firestore);return this._mutations=this._mutations.concat(new La(r._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dA(t,e){if((t=Pt(t)).firestore!==e)throw new Ae(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=no(r)}get(r){const n=dA(r,this._firestore),s=new EL(this._firestore);return this._transaction.lookup([n._key]).then(A=>{if(!A||A.length!==1)return Pe();const i=A[0];if(i.isFoundDocument())return new Mc(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new Mc(this._firestore,s,n._key,null,n.converter);throw Pe()})}set(r,n,s){const A=dA(r,this._firestore),i=rg(A.converter,n,s),a=Yf(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,a),this}update(r,n,s,...A){const i=dA(r,this._firestore);let a;return a=typeof(n=Pt(n))=="string"||n instanceof oi?Iy(this._dataReader,"Transaction.update",i._key,n,s,A):_y(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(r){const n=dA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=dA(e,this._firestore),n=new li(this._firestore);return super.get(e).then(s=>new Ji(this._firestore,n,r._key,s._document,new vA(!1,!1),r.converter))}}function tj(t,e,r){t=ft(t,Nt);const n=Object.assign(Object.assign({},ej),r);return function(A){if(A.maxAttempts<1)throw new Ae(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(A,i,a){const o=new Fr;return A.asyncQueue.enqueueAndForget(async()=>{const c=await CT(A);new jP(A.asyncQueue,c,a,i,o).au()}),o.promise}(er(t),s=>e(new YT(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(){return new du("deleteField")}function nj(){return new vy("serverTimestamp")}function sj(...t){return new By("arrayUnion",t)}function Aj(...t){return new Cy("arrayRemove",t)}function ij(t){return new by("increment",t)}function oj(t){return new uu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){return er(t=ft(t,Nt)),new XT(t,e=>za(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t,e){const r=er(t=ft(t,Nt));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return In("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(A){const i=typeof A=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new Ae(K.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(A):A,a=[];if(Array.isArray(i.indexes))for(const o of i.indexes){const c=gC(o,"collectionGroup"),d=[];if(Array.isArray(o.fields))for(const h of o.fields){const f=Zf("setIndexConfiguration",gC(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Ni(f,2)):h.order==="ASCENDING"?d.push(new Ni(f,0)):h.order==="DESCENDING"&&d.push(new Ni(f,1))}a.push(new fa(fa.UNKNOWN_ID,c,d,ga.empty()))}return a}(e);return qP(r,n)}function gC(t,e){if(typeof t[e]!="string")throw new Ae(K.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function lj(t){var e;t=ft(t,Nt);const r=pC.get(t);if(r)return r;if(((e=er(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new eF(t);return pC.set(t,n),n}function cj(t){tF(t,!0)}function uj(t){tF(t,!1)}function dj(t){XP(er(t._firestore)).then(e=>ie("deleting all persistent cache indexes succeeded")).catch(e=>In("deleting all persistent cache indexes failed",e))}function tF(t,e){JP(er(t._firestore),e).then(r=>ie(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>In(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const pC=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){var e;const r=(e=er(ft(t.firestore,Nt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Of(r,Jr(t._query))._t}function fj(t,e){var r;const n=KE(e,(A,i)=>new x1(i,A.aggregateType,A._internalFieldPath)),s=(r=er(ft(t.firestore,Nt))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:Q1(s,s1(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Uy.instance.onExistenceFilterMismatch(e)}}class Uy{constructor(){this.Uu=new Map}static get instance(){return td||(td=new Uy,function(r){if(jh)throw new Error("a TestingHooksSpi instance is already set");jh=r}(td)),td}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let td=null;(function(e,r=!0){(function(s){Ra=s})(Na),da(new Hi("firestore",(n,{instanceIdentifier:s,options:A})=>{const i=n.getProvider("app").getImmediate(),a=new Nt(new GR(n.getProvider("auth-internal")),new WR(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ae(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new KA(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:r},A),a._setSettings(A),a},"PUBLIC").setMultipleInstances(!0)),DA(AB,"4.7.3",e),DA(AB,"4.7.3","esm2017")})();const pj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Fy,AggregateField:Ea,AggregateQuerySnapshot:NT,Bytes:XA,CACHE_SIZE_UNLIMITED:eL,CollectionReference:qn,DocumentReference:ar,DocumentSnapshot:Ji,FieldPath:oi,FieldValue:ai,Firestore:Nt,FirestoreError:Ae,GeoPoint:Jf,LoadBundleTask:ST,PersistentCacheIndexManager:eF,Query:Sr,QueryCompositeFilterConstraint:Ao,QueryConstraint:Ka,QueryDocumentSnapshot:nc,QueryEndAtConstraint:gu,QueryFieldFilterConstraint:Ga,QueryLimitConstraint:hu,QueryOrderByConstraint:tg,QuerySnapshot:Xi,QueryStartAtConstraint:fu,SnapshotMetadata:vA,Timestamp:Zt,Transaction:YT,VectorValue:uu,WriteBatch:XT,_AutoId:Qw,_ByteString:Ar,_DatabaseId:KA,_DocumentKey:Ue,_EmptyAppCheckTokenProvider:qR,_EmptyAuthCredentialsProvider:UE,_FieldPath:zt,_TestingHooks:gj,_cast:ft,_debugAssert:VR,_internalAggregationQueryToProtoRunAggregationQueryRequest:fj,_internalQueryToProtoQueryTarget:hj,_isBase64Available:C4,_logWarn:In,_validateIsNotUsedTogether:ET,addDoc:ML,aggregateFieldEqual:SL,aggregateQuerySnapshotEqual:UL,and:yL,arrayRemove:Aj,arrayUnion:sj,average:FL,clearIndexedDbPersistence:sL,collection:s0,collectionGroup:YP,connectFirestoreEmulator:FT,count:zT,deleteAllPersistentCacheIndexes:dj,deleteDoc:WT,deleteField:rj,disableNetwork:oL,disablePersistentCacheIndexAutoCreation:uj,doc:ns,documentId:uL,enableIndexedDbPersistence:rL,enableMultiTabIndexedDbPersistence:nL,enableNetwork:iL,enablePersistentCacheIndexAutoCreation:cj,endAt:IL,endBefore:_L,ensureFirestoreConfigured:er,executeWrite:za,getAggregateFromServer:qT,getCountFromServer:HL,getDoc:NL,getDocFromCache:RL,getDocFromServer:DL,getDocs:$T,getDocsFromCache:PL,getDocsFromServer:LL,getFirestore:UT,getPersistentCacheIndexManager:lj,increment:ij,initializeFirestore:tL,limit:vL,limitToLast:BL,loadBundle:lL,memoryEagerGarbageCollector:$L,memoryLocalCache:qL,memoryLruGarbageCollector:WL,namedQuery:cL,onSnapshot:Jd,onSnapshotsInSync:OL,or:wL,orderBy:xL,persistentLocalCache:JL,persistentMultipleTabManager:ZL,persistentSingleTabManager:JT,query:i0,queryEqual:xy,refEqual:ZP,runTransaction:tj,serverTimestamp:nj,setDoc:qd,setIndexConfiguration:aj,setLogLevel:HR,snapshotEqual:QL,startAfter:bL,startAt:CL,sum:TL,terminate:aL,updateDoc:jL,vector:oj,waitForPendingWrites:AL,where:mL,writeBatch:ZT},Symbol.toStringTag,{value:"Module"}));function ky(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function rF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mj=rF,nF=new Yc("auth","Firebase",rF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Fw("@firebase/auth");function wj(t,...e){qh.logLevel<=wt.WARN&&qh.warn(`Auth (${Na}): ${t}`,...e)}function Xd(t,...e){qh.logLevel<=wt.ERROR&&qh.error(`Auth (${Na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw Qy(t,...e)}function us(t,...e){return Qy(t,...e)}function sF(t,e,r){const n=Object.assign(Object.assign({},mj()),{[e]:r});return new Yc("auth","Firebase",n).create(e,{appName:t.name})}function PA(t){return sF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qy(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return nF.create(t,...e)}function nt(t,e,...r){if(!t)throw Qy(e,...r)}function Ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xd(e),new Error(e)}function Ms(t,e){t||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yj(){return mC()==="http:"||mC()==="https:"}function mC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yj()||xN()||"connection"in navigator)?navigator.onLine:!0}function vj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ms(r>e,"Short delay should be less than long delay!"),this.isMobile=mN()||vN()}get(){return xj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e){Ms(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new pu(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,r,n,s={}){return iF(t,s,async()=>{let A={},i={};n&&(e==="GET"?i=n:A={body:JSON.stringify(n)});const a=Zc(Object.assign({key:t.config.apiKey},i)).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:o},A);return yN()||(c.referrerPolicy="no-referrer"),AF.fetch()(oF(t,t.config.apiHost,r,a),c)})}async function iF(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Bj),e);try{const s=new _j(t),A=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw rd(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const a=A.ok?i.errorMessage:i.error.message,[o,c]=a.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw rd(t,"credential-already-in-use",i);if(o==="EMAIL_EXISTS")throw rd(t,"email-already-in-use",i);if(o==="USER_DISABLED")throw rd(t,"user-disabled",i);const d=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sF(t,d,c);Xn(t,d)}}catch(s){if(s instanceof Gs)throw s;Xn(t,"network-request-failed",{message:String(s)})}}async function ng(t,e,r,n,s={}){const A=await ci(t,e,r,n,s);return"mfaPendingCredential"in A&&Xn(t,"multi-factor-auth-required",{_serverResponse:A}),A}function oF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Ny(t.config,s):`${t.config.apiScheme}://${s}`}function bj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _j{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(us(this.auth,"network-request-failed")),Cj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rd(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=us(t,e,n);return s.customData._tokenResponse=r,s}function wC(t){return t!==void 0&&t.enterprise!==void 0}class Ij{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return bj(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ej(t,e){return ci(t,"GET","/v2/recaptchaConfig",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function aF(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Fj(t,e=!1){const r=Pt(t),n=await r.getIdToken(e),s=Ry(n);nt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:n,authTime:sc(up(s.auth_time)),issuedAtTime:sc(up(s.iat)),expirationTime:sc(up(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function up(t){return Number(t)*1e3}function Ry(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const s=hE(r);return s?JSON.parse(s):(Xd("Failed to decode base64 JWT payload"),null)}catch(s){return Xd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yC(t){const e=Ry(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Gs&&Sj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Sj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Oc(t,aF(r,{idToken:n}));nt(s==null?void 0:s.users.length,r,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?lF(A.providerUserInfo):[],a=Qj(t.providerData,i),o=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(a!=null&&a.length),d=o?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:a,metadata:new a0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function kj(t){const e=Pt(t);await Jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qj(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function lF(t){return t.map(e=>{var{providerId:r}=e,n=ky(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(t,e){const r=await iF(t,{},async()=>{const n=Zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=oF(t,s,"/v1/token",`key=${A}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",AF.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Rj(t,e){return ci(t,"POST","/v2/accounts:revokeToken",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const r=yC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:A}=await Nj(e,r);this.updateTokensAndExpiration(n,s,Number(A))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:A}=r,i=new ea;return n&&(nt(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(nt(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(nt(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ea,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fs{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,A=ky(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new a0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const r=await Oc(this,this.stsTokenManager.getToken(this.auth,e));return nt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Fj(this,e)}reload(){return kj(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Jh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Is(this.auth.app))return Promise.reject(PA(this.auth));const e=await this.getIdToken();return await Oc(this,Tj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,A,i,a,o,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,m=(A=r.phoneNumber)!==null&&A!==void 0?A:void 0,y=(i=r.photoURL)!==null&&i!==void 0?i:void 0,C=(a=r.tenantId)!==null&&a!==void 0?a:void 0,I=(o=r._redirectEventId)!==null&&o!==void 0?o:void 0,B=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:F,isAnonymous:Q,providerData:D,stsTokenManager:x}=r;nt(b&&x,e,"internal-error");const v=ea.fromJSON(this.name,x);nt(typeof b=="string",e,"internal-error"),tA(h,e.name),tA(f,e.name),nt(typeof F=="boolean",e,"internal-error"),nt(typeof Q=="boolean",e,"internal-error"),tA(m,e.name),tA(y,e.name),tA(C,e.name),tA(I,e.name),tA(B,e.name),tA(w,e.name);const _=new Fs({uid:b,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:Q,photoURL:y,phoneNumber:m,tenantId:C,stsTokenManager:v,createdAt:B,lastLoginAt:w});return D&&Array.isArray(D)&&(_.providerData=D.map(S=>Object.assign({},S))),I&&(_._redirectEventId=I),_}static async _fromIdTokenResponse(e,r,n=!1){const s=new ea;s.updateFromServerResponse(r);const A=new Fs({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Jh(A),A}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];nt(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?lF(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),a=new ea;a.updateFromIdToken(n);const o=new Fs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new a0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Map;function Ss(t){Ms(t instanceof Function,"Expected a class definition");let e=xC.get(t);return e?(Ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}cF.type="NONE";const vC=cF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,r){return`firebase:${t}:${e}:${r}`}class ta{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:A}=this.auth;this.fullUserKey=Yd(this.userKey,s.apiKey,A),this.fullPersistenceKey=Yd("persistence",s.apiKey,A),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ta(Ss(vC),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||Ss(vC);const i=Yd(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const d=await c._get(i);if(d){const h=Fs._fromJSON(e,d);c!==A&&(a=h),A=c;break}}catch{}const o=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!o.length?new ta(A,e,n):(A=o[0],a&&await A._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new ta(A,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pF(e))return"Blackberry";if(mF(e))return"Webos";if(dF(e))return"Safari";if((e.includes("chrome/")||hF(e))&&!e.includes("edge/"))return"Chrome";if(gF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function uF(t=vr()){return/firefox\//i.test(t)}function dF(t=vr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hF(t=vr()){return/crios\//i.test(t)}function fF(t=vr()){return/iemobile/i.test(t)}function gF(t=vr()){return/android/i.test(t)}function pF(t=vr()){return/blackberry/i.test(t)}function mF(t=vr()){return/webos/i.test(t)}function Dy(t=vr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Dj(t=vr()){var e;return Dy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Pj(){return BN()&&document.documentMode===10}function wF(t=vr()){return Dy(t)||gF(t)||mF(t)||pF(t)||/windows phone/i.test(t)||fF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e=[]){let r;switch(t){case"Browser":r=BC(vr());break;case"Worker":r=`${BC(vr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Na}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=A=>new Promise((i,a)=>{try{const o=e(A);i(o)}catch(o){a(o)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jj(t,e={}){return ci(t,"GET","/v2/passwordPolicy",io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=6;class Oj{constructor(e){var r,n,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:Mj,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,A,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(r=o.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(n=o.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),o.isValid&&(o.isValid=(s=o.containsLowercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(A=o.containsUppercaseLetter)!==null&&A!==void 0?A:!0),o.isValid&&(o.isValid=(i=o.containsNumericCharacter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(a=o.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),o}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CC(this),this.idTokenSubscription=new CC(this),this.beforeStateQueue=new Lj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ss(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await ta.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await aF(this,{idToken:e}),n=await Fs._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Is(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=s==null?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&(o!=null&&o.user)&&(s=o.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Jh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Is(this.app))return Promise.reject(PA(this));const r=e?Pt(e):null;return r&&nt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Is(this.app)?Promise.reject(PA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Is(this.app)?Promise.reject(PA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jj(this),r=new Oj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Rj(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ss(e)||this._popupRedirectResolver;nt(r,this,"argument-error"),this.redirectPersistenceManager=await ta.create(this,[Ss(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const A=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(a,this,"internal-error"),a.then(()=>{i||A(this.currentUser)}),typeof r=="function"){const o=e.addObserver(r,n,s);return()=>{i=!0,o()}}else{const o=e.addObserver(r);return()=>{i=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&wj(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function $a(t){return Pt(t)}class CC{constructor(e){this.auth=e,this.observer=null,this.addObserver=TN(r=>this.observer=r)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vj(t){sg=t}function xF(t){return sg.loadJS(t)}function Kj(){return sg.recaptchaEnterpriseScript}function Gj(){return sg.gapiScript}function zj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $j="recaptcha-enterprise",Wj="NO_RECAPTCHA";class qj{constructor(e){this.type=$j,this.auth=$a(e)}async verify(e="verify",r=!1){async function n(A){if(!r){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,a)=>{Ej(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Ij(o);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(o=>{a(o)})})}function s(A,i,a){const o=window.grecaptcha;wC(o)?o.enterprise.ready(()=>{o.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(Wj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{n(this.auth).then(a=>{if(!r&&wC(window.grecaptcha))s(a,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let o=Kj();o.length!==0&&(o+=a),xF(o).then(()=>{s(a,A,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function bC(t,e,r,n=!1){const s=new qj(t);let A;try{A=await s.verify(r)}catch{A=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function _C(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await bC(t,e,r,r==="getOobCode");return n(t,A)}else return n(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await bC(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(A)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t,e){const r=eu(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),A=r.getOptions();if(HA(A,e??{}))return s;Xn(s,"already-initialized")}return r.initialize({options:e})}function Xj(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ss);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Yj(t,e,r){const n=$a(t);nt(n._canInitEmulator,n,"emulator-config-failed"),nt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,A=vF(e),{host:i,port:a}=Zj(e),o=a===null?"":`:${a}`;n.config.emulator={url:`${A}//${i}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:a,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),eM()}function vF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Zj(t){const e=vF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const A=s[1];return{host:A,port:IC(n.substr(A.length+1))}}else{const[A,i]=n.split(":");return{host:A,port:IC(i)}}}function IC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eM(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,r){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function tM(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e){return ng(t,"POST","/v1/accounts:signInWithPassword",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e){return ng(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}async function sM(t,e){return ng(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends Py{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Hc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Hc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _C(e,r,"signInWithPassword",rM);case"emailLink":return nM(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _C(e,n,"signUpPassword",tM);case"emailLink":return sM(e,{idToken:r,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t,e){return ng(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="http://localhost";class Yi extends Py{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Xn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,A=ky(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new Yi(n,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return ra(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ra(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ra(e,r)}buildRequest(){const e={requestUri:AM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Zc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oM(t){const e=Fl(Sl(t)).link,r=e?Fl(Sl(e)).deep_link_id:null,n=Fl(Sl(t)).deep_link_id;return(n?Fl(Sl(n)).link:null)||n||r||e||t}class Ly{constructor(e){var r,n,s,A,i,a;const o=Fl(Sl(e)),c=(r=o.apiKey)!==null&&r!==void 0?r:null,d=(n=o.oobCode)!==null&&n!==void 0?n:null,h=iM((s=o.mode)!==null&&s!==void 0?s:null);nt(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=o.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=o.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=o.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=oM(e);try{return new Ly(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,r){return Hc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Ly.parseLink(r);return nt(n,"argument-error"),Hc._fromEmailAndCode(e,n.code,n.tenantId)}}Wa.PROVIDER_ID="password";Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends BF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA extends mu{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:hA.PROVIDER_ID,signInMethod:hA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hA.credentialFromTaggedObject(e)}static credentialFromError(e){return hA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hA.credential(e.oauthAccessToken)}catch{return null}}}hA.FACEBOOK_SIGN_IN_METHOD="facebook.com";hA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Yi._fromParams({providerId:fA.PROVIDER_ID,signInMethod:fA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return fA.credentialFromTaggedObject(e)}static credentialFromError(e){return fA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return fA.credential(r,n)}catch{return null}}}fA.GOOGLE_SIGN_IN_METHOD="google.com";fA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA extends mu{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:gA.PROVIDER_ID,signInMethod:gA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gA.credentialFromTaggedObject(e)}static credentialFromError(e){return gA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gA.credential(e.oauthAccessToken)}catch{return null}}}gA.GITHUB_SIGN_IN_METHOD="github.com";gA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends mu{constructor(){super("twitter.com")}static credential(e,r){return Yi._fromParams({providerId:pA.PROVIDER_ID,signInMethod:pA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return pA.credentialFromTaggedObject(e)}static credentialFromError(e){return pA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return pA.credential(r,n)}catch{return null}}}pA.TWITTER_SIGN_IN_METHOD="twitter.com";pA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const A=await Fs._fromIdTokenResponse(e,n,s),i=EC(n);return new Ta({user:A,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=EC(n);return new Ta({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function EC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Gs{constructor(e,r,n,s){var A;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Xh(e,r,n,s)}}function CF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(t,A,e,n):A})}async function aM(t,e,r=!1){const n=await Oc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ta._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e,r=!1){const{auth:n}=t;if(Is(n.app))return Promise.reject(PA(n));const s="reauthenticate";try{const A=await Oc(t,CF(n,s,e,t),r);nt(A.idToken,n,"internal-error");const i=Ry(A.idToken);nt(i,n,"internal-error");const{sub:a}=i;return nt(t.uid===a,n,"user-mismatch"),Ta._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&Xn(n,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e,r=!1){if(Is(t.app))return Promise.reject(PA(t));const n="signIn",s=await CF(t,n,e),A=await Ta._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(A.user),A}async function cM(t,e){return bF($a(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(t){const e=$a(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function dM(t,e,r){return Is(t.app)?Promise.reject(PA(t)):cM(Pt(t),Wa.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&uM(t),n})}function hM(t,e,r,n){return Pt(t).onIdTokenChanged(e,r,n)}function fM(t,e,r){return Pt(t).beforeAuthStateChanged(e,r)}function gM(t,e,r,n){return Pt(t).onAuthStateChanged(e,r,n)}function TC(t){return Pt(t).signOut()}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=1e3,mM=10;class IF extends _F{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,o)=>{this.notifyListeners(i,o)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},A=this.storage.getItem(n);Pj()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,mM):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}IF.type="LOCAL";const wM=IF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF extends _F{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}EF.type="SESSION";const TF=EF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Ag(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:A}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(i).map(async c=>c(r.origin,A)),o=await yM(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:o})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ag.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((a,o)=>{const c=jy("",20);s.port1.start();const d=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),a(f.data.response);break;default:clearTimeout(d),clearTimeout(A),o(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return window}function vM(t){ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(){return typeof ds().WorkerGlobalScope<"u"&&typeof ds().importScripts=="function"}async function BM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bM(){return FF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="firebaseLocalStorageDb",_M=1,Zh="firebaseLocalStorage",UF="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ig(t,e){return t.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function IM(){const t=indexedDB.deleteDatabase(SF);return new wu(t).toPromise()}function l0(){const t=indexedDB.open(SF,_M);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Zh,{keyPath:UF})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Zh)?e(n):(n.close(),await IM(),e(await l0()))})})}async function FC(t,e,r){const n=ig(t,!0).put({[UF]:e,value:r});return new wu(n).toPromise()}async function EM(t,e){const r=ig(t,!1).get(e),n=await new wu(r).toPromise();return n===void 0?null:n.value}function SC(t,e){const r=ig(t,!0).delete(e);return new wu(r).toPromise()}const TM=800,FM=3;class kF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>FM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ag._getInstance(bM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await BM(),!this.activeServiceWorker)return;this.sender=new xM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l0();return await FC(e,Yh,"1"),await SC(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>FC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>EM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>SC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=ig(s,!1).getAll();return new wu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kF.type="LOCAL";const SM=kF;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t,e){return e?Ss(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends Py{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ra(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ra(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function kM(t){return bF(t.auth,new My(t),t.bypassAuthState)}function QM(t){const{auth:e,user:r}=t;return nt(r,e,"internal-error"),lM(r,new My(t),t.bypassAuthState)}async function NM(t){const{auth:e,user:r}=t;return nt(r,e,"internal-error"),aM(r,new My(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e,r,n,s,A=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:A,error:i,type:a}=e;if(i){this.reject(i);return}const o={auth:this.auth,requestUri:r,sessionId:n,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kM;case"linkViaPopup":case"linkViaRedirect":return NM;case"reauthViaPopup":case"reauthViaRedirect":return QM;default:Xn(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=new pu(2e3,1e4);class Vo extends QF{constructor(e,r,n,s,A){super(e,r,s,A),this.provider=n,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=jy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RM.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="pendingRedirect",Zd=new Map;class PM extends QF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const n=await LM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LM(t,e){const r=OM(e),n=MM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function jM(t,e){Zd.set(t._key(),e)}function MM(t){return Ss(t._redirectPersistence)}function OM(t){return Yd(DM,t.config.apiKey,t.name)}async function HM(t,e,r=!1){if(Is(t.app))return Promise.reject(PA(t));const n=$a(t),s=UM(n,e),i=await new PM(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=10*60*1e3;class KM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!NF(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(us(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VM&&this.cachedEventUids.clear(),this.cachedEventUids.has(UC(e))}saveEventToCache(e){this.cachedEventUids.add(UC(e)),this.lastProcessedEventTime=Date.now()}}function UC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WM=/^https?/;async function qM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zM(t);for(const r of e)try{if(JM(r))return}catch{}Xn(t,"unauthorized-domain")}function JM(t){const e=o0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!WM.test(r))return!1;if($M.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new pu(3e4,6e4);function kC(){const t=ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function YM(t){return new Promise((e,r)=>{var n,s,A;function i(){kC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kC(),r(us(t,"network-request-failed"))},timeout:XM.get()})}if(!((s=(n=ds().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=ds().gapi)===null||A===void 0)&&A.load)i();else{const a=zj("iframefcb");return ds()[a]=()=>{gapi.load?i():r(us(t,"network-request-failed"))},xF(`${Gj()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw eh=null,e})}let eh=null;function ZM(t){return eh=eh||YM(t),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=new pu(5e3,15e3),tO="__/auth/iframe",rO="emulator/auth/iframe",nO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AO(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ny(e,rO):`https://${t.config.authDomain}/${tO}`,n={apiKey:e.apiKey,appName:t.name,v:Na},s=sO.get(t.config.apiHost);s&&(n.eid=s);const A=t._getFrameworks();return A.length&&(n.fw=A.join(",")),`${r}?${Zc(n).slice(1)}`}async function iO(t){const e=await ZM(t),r=ds().gapi;return nt(r,t,"internal-error"),e.open({where:document.body,url:AO(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nO,dontclear:!0},n=>new Promise(async(s,A)=>{await n.restyle({setHideOnLeave:!1});const i=us(t,"network-request-failed"),a=ds().setTimeout(()=>{A(i)},eO.get());function o(){ds().clearTimeout(a),s(n)}n.ping(o).then(o,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aO=500,lO=600,cO="_blank",uO="http://localhost";class QC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dO(t,e,r,n=aO,s=lO){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const o=Object.assign(Object.assign({},oO),{width:n.toString(),height:s.toString(),top:A,left:i}),c=vr().toLowerCase();r&&(a=hF(c)?cO:r),uF(c)&&(e=e||uO,o.scrollbars="yes");const d=Object.entries(o).reduce((f,[m,y])=>`${f}${m}=${y},`,"");if(Dj(c)&&a!=="_self")return hO(e||"",a),new QC(null);const h=window.open(e||"",a,d);nt(h,t,"popup-blocked");try{h.focus()}catch{}return new QC(h)}function hO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="__/auth/handler",gO="emulator/auth/handler",pO=encodeURIComponent("fac");async function NC(t,e,r,n,s,A){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Na,eventId:s};if(e instanceof BF){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",EN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof mu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const o=await t._getAppCheckToken(),c=o?`#${pO}=${encodeURIComponent(o)}`:"";return`${mO(t)}?${Zc(a).slice(1)}${c}`}function mO({config:t}){return t.emulator?Ny(t,gO):`https://${t.authDomain}/${fO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="webStorageSupport";class wO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TF,this._completeRedirectFn=HM,this._overrideRedirectResult=jM}async _openPopup(e,r,n,s){var A;Ms((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await NC(e,r,n,o0(),s);return dO(e,i,jy())}async _openRedirect(e,r,n,s){await this._originValidation(e);const A=await NC(e,r,n,o0(),s);return vM(A),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:A}=this.eventManagers[r];return s?Promise.resolve(s):(Ms(A,"If manager is not set, promise should be"),A)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await iO(e),n=new KM(e);return r.register("authEvent",s=>(nt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(dp,{type:dp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[dp];i!==void 0&&r(!!i),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=qM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return wF()||dF()||Dy()}}const yO=wO;var RC="@firebase/auth",DC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BO(t){da(new Hi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;nt(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yF(t)},c=new Hj(n,s,A,o);return Xj(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),da(new Hi("auth-internal",e=>{const r=$a(e.getProvider("auth").getImmediate());return(n=>new xO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),DA(RC,DC,vO(t)),DA(RC,DC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=5*60,bO=pE("authIdTokenMaxAge")||CO;let PC=null;const _O=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>bO)return;const s=r==null?void 0:r.token;PC!==s&&(PC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function IO(t=Uw()){const e=eu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Jj(t,{popupRedirectResolver:yO,persistence:[SM,wM,TF]}),n=pE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const A=new URL(n,location.origin);if(location.origin===A.origin){const i=_O(A.toString());fM(r,i,()=>i(r.currentUser)),hM(r,a=>i(a))}}const s=fE("auth");return s&&Yj(r,`http://${s}`),r}function EO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Vj({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const A=us("internal-error");A.customData=s,r(A)},n.type="text/javascript",n.charset="UTF-8",EO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BO("Browser");const TO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",FO="zameny-b6c3f.firebaseapp.com",SO="zameny-b6c3f",UO="zameny-b6c3f.firebasestorage.app",kO="323355347910",QO="1:323355347910:web:c81f2813dce5ee9373c0c7",RF={apiKey:TO,authDomain:FO,projectId:SO,storageBucket:UO,messagingSenderId:kO,appId:QO};let ef;SR().length?ef=Uw():ef=vE(RF);const Cr=UT(ef),Bn=IO(ef);RF.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Bt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule"},hp=new Map,NO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},Ko=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>Ko(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=Ko(n);s!==void 0&&(e[r]=s)}return e}return t},DF=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!DF(t[s],e[s]))return!1;return!0}return!1};async function RO(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const jt={syncCollection:async(t,e)=>{if(!Cr)return;let r=hp.get(t);r||(r=new Map,hp.set(t,r));const n=new Map;e.forEach(A=>n.set(A.id,Ko(A)));const s=[];if(r.forEach((A,i)=>{n.has(i)||s.push({type:"delete",id:i})}),n.forEach((A,i)=>{const a=r.get(i);(!a||!DF(a,A))&&s.push({type:a?"update":"create",item:A,id:i})}),s.length===0){console.log(`No changes in ${t}`);return}console.log(`Syncing ${t}: ${s.length} operations (${s.filter(A=>A.type==="create").length} create, ${s.filter(A=>A.type==="update").length} update, ${s.filter(A=>A.type==="delete").length} delete)`);try{const A=NO(s,450);for(const i of A){const a=ZT(Cr);i.forEach(o=>{const c=ns(Cr,t,o.id);o.type==="delete"?(a.delete(c),r.delete(o.id)):(o.type==="update"?a.update(c,o.item):a.set(c,o.item),r.set(o.id,o.item))}),await a.commit()}console.log(`Successfully synced ${t}`)}catch(A){throw console.error(`Failed to sync ${t}:`,A),A}},syncCacheWithDatabase:async t=>{if(!Cr)return;const e=i0(s0(Cr,t)),r=await RO(async()=>await $T(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),hp.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)},save:async t=>{if(!Cr){console.error("Database not initialized");return}const e=Bn==null?void 0:Bn.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :   .");return}const r=[];t.teachers&&r.push(jt.syncCollection(Bt.TEACHERS,t.teachers)),t.subjects&&r.push(jt.syncCollection(Bt.SUBJECTS,t.subjects)),t.classes&&r.push(jt.syncCollection(Bt.CLASSES,t.classes)),t.rooms&&r.push(jt.syncCollection(Bt.ROOMS,t.rooms)),t.schedule&&r.push(jt.syncCollection(Bt.SCHEDULE_1,t.schedule)),t.schedule2&&r.push(jt.syncCollection(Bt.SCHEDULE_2,t.schedule2)),t.substitutions&&r.push(jt.syncCollection(Bt.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&r.push(jt.syncCollection(Bt.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&r.push(jt.syncCollection(Bt.DUTY_SCHEDULE,t.dutySchedule)),t.settings&&r.push(qd(ns(Cr,Bt.CONFIG,"settings"),Ko(t.settings))),t.bellSchedule&&r.push(qd(ns(Cr,Bt.CONFIG,"bells"),Ko({items:t.bellSchedule}))),await Promise.all(r),console.log("Data saved successfully to collections")},subscribe:(t,e)=>{if(!Cr)return()=>{};let r={...tn},n=!0,s;const A=()=>{clearTimeout(s),s=setTimeout(async()=>{const o={...r};if(n){n=!1;const c=[jt.syncCacheWithDatabase(Bt.TEACHERS),jt.syncCacheWithDatabase(Bt.SUBJECTS),jt.syncCacheWithDatabase(Bt.CLASSES),jt.syncCacheWithDatabase(Bt.ROOMS),jt.syncCacheWithDatabase(Bt.SCHEDULE_1),jt.syncCacheWithDatabase(Bt.SCHEDULE_2),jt.syncCacheWithDatabase(Bt.SUBSTITUTIONS),jt.syncCacheWithDatabase(Bt.DUTY_ZONES),jt.syncCacheWithDatabase(Bt.DUTY_SCHEDULE)];try{await Promise.all(c),console.log("Initial cache synchronization completed")}catch(d){console.error("Failed to sync initial cache (likely quota exceeded):",d);const h=d;h!=null&&h.message&&h.message.includes("quota")||(h==null?void 0:h.code)==="resource-exhausted"||(h==null?void 0:h.code)==="quota-exceeded"?e(new Error("     .      .")):e(d)}}t(o)},50)},i=[],a=(o,c)=>{const d=i0(s0(Cr,o));return Jd(d,h=>{const f=h.docs.map(m=>m.data());f.sort((m,y)=>{const C=typeof m.order=="number"?m.order:999999,I=typeof y.order=="number"?y.order:999999;return C-I}),r[c]=f,A()},h=>{console.warn(`Error reading ${o}:`,h)})};return i.push(a(Bt.TEACHERS,"teachers")),i.push(a(Bt.SUBJECTS,"subjects")),i.push(a(Bt.CLASSES,"classes")),i.push(a(Bt.ROOMS,"rooms")),i.push(a(Bt.SCHEDULE_1,"schedule")),i.push(a(Bt.SCHEDULE_2,"schedule2")),i.push(a(Bt.SUBSTITUTIONS,"substitutions")),i.push(a(Bt.DUTY_ZONES,"dutyZones")),i.push(a(Bt.DUTY_SCHEDULE,"dutySchedule")),i.push(Jd(ns(Cr,Bt.CONFIG,"settings"),o=>{o.exists()&&(r.settings={...tn.settings,...o.data()},A())})),i.push(Jd(ns(Cr,Bt.CONFIG,"bells"),o=>{if(o.exists()){const c=o.data();r.bellSchedule=c.items||tn.bellSchedule,A()}})),()=>{i.forEach(o=>o()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(A=new Date)=>{const i=A.getFullYear(),a=String(A.getMonth()+1).padStart(2,"0"),o=String(A.getDate()).padStart(2,"0");return`${i}-${a}-${o}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Cr)throw new Error("Database not initialized");const r=Bn==null?void 0:Bn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(A=>({id:A.id,name:A.name,color:A.color,difficulty:A.difficulty,requiredRoomType:A.requiredRoomType,order:A.order})),teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:A.order})),classes:e.classes.map(A=>({id:A.id,name:A.name,shift:A.shift,studentsCount:A.studentsCount,order:A.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=Ko(n);await qd(ns(Cr,Bt.PUBLIC,t),s)},getPublicData:async t=>{if(!Cr)return null;try{const e=await iN(()=>Promise.resolve().then(()=>pj),void 0).then(r=>r.getDoc(ns(Cr,Bt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Cr&&await WT(ns(Cr,Bt.PUBLIC,t))}},PF=T.createContext(void 0),DO="admin@gymnasium22.com",PO="teacher@gymnasium22.com",LO=({children:t})=>{const[e,r]=T.useState(null),[n,s]=T.useState(null),[A,i]=T.useState(!0);T.useEffect(()=>{if(!Bn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=gM(Bn,d=>{r(d),d?d.email===DO?s("admin"):d.email===PO?s("teacher"):(s(null),TC(Bn)):s(null),i(!1)});return()=>c()},[]);const a=async()=>{Bn&&await TC(Bn),s(null)},o=()=>{s("guest"),i(!1)};return l.jsx(PF.Provider,{value:{user:e,role:n,loading:A,logout:a,setGuestRole:o},children:t})},oo=()=>{const t=T.useContext(PF);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},LF=T.createContext(void 0),yl="gym_data_local_backup_v2",xl=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},nd=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},jO=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},wo={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)}},jF=({children:t,initialData:e})=>{const[r,n]=T.useState(tn),[s,A]=T.useState(!0),[i,a]=T.useState(!1),[o,c]=T.useState([]),[d,h]=T.useState(-1),{user:f,role:m,loading:y}=oo();T.useEffect(()=>{if(e){n(e),c([e]),h(0),A(!1);return}if(y)return;let F=null;if(xl()&&(F=jO(yl),F))try{const x=JSON.parse(F);x&&x.teachers&&(n(v=>({...v,...x})),console.log("Loaded from local storage backup"))}catch(x){wo.log("Error parsing local backup",x)}if(!(f||m==="guest")){F||n(tn),A(!1);return}A(!0);let D;try{D=jt.subscribe(x=>{const v={...tn,...x};v.teachers||(v.teachers=[]),v.teachers=v.teachers.map(_=>({telegramChatId:"",..._,shifts:_.shifts||[se.First,se.Second]})),v.schedule||(v.schedule=[]),v.schedule2||(v.schedule2=[]),v.substitutions||(v.substitutions=[]),v.bellSchedule||(v.bellSchedule=Qh),(!v.dutyZones||v.dutyZones.length===0)&&(v.dutyZones=cE),v.dutySchedule||(v.dutySchedule=[]),v.settings?v.settings={...tn.settings,...v.settings}:v.settings=tn.settings,n(v),xl()&&nd(yl,JSON.stringify(v)),c(_=>_.length===0?[v]:_),h(_=>_===-1?0:_),A(!1)},x=>{wo.log("Failed to subscribe to data:",x),A(!1)})}catch(x){wo.log("Failed to initialize subscription:",x),A(!1),D=void 0}return()=>{D&&D()}},[e,f,m,y]);const C=T.useCallback(async(F,Q=!0)=>{const D=!f&&m==="guest";a(!0);try{const x={...r,...F};if(n(x),xl()&&nd(yl,JSON.stringify(x)),!e&&f&&!D?await jt.save(F):D&&console.warn("       ."),Q){const v=o.slice(0,d+1);v.push(x);const _=100,S=20;if(v.length>_){const R=v.length-_,P=Math.min(R,v.length-S);v.splice(0,P);const k=P;h(Math.max(0,d+1-k))}else h(v.length-1);c(v)}}catch(x){wo.firebase(x," ")}finally{a(!1)}},[r,o,d,f,m,e]),I=T.useCallback(async()=>{if(d>0){const F=o[d-1];if(h(d-1),n(F),xl()&&nd(yl,JSON.stringify(F)),!e&&f)try{await jt.save(F)}catch(Q){wo.firebase(Q," ")}}},[o,d,f,e]),B=T.useCallback(async()=>{if(d<o.length-1){const F=o[d+1];if(h(d+1),n(F),xl()&&nd(yl,JSON.stringify(F)),!e&&f)try{await jt.save(F)}catch(Q){wo.firebase(Q," ")}}},[o,d,f,e]),w=T.useCallback(async()=>{await C(tn)},[C]),b=T.useMemo(()=>({data:r,isLoading:s,isSaving:i,saveData:C,resetData:w,undo:I,redo:B,canUndo:d>0,canRedo:d<o.length-1}),[r,s,i,C,w,I,B,d]);return l.jsx(LF.Provider,{value:b,children:t})},og=()=>{const t=T.useContext(LF);if(!t)throw new Error("useFullData must be used within DataProvider");return t},MF=T.createContext(void 0),OF=T.createContext(void 0),HF=({children:t})=>{const{data:e,saveData:r}=og(),n=T.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=T.useCallback(async(i,a)=>{await r(i,a)},[r]),A=T.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return l.jsx(MF.Provider,{value:A,children:t})},VF=({children:t})=>{var f;const{data:e,saveData:r}=og(),s=new Date().getMonth(),A=(f=e.settings)==null?void 0:f.semesterConfig,a=(A?A.secondSemesterMonths.includes(s):s>=0&&s<=4)?e.schedule2||[]:e.schedule||[],o=T.useCallback(async(m,y)=>{m===1?await r({schedule:y}):await r({schedule2:y})},[r]),c=T.useCallback(async(m,y)=>{await r(m,y)},[r]),d=T.useMemo(()=>({schedule:a,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,saveSemesterSchedule:o,saveScheduleData:c}),[a,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,o,c]),h=T.useMemo(()=>({...d,saveScheduleData:c}),[d,c]);return l.jsx(OF.Provider,{value:h,children:t})},fs=()=>{const t=T.useContext(MF);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=og();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||tn.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},ao=()=>{const t=T.useContext(OF);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=og();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},MO={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),l.jsx("path",{d:"m20 16-4-4 4-4"}),l.jsx("path",{d:"m4 8 4 4-4 4"}),l.jsx("path",{d:"m16 4-4 4-4-4"}),l.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})},V=({name:t,size:e=24,className:r="",...n})=>{const s=MO[t];return s?l.jsx(s,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},KF=T.createContext(void 0),OO=({children:t})=>{const[e,r]=T.useState([]),n=A=>{const i=Math.random().toString(36).substr(2,9);r(a=>[...a,{...A,id:i}])},s=A=>{r(i=>i.filter(a=>a.id!==A))};return l.jsxs(KF.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,l.jsx(VO,{toasts:e,onRemoveToast:s})]})},HO=()=>{const t=T.useContext(KF);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},VO=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:l.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&l.jsx("div",{className:"flex justify-end mb-2",children:l.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>l.jsx(KO,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},Ln=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(T.useEffect(()=>{if(!t)return;const A=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:A=>A.target===A.currentTarget&&e(),children:l.jsxs("div",{className:`glass-panel bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx(V,{name:"X",size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),KO=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:A})=>{const[i,a]=T.useState(!0),[o,c]=T.useState(!1),d=T.useRef(null);T.useEffect(()=>(d.current=setTimeout(()=>{h()},s),()=>{d.current&&clearTimeout(d.current)}),[]);const h=()=>{d.current&&(clearTimeout(d.current),d.current=null),c(!0),setTimeout(()=>{a(!1),A(t)},300)};if(!i)return null;const m=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),y=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return l.jsx("div",{className:`max-w-sm w-full animate-slide-in ${o?"animate-fade-out":""}`,children:l.jsx("div",{className:`modern-card border p-4 ${m.bg}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`flex-shrink-0 ${m.icon}`,children:l.jsx(V,{name:y,size:20})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`text-sm font-semibold ${m.title}`,children:r}),n&&l.jsx("p",{className:`text-sm mt-1 ${m.message}`,children:n})]}),l.jsx("button",{onClick:h,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:l.jsx(V,{name:"X",size:16})})]})})})},GO=({x:t,y:e,onClose:r,actions:n})=>{const s=T.useRef(null);if(T.useEffect(()=>{if(t===null||e===null)return;const a=c=>{s.current&&!s.current.contains(c.target)&&r()},o=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",a,!0),document.addEventListener("keydown",o),()=>{window.removeEventListener("click",a,!0),document.removeEventListener("keydown",o)}},[t,e,r]),t===null||e===null)return null;const A=window.innerWidth-t<200?t-200:t,i={top:e,left:A};return l.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:i,children:n.map(a=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),a.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${a.color||"text-slate-700 dark:text-slate-200"}`,children:[a.icon&&l.jsx(V,{name:a.icon,size:16}),a.label]},a.id||a.label))})},zO=()=>{const{bellSchedule:t,isSaving:e}=fs(),[r,n]=T.useState("..."),[s,A]=T.useState(""),[i,a]=T.useState(0),[o,c]=T.useState("bg-slate-500"),[d,h]=T.useState("");return T.useEffect(()=>{const f=()=>{const y=new Date,C=y.getDay(),B=[null,ht.Monday,ht.Tuesday,ht.Wednesday,ht.Thursday,ht.Friday,null][C];if(h(B||""),!B){n(" "),A(" "),c("bg-slate-400"),a(0);return}const w=x=>{const[v,_]=x.split(":").map(Number);return v*60+_},b=y.getHours()*60+y.getMinutes();let F=t.filter(x=>x.day===B);F.length===0&&(F=t.filter(x=>x.day==="default")),F.sort((x,v)=>w(x.start)-w(v.start));let Q=null,D=null;for(let x=0;x<F.length;x++){const v=F[x],_=w(v.start),S=w(v.end);if(b>=_&&b<S){Q={...v,duration:S-_,passed:b-_};break}if(x<F.length-1){const R=F[x+1],P=w(R.start);if(b>=S&&b<P){const k=P-S;if(k>0&&k<60){const me=b-S,Ze=P-b;D={nextLesson:R,duration:k,passed:me,remaining:Ze};break}}}}if(Q){n(`${Q.period} `);const x=Math.max(0,Q.duration-Q.passed);A(`${Q.shift===se.First?"1 ":"2 "}  . ${x} `);const v=Q.duration>0?Q.passed/Q.duration*100:0;a(Math.min(100,Math.max(0,v))),c("bg-indigo-600")}else if(D){n(""),A(` ${D.remaining}  ${D.nextLesson.period} `),c("bg-amber-500");const x=D.duration>0?D.passed/D.duration*100:0;a(Math.min(100,Math.max(0,x)))}else n(" "),A(" "),c("bg-slate-400"),a(0)};f();const m=setInterval(f,6e4);return()=>clearInterval(m)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 glass-panel rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:d}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),l.jsxs("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(V,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),l.jsx(V,{name:e?"Loader":"Clock",size:16,className:e?"text-indigo-600 animate-spin":o==="bg-indigo-600"?"text-indigo-600":o==="bg-amber-500"?"text-amber-500":"text-slate-400"})]})]}),i>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${i}%`}})})]})},th=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var y;const[A,i]=T.useState(!1),[a,o]=T.useState(""),c=T.useRef(null);T.useEffect(()=>{const C=B=>{c.current&&!c.current.contains(B.target)&&i(!1)},I=B=>{B.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",C),document.addEventListener("keydown",I),()=>{document.removeEventListener("mousedown",C),document.removeEventListener("keydown",I)}},[]);const h=((y=(s?t.flatMap(C=>C.options):t).find(C=>C.value===e))==null?void 0:y.label)||n,f=s?t.map(C=>({...C,options:C.options.filter(I=>I.label.toLowerCase().includes(a.toLowerCase()))})).filter(C=>C.options.length>0):null,m=s?null:t.filter(C=>C.label.toLowerCase().includes(a.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(V,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:l.jsx("input",{autoFocus:!0,value:a,onChange:C=>o(C.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&f?f.map(C=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:C.label}),C.options.map(I=>l.jsx("div",{onClick:()=>{r(I.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===I.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:I.label},I.value))]},C.id||C.label)):m?m.map(C=>l.jsx("div",{onClick:()=>{r(C.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===C.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:C.label},C.value)):null]})]})},sd=({children:t,className:e=""})=>{const r=Cs.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,s)=>{const A=Cs.isValidElement(n)&&n.key?n.key:s;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},A)})})},fp=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(s=>{const A=s.id??s.label,i=Math.min(100,Math.max(0,s.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},A)})})},$O=({onMenuClick:t,role:e})=>{const r=e==="admin"||e==="teacher",n=e==="admin";return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:l.jsxs("div",{className:"flex justify-around items-center h-16",children:[r&&l.jsx(Md,{to:"/dashboard",className:({isActive:s})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${s?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx(V,{name:"Home",size:24,strokeWidth:2.5})}),l.jsx(Md,{to:"/schedule",className:({isActive:s})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${s?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx(V,{name:"Calendar",size:24,strokeWidth:2.5})}),n&&l.jsx(Md,{to:"/substitutions",className:({isActive:s})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${s?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx(V,{name:"Repeat",size:24,strokeWidth:2.5})}),l.jsx("button",{onClick:t,className:"flex flex-col items-center gap-1 p-2 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 transition-all duration-300",children:l.jsx(V,{name:"Menu",size:24,strokeWidth:2.5})})]})})},WO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:A}=fs(),{schedule:i,substitutions:a}=ao(),{role:o}=oo(),c=Xc(),{addToast:d}=HO(),[h,f]=T.useState(localStorage.getItem("gym_notes")||""),[m]=T.useState(new Date),[y,C]=T.useState(""),[I,B]=T.useState(null),[w,b]=T.useState(!1),[F,Q]=T.useState(!1),D=(ee=new Date)=>{const ze=ee.getFullYear(),He=String(ee.getMonth()+1).padStart(2,"0"),ct=String(ee.getDate()).padStart(2,"0");return`${ze}-${He}-${ct}`},[x,v]=T.useState(!1),[_,S]=T.useState(""),[R,P]=T.useState(!1),k=ee=>ee.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),me=ee=>{const ze=k(ee);f(ze),Q(!0)},Ze=()=>{localStorage.setItem("gym_notes",h),Q(!1),d({type:"success",title:" ",message:"     ",duration:3e3})};T.useEffect(()=>{if(!F)return;const ee=setTimeout(()=>{localStorage.setItem("gym_notes",h),Q(!1)},3e3);return()=>clearTimeout(ee)},[h,F]);const $e=T.useMemo(()=>{const ee=m.getHours();return ee<5?" ":ee<12?" ":ee<18?" ":" "},[m]),je=T.useMemo(()=>D(m),[m]),ae=T.useMemo(()=>{const ee=m.getDay();return ee===0||ee===6?null:Et[ee-1]},[m]),Fe=T.useMemo(()=>{const ee=new Date;return ee.setHours(0,0,0,0),e.filter(ze=>ze.birthDate).map(ze=>{const He=new Date(ze.birthDate);let ct=new Date(ee.getFullYear(),He.getMonth(),He.getDate());ct<ee&&ct.setFullYear(ee.getFullYear()+1);const ut=Math.ceil((ct.getTime()-ee.getTime())/(1e3*60*60*24));return{...ze,diff:ut,age:ee.getFullYear()-He.getFullYear()}}).filter(ze=>ze.diff<=30).sort((ze,He)=>ze.diff-He.diff)},[e]),ke=T.useMemo(()=>{const ee=e.length,ze=new Map;e.filter(oe=>oe.unavailableDates.includes(je)).forEach(oe=>{var le;const z=((le=oe.absenceReasons)==null?void 0:le[je])===" "?" ":"";ze.set(oe.id,{id:oe.id,name:oe.name,displayReason:z})});const He=a.filter(oe=>oe.date===je&&oe.replacementTeacherId!=="conducted"&&oe.replacementTeacherId!==oe.originalTeacherId),ct=new Map;He.forEach(oe=>{if(ze.has(oe.originalTeacherId))return;const L=e.find(de=>de.id===oe.originalTeacherId);if(!L)return;const z=i.find(de=>de.id===oe.scheduleItemId);if(!z)return;ct.has(oe.originalTeacherId)||ct.set(oe.originalTeacherId,{teacher:L,lessons:[]}),ct.get(oe.originalTeacherId).lessons.push({period:z.period,reason:oe.lessonAbsenceReason})});const ut=Array.from(ze.values());ct.forEach((oe,L)=>{const z=oe.lessons.sort((Ce,G)=>Ce.period-G.period),le=z.map(Ce=>Ce.period).join(", "),Ee=z.some(Ce=>Ce.reason===" ")?" ":"";ut.push({id:L,name:oe.teacher.name,displayReason:`${le} : ${Ee}`})}),ut.sort((oe,L)=>oe.name.localeCompare(L.name));const te=ut.length,ne=ee-te;return{presentPercent:ee>0?Math.round(ne/ee*100):0,absentCount:te,totalTeachers:ee,absentTeachersList:ut}},[e,je,a,i]),st=T.useMemo(()=>{const ee=new Date(m);for(ee.setDate(m.getDate()+1);ee.getDay()===0||ee.getDay()===6;)ee.setDate(ee.getDate()+1);const He=[null,"","","","","",null][ee.getDay()];if(!He)return[];const ct=[];return r.forEach(ut=>{const te=i.filter(ne=>ne.classId===ut.id&&ne.day===He);te.length===0?ct.push({class:ut.name,issue:`   ${He}`}):te.length<4&&ct.push({class:ut.name,issue:`  (${te.length})`}),te.forEach(ne=>{if(i.some(oe=>oe.id!==ne.id&&oe.day===He&&oe.period===ne.period&&oe.shift===ne.shift&&oe.teacherId===ne.teacherId)&&ct.push({class:ut.name,issue:`  (${ne.period} )`}),ne.roomId){const oe=n.find(L=>L.id===ne.roomId);oe&&oe.capacity<ut.studentsCount&&ct.push({class:ut.name,issue:`: ${oe.name} (${ne.period} )`})}})}),ct.filter((ut,te,ne)=>ne.findIndex(ue=>ue.class===ut.class&&ue.issue===ut.issue)===te).slice(0,10)},[i,r,e,n,m]),We=T.useMemo(()=>{if(!ae)return 0;let ee=0;const ze=i.filter(He=>He.day===ae);for(const He of ze){const ct=e.find(ut=>ut.id===He.teacherId);ct&&ct.unavailableDates.includes(je)&&(a.find(te=>te.scheduleItemId===He.id&&te.date===je)||ee++)}return ee},[i,e,a,je,ae]),Ye=()=>{var z;if(!y){B(null);return}const ee=new Date,He=[null,ht.Monday,ht.Tuesday,ht.Wednesday,ht.Thursday,ht.Friday,null][ee.getDay()];if(!He){B({status:"",detail:"  ",color:"text-slate-500"});return}const ct=le=>{const[de,Ee]=le.split(":").map(Number);return de*60+Ee},ut=ee.getHours()*60+ee.getMinutes();let te=s.filter(le=>le.day===He);te.length===0&&(te=s.filter(le=>le.day==="default"));const ne=te.find(le=>{const de=ct(le.start),Ee=ct(le.end);return ut>=de&&ut<=Ee}),ue=y.toLowerCase(),oe=e.find(le=>le.name.toLowerCase().includes(ue)),L=r.find(le=>le.name.toLowerCase().includes(ue));if(!oe&&!L){B({status:" ",detail:" ",color:"text-red-500"});return}if(oe){if(oe.unavailableDates.includes(je)){const G=((z=oe.absenceReasons)==null?void 0:z[je])===" "?" ":"";B({status:"",detail:G,color:"text-red-500",icon:"UserX",items:[]});return}if(!ne){B({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const le=i.filter(Ce=>Ce.teacherId===oe.id&&Ce.day===He&&Ce.period===ne.period&&Ce.shift===ne.shift),de=a.filter(Ce=>Ce.date===je&&Ce.replacementTeacherId===oe.id).map(Ce=>i.find(G=>G.id===Ce.scheduleItemId)).filter(Ce=>!!Ce&&Ce.day===He&&Ce.period===ne.period&&Ce.shift===ne.shift);let Ee=[];le.forEach(Ce=>{var X,ce,Ke;const G=a.find(we=>we.date===je&&we.scheduleItemId===Ce.id);if(!G||G.replacementTeacherId===oe.id){const we=((X=n.find(re=>re.id===((G==null?void 0:G.replacementRoomId)||Ce.roomId)))==null?void 0:X.name)||(G==null?void 0:G.replacementRoomId)||Ce.roomId||" .",Re=(ce=t.find(re=>re.id===Ce.subjectId))==null?void 0:ce.name,he=(Ke=r.find(re=>re.id===Ce.classId))==null?void 0:Ke.name;Ee.push({room:we,subject:Re,entityName:he,direction:Ce.direction,isSubstitution:!!(G&&G.replacementTeacherId===oe.id),originalTeacherName:null})}}),de.forEach(Ce=>{var Re,he,re;const G=a.find(ve=>ve.date===je&&ve.scheduleItemId===Ce.id&&ve.replacementTeacherId===oe.id);if(!G)return;const X=((Re=n.find(ve=>ve.id===(G.replacementRoomId||Ce.roomId)))==null?void 0:Re.name)||G.replacementRoomId||Ce.roomId||" .",ce=(he=t.find(ve=>ve.id===Ce.subjectId))==null?void 0:he.name,Ke=(re=r.find(ve=>ve.id===Ce.classId))==null?void 0:re.name,we=e.find(ve=>ve.id===G.originalTeacherId);Ee.push({room:X,subject:ce,entityName:Ke,direction:Ce.direction,isSubstitution:!0,originalTeacherName:we==null?void 0:we.name})}),Ee.length>0?B({status:` ${ne.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Ee}):B({status:"",detail:` ( ${ne.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(L){if(!ne){B({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const le=i.filter(de=>de.classId===L.id&&de.day===He&&de.period===ne.period&&de.shift===ne.shift);if(le.length>0){const de=le.map(G=>{var Le,Ge,Te,it,tt;const X=a.find(et=>et.scheduleItemId===G.id&&et.date===je);if(X&&X.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(Le=t.find(et=>et.id===G.subjectId))==null?void 0:Le.name};const ce=!!(X&&X.replacementTeacherId!=="conducted"&&X.replacementTeacherId!=="cancelled"),Ke=ce?X.replacementTeacherId:G.teacherId,we=(X==null?void 0:X.replacementRoomId)||G.roomId,Re=(Ge=e.find(et=>et.id===Ke))==null?void 0:Ge.name,he=((Te=n.find(et=>et.id===we))==null?void 0:Te.name)||we||" .",re=(it=t.find(et=>et.id===G.subjectId))==null?void 0:it.name,ve=ce?(tt=e.find(et=>et.id===X.originalTeacherId))==null?void 0:tt.name:null;return{room:he,subject:re,entityName:Re,direction:G.direction,isSubstitution:ce,originalTeacherName:ve}}),Ee=de.filter(G=>!G.cancelled),Ce=de.filter(G=>!!G.cancelled);Ee.length>0?B({status:` ${ne.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Ee}):Ce.length>0?B({status:" ",detail:Ce.map(G=>G.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):B({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else B({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},gt=async()=>{if(!_.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}P(!0);const ee=` *   :*

${_}`;try{const He=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:ee,parse_mode:"Markdown"})})).json();if(He.ok)alert("!   ."),v(!1),S("");else throw new Error(He.description)}catch(ze){console.error("   Telegram:",ze),alert(`   . : ${ze}`)}finally{P(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[l.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 animate-fade-in",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[$e,", ",o==="admin"?"":"","!"]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:[" ",m.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[l.jsx(V,{name:"Send",size:18}),"  "]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:l.jsx(V,{name:"Search",size:22})}),l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:y,onChange:ee=>C(ee.target.value),onKeyDown:ee=>ee.key==="Enter"&&Ye(),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl p-3.5 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),l.jsx("button",{onClick:Ye,className:"btn-primary btn-ripple btn-touch p-3.5 mobile-optimized",children:l.jsx(V,{name:"Search",size:20})})]}),I&&l.jsxs("div",{className:"mt-auto p-4 bg-slate-50/80 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 animate-fade-in backdrop-blur-sm",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-3 flex items-center gap-2 ${I.color}`,children:[l.jsx(V,{name:I.icon||"Info",size:16})," ",I.status]}),I.items&&I.items.length>0?l.jsx("div",{className:"space-y-2.5",children:I.items.map((ee,ze)=>l.jsxs("div",{className:"bg-white dark:bg-dark-900/80 p-3 rounded-xl border border-slate-100 dark:border-slate-600 text-sm shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:ee.subject}),ee.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-md",children:ee.direction})]}),ee.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500 mt-1",children:ee.originalTeacherName?` (${ee.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-slate-500 dark:text-slate-400 text-xs",children:[l.jsx("span",{children:ee.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg font-mono font-bold text-slate-600 dark:text-slate-300",children:ee.room})]})]},`${ee.room}-${ee.subject}-${ee.entityName}-${ze}`))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-base leading-snug",children:I.detail})]})]}),l.jsxs("div",{className:`glass-panel p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden ${We>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[We>0&&l.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[l.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${We>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:l.jsx(V,{name:We>0?"AlertTriangle":"CheckCircle",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:We>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:We}),l.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),l.jsxs("button",{onClick:()=>c("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",l.jsx(V,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:l.jsx(V,{name:"CheckCircle",size:64})}),l.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full card-hover",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:l.jsx(V,{name:"PieChart",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>b(!w),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:w?" ":" ",children:l.jsx(V,{name:w?"PieChart":"List",size:20})})]}),w?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:ke.absentTeachersList.length>0?l.jsx("div",{className:"space-y-3",children:ke.absentTeachersList.map(ee=>l.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:ee.name}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:ee.displayReason})]},ee.id))}):l.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:l.jsx("p",{className:"text-sm font-medium",children:"   "})})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[l.jsxs("div",{className:"relative w-28 h-28",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${ke.presentPercent}, 100`,strokeLinecap:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),l.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),l.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[ke.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:ke.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full group card-hover relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:l.jsx(V,{name:"Edit2",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:Ze,disabled:!F,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${F?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:F?" ":" ",children:l.jsx(V,{name:"Save",size:16})}),l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(h),d({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(V,{name:"Copy",size:16})}),l.jsx("button",{onClick:()=>{confirm(" ?")&&(f(""),Q(!1))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(V,{name:"Trash2",size:16})})]})]}),l.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[l.jsx("textarea",{className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:h,onChange:ee=>me(ee.target.value),maxLength:1e4}),F&&l.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[l.jsx(V,{name:"Clock",size:10}),"  "]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:l.jsx(V,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:st.length?st.map(ee=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:ee.class}),l.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:ee.issue})]},`${ee.class}-${ee.issue}`)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:l.jsx(V,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:Fe.length?Fe.map(ee=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:ee.name}),l.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${ee.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:ee.diff===0?"!":` ${ee.diff} .`})]},ee.id)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]})]}),l.jsx(Ln,{isOpen:x,onClose:()=>v(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),l.jsx("textarea",{value:_,onChange:ee=>S(ee.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:gt,disabled:R,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[R?l.jsx(V,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(V,{name:"Send",size:16}),R?"...":""]})})]})})]})};var GF={},zF={},$F={},ag={};Object.defineProperty(ag,"__esModule",{value:!0});function qO(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}ag.default=qO;var Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});var JO=ag,XO=" and ";function YO(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=JO.default(r),A=n;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(XO)}Oy.default=YO;var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});function ZO(){}Hy.default=ZO;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=ag;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=Oy;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=Hy;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})($F);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=T,r=$F;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(A,i){i===void 0&&(i=!1);var a=e.useState(i),o=a[0],c=a[1],d=r.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),o}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(zF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=zF;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(GF);const WF=Ob(GF),qF=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:A}=fs(),{schedule1:i,schedule2:a,saveSemesterSchedule:o,canUndo:c,canRedo:d,undo:h,redo:f}=ao(),m=e===2?a:i,y=async U=>{await o(e,U)},[C,I]=T.useState(se.First),[B,w]=T.useState(ht.Monday),[b,F]=T.useState(!1),[Q,D]=T.useState({}),[x,v]=T.useState("class"),[_,S]=T.useState(""),[R,P]=T.useState(""),[k,me]=T.useState(""),[Ze,$e]=T.useState(!1),[je,ae]=T.useState({visible:!1,x:0,y:0,item:null,cell:null}),[Fe,ke]=T.useState(null),[st,We]=T.useState([]),[Ye,gt]=T.useState(null),[ee,ze]=T.useState(null),He=WF({maxWidth:767}),[ct,ut]=T.useState(!0),[te,ne]=T.useState(!1),[ue,oe]=T.useState({isOpen:!1,type:"",day:"",classId:""}),[L,z]=T.useState(ht.Monday),[le,de]=T.useState(""),Ee=an[C],Ce=T.useMemo(()=>x==="week"?an[C].map(U=>({id:U.toString(),name:`${U} `})):x==="class"?_?s.filter(U=>U.id===_&&U.shift===C):s.filter(U=>U.shift===C):x==="teacher"?_?n.filter(U=>U.id===_):n:x==="subject"?_?r.filter(U=>U.id===_):r:[],[x,_,s,n,r,C]),G=()=>Ce,X=T.useMemo(()=>new Map,[]);T.useEffect(()=>{X.clear()},[m,X]);const ce=T.useCallback((U,j)=>{const fe=`${x}-${U}-${j}-${C}-${B}-${_}-${R}-${k}`;if(X.has(fe))return X.get(fe);let Z=[];if(x==="week"){const J=parseInt(U),Y=j;Z=m.filter(ye=>ye.shift===C&&ye.period===J&&ye.day===Y),_&&(Z=Z.filter(ye=>ye.classId===_))}else{const J=j;x==="class"&&(Z=m.filter(Y=>Y.classId===U&&Y.period===J&&Y.day===B&&Y.shift===C)),x==="teacher"&&(Z=m.filter(Y=>Y.teacherId===U&&Y.period===J&&Y.day===B&&Y.shift===C)),x==="subject"&&(Z=m.filter(Y=>Y.subjectId===U&&Y.period===J&&Y.day===B&&Y.shift===C))}return R&&(Z=Z.filter(J=>{if(!J.roomId)return!1;const Y=A.find(be=>be.id===J.roomId);return((Y?Y.name:J.roomId)||"").toLowerCase().includes(R.toLowerCase())})),k&&(Z=Z.filter(J=>{var Y;return(Y=J.direction)==null?void 0:Y.toLowerCase().includes(k.toLowerCase())})),X.set(fe,Z),Z},[x,m,C,B,_,R,k,A]),Ke=U=>{const j=[],fe=m.filter(Y=>Y.id!==U.id&&Y.day===U.day&&Y.period===U.period&&Y.shift===U.shift);return fe.find(Y=>Y.teacherId===U.teacherId)&&j.push("teacher"),fe.find(Y=>!(Y.classId!==U.classId||Y.direction&&U.direction&&Y.direction!==U.direction))&&j.push("class"),U.roomId&&fe.find(ye=>ye.roomId===U.roomId)&&j.push("room"),j},we=(U,j,fe)=>{const Z=[],J=s.find(be=>be.id===U),Y=r.find(be=>be.id===j),ye=A.find(be=>be.id===fe);return ye&&(J&&ye.capacity<J.studentsCount&&Z.push(`  !   ${J.studentsCount} .,     ${ye.capacity}.`),Y&&Y.requiredRoomType&&Y.requiredRoomType!==""&&ye.type!==Y.requiredRoomType&&Z.push(`   !   "${Y.requiredRoomType}",   "${ye.type}".`)),Z},Re=U=>{if(!U.classId||!U.subjectId||!U.roomId){We([]);return}const j=we(U.classId,U.subjectId,U.roomId);We(j)},he=U=>{t||(D(U),Re(U),F(!0))},re=(U,j,fe=B)=>{if(t)return;const Z={period:j,day:fe,shift:C,id:Math.random().toString(36).substr(2,9)};x==="class"&&(Z.classId=U),x==="teacher"&&(Z.teacherId=U),x==="subject"&&(Z.subjectId=U),x==="week"&&(Z.period=parseInt(U),Z.day=fe,_&&s.find(J=>J.id===_)&&(Z.classId=_)),D(Z),We([]),F(!0)},ve=async()=>{if(!Q.subjectId||!Q.teacherId||!Q.classId)return;const U=[];if(Q.period!==void 0){const be=Q.shift||C;(an[be]||[]).includes(Q.period)||U.push(` ${Q.period}    "${be}"`)}if(n.find(be=>be.id===Q.teacherId)||U.push("   "),r.find(be=>be.id===Q.subjectId)||U.push("   "),s.find(be=>be.id===Q.classId)||U.push("   "),Q.roomId&&(A.find(Je=>Je.id===Q.roomId)||U.push("   ")),U.length>0){alert(`  :

${U.join(`
`)}`);return}const J=Ke(Q);if(J.length>0){const be={teacher:"",class:"",room:""},Je=J.map(rt=>be[rt]).join(", ");if(!confirm(`  : ${Je}     .

   ?`))return}let Y=[...m];const ye=Y.findIndex(be=>be.id===Q.id);ye>=0?Y[ye]=Q:Y.push(Q),await y(Y),F(!1)},Le=async U=>{const j=m.filter(fe=>fe.id!==(U||Q.id));await y(j),F(!1)},Ge=(U,j,fe)=>{t||(U.preventDefault(),U.stopPropagation(),ae({visible:!0,x:U.clientX,y:U.clientY,item:j,cell:fe}))},Te=(U,j)=>{if(t)return;gt(j),U.dataTransfer.effectAllowed="move";const fe=U.currentTarget;setTimeout(()=>fe.classList.add("dragging"),0)},it=U=>{U.currentTarget.classList.remove("dragging"),gt(null),ze(null)},tt=(U,j)=>{U.preventDefault(),!t&&ze(`${j.rowId}-${j.colKey}`)},et=async(U,j)=>{if(U.preventDefault(),!Ye||t)return;const fe={...Ye};x==="week"?(fe.period=parseInt(j.rowId),fe.day=j.colKey):(fe.period=j.colKey,fe.day=B,x==="class"&&(fe.classId=j.rowId),x==="teacher"&&(fe.teacherId=j.rowId),x==="subject"&&(fe.subjectId=j.rowId));const Z=m.map(ye=>ye.id===fe.id?fe:ye),J=Ve(Z,fe);if(J.length>0){const ye=J.map(be=>{switch(be.type){case"teacher":return` ${be.entityName}     `;case"room":return` ${be.entityName}     `;case"class":return` ${be.entityName}      `;default:return"  "}});alert(`  :
${ye.join(`
`)}`),gt(null),ze(null);return}await y(Z),gt(null),ze(null)},Ve=(U,j)=>{const fe=[],Z=U.filter(ye=>ye.id!==j.id&&ye.day===j.day&&ye.period===j.period&&ye.shift===j.shift);if(Z.find(ye=>ye.teacherId===j.teacherId)){const ye=n.find(be=>be.id===j.teacherId);fe.push({type:"teacher",entityName:(ye==null?void 0:ye.name)||j.teacherId})}if(j.roomId&&Z.find(be=>be.roomId===j.roomId)){const be=A.find(Je=>Je.id===j.roomId);fe.push({type:"room",entityName:(be==null?void 0:be.name)||j.roomId})}if(Z.find(ye=>ye.classId===j.classId)){const ye=s.find(be=>be.id===j.classId);fe.push({type:"class",entityName:(ye==null?void 0:ye.name)||j.classId})}return fe},xe=[];if(je.item)xe.push({label:"",icon:"Copy",onClick:()=>ke(je.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>Le(je.item.id)});else if(je.cell){const U=je.cell;Fe&&xe.push({label:"",icon:"Clipboard",onClick:async()=>{const j={...Fe,id:Math.random().toString(36).substr(2,9),day:B,shift:C,period:U.colKey};x==="week"&&(j.day=U.colKey,j.period=parseInt(U.rowId)),x==="class"?j.classId=U.rowId:x==="teacher"?j.teacherId=U.rowId:x==="subject"&&(j.subjectId=U.rowId);let fe=[...m,j];await y(fe),ke(null)}}),xe.push({label:" ",icon:"Plus",onClick:()=>re(U.rowId||"",typeof U.colKey=="number"?U.colKey:parseInt(U.rowId||"0"),x==="week"?U.colKey:B)})}const qe=Q.subjectId?n.filter(U=>U.subjectIds&&U.subjectIds.includes(Q.subjectId)):[],ot=Q.subjectId?n.filter(U=>!U.subjectIds||!U.subjectIds.includes(Q.subjectId)):n,_t=T.useMemo(()=>{const U=e===2?" (2- )":"";if(_){if(x==="teacher"){const j=n.find(fe=>fe.id===_);return j?j.name+U:""+U}if(x==="class"){const j=s.find(fe=>fe.id===_);return j?j.name+U:""+U}if(x==="subject"){const j=r.find(fe=>fe.id===_);return j?j.name+U:""+U}if(x==="week"){const j=s.find(fe=>fe.id===_);return j?j.name+U:""+U}}return`  ${B}`+U},[_,x,n,s,r,B,e]),dt=!!_,N=T.useMemo(()=>dt?Et:Ee,[dt,Ee]),q=T.useMemo(()=>dt?an[C].map(U=>({id:U.toString(),name:`${U} `})):G(),[dt,C,G]),$=(U,j)=>{if(dt){const fe=parseInt(U),Z=j;let J=m.filter(Y=>Y.shift===C&&Y.period===fe&&Y.day===Z);return x==="class"||x==="week"?J=J.filter(Y=>Y.classId===_):x==="teacher"?J=J.filter(Y=>Y.teacherId===_):x==="subject"&&(J=J.filter(Y=>Y.subjectId===_)),J}else return ce(U,j)},O=x==="week"?Et:Ee,Ne=(U,j,fe)=>{oe({isOpen:!0,type:U,day:j||"",classId:fe||""})},Se=async()=>{let U=[...m];ue.type==="clearAll"?U=[]:ue.type==="clearDay"&&ue.day?U=U.filter(j=>j.day!==ue.day):ue.type==="clearClass"&&ue.classId&&(U=U.filter(j=>j.classId!==ue.classId)),await y(U),oe({isOpen:!1,type:"",day:"",classId:""}),ne(!1)},ge=(U,j,fe)=>t&&U.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[U.map(Z=>{const J=r.find(at=>at.id===Z.subjectId),Y=n.find(at=>at.id===Z.teacherId),ye=s.find(at=>at.id===Z.classId),be=Ke(Z),Je=A.find(at=>at.id===Z.roomId),rt=Je?Je.name:Z.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:at=>Te(at,Z),onDragEnd:t?void 0:it,onClick:t?void 0:()=>he(Z),onContextMenu:t?void 0:at=>Ge(at,Z,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${be.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:be.length===0&&(J!=null&&J.color)?{backgroundColor:`${J.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:x==="subject"||x==="week"?ye==null?void 0:ye.name:J==null?void 0:J.name}),Z.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Z.direction})]}),x==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:J==null?void 0:J.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:Y==null?void 0:Y.name,children:[l.jsx(V,{name:x==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:x==="teacher"?ye==null?void 0:ye.name:Y==null?void 0:Y.name})]}),rt&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Je?`: ${Je.capacity}, : ${Je.type}`:"",children:rt})]}),be.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${be.join(", ")}`,children:"!"})]},Z.id)}),!t&&U.length<3&&l.jsx("button",{onClick:()=>re(fe,typeof j=="number"?j:parseInt(fe),x==="week"?j:B),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(V,{name:"Plus",size:16})})]}),Be=()=>{if(!_)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const U=m.filter(j=>j.day===B&&j.shift===C&&(x==="class"&&j.classId===_||x==="teacher"&&j.teacherId===_||x==="subject"&&j.subjectId===_)).sort((j,fe)=>j.period-fe.period);return U.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",B,"  ",C,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:U.map(j=>{const fe=r.find(Je=>Je.id===j.subjectId),Z=n.find(Je=>Je.id===j.teacherId),J=s.find(Je=>Je.id===j.classId),Y=A.find(Je=>Je.id===j.roomId),ye=Y?Y.name:j.roomId,be=Ke(j);return l.jsxs("div",{onClick:t?void 0:()=>he(j),className:`rounded-xl p-4 shadow-sm border ${be.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[j.period," "]}),be.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${be.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[fe==null?void 0:fe.name," ",j.direction&&`(${j.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[J==null?void 0:J.name,"  ",Z==null?void 0:Z.name]}),ye&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",ye]})]},j.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),je.visible&&l.jsx(GO,{x:je.x,y:je.y,onClose:()=>ae({...je,visible:!1}),actions:xe}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>I(se.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${C===se.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>I(se.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${C===se.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),x!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Et.map(U=>l.jsx("button",{onClick:()=>w(U),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${B===U?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:U},U))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(V,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(V,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{v("class"),S("")},className:`p-2 rounded-md ${x==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(V,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{v("teacher"),S("")},className:`p-2 rounded-md ${x==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(V,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{v("subject"),S("")},className:`p-2 rounded-md ${x==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(V,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var U;v("week"),S(((U=s[0])==null?void 0:U.id)||"")},className:`p-2 rounded-md ${x==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(V,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(V,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:_,onChange:U=>S(U.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",x==="class"?"":x==="teacher"?"":x==="week"?" ()":""]}),(x==="class"||x==="week")&&s.filter(U=>U.shift===C).map(U=>l.jsx("option",{value:U.id,children:U.name},U.id)),x==="teacher"&&n.map(U=>l.jsx("option",{value:U.id,children:U.name},U.id)),x==="subject"&&r.map(U=>l.jsx("option",{value:U.id,children:U.name},U.id))]})]}),l.jsx("input",{placeholder:"...",value:R,onChange:U=>P(U.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:k,onChange:U=>me(U.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>ne(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(V,{name:"List",size:16})," . ."]}),(_||x==="week")&&l.jsx("button",{onClick:()=>$e(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:l.jsx(V,{name:"Printer",size:16})})]})]}),He&&!t&&_&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>ut(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${ct?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(V,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>ut(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${ct?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(V,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:He&&ct&&!t&&_?Be():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:x==="week"?"":x==="class"?"":x==="teacher"?"":""}),O.map(U=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:x==="week"?U:`${U} `},U))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Ce.length>0?Ce.map(U=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:U.name}),O.map(j=>{const fe=ce(U.id,j),Z=`${U.id}-${j}`,J={rowId:U.id,colKey:j};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${ee===Z?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:Y=>Ge(Y,null,J),onDragOver:t?void 0:Y=>tt(Y,J),onDrop:t?void 0:Y=>et(Y,J),children:ge(fe,j,U.id)},j)})]},U.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(Ln,{isOpen:b,onClose:()=>F(!1),title:Q.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",Q.day]}),l.jsxs("span",{children:[": ",Q.period]}),l.jsxs("span",{children:[": ",Q.shift===se.First?"1 ":"2 "]})]}),st.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:st.map(U=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(V,{name:"AlertTriangle",size:14}),U]},U))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(th,{options:s.filter(U=>U.shift===C).map(U=>({value:U.id,label:U.name})),value:Q.classId||null,onChange:U=>{D({...Q,classId:U}),Re({...Q,classId:U})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(th,{options:r.map(U=>({value:U.id,label:U.name})),value:Q.subjectId||null,onChange:U=>{D({...Q,subjectId:U}),Re({...Q,subjectId:U})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(th,{options:[{label:"",options:qe.map(U=>({value:U.id,label:U.name}))},{label:"",options:ot.map(U=>({value:U.id,label:U.name}))}],value:Q.teacherId||null,onChange:U=>D({...Q,teacherId:U}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:Q.direction||"",onChange:U=>D({...Q,direction:U.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:Q.roomId||"",onChange:U=>{D({...Q,roomId:U.target.value}),Re({...Q,roomId:U.target.value})},children:[l.jsx("option",{value:"",children:" "}),A.map(U=>l.jsxs("option",{value:U.id,children:[U.name," (",U.capacity," )"]},U.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[Q.id&&l.jsx("button",{onClick:()=>Le(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:ve,className:"btn-primary btn-ripple",children:""})]})]})}),l.jsx(Ln,{isOpen:te,onClose:()=>ne(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>Ne("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:L,onChange:U=>z(U.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Et.map(U=>l.jsx("option",{value:U,children:U},U))})}),l.jsxs("button",{onClick:()=>Ne("clearDay",L),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",L]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:le,onChange:U=>de(U.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),s.map(U=>l.jsx("option",{value:U.id,children:U.name},U.id))]})}),l.jsx("button",{onClick:()=>{le&&Ne("clearClass",void 0,le)},disabled:!le,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(Ln,{isOpen:ue.isOpen,onClose:()=>oe({...ue,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>oe({...ue,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Se,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),Ze&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(V,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>$e(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:_t}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:dt||x==="week"?"":x==="class"?"":x==="teacher"?"":""}),N.map(U=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:dt||x==="week"?U:`${U} `},U))]})}),l.jsx("tbody",{children:q.map(U=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:U.name}),N.map(j=>{const fe=$(U.id,j);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:fe.map(Z=>{const J=r.find(Rt=>Rt.id===Z.subjectId),Y=n.find(Rt=>Rt.id===Z.teacherId),ye=s.find(Rt=>Rt.id===Z.classId),be=A.find(Rt=>Rt.id===Z.roomId),Je=be?be.name:Z.roomId,rt=x==="teacher",Tt=x==="subject"||x==="week"||dt&&rt?ye==null?void 0:ye.name:J==null?void 0:J.name,Wt=rt?ye==null?void 0:ye.name:Y==null?void 0:Y.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Tt,Z.direction&&` (${Z.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:Wt}),Je&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Je})]})]},Z.id)})},j)})]},U.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c0=function(t,e){return c0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},c0(t,e)};function Yn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");c0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var u0=function(){return u0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},u0.apply(this,arguments)};function Zr(t,e,r,n){function s(A){return A instanceof r?A:new r(function(i){i(A)})}return new(r||(r=Promise))(function(A,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function o(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(a,o)}c((n=n.apply(t,[])).next())})}function Gr(t,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,s,A,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return o([c,d])}}function o(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){r.label=c[1];break}if(c[0]===6&&r.label<A[1]){r.label=A[1],A=c;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(c);break}A[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ad(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,A;n<s;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||e)}var Os=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),lg=function(t,e){return Os.fromClientRect(t,e.getBoundingClientRect())},eH=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Os(0,0,n,s)},cg=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},cr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},LC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var id=0;id<LC.length;id++)tH[LC.charCodeAt(id)]=id;var jC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var od=0;od<jC.length;od++)Rl[jC.charCodeAt(od)]=od;var rH=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Rl[t.charCodeAt(n)],i=Rl[t.charCodeAt(n+1)],a=Rl[t.charCodeAt(n+2)],o=Rl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|o&63;return c},nH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},sH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Ri=5,Vy=11,gp=2,AH=Vy-Ri,JF=65536>>Ri,iH=1<<Ri,pp=iH-1,oH=1024>>Ri,aH=JF+oH,lH=aH,cH=32,uH=lH+cH,dH=65536>>Vy,hH=1<<AH,fH=hH-1,MC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},gH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},pH=function(t,e){var r=rH(t),n=Array.isArray(r)?sH(r):new Uint32Array(r),s=Array.isArray(r)?nH(r):new Uint16Array(r),A=24,i=MC(s,A/2,n[4]/2),a=n[5]===2?MC(s,(A+n[4])/2):gH(n,Math.ceil((A+n[4])/4));return new mH(n[0],n[1],n[2],n[3],i,a)},mH=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Ri],r=(r<<gp)+(e&pp),this.data[r];if(e<=65535)return r=this.index[JF+(e-55296>>Ri)],r=(r<<gp)+(e&pp),this.data[r];if(e<this.highStart)return r=uH-dH+(e>>Vy),r=this.index[r],r+=e>>Ri&fH,r=this.index[r],r=(r<<gp)+(e&pp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),OC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ad=0;ad<OC.length;ad++)wH[OC.charCodeAt(ad)]=ad;var yH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",HC=50,xH=1,XF=2,YF=3,vH=4,BH=5,VC=7,ZF=8,KC=9,BA=10,d0=11,GC=12,h0=13,CH=14,Dl=15,f0=16,ld=17,vl=18,bH=19,zC=20,g0=21,Bl=22,mp=23,yo=24,xn=25,Pl=26,Ll=27,xo=28,_H=29,Ii=30,IH=31,cd=32,ud=33,p0=34,m0=35,w0=36,Vc=37,y0=38,rh=39,nh=40,wp=41,eS=42,EH=43,TH=[9001,65288],tS="!",mt="",dd="",x0=pH(yH),ys=[Ii,w0],v0=[xH,XF,YF,BH],rS=[BA,ZF],$C=[Ll,Pl],FH=v0.concat(rS),WC=[y0,rh,nh,p0,m0],SH=[Dl,h0],UH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(A,i){var a=x0.get(A);if(a>HC?(s.push(!0),a-=HC):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(i),r.push(f0);if(a===vH||a===d0){if(i===0)return n.push(i),r.push(Ii);var o=r[i-1];return FH.indexOf(o)===-1?(n.push(n[i-1]),r.push(o)):(n.push(i),r.push(Ii))}if(n.push(i),a===IH)return r.push(e==="strict"?g0:Vc);if(a===eS||a===_H)return r.push(Ii);if(a===EH)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(Vc):r.push(Ii);r.push(a)}),[n,r,s]},yp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=r;A<=n.length;){A++;var i=n[A];if(i===e)return!0;if(i!==BA)break}if(s===BA)for(var A=r;A>0;){A--;var a=n[A];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var o=r;o<=n.length;){o++;var i=n[o];if(i===e)return!0;if(i!==BA)break}if(a!==BA)break}return!1},qC=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===BA)r--;else return n}return 0},kH=function(t,e,r,n,s){if(r[n]===0)return mt;var A=n-1;if(Array.isArray(s)&&s[A]===!0)return mt;var i=A-1,a=A+1,o=e[A],c=i>=0?e[i]:0,d=e[a];if(o===XF&&d===YF)return mt;if(v0.indexOf(o)!==-1)return tS;if(v0.indexOf(d)!==-1||rS.indexOf(d)!==-1)return mt;if(qC(A,e)===ZF)return dd;if(x0.get(t[A])===d0||(o===cd||o===ud)&&x0.get(t[a])===d0||o===VC||d===VC||o===KC||[BA,h0,Dl].indexOf(o)===-1&&d===KC||[ld,vl,bH,yo,xo].indexOf(d)!==-1||qC(A,e)===Bl||yp(mp,Bl,A,e)||yp([ld,vl],g0,A,e)||yp(GC,GC,A,e))return mt;if(o===BA)return dd;if(o===mp||d===mp)return mt;if(d===f0||o===f0)return dd;if([h0,Dl,g0].indexOf(d)!==-1||o===CH||c===w0&&SH.indexOf(o)!==-1||o===xo&&d===w0||d===zC||ys.indexOf(d)!==-1&&o===xn||ys.indexOf(o)!==-1&&d===xn||o===Ll&&[Vc,cd,ud].indexOf(d)!==-1||[Vc,cd,ud].indexOf(o)!==-1&&d===Pl||ys.indexOf(o)!==-1&&$C.indexOf(d)!==-1||$C.indexOf(o)!==-1&&ys.indexOf(d)!==-1||[Ll,Pl].indexOf(o)!==-1&&(d===xn||[Bl,Dl].indexOf(d)!==-1&&e[a+1]===xn)||[Bl,Dl].indexOf(o)!==-1&&d===xn||o===xn&&[xn,xo,yo].indexOf(d)!==-1)return mt;if([xn,xo,yo,ld,vl].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===xn)return mt;if([xo,yo].indexOf(f)!==-1)h--;else break}if([Ll,Pl].indexOf(d)!==-1)for(var h=[ld,vl].indexOf(o)!==-1?i:A;h>=0;){var f=e[h];if(f===xn)return mt;if([xo,yo].indexOf(f)!==-1)h--;else break}if(y0===o&&[y0,rh,p0,m0].indexOf(d)!==-1||[rh,p0].indexOf(o)!==-1&&[rh,nh].indexOf(d)!==-1||[nh,m0].indexOf(o)!==-1&&d===nh||WC.indexOf(o)!==-1&&[zC,Pl].indexOf(d)!==-1||WC.indexOf(d)!==-1&&o===Ll||ys.indexOf(o)!==-1&&ys.indexOf(d)!==-1||o===yo&&ys.indexOf(d)!==-1||ys.concat(xn).indexOf(o)!==-1&&d===Bl&&TH.indexOf(t[a])===-1||ys.concat(xn).indexOf(d)!==-1&&o===vl)return mt;if(o===wp&&d===wp){for(var m=r[A],y=1;m>0&&(m--,e[m]===wp);)y++;if(y%2!==0)return mt}return o===cd&&d===ud?mt:dd},QH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=UH(t,e.lineBreak),n=r[0],s=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(a){return[xn,Ii,eS].indexOf(a)!==-1?Vc:a}));var i=e.wordBreak==="keep-all"?A.map(function(a,o){return a&&t[o]>=19968&&t[o]<=40959}):void 0;return[n,s,i]},NH=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===tS,this.start=n,this.end=s}return t.prototype.slice=function(){return cr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),RH=function(t,e){var r=cg(t),n=QH(r,e),s=n[0],A=n[1],i=n[2],a=r.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var d=mt;c<a&&(d=kH(r,A,s,++c,i))===mt;);if(d!==mt||c===a){var h=new NH(r,d,o,c);return o=c,{value:h,done:!1}}return{done:!0,value:null}}}},DH=1,PH=2,yu=4,JC=8,tf=10,XC=47,Ac=92,LH=9,jH=32,hd=34,Cl=61,MH=35,OH=36,HH=37,fd=39,gd=40,bl=41,VH=95,ln=45,KH=33,GH=60,zH=62,$H=64,WH=91,qH=93,JH=61,XH=123,pd=63,YH=125,YC=124,ZH=126,eV=128,ZC=65533,xp=42,Si=43,tV=44,rV=58,nV=59,Kc=46,sV=0,AV=8,iV=11,oV=14,aV=31,lV=127,ts=-1,nS=48,sS=97,AS=101,cV=102,uV=117,dV=122,iS=65,oS=69,aS=70,hV=85,fV=90,$r=function(t){return t>=nS&&t<=57},gV=function(t){return t>=55296&&t<=57343},vo=function(t){return $r(t)||t>=iS&&t<=aS||t>=sS&&t<=cV},pV=function(t){return t>=sS&&t<=dV},mV=function(t){return t>=iS&&t<=fV},wV=function(t){return pV(t)||mV(t)},yV=function(t){return t>=eV},md=function(t){return t===tf||t===LH||t===jH},rf=function(t){return wV(t)||yV(t)||t===VH},eb=function(t){return rf(t)||$r(t)||t===ln},xV=function(t){return t>=sV&&t<=AV||t===iV||t>=oV&&t<=aV||t===lV},oA=function(t,e){return t!==Ac?!1:e!==tf},wd=function(t,e,r){return t===ln?rf(e)||oA(e,r):rf(t)?!0:!!(t===Ac&&oA(t,e))},vp=function(t,e,r){return t===Si||t===ln?$r(e)?!0:e===Kc&&$r(r):$r(t===Kc?e:t)},vV=function(t){var e=0,r=1;(t[e]===Si||t[e]===ln)&&(t[e]===ln&&(r=-1),e++);for(var n=[];$r(t[e]);)n.push(t[e++]);var s=n.length?parseInt(cr.apply(void 0,n),10):0;t[e]===Kc&&e++;for(var A=[];$r(t[e]);)A.push(t[e++]);var i=A.length,a=i?parseInt(cr.apply(void 0,A),10):0;(t[e]===oS||t[e]===AS)&&e++;var o=1;(t[e]===Si||t[e]===ln)&&(t[e]===ln&&(o=-1),e++);for(var c=[];$r(t[e]);)c.push(t[e++]);var d=c.length?parseInt(cr.apply(void 0,c),10):0;return r*(s+a*Math.pow(10,-i))*Math.pow(10,o*d)},BV={type:2},CV={type:3},bV={type:4},_V={type:13},IV={type:8},EV={type:21},TV={type:9},FV={type:10},SV={type:11},UV={type:12},kV={type:14},yd={type:23},QV={type:1},NV={type:25},RV={type:24},DV={type:26},PV={type:27},LV={type:28},jV={type:29},MV={type:31},B0={type:32},lS=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(cg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==B0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case hd:return this.consumeStringToken(hd);case MH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(eb(r)||oA(n,s)){var A=wd(r,n,s)?PH:DH,i=this.consumeName();return{type:5,value:i,flags:A}}break;case OH:if(this.peekCodePoint(0)===Cl)return this.consumeCodePoint(),_V;break;case fd:return this.consumeStringToken(fd);case gd:return BV;case bl:return CV;case xp:if(this.peekCodePoint(0)===Cl)return this.consumeCodePoint(),kV;break;case Si:if(vp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case tV:return bV;case ln:var a=e,o=this.peekCodePoint(0),c=this.peekCodePoint(1);if(vp(a,o,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(wd(a,o,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===ln&&c===zH)return this.consumeCodePoint(),this.consumeCodePoint(),RV;break;case Kc:if(vp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case XC:if(this.peekCodePoint(0)===xp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===xp&&(d=this.consumeCodePoint(),d===XC))return this.consumeToken();if(d===ts)return this.consumeToken()}break;case rV:return DV;case nV:return PV;case GH:if(this.peekCodePoint(0)===KH&&this.peekCodePoint(1)===ln&&this.peekCodePoint(2)===ln)return this.consumeCodePoint(),this.consumeCodePoint(),NV;break;case $H:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(wd(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case WH:return LV;case Ac:if(oA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case qH:return jV;case JH:if(this.peekCodePoint(0)===Cl)return this.consumeCodePoint(),IV;break;case XH:return SV;case YH:return UV;case uV:case hV:var y=this.peekCodePoint(0),C=this.peekCodePoint(1);return y===Si&&(vo(C)||C===pd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case YC:if(this.peekCodePoint(0)===Cl)return this.consumeCodePoint(),TV;if(this.peekCodePoint(0)===YC)return this.consumeCodePoint(),EV;break;case ZH:if(this.peekCodePoint(0)===Cl)return this.consumeCodePoint(),FV;break;case ts:return B0}return md(e)?(this.consumeWhiteSpace(),MV):$r(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):rf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:cr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();vo(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===pd&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(cr.apply(void 0,e.map(function(o){return o===pd?nS:o})),16),A=parseInt(cr.apply(void 0,e.map(function(o){return o===pd?aS:o})),16);return{type:30,start:s,end:A}}var i=parseInt(cr.apply(void 0,e),16);if(this.peekCodePoint(0)===ln&&vo(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var a=[];vo(r)&&a.length<6;)a.push(r),r=this.consumeCodePoint();var A=parseInt(cr.apply(void 0,a),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===gd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===gd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ts)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===fd||r===hd){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ts||this.peekCodePoint(0)===bl)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),yd)}for(;;){var s=this.consumeCodePoint();if(s===ts||s===bl)return{type:22,value:cr.apply(void 0,e)};if(md(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ts||this.peekCodePoint(0)===bl?(this.consumeCodePoint(),{type:22,value:cr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),yd);if(s===hd||s===fd||s===gd||xV(s))return this.consumeBadUrlRemnants(),yd;if(s===Ac)if(oA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),yd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;md(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===bl||e===ts)return;oA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=cr.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===ts||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===tf)return this._value.splice(0,n),QV;if(s===Ac){var A=this._value[n+1];A!==ts&&A!==void 0&&(A===tf?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):oA(s,A)&&(r+=this.consumeStringSlice(n),r+=cr(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=yu,n=this.peekCodePoint(0);for((n===Si||n===ln)&&e.push(this.consumeCodePoint());$r(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===Kc&&$r(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=JC;$r(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===oS||n===AS)&&((s===Si||s===ln)&&$r(A)||$r(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=JC;$r(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[vV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(wd(s,A,i)){var a=this.consumeName();return{type:15,number:r,flags:n,unit:a}}return s===HH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(vo(e)){for(var r=cr(e);vo(this.peekCodePoint(0))&&r.length<6;)r+=cr(this.consumeCodePoint());md(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||gV(n)||n>1114111?ZC:n}return e===ts?ZC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(eb(r))e+=cr(r);else if(oA(r,this.peekCodePoint(0)))e+=cr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),cS=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new lS;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||HV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?B0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),xu=function(t){return t.type===15},qa=function(t){return t.type===17},kt=function(t){return t.type===20},OV=function(t){return t.type===0},C0=function(t,e){return kt(t)&&t.value===e},uS=function(t){return t.type!==31},Fa=function(t){return t.type!==31&&t.type!==4},gs=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},HV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},YA=function(t){return t.type===17||t.type===15},gr=function(t){return t.type===16||YA(t)},dS=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Dr={type:17,number:0,flags:yu},Ky={type:16,number:50,flags:yu},CA={type:16,number:100,flags:yu},jl=function(t,e,r){var n=t[0],s=t[1];return[Mt(n,e),Mt(typeof s<"u"?s:n,r)]},Mt=function(t,e){if(t.type===16)return t.number/100*e;if(xu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},hS="deg",fS="grad",gS="rad",pS="turn",ug={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case hS:return Math.PI*e.number/180;case fS:return Math.PI/200*e.number;case gS:return e.number;case pS:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},mS=function(t){return t.type===15&&(t.unit===hS||t.unit===fS||t.unit===gS||t.unit===pS)},wS=function(t){var e=t.filter(kt).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Dr,Dr];case"to top":case"bottom":return Rn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Dr,CA];case"to right":case"left":return Rn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[CA,CA];case"to bottom":case"top":return Rn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[CA,Dr];case"to left":case"right":return Rn(270)}return 0},Rn=function(t){return Math.PI*t/180},LA={name:"color",parse:function(t,e){if(e.type===18){var r=VV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return bA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return bA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return bA(parseInt(n,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return bA(parseInt(n,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var a=ks[e.value.toUpperCase()];if(typeof a<"u")return a}return ks.TRANSPARENT}},jA=function(t){return(255&t)===0},br=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},bA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},tb=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},rb=function(t,e){var r=e.filter(Fa);if(r.length===3){var n=r.map(tb),s=n[0],A=n[1],i=n[2];return bA(s,A,i,1)}if(r.length===4){var a=r.map(tb),s=a[0],A=a[1],i=a[2],o=a[3];return bA(s,A,i,o)}return 0};function Bp(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var nb=function(t,e){var r=e.filter(Fa),n=r[0],s=r[1],A=r[2],i=r[3],a=(n.type===17?Rn(n.number):ug.parse(t,n))/(Math.PI*2),o=gr(s)?s.number/100:0,c=gr(A)?A.number/100:0,d=typeof i<"u"&&gr(i)?Mt(i,1):1;if(o===0)return bA(c*255,c*255,c*255,1);var h=c<=.5?c*(o+1):c+o-c*o,f=c*2-h,m=Bp(f,h,a+1/3),y=Bp(f,h,a),C=Bp(f,h,a-1/3);return bA(m*255,y*255,C*255,d)},VV={hsl:nb,hsla:nb,rgb:rb,rgba:rb},ic=function(t,e){return LA.parse(t,cS.create(e).parseComponentValue())},ks={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},KV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(kt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},GV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dg=function(t,e){var r=LA.parse(t,e[0]),n=e[1];return n&&gr(n)?{color:r,stop:n}:{color:r,stop:null}},sb=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Dr),n.stop===null&&(n.stop=CA);for(var s=[],A=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var o=Mt(a,e);o>A?s.push(o):s.push(A),A=o}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],m=(d-f)/(h+1),y=1;y<=h;y++)s[c+y-1]=m*y;c=null}}return t.map(function(C,I){var B=C.color;return{color:B,stop:Math.max(Math.min(1,s[I]/e),0)}})},zV=function(t,e,r){var n=e/2,s=r/2,A=Mt(t[0],e)-n,i=s-Mt(t[1],r);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},$V=function(t,e,r){var n=typeof t=="number"?t:zV(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,i=r/2,a=s/2,o=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[s,A-c,A+c,i-o,i+o]},Vn=function(t,e){return Math.sqrt(t*t+e*e)},Ab=function(t,e,r,n,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,a){var o=a[0],c=a[1],d=Vn(r-o,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:a,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},WV=function(t,e,r,n,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)A=i=Math.min(Vn(e,r),Vn(e,r-s),Vn(e-n,r),Vn(e-n,r-s));else if(t.shape===1){var a=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),o=Ab(n,s,e,r,!0),c=o[0],d=o[1];A=Vn(c-e,(d-r)/a),i=a*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)A=i=Math.max(Vn(e,r),Vn(e,r-s),Vn(e-n,r),Vn(e-n,r-s));else if(t.shape===1){var a=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=Ab(n,s,e,r,!1),c=h[0],d=h[1];A=Vn(c-e,(d-r)/a),i=a*A}break}return Array.isArray(t.size)&&(A=Mt(t.size[0],n),i=t.size.length===2?Mt(t.size[1],s):A),[A,i]},qV=function(t,e){var r=Rn(180),n=[];return gs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){r=wS(s);return}else if(mS(i)){r=ug.parse(t,i);return}}var a=dg(t,s);n.push(a)}),{angle:r,stops:n,type:1}},xd=function(t,e){var r=Rn(180),n=[];return gs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=wS(s);return}else if(mS(i)){r=(ug.parse(t,i)+Rn(270))%Rn(360);return}}var a=dg(t,s);n.push(a)}),{angle:r,stops:n,type:1}},JV=function(t,e){var r=Rn(180),n=[],s=1,A=0,i=3,a=[];return gs(e).forEach(function(o,c){var d=o[0];if(c===0){if(kt(d)&&d.value==="linear"){s=1;return}else if(kt(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=LA.parse(t,d.values[0]);n.push({stop:Dr,color:h})}else if(d.name==="to"){var h=LA.parse(t,d.values[0]);n.push({stop:CA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Fa);if(f.length===2){var h=LA.parse(t,f[1]),m=f[0];qa(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),s===1?{angle:(r+Rn(180))%Rn(360),stops:n,type:s}:{size:i,shape:A,stops:n,position:a,type:s}},yS="closest-side",xS="farthest-side",vS="closest-corner",BS="farthest-corner",CS="circle",bS="ellipse",_S="cover",IS="contain",XV=function(t,e){var r=0,n=3,s=[],A=[];return gs(e).forEach(function(i,a){var o=!0;if(a===0){var c=!1;o=i.reduce(function(h,f){if(c)if(kt(f))switch(f.value){case"center":return A.push(Ky),h;case"top":case"left":return A.push(Dr),h;case"right":case"bottom":return A.push(CA),h}else(gr(f)||YA(f))&&A.push(f);else if(kt(f))switch(f.value){case CS:return r=0,!1;case bS:return r=1,!1;case"at":return c=!0,!1;case yS:return n=0,!1;case _S:case xS:return n=1,!1;case IS:case vS:return n=2,!1;case BS:return n=3,!1}else if(YA(f)||gr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},o)}if(o){var d=dg(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:A,type:2}},vd=function(t,e){var r=0,n=3,s=[],A=[];return gs(e).forEach(function(i,a){var o=!0;if(a===0?o=i.reduce(function(d,h){if(kt(h))switch(h.value){case"center":return A.push(Ky),!1;case"top":case"left":return A.push(Dr),!1;case"right":case"bottom":return A.push(CA),!1}else if(gr(h)||YA(h))return A.push(h),!1;return d},o):a===1&&(o=i.reduce(function(d,h){if(kt(h))switch(h.value){case CS:return r=0,!1;case bS:return r=1,!1;case IS:case yS:return n=0,!1;case xS:return n=1,!1;case vS:return n=2,!1;case _S:case BS:return n=3,!1}else if(YA(h)||gr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},o)),o){var c=dg(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:A,type:2}},YV=function(t){return t.type===1},ZV=function(t){return t.type===2},Gy={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=ES[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function e3(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ES[t.name])}var ES={"linear-gradient":qV,"-moz-linear-gradient":xd,"-ms-linear-gradient":xd,"-o-linear-gradient":xd,"-webkit-linear-gradient":xd,"radial-gradient":XV,"-moz-radial-gradient":vd,"-ms-radial-gradient":vd,"-o-radial-gradient":vd,"-webkit-radial-gradient":vd,"-webkit-gradient":JV},t3={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Fa(n)&&e3(n)}).map(function(n){return Gy.parse(t,n)})}},r3={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(kt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},n3={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return gs(e).map(function(r){return r.filter(gr)}).map(dS)}},s3={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return gs(e).map(function(r){return r.filter(kt).map(function(n){return n.value}).join(" ")}).map(A3)}},A3=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},na;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(na||(na={}));var i3={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return gs(e).map(function(r){return r.filter(o3)})}},o3=function(t){return kt(t)||gr(t)},hg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},a3=hg("top"),l3=hg("right"),c3=hg("bottom"),u3=hg("left"),fg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return dS(r.filter(gr))}}},d3=fg("top-left"),h3=fg("top-right"),f3=fg("bottom-right"),g3=fg("bottom-left"),gg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},p3=gg("top"),m3=gg("right"),w3=gg("bottom"),y3=gg("left"),pg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return xu(r)?r.number:0}}},x3=pg("top"),v3=pg("right"),B3=pg("bottom"),C3=pg("left"),b3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},I3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(kt).reduce(function(r,n){return r|E3(n.value)},0)}},E3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},T3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},F3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},nf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(nf||(nf={}));var S3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return nf.STRICT;case"normal":default:return nf.NORMAL}}},U3={name:"line-height",initialValue:"normal",prefix:!1,type:4},ib=function(t,e){return kt(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:gr(t)?Mt(t,e):e},k3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Gy.parse(t,e)}},Q3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},b0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},mg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},N3=mg("top"),R3=mg("right"),D3=mg("bottom"),P3=mg("left"),L3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(kt).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},j3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},wg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},M3=wg("top"),O3=wg("right"),H3=wg("bottom"),V3=wg("left"),K3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},G3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},z3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&C0(e[0],"none")?[]:gs(e).map(function(r){for(var n={color:ks.TRANSPARENT,offsetX:Dr,offsetY:Dr,blur:Dr},s=0,A=0;A<r.length;A++){var i=r[A];YA(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=LA.parse(t,i)}return n})}},$3={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},W3={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=X3[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},q3=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},J3=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[r,n,s,A,i,a]:null},X3={matrix:q3,matrix3d:J3},ob={type:16,number:50,flags:yu},Y3=[ob,ob],Z3={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(gr);return r.length!==2?Y3:[r[0],r[1]]}},e5={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},oc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(oc||(oc={}));var t5={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return oc.BREAK_ALL;case"keep-all":return oc.KEEP_ALL;case"normal":default:return oc.NORMAL}}},r5={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(qa(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},TS={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},n5={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return qa(e)?e.number:1}},s5={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},A5={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(kt).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},i5={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},o5={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},a5={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(qa(e))return e.number;if(kt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},l5={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(kt).map(function(r){return r.value})}},c5={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},yr=function(t,e){return(t&e)!==0},u5={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},d5={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(uS),A=0;A<s.length;A++){var i=s[A],a=s[A+1];if(i.type===20){var o=a&&qa(a)?a.number:1;n.push({counter:i.value,increment:o})}}return n}},h5={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(uS),s=0;s<n.length;s++){var A=n[s],i=n[s+1];if(kt(A)&&A.value!=="none"){var a=i&&qa(i)?i.number:0;r.push({counter:A.value,reset:a})}}return r}},f5={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(xu).map(function(r){return TS.parse(t,r)})}},g5={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(OV);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,a=s[A+1].value;n.push({open:i,close:a})}return n}},ab=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},p5={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&C0(e[0],"none")?[]:gs(e).map(function(r){for(var n={color:255,offsetX:Dr,offsetY:Dr,blur:Dr,spread:Dr,inset:!1},s=0,A=0;A<r.length;A++){var i=r[A];C0(i,"inset")?n.inset=!0:YA(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=LA.parse(t,i)}return n})}},m5={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(kt).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},w5={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},y5={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return xu(e)?e.number:0}},x5=function(){function t(e,r){var n,s;this.animationDuration=De(e,f5,r.animationDuration),this.backgroundClip=De(e,KV,r.backgroundClip),this.backgroundColor=De(e,GV,r.backgroundColor),this.backgroundImage=De(e,t3,r.backgroundImage),this.backgroundOrigin=De(e,r3,r.backgroundOrigin),this.backgroundPosition=De(e,n3,r.backgroundPosition),this.backgroundRepeat=De(e,s3,r.backgroundRepeat),this.backgroundSize=De(e,i3,r.backgroundSize),this.borderTopColor=De(e,a3,r.borderTopColor),this.borderRightColor=De(e,l3,r.borderRightColor),this.borderBottomColor=De(e,c3,r.borderBottomColor),this.borderLeftColor=De(e,u3,r.borderLeftColor),this.borderTopLeftRadius=De(e,d3,r.borderTopLeftRadius),this.borderTopRightRadius=De(e,h3,r.borderTopRightRadius),this.borderBottomRightRadius=De(e,f3,r.borderBottomRightRadius),this.borderBottomLeftRadius=De(e,g3,r.borderBottomLeftRadius),this.borderTopStyle=De(e,p3,r.borderTopStyle),this.borderRightStyle=De(e,m3,r.borderRightStyle),this.borderBottomStyle=De(e,w3,r.borderBottomStyle),this.borderLeftStyle=De(e,y3,r.borderLeftStyle),this.borderTopWidth=De(e,x3,r.borderTopWidth),this.borderRightWidth=De(e,v3,r.borderRightWidth),this.borderBottomWidth=De(e,B3,r.borderBottomWidth),this.borderLeftWidth=De(e,C3,r.borderLeftWidth),this.boxShadow=De(e,p5,r.boxShadow),this.color=De(e,b3,r.color),this.direction=De(e,_3,r.direction),this.display=De(e,I3,r.display),this.float=De(e,T3,r.cssFloat),this.fontFamily=De(e,i5,r.fontFamily),this.fontSize=De(e,o5,r.fontSize),this.fontStyle=De(e,c5,r.fontStyle),this.fontVariant=De(e,l5,r.fontVariant),this.fontWeight=De(e,a5,r.fontWeight),this.letterSpacing=De(e,F3,r.letterSpacing),this.lineBreak=De(e,S3,r.lineBreak),this.lineHeight=De(e,U3,r.lineHeight),this.listStyleImage=De(e,k3,r.listStyleImage),this.listStylePosition=De(e,Q3,r.listStylePosition),this.listStyleType=De(e,b0,r.listStyleType),this.marginTop=De(e,N3,r.marginTop),this.marginRight=De(e,R3,r.marginRight),this.marginBottom=De(e,D3,r.marginBottom),this.marginLeft=De(e,P3,r.marginLeft),this.opacity=De(e,n5,r.opacity);var A=De(e,L3,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=De(e,j3,r.overflowWrap),this.paddingTop=De(e,M3,r.paddingTop),this.paddingRight=De(e,O3,r.paddingRight),this.paddingBottom=De(e,H3,r.paddingBottom),this.paddingLeft=De(e,V3,r.paddingLeft),this.paintOrder=De(e,m5,r.paintOrder),this.position=De(e,G3,r.position),this.textAlign=De(e,K3,r.textAlign),this.textDecorationColor=De(e,s5,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=De(e,A5,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=De(e,z3,r.textShadow),this.textTransform=De(e,$3,r.textTransform),this.transform=De(e,W3,r.transform),this.transformOrigin=De(e,Z3,r.transformOrigin),this.visibility=De(e,e5,r.visibility),this.webkitTextStrokeColor=De(e,w5,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=De(e,y5,r.webkitTextStrokeWidth),this.wordBreak=De(e,t5,r.wordBreak),this.zIndex=De(e,r5,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return jA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return yr(this.display,4)||yr(this.display,33554432)||yr(this.display,268435456)||yr(this.display,536870912)||yr(this.display,67108864)||yr(this.display,134217728)},t}(),v5=function(){function t(e,r){this.content=De(e,u5,r.content),this.quotes=De(e,g5,r.quotes)}return t}(),lb=function(){function t(e,r){this.counterIncrement=De(e,d5,r.counterIncrement),this.counterReset=De(e,h5,r.counterReset)}return t}(),De=function(t,e,r){var n=new lS,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var A=new cS(n.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,kt(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return ug.parse(t,A.parseComponentValue());case"color":return LA.parse(t,A.parseComponentValue());case"image":return Gy.parse(t,A.parseComponentValue());case"length":var a=A.parseComponentValue();return YA(a)?a:Dr;case"length-percentage":var o=A.parseComponentValue();return gr(o)?o:Dr;case"time":return TS.parse(t,A.parseComponentValue())}break}},B5="data-html2canvas-debug",C5=function(t){var e=t.getAttribute(B5);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},_0=function(t,e){var r=C5(t);return r===1||e===r},ps=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,_0(r,3))debugger;this.styles=new x5(e,window.getComputedStyle(r,null)),T0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=lg(this.context,r),_0(r,4)&&(this.flags|=16)}return t}(),b5="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",cb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ml=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bd=0;Bd<cb.length;Bd++)Ml[cb.charCodeAt(Bd)]=Bd;var _5=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Ml[t.charCodeAt(n)],i=Ml[t.charCodeAt(n+1)],a=Ml[t.charCodeAt(n+2)],o=Ml[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|o&63;return c},I5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},E5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Di=5,zy=11,Cp=2,T5=zy-Di,FS=65536>>Di,F5=1<<Di,bp=F5-1,S5=1024>>Di,U5=FS+S5,k5=U5,Q5=32,N5=k5+Q5,R5=65536>>zy,D5=1<<T5,P5=D5-1,ub=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},L5=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},j5=function(t,e){var r=_5(t),n=Array.isArray(r)?E5(r):new Uint32Array(r),s=Array.isArray(r)?I5(r):new Uint16Array(r),A=24,i=ub(s,A/2,n[4]/2),a=n[5]===2?ub(s,(A+n[4])/2):L5(n,Math.ceil((A+n[4])/4));return new M5(n[0],n[1],n[2],n[3],i,a)},M5=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Di],r=(r<<Cp)+(e&bp),this.data[r];if(e<=65535)return r=this.index[FS+(e-55296>>Di)],r=(r<<Cp)+(e&bp),this.data[r];if(e<this.highStart)return r=N5-R5+(e>>zy),r=this.index[r],r+=e>>Di&P5,r=this.index[r],r=(r<<Cp)+(e&bp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),db="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cd=0;Cd<db.length;Cd++)O5[db.charCodeAt(Cd)]=Cd;var H5=1,_p=2,Ip=3,hb=4,fb=5,V5=7,gb=8,Ep=9,Tp=10,pb=11,mb=12,wb=13,yb=14,Fp=15,K5=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},G5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},z5=j5(b5),Sn="",Sp="",$5=function(t){return z5.get(t)},W5=function(t,e,r){var n=r-2,s=e[n],A=e[r-1],i=e[r];if(A===_p&&i===Ip)return Sn;if(A===_p||A===Ip||A===hb||i===_p||i===Ip||i===hb)return Sp;if(A===gb&&[gb,Ep,pb,mb].indexOf(i)!==-1||(A===pb||A===Ep)&&(i===Ep||i===Tp)||(A===mb||A===Tp)&&i===Tp||i===wb||i===fb||i===V5||A===H5)return Sn;if(A===wb&&i===yb){for(;s===fb;)s=e[--n];if(s===yb)return Sn}if(A===Fp&&i===Fp){for(var a=0;s===Fp;)a++,s=e[--n];if(a%2===0)return Sn}return Sp},q5=function(t){var e=K5(t),r=e.length,n=0,s=0,A=e.map($5);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Sn;n<r&&(i=W5(e,A,++n))===Sn;);if(i!==Sn||n===r){var a=G5.apply(null,e.slice(s,n));return s=n,{value:a,done:!1}}return{done:!0,value:null}}}},J5=function(t){for(var e=q5(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},X5=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(n),A===e)return!0}}return!1},Y5=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=cg(n.data).map(function(o){return cr(o)}),A=0,i={},a=s.every(function(o,c){r.setStart(n,A),r.setEnd(n,A+o.length);var d=r.getBoundingClientRect();A+=o.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),a},Z5=function(){return typeof new Image().crossOrigin<"u"},eK=function(){return typeof new XMLHttpRequest().responseType=="string"},tK=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},xb=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},rK=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,A=e.toDataURL();s.src=A;var i=I0(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),vb(i).then(function(a){n.drawImage(a,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=r+"px",xb(o)?vb(I0(r,r,0,0,c)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),xb(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},I0=function(t,e,r,n,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),a=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(s),i},vb=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Qr={get SUPPORT_RANGE_BOUNDS(){var t=X5(document);return Object.defineProperty(Qr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Qr.SUPPORT_RANGE_BOUNDS&&Y5(document);return Object.defineProperty(Qr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=tK(document);return Object.defineProperty(Qr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?rK(document):Promise.resolve(!1);return Object.defineProperty(Qr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Z5();return Object.defineProperty(Qr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=eK();return Object.defineProperty(Qr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ac=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),nK=function(t,e,r,n){var s=iK(e,r),A=[],i=0;return s.forEach(function(a){if(r.textDecorationLine.length||a.trim().length>0)if(Qr.SUPPORT_RANGE_BOUNDS){var o=Bb(n,i,a.length).getClientRects();if(o.length>1){var c=$y(a),d=0;c.forEach(function(f){A.push(new ac(f,Os.fromDOMRectList(t,Bb(n,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new ac(a,Os.fromDOMRectList(t,o)))}else{var h=n.splitText(a.length);A.push(new ac(a,sK(t,n))),n=h}else Qr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),A},sK=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var A=lg(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),A}}return Os.EMPTY},Bb=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},$y=function(t){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return J5(t)},AK=function(t,e){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return aK(t,e)},iK=function(t,e){return e.letterSpacing!==0?$y(t):AK(t,e)},oK=[32,160,4961,65792,65793,4153,4241],aK=function(t,e){for(var r=RH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,A=function(){if(s.value){var i=s.value.slice(),a=cg(i),o="";a.forEach(function(c){oK.indexOf(c)===-1?o+=cr(c):(o.length&&n.push(o),n.push(cr(c)),o="")}),o.length&&n.push(o)}};!(s=r.next()).done;)A();return n},lK=function(){function t(e,r,n){this.text=cK(r.data,n.textTransform),this.textBounds=nK(e,this.text,n,r)}return t}(),cK=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(uK,dK);case 2:return t.toUpperCase();default:return t}},uK=/(^|\s|:|-|\(|\))([a-z])/g,dK=function(t,e,r){return t.length>0?e+r.toUpperCase():t},SS=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(ps),US=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(ps),kS=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=new XMLSerializer,i=lg(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(ps),QS=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ps),E0=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(ps),hK=[{type:15,flags:0,unit:"px",number:3}],fK=[{type:16,flags:0,number:50}],gK=function(t){return t.width>t.height?new Os(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Os(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},pK=function(t){var e=t.type===mK?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},sf="checkbox",Af="radio",mK="password",Cb=707406591,Wy=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=pK(n),(s.type===sf||s.type===Af)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=gK(s.bounds)),s.type){case sf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=hK;break;case Af:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=fK;break}return s}return e}(ps),NS=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(ps),RS=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ps),DS=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=LS(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?ic(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):ks.TRANSPARENT,i=n.contentWindow.document.body?ic(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):ks.TRANSPARENT;s.backgroundColor=jA(A)?jA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(ps),wK=["OL","UL","MENU"],sh=function(t,e,r,n){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,jS(s)&&s.data.trim().length>0)r.textNodes.push(new lK(t,s,r.styles));else if(Go(s))if(VS(s)&&s.assignedNodes)s.assignedNodes().forEach(function(a){return sh(t,a,r,n)});else{var i=PS(t,s);i.styles.isVisible()&&(yK(s,i,n)?i.flags|=4:xK(i.styles)&&(i.flags|=2),wK.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?sh(t,s.shadowRoot,i,n):!of(s)&&!MS(s)&&!af(s)&&sh(t,s,i,n))}},PS=function(t,e){return F0(e)?new SS(t,e):OS(e)?new US(t,e):MS(e)?new kS(t,e):vK(e)?new QS(t,e):BK(e)?new E0(t,e):CK(e)?new Wy(t,e):af(e)?new NS(t,e):of(e)?new RS(t,e):HS(e)?new DS(t,e):new ps(t,e)},LS=function(t,e){var r=PS(t,e);return r.flags|=4,sh(t,e,r,r),r},yK=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||qy(t)&&r.styles.isTransparent()},xK=function(t){return t.isPositioned()||t.isFloating()},jS=function(t){return t.nodeType===Node.TEXT_NODE},Go=function(t){return t.nodeType===Node.ELEMENT_NODE},T0=function(t){return Go(t)&&typeof t.style<"u"&&!Ah(t)},Ah=function(t){return typeof t.className=="object"},vK=function(t){return t.tagName==="LI"},BK=function(t){return t.tagName==="OL"},CK=function(t){return t.tagName==="INPUT"},bK=function(t){return t.tagName==="HTML"},MS=function(t){return t.tagName==="svg"},qy=function(t){return t.tagName==="BODY"},OS=function(t){return t.tagName==="CANVAS"},bb=function(t){return t.tagName==="VIDEO"},F0=function(t){return t.tagName==="IMG"},HS=function(t){return t.tagName==="IFRAME"},_b=function(t){return t.tagName==="STYLE"},_K=function(t){return t.tagName==="SCRIPT"},of=function(t){return t.tagName==="TEXTAREA"},af=function(t){return t.tagName==="SELECT"},VS=function(t){return t.tagName==="SLOT"},Ib=function(t){return t.tagName.indexOf("-")>0},IK=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,A=!0;n!==null&&n.forEach(function(a){var o=r.counters[a.counter];o&&a.increment!==0&&(A=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=a.increment)});var i=[];return A&&s.forEach(function(a){var o=r.counters[a.counter];i.push(a.counter),o||(o=r.counters[a.counter]=[]),o.push(a.reset)}),i},t}(),Eb={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Tb={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},EK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},TK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Bo=function(t,e,r,n,s,A){return t<e||t>r?Gc(t,s,A.length>0):n.integers.reduce(function(i,a,o){for(;t>=a;)t-=a,i+=n.values[o];return i},"")+A},KS=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},lr=function(t,e,r,n,s){var A=r-e+1;return(t<0?"-":"")+(KS(Math.abs(t),A,n,function(i){return cr(Math.floor(i%A)+e)})+s)},mi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return KS(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Fo=1,nA=2,sA=4,Ol=8,xs=function(t,e,r,n,s,A){if(t<-9999||t>9999)return Gc(t,4,s.length>0);var i=Math.abs(t),a=s;if(i===0)return e[0]+a;for(var o=0;i>0&&o<=4;o++){var c=i%10;c===0&&yr(A,Fo)&&a!==""?a=e[c]+a:c>1||c===1&&o===0||c===1&&o===1&&yr(A,nA)||c===1&&o===1&&yr(A,sA)&&t>100||c===1&&o>1&&yr(A,Ol)?a=e[c]+(o>0?r[o-1]:"")+a:c===1&&o>0&&(a=r[o-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},Fb="",Sb="",Ub="",Up="",Gc=function(t,e,r){var n=r?". ":"",s=r?"":"",A=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=lr(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return mi(t,"",s);case 6:return Bo(t,1,3999,Eb,3,n).toLowerCase();case 7:return Bo(t,1,3999,Eb,3,n);case 8:return lr(t,945,969,!1,n);case 9:return lr(t,97,122,!1,n);case 10:return lr(t,65,90,!1,n);case 11:return lr(t,1632,1641,!0,n);case 12:case 49:return Bo(t,1,9999,Tb,3,n);case 35:return Bo(t,1,9999,Tb,3,n).toLowerCase();case 13:return lr(t,2534,2543,!0,n);case 14:case 30:return lr(t,6112,6121,!0,n);case 15:return mi(t,"",s);case 16:return mi(t,"",s);case 17:case 48:return xs(t,"",Fb,"",s,nA|sA|Ol);case 47:return xs(t,"",Sb,"",s,Fo|nA|sA|Ol);case 42:return xs(t,"",Fb,"",s,nA|sA|Ol);case 41:return xs(t,"",Sb,"",s,Fo|nA|sA|Ol);case 26:return xs(t,"","",Ub,s,0);case 25:return xs(t,"","",Ub,s,Fo|nA|sA);case 31:return xs(t,"","",Up,A,Fo|nA|sA);case 33:return xs(t,"","",Up,A,0);case 32:return xs(t,"","",Up,A,Fo|nA|sA);case 18:return lr(t,2406,2415,!0,n);case 20:return Bo(t,1,19999,TK,3,n);case 21:return lr(t,2790,2799,!0,n);case 22:return lr(t,2662,2671,!0,n);case 22:return Bo(t,1,10999,EK,3,n);case 23:return mi(t,"");case 24:return mi(t,"");case 27:return lr(t,3302,3311,!0,n);case 28:return mi(t,"",s);case 29:return mi(t,"",s);case 34:return lr(t,3792,3801,!0,n);case 37:return lr(t,6160,6169,!0,n);case 38:return lr(t,4160,4169,!0,n);case 39:return lr(t,2918,2927,!0,n);case 40:return lr(t,1776,1785,!0,n);case 43:return lr(t,3046,3055,!0,n);case 44:return lr(t,3174,3183,!0,n);case 45:return lr(t,3664,3673,!0,n);case 46:return lr(t,3872,3881,!0,n);case 3:default:return lr(t,48,57,!0,n)}},GS="data-html2canvas-ignore",kb=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new IK,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=FK(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=s.contentWindow,o=a.document,c=kK(s).then(function(){return Zr(n,void 0,void 0,function(){var d,h;return Gr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(DK),a&&(a.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-r.left,a.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,UK(o)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(o,h)}).then(function(){return s})]:[2,s]}})})});return o.open(),o.write(NK(document.doctype)+"<html></html>"),RK(this.referenceElement.ownerDocument,A,i),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),c},t.prototype.createElementClone=function(e){if(_0(e,2))debugger;if(OS(e))return this.createCanvasClone(e);if(bb(e))return this.createVideoClone(e);if(_b(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return F0(r)&&(F0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Ib(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return kp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var a=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(a){var o=a.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!Go(r)||!_K(r)&&!r.hasAttribute(GS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Go(r)||!_b(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(Go(A)&&VS(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(a){return s.appendChildNode(r,a,n)})}else this.appendChildNode(r,A,n)},t.prototype.cloneNode=function(e,r){if(jS(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Go(e)&&(T0(e)||Ah(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&T0(s)&&(this.clonedReferenceElement=s),qy(s)&&jK(s);var o=this.counters.parse(new lb(this.context,A)),c=this.resolvePseudoContent(e,s,i,lc.BEFORE);Ib(e)&&(r=!0),bb(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,a,lc.AFTER);return d&&s.appendChild(d),this.counters.pop(o),(A&&(this.options.copyStyles||Ah(e))&&!HS(e)||r)&&kp(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(of(e)||af(e))&&(of(s)||af(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var A=this;if(n){var i=n.content,a=r.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new lb(this.context,n));var o=new v5(this.context,n),c=a.createElement("html2canvaspseudoelement");kp(n,c),o.content.forEach(function(h){if(h.type===0)c.appendChild(a.createTextNode(h.value));else if(h.type===22){var f=a.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(kt);m.length&&c.appendChild(a.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(Fa),C=y[0],I=y[1];if(C&&kt(C)){var B=A.counters.getCounterValue(C.value),w=I&&kt(I)?b0.parse(A.context,I.value):3;c.appendChild(a.createTextNode(Gc(B,w,!1)))}}else if(h.name==="counters"){var b=h.values.filter(Fa),C=b[0],F=b[1],I=b[2];if(C&&kt(C)){var Q=A.counters.getCounterValues(C.value),D=I&&kt(I)?b0.parse(A.context,I.value):3,x=F&&F.type===0?F.value:"",v=Q.map(function(R){return Gc(R,D,!1)}).join(x);c.appendChild(a.createTextNode(v))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(a.createTextNode(ab(o.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(ab(o.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(h.value))}}),c.className=S0+" "+U0;var d=s===lc.BEFORE?" "+S0:" "+U0;return Ah(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),lc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(lc||(lc={}));var FK=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(GS,"true"),t.body.appendChild(r),r},SK=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},UK=function(t){return Promise.all([].slice.call(t.images,0).map(SK))},kK=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},QK=["all","d","content"],kp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);QK.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},NK=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},RK=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},DK=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},PK=":before",LK=":after",S0="___html2canvas___pseudoelement_before",U0="___html2canvas___pseudoelement_after",Qb=`{
    content: "" !important;
    display: none !important;
}`,jK=function(t){MK(t,"."+S0+PK+Qb+`
         .`+U0+LK+Qb)},MK=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},zS=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),OK=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Np(e)||GK(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Zr(this,void 0,void 0,function(){var r,n,s,A,i=this;return Gr(this,function(a){switch(a.label){case 0:return r=zS.isSameOrigin(e),n=!Qp(e)&&this._options.useCORS===!0&&Qr.SUPPORT_CORS_IMAGES&&!r,s=!Qp(e)&&!r&&!Np(e)&&typeof this._options.proxy=="string"&&Qr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Qp(e)&&!Np(e)&&!s&&!n?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,c){var d=new Image;d.onload=function(){return o(d)},d.onerror=c,(zK(A)||n)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return o(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var a=Qr.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(a==="text")A(o.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(o.response)}else i("Failed to proxy resource "+s+" with status code "+o.status)},o.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=a),r._options.imageTimeout){var d=r._options.imageTimeout;o.timeout=d,o.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}o.send()})},t}(),HK=/^data:image\/svg\+xml/i,VK=/^data:image\/.*;base64,/i,KK=/^data:image\/.*/i,GK=function(t){return Qr.SUPPORT_SVG_DRAWING||!$K(t)},Qp=function(t){return KK.test(t)},zK=function(t){return VK.test(t)},Np=function(t){return t.substr(0,4)==="blob"},$K=function(t){return t.substr(-3).toLowerCase()==="svg"||HK.test(t)},Qe=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Co=function(t,e,r){return new Qe(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},bd=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Co(this.start,this.startControl,e),s=Co(this.startControl,this.endControl,e),A=Co(this.endControl,this.end,e),i=Co(n,s,e),a=Co(s,A,e),o=Co(i,a,e);return r?new t(this.start,n,i,o):new t(o,a,A,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Qn=function(t){return t.type===1},WK=function(){function t(e){var r=e.styles,n=e.bounds,s=jl(r.borderTopLeftRadius,n.width,n.height),A=s[0],i=s[1],a=jl(r.borderTopRightRadius,n.width,n.height),o=a[0],c=a[1],d=jl(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],m=jl(r.borderBottomLeftRadius,n.width,n.height),y=m[0],C=m[1],I=[];I.push((A+o)/n.width),I.push((y+h)/n.width),I.push((i+C)/n.height),I.push((c+f)/n.height);var B=Math.max.apply(Math,I);B>1&&(A/=B,i/=B,o/=B,c/=B,h/=B,f/=B,y/=B,C/=B);var w=n.width-o,b=n.height-f,F=n.width-h,Q=n.height-C,D=r.borderTopWidth,x=r.borderRightWidth,v=r.borderBottomWidth,_=r.borderLeftWidth,S=Mt(r.paddingTop,e.bounds.width),R=Mt(r.paddingRight,e.bounds.width),P=Mt(r.paddingBottom,e.bounds.width),k=Mt(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?qt(n.left+_/3,n.top+D/3,A-_/3,i-D/3,It.TOP_LEFT):new Qe(n.left+_/3,n.top+D/3),this.topRightBorderDoubleOuterBox=A>0||i>0?qt(n.left+w,n.top+D/3,o-x/3,c-D/3,It.TOP_RIGHT):new Qe(n.left+n.width-x/3,n.top+D/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?qt(n.left+F,n.top+b,h-x/3,f-v/3,It.BOTTOM_RIGHT):new Qe(n.left+n.width-x/3,n.top+n.height-v/3),this.bottomLeftBorderDoubleOuterBox=y>0||C>0?qt(n.left+_/3,n.top+Q,y-_/3,C-v/3,It.BOTTOM_LEFT):new Qe(n.left+_/3,n.top+n.height-v/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?qt(n.left+_*2/3,n.top+D*2/3,A-_*2/3,i-D*2/3,It.TOP_LEFT):new Qe(n.left+_*2/3,n.top+D*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?qt(n.left+w,n.top+D*2/3,o-x*2/3,c-D*2/3,It.TOP_RIGHT):new Qe(n.left+n.width-x*2/3,n.top+D*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?qt(n.left+F,n.top+b,h-x*2/3,f-v*2/3,It.BOTTOM_RIGHT):new Qe(n.left+n.width-x*2/3,n.top+n.height-v*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||C>0?qt(n.left+_*2/3,n.top+Q,y-_*2/3,C-v*2/3,It.BOTTOM_LEFT):new Qe(n.left+_*2/3,n.top+n.height-v*2/3),this.topLeftBorderStroke=A>0||i>0?qt(n.left+_/2,n.top+D/2,A-_/2,i-D/2,It.TOP_LEFT):new Qe(n.left+_/2,n.top+D/2),this.topRightBorderStroke=A>0||i>0?qt(n.left+w,n.top+D/2,o-x/2,c-D/2,It.TOP_RIGHT):new Qe(n.left+n.width-x/2,n.top+D/2),this.bottomRightBorderStroke=h>0||f>0?qt(n.left+F,n.top+b,h-x/2,f-v/2,It.BOTTOM_RIGHT):new Qe(n.left+n.width-x/2,n.top+n.height-v/2),this.bottomLeftBorderStroke=y>0||C>0?qt(n.left+_/2,n.top+Q,y-_/2,C-v/2,It.BOTTOM_LEFT):new Qe(n.left+_/2,n.top+n.height-v/2),this.topLeftBorderBox=A>0||i>0?qt(n.left,n.top,A,i,It.TOP_LEFT):new Qe(n.left,n.top),this.topRightBorderBox=o>0||c>0?qt(n.left+w,n.top,o,c,It.TOP_RIGHT):new Qe(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?qt(n.left+F,n.top+b,h,f,It.BOTTOM_RIGHT):new Qe(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||C>0?qt(n.left,n.top+Q,y,C,It.BOTTOM_LEFT):new Qe(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||i>0?qt(n.left+_,n.top+D,Math.max(0,A-_),Math.max(0,i-D),It.TOP_LEFT):new Qe(n.left+_,n.top+D),this.topRightPaddingBox=o>0||c>0?qt(n.left+Math.min(w,n.width-x),n.top+D,w>n.width+x?0:Math.max(0,o-x),Math.max(0,c-D),It.TOP_RIGHT):new Qe(n.left+n.width-x,n.top+D),this.bottomRightPaddingBox=h>0||f>0?qt(n.left+Math.min(F,n.width-_),n.top+Math.min(b,n.height-v),Math.max(0,h-x),Math.max(0,f-v),It.BOTTOM_RIGHT):new Qe(n.left+n.width-x,n.top+n.height-v),this.bottomLeftPaddingBox=y>0||C>0?qt(n.left+_,n.top+Math.min(Q,n.height-v),Math.max(0,y-_),Math.max(0,C-v),It.BOTTOM_LEFT):new Qe(n.left+_,n.top+n.height-v),this.topLeftContentBox=A>0||i>0?qt(n.left+_+k,n.top+D+S,Math.max(0,A-(_+k)),Math.max(0,i-(D+S)),It.TOP_LEFT):new Qe(n.left+_+k,n.top+D+S),this.topRightContentBox=o>0||c>0?qt(n.left+Math.min(w,n.width+_+k),n.top+D+S,w>n.width+_+k?0:o-_+k,c-(D+S),It.TOP_RIGHT):new Qe(n.left+n.width-(x+R),n.top+D+S),this.bottomRightContentBox=h>0||f>0?qt(n.left+Math.min(F,n.width-(_+k)),n.top+Math.min(b,n.height+D+S),Math.max(0,h-(x+R)),f-(v+P),It.BOTTOM_RIGHT):new Qe(n.left+n.width-(x+R),n.top+n.height-(v+P)),this.bottomLeftContentBox=y>0||C>0?qt(n.left+_+k,n.top+Q,Math.max(0,y-(_+k)),C-(v+P),It.BOTTOM_LEFT):new Qe(n.left+_+k,n.top+n.height-(v+P))}return t}(),It;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(It||(It={}));var qt=function(t,e,r,n,s){var A=4*((Math.sqrt(2)-1)/3),i=r*A,a=n*A,o=t+r,c=e+n;switch(s){case It.TOP_LEFT:return new bd(new Qe(t,c),new Qe(t,c-a),new Qe(o-i,e),new Qe(o,e));case It.TOP_RIGHT:return new bd(new Qe(t,e),new Qe(t+i,e),new Qe(o,c-a),new Qe(o,c));case It.BOTTOM_RIGHT:return new bd(new Qe(o,e),new Qe(o,e+a),new Qe(t+i,c),new Qe(t,c));case It.BOTTOM_LEFT:default:return new bd(new Qe(o,c),new Qe(o-i,c),new Qe(t,e+a),new Qe(t,e))}},lf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},qK=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},cf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},JK=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),_d=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),XK=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),YK=function(t){return t.type===0},$S=function(t){return t.type===1},ZK=function(t){return t.type===2},Nb=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},e6=function(t,e,r,n,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+s);case 3:return A.add(e,r+s)}return A})},WS=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),qS=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new WK(this.container),this.container.styles.opacity<1&&this.effects.push(new XK(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new JK(n,s,A))}if(this.container.styles.overflowX!==0){var i=lf(this.curves),a=cf(this.curves);Nb(i,a)?this.effects.push(new _d(i,6)):(this.effects.push(new _d(i,2)),this.effects.push(new _d(a,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var A=n.effects.filter(function(o){return!$S(o)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=lf(n.curves),a=cf(n.curves);Nb(i,a)||s.unshift(new _d(a,6))}}else s.unshift.apply(s,A);n=n.parent}return s.filter(function(o){return yr(o.target,e)})},t}(),k0=function(t,e,r,n){t.container.elements.forEach(function(s){var A=yr(s.flags,4),i=yr(s.flags,2),a=new qS(s,t);yr(s.styles.display,2048)&&n.push(a);var o=yr(s.flags,8)?[]:n;if(A||i){var c=A||s.styles.isPositioned()?r:e,d=new WS(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(y,C){return h>y.element.container.styles.zIndex.order?(f=C,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(y,C){return h>=y.element.container.styles.zIndex.order?(m=C+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);k0(a,d,A?d:r,o)}else s.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),k0(a,e,r,o);yr(s.flags,8)&&JS(s,o)})},JS=function(t,e){for(var r=t instanceof E0?t.start:1,n=t instanceof E0?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof QS&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=Gc(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},t6=function(t){var e=new qS(t,null),r=new WS(e),n=[];return k0(e,r,r,n),JS(e.container,n),r},Rb=function(t,e){switch(e){case 0:return Dn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Dn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Dn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Dn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},r6=function(t,e){switch(e){case 0:return Dn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Dn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Dn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Dn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},n6=function(t,e){switch(e){case 0:return Dn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Dn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Dn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Dn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},s6=function(t,e){switch(e){case 0:return Id(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Id(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Id(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Id(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Id=function(t,e){var r=[];return Qn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Qn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Dn=function(t,e,r,n){var s=[];return Qn(t)?s.push(t.subdivide(.5,!1)):s.push(t),Qn(r)?s.push(r.subdivide(.5,!0)):s.push(r),Qn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Qn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},XS=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},uf=function(t){var e=t.styles,r=t.bounds,n=Mt(e.paddingLeft,r.width),s=Mt(e.paddingRight,r.width),A=Mt(e.paddingTop,r.width),i=Mt(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},A6=function(t,e){return t===0?e.bounds:t===2?uf(e):XS(e)},i6=function(t,e){return t===0?e.bounds:t===2?uf(e):XS(e)},Rp=function(t,e,r){var n=A6(So(t.styles.backgroundOrigin,e),t),s=i6(So(t.styles.backgroundClip,e),t),A=o6(So(t.styles.backgroundSize,e),r,n),i=A[0],a=A[1],o=jl(So(t.styles.backgroundPosition,e),n.width-i,n.height-a),c=a6(So(t.styles.backgroundRepeat,e),o,A,n,s),d=Math.round(n.left+o[0]),h=Math.round(n.top+o[1]);return[c,d,h,i,a]},bo=function(t){return kt(t)&&t.value===na.AUTO},Ed=function(t){return typeof t=="number"},o6=function(t,e,r){var n=e[0],s=e[1],A=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(gr(i)&&a&&gr(a))return[Mt(i,r.width),Mt(a,r.height)];var o=Ed(A);if(kt(i)&&(i.value===na.CONTAIN||i.value===na.COVER)){if(Ed(A)){var c=r.width/r.height;return c<A!=(i.value===na.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var d=Ed(n),h=Ed(s),f=d||h;if(bo(i)&&(!a||bo(a))){if(d&&h)return[n,s];if(!o&&!f)return[r.width,r.height];if(f&&o){var m=d?n:s*A,y=h?s:n/A;return[m,y]}var C=d?n:r.width,I=h?s:r.height;return[C,I]}if(o){var B=0,w=0;return gr(i)?B=Mt(i,r.width):gr(a)&&(w=Mt(a,r.height)),bo(i)?B=w*A:(!a||bo(a))&&(w=B/A),[B,w]}var b=null,F=null;if(gr(i)?b=Mt(i,r.width):a&&gr(a)&&(F=Mt(a,r.height)),b!==null&&(!a||bo(a))&&(F=d&&h?b/n*s:r.height),F!==null&&bo(i)&&(b=d&&h?F/s*n:r.width),b!==null&&F!==null)return[b,F];throw new Error("Unable to calculate background-size for element")},So=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},a6=function(t,e,r,n,s){var A=e[0],i=e[1],a=r[0],o=r[1];switch(t){case 2:return[new Qe(Math.round(n.left),Math.round(n.top+i)),new Qe(Math.round(n.left+n.width),Math.round(n.top+i)),new Qe(Math.round(n.left+n.width),Math.round(o+n.top+i)),new Qe(Math.round(n.left),Math.round(o+n.top+i))];case 3:return[new Qe(Math.round(n.left+A),Math.round(n.top)),new Qe(Math.round(n.left+A+a),Math.round(n.top)),new Qe(Math.round(n.left+A+a),Math.round(n.height+n.top)),new Qe(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new Qe(Math.round(n.left+A),Math.round(n.top+i)),new Qe(Math.round(n.left+A+a),Math.round(n.top+i)),new Qe(Math.round(n.left+A+a),Math.round(n.top+i+o)),new Qe(Math.round(n.left+A),Math.round(n.top+i+o))];default:return[new Qe(Math.round(s.left),Math.round(s.top)),new Qe(Math.round(s.left+s.width),Math.round(s.top)),new Qe(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Qe(Math.round(s.left),Math.round(s.height+s.top))]}},l6="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Db="Hidden Text",c6=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=l6,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(Db)),n.appendChild(A),n.appendChild(s);var a=s.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode(Db)),n.style.lineHeight="normal",s.style.verticalAlign="super";var o=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),YS=function(){function t(e,r){this.context=e,this.options=r}return t}(),u6=1e4,d6=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new c6(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),ZK(r)&&(this.ctx.globalAlpha=r.opacity),YK(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),$S(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Zr(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Zr(this,void 0,void 0,function(){return Gr(this,function(n){switch(n.label){case 0:if(yr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=$y(r.text);i.reduce(function(a,o){return A.ctx.fillText(o,a,r.bounds.top+s),a+A.ctx.measureText(o).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=m6(r.fontFamily).join(", "),A=xu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(r,n){return Zr(this,void 0,void 0,function(){var s,A,i,a,o,c,d,h,f=this;return Gr(this,function(m){return s=this.createFontStyle(n),A=s[0],i=s[1],a=s[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),c=o.baseline,d=o.middle,h=n.paintOrder,r.textBounds.forEach(function(y){h.forEach(function(C){switch(C){case 0:f.ctx.fillStyle=br(n.color),f.renderTextWithLetterSpacing(y,n.letterSpacing,c);var I=n.textShadow;I.length&&y.text.trim().length&&(I.slice(0).reverse().forEach(function(B){f.ctx.shadowColor=br(B.color),f.ctx.shadowOffsetX=B.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=B.offsetY.number*f.options.scale,f.ctx.shadowBlur=B.blur.number,f.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=br(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(B){switch(B){case 1:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:f.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(f.ctx.strokeStyle=br(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=uf(r),i=cf(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Zr(this,void 0,void 0,function(){var n,s,A,i,a,o,w,w,c,d,h,f,F,m,y,Q,C,I,B,w,b,F,Q;return Gr(this,function(D){switch(D.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,A=n.styles,i=0,a=n.textNodes,D.label=1;case 1:return i<a.length?(o=a[i],[4,this.renderTextNode(o,A)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof SS))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=D.sent(),this.renderReplacedElement(n,s,w),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof US&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof kS))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=D.sent(),this.renderReplacedElement(n,s,w),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof DS&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=D.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),D.label=14;case 14:if(n instanceof Wy&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===sf?n.checked&&(this.ctx.save(),this.path([new Qe(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Qe(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Qe(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Qe(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Qe(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Qe(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Qe(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=br(Cb),this.ctx.fill(),this.ctx.restore()):n.type===Af&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=br(Cb),this.ctx.fill(),this.ctx.restore())),h6(n)&&n.value.length){switch(f=this.createFontStyle(A),F=f[0],m=f[1],y=this.fontMetrics.getMetrics(F,m).baseline,this.ctx.font=F,this.ctx.fillStyle=br(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=g6(n.styles.textAlign),Q=uf(n),C=0,n.styles.textAlign){case 1:C+=Q.width/2;break;case 2:C+=Q.width;break}I=Q.add(C,0,0,-Q.height/2+1),this.ctx.save(),this.path([new Qe(Q.left,Q.top),new Qe(Q.left+Q.width,Q.top),new Qe(Q.left+Q.width,Q.top+Q.height),new Qe(Q.left,Q.top+Q.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ac(n.value,I),A.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!yr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(B=n.styles.listStyleImage,B.type!==0)return[3,18];w=void 0,b=B.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return w=D.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(A)[0],this.ctx.font=F,this.ctx.fillStyle=br(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Q=new Os(n.bounds.left,n.bounds.top+Mt(n.styles.paddingTop,n.bounds.width),n.bounds.width,ib(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ac(r.listValue,Q),A.letterSpacing,ib(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Zr(this,void 0,void 0,function(){var n,s,B,A,i,B,a,o,B,c,d,B,h,f,B,m,y,B,C,I,B;return Gr(this,function(w){switch(w.label){case 0:if(yr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,s=r.negativeZIndex,w.label=2;case 2:return n<s.length?(B=s[n],[4,this.renderStack(B)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),A=0,i=r.nonInlineLevel,w.label=7;case 7:return A<i.length?(B=i[A],[4,this.renderNode(B)]):[3,10];case 8:w.sent(),w.label=9;case 9:return A++,[3,7];case 10:a=0,o=r.nonPositionedFloats,w.label=11;case 11:return a<o.length?(B=o[a],[4,this.renderStack(B)]):[3,14];case 12:w.sent(),w.label=13;case 13:return a++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(B=d[c],[4,this.renderStack(B)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,w.label=19;case 19:return h<f.length?(B=f[h],[4,this.renderNode(B)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:m=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<y.length?(B=y[m],[4,this.renderStack(B)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:C=0,I=r.positiveZIndex,w.label=27;case 27:return C<I.length?(B=I[C],[4,this.renderStack(B)]):[3,30];case 28:w.sent(),w.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,A){var i=Qn(s)?s.start:s;A===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Qn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(r,n,s){var A;if(r.width===n&&r.height===s)return r;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,s);var o=a.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,s),a},e.prototype.renderBackgroundImage=function(r){return Zr(this,void 0,void 0,function(){var n,s,A,i,a,o;return Gr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,f,m,S,$e,je,k,me,v,y,S,$e,je,k,me,C,I,B,w,b,F,Q,D,x,v,_,S,R,P,k,me,Ze,$e,je,ae,Fe,ke,st,We,Ye,gt,ee;return Gr(this,function(ze){switch(ze.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,ze.label=1;case 1:return ze.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=ze.sent(),[3,4];case 3:return ze.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=Rp(r,n,[h.width,h.height,h.width/h.height]),S=m[0],$e=m[1],je=m[2],k=m[3],me=m[4],v=A.ctx.createPattern(A.resizeImage(h,k,me),"repeat"),A.renderRepeat(S,v,$e,je)),[3,6];case 5:YV(d)?(y=Rp(r,n,[null,null,null]),S=y[0],$e=y[1],je=y[2],k=y[3],me=y[4],C=$V(d.angle,k,me),I=C[0],B=C[1],w=C[2],b=C[3],F=C[4],Q=document.createElement("canvas"),Q.width=k,Q.height=me,D=Q.getContext("2d"),x=D.createLinearGradient(B,b,w,F),sb(d.stops,I).forEach(function(He){return x.addColorStop(He.stop,br(He.color))}),D.fillStyle=x,D.fillRect(0,0,k,me),k>0&&me>0&&(v=A.ctx.createPattern(Q,"repeat"),A.renderRepeat(S,v,$e,je))):ZV(d)&&(_=Rp(r,n,[null,null,null]),S=_[0],R=_[1],P=_[2],k=_[3],me=_[4],Ze=d.position.length===0?[Ky]:d.position,$e=Mt(Ze[0],k),je=Mt(Ze[Ze.length-1],me),ae=WV(d,$e,je,k,me),Fe=ae[0],ke=ae[1],Fe>0&&ke>0&&(st=A.ctx.createRadialGradient(R+$e,P+je,0,R+$e,P+je,Fe),sb(d.stops,Fe*2).forEach(function(He){return st.addColorStop(He.stop,br(He.color))}),A.path(S),A.ctx.fillStyle=st,Fe!==ke?(We=r.bounds.left+.5*r.bounds.width,Ye=r.bounds.top+.5*r.bounds.height,gt=ke/Fe,ee=1/gt,A.ctx.save(),A.ctx.translate(We,Ye),A.ctx.transform(1,0,0,gt,0,0),A.ctx.translate(-We,-Ye),A.ctx.fillRect(R,ee*(P-Ye)+Ye,k,me*ee),A.ctx.restore()):A.ctx.fill())),ze.label=6;case 6:return n--,[2]}})},A=this,i=0,a=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<a.length?(o=a[i],[5,s(o)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Zr(this,void 0,void 0,function(){return Gr(this,function(A){return this.path(Rb(s,n)),this.ctx.fillStyle=br(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,A){return Zr(this,void 0,void 0,function(){var i,a;return Gr(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,A)]:[3,2];case 1:return o.sent(),[2];case 2:return i=r6(A,s),this.path(i),this.ctx.fillStyle=br(r),this.ctx.fill(),a=n6(A,s),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Zr(this,void 0,void 0,function(){var n,s,A,i,a,o,c,d,h=this;return Gr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!jA(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=f6(So(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),jA(n.backgroundColor)||(this.ctx.fillStyle=br(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var y=lf(r.curves),C=m.inset?0:u6,I=e6(y,-C+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(y),h.ctx.clip(),h.mask(I)):(h.mask(y),h.ctx.clip(),h.path(I)),h.ctx.shadowOffsetX=m.offsetX.number+C,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=br(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?br(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:a=0,o=0,c=A,f.label=3;case 3:return o<c.length?(d=c[o],d.style!==0&&!jA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,a,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,a,r.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,A,i){return Zr(this,void 0,void 0,function(){var a,o,c,d,h,f,m,y,C,I,B,w,b,F,Q,D,Q,D;return Gr(this,function(x){return this.ctx.save(),a=s6(A,s),o=Rb(A,s),i===2&&(this.path(o),this.ctx.clip()),Qn(o[0])?(c=o[0].start.x,d=o[0].start.y):(c=o[0].x,d=o[0].y),Qn(o[1])?(h=o[1].end.x,f=o[1].end.y):(h=o[1].x,f=o[1].y),s===0||s===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(o.slice(0,2)),y=n<3?n*3:n*2,C=n<3?n*2:n,i===3&&(y=n,C=n),I=!0,m<=y*2?I=!1:m<=y*2+C?(B=m/(2*y+C),y*=B,C*=B):(w=Math.floor((m+C)/(y+C)),b=(m-w*y)/(w-1),F=(m-(w+1)*y)/w,C=F<=0||Math.abs(C-b)<Math.abs(C-F)?b:F),I&&(i===3?this.ctx.setLineDash([0,y+C]):this.ctx.setLineDash([y,C])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=br(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Qn(o[0])&&(Q=o[3],D=o[0],this.ctx.beginPath(),this.formatPath([new Qe(Q.end.x,Q.end.y),new Qe(D.start.x,D.start.y)]),this.ctx.stroke()),Qn(o[1])&&(Q=o[1],D=o[2],this.ctx.beginPath(),this.formatPath([new Qe(Q.end.x,Q.end.y),new Qe(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Zr(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=t6(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(YS),h6=function(t){return t instanceof RS||t instanceof NS?!0:t instanceof Wy&&t.type!==Af&&t.type!==sf},f6=function(t,e){switch(t){case 0:return lf(e);case 2:return qK(e);case 1:default:return cf(e)}},g6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},p6=["-apple-system","system-ui"],m6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return p6.indexOf(e)===-1}):t},w6=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Zr(this,void 0,void 0,function(){var n,s;return Gr(this,function(A){switch(A.label){case 0:return n=I0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,y6(n)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(YS),y6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},x6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ad([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ad([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ad([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ad([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),v6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new x6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new OK(this,e)}return t.instanceCount=1,t}(),df=function(t,e){return e===void 0&&(e={}),B6(t,e)};typeof window<"u"&&zS.setContext(window);var B6=function(t,e){return Zr(void 0,void 0,void 0,function(){var r,n,s,A,i,a,o,c,d,h,f,m,y,C,I,B,w,b,F,Q,x,D,x,v,_,S,R,P,k,me,Ze,$e,je,ae,Fe,ke,st,We,Ye,gt;return Gr(this,function(ee){switch(ee.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(v=e.allowTaint)!==null&&v!==void 0?v:!1,imageTimeout:(_=e.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:e.proxy,useCORS:(S=e.useCORS)!==null&&S!==void 0?S:!1},A=u0({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(k=e.windowHeight)!==null&&k!==void 0?k:n.innerHeight,scrollX:(me=e.scrollX)!==null&&me!==void 0?me:n.pageXOffset,scrollY:(Ze=e.scrollY)!==null&&Ze!==void 0?Ze:n.pageYOffset},a=new Os(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),o=new v6(A,a),c=($e=e.foreignObjectRendering)!==null&&$e!==void 0?$e:!1,d={allowTaint:(je=e.allowTaint)!==null&&je!==void 0?je:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},o.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new kb(o,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=ee.sent(),y=qy(f)||bK(f)?eH(f.ownerDocument):lg(o,f),C=y.width,I=y.height,B=y.left,w=y.top,b=C6(o,f,e.backgroundColor),F={canvas:e.canvas,backgroundColor:b,scale:(Fe=(ae=e.scale)!==null&&ae!==void 0?ae:n.devicePixelRatio)!==null&&Fe!==void 0?Fe:1,x:((ke=e.x)!==null&&ke!==void 0?ke:0)+B,y:((st=e.y)!==null&&st!==void 0?st:0)+w,width:(We=e.width)!==null&&We!==void 0?We:Math.ceil(C),height:(Ye=e.height)!==null&&Ye!==void 0?Ye:Math.ceil(I)},c?(o.logger.debug("Document cloned, using foreign object rendering"),x=new w6(o,F),[4,x.render(f)]):[3,3];case 2:return Q=ee.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+B+","+w+" with size "+C+"x"+I+" using computed rendering"),o.logger.debug("Starting DOM parsing"),D=LS(o,f),b===D.styles.backgroundColor&&(D.styles.backgroundColor=ks.TRANSPARENT),o.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),x=new d6(o,F),[4,x.render(D)];case 4:Q=ee.sent(),ee.label=5;case 5:return(!((gt=e.removeContainer)!==null&&gt!==void 0)||gt)&&(kb.destroy(m)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,Q]}})})},C6=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?ic(t,getComputedStyle(n.documentElement).backgroundColor):ks.TRANSPARENT,A=n.body?ic(t,getComputedStyle(n.body).backgroundColor):ks.TRANSPARENT,i=typeof r=="string"?ic(t,r):r===null?ks.TRANSPARENT:4294967295;return e===n.documentElement?jA(s)?jA(A)?i:A:s:i};const b6=()=>{var te,ne,ue,oe;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=fs(),[i,a]=T.useState("teachers"),[o,c]=T.useState(!1),[d,h]=T.useState(null),[f,m]=T.useState({}),[y,C]=T.useState({}),[I,B]=T.useState({}),[w,b]=T.useState({}),[F,Q]=T.useState("preset_normal"),[D,x]=T.useState([]),[v,_]=T.useState(!1),[S,R]=T.useState(""),P=T.useRef(null),[k,me]=T.useState(null);T.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const L=s.bellPresets.find(z=>z.id===F);if(L){x(L.bells);return}}x(Qh)},[F,s.bellPresets]);const Ze=L=>{h(L||null),i==="teachers"?m(L?e.find(z=>z.id===L)??{}:{subjectIds:[],unavailableDates:[],shifts:[se.First,se.Second],telegramChatId:""}):i==="subjects"?C(L?t.find(z=>z.id===L)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?B(L?r.find(z=>z.id===L)??{}:{shift:se.First,studentsCount:25}):i==="rooms"&&b(L?n.find(z=>z.id===L)??{}:{capacity:30,type:""}),c(!0)},$e=async()=>{const L=()=>Math.random().toString(36).substr(2,9),z={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:y,key:"subjects"},classes:{list:r,form:I,key:"classes"},rooms:{list:n,form:w,key:"rooms"}};if(i==="bells"||!(i in z))return;const le=z[i],{list:de,form:Ee,key:Ce}=le;if(!Ee.name)return;let G=[...de];if(d)G=G.map(X=>X.id===d?{...X,...Ee}:X);else{const X=de.reduce((ce,Ke)=>Math.max(ce,Ke.order||0),0);G.push({...Ee,id:L(),order:X+1})}await A({[Ce]:G}),c(!1)},je=async L=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(z=>z.id!==L)});break;case"subjects":await A({subjects:t.filter(z=>z.id!==L)});break;case"classes":await A({classes:r.filter(z=>z.id!==L)});break;case"rooms":await A({rooms:n.filter(z=>z.id!==L)});break}},ae=(L,z)=>{me(z),L.dataTransfer.effectAllowed="move"},Fe=L=>{L.preventDefault()},ke=async(L,z)=>{if(k===null||k===z)return;const le=de=>{const Ee=[...de],[Ce]=Ee.splice(k,1);return Ee.splice(z,0,Ce),Ee.map((G,X)=>({...G,order:X}))};switch(i){case"teachers":{await A({teachers:le(e)});break}case"subjects":{await A({subjects:le(t)});break}case"classes":{await A({classes:le(r)});break}case"rooms":{await A({rooms:le(n)});break}}me(null)},st=(L,z,le,de)=>{const Ee=[...D],Ce=Ee.findIndex(G=>G.shift===L&&G.period===z&&G.day==="default");Ce>=0?Ee[Ce]={...Ee[Ce],[le]:de}:Ee.push({shift:L,period:z,[le]:de,start:"00:00",end:"00:00",day:"default"}),x(Ee)},We=(L,z)=>{const le=[...D],de=le.findIndex(Ee=>Ee.shift===L&&Ee.period===z&&Ee.day==="default");de>=0?le[de]={...le[de],cancelled:!le[de].cancelled}:le.push({shift:L,period:z,start:"00:00",end:"00:00",day:"default",cancelled:!0}),x(le)},Ye=async()=>{let L=[...s.bellPresets||[]];const z=L.findIndex(le=>le.id===F);z>=0?L[z]={...L[z],bells:D}:L.push({id:F,name:S||" ",bells:D}),await A({settings:{...s,bellPresets:L}}),alert(" !")},gt=()=>{R(""),_(!0)},ee=async()=>{if(!S)return;const L=`preset_${Math.random().toString(36).substr(2,9)}`,z=[...s.bellPresets||[]];z.push({id:L,name:S,bells:JSON.parse(JSON.stringify(D))}),await A({settings:{...s,bellPresets:z}}),Q(L),_(!1)},ze=async()=>{if(F==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const L=(s.bellPresets||[]).filter(z=>z.id!==F);await A({settings:{...s,bellPresets:L}}),Q("preset_normal")},He=async()=>{var L,z;window.confirm(`   "${(z=(L=s.bellPresets)==null?void 0:L.find(le=>le.id===F))==null?void 0:z.name}"   ?`)&&(await A({bellSchedule:D}),alert("  !"))},ct=async()=>{var le,de;if(!P.current)return;const L=await df(P.current,{scale:2,backgroundColor:"#ffffff"}),z=document.createElement("a");z.href=L.toDataURL("image/png"),z.download=`_${(de=(le=s.bellPresets)==null?void 0:le.find(Ee=>Ee.id===F))==null?void 0:de.name}.png`,document.body.appendChild(z),z.click(),document.body.removeChild(z)},ut=L=>{const z=f.shifts||[];z.includes(L)?m({...f,shifts:z.filter(le=>le!==L)}):m({...f,shifts:[...z,L]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(L=>l.jsxs("button",{onClick:()=>a(L.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===L.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(V,{name:L.icon,size:18})," ",L.label]},L.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>Ze(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(V,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(sd,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((L,z)=>l.jsxs("div",{draggable:!0,onDragStart:le=>ae(le,z),onDragOver:Fe,onDrop:le=>ke(le,z),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(V,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:L.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ze(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(V,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>je(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(V,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:L.birthDate?`: ${new Date(L.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[L.shifts.includes(se.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),L.shifts.includes(se.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:L.subjectIds.map(le=>{const de=t.find(Ee=>Ee.id===le);return de?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:de.color,color:"#334155"},children:de.name},le):null})})]},L.id))}),i==="subjects"&&l.jsx(sd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((L,z)=>l.jsxs("div",{draggable:!0,onDragStart:le=>ae(le,z),onDragOver:Fe,onDrop:le=>ke(le,z),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:L.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(V,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",L.difficulty,"  ",L.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ze(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(V,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>je(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(V,{name:"Trash2",size:16})})]})]},L.id))}),i==="classes"&&l.jsx(sd,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((L,z)=>l.jsxs("div",{draggable:!0,onDragStart:le=>ae(le,z),onDragOver:Fe,onDrop:le=>ke(le,z),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(V,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[L.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${L.shift===se.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[L.shift===se.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ze(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(V,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>je(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(V,{name:"Trash2",size:14})})]})]},L.id))}),i==="rooms"&&l.jsx(sd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((L,z)=>l.jsxs("div",{draggable:!0,onDragStart:le=>ae(le,z),onDragOver:Fe,onDrop:le=>ke(le,z),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(V,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(V,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",L.capacity,"  ",L.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ze(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(V,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>je(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(V,{name:"Trash2",size:16})})]})]},L.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-wrap items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:F,onChange:L=>Q(L.target.value),className:"appearance-none bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500 cursor-pointer",children:(s.bellPresets||[]).map(L=>l.jsx("option",{value:L.id,children:L.name},L.id))}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:l.jsx(V,{name:"Filter",size:14})})]}),l.jsx("button",{onClick:gt,className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition",title:"  ",children:l.jsx(V,{name:"Plus",size:18})}),l.jsx("button",{onClick:ze,className:"p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",title:" ",children:l.jsx(V,{name:"Trash2",size:18})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:Ye,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(V,{name:"Save",size:18}),"  "]}),l.jsxs("button",{onClick:He,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(V,{name:"CheckCircle",size:18}),"  "]}),l.jsxs("button",{onClick:ct,className:"px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition text-sm flex items-center gap-2",children:[l.jsx(V,{name:"Image",size:18})," PNG"]})]})]}),l.jsxs("div",{ref:P,className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 text-slate-900",children:[l.jsxs("h3",{className:"text-2xl font-black text-center mb-6 uppercase text-slate-800",children:[" : ",(ne=(te=s.bellPresets)==null?void 0:te.find(L=>L.id===F))==null?void 0:ne.name]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[se.First,se.Second].map(L=>l.jsxs("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white text-center ${L===se.First?"bg-indigo-600":"bg-purple-600"}`,children:L}),l.jsx("div",{className:"p-4 space-y-2 bg-white",children:an[L].map(z=>{const le=D.find(de=>de.shift===L&&de.period===z&&de.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-lg border ${le.cancelled?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded bg-white flex items-center justify-center font-black text-slate-500 shadow-sm border border-slate-200",children:z}),le.cancelled?l.jsx("div",{className:"flex-1 flex justify-center items-center",children:l.jsx("span",{className:"text-red-500 font-bold uppercase tracking-wider text-sm",children:" "})}):l.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[l.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:le.start,onChange:de=>st(L,z,"start",de.target.value)}),l.jsx("span",{className:"text-slate-400 font-bold",children:""}),l.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:le.end,onChange:de=>st(L,z,"end",de.target.value)})]}),l.jsx("button",{onClick:()=>We(L,z),className:`w-8 h-8 rounded flex items-center justify-center transition-colors ${le.cancelled?"bg-white text-emerald-500 hover:text-emerald-700":"text-slate-400 hover:text-red-500 hover:bg-red-50"}`,title:le.cancelled?" ":" ","data-html2canvas-ignore":"true",children:l.jsx(V,{name:le.cancelled?"RotateCcw":"X",size:16})})]},z)})})]},L))}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 flex justify-between items-end text-sm font-bold text-slate-500",children:[l.jsxs("div",{children:["",l.jsx("br",{})," "]}),l.jsx("div",{children:"____________"})]})]})]})]}),l.jsx(Ln,{isOpen:o,onClose:()=>c(!1),title:d?"":"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:L=>m({...f,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:L=>m({...f,birthDate:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:L=>m({...f,telegramChatId:L.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(ue=f.shifts)==null?void 0:ue.includes(se.First),onChange:()=>ut(se.First)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(oe=f.shifts)==null?void 0:oe.includes(se.Second),onChange:()=>ut(se.Second)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(L=>{var z;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(z=f.subjectIds)==null?void 0:z.includes(L.id),onChange:le=>{const de=f.subjectIds||[];m({...f,subjectIds:le.target.checked?[...de,L.id]:de.filter(Ee=>Ee!==L.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:L.name})]},L.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:y.name||"",onChange:L=>C({...y,name:L.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:y.color||"#ffffff",onChange:L=>C({...y,color:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.difficulty||5,onChange:L=>C({...y,difficulty:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.requiredRoomType,onChange:L=>C({...y,requiredRoomType:L.target.value}),children:zv.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:I.name||"",onChange:L=>B({...I,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.studentsCount||25,onChange:L=>B({...I,studentsCount:parseInt(L.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>B({...I,shift:se.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===se.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>B({...I,shift:se.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===se.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:w.name||"",onChange:L=>b({...w,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.capacity||30,onChange:L=>b({...w,capacity:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.type,onChange:L=>b({...w,type:L.target.value}),children:zv.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:$e,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),l.jsx(Ln,{isOpen:v,onClose:()=>_(!1),title:"  ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:S,onChange:L=>R(L.target.value),autoFocus:!0})]}),l.jsx("div",{className:"flex justify-end pt-2",children:l.jsx("button",{onClick:ee,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})})]})},_6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=fs(),{schedule1:i,schedule2:a,substitutions:o,saveScheduleData:c}=ao(),d=ri(),h=(N=new Date)=>{const q=N.getFullYear(),$=String(N.getMonth()+1).padStart(2,"0"),O=String(N.getDate()).padStart(2,"0");return`${q}-${$}-${O}`},[f,m]=T.useState(h()),[y,C]=T.useState(!1),[I,B]=T.useState(null),[w,b]=T.useState(!1),[F,Q]=T.useState(!1),[D,x]=T.useState(null),[v,_]=T.useState(""),[S,R]=T.useState(!1),[P,k]=T.useState(""),[me,Ze]=T.useState(""),[$e,je]=T.useState("all"),[ae,Fe]=T.useState(""),[ke,st]=T.useState(""),[We,Ye]=T.useState(""),[gt,ee]=T.useState(""),[ze,He]=T.useState([]),[ct,ut]=T.useState(!1),[te,ne]=T.useState(!1),[ue,oe]=T.useState(!1),L=WF({maxWidth:767}),[z,le]=T.useState("lessons"),de=T.useMemo(()=>{const N=new Date(f).getMonth();return N>=0&&N<=4?a:i},[f,i,a]);T.useEffect(()=>{var N;(N=d.state)!=null&&N.subParams&&(B(d.state.subParams),Ye(""),ee(""),He([]),ut(!1),ne(!1),oe(!1),C(!0),window.history.replaceState({},document.title))},[d.state]),T.useEffect(()=>{if(y&&I){const N=o.find(q=>q.scheduleItemId===I.scheduleItemId&&q.date===f);He(N?N.refusals||[]:[]),ut(!1),ne(!1),oe(!1)}},[y,I,o,f]);const Ee=T.useMemo(()=>{const N=new Date(f).getDay();return N===0||N===6?null:Et[N-1]},[f]),Ce=T.useMemo(()=>e.filter(N=>{const q=N.name.toLowerCase().includes(me.toLowerCase()),$=$e==="all"?!0:N.shifts&&N.shifts.includes($e);return q&&$}),[e,me,$e]),G=T.useMemo(()=>e.filter(N=>N.unavailableDates.includes(f)),[e,f]),X=T.useMemo(()=>{if(!Ee)return[];const N=G.map(ge=>ge.id),q=de.filter(ge=>ge.day===Ee&&N.includes(ge.teacherId)),O=o.filter(ge=>ge.date===f).map(ge=>ge.scheduleItemId),Ne=de.filter(ge=>O.includes(ge.id)),Se=[...q];return Ne.forEach(ge=>{Se.find(Be=>Be.id===ge.id)||Se.push(ge)}),Se.sort((ge,Be)=>ge.period-Be.period)},[de,Ee,G,o,f]),ce=N=>{var $;const q=e.find(O=>O.id===N);x(N),_((($=q==null?void 0:q.absenceReasons)==null?void 0:$[f])||""),b(!0)},Ke=T.useCallback(async()=>{let N=[...e];const q=N.findIndex(O=>O.id===D);if(q===-1)return;const $={...N[q]};$.unavailableDates.includes(f)||($.unavailableDates=[...$.unavailableDates,f]),$.absenceReasons||($.absenceReasons={}),$.absenceReasons[f]=v,N[q]=$,await A({teachers:N}),b(!1)},[e,D,f,v,A]),we=T.useCallback(async N=>{let q=[...e];const $=q.findIndex(Ne=>Ne.id===N);if($===-1)return;const O={...q[$]};O.unavailableDates=O.unavailableDates.filter(Ne=>Ne!==f),O.absenceReasons&&delete O.absenceReasons[f],q[$]=O,await A({teachers:q})},[e,f,A]),Re=T.useCallback(async(N,q=!1)=>{if(!I){alert(":   .    .");return}const $=[...o],O=de.find(ge=>ge.id===I.scheduleItemId);if(!O){alert(":     .");return}const Ne=$.filter(ge=>!(ge.scheduleItemId===I.scheduleItemId&&ge.date===f)),Se={id:Math.random().toString(36).substr(2,9),date:f,scheduleItemId:I.scheduleItemId,originalTeacherId:O.teacherId,replacementTeacherId:N,replacementRoomId:We||void 0,isMerger:q,lessonAbsenceReason:N!=="conducted"&&N!=="cancelled"&&gt?gt:void 0,refusals:ze};Ne.push(Se),await c({substitutions:Ne}),C(!1),Fe(""),Ye(""),ee(""),He([]),B(null)},[I,f,We,de,o,e,gt,ze,c]),he=T.useCallback(async N=>{if(!I||!Ee)return;const q=de.filter(O=>O.classId===N&&O.day===Ee&&O.period===I.period&&O.shift===I.shift);if(q.length===0){alert("    .");return}const $=o.filter(O=>!(O.scheduleItemId===I.scheduleItemId&&O.date===f));q.forEach(O=>{const Ne={id:Math.random().toString(36).substr(2,9),date:f,scheduleItemId:I.scheduleItemId,originalTeacherId:I.teacherId,replacementTeacherId:O.teacherId,replacementClassId:O.classId,replacementSubjectId:O.subjectId,isMerger:!0,replacementRoomId:O.roomId,lessonAbsenceReason:gt||void 0};$.push(Ne)}),await c({substitutions:$}),C(!1),Fe(""),Ye(""),ee(""),B(null),ne(!1)},[I,f,Ee,de,o,gt,c]),re=T.useCallback(async N=>{if(!I)return;const q=de.find(fe=>fe.id===I.scheduleItemId),$=de.find(fe=>fe.id===N);if(!q||!$){alert(":     .");return}const O=[...o];let Ne,Se;We?(Ne=We,Se=ue?$.roomId:q.roomId):ue?(Ne=q.roomId,Se=$.roomId):(Ne=$.roomId,Se=q.roomId);const ge=O.findIndex(fe=>fe.scheduleItemId===q.id&&fe.date===f),Be={id:ge>=0?O[ge].id:Math.random().toString(36).substr(2,9),date:f,scheduleItemId:q.id,originalTeacherId:q.teacherId,replacementTeacherId:q.teacherId,replacementClassId:$.classId,replacementSubjectId:$.subjectId,replacementRoomId:Ne!==q.roomId?Ne:void 0};ge>=0?O[ge]=Be:O.push(Be);const U=O.findIndex(fe=>fe.scheduleItemId===$.id&&fe.date===f),j={id:U>=0?O[U].id:Math.random().toString(36).substr(2,9),date:f,scheduleItemId:$.id,originalTeacherId:$.teacherId,replacementTeacherId:$.teacherId,replacementClassId:q.classId,replacementSubjectId:q.subjectId,replacementRoomId:Se!==$.roomId?Se:void 0};U>=0?O[U]=j:O.push(j),await c({substitutions:O}),C(!1),B(null),Ye(""),ut(!1),oe(!1)},[I,de,o,f,c,We,ue]),ve=T.useCallback(async N=>{const q=o.filter($=>!($.scheduleItemId===N&&$.date===f));await c({substitutions:q})},[o,f,c]),Le=T.useCallback(()=>{let N=`*  ${new Date(f).toLocaleDateString("ru-RU")}*
`;const q=o.some(O=>O.date===f&&O.replacementTeacherId!=="conducted"),$=(O,Ne)=>{const ge=X.filter(Be=>Be.shift===Ne).filter(Be=>{const U=o.filter(j=>j.scheduleItemId===Be.id&&j.date===f);return U.length>0&&U.some(j=>j.replacementTeacherId!=="conducted")});ge.length>0&&(N+=`
 *${O.toUpperCase()}*
`,ge.forEach(Be=>{var fe;const U=o.filter(Z=>Z.scheduleItemId===Be.id&&Z.date===f);if(U.some(Z=>Z.isMerger)){const Z=r.find(Tt=>Tt.id===Be.classId),J=t.find(Tt=>Tt.id===Be.subjectId),Y=e.find(Tt=>Tt.id===Be.teacherId),ye=(Y==null?void 0:Y.name)||"?",be=U.map(Tt=>{var Wt;return(Wt=e.find(Rt=>Rt.id===Tt.replacementTeacherId))==null?void 0:Wt.name}).filter(Boolean).join(", "),Je=U[0],rt=Je!=null&&Je.replacementClassId?r.find(Tt=>Tt.id===Je.replacementClassId):null;let at=` ${Z==null?void 0:Z.name} (${Be.period} ): ${J==null?void 0:J.name} -> ${be} (${rt?`  ${rt.name}`:""}) ( ${ye})`;const Ut=Je==null?void 0:Je.replacementRoomId;if(Ut){const Tt=((fe=n.find(Wt=>Wt.id===Ut))==null?void 0:fe.name)||Ut;at+=`  . ${Tt}`}N+=at+`
`}else U.forEach(Z=>{var ui,An,di;if(Z.replacementTeacherId==="conducted")return;const J=r.find(Lt=>Lt.id===Be.classId),Y=t.find(Lt=>Lt.id===Be.subjectId),ye=e.find(Lt=>Lt.id===Z.replacementTeacherId),be=e.find(Lt=>Lt.id===Be.teacherId),Je=((ui=n.find(Lt=>Lt.id===Be.roomId))==null?void 0:ui.name)||Be.roomId||"?",rt=(An=be==null?void 0:be.absenceReasons)==null?void 0:An[f],at=Z==null?void 0:Z.lessonAbsenceReason,Wt=(at===" "?at:null)||(rt===" "?rt:null),Rt=(be==null?void 0:be.name)+(Wt?` (${Wt})`:""),Yr=Z!=null&&Z.replacementRoomId?((di=n.find(Lt=>Lt.id===Z.replacementRoomId))==null?void 0:di.name)||Z.replacementRoomId:null,jr=Z!=null&&Z.replacementClassId?r.find(Lt=>Lt.id===Z.replacementClassId):null,wn=Z!=null&&Z.replacementSubjectId?t.find(Lt=>Lt.id===Z.replacementSubjectId):null,Zn=jr&&wn&&!Z.isMerger;if(Z.replacementTeacherId==="cancelled")N+=` ${J==null?void 0:J.name} (${Be.period} ): ${Y==null?void 0:Y.name} (${Rt}) ->  
`;else if(Z.replacementTeacherId===Z.originalTeacherId&&Yr&&!jr)N+=` ${J==null?void 0:J.name} (${Be.period} ): ${Y==null?void 0:Y.name} (${be==null?void 0:be.name}) ->  ${Je}  ${Yr}
`;else if(Zn)N+=` ${J==null?void 0:J.name} (${Be.period} ): ${Y==null?void 0:Y.name} ->  ${jr==null?void 0:jr.name} ${wn==null?void 0:wn.name} ( )${Yr?`  . ${Yr}`:""}
`;else{let Lt=` ${J==null?void 0:J.name} (${Be.period} ): ${Y==null?void 0:Y.name} -> ${ye==null?void 0:ye.name} ( ${Rt})`;Yr&&(Lt+=`  . ${Yr}`),N+=Lt+`
`}})}),N+=`
`)};q?($(se.First,se.First),$(se.Second,se.Second)):N+=`
 .`,navigator.clipboard.writeText(N),alert("     !")},[f,o,X,r,t,e,n]),Ge=T.useCallback(()=>{let N=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(Se=>Se.date===f).forEach(Se=>{var rt;const ge=de.find(at=>at.id===Se.scheduleItemId);if(!ge)return;let Be="Unknown";if(Se.replacementTeacherId==="cancelled")Be=" ";else if(Se.replacementTeacherId==="conducted")Be=" ";else{const at=e.find(Ut=>Ut.id===Se.replacementTeacherId);at&&(Be=at.name)}const U=t.find(at=>at.id===ge.subjectId),j=r.find(at=>at.id===ge.classId),fe=Se.date.replace(/-/g,""),Z=e.find(at=>at.id===Se.originalTeacherId),J=(rt=Z==null?void 0:Z.absenceReasons)==null?void 0:rt[f],Y=Se.lessonAbsenceReason,Je=(Y===" "?Y:null)||(J===" "?J:null);N+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${fe}
SUMMARY:: ${j==null?void 0:j.name} - ${U==null?void 0:U.name}
DESCRIPTION:: ${Be}${Se.isMerger?" ()":""}${Je?` (: ${Je})`:""}
END:VEVENT
`}),N+="END:VCALENDAR";const $=new Blob([N],{type:"text/calendar"}),O=URL.createObjectURL($),Ne=document.createElement("a");Ne.href=O,Ne.download="substitutions.ics",document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne)},[f,o,de,e,t,r]),Te=T.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let N=`*  ${new Date(f).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,q=!1;const $=new Set,O=[se.First,se.Second];for(const Se of O){const Be=X.filter(U=>U.shift===Se).filter(U=>o.some(j=>j.scheduleItemId===U.id&&j.date===f&&j.replacementTeacherId!=="conducted"));Be.length>0&&(q=!0,N+=` *${Se.toUpperCase()}*
`,Be.forEach(U=>{var Z;const j=o.filter(J=>J.scheduleItemId===U.id&&J.date===f);if(j.some(J=>J.isMerger)){const J=r.find(Ut=>Ut.id===U.classId),Y=t.find(Ut=>Ut.id===U.subjectId),ye=e.find(Ut=>Ut.id===U.teacherId),be=j.map(Ut=>{var Tt;return(Tt=e.find(Wt=>Wt.id===Ut.replacementTeacherId))==null?void 0:Tt.name}).filter(Boolean).join(", "),Je=j[0],rt=Je!=null&&Je.replacementClassId?r.find(Ut=>Ut.id===Je.replacementClassId):null;ye!=null&&ye.telegramChatId&&$.add(ye.telegramChatId),j.forEach(Ut=>{const Tt=e.find(Wt=>Wt.id===Ut.replacementTeacherId);Tt!=null&&Tt.telegramChatId&&$.add(Tt.telegramChatId)});const at=Je!=null&&Je.replacementRoomId?((Z=n.find(Ut=>Ut.id===Je.replacementRoomId))==null?void 0:Z.name)||Je.replacementRoomId:"";N+=`${U.period}  (${J==null?void 0:J.name} ${Y==null?void 0:Y.name}): *${be}* (${rt?`  ${rt.name}`:""}). : ${at}
`}else j.forEach(J=>{var di,Lt,Ja;if(!J)return;const Y=r.find(mr=>mr.id===U.classId),ye=t.find(mr=>mr.id===U.subjectId),be=e.find(mr=>mr.id===J.originalTeacherId),Je=e.find(mr=>mr.id===J.replacementTeacherId),rt=(di=be==null?void 0:be.absenceReasons)==null?void 0:di[f],at=J.lessonAbsenceReason,Wt=(at===" "?at:null)||(rt===" "?rt:null),Rt=(be==null?void 0:be.name)+(Wt?` (${Wt})`:""),Yr=((Lt=n.find(mr=>mr.id===U.roomId))==null?void 0:Lt.name)||U.roomId||"",jr=J.replacementRoomId?((Ja=n.find(mr=>mr.id===J.replacementRoomId))==null?void 0:Ja.name)||J.replacementRoomId:Yr,wn=J.replacementClassId?r.find(mr=>mr.id===J.replacementClassId):null,Zn=J.replacementSubjectId?t.find(mr=>mr.id===J.replacementSubjectId):null,ui=wn&&Zn&&!J.isMerger;let An=`${U.period}  (${Y==null?void 0:Y.name} ${ye==null?void 0:ye.name}${U.direction?` ${U.direction}`:""}): `;J.replacementTeacherId==="cancelled"?An+=`* * ( ${Rt})`:ui?(An+=`  : ${wn==null?void 0:wn.name} ${Zn==null?void 0:Zn.name} ( ${Y==null?void 0:Y.name} ${ye==null?void 0:ye.name})`,jr!==Yr&&(An+=`  . ${jr}`)):J.replacementTeacherId===J.originalTeacherId?An+=`: ${Rt}.  : ${Yr}  ${jr}`:(An+=`*${Je==null?void 0:Je.name}* ( *${Rt}*)`,Yr!==jr?An+=`. : ${Yr}  ${jr}`:jr!==""&&(An+=`. : ${jr}`)),N+=`${An}
`,be!=null&&be.telegramChatId&&$.add(be.telegramChatId),Je!=null&&Je.telegramChatId&&$.add(Je.telegramChatId)})}),N+=`
`)}if(q||(N+=` .
`),G.forEach(Se=>{var j;const ge=o.some(fe=>fe.date===f&&fe.originalTeacherId===Se.id&&fe.replacementTeacherId!=="cancelled"&&fe.replacementTeacherId!=="conducted"),Be=(j=Se.absenceReasons)==null?void 0:j[f],U=Be===" "?Be:"";Se.telegramChatId&&!ge&&Se.unavailableDates.includes(f)&&($.add(Se.telegramChatId),q?N+=`_:  ${Se.name} ${U},        /._
`:N+=`_:  ${Se.name} ${U},      ._
`)}),$.size===0){alert("    Telegram Chat ID   .");return}const Ne=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const Se=Array.from($).map(ge=>fetch(Ne,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:ge,text:N,parse_mode:"Markdown"})}));await Promise.all(Se),alert(`   ${$.size} !`)}catch(Se){console.error("    Telegram:",Se),alert("     Telegram.     .")}},[f,X,o,r,t,e,n,G,s==null?void 0:s.telegramToken]),it=T.useCallback(async(N,q,$,O,Ne,Se)=>{const Be=new Date(Se).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),U=q.shift===se.First?"1 ":"2 ",j=` *  *
${N.name}

 : ${Be}
 : ${U}
 : ${$==null?void 0:$.name}
1 : ${q.period}
 : ${O==null?void 0:O.name}
 : ${Ne||" "}`;if(s!=null&&s.telegramToken&&N.telegramChatId)try{const Z=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:N.telegramChatId,text:j,parse_mode:"Markdown"})})).json();Z.ok?alert(`   Telegram  ${N.name}!`):Z.description.includes("chat not found")?alert(` Telegram:   .

  ${N.name}       "" (/start).`):alert(` Telegram: ${Z.description}`)}catch(fe){alert("   Telegram (/)."),console.error(fe)}else navigator.share?navigator.share({title:"",text:j}).catch(()=>{}):(navigator.clipboard.writeText(j),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),tt=T.useMemo(()=>I?new Set(o.filter(N=>N.date===f&&N.replacementTeacherId!=="conducted"&&N.replacementTeacherId!=="cancelled").map(N=>{const q=de.find($=>$.id===N.scheduleItemId);return q&&q.period===I.period&&q.shift===I.shift?N.replacementTeacherId:null}).filter(N=>!!N)):new Set,[o,de,f,I]),et=T.useMemo(()=>{if(!I||!Ee)return[];const N=f.substring(0,7);return e.filter(q=>q.name.toLowerCase().includes(ae.toLowerCase())).map(q=>{const $=q.unavailableDates.includes(f),O=de.some(j=>j.teacherId===q.id&&j.day===Ee&&j.period===I.period&&j.shift===I.shift),Ne=tt.has(q.id),Se=O||Ne,ge=q.subjectIds.includes(I.subjectId),Be=o.filter(j=>j.replacementTeacherId===q.id&&j.date.startsWith(N)).length;let U=0;return $&&(U-=1e3),Se&&(U-=100),ge&&(U+=50),{teacher:q,isAbsent:$,isBusy:Se,isSpecialist:ge,score:U,subsCount:Be}}).sort((q,$)=>$.score-q.score)},[e,I,f,ae,Ee,de,o,tt]),Ve=T.useMemo(()=>{if(!I||!Ee)return[];const N=de.filter($=>$.day===Ee&&$.period===I.period&&$.shift===I.shift&&$.classId!==I.classId),q=new Map;return N.forEach($=>{const O=r.find(ge=>ge.id===$.classId),Ne=e.find(ge=>ge.id===$.teacherId),Se=t.find(ge=>ge.id===$.subjectId);if(O&&Ne){q.has(O.id)||q.set(O.id,{classEntity:O,teachers:[],subjects:[]});const ge=q.get(O.id);ge.teachers.includes(Ne.name)||ge.teachers.push(Ne.name),Se&&!ge.subjects.includes(Se.name)&&ge.subjects.push(Se.name)}}),Array.from(q.values())},[de,I,Ee,r,e,t]),xe=T.useMemo(()=>{var Se;if(!I)return null;const N=de.find(ge=>ge.id===I.scheduleItemId);if(!N)return null;const q=r.find(ge=>ge.id===N.classId),$=t.find(ge=>ge.id===N.subjectId),O=e.find(ge=>ge.id===N.teacherId),Ne=((Se=O==null?void 0:O.unavailableDates)==null?void 0:Se.includes(f))||!1;return{className:q==null?void 0:q.name,subjectName:$==null?void 0:$.name,teacherName:O==null?void 0:O.name,teacherId:O==null?void 0:O.id,period:N.period,roomId:N.roomId,isTeacherAbsent:Ne}},[I,de,r,t,e,f]),qe=T.useMemo(()=>!(xe!=null&&xe.teacherId)||!Ee?[]:de.filter(N=>N.teacherId===xe.teacherId&&N.day===Ee&&N.id!==(I==null?void 0:I.scheduleItemId)).sort((N,q)=>N.period-q.period),[de,xe,Ee,I]),ot=T.useMemo(()=>{if(!Ee||ke.length<2)return[];const N=ke.toLowerCase(),q=e.filter(Ne=>Ne.name.toLowerCase().includes(N)),$=r.filter(Ne=>Ne.name.toLowerCase().includes(N)),O=[];return q.forEach(Ne=>{de.filter(ge=>ge.teacherId===Ne.id&&ge.day===Ee).forEach(ge=>{const Be=r.find(j=>j.id===ge.classId),U=t.find(j=>j.id===ge.subjectId);O.push({...ge,entityName:Ne.name,subInfo:Be==null?void 0:Be.name,subjectName:U==null?void 0:U.name})})}),$.forEach(Ne=>{de.filter(ge=>ge.classId===Ne.id&&ge.day===Ee).forEach(ge=>{if(O.find(j=>j.id===ge.id))return;const Be=e.find(j=>j.id===ge.teacherId),U=t.find(j=>j.id===ge.subjectId);O.push({...ge,entityName:Ne.name,subInfo:Be==null?void 0:Be.name,subjectName:U==null?void 0:U.name})})}),O.sort((Ne,Se)=>Ne.period-Se.period)},[ke,Ee,e,r,de,t]),_t=(N,q)=>{let $=!1;if(q){if(!window.confirm("     .     ?"))return;$=!0}Re(N,$)},dt=(N,q)=>{q.stopPropagation(),ze.includes(N)?He(ze.filter($=>$!==N)):He([...ze,N])};return l.jsxs("div",{className:"h-full flex flex-col gap-6",children:[l.jsx("div",{className:"flex flex-col gap-4",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(V,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:f,onChange:N=>m(N.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]})]}),l.jsxs("div",{className:"flex md:hidden bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-full",children:[l.jsxs("button",{onClick:()=>le("lessons"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${z==="lessons"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:["  ",X.length>0&&`(${X.length})`]}),l.jsx("button",{onClick:()=>le("teachers"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${z==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]}),l.jsx("div",{className:"hidden md:block",children:l.jsxs("button",{onClick:()=>R(!S),className:`h-[50px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all mt-6 ${S?"bg-indigo-600 text-white border-indigo-600":"bg-slate-50 dark:bg-slate-700 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-600"}`,children:[l.jsx(V,{name:"History",size:18})," ",S?" ":""]})})]})})}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[l.jsxs("div",{className:`w-full md:w-80 flex-col gap-4 ${L&&z!=="teachers"?"hidden":"flex"}`,children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("button",{onClick:()=>R(!S),className:`w-full py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all ${S?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-dark-800 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-700"}`,children:[l.jsx(V,{name:"History",size:18})," ",S?" ":"  "]})}),S?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:P,onChange:N=>k(N.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(N=>{var q;return N.date.includes(P)||((q=e.find($=>$.id===N.replacementTeacherId))==null?void 0:q.name.toLowerCase().includes(P.toLowerCase()))}).map(N=>{const q=e.find(O=>O.id===N.replacementTeacherId),$=n.find(O=>O.id===N.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:N.date}),l.jsxs("div",{children:[(q==null?void 0:q.name)||(N.replacementTeacherId==="cancelled"?"":""),N.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),$&&l.jsxs("div",{className:"text-indigo-500",children:[". ",$.name]})]},N.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>je("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${$e==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>je(se.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${$e===se.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>je(se.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${$e===se.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(V,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:me,onChange:N=>Ze(N.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[Ce.map(N=>{const q=N.unavailableDates.includes(f),$=N.absenceReasons?N.absenceReasons[f]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${q?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${q?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:N.name}),l.jsx("button",{onClick:()=>q?we(N.id):ce(N.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${q?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:q?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:N.shifts.map(O=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:O===se.First?"1":"2"},O))}),q&&l.jsxs("div",{className:"flex items-center gap-1",children:[$&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:$}),l.jsx("button",{onClick:()=>ce(N.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(V,{name:"Edit2",size:14})})]})]})]},N.id)}),Ce.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${L&&z!=="lessons"?"hidden":"flex"}`,children:[l.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["   (",X.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 w-full xl:w-auto",children:[l.jsxs("button",{onClick:Ge,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-xs font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(V,{name:"Calendar",size:16})," iCal"]}),X.length>0&&l.jsxs("button",{onClick:Le,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-xs font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(V,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Te,className:"px-3 py-2 bg-blue-500 text-white rounded-xl text-xs font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(V,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{st(""),Q(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-xs font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(V,{name:"Search",size:16})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:X.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(V,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):X.map(N=>{var Je;const q=o.filter(rt=>rt.scheduleItemId===N.id&&rt.date===f),$=q.length>0,O=$?q[0]:null,Ne=O&&O.replacementTeacherId!=="cancelled"&&O.replacementTeacherId!=="conducted"?e.find(rt=>rt.id===O.replacementTeacherId):null,Se=e.find(rt=>rt.id===N.teacherId),ge=t.find(rt=>rt.id===N.subjectId),Be=r.find(rt=>rt.id===N.classId),U=n.find(rt=>rt.id===N.roomId),j=U?U.name:N.roomId,fe=O==null?void 0:O.replacementRoomId,Z=fe?((Je=n.find(rt=>rt.id===fe))==null?void 0:Je.name)||fe:void 0,J=O!=null&&O.replacementClassId?r.find(rt=>rt.id===O.replacementClassId):null,Y=O!=null&&O.replacementSubjectId?t.find(rt=>rt.id===O.replacementSubjectId):null;let ye=null;if((O==null?void 0:O.replacementTeacherId)==="conducted")ye=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ve(N.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(V,{name:"X",size:16})})]});else if((O==null?void 0:O.replacementTeacherId)==="cancelled")ye=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ve(N.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(V,{name:"X",size:16})})]});else if($){const rt=(O==null?void 0:O.replacementTeacherId)===(O==null?void 0:O.originalTeacherId)&&fe&&!J,at=J&&Y&&!(O!=null&&O.isMerger),Ut=q.map(Tt=>{var Wt;return(Wt=e.find(Rt=>Rt.id===Tt.replacementTeacherId))==null?void 0:Wt.name}).filter(Boolean).join(", ");ye=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl flex-1 justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:rt?" ":at?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm truncate",title:Ut,children:rt?"  ":at?` ${J==null?void 0:J.name}`:Ut}),(O==null?void 0:O.isMerger)&&l.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",J?`(  ${J.name})`:""]}),(O==null?void 0:O.lessonAbsenceReason)&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",O.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1 shrink-0",children:[l.jsx("button",{onClick:()=>{(Ne||Se)&&it(Ne||Se,N,Be,ge,Z||j||void 0,f)},className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(V,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>ve(N.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(V,{name:"UserX",size:18})})]})]})}else ye=l.jsxs("button",{onClick:()=>{B({scheduleItemId:N.id,subjectId:N.subjectId,period:N.period,shift:N.shift,classId:N.classId,teacherId:N.teacherId,roomId:N.roomId,day:N.day}),C(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(V,{name:"ArrowRight",size:16})]});const be=!G.find(rt=>rt.id===N.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:N.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:Be==null?void 0:Be.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:N.shift===se.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:ge==null?void 0:ge.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:be?"font-semibold":"line-through decoration-red-400 decoration-2",children:Se==null?void 0:Se.name}),j&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[j," ",Z&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",Z]})]}),(O==null?void 0:O.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",O.lessonAbsenceReason,")"]}),J&&Y&&!(O!=null&&O.isMerger)&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",J.name]})]})]})]}),l.jsx("div",{className:"w-full xl:w-auto mt-2 xl:mt-0",children:ye})]},N.id)})})]})]}),l.jsxs(Ln,{isOpen:y,onClose:()=>C(!1),title:" ",children:[xe&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[xe.className,"  ",xe.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:xe.subjectName}),l.jsx("span",{className:xe.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:xe.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:We,onChange:N=>Ye(N.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),n.map(N=>l.jsxs("option",{value:N.id,children:[N.name," (",N.capacity," )"]},N.id))]})]}),xe&&!xe.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:gt,onChange:N=>ee(N.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Re("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Re("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>ne(!te),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[l.jsx(V,{name:"Users",size:16})," :    (  )"]}),te&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),Ve.length===0?l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):Ve.map(N=>l.jsxs("button",{onClick:()=>he(N.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:N.classEntity.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[N.subjects.join(", ")," ",l.jsx("span",{className:"text-slate-400",children:"|"})," ",N.teachers.join(", ")]})]},N.classEntity.id))]})]}),(xe==null?void 0:xe.teacherId)&&!xe.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>xe.teacherId&&Re(xe.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),qe.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>ut(!ct),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx(V,{name:"RotateCw",size:16}),"     "]}),ct&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:ue,onChange:N=>oe(N.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),qe.map(N=>{const q=r.find(O=>O.id===N.classId),$=t.find(O=>O.id===N.subjectId);return l.jsxs("button",{onClick:()=>re(N.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[N.period," "]}),": ",q==null?void 0:q.name," - ",$==null?void 0:$.name]},N.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(V,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:ae,onChange:N=>Fe(N.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[et.map(({teacher:N,isAbsent:q,isBusy:$,isSpecialist:O,subsCount:Ne})=>{const Se=ze.includes(N.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${q?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":Se?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":$?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${O?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:O?l.jsx(V,{name:"Star",size:14,fill:"currentColor"}):N.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:N.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[O&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),$&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),q&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),Se&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${Ne>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Ne]})]})]})]}),!q&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ge=>dt(N.id,ge),className:`px-3 py-1 text-xs font-bold rounded border ${Se?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:Se?"":""}),!Se&&!$&&l.jsx("button",{onClick:()=>_t(N.id,$),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!Se&&$&&l.jsx("button",{onClick:()=>_t(N.id,$),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},N.id)}),et.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(Ln,{isOpen:F,onClose:()=>Q(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(V,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:ke,onChange:N=>st(N.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[ot.map(N=>{var q;return l.jsxs("button",{onClick:()=>{Q(!1),B({scheduleItemId:N.id,subjectId:N.subjectId,period:N.period,shift:N.shift,classId:N.classId,teacherId:N.teacherId,roomId:N.roomId,day:N.day}),C(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[N.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",N.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[N.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:N.subjectName}),N.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((q=n.find($=>$.id===N.roomId))==null?void 0:q.name)||N.roomId]})]})]},N.id)}),ke.length>1&&ot.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",f,")"]})]})]}),l.jsx(Ln,{isOpen:w,onClose:()=>b(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:v,onChange:N=>_(N.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:Ke,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},I6=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=fs(),{schedule1:A,schedule2:i}=ao(),[a,o]=T.useState("teachers"),c=(me=new Date)=>{const Ze=me.getFullYear(),$e=String(me.getMonth()+1).padStart(2,"0"),je=String(me.getDate()).padStart(2,"0");return`${Ze}-${$e}-${je}`},[d,h]=T.useState(c()),[f,m]=T.useState(se.First),[y,C]=T.useState(1),[I,B]=T.useState(se.First),[w,b]=T.useState(1),[F,Q]=T.useState(""),[D,x]=T.useState(""),v=T.useMemo(()=>{const me=new Date(d).getMonth();return me>=0&&me<=4?i:A},[d,A,i]);T.useEffect(()=>{n&&(Q(n.telegramToken||""),x(n.feedbackChatId||""))},[n]),T.useEffect(()=>{C(f===se.First?1:0)},[f]),T.useEffect(()=>{b(I===se.First?1:0)},[I]);const _=T.useMemo(()=>{const me=new Date(d).getDay();return me===0||me===6?null:Et[me-1]},[d]),S=an[f],R=T.useMemo(()=>_?e.filter(me=>me.shifts&&!me.shifts.includes(f)||me.unavailableDates.includes(d)?!1:!v.some($e=>$e.teacherId===me.id&&$e.day===_&&$e.period>y&&$e.shift===f)).sort((me,Ze)=>me.name.localeCompare(Ze.name)):[],[e,d,_,y,f,v]),P=T.useMemo(()=>{if(!_)return[];const me=new Set;return v.forEach($e=>{$e.day===_&&$e.period===w&&$e.shift===I&&$e.roomId&&me.add($e.roomId)}),r.filter($e=>!me.has($e.id)).map($e=>$e.name)},[v,r,_,w,I]),k=async()=>{await s({settings:{...n,telegramToken:F,feedbackChatId:D}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(V,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),a!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:d,onChange:me=>h(me.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),a==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>m(se.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${f===se.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>m(se.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${f===se.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:S.map(me=>l.jsx("button",{onClick:()=>C(me),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${y===me?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:me},me))})]})]}),a==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>B(se.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${I===se.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>B(se.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${I===se.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:an[I].map(me=>l.jsx("button",{onClick:()=>b(me),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${w===me?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:me},me))})]})]}),a==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:F,onChange:me=>Q(me.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:D,onChange:me=>x(me.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:k,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(V,{name:"Save",size:20}),"  "]})]})]}),a==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[R.map(me=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(V,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:me.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:me.subjectIds.slice(0,2).map(Ze=>{const $e=t.find(je=>je.id===Ze);return $e?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:$e.name},Ze):null})})]})]},me.id)),R.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",y,"   ",f]})]}),a==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[P.map(me=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(V,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:me}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},me)),P.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(V,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};var E6=Object.defineProperty,hf=Object.getOwnPropertySymbols,ZS=Object.prototype.hasOwnProperty,eU=Object.prototype.propertyIsEnumerable,Pb=(t,e,r)=>e in t?E6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,T6=(t,e)=>{for(var r in e||(e={}))ZS.call(e,r)&&Pb(t,r,e[r]);if(hf)for(var r of hf(e))eU.call(e,r)&&Pb(t,r,e[r]);return t},F6=(t,e)=>{var r={};for(var n in t)ZS.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&hf)for(var n of hf(t))e.indexOf(n)<0&&eU.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Zi;(t=>{const e=class{constructor(o,c,d,h){if(this.version=o,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let f=[];for(let y=0;y<this.size;y++)f.push(!1);for(let y=0;y<this.size;y++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let y=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const I=this.getPenaltyScore();I<y&&(h=C,y=I),this.applyMask(C)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(o,c){const d=t.QrSegment.makeSegments(o);return e.encodeSegments(d,c)}static encodeBinary(o,c){const d=t.QrSegment.makeBytes(o);return e.encodeSegments([d],c)}static encodeSegments(o,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let y,C;for(y=d;;y++){const b=e.getNumDataCodewords(y,c)*8,F=a.getTotalBits(o,y);if(F<=b){C=F;break}if(y>=h)throw new RangeError("Data too long")}for(const b of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&C<=e.getNumDataCodewords(y,b)*8&&(c=b);let I=[];for(const b of o){n(b.mode.modeBits,4,I),n(b.numChars,b.mode.numCharCountBits(y),I);for(const F of b.getData())I.push(F)}A(I.length==C);const B=e.getNumDataCodewords(y,c)*8;A(I.length<=B),n(0,Math.min(4,B-I.length),I),n(0,(8-I.length%8)%8,I),A(I.length%8==0);for(let b=236;I.length<B;b^=253)n(b,8,I);let w=[];for(;w.length*8<I.length;)w.push(0);return I.forEach((b,F)=>w[F>>>3]|=b<<7-(F&7)),new e(y,c,w,f)}getModule(o,c){return 0<=o&&o<this.size&&0<=c&&c<this.size&&this.modules[c][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),c=o.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(o[d],o[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const c=this.errorCorrectionLevel.formatBits<<3|o;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let d=0;d<12;d++)o=o<<1^(o>>>11)*7973;const c=this.version<<12|o;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(o,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=o+h,y=c+d;0<=m&&m<this.size&&0<=y&&y<this.size&&this.setFunctionModule(m,y,f!=2&&f!=4)}}drawAlignmentPattern(o,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(o+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(o,c,d){this.modules[c][o]=d,this.isFunction[c][o]=!0}addEccAndInterleave(o){const c=this.version,d=this.errorCorrectionLevel;if(o.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),y=h-m%h,C=Math.floor(m/h);let I=[];const B=e.reedSolomonComputeDivisor(f);for(let b=0,F=0;b<h;b++){let Q=o.slice(F,F+C-f+(b<y?0:1));F+=Q.length;const D=e.reedSolomonComputeRemainder(Q,B);b<y&&Q.push(0),I.push(Q.concat(D))}let w=[];for(let b=0;b<I[0].length;b++)I.forEach((F,Q)=>{(b!=C-f||Q>=y)&&w.push(F[b])});return A(w.length==m),w}drawCodewords(o){if(o.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,C=(d+1&2)==0?this.size-1-h:h;!this.isFunction[C][m]&&c<o.length*8&&(this.modules[C][m]=s(o[c>>>3],7-(c&7)),c++)}}A(c==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(o){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let o=0;for(let f=0;f<this.size;f++){let m=!1,y=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[f][I]==m?(y++,y==5?o+=e.PENALTY_N1:y>5&&o++):(this.finderPenaltyAddHistory(y,C),m||(o+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),m=this.modules[f][I],y=1);o+=this.finderPenaltyTerminateAndCount(m,y,C)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,y=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][f]==m?(y++,y==5?o+=e.PENALTY_N1:y>5&&o++):(this.finderPenaltyAddHistory(y,C),m||(o+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),m=this.modules[I][f],y=1);o+=this.finderPenaltyTerminateAndCount(m,y,C)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const y=this.modules[f][m];y==this.modules[f][m+1]&&y==this.modules[f+1][m]&&y==this.modules[f+1][m+1]&&(o+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,y)=>m+(y?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),o+=h*e.PENALTY_N4,A(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let d=[6];for(let h=this.size-7;d.length<o;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(o){if(o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*o+128)*o+64;if(o>=2){const d=Math.floor(o/7)+2;c-=(25*d-10)*d-55,o>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(o,c){return Math.floor(e.getNumRawDataModules(o)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][o]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<o-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<o;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(o,c){let d=c.map(h=>0);for(const h of o){const f=h^d.shift();d.push(0),c.forEach((m,y)=>d[y]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(o,c){if(o>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*o;return A(d>>>8==0),d}finderPenaltyCountPatterns(o){const c=o[1];A(c<=this.size*3);const d=c>0&&o[2]==c&&o[3]==c*3&&o[4]==c&&o[5]==c;return(d&&o[0]>=c*4&&o[6]>=c?1:0)+(d&&o[6]>=c*4&&o[0]>=c?1:0)}finderPenaltyTerminateAndCount(o,c,d){return o&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(o,c){c[0]==0&&(o+=this.size),c.pop(),c.unshift(o)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(o,c,d){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(o>>>h&1)}function s(o,c){return(o>>>c&1)!=0}function A(o){if(!o)throw new Error("Assertion error")}const i=class{constructor(o,c,d){if(this.mode=o,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(o){let c=[];for(const d of o)n(d,8,c);return new i(i.Mode.BYTE,o.length,c)}static makeNumeric(o){if(!i.isNumeric(o))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<o.length;){const h=Math.min(o.length-d,3);n(parseInt(o.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,o.length,c)}static makeAlphanumeric(o){if(!i.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=o.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d+1)),n(h,11,c)}return d<o.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,o.length,c)}static makeSegments(o){return o==""?[]:i.isNumeric(o)?[i.makeNumeric(o)]:i.isAlphanumeric(o)?[i.makeAlphanumeric(o)]:[i.makeBytes(i.toUtf8ByteArray(o))]}static makeEci(o){let c=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,c);else if(o<16384)n(2,2,c),n(o,14,c);else if(o<1e6)n(6,3,c),n(o,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(o){return i.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return i.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,c){let d=0;for(const h of o){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(o){o=encodeURI(o);let c=[];for(let d=0;d<o.length;d++)o.charAt(d)!="%"?c.push(o.charCodeAt(d)):(c.push(parseInt(o.substr(d+1,2),16)),d+=2);return c}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(Zi||(Zi={}));(t=>{(e=>{const r=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Zi||(Zi={}));(t=>{(e=>{const r=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Zi||(Zi={}));var Hl=Zi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var S6={L:Hl.QrCode.Ecc.LOW,M:Hl.QrCode.Ecc.MEDIUM,Q:Hl.QrCode.Ecc.QUARTILE,H:Hl.QrCode.Ecc.HIGH},U6=128,k6="L",Q6="#FFFFFF",N6="#000000",R6=!1,tU=4,D6=.1;function P6(t,e=0){const r=[];return t.forEach(function(n,s){let A=null;n.forEach(function(i,a){if(!i&&A!==null){r.push(`M${A+e} ${s+e}h${a-A}v1H${A+e}z`),A=null;return}if(a===n.length-1){if(!i)return;A===null?r.push(`M${a+e},${s+e} h1v1H${a+e}z`):r.push(`M${A+e},${s+e} h${a+1-A}v1H${A+e}z`);return}i&&A===null&&(A=a)})}),r.join("")}function L6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function j6(t,e,r,n){if(n==null)return null;const s=r?tU:0,A=t.length+s*2,i=Math.floor(e*D6),a=A/e,o=(n.width||i)*a,c=(n.height||i)*a,d=n.x==null?t.length/2-o/2:n.x*a,h=n.y==null?t.length/2-c/2:n.y*a;let f=null;if(n.excavate){let m=Math.floor(d),y=Math.floor(h),C=Math.ceil(o+d-m),I=Math.ceil(c+h-y);f={x:m,y,w:C,h:I}}return{x:d,y:h,h:c,w:o,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function M6(t){const e=t,{value:r,size:n=U6,level:s=k6,bgColor:A=Q6,fgColor:i=N6,includeMargin:a=R6,imageSettings:o}=e,c=F6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Hl.QrCode.encodeText(r,S6[s]).getModules();const h=a?tU:0,f=d.length+h*2,m=j6(d,n,a,o);let y=null;o!=null&&m!=null&&(m.excavation!=null&&(d=L6(d,m.excavation)),y=Cs.createElement("image",{xlinkHref:o.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const C=P6(d,h);return Cs.createElement("svg",T6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),Cs.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Cs.createElement("path",{fill:i,d:C,shapeRendering:"crispEdges"}),y)}const O6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,saveStaticData:i,dutyZones:a}=fs(),{schedule1:o,schedule2:c,substitutions:d,saveScheduleData:h,dutySchedule:f}=ao(),m=T.useRef(null),y=T.useRef(null),C=T.useRef(null),I=(G=new Date)=>{const X=G.getFullYear(),ce=String(G.getMonth()+1).padStart(2,"0"),Ke=String(G.getDate()).padStart(2,"0");return`${X}-${ce}-${Ke}`},[B,w]=T.useState(I()),[b,F]=T.useState(()=>{const G=new Date().getMonth();return G>=0&&G<=4?2:1}),[Q,D]=T.useState(!1),[x,v]=T.useState(!1),[_,S]=T.useState(""),[R,P]=T.useState(""),[k,me]=T.useState(!1),[Ze,$e]=T.useState(""),je=T.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,schedule:o,schedule2:c,substitutions:d,dutyZones:a,dutySchedule:f}),[t,e,r,n,s,A,o,c,d,a,f]),ae=()=>b===2?c:o,Fe=G=>{const X=new Date(G).getMonth();return X>=0&&X<=4?c:o},ke=T.useMemo(()=>{const G=new Set;return r.forEach(X=>{const ce=X.name.match(/^(\d+)/);ce&&G.add(ce[1])}),Array.from(G).sort((X,ce)=>parseInt(X)-parseInt(ce))},[r]);T.useEffect(()=>{ke.length>0&&!Ze&&$e(ke[0])},[ke]);const st=G=>{var Ke;const X=(Ke=G.target.files)==null?void 0:Ke[0];if(!X)return;const ce=new FileReader;ce.onload=async we=>{var Re;try{const he=JSON.parse((Re=we.target)==null?void 0:Re.result);if(he.teachers&&(he.schedule||he.schedule2)){if(window.confirm("    . ?")){const re={...tn,...he,rooms:he.rooms||tn.rooms,classes:he.classes||[],schedule:he.schedule||[],schedule2:he.schedule2||[],teachers:he.teachers||[],subjects:he.subjects||[],substitutions:he.substitutions||[],settings:{...tn.settings,...he.settings}};await i(re),await h(re),alert("  !")}}else alert("  .")}catch{alert("  .")}},ce.readAsText(X)},We=()=>{const G=ae();let X=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Et.forEach(Re=>{X+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${Re}</td></tr>`,[se.First,se.Second].forEach(he=>{const re=r.filter(ve=>ve.shift===he);re.length!==0&&(X+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${he}</td></tr>`,X+='<tr><th class="header"></th>',an[he].forEach(ve=>X+=`<th class="header">${ve} </th>`),X+="</tr>",re.forEach(ve=>{X+=`<tr><td class="class-cell">${ve.name}</td>`,an[he].forEach(Le=>{const Ge=G.filter(Te=>Te.classId===ve.id&&Te.day===Re&&Te.shift===he&&Te.period===Le);X+='<td style="height: 60px;">',Ge.forEach(Te=>{const it=t.find(xe=>xe.id===Te.subjectId),tt=e.find(xe=>xe.id===Te.teacherId),et=n.find(xe=>xe.id===Te.roomId),Ve=et?et.name:Te.roomId;X+=`<div style="background-color: ${(it==null?void 0:it.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(it==null?void 0:it.name)||""} ${Te.direction||""}</div>
                                <div class="meta">${(tt==null?void 0:tt.name)||""} ${Ve?`(. ${Ve})`:""}</div>
                            </div>`}),X+="</td>"}),X+="</tr>"}))})}),X+="</table></body></html>";const ce=new Blob([X],{type:"application/vnd.ms-excel"}),Ke=URL.createObjectURL(ce),we=document.createElement("a");we.href=Ke,we.download=`_22_${b}.xls`,document.body.appendChild(we),we.click(),document.body.removeChild(we)},Ye=()=>{const G=ae(),X={[ht.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ht.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ht.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ht.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ht.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ce+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[se.First,se.Second].forEach(he=>{const re=an[he];ce+="<table>",ce+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${Et.length*re.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,ce+="<tr>",Et.forEach(Le=>{var Te;const Ge=((Te=X[Le])==null?void 0:Te.header)||"#f3f4f6";ce+=`<th colspan="${re.length}" class="header" style="border: 2px solid #000; background-color: ${Ge};">${Le}</th>`}),ce+="</tr>",ce+="<tr>",Et.forEach(Le=>{var Te;const Ge=((Te=X[Le])==null?void 0:Te.header)||"#f3f4f6";re.forEach(it=>ce+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${Ge};"></th>`)}),ce+="</tr>";const ve="#e5e7eb";ce+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${ve};">${he}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${ve};"></th>
            `,Et.forEach(Le=>{var Te;const Ge=((Te=X[Le])==null?void 0:Te.header)||"#f3f4f6";re.forEach(it=>ce+=`<th class="header" style="width: 40px; background-color: ${Ge};">${it}</th>`)}),ce+="</tr>",t.forEach(Le=>{const Ge=e.filter(Te=>Te.subjectIds.includes(Le.id)&&Te.shifts.includes(he));Ge.length!==0&&(Ge.forEach((Te,it)=>{ce+="<tr>",it===0&&(ce+=`<td rowspan="${Ge.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Le.name}</td>`),ce+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${Te.name}</td>`,Et.forEach(tt=>{var Ve;const et=((Ve=X[tt])==null?void 0:Ve.cell)||"#fff";re.forEach(xe=>{const qe=G.find(ot=>ot.teacherId===Te.id&&ot.subjectId===Le.id&&ot.day===tt&&ot.period===xe&&ot.shift===he);if(qe){const ot=r.find(O=>O.id===qe.classId),_t=n.find(O=>O.id===qe.roomId),dt=_t?_t.name:qe.roomId,N=dt?`<sub>${dt}</sub>`:"",q=qe.direction?` <span style="font-size:10px">(${qe.direction})</span>`:"";ce+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${et};">${ot?ot.name:""}${q}${N}</td>`}else ce+=`<td style="border: 1px solid #000; background-color: ${et};"></td>`})}),ce+="</tr>"}),ce+=`<tr><td colspan="${2+Et.length*re.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),ce+="</table><br/><br/>"}),ce+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ce+="</body></html>";const Ke=new Blob([ce],{type:"application/vnd.ms-excel"}),we=URL.createObjectURL(Ke),Re=document.createElement("a");Re.href=we,Re.download=`__${b}.xls`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)},gt=()=>{const G=ae(),X={[ht.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ht.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ht.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ht.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ht.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ce+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[se.First,se.Second].forEach(he=>{const re=an[he];ce+="<table>",ce+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${Et.length*re.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,ce+="<tr>",Et.forEach(Le=>{var Te;const Ge=((Te=X[Le])==null?void 0:Te.header)||"#f3f4f6";ce+=`<th colspan="${re.length}" class="header" style="border: 3px solid #000; background-color: ${Ge}; font-size: 20pt;">${Le}</th>`}),ce+="</tr>",ce+="<tr>",Et.forEach(Le=>{var Te;const Ge=((Te=X[Le])==null?void 0:Te.header)||"#f3f4f6";ce+=`<th colspan="${re.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${Ge}; font-size: 16pt;"></th>`}),ce+="</tr>";const ve="#e5e7eb";ce+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${ve}; font-size: 24pt;">${he}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${ve};"></th>
            `,Et.forEach(Le=>{var Te;const Ge=((Te=X[Le])==null?void 0:Te.header)||"#f3f4f6";re.forEach(it=>ce+=`<th class="header" style="width: 20px; background-color: ${Ge}; font-size: 16pt;">${it}</th>`)}),ce+="</tr>",t.forEach(Le=>{const Ge=e.filter(Te=>Te.subjectIds.includes(Le.id)&&Te.shifts.includes(he));Ge.length!==0&&(Ge.forEach((Te,it)=>{ce+="<tr>",it===0&&(ce+=`<td rowspan="${Ge.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Le.name}</td>`),ce+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${Te.name}</td>`,Et.forEach(tt=>{var Ve;const et=((Ve=X[tt])==null?void 0:Ve.cell)||"#fff";re.forEach(xe=>{const qe=G.find(ot=>ot.teacherId===Te.id&&ot.subjectId===Le.id&&ot.day===tt&&ot.period===xe&&ot.shift===he);if(qe){const ot=r.find($=>$.id===qe.classId),_t=n.find($=>$.id===qe.roomId),dt=_t?_t.name:qe.roomId,N=dt?`<sub>${dt}</sub>`:"",q=qe.direction?` <span style="font-size:14px">(${qe.direction})</span>`:"";ce+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${et}; height: 60px;">${ot?ot.name:""}${q}${N}</td>`}else ce+=`<td style="border: 1px solid #000; background-color: ${et};"></td>`})}),ce+="</tr>"}),ce+=`<tr><td colspan="${2+Et.length*re.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),ce+="</table><br/><br/>"}),ce+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ce+="</body></html>";const Ke=new Blob([ce],{type:"application/vnd.ms-excel"}),we=URL.createObjectURL(Ke),Re=document.createElement("a");Re.href=we,Re.download=`__${b}.xls`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)},ee=()=>{const G=ae(),X=r.filter(ve=>ve.name.startsWith(Ze)).sort((ve,Le)=>ve.name.localeCompare(Le.name)),ce=Array.from(new Set(X.map(ve=>ve.shift))).sort(),Ke={[ht.Monday]:{label:"#fecaca",cell:"#fee2e2"},[ht.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[ht.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[ht.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[ht.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let we=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;ce.forEach(ve=>{const Le=X.filter(Te=>Te.shift===ve),Ge=an[ve];Le.length!==0&&(we+="<table>",we+="<tr>",we+='<td style="border:none"></td>',we+='<td style="border:none"></td>',we+=`<td colspan="${Le.length}" class="shift-header">${ve}</td>`,we+="</tr>",we+="<tr>",we+='<td style="border:none"></td>',we+='<td style="border:none"></td>',Le.forEach(Te=>{we+=`<td class="class-header">${Te.name}</td>`}),we+="</tr>",Et.forEach(Te=>{const it=Ke[Te]||{label:"#e5e7eb",cell:"#f3f4f6"};Ge.forEach((tt,et)=>{we+="<tr>",et===0&&(we+=`<td rowspan="${Ge.length}" class="day-cell" style="background-color: ${it.label};">${Te.toUpperCase()}</td>`),we+=`<td class="period-cell" style="background-color: ${it.label};">${tt}</td>`,Le.forEach(Ve=>{const xe=G.filter(qe=>qe.classId===Ve.id&&qe.day===Te&&qe.shift===ve&&qe.period===tt);we+=`<td class="content-cell" style="background-color: ${it.cell};">`,xe.forEach((qe,ot)=>{ot>0&&(we+='<br style="mso-data-placement:same-cell;">');const _t=t.find(q=>q.id===qe.subjectId),dt=n.find(q=>q.id===qe.roomId),N=dt?dt.name:qe.roomId||"";we+=`<span class="subject">${(_t==null?void 0:_t.name)||""}</span>`,N&&(we+=` <span class="room">${N}</span>`)}),we+="</td>"}),we+="</tr>"}),we+=`<tr><td colspan="${2+Le.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),we+="</table><br><br>")}),we+="</body></html>";const Re=new Blob([we],{type:"application/vnd.ms-excel"}),he=URL.createObjectURL(Re),re=document.createElement("a");re.href=he,re.download=`__${Ze}_.xls`,document.body.appendChild(re),re.click(),document.body.removeChild(re)},ze=()=>{const G=new Date(B),X=G.getUTCMonth(),ce=G.getUTCFullYear(),Ke=d.filter(Ve=>{const xe=new Date(Ve.date);return xe.getUTCMonth()===X&&xe.getUTCFullYear()===ce}).sort((Ve,xe)=>new Date(Ve.date).getTime()-new Date(xe.date).getTime());if(Ke.length===0){alert("      .");return}const we=new Map;Ke.forEach(Ve=>{const xe=`${Ve.scheduleItemId}_${Ve.date}`,qe=we.get(xe)||[];qe.push(Ve),we.set(xe,qe)});const Re=[],he=[];we.forEach(Ve=>{var $;const xe=Ve[0],qe=o.find(O=>O.id===xe.scheduleItemId)||c.find(O=>O.id===xe.scheduleItemId);if(!qe)return;const ot=r.find(O=>O.id===qe.classId),_t=t.find(O=>O.id===qe.subjectId),dt=e.find(O=>O.id===xe.originalTeacherId);let N=xe.lessonAbsenceReason||(($=dt==null?void 0:dt.absenceReasons)==null?void 0:$[xe.date])||"";xe.replacementTeacherId===xe.originalTeacherId&&xe.replacementRoomId&&!xe.replacementClassId&&(N=" "),xe.replacementClassId&&xe.replacementSubjectId&&!xe.isMerger&&(N=" ");const q={subs:Ve,scheduleItem:qe,cls:ot,subj:_t,origTeacher:dt,reason:N};N===" "?he.push(q):Re.push(q)});let re=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${G.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const ve=Ve=>Ve.map(xe=>{const{subs:qe,scheduleItem:ot,cls:_t,subj:dt,origTeacher:N,reason:q}=xe,$=qe[0],O=new Date($.date).toLocaleDateString("ru-RU");let Ne="";if($.replacementTeacherId==="conducted")Ne=" ";else if($.replacementTeacherId==="cancelled")Ne=" ";else if(Ne=qe.map(J=>{const Y=e.find(ye=>ye.id===J.replacementTeacherId);return Y?Y.name:""}).join(", "),$.isMerger){let J=" ()";if($.replacementClassId){const Y=r.find(ye=>ye.id===$.replacementClassId);Y&&(J=` (  ${Y.name})`)}Ne+=J}else if($.replacementClassId&&$.replacementSubjectId){const J=r.find(ye=>ye.id===$.replacementClassId),Y=t.find(ye=>ye.id===$.replacementSubjectId);Ne+=` ( ${(J==null?void 0:J.name)||"?"} ${(Y==null?void 0:Y.name)||"?"})`}const Se=ot.roomId,ge=$.replacementRoomId,Be=ge||Se,U=n.find(Z=>Z.id===Be),j=U?U.name:Be||"-",fe=ge?`${j} ( .)`:j;return`
                    <tr>
                        <td>${O}</td>
                        <td>${ot.period}</td>
                        <td>${ot.shift}</td>
                        <td>${(_t==null?void 0:_t.name)||"?"}</td>
                        <td>${(dt==null?void 0:dt.name)||"?"}</td>
                        <td>${(N==null?void 0:N.name)||"?"}</td>
                        <td>${Ne}</td>
                        <td>${fe}</td>
                        <td>${q}</td>
                    </tr>
                `}).join(""),Le=(Ve,xe=!1)=>`
            <table>
            <thead>
                <tr class="${xe?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${ve(Ve)}
            </tbody>
            </table>
        `;Re.length>0?re+=Le(Re):re+="<p>     .</p>",he.length>0&&(re+="<br/><br/>",re+='<h3 style="color: #b91c1c;">   (  )</h3>',re+=Le(he,!0));const Ge=new Map;Ke.forEach(Ve=>{var dt;if(Ve.replacementTeacherId==="conducted"||Ve.replacementTeacherId==="cancelled"||Ve.replacementTeacherId===Ve.originalTeacherId)return;const xe=e.find(N=>N.id===Ve.replacementTeacherId);if(!xe)return;const qe=Ge.get(xe.id)||{name:xe.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},ot=e.find(N=>N.id===Ve.originalTeacherId);let _t=Ve.lessonAbsenceReason||((dt=ot==null?void 0:ot.absenceReasons)==null?void 0:dt[Ve.date])||"";Ve.replacementClassId&&Ve.replacementSubjectId&&!Ve.isMerger&&(_t=" "),qe.total++,Ve.isMerger?qe.merger++:_t===""?qe.illness++:_t===" "?qe.withoutRecord++:qe.other++,Ge.set(xe.id,qe)});const Te=Array.from(Ge.values()).sort((Ve,xe)=>Ve.name.localeCompare(xe.name));Te.length>0&&(re+="<br/><br/>",re+="<h3>   </h3>",re+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,Te.forEach(Ve=>{re+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${Ve.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ve.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ve.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ve.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ve.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ve.other}</td>
                     </tr>
                 `}),re+="</tbody></table>"),re+="</body></html>";const it=new Blob([re],{type:"application/vnd.ms-excel"}),tt=URL.createObjectURL(it),et=document.createElement("a");et.href=tt,et.download=`__${G.getMonth()+1}_${G.getFullYear()}.xls`,document.body.appendChild(et),et.click(),document.body.removeChild(et)},He=()=>{const G=new Date(B),X=G.getUTCMonth(),ce=G.getUTCFullYear(),Ke=d.filter(ve=>{const Le=new Date(ve.date),Ge=Le.getUTCMonth()===X&&Le.getUTCFullYear()===ce,Te=ve.refusals&&ve.refusals.length>0;return Ge&&Te}).sort((ve,Le)=>new Date(ve.date).getTime()-new Date(Le.date).getTime());if(Ke.length===0){alert("      .");return}let we=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${G.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;Ke.forEach(ve=>{const Le=o.find(xe=>xe.id===ve.scheduleItemId)||c.find(xe=>xe.id===ve.scheduleItemId);if(!Le)return;const Ge=new Date(ve.date).toLocaleDateString("ru-RU"),Te=r.find(xe=>xe.id===Le.classId),it=t.find(xe=>xe.id===Le.subjectId),tt=e.find(xe=>xe.id===ve.originalTeacherId);let et="";if(ve.replacementTeacherId==="conducted")et=" ";else if(ve.replacementTeacherId==="cancelled")et=" ";else{const xe=e.find(qe=>qe.id===ve.replacementTeacherId);et=xe?xe.name:""}const Ve=(ve.refusals||[]).map(xe=>{const qe=e.find(ot=>ot.id===xe);return qe?qe.name:""}).join(", ");we+=`
                <tr>
                    <td>${Ge}</td>
                    <td>${Le.period}</td>
                    <td>${Le.shift}</td>
                    <td>${(Te==null?void 0:Te.name)||"?"}</td>
                    <td>${(it==null?void 0:it.name)||"?"}</td>
                    <td>${(tt==null?void 0:tt.name)||"?"}</td>
                    <td>${et}</td>
                    <td>${Ve}</td>
                </tr>
            `}),we+="</tbody></table></body></html>";const Re=new Blob([we],{type:"application/vnd.ms-excel"}),he=URL.createObjectURL(Re),re=document.createElement("a");re.href=he,re.download=`__${G.getMonth()+1}_${G.getFullYear()}.xls`,document.body.appendChild(re),re.click(),document.body.removeChild(re)},ct=()=>{const G=ae();let X=`							
`;Et.forEach(ce=>{[se.First,se.Second].forEach(Ke=>{r.filter(Re=>Re.shift===Ke).forEach(Re=>{an[Ke].forEach(he=>{G.filter(ve=>ve.classId===Re.id&&ve.day===ce&&ve.shift===Ke&&ve.period===he).forEach(ve=>{const Le=t.find(tt=>tt.id===ve.subjectId),Ge=e.find(tt=>tt.id===ve.teacherId),Te=n.find(tt=>tt.id===ve.roomId),it=Te?Te.name:ve.roomId||"";X+=`${ce}	${Ke}	${Re.name}	${he}	${(Le==null?void 0:Le.name)||""}	${(Ge==null?void 0:Ge.name)||""}	${it}	${ve.direction||""}
`})})})})}),navigator.clipboard.writeText(X).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},ut=async()=>{D(!0);try{if(!y.current){alert("   1- .");return}const G=await df(y.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),X=document.createElement("a");X.href=G.toDataURL("image/png"),X.download=`_${B}_1.png`,document.body.appendChild(X),X.click(),document.body.removeChild(X)}catch(G){console.error(G),alert("   ")}finally{D(!1)}},te=async()=>{D(!0);try{if(!C.current){alert("   2- .");return}const G=await df(C.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),X=document.createElement("a");X.href=G.toDataURL("image/png"),X.download=`_${B}_2.png`,document.body.appendChild(X),X.click(),document.body.removeChild(X)}catch(G){console.error(G),alert("   ")}finally{D(!1)}},ne=T.useMemo(()=>d.filter(G=>G.date===B),[d,B]),ue=T.useMemo(()=>{const G=Fe(B);return ne.filter(X=>{const ce=G.find(Ke=>Ke.id===X.scheduleItemId);return ce&&ce.shift===se.First}).filter(X=>X.replacementTeacherId!=="conducted").length>0},[ne,Fe,B]),oe=T.useMemo(()=>{const G=Fe(B);return ne.filter(X=>{const ce=G.find(Ke=>Ke.id===X.scheduleItemId);return ce&&ce.shift===se.Second}).filter(X=>X.replacementTeacherId!=="conducted").length>0},[ne,Fe,B]),L=G=>{const X=Fe(B),ce=ne.filter(we=>{const Re=X.find(he=>he.id===we.scheduleItemId);return Re&&Re.shift===G}).filter(we=>we.replacementTeacherId!=="conducted");if(ce.length===0)return null;const Ke=Array.from(new Set(ce.map(we=>we.scheduleItemId))).sort((we,Re)=>{const he=X.find(ve=>ve.id===we),re=X.find(ve=>ve.id===Re);return((he==null?void 0:he.period)??0)-((re==null?void 0:re.period)??0)});return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:G}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Ke.map(we=>{var Ne,Se,ge;const Re=ce.filter(Be=>Be.scheduleItemId===we),he=Re[0],re=X.find(Be=>Be.id===we);if(!re)return null;const ve=r.find(Be=>Be.id===re.classId),Le=t.find(Be=>Be.id===re.subjectId),Ge=e.find(Be=>Be.id===he.originalTeacherId),Te=he.replacementRoomId,it=re.roomId?n.find(Be=>Be.id===re.roomId):null,tt=it?it.name:re.roomId||"",et=Te?n.find(Be=>Be.id===Te):null,Ve=et?et.name:Te||"",xe=he.replacementTeacherId==="cancelled",qe=(Ne=Ge==null?void 0:Ge.absenceReasons)==null?void 0:Ne[B],ot=he.lessonAbsenceReason,_t=ot===" "?ot:qe===" "?qe:"",dt=he.replacementClassId?r.find(Be=>Be.id===he.replacementClassId):null,N=he.replacementSubjectId?t.find(Be=>Be.id===he.replacementSubjectId):null,q=he.replacementTeacherId===he.originalTeacherId&&Te&&!dt,$=dt&&N&&!he.isMerger,O=he.replacementTeacherId===he.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:re.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:ve==null?void 0:ve.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Le==null?void 0:Le.name}),re.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:re.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!O&&!q&&!$&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[Ge==null?void 0:Ge.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),_t&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:_t})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${xe?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:q?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:Ge==null?void 0:Ge.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):$?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:Ge==null?void 0:Ge.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",dt==null?void 0:dt.name]})]}):xe?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:Re.length>1||he.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:Re.map(Be=>{const U=e.find(j=>j.id===Be.replacementTeacherId);return U?U.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",he.replacementClassId?`(${(Se=r.find(Be=>Be.id===he.replacementClassId))==null?void 0:Se.name})`:""]})]}):l.jsx("span",{children:(ge=e.find(Be=>Be.id===he.replacementTeacherId))==null?void 0:ge.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Te?"text-indigo-600":"text-slate-700"}`,children:Te&&Te!==re.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:tt}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Ve})]}):l.jsx("span",{className:"text-xl",children:tt})})]},String(we))})})]})]})},z=async()=>{const G=Math.random().toString(36).substr(2,9);await jt.setPublicData(G,je),await i({settings:{...s,publicScheduleId:G}});const X=`${window.location.origin}${window.location.pathname}#/public?id=${G}`;S(X),P(G),v(!0)},le=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await jt.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),S(""),P(""))},de=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(B).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),Ee=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]}),Ce=()=>{const G=ae(),X=r.filter(we=>we.name.startsWith(Ze)).sort((we,Re)=>we.name.localeCompare(Re.name)),ce=Array.from(new Set(X.map(we=>we.shift))).sort(),Ke={[ht.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[ht.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[ht.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[ht.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[ht.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return X.length===0?l.jsx("div",{className:"text-center p-10",children:"    "}):l.jsx("div",{className:"font-sans text-black",children:ce.map(we=>{const Re=X.filter(re=>re.shift===we),he=an[we];return Re.length===0?null:l.jsx("div",{className:"mb-10 page-break-inside-avoid",children:l.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{colSpan:Re.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:we})]}),l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),Re.map(re=>l.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:re.name},String(re.id)))]})]}),l.jsx("tbody",{children:Et.map(re=>{const ve=Ke[re]||{label:"bg-gray-200",cell:"bg-gray-100"};return l.jsxs(Cs.Fragment,{children:[he.map((Le,Ge)=>l.jsxs("tr",{children:[Ge===0&&l.jsx("td",{rowSpan:he.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${ve.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:re===ht.Monday?"":re===ht.Tuesday?"":re===ht.Wednesday?"":re===ht.Thursday?"":re===ht.Friday?"":re}),l.jsx("td",{className:`border-2 border-black font-bold text-base ${ve.label}`,children:Le}),Re.map(Te=>{const it=G.filter(tt=>tt.classId===Te.id&&tt.day===re&&tt.shift===we&&tt.period===Le);return l.jsx("td",{className:`border-2 border-black p-1 h-12 ${ve.cell}`,children:it.map(tt=>{const et=t.find(qe=>qe.id===tt.subjectId),Ve=n.find(qe=>qe.id===tt.roomId),xe=Ve?Ve.name:tt.roomId||"";return l.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[l.jsx("span",{children:et==null?void 0:et.name}),xe&&l.jsx("span",{className:"font-black",children:xe})]},String(tt.id))})},String(Te.id))})]},`${String(re)}-${Le}`)),l.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:l.jsx("td",{colSpan:2+Re.length})})]},String(re))})})]})},String(we))})})};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>jt.exportJson(je),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(V,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:m,onChange:st,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var G;return(G=m.current)==null?void 0:G.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(V,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(V,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:B,onChange:G=>w(G.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:ut,disabled:Q||!ue,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:Q?l.jsxs(l.Fragment,{children:[l.jsx(V,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(V,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:te,disabled:Q||!oe,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:Q?l.jsxs(l.Fragment,{children:[l.jsx(V,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(V,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:ne.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(de,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(Ee,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[ue&&l.jsxs("div",{ref:y,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(de,{}),L(se.First),l.jsx(Ee,{})]}),oe&&l.jsxs("div",{ref:C,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(de,{}),L(se.Second),l.jsx(Ee,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsx("select",{value:Ze,onChange:G=>$e(G.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:ke.map(G=>l.jsxs("option",{value:G,children:[G,"- "]},G))})]}),l.jsxs("button",{onClick:()=>me(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(V,{name:"Printer",size:20}),"    "]}),l.jsxs("button",{onClick:ee,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(V,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:b,onChange:G=>F(Number(G.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:We,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(V,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:Ye,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(V,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:gt,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(V,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:ct,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(V,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:ze,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(V,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:He,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(V,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(V,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:le,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(V,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:z,disabled:Q,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(V,{name:"Share2",size:20}),"  "]})]}),l.jsx(Ln,{isOpen:x,onClose:()=>v(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),_&&l.jsxs(l.Fragment,{children:[l.jsx(M6,{value:_,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:_}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(_),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(V,{name:"Copy",size:16}),"  "]})]})]})}),k&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",Ze,"- )"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(V,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>me(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:l.jsx(Ce,{})})]})]})},H6=()=>{var B;const{subjects:t,teachers:e,classes:r}=fs(),{schedule1:n,schedule2:s,substitutions:A}=ao(),[i,a]=T.useState("load"),[o,c]=T.useState(((B=r[0])==null?void 0:B.id)||""),[d,h]=T.useState(()=>{const w=new Date().getMonth();return w>=0&&w<=4?2:1}),f=T.useMemo(()=>d===2?s:n,[d,n,s]),m=T.useMemo(()=>e.map(b=>{const F=f.filter(R=>R.teacherId===b.id),Q=F.length,D=Q*4,x=A.filter(R=>R.replacementTeacherId===b.id).length,v=A.filter(R=>R.originalTeacherId===b.id).length,_=D+x-v,S={};return F.forEach(R=>{const P=t.find(k=>k.id===R.subjectId);P&&(S[P.name]=(S[P.name]||0)+1)}),{id:b.id,name:b.name,weeklyHours:Q,subsTaken:x,subsMissed:v,actualHours:_,subjectBreakdown:S}}).sort((b,F)=>F.actualHours-b.actualHours),[e,f,A,t]),y=T.useMemo(()=>o?Et.map(w=>{const F=f.filter(Q=>Q.classId===o&&Q.day===w).reduce((Q,D)=>{const x=t.find(v=>v.id===D.subjectId);return Q+((x==null?void 0:x.difficulty)||5)},0);return{label:w,value:F}}):[],[f,t,o]),C=T.useMemo(()=>{const w=e.map(F=>({name:F.name,count:A.filter(Q=>Q.replacementTeacherId===F.id).length})).sort((F,Q)=>Q.count-F.count).slice(0,5),b=e.map(F=>({name:F.name,count:F.unavailableDates.length})).sort((F,Q)=>Q.count-F.count).slice(0,5);return{heroes:w,absentees:b}},[e,A]),I=()=>{let w="";i==="load"?w=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(Q=>`"${Q.name}",${Q.weeklyHours},${Q.subsTaken},${Q.subsMissed},${Q.actualHours},"${Object.entries(Q.subjectBreakdown).map(([D,x])=>D+": "+x).join(", ")}"`).join(`
`):i==="sanpin"&&(w=`Day,Score
`+y.map(Q=>`${Q.label},${Q.value}`).join(`
`));const b=new Blob([`\uFEFF${w}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(b),F.download=`report_${i}_${d}sem.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(V,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:w=>h(Number(w.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:I,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(V,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>a("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(w=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:w.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:w.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",w.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",w.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:w.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.subjectBreakdown).map(([b,F])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[b,": ",F]},b))})})]},w.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:w=>c(w.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))})]}),l.jsx(fp,{items:y,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(fp,{items:C.heroes.map(w=>({label:w.name,value:w.count})),max:Math.max(...C.heroes.map(w=>w.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(fp,{items:C.absentees.map(w=>({label:w.name,value:w.count})),max:Math.max(...C.absentees.map(w=>w.count),1),barClassName:"bg-red-500"})]})]})]})},V6=()=>{var ut;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=fs(),{dutySchedule:s,saveScheduleData:A,schedule1:i,schedule2:a}=ao(),o={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,d]=T.useState(()=>{const te=new Date().getMonth();return te>=0&&te<=4?2:1}),[h,f]=T.useState(se.First),m=c===1?i:a,y=T.useRef(null),[C,I]=T.useState(!1),[B,w]=T.useState(!1),[b,F]=T.useState(null),[Q,D]=T.useState({}),[x,v]=T.useState(""),[_,S]=T.useState(null),R=(te,ne,ue)=>{const oe=s.find(L=>L.zoneId===te&&L.day===ne&&L.shift===ue);return oe?t.find(L=>L.id===oe.teacherId):null},P=(te,ne,ue,oe)=>oe?!!s.find(z=>z.teacherId===oe&&z.day===ne&&z.shift===ue&&z.zoneId!==te):!1,k=(te,ne)=>{F({zoneId:te,day:ne});const ue=R(te,ne,h);S((ue==null?void 0:ue.id)||null),I(!0)},me=async()=>{if(!b)return;let te=[...s];te=te.filter(ne=>!(ne.zoneId===b.zoneId&&ne.day===b.day&&ne.shift===h)),_&&te.push({id:Math.random().toString(36).substr(2,9),zoneId:b.zoneId,day:b.day,shift:h,teacherId:_}),await A({dutySchedule:te}),I(!1),S(null)},Ze=async()=>{if(!b)return;let te=[...s];te=te.filter(ne=>!(ne.zoneId===b.zoneId&&ne.day===b.day&&ne.shift===h)),await A({dutySchedule:te}),I(!1),S(null)},$e=(te,ne)=>{if(!te||!ne.includedRooms)return!1;const ue=te.replace(/\D/g,"");return ue&&ne.includedRooms.includes(ue)?!0:ne.includedRooms.includes(te)},je=async()=>{if(!window.confirm("    . ?"))return;let te=[];const ne=[se.First,se.Second],ue={};Et.forEach(oe=>ue[oe]=new Set);for(const oe of Et)for(const L of ne){const z=t.filter(le=>m.filter(Ee=>Ee.teacherId===le.id&&Ee.day===oe&&Ee.shift===L).length>=1);for(const le of e){const de=z.map(Ce=>{let G=0;ue[oe].has(Ce.id)&&(G-=2e3);const X=m.filter(Ke=>{var we;return Ke.teacherId===Ce.id&&Ke.day===oe&&Ke.shift===L&&Ke.roomId&&$e(((we=r.find(Re=>Re.id===Ke.roomId))==null?void 0:we.name)||Ke.roomId,le)}).length;return X===0?{teacher:Ce,score:-9999}:(G+=X*10,m.filter(Ke=>Ke.teacherId===Ce.id&&Ke.day===oe&&Ke.shift===L).length>=4&&(G+=5),{teacher:Ce,score:G})});de.sort((Ce,G)=>G.score-Ce.score);const Ee=de[0];Ee&&Ee.score>-500&&(te.push({id:Math.random().toString(36).substr(2,9),zoneId:le.id,day:oe,shift:L,teacherId:Ee.teacher.id}),ue[oe].add(Ee.teacher.id))}}await A({dutySchedule:te})},ae=async()=>{window.confirm("   (  )?")&&await A({dutySchedule:[]})},Fe=async()=>{if(!y.current)return;const te=await df(y.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),ne=document.createElement("a");ne.href=te.toDataURL("image/png"),ne.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)},ke=()=>{const ne=ct.length+1;let ue=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8">
            <style>
                table { border-collapse: collapse; width: 100%; font-family: 'Times New Roman', serif; }
                td, th { border: 1px solid #000; padding: 6px; vertical-align: middle; text-align: center; font-size: 11pt; }
                .title-row td { border: none !important; font-weight: bold; text-align: center; }
                .title-main { font-size: 14pt; text-transform: uppercase; }
                .title-sub { font-size: 12pt; }
                .approval-cell { text-align: left; border: none !important; font-size: 11pt; line-height: 1.2; }
                .header-cell { background-color: #F3F4F6; font-weight: bold; border: 2px solid #000; }
                .floor-cell { background-color: #E5E7EB; font-weight: bold; text-transform: uppercase; font-size: 10pt; border: 2px solid #000; }
                .shift-header { font-size: 13pt; font-weight: bold; text-decoration: underline; border: none !important; text-align: center; padding: 20px 0 10px 0; }
                .day-label { font-weight: bold; background-color: #FAFAFA; text-align: left; border: 2px solid #000; }
                .footer-cell { border: none !important; font-weight: bold; text-align: left; padding-top: 30px; font-size: 11pt; }
                .empty-spacer { border: none !important; height: 15px; }
            </style>
            </head>
            <body>
        `;ue+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,ne-3)}" style="border:none"></td>
                    <td colspan="3" class="approval-cell">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-spacer"><td colspan="${ne}" style="border:none"></td></tr>
                <tr class="title-row"><td colspan="${ne}" class="title-main"> </td></tr>
                <tr class="title-row"><td colspan="${ne}" class="title-sub">       22 . </td></tr>
                <tr class="title-row"><td colspan="${ne}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-spacer"><td colspan="${ne}" style="border:none"></td></tr>
            </table>
        `,[se.First,se.Second].forEach(le=>{ue+="<table>",ue+=`<tr><td colspan="${ne}" class="shift-header">${le.toUpperCase()}</td></tr>`,ue+="<tr>",ue+='<th rowspan="2" class="header-cell" style="width: 120px;"> </th>',He.forEach(de=>{ue+=`<th colspan="${de.zones.length}" class="floor-cell">${de.floor}</th>`}),ue+="</tr>",ue+="<tr>",ct.forEach(de=>{ue+=`<th class="header-cell" style="width: 150px;">${de.name}</th>`}),ue+="</tr>",Et.forEach(de=>{ue+="<tr>",ue+=`<td class="day-label">${de}</td>`,ct.forEach(Ee=>{const Ce=R(Ee.id,de,le);ue+=`<td>${Ce?Ce.name:"-"}</td>`}),ue+="</tr>"}),ue+="</table><br>"}),ue+=`
            <table>
                <tr class="empty-spacer"><td colspan="${ne}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${Math.floor(ne/2)}" class="footer-cell">    22 .</td>
                    <td colspan="${Math.ceil(ne/4)}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${Math.ceil(ne/4)}" class="footer-cell" style="text-align: right;">..</td>
                </tr>
            </table>
        `,ue+="</body></html>";const oe=new Blob([ue],{type:"application/vnd.ms-excel"}),L=URL.createObjectURL(oe),z=document.createElement("a");z.href=L,z.download=`__${c}_.xls`,document.body.appendChild(z),z.click(),document.body.removeChild(z)},st=async()=>{if(!Q.name)return;const te=x.split(",").map(oe=>oe.trim()).filter(Boolean),ne={...Q,includedRooms:te};let ue=[...e];Q.id?ue=ue.map(oe=>oe.id===Q.id?{...oe,...ne}:oe):ue.push({...ne,id:Math.random().toString(36).substr(2,9)}),await n({dutyZones:ue}),w(!1)},We=async te=>{if(!window.confirm(" ?"))return;const ne=e.filter(ue=>ue.id!==te);await n({dutyZones:ne})},Ye=te=>{var ne;te?(D(te),v(((ne=te.includedRooms)==null?void 0:ne.join(", "))||"")):(D({}),v("")),w(!0)},gt=()=>{if(!b)return{recommended:[],others:[]};const te=b.day,ne=e.find(z=>z.id===b.zoneId),ue=t.map(z=>{const le=m.filter(Ce=>Ce.teacherId===z.id&&Ce.day===te&&Ce.shift===h).length,de=s.some(Ce=>Ce.day===te&&Ce.teacherId===z.id&&Ce.zoneId!==b.zoneId&&Ce.shift===h),Ee=ne&&ne.includedRooms?m.filter(Ce=>{var G;return Ce.teacherId===z.id&&Ce.day===te&&Ce.shift===h&&Ce.roomId&&$e(((G=r.find(X=>X.id===Ce.roomId))==null?void 0:G.name)||Ce.roomId,ne)}).length:0;return{t:z,lessonsCount:le,isBusy:de,lessonsInZone:Ee}}),oe=ue.filter(z=>z.lessonsInZone>0&&!z.isBusy).sort((z,le)=>le.lessonsInZone-z.lessonsInZone).map(z=>({value:z.t.id,label:`${z.t.name} (${z.lessonsInZone} .  )`})),L=ue.filter(z=>(z.lessonsInZone===0||z.isBusy)&&z.lessonsCount>0).map(z=>({value:z.t.id,label:z.t.name+(z.isBusy?" ()":"")+(z.lessonsInZone===0?" (   )":"")}));return{recommended:oe,others:L}},{recommended:ee,others:ze}=gt(),He=T.useMemo(()=>{const te={};return e.forEach(ue=>{const oe=ue.floor||" ";te[oe]||(te[oe]=[]),te[oe].push(ue)}),Object.keys(te).sort().map(ue=>({floor:ue,zones:te[ue].sort((oe,L)=>(oe.order||0)-(L.order||0))}))},[e]),ct=T.useMemo(()=>He.flatMap(te=>te.zones),[He]);return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(V,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(se.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===se.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(se.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===se.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:c,onChange:te=>d(Number(te.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1-"}),l.jsx("option",{value:2,children:"2-"})]})]}),l.jsxs("button",{onClick:je,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(V,{name:"Zap",size:16})," "]}),l.jsx("button",{onClick:ae,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:l.jsx(V,{name:"Trash2",size:16})}),l.jsxs("button",{onClick:Fe,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(V,{name:"Image",size:16})," PNG"]}),l.jsxs("button",{onClick:ke,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(V,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),l.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(te=>l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[te.name," ",l.jsxs("span",{className:"text-slate-400 text-xs",children:["(",te.floor||"?",")"]})]}),l.jsx("button",{onClick:()=>Ye(te),className:"text-slate-400 hover:text-indigo-600",children:l.jsx(V,{name:"Edit2",size:12})})]},te.id)),l.jsxs("button",{onClick:()=>Ye(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[l.jsx(V,{name:"Plus",size:14})," "]})]}),l.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),Et.map(te=>l.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:te},te))]})}),l.jsx("tbody",{children:e.map(te=>{var ne;return l.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[l.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[l.jsx("div",{children:te.name}),l.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:te.floor}),l.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(ne=te.includedRooms)==null?void 0:ne.join(", ")})]}),Et.map(ue=>{const oe=R(te.id,ue,h),L=oe?P(te.id,ue,h,oe.id):!1;return l.jsx("td",{onClick:()=>k(te.id,ue),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${oe?L?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:oe?l.jsxs("div",{className:`font-bold text-sm ${L?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[oe.name,L&&l.jsx("div",{className:"text-[9px] uppercase",children:""})]}):l.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${te.id}-${ue}`)})]},te.id)})})]})})]}),l.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[l.jsx(V,{name:"Image",size:16}),"  "]}),l.jsx("div",{className:"overflow-auto custom-scrollbar",children:l.jsxs("div",{ref:y,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[l.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:o.approvalBlock},children:l.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[l.jsx("div",{className:"font-bold mb-1",children:""}),l.jsx("div",{children:" "}),l.jsx("div",{children:" "}),l.jsx("div",{children:"  22 . "}),l.jsxs("div",{className:"mt-8 flex items-end",children:[l.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:o.signatureLine}}),l.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),l.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:o.mainTitle},children:[l.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),l.jsx("h2",{className:"text-lg",children:"       22 . "}),l.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[se.First,se.Second].map((te,ne)=>l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:te}),l.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:" "}),He.map(ue=>l.jsx("th",{colSpan:ue.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:ue.floor},ue.floor))]}),l.jsx("tr",{children:ct.map(ue=>l.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:ue.name},ue.id))})]}),l.jsx("tbody",{children:Et.map(ue=>l.jsxs("tr",{children:[l.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:ue}),ct.map(oe=>{const L=R(oe.id,ue,te);return l.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:L?L.name:"-"},oe.id)})]},ue))})]})]},te)),l.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:o.footerBlock},children:[l.jsx("div",{children:"    22 ."}),l.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:o.signatureLine}}),l.jsx("div",{children:".."})]})]})})]}),l.jsx(Ln,{isOpen:C,onClose:()=>I(!1),title:" ",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[b&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(ut=e.find(te=>te.id===b.zoneId))==null?void 0:ut.name}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[l.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:b.day}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:h})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx(th,{options:[{label:" (   )",options:ee},{label:"",options:ze}],value:_,onChange:te=>S(String(te)),placeholder:"   ",groupBy:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[l.jsx("button",{onClick:Ze,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),l.jsx("button",{onClick:me,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),l.jsx(Ln,{isOpen:B,onClose:()=>w(!1),title:Q.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:Q.name||"",onChange:te=>D({...Q,name:te.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:Q.floor||"",onChange:te=>D({...Q,floor:te.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:x,onChange:te=>v(te.target.value)}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[Q.id&&l.jsx("button",{onClick:()=>{We(Q.id),w(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:st,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},K6=()=>{const{setGuestRole:t,role:e,loading:r}=oo(),n=Xc(),[s,A]=T.useState("select"),[i,a]=T.useState(""),[o,c]=T.useState(""),[d,h]=T.useState(""),[f,m]=T.useState(!1);T.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher")&&n("/dashboard")},[e,r,n]);const y=async I=>{if(I.preventDefault(),h(""),m(!0),!Bn){h("Firebase .  ."),m(!1);return}try{let B=i;s==="teacher"&&(B="teacher@gymnasium22.com"),await dM(Bn,B,o)}catch(B){console.error("Firebase Auth Error:",B);const w=B==null?void 0:B.code;let b="   .";switch(w){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":b="   .";break;case"auth/invalid-email":b="  email.";break;case"auth/too-many-requests":b="  . .";break;default:b=" .  ."}h(b)}finally{m(!1)}},C=()=>{t(),n("/schedule")};return l.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),l.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),l.jsxs("div",{className:"glass-panel rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:l.jsx(V,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:C,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(V,{name:"Users",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(V,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(V,{name:"BookOpen",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx(V,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(V,{name:"Settings",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(V,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:y,className:"space-y-5 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(V,{name:"ArrowRight",className:"rotate-180",size:24})}),l.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(V,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"email",value:i,onChange:I=>a(I.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(V,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",value:o,onChange:I=>c(I.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),l.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?l.jsx(V,{name:"Loader",className:"animate-spin",size:20}):l.jsx(V,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},Lb=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},jb=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},rA=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=oo();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(V,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(Uh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Uh,{to:"/login",replace:!0})},G6=()=>{const{role:t,loading:e}=oo();return e?null:t==="guest"?l.jsx(Uh,{to:"/schedule",replace:!0}):l.jsx(Uh,{to:"/dashboard",replace:!0})},z6=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(Lb("theme")||"light"),[s,A]=T.useState(Lb("new_year_mode")==="true"),{isLoading:i}=fs(),{logout:a,role:o,user:c}=oo();if(T.useEffect(()=>{const f=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),T.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),jb("theme",r)},[r]),T.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),jb("new_year_mode",String(s))},[s]),i)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(V,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin","teacher"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(o||""));return l.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&l.jsx("div",{className:"snow-overlay no-print"}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none`,children:l.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&l.jsx("div",{className:"bg-garland"}),l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[l.jsx(V,{name:"GraduationCap",size:24}),s&&l.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:[l.jsx("div",{className:"px-2 mb-2",children:l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""})}),h.map(f=>l.jsxs(Md,{to:f.to,onClick:()=>e(!1),className:({isActive:m})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${m?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(V,{name:f.icon,size:20}),f.label]},f.to))]}),l.jsx("div",{className:"hidden lg:block",children:l.jsx(zO,{})}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between px-2",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),l.jsx("button",{onClick:a,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(V,{name:"LogOut",size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?l.jsx(V,{name:"Moon",size:18}):l.jsx(V,{name:"Sun",size:18})}),l.jsx("button",{onClick:()=>A(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:l.jsx(V,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&l.jsx("div",{className:"ml-auto text-xl",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:l.jsx(L2,{})}),l.jsx($O,{onMenuClick:()=>e(!0),role:o})]})]})},$6=()=>{const[t,e]=T.useState(null),[r,n]=T.useState(!0),[s]=tN(),A=s.get("id");return T.useEffect(()=>{A?(n(!0),jt.getPublicData(A).then(i=>{const a={...tn,...i,settings:{...tn.settings,...i==null?void 0:i.settings}};e(a),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[A]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(V,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(jF,{initialData:t,children:l.jsx(HF,{children:l.jsx(VF,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(V,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(qF,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(V,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function W6(){return l.jsx(OO,{children:l.jsx(LO,{children:l.jsx(jF,{children:l.jsx(HF,{children:l.jsx(VF,{children:l.jsx(q2,{children:l.jsxs(M2,{children:[l.jsx(on,{path:"/login",element:l.jsx(K6,{})}),l.jsxs(on,{path:"/",element:l.jsx(rA,{children:l.jsx(z6,{})}),children:[l.jsx(on,{index:!0,element:l.jsx(G6,{})}),l.jsx(on,{path:"dashboard",element:l.jsx(rA,{allowedRoles:["admin","teacher"],children:l.jsx(WO,{})})}),l.jsx(on,{path:"schedule",element:l.jsx(Mb,{semester:1})}),l.jsx(on,{path:"schedule2",element:l.jsx(Mb,{semester:2})}),l.jsx(on,{path:"substitutions",element:l.jsx(rA,{allowedRoles:["admin"],children:l.jsx(_6,{})})}),l.jsx(on,{path:"duty",element:l.jsx(rA,{allowedRoles:["admin","teacher"],children:l.jsx(V6,{})})}),l.jsx(on,{path:"directory",element:l.jsx(rA,{allowedRoles:["admin"],children:l.jsx(b6,{})})}),l.jsx(on,{path:"admin",element:l.jsx(rA,{allowedRoles:["admin"],children:l.jsx(I6,{})})}),l.jsx(on,{path:"reports",element:l.jsx(rA,{allowedRoles:["admin"],children:l.jsx(H6,{})})}),l.jsx(on,{path:"export",element:l.jsx(rA,{allowedRoles:["admin"],children:l.jsx(O6,{})})})]}),l.jsx(on,{path:"/public",element:l.jsx($6,{})})]})})})})})})})}const Mb=({semester:t=1})=>{const{role:e}=oo();return l.jsx(qF,{readOnly:e!=="admin",semester:t})};Dp.createRoot(document.getElementById("root")).render(l.jsx(Cs.StrictMode,{children:l.jsx(W6,{})}));
