var Z6=Object.defineProperty;var eQ=(t,e,r)=>e in t?Z6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var $r=(t,e,r)=>eQ(t,typeof e!="symbol"?e+"":e,r);function tQ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var bZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ok(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ak={exports:{}},_w={},lk={exports:{}},xr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=Symbol.for("react.element"),rQ=Symbol.for("react.portal"),nQ=Symbol.for("react.fragment"),sQ=Symbol.for("react.strict_mode"),iQ=Symbol.for("react.profiler"),aQ=Symbol.for("react.provider"),oQ=Symbol.for("react.context"),AQ=Symbol.for("react.forward_ref"),lQ=Symbol.for("react.suspense"),cQ=Symbol.for("react.memo"),uQ=Symbol.for("react.lazy"),j5=Symbol.iterator;function dQ(t){return t===null||typeof t!="object"?null:(t=j5&&t[j5]||t["@@iterator"],typeof t=="function"?t:null)}var ck={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uk=Object.assign,dk={};function Wd(t,e,r){this.props=t,this.context=e,this.refs=dk,this.updater=r||ck}Wd.prototype.isReactComponent={};Wd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hk(){}hk.prototype=Wd.prototype;function Fy(t,e,r){this.props=t,this.context=e,this.refs=dk,this.updater=r||ck}var Ty=Fy.prototype=new hk;Ty.constructor=Fy;uk(Ty,Wd.prototype);Ty.isPureReactComponent=!0;var R5=Array.isArray,fk=Object.prototype.hasOwnProperty,Uy={current:null},pk={key:!0,ref:!0,__self:!0,__source:!0};function gk(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)fk.call(e,n)&&!pk.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var A=Array(o),c=0;c<o;c++)A[c]=arguments[c+2];s.children=A}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Fp,type:t,key:i,ref:a,props:s,_owner:Uy.current}}function hQ(t,e){return{$$typeof:Fp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ly(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fp}function fQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var P5=/\/+/g;function q1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fQ(""+t.key):e.toString(36)}function Ng(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fp:case rQ:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+q1(a,0):n,R5(s)?(r="",t!=null&&(r=t.replace(P5,"$&/")+"/"),Ng(s,e,r,"",function(c){return c})):s!=null&&(Ly(s)&&(s=hQ(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(P5,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",R5(t))for(var o=0;o<t.length;o++){i=t[o];var A=n+q1(i,o);a+=Ng(i,e,r,A,s)}else if(A=dQ(t),typeof A=="function")for(t=A.call(t),o=0;!(i=t.next()).done;)i=i.value,A=n+q1(i,o++),a+=Ng(i,e,r,A,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function I0(t,e,r){if(t==null)return t;var n=[],s=0;return Ng(t,n,"","",function(i){return e.call(r,i,s++)}),n}function pQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bi={current:null},Fg={transition:null},gQ={ReactCurrentDispatcher:bi,ReactCurrentBatchConfig:Fg,ReactCurrentOwner:Uy};function mk(){throw Error("act(...) is not supported in production builds of React.")}xr.Children={map:I0,forEach:function(t,e,r){I0(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return I0(t,function(){e++}),e},toArray:function(t){return I0(t,function(e){return e})||[]},only:function(t){if(!Ly(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xr.Component=Wd;xr.Fragment=nQ;xr.Profiler=iQ;xr.PureComponent=Fy;xr.StrictMode=sQ;xr.Suspense=lQ;xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gQ;xr.act=mk;xr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=uk({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Uy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(A in e)fk.call(e,A)&&!pk.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&o!==void 0?o[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){o=Array(A);for(var c=0;c<A;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Fp,type:t.type,key:s,ref:i,props:n,_owner:a}};xr.createContext=function(t){return t={$$typeof:oQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aQ,_context:t},t.Consumer=t};xr.createElement=gk;xr.createFactory=function(t){var e=gk.bind(null,t);return e.type=t,e};xr.createRef=function(){return{current:null}};xr.forwardRef=function(t){return{$$typeof:AQ,render:t}};xr.isValidElement=Ly;xr.lazy=function(t){return{$$typeof:uQ,_payload:{_status:-1,_result:t},_init:pQ}};xr.memo=function(t,e){return{$$typeof:cQ,type:t,compare:e===void 0?null:e}};xr.startTransition=function(t){var e=Fg.transition;Fg.transition={};try{t()}finally{Fg.transition=e}};xr.unstable_act=mk;xr.useCallback=function(t,e){return bi.current.useCallback(t,e)};xr.useContext=function(t){return bi.current.useContext(t)};xr.useDebugValue=function(){};xr.useDeferredValue=function(t){return bi.current.useDeferredValue(t)};xr.useEffect=function(t,e){return bi.current.useEffect(t,e)};xr.useId=function(){return bi.current.useId()};xr.useImperativeHandle=function(t,e,r){return bi.current.useImperativeHandle(t,e,r)};xr.useInsertionEffect=function(t,e){return bi.current.useInsertionEffect(t,e)};xr.useLayoutEffect=function(t,e){return bi.current.useLayoutEffect(t,e)};xr.useMemo=function(t,e){return bi.current.useMemo(t,e)};xr.useReducer=function(t,e,r){return bi.current.useReducer(t,e,r)};xr.useRef=function(t){return bi.current.useRef(t)};xr.useState=function(t){return bi.current.useState(t)};xr.useSyncExternalStore=function(t,e,r){return bi.current.useSyncExternalStore(t,e,r)};xr.useTransition=function(){return bi.current.useTransition()};xr.version="18.3.1";lk.exports=xr;var G=lk.exports;const yo=ok(G),mQ=tQ({__proto__:null,default:yo},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wQ=G,xQ=Symbol.for("react.element"),vQ=Symbol.for("react.fragment"),yQ=Object.prototype.hasOwnProperty,bQ=wQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BQ={key:!0,ref:!0,__self:!0,__source:!0};function wk(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)yQ.call(e,n)&&!BQ.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:xQ,type:t,key:i,ref:a,props:s,_owner:bQ.current}}_w.Fragment=vQ;_w.jsx=wk;_w.jsxs=wk;Ak.exports=_w;var l=Ak.exports,Bv={},xk={exports:{}},Aa={},vk={exports:{}},yk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(se,me){var Pe=se.length;se.push(me);e:for(;0<Pe;){var Se=Pe-1>>>1,M=se[Se];if(0<s(M,me))se[Se]=me,se[Pe]=M,Pe=Se;else break e}}function r(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var me=se[0],Pe=se.pop();if(Pe!==me){se[0]=Pe;e:for(var Se=0,M=se.length,H=M>>>1;Se<H;){var K=2*(Se+1)-1,Z=se[K],ne=K+1,de=se[ne];if(0>s(Z,Pe))ne<M&&0>s(de,Z)?(se[Se]=de,se[ne]=Pe,Se=ne):(se[Se]=Z,se[K]=Pe,Se=K);else if(ne<M&&0>s(de,Pe))se[Se]=de,se[ne]=Pe,Se=ne;else break e}}return me}function s(se,me){var Pe=se.sortIndex-me.sortIndex;return Pe!==0?Pe:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var A=[],c=[],u=1,d=null,p=3,g=!1,v=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(se){for(var me=r(c);me!==null;){if(me.callback===null)n(c);else if(me.startTime<=se)n(c),me.sortIndex=me.expirationTime,e(A,me);else break;me=r(c)}}function U(se){if(y=!1,N(se),!v)if(r(A)!==null)v=!0,Be(D);else{var me=r(c);me!==null&&_e(U,me.startTime-se)}}function D(se,me){v=!1,y&&(y=!1,x(_),_=-1),g=!0;var Pe=p;try{for(N(me),d=r(A);d!==null&&(!(d.expirationTime>me)||se&&!k());){var Se=d.callback;if(typeof Se=="function"){d.callback=null,p=d.priorityLevel;var M=Se(d.expirationTime<=me);me=t.unstable_now(),typeof M=="function"?d.callback=M:d===r(A)&&n(A),N(me)}else n(A);d=r(A)}if(d!==null)var H=!0;else{var K=r(c);K!==null&&_e(U,K.startTime-me),H=!1}return H}finally{d=null,p=Pe,g=!1}}var P=!1,E=null,_=-1,B=5,Q=-1;function k(){return!(t.unstable_now()-Q<B)}function L(){if(E!==null){var se=t.unstable_now();Q=se;var me=!0;try{me=E(!0,se)}finally{me?T():(P=!1,E=null)}}else P=!1}var T;if(typeof I=="function")T=function(){I(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,xe=Y.port2;Y.port1.onmessage=L,T=function(){xe.postMessage(null)}}else T=function(){S(L,0)};function Be(se){E=se,P||(P=!0,T())}function _e(se,me){_=S(function(){se(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Be(D))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(se){switch(p){case 1:case 2:case 3:var me=3;break;default:me=p}var Pe=p;p=me;try{return se()}finally{p=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Pe=p;p=se;try{return me()}finally{p=Pe}},t.unstable_scheduleCallback=function(se,me,Pe){var Se=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Se+Pe:Se):Pe=Se,se){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Pe+M,se={id:u++,callback:me,priorityLevel:se,startTime:Pe,expirationTime:M,sortIndex:-1},Pe>Se?(se.sortIndex=Pe,e(c,se),r(A)===null&&se===r(c)&&(y?(x(_),_=-1):y=!0,_e(U,Pe-Se))):(se.sortIndex=M,e(A,se),v||g||(v=!0,Be(D))),se},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(se){var me=p;return function(){var Pe=p;p=me;try{return se.apply(this,arguments)}finally{p=Pe}}}})(yk);vk.exports=yk;var _Q=vk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CQ=G,ia=_Q;function ft(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bk=new Set,$f={};function iu(t,e){bd(t,e),bd(t+"Capture",e)}function bd(t,e){for($f[t]=e,t=0;t<e.length;t++)bk.add(e[t])}var oA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_v=Object.prototype.hasOwnProperty,IQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D5={},M5={};function EQ(t){return _v.call(M5,t)?!0:_v.call(D5,t)?!1:IQ.test(t)?M5[t]=!0:(D5[t]=!0,!1)}function kQ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SQ(t,e,r,n){if(e===null||typeof e>"u"||kQ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bi(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var zs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zs[t]=new Bi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zs[e]=new Bi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zs[t]=new Bi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zs[t]=new Bi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zs[t]=new Bi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zs[t]=new Bi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zs[t]=new Bi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zs[t]=new Bi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zs[t]=new Bi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qy=/[\-:]([a-z])/g;function jy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qy,jy);zs[e]=new Bi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qy,jy);zs[e]=new Bi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qy,jy);zs[e]=new Bi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zs[t]=new Bi(t,1,!1,t.toLowerCase(),null,!1,!1)});zs.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zs[t]=new Bi(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ry(t,e,r,n){var s=zs.hasOwnProperty(e)?zs[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SQ(e,r,s,n)&&(r=null),n||s===null?EQ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var gA=CQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E0=Symbol.for("react.element"),Ku=Symbol.for("react.portal"),zu=Symbol.for("react.fragment"),Py=Symbol.for("react.strict_mode"),Cv=Symbol.for("react.profiler"),Bk=Symbol.for("react.provider"),_k=Symbol.for("react.context"),Dy=Symbol.for("react.forward_ref"),Iv=Symbol.for("react.suspense"),Ev=Symbol.for("react.suspense_list"),My=Symbol.for("react.memo"),ZA=Symbol.for("react.lazy"),Ck=Symbol.for("react.offscreen"),O5=Symbol.iterator;function Qh(t){return t===null||typeof t!="object"?null:(t=O5&&t[O5]||t["@@iterator"],typeof t=="function"?t:null)}var Pn=Object.assign,W1;function nf(t){if(W1===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);W1=e&&e[1]||""}return`
`+W1+t}var J1=!1;function X1(t,e){if(!t||J1)return"";J1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var A=`
`+s[a].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=a&&0<=o);break}}}finally{J1=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?nf(t):""}function NQ(t){switch(t.tag){case 5:return nf(t.type);case 16:return nf("Lazy");case 13:return nf("Suspense");case 19:return nf("SuspenseList");case 0:case 2:case 15:return t=X1(t.type,!1),t;case 11:return t=X1(t.type.render,!1),t;case 1:return t=X1(t.type,!0),t;default:return""}}function kv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zu:return"Fragment";case Ku:return"Portal";case Cv:return"Profiler";case Py:return"StrictMode";case Iv:return"Suspense";case Ev:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _k:return(t.displayName||"Context")+".Consumer";case Bk:return(t._context.displayName||"Context")+".Provider";case Dy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case My:return e=t.displayName||null,e!==null?e:kv(t.type)||"Memo";case ZA:e=t._payload,t=t._init;try{return kv(t(e))}catch{}}return null}function FQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kv(e);case 8:return e===Py?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ql(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ik(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TQ(t){var e=Ik(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function k0(t){t._valueTracker||(t._valueTracker=TQ(t))}function Ek(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Ik(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function hm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sv(t,e){var r=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function H5(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ql(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kk(t,e){e=e.checked,e!=null&&Ry(t,"checked",e,!1)}function Nv(t,e){kk(t,e);var r=Ql(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fv(t,e.type,r):e.hasOwnProperty("defaultValue")&&Fv(t,e.type,Ql(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V5(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Fv(t,e,r){(e!=="number"||hm(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var sf=Array.isArray;function ad(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ql(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Tv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ft(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function K5(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ft(92));if(sf(r)){if(1<r.length)throw Error(ft(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ql(r)}}function Sk(t,e){var r=Ql(e.value),n=Ql(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function z5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var S0,Fk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(S0=S0||document.createElement("div"),S0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=S0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UQ=["Webkit","ms","Moz","O"];Object.keys(Bf).forEach(function(t){UQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bf[e]=Bf[t]})});function Tk(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Bf.hasOwnProperty(t)&&Bf[t]?(""+e).trim():e+"px"}function Uk(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Tk(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var LQ=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lv(t,e){if(e){if(LQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ft(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ft(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ft(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ft(62))}}function Qv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jv=null;function Oy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rv=null,od=null,Ad=null;function G5(t){if(t=Lp(t)){if(typeof Rv!="function")throw Error(ft(280));var e=t.stateNode;e&&(e=Sw(e),Rv(t.stateNode,t.type,e))}}function Lk(t){od?Ad?Ad.push(t):Ad=[t]:od=t}function Qk(){if(od){var t=od,e=Ad;if(Ad=od=null,G5(t),e)for(t=0;t<e.length;t++)G5(e[t])}}function jk(t,e){return t(e)}function Rk(){}var Y1=!1;function Pk(t,e,r){if(Y1)return t(e,r);Y1=!0;try{return jk(t,e,r)}finally{Y1=!1,(od!==null||Ad!==null)&&(Rk(),Qk())}}function Wf(t,e){var r=t.stateNode;if(r===null)return null;var n=Sw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ft(231,e,typeof r));return r}var Pv=!1;if(oA)try{var jh={};Object.defineProperty(jh,"passive",{get:function(){Pv=!0}}),window.addEventListener("test",jh,jh),window.removeEventListener("test",jh,jh)}catch{Pv=!1}function QQ(t,e,r,n,s,i,a,o,A){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var _f=!1,fm=null,pm=!1,Dv=null,jQ={onError:function(t){_f=!0,fm=t}};function RQ(t,e,r,n,s,i,a,o,A){_f=!1,fm=null,QQ.apply(jQ,arguments)}function PQ(t,e,r,n,s,i,a,o,A){if(RQ.apply(this,arguments),_f){if(_f){var c=fm;_f=!1,fm=null}else throw Error(ft(198));pm||(pm=!0,Dv=c)}}function au(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Dk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $5(t){if(au(t)!==t)throw Error(ft(188))}function DQ(t){var e=t.alternate;if(!e){if(e=au(t),e===null)throw Error(ft(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return $5(s),t;if(i===n)return $5(s),e;i=i.sibling}throw Error(ft(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(ft(189))}}if(r.alternate!==n)throw Error(ft(190))}if(r.tag!==3)throw Error(ft(188));return r.stateNode.current===r?t:e}function Mk(t){return t=DQ(t),t!==null?Ok(t):null}function Ok(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ok(t);if(e!==null)return e;t=t.sibling}return null}var Hk=ia.unstable_scheduleCallback,q5=ia.unstable_cancelCallback,MQ=ia.unstable_shouldYield,OQ=ia.unstable_requestPaint,es=ia.unstable_now,HQ=ia.unstable_getCurrentPriorityLevel,Hy=ia.unstable_ImmediatePriority,Vk=ia.unstable_UserBlockingPriority,gm=ia.unstable_NormalPriority,VQ=ia.unstable_LowPriority,Kk=ia.unstable_IdlePriority,Cw=null,Co=null;function KQ(t){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(Cw,t,void 0,(t.current.flags&128)===128)}catch{}}var Wa=Math.clz32?Math.clz32:$Q,zQ=Math.log,GQ=Math.LN2;function $Q(t){return t>>>=0,t===0?32:31-(zQ(t)/GQ|0)|0}var N0=64,F0=4194304;function af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mm(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=af(o):(i&=a,i!==0&&(n=af(i)))}else a=r&~s,a!==0?n=af(a):i!==0&&(n=af(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Wa(e),s=1<<r,n|=t[r],e&=~s;return n}function qQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WQ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Wa(i),o=1<<a,A=s[a];A===-1?(!(o&r)||o&n)&&(s[a]=qQ(o,e)):A<=e&&(t.expiredLanes|=o),i&=~o}}function Mv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zk(){var t=N0;return N0<<=1,!(N0&4194240)&&(N0=64),t}function Z1(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Tp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wa(e),t[e]=r}function JQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Wa(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Vy(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Wa(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Xr=0;function Gk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $k,Ky,qk,Wk,Jk,Ov=!1,T0=[],vl=null,yl=null,bl=null,Jf=new Map,Xf=new Map,rl=[],XQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W5(t,e){switch(t){case"focusin":case"focusout":vl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":Jf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(e.pointerId)}}function Rh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lp(e),e!==null&&Ky(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YQ(t,e,r,n,s){switch(e){case"focusin":return vl=Rh(vl,t,e,r,n,s),!0;case"dragenter":return yl=Rh(yl,t,e,r,n,s),!0;case"mouseover":return bl=Rh(bl,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Jf.set(i,Rh(Jf.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Xf.set(i,Rh(Xf.get(i)||null,t,e,r,n,s)),!0}return!1}function Xk(t){var e=Sc(t.target);if(e!==null){var r=au(e);if(r!==null){if(e=r.tag,e===13){if(e=Dk(r),e!==null){t.blockedOn=e,Jk(t.priority,function(){qk(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Hv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);jv=n,r.target.dispatchEvent(n),jv=null}else return e=Lp(r),e!==null&&Ky(e),t.blockedOn=r,!1;e.shift()}return!0}function J5(t,e,r){Tg(t)&&r.delete(e)}function ZQ(){Ov=!1,vl!==null&&Tg(vl)&&(vl=null),yl!==null&&Tg(yl)&&(yl=null),bl!==null&&Tg(bl)&&(bl=null),Jf.forEach(J5),Xf.forEach(J5)}function Ph(t,e){t.blockedOn===e&&(t.blockedOn=null,Ov||(Ov=!0,ia.unstable_scheduleCallback(ia.unstable_NormalPriority,ZQ)))}function Yf(t){function e(s){return Ph(s,t)}if(0<T0.length){Ph(T0[0],t);for(var r=1;r<T0.length;r++){var n=T0[r];n.blockedOn===t&&(n.blockedOn=null)}}for(vl!==null&&Ph(vl,t),yl!==null&&Ph(yl,t),bl!==null&&Ph(bl,t),Jf.forEach(e),Xf.forEach(e),r=0;r<rl.length;r++)n=rl[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<rl.length&&(r=rl[0],r.blockedOn===null);)Xk(r),r.blockedOn===null&&rl.shift()}var ld=gA.ReactCurrentBatchConfig,wm=!0;function ej(t,e,r,n){var s=Xr,i=ld.transition;ld.transition=null;try{Xr=1,zy(t,e,r,n)}finally{Xr=s,ld.transition=i}}function tj(t,e,r,n){var s=Xr,i=ld.transition;ld.transition=null;try{Xr=4,zy(t,e,r,n)}finally{Xr=s,ld.transition=i}}function zy(t,e,r,n){if(wm){var s=Hv(t,e,r,n);if(s===null)lx(t,e,n,xm,r),W5(t,n);else if(YQ(s,t,e,r,n))n.stopPropagation();else if(W5(t,n),e&4&&-1<XQ.indexOf(t)){for(;s!==null;){var i=Lp(s);if(i!==null&&$k(i),i=Hv(t,e,r,n),i===null&&lx(t,e,n,xm,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else lx(t,e,n,null,r)}}var xm=null;function Hv(t,e,r,n){if(xm=null,t=Oy(n),t=Sc(t),t!==null)if(e=au(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Dk(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xm=t,null}function Yk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HQ()){case Hy:return 1;case Vk:return 4;case gm:case VQ:return 16;case Kk:return 536870912;default:return 16}default:return 16}}var ul=null,Gy=null,Ug=null;function Zk(){if(Ug)return Ug;var t,e=Gy,r=e.length,n,s="value"in ul?ul.value:ul.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Ug=s.slice(t,1<n?1-n:void 0)}function Lg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function U0(){return!0}function X5(){return!1}function la(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?U0:X5,this.isPropagationStopped=X5,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=U0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=U0)},persist:function(){},isPersistent:U0}),e}var Jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$y=la(Jd),Up=Pn({},Jd,{view:0,detail:0}),rj=la(Up),ex,tx,Dh,Iw=Pn({},Up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dh&&(Dh&&t.type==="mousemove"?(ex=t.screenX-Dh.screenX,tx=t.screenY-Dh.screenY):tx=ex=0,Dh=t),ex)},movementY:function(t){return"movementY"in t?t.movementY:tx}}),Y5=la(Iw),nj=Pn({},Iw,{dataTransfer:0}),sj=la(nj),ij=Pn({},Up,{relatedTarget:0}),rx=la(ij),aj=Pn({},Jd,{animationName:0,elapsedTime:0,pseudoElement:0}),oj=la(aj),Aj=Pn({},Jd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lj=la(Aj),cj=Pn({},Jd,{data:0}),Z5=la(cj),uj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hj[t])?!!e[t]:!1}function qy(){return fj}var pj=Pn({},Up,{key:function(t){if(t.key){var e=uj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qy,charCode:function(t){return t.type==="keypress"?Lg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gj=la(pj),mj=Pn({},Iw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e_=la(mj),wj=Pn({},Up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qy}),xj=la(wj),vj=Pn({},Jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),yj=la(vj),bj=Pn({},Iw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bj=la(bj),_j=[9,13,27,32],Wy=oA&&"CompositionEvent"in window,Cf=null;oA&&"documentMode"in document&&(Cf=document.documentMode);var Cj=oA&&"TextEvent"in window&&!Cf,eS=oA&&(!Wy||Cf&&8<Cf&&11>=Cf),t_=" ",r_=!1;function tS(t,e){switch(t){case"keyup":return _j.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gu=!1;function Ij(t,e){switch(t){case"compositionend":return rS(e);case"keypress":return e.which!==32?null:(r_=!0,t_);case"textInput":return t=e.data,t===t_&&r_?null:t;default:return null}}function Ej(t,e){if(Gu)return t==="compositionend"||!Wy&&tS(t,e)?(t=Zk(),Ug=Gy=ul=null,Gu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eS&&e.locale!=="ko"?null:e.data;default:return null}}var kj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kj[t.type]:e==="textarea"}function nS(t,e,r,n){Lk(n),e=vm(e,"onChange"),0<e.length&&(r=new $y("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var If=null,Zf=null;function Sj(t){fS(t,0)}function Ew(t){var e=Wu(t);if(Ek(e))return t}function Nj(t,e){if(t==="change")return e}var sS=!1;if(oA){var nx;if(oA){var sx="oninput"in document;if(!sx){var s_=document.createElement("div");s_.setAttribute("oninput","return;"),sx=typeof s_.oninput=="function"}nx=sx}else nx=!1;sS=nx&&(!document.documentMode||9<document.documentMode)}function i_(){If&&(If.detachEvent("onpropertychange",iS),Zf=If=null)}function iS(t){if(t.propertyName==="value"&&Ew(Zf)){var e=[];nS(e,Zf,t,Oy(t)),Pk(Sj,e)}}function Fj(t,e,r){t==="focusin"?(i_(),If=e,Zf=r,If.attachEvent("onpropertychange",iS)):t==="focusout"&&i_()}function Tj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ew(Zf)}function Uj(t,e){if(t==="click")return Ew(e)}function Lj(t,e){if(t==="input"||t==="change")return Ew(e)}function Qj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ya=typeof Object.is=="function"?Object.is:Qj;function ep(t,e){if(Ya(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!_v.call(e,s)||!Ya(t[s],e[s]))return!1}return!0}function a_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o_(t,e){var r=a_(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=a_(r)}}function aS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oS(){for(var t=window,e=hm();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=hm(t.document)}return e}function Jy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jj(t){var e=oS(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&aS(r.ownerDocument.documentElement,r)){if(n!==null&&Jy(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=o_(r,i);var a=o_(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rj=oA&&"documentMode"in document&&11>=document.documentMode,$u=null,Vv=null,Ef=null,Kv=!1;function A_(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Kv||$u==null||$u!==hm(n)||(n=$u,"selectionStart"in n&&Jy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ef&&ep(Ef,n)||(Ef=n,n=vm(Vv,"onSelect"),0<n.length&&(e=new $y("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=$u)))}function L0(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var qu={animationend:L0("Animation","AnimationEnd"),animationiteration:L0("Animation","AnimationIteration"),animationstart:L0("Animation","AnimationStart"),transitionend:L0("Transition","TransitionEnd")},ix={},AS={};oA&&(AS=document.createElement("div").style,"AnimationEvent"in window||(delete qu.animationend.animation,delete qu.animationiteration.animation,delete qu.animationstart.animation),"TransitionEvent"in window||delete qu.transitionend.transition);function kw(t){if(ix[t])return ix[t];if(!qu[t])return t;var e=qu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in AS)return ix[t]=e[r];return t}var lS=kw("animationend"),cS=kw("animationiteration"),uS=kw("animationstart"),dS=kw("transitionend"),hS=new Map,l_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wl(t,e){hS.set(t,e),iu(e,[t])}for(var ax=0;ax<l_.length;ax++){var ox=l_[ax],Pj=ox.toLowerCase(),Dj=ox[0].toUpperCase()+ox.slice(1);Wl(Pj,"on"+Dj)}Wl(lS,"onAnimationEnd");Wl(cS,"onAnimationIteration");Wl(uS,"onAnimationStart");Wl("dblclick","onDoubleClick");Wl("focusin","onFocus");Wl("focusout","onBlur");Wl(dS,"onTransitionEnd");bd("onMouseEnter",["mouseout","mouseover"]);bd("onMouseLeave",["mouseout","mouseover"]);bd("onPointerEnter",["pointerout","pointerover"]);bd("onPointerLeave",["pointerout","pointerover"]);iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mj=new Set("cancel close invalid load scroll toggle".split(" ").concat(of));function c_(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,PQ(n,e,void 0,t),t.currentTarget=null}function fS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],A=o.instance,c=o.currentTarget;if(o=o.listener,A!==i&&s.isPropagationStopped())break e;c_(s,o,c),i=A}else for(a=0;a<n.length;a++){if(o=n[a],A=o.instance,c=o.currentTarget,o=o.listener,A!==i&&s.isPropagationStopped())break e;c_(s,o,c),i=A}}}if(pm)throw t=Dv,pm=!1,Dv=null,t}function wn(t,e){var r=e[Wv];r===void 0&&(r=e[Wv]=new Set);var n=t+"__bubble";r.has(n)||(pS(e,t,2,!1),r.add(n))}function Ax(t,e,r){var n=0;e&&(n|=4),pS(r,t,n,e)}var Q0="_reactListening"+Math.random().toString(36).slice(2);function tp(t){if(!t[Q0]){t[Q0]=!0,bk.forEach(function(r){r!=="selectionchange"&&(Mj.has(r)||Ax(r,!1,t),Ax(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Q0]||(e[Q0]=!0,Ax("selectionchange",!1,e))}}function pS(t,e,r,n){switch(Yk(e)){case 1:var s=ej;break;case 4:s=tj;break;default:s=zy}r=s.bind(null,e,r,t),s=void 0,!Pv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function lx(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var A=a.tag;if((A===3||A===4)&&(A=a.stateNode.containerInfo,A===s||A.nodeType===8&&A.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Sc(o),a===null)return;if(A=a.tag,A===5||A===6){n=i=a;continue e}o=o.parentNode}}n=n.return}Pk(function(){var c=i,u=Oy(r),d=[];e:{var p=hS.get(t);if(p!==void 0){var g=$y,v=t;switch(t){case"keypress":if(Lg(r)===0)break e;case"keydown":case"keyup":g=gj;break;case"focusin":v="focus",g=rx;break;case"focusout":v="blur",g=rx;break;case"beforeblur":case"afterblur":g=rx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Y5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=xj;break;case lS:case cS:case uS:g=oj;break;case dS:g=yj;break;case"scroll":g=rj;break;case"wheel":g=Bj;break;case"copy":case"cut":case"paste":g=lj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=e_}var y=(e&4)!==0,S=!y&&t==="scroll",x=y?p!==null?p+"Capture":null:p;y=[];for(var I=c,N;I!==null;){N=I;var U=N.stateNode;if(N.tag===5&&U!==null&&(N=U,x!==null&&(U=Wf(I,x),U!=null&&y.push(rp(I,U,N)))),S)break;I=I.return}0<y.length&&(p=new g(p,v,null,r,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==jv&&(v=r.relatedTarget||r.fromElement)&&(Sc(v)||v[AA]))break e;if((g||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=c,v=v?Sc(v):null,v!==null&&(S=au(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(y=Y5,U="onMouseLeave",x="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(y=e_,U="onPointerLeave",x="onPointerEnter",I="pointer"),S=g==null?p:Wu(g),N=v==null?p:Wu(v),p=new y(U,I+"leave",g,r,u),p.target=S,p.relatedTarget=N,U=null,Sc(u)===c&&(y=new y(x,I+"enter",v,r,u),y.target=N,y.relatedTarget=S,U=y),S=U,g&&v)t:{for(y=g,x=v,I=0,N=y;N;N=yu(N))I++;for(N=0,U=x;U;U=yu(U))N++;for(;0<I-N;)y=yu(y),I--;for(;0<N-I;)x=yu(x),N--;for(;I--;){if(y===x||x!==null&&y===x.alternate)break t;y=yu(y),x=yu(x)}y=null}else y=null;g!==null&&u_(d,p,g,y,!1),v!==null&&S!==null&&u_(d,S,v,y,!0)}}e:{if(p=c?Wu(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=Nj;else if(n_(p))if(sS)D=Lj;else{D=Tj;var P=Fj}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=Uj);if(D&&(D=D(t,c))){nS(d,D,r,u);break e}P&&P(t,p,c),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Fv(p,"number",p.value)}switch(P=c?Wu(c):window,t){case"focusin":(n_(P)||P.contentEditable==="true")&&($u=P,Vv=c,Ef=null);break;case"focusout":Ef=Vv=$u=null;break;case"mousedown":Kv=!0;break;case"contextmenu":case"mouseup":case"dragend":Kv=!1,A_(d,r,u);break;case"selectionchange":if(Rj)break;case"keydown":case"keyup":A_(d,r,u)}var E;if(Wy)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Gu?tS(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(eS&&r.locale!=="ko"&&(Gu||_!=="onCompositionStart"?_==="onCompositionEnd"&&Gu&&(E=Zk()):(ul=u,Gy="value"in ul?ul.value:ul.textContent,Gu=!0)),P=vm(c,_),0<P.length&&(_=new Z5(_,t,null,r,u),d.push({event:_,listeners:P}),E?_.data=E:(E=rS(r),E!==null&&(_.data=E)))),(E=Cj?Ij(t,r):Ej(t,r))&&(c=vm(c,"onBeforeInput"),0<c.length&&(u=new Z5("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=E))}fS(d,e)})}function rp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function vm(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wf(t,r),i!=null&&n.unshift(rp(t,i,s)),i=Wf(t,e),i!=null&&n.push(rp(t,i,s))),t=t.return}return n}function yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u_(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,A=o.alternate,c=o.stateNode;if(A!==null&&A===n)break;o.tag===5&&c!==null&&(o=c,s?(A=Wf(r,i),A!=null&&a.unshift(rp(r,A,o))):s||(A=Wf(r,i),A!=null&&a.push(rp(r,A,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Oj=/\r\n?/g,Hj=/\u0000|\uFFFD/g;function d_(t){return(typeof t=="string"?t:""+t).replace(Oj,`
`).replace(Hj,"")}function j0(t,e,r){if(e=d_(e),d_(t)!==e&&r)throw Error(ft(425))}function ym(){}var zv=null,Gv=null;function $v(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qv=typeof setTimeout=="function"?setTimeout:void 0,Vj=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,Kj=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(t){return h_.resolve(null).then(t).catch(zj)}:qv;function zj(t){setTimeout(function(){throw t})}function cx(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Yf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Yf(e)}function Bl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function f_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xd=Math.random().toString(36).slice(2),xo="__reactFiber$"+Xd,np="__reactProps$"+Xd,AA="__reactContainer$"+Xd,Wv="__reactEvents$"+Xd,Gj="__reactListeners$"+Xd,$j="__reactHandles$"+Xd;function Sc(t){var e=t[xo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[AA]||r[xo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=f_(t);t!==null;){if(r=t[xo])return r;t=f_(t)}return e}t=r,r=t.parentNode}return null}function Lp(t){return t=t[xo]||t[AA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ft(33))}function Sw(t){return t[np]||null}var Jv=[],Ju=-1;function Jl(t){return{current:t}}function bn(t){0>Ju||(t.current=Jv[Ju],Jv[Ju]=null,Ju--)}function dn(t,e){Ju++,Jv[Ju]=t.current,t.current=e}var jl={},li=Jl(jl),Qi=Jl(!1),Mc=jl;function Bd(t,e){var r=t.type.contextTypes;if(!r)return jl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ji(t){return t=t.childContextTypes,t!=null}function bm(){bn(Qi),bn(li)}function p_(t,e,r){if(li.current!==jl)throw Error(ft(168));dn(li,e),dn(Qi,r)}function gS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ft(108,FQ(t)||"Unknown",s));return Pn({},r,n)}function Bm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jl,Mc=li.current,dn(li,t),dn(Qi,Qi.current),!0}function g_(t,e,r){var n=t.stateNode;if(!n)throw Error(ft(169));r?(t=gS(t,e,Mc),n.__reactInternalMemoizedMergedChildContext=t,bn(Qi),bn(li),dn(li,t)):bn(Qi),dn(Qi,r)}var Wo=null,Nw=!1,ux=!1;function mS(t){Wo===null?Wo=[t]:Wo.push(t)}function qj(t){Nw=!0,mS(t)}function Xl(){if(!ux&&Wo!==null){ux=!0;var t=0,e=Xr;try{var r=Wo;for(Xr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Wo=null,Nw=!1}catch(s){throw Wo!==null&&(Wo=Wo.slice(t+1)),Hk(Hy,Xl),s}finally{Xr=e,ux=!1}}return null}var Xu=[],Yu=0,_m=null,Cm=0,Ca=[],Ia=0,Oc=null,Xo=1,Yo="";function wc(t,e){Xu[Yu++]=Cm,Xu[Yu++]=_m,_m=t,Cm=e}function wS(t,e,r){Ca[Ia++]=Xo,Ca[Ia++]=Yo,Ca[Ia++]=Oc,Oc=t;var n=Xo;t=Yo;var s=32-Wa(n)-1;n&=~(1<<s),r+=1;var i=32-Wa(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Xo=1<<32-Wa(e)+s|r<<s|n,Yo=i+t}else Xo=1<<i|r<<s|n,Yo=t}function Xy(t){t.return!==null&&(wc(t,1),wS(t,1,0))}function Yy(t){for(;t===_m;)_m=Xu[--Yu],Xu[Yu]=null,Cm=Xu[--Yu],Xu[Yu]=null;for(;t===Oc;)Oc=Ca[--Ia],Ca[Ia]=null,Yo=Ca[--Ia],Ca[Ia]=null,Xo=Ca[--Ia],Ca[Ia]=null}var sa=null,ra=null,In=!1,qa=null;function xS(t,e){var r=Sa(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function m_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sa=t,ra=Bl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sa=t,ra=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Oc!==null?{id:Xo,overflow:Yo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Sa(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,sa=t,ra=null,!0):!1;default:return!1}}function Xv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yv(t){if(In){var e=ra;if(e){var r=e;if(!m_(t,e)){if(Xv(t))throw Error(ft(418));e=Bl(r.nextSibling);var n=sa;e&&m_(t,e)?xS(n,r):(t.flags=t.flags&-4097|2,In=!1,sa=t)}}else{if(Xv(t))throw Error(ft(418));t.flags=t.flags&-4097|2,In=!1,sa=t}}}function w_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sa=t}function R0(t){if(t!==sa)return!1;if(!In)return w_(t),In=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$v(t.type,t.memoizedProps)),e&&(e=ra)){if(Xv(t))throw vS(),Error(ft(418));for(;e;)xS(t,e),e=Bl(e.nextSibling)}if(w_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ft(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ra=Bl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ra=null}}else ra=sa?Bl(t.stateNode.nextSibling):null;return!0}function vS(){for(var t=ra;t;)t=Bl(t.nextSibling)}function _d(){ra=sa=null,In=!1}function Zy(t){qa===null?qa=[t]:qa.push(t)}var Wj=gA.ReactCurrentBatchConfig;function Mh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ft(309));var n=r.stateNode}if(!n)throw Error(ft(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ft(284));if(!r._owner)throw Error(ft(290,t))}return t}function P0(t,e){throw t=Object.prototype.toString.call(e),Error(ft(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x_(t){var e=t._init;return e(t._payload)}function yS(t){function e(x,I){if(t){var N=x.deletions;N===null?(x.deletions=[I],x.flags|=16):N.push(I)}}function r(x,I){if(!t)return null;for(;I!==null;)e(x,I),I=I.sibling;return null}function n(x,I){for(x=new Map;I!==null;)I.key!==null?x.set(I.key,I):x.set(I.index,I),I=I.sibling;return x}function s(x,I){return x=El(x,I),x.index=0,x.sibling=null,x}function i(x,I,N){return x.index=N,t?(N=x.alternate,N!==null?(N=N.index,N<I?(x.flags|=2,I):N):(x.flags|=2,I)):(x.flags|=1048576,I)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,I,N,U){return I===null||I.tag!==6?(I=wx(N,x.mode,U),I.return=x,I):(I=s(I,N),I.return=x,I)}function A(x,I,N,U){var D=N.type;return D===zu?u(x,I,N.props.children,U,N.key):I!==null&&(I.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ZA&&x_(D)===I.type)?(U=s(I,N.props),U.ref=Mh(x,I,N),U.return=x,U):(U=Og(N.type,N.key,N.props,null,x.mode,U),U.ref=Mh(x,I,N),U.return=x,U)}function c(x,I,N,U){return I===null||I.tag!==4||I.stateNode.containerInfo!==N.containerInfo||I.stateNode.implementation!==N.implementation?(I=xx(N,x.mode,U),I.return=x,I):(I=s(I,N.children||[]),I.return=x,I)}function u(x,I,N,U,D){return I===null||I.tag!==7?(I=Lc(N,x.mode,U,D),I.return=x,I):(I=s(I,N),I.return=x,I)}function d(x,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return I=wx(""+I,x.mode,N),I.return=x,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E0:return N=Og(I.type,I.key,I.props,null,x.mode,N),N.ref=Mh(x,null,I),N.return=x,N;case Ku:return I=xx(I,x.mode,N),I.return=x,I;case ZA:var U=I._init;return d(x,U(I._payload),N)}if(sf(I)||Qh(I))return I=Lc(I,x.mode,N,null),I.return=x,I;P0(x,I)}return null}function p(x,I,N,U){var D=I!==null?I.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return D!==null?null:o(x,I,""+N,U);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case E0:return N.key===D?A(x,I,N,U):null;case Ku:return N.key===D?c(x,I,N,U):null;case ZA:return D=N._init,p(x,I,D(N._payload),U)}if(sf(N)||Qh(N))return D!==null?null:u(x,I,N,U,null);P0(x,N)}return null}function g(x,I,N,U,D){if(typeof U=="string"&&U!==""||typeof U=="number")return x=x.get(N)||null,o(I,x,""+U,D);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E0:return x=x.get(U.key===null?N:U.key)||null,A(I,x,U,D);case Ku:return x=x.get(U.key===null?N:U.key)||null,c(I,x,U,D);case ZA:var P=U._init;return g(x,I,N,P(U._payload),D)}if(sf(U)||Qh(U))return x=x.get(N)||null,u(I,x,U,D,null);P0(I,U)}return null}function v(x,I,N,U){for(var D=null,P=null,E=I,_=I=0,B=null;E!==null&&_<N.length;_++){E.index>_?(B=E,E=null):B=E.sibling;var Q=p(x,E,N[_],U);if(Q===null){E===null&&(E=B);break}t&&E&&Q.alternate===null&&e(x,E),I=i(Q,I,_),P===null?D=Q:P.sibling=Q,P=Q,E=B}if(_===N.length)return r(x,E),In&&wc(x,_),D;if(E===null){for(;_<N.length;_++)E=d(x,N[_],U),E!==null&&(I=i(E,I,_),P===null?D=E:P.sibling=E,P=E);return In&&wc(x,_),D}for(E=n(x,E);_<N.length;_++)B=g(E,x,_,N[_],U),B!==null&&(t&&B.alternate!==null&&E.delete(B.key===null?_:B.key),I=i(B,I,_),P===null?D=B:P.sibling=B,P=B);return t&&E.forEach(function(k){return e(x,k)}),In&&wc(x,_),D}function y(x,I,N,U){var D=Qh(N);if(typeof D!="function")throw Error(ft(150));if(N=D.call(N),N==null)throw Error(ft(151));for(var P=D=null,E=I,_=I=0,B=null,Q=N.next();E!==null&&!Q.done;_++,Q=N.next()){E.index>_?(B=E,E=null):B=E.sibling;var k=p(x,E,Q.value,U);if(k===null){E===null&&(E=B);break}t&&E&&k.alternate===null&&e(x,E),I=i(k,I,_),P===null?D=k:P.sibling=k,P=k,E=B}if(Q.done)return r(x,E),In&&wc(x,_),D;if(E===null){for(;!Q.done;_++,Q=N.next())Q=d(x,Q.value,U),Q!==null&&(I=i(Q,I,_),P===null?D=Q:P.sibling=Q,P=Q);return In&&wc(x,_),D}for(E=n(x,E);!Q.done;_++,Q=N.next())Q=g(E,x,_,Q.value,U),Q!==null&&(t&&Q.alternate!==null&&E.delete(Q.key===null?_:Q.key),I=i(Q,I,_),P===null?D=Q:P.sibling=Q,P=Q);return t&&E.forEach(function(L){return e(x,L)}),In&&wc(x,_),D}function S(x,I,N,U){if(typeof N=="object"&&N!==null&&N.type===zu&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case E0:e:{for(var D=N.key,P=I;P!==null;){if(P.key===D){if(D=N.type,D===zu){if(P.tag===7){r(x,P.sibling),I=s(P,N.props.children),I.return=x,x=I;break e}}else if(P.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ZA&&x_(D)===P.type){r(x,P.sibling),I=s(P,N.props),I.ref=Mh(x,P,N),I.return=x,x=I;break e}r(x,P);break}else e(x,P);P=P.sibling}N.type===zu?(I=Lc(N.props.children,x.mode,U,N.key),I.return=x,x=I):(U=Og(N.type,N.key,N.props,null,x.mode,U),U.ref=Mh(x,I,N),U.return=x,x=U)}return a(x);case Ku:e:{for(P=N.key;I!==null;){if(I.key===P)if(I.tag===4&&I.stateNode.containerInfo===N.containerInfo&&I.stateNode.implementation===N.implementation){r(x,I.sibling),I=s(I,N.children||[]),I.return=x,x=I;break e}else{r(x,I);break}else e(x,I);I=I.sibling}I=xx(N,x.mode,U),I.return=x,x=I}return a(x);case ZA:return P=N._init,S(x,I,P(N._payload),U)}if(sf(N))return v(x,I,N,U);if(Qh(N))return y(x,I,N,U);P0(x,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,I!==null&&I.tag===6?(r(x,I.sibling),I=s(I,N),I.return=x,x=I):(r(x,I),I=wx(N,x.mode,U),I.return=x,x=I),a(x)):r(x,I)}return S}var Cd=yS(!0),bS=yS(!1),Im=Jl(null),Em=null,Zu=null,eb=null;function tb(){eb=Zu=Em=null}function rb(t){var e=Im.current;bn(Im),t._currentValue=e}function Zv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function cd(t,e){Em=t,eb=Zu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fi=!0),t.firstContext=null)}function Ua(t){var e=t._currentValue;if(eb!==t)if(t={context:t,memoizedValue:e,next:null},Zu===null){if(Em===null)throw Error(ft(308));Zu=t,Em.dependencies={lanes:0,firstContext:t}}else Zu=Zu.next=t;return e}var Nc=null;function nb(t){Nc===null?Nc=[t]:Nc.push(t)}function BS(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,nb(e)):(r.next=s.next,s.next=r),e.interleaved=r,lA(t,n)}function lA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var el=!1;function sb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _S(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _l(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Lr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,lA(t,r)}return s=n.interleaved,s===null?(e.next=e,nb(n)):(e.next=s.next,s.next=e),n.interleaved=e,lA(t,r)}function Qg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Vy(t,r)}}function v_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function km(t,e,r,n){var s=t.updateQueue;el=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var A=o,c=A.next;A.next=null,a===null?i=c:a.next=c,a=A;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=A))}if(i!==null){var d=s.baseState;a=0,u=c=A=null,o=i;do{var p=o.lane,g=o.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(p=e,g=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=Pn({},d,p);break e;case 2:el=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else g={eventTime:g,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=g,A=d):u=u.next=g,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(A=d),s.baseState=A,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vc|=a,t.lanes=a,t.memoizedState=d}}function y_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ft(191,s));s.call(n)}}}var Qp={},Io=Jl(Qp),sp=Jl(Qp),ip=Jl(Qp);function Fc(t){if(t===Qp)throw Error(ft(174));return t}function ib(t,e){switch(dn(ip,e),dn(sp,t),dn(Io,Qp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uv(e,t)}bn(Io),dn(Io,e)}function Id(){bn(Io),bn(sp),bn(ip)}function CS(t){Fc(ip.current);var e=Fc(Io.current),r=Uv(e,t.type);e!==r&&(dn(sp,t),dn(Io,r))}function ab(t){sp.current===t&&(bn(Io),bn(sp))}var Qn=Jl(0);function Sm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dx=[];function ob(){for(var t=0;t<dx.length;t++)dx[t]._workInProgressVersionPrimary=null;dx.length=0}var jg=gA.ReactCurrentDispatcher,hx=gA.ReactCurrentBatchConfig,Hc=0,jn=null,ms=null,Is=null,Nm=!1,kf=!1,ap=0,Jj=0;function qs(){throw Error(ft(321))}function Ab(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ya(t[r],e[r]))return!1;return!0}function lb(t,e,r,n,s,i){if(Hc=i,jn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jg.current=t===null||t.memoizedState===null?eR:tR,t=r(n,s),kf){i=0;do{if(kf=!1,ap=0,25<=i)throw Error(ft(301));i+=1,Is=ms=null,e.updateQueue=null,jg.current=rR,t=r(n,s)}while(kf)}if(jg.current=Fm,e=ms!==null&&ms.next!==null,Hc=0,Is=ms=jn=null,Nm=!1,e)throw Error(ft(300));return t}function cb(){var t=ap!==0;return ap=0,t}function mo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Is===null?jn.memoizedState=Is=t:Is=Is.next=t,Is}function La(){if(ms===null){var t=jn.alternate;t=t!==null?t.memoizedState:null}else t=ms.next;var e=Is===null?jn.memoizedState:Is.next;if(e!==null)Is=e,ms=t;else{if(t===null)throw Error(ft(310));ms=t,t={memoizedState:ms.memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},Is===null?jn.memoizedState=Is=t:Is=Is.next=t}return Is}function op(t,e){return typeof e=="function"?e(t):e}function fx(t){var e=La(),r=e.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=t;var n=ms,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,A=null,c=i;do{var u=c.lane;if((Hc&u)===u)A!==null&&(A=A.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};A===null?(o=A=d,a=n):A=A.next=d,jn.lanes|=u,Vc|=u}c=c.next}while(c!==null&&c!==i);A===null?a=n:A.next=o,Ya(n,e.memoizedState)||(Fi=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,jn.lanes|=i,Vc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function px(t){var e=La(),r=e.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ya(i,e.memoizedState)||(Fi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function IS(){}function ES(t,e){var r=jn,n=La(),s=e(),i=!Ya(n.memoizedState,s);if(i&&(n.memoizedState=s,Fi=!0),n=n.queue,ub(NS.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Is!==null&&Is.memoizedState.tag&1){if(r.flags|=2048,Ap(9,SS.bind(null,r,n,s,e),void 0,null),Ss===null)throw Error(ft(349));Hc&30||kS(r,e,s)}return s}function kS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=jn.updateQueue,e===null?(e={lastEffect:null,stores:null},jn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function SS(t,e,r,n){e.value=r,e.getSnapshot=n,FS(e)&&TS(t)}function NS(t,e,r){return r(function(){FS(e)&&TS(t)})}function FS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ya(t,r)}catch{return!0}}function TS(t){var e=lA(t,1);e!==null&&Ja(e,t,1,-1)}function b_(t){var e=mo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:t},e.queue=t,t=t.dispatch=Zj.bind(null,jn,t),[e.memoizedState,t]}function Ap(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=jn.updateQueue,e===null?(e={lastEffect:null,stores:null},jn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function US(){return La().memoizedState}function Rg(t,e,r,n){var s=mo();jn.flags|=t,s.memoizedState=Ap(1|e,r,void 0,n===void 0?null:n)}function Fw(t,e,r,n){var s=La();n=n===void 0?null:n;var i=void 0;if(ms!==null){var a=ms.memoizedState;if(i=a.destroy,n!==null&&Ab(n,a.deps)){s.memoizedState=Ap(e,r,i,n);return}}jn.flags|=t,s.memoizedState=Ap(1|e,r,i,n)}function B_(t,e){return Rg(8390656,8,t,e)}function ub(t,e){return Fw(2048,8,t,e)}function LS(t,e){return Fw(4,2,t,e)}function QS(t,e){return Fw(4,4,t,e)}function jS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RS(t,e,r){return r=r!=null?r.concat([t]):null,Fw(4,4,jS.bind(null,e,t),r)}function db(){}function PS(t,e){var r=La();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ab(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function DS(t,e){var r=La();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ab(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function MS(t,e,r){return Hc&21?(Ya(r,e)||(r=zk(),jn.lanes|=r,Vc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fi=!0),t.memoizedState=r)}function Xj(t,e){var r=Xr;Xr=r!==0&&4>r?r:4,t(!0);var n=hx.transition;hx.transition={};try{t(!1),e()}finally{Xr=r,hx.transition=n}}function OS(){return La().memoizedState}function Yj(t,e,r){var n=Il(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HS(t))VS(e,r);else if(r=BS(t,e,r,n),r!==null){var s=yi();Ja(r,t,n,s),KS(r,e,n)}}function Zj(t,e,r){var n=Il(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HS(t))VS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,Ya(o,a)){var A=e.interleaved;A===null?(s.next=s,nb(e)):(s.next=A.next,A.next=s),e.interleaved=s;return}}catch{}finally{}r=BS(t,e,s,n),r!==null&&(s=yi(),Ja(r,t,n,s),KS(r,e,n))}}function HS(t){var e=t.alternate;return t===jn||e!==null&&e===jn}function VS(t,e){kf=Nm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function KS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Vy(t,r)}}var Fm={readContext:Ua,useCallback:qs,useContext:qs,useEffect:qs,useImperativeHandle:qs,useInsertionEffect:qs,useLayoutEffect:qs,useMemo:qs,useReducer:qs,useRef:qs,useState:qs,useDebugValue:qs,useDeferredValue:qs,useTransition:qs,useMutableSource:qs,useSyncExternalStore:qs,useId:qs,unstable_isNewReconciler:!1},eR={readContext:Ua,useCallback:function(t,e){return mo().memoizedState=[t,e===void 0?null:e],t},useContext:Ua,useEffect:B_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Rg(4194308,4,jS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Rg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rg(4,2,t,e)},useMemo:function(t,e){var r=mo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=mo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Yj.bind(null,jn,t),[n.memoizedState,t]},useRef:function(t){var e=mo();return t={current:t},e.memoizedState=t},useState:b_,useDebugValue:db,useDeferredValue:function(t){return mo().memoizedState=t},useTransition:function(){var t=b_(!1),e=t[0];return t=Xj.bind(null,t[1]),mo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=jn,s=mo();if(In){if(r===void 0)throw Error(ft(407));r=r()}else{if(r=e(),Ss===null)throw Error(ft(349));Hc&30||kS(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,B_(NS.bind(null,n,i,t),[t]),n.flags|=2048,Ap(9,SS.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=mo(),e=Ss.identifierPrefix;if(In){var r=Yo,n=Xo;r=(n&~(1<<32-Wa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ap++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Jj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tR={readContext:Ua,useCallback:PS,useContext:Ua,useEffect:ub,useImperativeHandle:RS,useInsertionEffect:LS,useLayoutEffect:QS,useMemo:DS,useReducer:fx,useRef:US,useState:function(){return fx(op)},useDebugValue:db,useDeferredValue:function(t){var e=La();return MS(e,ms.memoizedState,t)},useTransition:function(){var t=fx(op)[0],e=La().memoizedState;return[t,e]},useMutableSource:IS,useSyncExternalStore:ES,useId:OS,unstable_isNewReconciler:!1},rR={readContext:Ua,useCallback:PS,useContext:Ua,useEffect:ub,useImperativeHandle:RS,useInsertionEffect:LS,useLayoutEffect:QS,useMemo:DS,useReducer:px,useRef:US,useState:function(){return px(op)},useDebugValue:db,useDeferredValue:function(t){var e=La();return ms===null?e.memoizedState=t:MS(e,ms.memoizedState,t)},useTransition:function(){var t=px(op)[0],e=La().memoizedState;return[t,e]},useMutableSource:IS,useSyncExternalStore:ES,useId:OS,unstable_isNewReconciler:!1};function Ga(t,e){if(t&&t.defaultProps){e=Pn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function e2(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Pn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Tw={isMounted:function(t){return(t=t._reactInternals)?au(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=yi(),s=Il(t),i=sA(n,s);i.payload=e,r!=null&&(i.callback=r),e=_l(t,i,s),e!==null&&(Ja(e,t,s,n),Qg(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=yi(),s=Il(t),i=sA(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=_l(t,i,s),e!==null&&(Ja(e,t,s,n),Qg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=yi(),n=Il(t),s=sA(r,n);s.tag=2,e!=null&&(s.callback=e),e=_l(t,s,n),e!==null&&(Ja(e,t,n,r),Qg(e,t,n))}};function __(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!ep(r,n)||!ep(s,i):!0}function zS(t,e,r){var n=!1,s=jl,i=e.contextType;return typeof i=="object"&&i!==null?i=Ua(i):(s=ji(e)?Mc:li.current,n=e.contextTypes,i=(n=n!=null)?Bd(t,s):jl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function C_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Tw.enqueueReplaceState(e,e.state,null)}function t2(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},sb(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ua(i):(i=ji(e)?Mc:li.current,s.context=Bd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(e2(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tw.enqueueReplaceState(s,s.state,null),km(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ed(t,e){try{var r="",n=e;do r+=NQ(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gx(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function r2(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var nR=typeof WeakMap=="function"?WeakMap:Map;function GS(t,e,r){r=sA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Um||(Um=!0,d2=n),r2(t,e)},r}function $S(t,e,r){r=sA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){r2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){r2(t,e),typeof n!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function I_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new nR;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=mR.bind(null,t,e,r),e.then(t,t))}function E_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function k_(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sA(-1,1),e.tag=2,_l(r,e,1))),r.lanes|=1),t)}var sR=gA.ReactCurrentOwner,Fi=!1;function vi(t,e,r,n){e.child=t===null?bS(e,null,r,n):Cd(e,t.child,r,n)}function S_(t,e,r,n,s){r=r.render;var i=e.ref;return cd(e,s),n=lb(t,e,r,n,i,s),r=cb(),t!==null&&!Fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cA(t,e,s)):(In&&r&&Xy(e),e.flags|=1,vi(t,e,n,s),e.child)}function N_(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!vb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,qS(t,e,i,n,s)):(t=Og(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:ep,r(a,n)&&t.ref===e.ref)return cA(t,e,s)}return e.flags|=1,t=El(i,n),t.ref=e.ref,t.return=e,e.child=t}function qS(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(ep(i,n)&&t.ref===e.ref)if(Fi=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Fi=!0);else return e.lanes=t.lanes,cA(t,e,s)}return n2(t,e,r,n,s)}function WS(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(td,ta),ta|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dn(td,ta),ta|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,dn(td,ta),ta|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,dn(td,ta),ta|=n;return vi(t,e,s,r),e.child}function JS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function n2(t,e,r,n,s){var i=ji(r)?Mc:li.current;return i=Bd(e,i),cd(e,s),r=lb(t,e,r,n,i,s),n=cb(),t!==null&&!Fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cA(t,e,s)):(In&&n&&Xy(e),e.flags|=1,vi(t,e,r,s),e.child)}function F_(t,e,r,n,s){if(ji(r)){var i=!0;Bm(e)}else i=!1;if(cd(e,s),e.stateNode===null)Pg(t,e),zS(e,r,n),t2(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var A=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ua(c):(c=ji(r)?Mc:li.current,c=Bd(e,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||A!==c)&&C_(e,a,n,c),el=!1;var p=e.memoizedState;a.state=p,km(e,n,a,s),A=e.memoizedState,o!==n||p!==A||Qi.current||el?(typeof u=="function"&&(e2(e,r,u,n),A=e.memoizedState),(o=el||__(e,r,o,n,p,A,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),a.props=n,a.state=A,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,_S(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ga(e.type,o),a.props=c,d=e.pendingProps,p=a.context,A=r.contextType,typeof A=="object"&&A!==null?A=Ua(A):(A=ji(r)?Mc:li.current,A=Bd(e,A));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||p!==A)&&C_(e,a,n,A),el=!1,p=e.memoizedState,a.state=p,km(e,n,a,s);var v=e.memoizedState;o!==d||p!==v||Qi.current||el?(typeof g=="function"&&(e2(e,r,g,n),v=e.memoizedState),(c=el||__(e,r,c,n,p,v,A)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,A),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,A)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=A,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return s2(t,e,r,n,i,s)}function s2(t,e,r,n,s,i){JS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&g_(e,r,!1),cA(t,e,i);n=e.stateNode,sR.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Cd(e,t.child,null,i),e.child=Cd(e,null,o,i)):vi(t,e,o,i),e.memoizedState=n.state,s&&g_(e,r,!0),e.child}function XS(t){var e=t.stateNode;e.pendingContext?p_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&p_(t,e.context,!1),ib(t,e.containerInfo)}function T_(t,e,r,n,s){return _d(),Zy(s),e.flags|=256,vi(t,e,r,n),e.child}var i2={dehydrated:null,treeContext:null,retryLane:0};function a2(t){return{baseLanes:t,cachePool:null,transitions:null}}function YS(t,e,r){var n=e.pendingProps,s=Qn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),dn(Qn,s&1),t===null)return Yv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Qw(a,n,0,null),t=Lc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=a2(r),e.memoizedState=i2,t):hb(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return iR(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var A={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=El(s,A),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=El(o,i):(i=Lc(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?a2(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=i2,n}return i=t.child,t=i.sibling,n=El(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function hb(t,e){return e=Qw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function D0(t,e,r,n){return n!==null&&Zy(n),Cd(e,t.child,null,r),t=hb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iR(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=gx(Error(ft(422))),D0(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Qw({mode:"visible",children:n.children},s,0,null),i=Lc(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Cd(e,t.child,null,a),e.child.memoizedState=a2(a),e.memoizedState=i2,i);if(!(e.mode&1))return D0(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(ft(419)),n=gx(i,n,void 0),D0(t,e,a,n)}if(o=(a&t.childLanes)!==0,Fi||o){if(n=Ss,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,lA(t,s),Ja(n,t,s,-1))}return xb(),n=gx(Error(ft(421))),D0(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=wR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ra=Bl(s.nextSibling),sa=e,In=!0,qa=null,t!==null&&(Ca[Ia++]=Xo,Ca[Ia++]=Yo,Ca[Ia++]=Oc,Xo=t.id,Yo=t.overflow,Oc=e),e=hb(e,n.children),e.flags|=4096,e)}function U_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Zv(t.return,e,r)}function mx(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ZS(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(vi(t,e,n.children,r),n=Qn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U_(t,r,e);else if(t.tag===19)U_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(dn(Qn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Sm(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),mx(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sm(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}mx(e,!0,r,null,i);break;case"together":mx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Vc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ft(153));if(e.child!==null){for(t=e.child,r=El(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=El(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function aR(t,e,r){switch(e.tag){case 3:XS(e),_d();break;case 5:CS(e);break;case 1:ji(e.type)&&Bm(e);break;case 4:ib(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;dn(Im,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(dn(Qn,Qn.current&1),e.flags|=128,null):r&e.child.childLanes?YS(t,e,r):(dn(Qn,Qn.current&1),t=cA(t,e,r),t!==null?t.sibling:null);dn(Qn,Qn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ZS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),dn(Qn,Qn.current),n)break;return null;case 22:case 23:return e.lanes=0,WS(t,e,r)}return cA(t,e,r)}var eN,o2,tN,rN;eN=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};o2=function(){};tN=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Fc(Io.current);var i=null;switch(r){case"input":s=Sv(t,s),n=Sv(t,n),i=[];break;case"select":s=Pn({},s,{value:void 0}),n=Pn({},n,{value:void 0}),i=[];break;case"textarea":s=Tv(t,s),n=Tv(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ym)}Lv(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($f.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var A=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&A!==o&&(A!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||A&&A.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in A)A.hasOwnProperty(a)&&o[a]!==A[a]&&(r||(r={}),r[a]=A[a])}else r||(i||(i=[]),i.push(c,r)),r=A;else c==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,o=o?o.__html:void 0,A!=null&&o!==A&&(i=i||[]).push(c,A)):c==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(c,""+A):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($f.hasOwnProperty(c)?(A!=null&&c==="onScroll"&&wn("scroll",t),i||o===A||(i=[])):(i=i||[]).push(c,A))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};rN=function(t,e,r,n){r!==n&&(e.flags|=4)};function Oh(t,e){if(!In)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ws(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function oR(t,e,r){var n=e.pendingProps;switch(Yy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(e),null;case 1:return ji(e.type)&&bm(),Ws(e),null;case 3:return n=e.stateNode,Id(),bn(Qi),bn(li),ob(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(R0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qa!==null&&(p2(qa),qa=null))),o2(t,e),Ws(e),null;case 5:ab(e);var s=Fc(ip.current);if(r=e.type,t!==null&&e.stateNode!=null)tN(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ft(166));return Ws(e),null}if(t=Fc(Io.current),R0(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[xo]=e,n[np]=i,t=(e.mode&1)!==0,r){case"dialog":wn("cancel",n),wn("close",n);break;case"iframe":case"object":case"embed":wn("load",n);break;case"video":case"audio":for(s=0;s<of.length;s++)wn(of[s],n);break;case"source":wn("error",n);break;case"img":case"image":case"link":wn("error",n),wn("load",n);break;case"details":wn("toggle",n);break;case"input":H5(n,i),wn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},wn("invalid",n);break;case"textarea":K5(n,i),wn("invalid",n)}Lv(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&j0(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&j0(n.textContent,o,t),s=["children",""+o]):$f.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&wn("scroll",n)}switch(r){case"input":k0(n),V5(n,i,!0);break;case"textarea":k0(n),z5(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ym)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nk(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[xo]=e,t[np]=n,eN(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qv(r,n),r){case"dialog":wn("cancel",t),wn("close",t),s=n;break;case"iframe":case"object":case"embed":wn("load",t),s=n;break;case"video":case"audio":for(s=0;s<of.length;s++)wn(of[s],t);s=n;break;case"source":wn("error",t),s=n;break;case"img":case"image":case"link":wn("error",t),wn("load",t),s=n;break;case"details":wn("toggle",t),s=n;break;case"input":H5(t,n),s=Sv(t,n),wn("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Pn({},n,{value:void 0}),wn("invalid",t);break;case"textarea":K5(t,n),s=Tv(t,n),wn("invalid",t);break;default:s=n}Lv(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var A=o[i];i==="style"?Uk(t,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Fk(t,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&qf(t,A):typeof A=="number"&&qf(t,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($f.hasOwnProperty(i)?A!=null&&i==="onScroll"&&wn("scroll",t):A!=null&&Ry(t,i,A,a))}switch(r){case"input":k0(t),V5(t,n,!1);break;case"textarea":k0(t),z5(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ql(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ad(t,!!n.multiple,i,!1):n.defaultValue!=null&&ad(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ym)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ws(e),null;case 6:if(t&&e.stateNode!=null)rN(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ft(166));if(r=Fc(ip.current),Fc(Io.current),R0(e)){if(n=e.stateNode,r=e.memoizedProps,n[xo]=e,(i=n.nodeValue!==r)&&(t=sa,t!==null))switch(t.tag){case 3:j0(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&j0(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xo]=e,e.stateNode=n}return Ws(e),null;case 13:if(bn(Qn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(In&&ra!==null&&e.mode&1&&!(e.flags&128))vS(),_d(),e.flags|=98560,i=!1;else if(i=R0(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ft(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ft(317));i[xo]=e}else _d(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ws(e),i=!1}else qa!==null&&(p2(qa),qa=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qn.current&1?xs===0&&(xs=3):xb())),e.updateQueue!==null&&(e.flags|=4),Ws(e),null);case 4:return Id(),o2(t,e),t===null&&tp(e.stateNode.containerInfo),Ws(e),null;case 10:return rb(e.type._context),Ws(e),null;case 17:return ji(e.type)&&bm(),Ws(e),null;case 19:if(bn(Qn),i=e.memoizedState,i===null)return Ws(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Oh(i,!1);else{if(xs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Sm(t),a!==null){for(e.flags|=128,Oh(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return dn(Qn,Qn.current&1|2),e.child}t=t.sibling}i.tail!==null&&es()>kd&&(e.flags|=128,n=!0,Oh(i,!1),e.lanes=4194304)}else{if(!n)if(t=Sm(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Oh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!In)return Ws(e),null}else 2*es()-i.renderingStartTime>kd&&r!==1073741824&&(e.flags|=128,n=!0,Oh(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=es(),e.sibling=null,r=Qn.current,dn(Qn,n?r&1|2:r&1),e):(Ws(e),null);case 22:case 23:return wb(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ta&1073741824&&(Ws(e),e.subtreeFlags&6&&(e.flags|=8192)):Ws(e),null;case 24:return null;case 25:return null}throw Error(ft(156,e.tag))}function AR(t,e){switch(Yy(e),e.tag){case 1:return ji(e.type)&&bm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Id(),bn(Qi),bn(li),ob(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ab(e),null;case 13:if(bn(Qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ft(340));_d()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bn(Qn),null;case 4:return Id(),null;case 10:return rb(e.type._context),null;case 22:case 23:return wb(),null;case 24:return null;default:return null}}var M0=!1,ii=!1,lR=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function ed(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zn(t,e,n)}else r.current=null}function A2(t,e,r){try{r()}catch(n){zn(t,e,n)}}var L_=!1;function cR(t,e){if(zv=wm,t=oS(),Jy(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,A=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var g;d!==r||s!==0&&d.nodeType!==3||(o=a+s),d!==i||n!==0&&d.nodeType!==3||(A=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===r&&++c===s&&(o=a),p===i&&++u===n&&(A=a),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}r=o===-1||A===-1?null:{start:o,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gv={focusedElem:t,selectionRange:r},wm=!1,Rt=e;Rt!==null;)if(e=Rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Rt=t;else for(;Rt!==null;){e=Rt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,S=v.memoizedState,x=e.stateNode,I=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ga(e.type,y),S);x.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ft(163))}}catch(U){zn(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,Rt=t;break}Rt=e.return}return v=L_,L_=!1,v}function Sf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&A2(e,r,i)}s=s.next}while(s!==n)}}function Uw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function l2(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function nN(t){var e=t.alternate;e!==null&&(t.alternate=null,nN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xo],delete e[np],delete e[Wv],delete e[Gj],delete e[$j])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sN(t){return t.tag===5||t.tag===3||t.tag===4}function Q_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function c2(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ym));else if(n!==4&&(t=t.child,t!==null))for(c2(t,e,r),t=t.sibling;t!==null;)c2(t,e,r),t=t.sibling}function u2(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(u2(t,e,r),t=t.sibling;t!==null;)u2(t,e,r),t=t.sibling}var Ps=null,$a=!1;function KA(t,e,r){for(r=r.child;r!==null;)iN(t,e,r),r=r.sibling}function iN(t,e,r){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(Cw,r)}catch{}switch(r.tag){case 5:ii||ed(r,e);case 6:var n=Ps,s=$a;Ps=null,KA(t,e,r),Ps=n,$a=s,Ps!==null&&($a?(t=Ps,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ps.removeChild(r.stateNode));break;case 18:Ps!==null&&($a?(t=Ps,r=r.stateNode,t.nodeType===8?cx(t.parentNode,r):t.nodeType===1&&cx(t,r),Yf(t)):cx(Ps,r.stateNode));break;case 4:n=Ps,s=$a,Ps=r.stateNode.containerInfo,$a=!0,KA(t,e,r),Ps=n,$a=s;break;case 0:case 11:case 14:case 15:if(!ii&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&A2(r,e,a),s=s.next}while(s!==n)}KA(t,e,r);break;case 1:if(!ii&&(ed(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){zn(r,e,o)}KA(t,e,r);break;case 21:KA(t,e,r);break;case 22:r.mode&1?(ii=(n=ii)||r.memoizedState!==null,KA(t,e,r),ii=n):KA(t,e,r);break;default:KA(t,e,r)}}function j_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lR),e.forEach(function(n){var s=xR.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Va(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ps=o.stateNode,$a=!1;break e;case 3:Ps=o.stateNode.containerInfo,$a=!0;break e;case 4:Ps=o.stateNode.containerInfo,$a=!0;break e}o=o.return}if(Ps===null)throw Error(ft(160));iN(i,a,s),Ps=null,$a=!1;var A=s.alternate;A!==null&&(A.return=null),s.return=null}catch(c){zn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aN(e,t),e=e.sibling}function aN(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Va(e,t),uo(t),n&4){try{Sf(3,t,t.return),Uw(3,t)}catch(y){zn(t,t.return,y)}try{Sf(5,t,t.return)}catch(y){zn(t,t.return,y)}}break;case 1:Va(e,t),uo(t),n&512&&r!==null&&ed(r,r.return);break;case 5:if(Va(e,t),uo(t),n&512&&r!==null&&ed(r,r.return),t.flags&32){var s=t.stateNode;try{qf(s,"")}catch(y){zn(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&kk(s,i),Qv(o,a);var c=Qv(o,i);for(a=0;a<A.length;a+=2){var u=A[a],d=A[a+1];u==="style"?Uk(s,d):u==="dangerouslySetInnerHTML"?Fk(s,d):u==="children"?qf(s,d):Ry(s,u,d,c)}switch(o){case"input":Nv(s,i);break;case"textarea":Sk(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ad(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?ad(s,!!i.multiple,i.defaultValue,!0):ad(s,!!i.multiple,i.multiple?[]:"",!1))}s[np]=i}catch(y){zn(t,t.return,y)}}break;case 6:if(Va(e,t),uo(t),n&4){if(t.stateNode===null)throw Error(ft(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){zn(t,t.return,y)}}break;case 3:if(Va(e,t),uo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yf(e.containerInfo)}catch(y){zn(t,t.return,y)}break;case 4:Va(e,t),uo(t);break;case 13:Va(e,t),uo(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gb=es())),n&4&&j_(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(ii=(c=ii)||u,Va(e,t),ii=c):Va(e,t),uo(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Rt=t,u=t.child;u!==null;){for(d=Rt=u;Rt!==null;){switch(p=Rt,g=p.child,p.tag){case 0:case 11:case 14:case 15:Sf(4,p,p.return);break;case 1:ed(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){zn(n,r,y)}}break;case 5:ed(p,p.return);break;case 22:if(p.memoizedState!==null){P_(d);continue}}g!==null?(g.return=p,Rt=g):P_(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,A=d.memoizedProps.style,a=A!=null&&A.hasOwnProperty("display")?A.display:null,o.style.display=Tk("display",a))}catch(y){zn(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){zn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Va(e,t),uo(t),n&4&&j_(t);break;case 21:break;default:Va(e,t),uo(t)}}function uo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sN(r)){var n=r;break e}r=r.return}throw Error(ft(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(qf(s,""),n.flags&=-33);var i=Q_(t);u2(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Q_(t);c2(t,o,a);break;default:throw Error(ft(161))}}catch(A){zn(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uR(t,e,r){Rt=t,oN(t)}function oN(t,e,r){for(var n=(t.mode&1)!==0;Rt!==null;){var s=Rt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||M0;if(!a){var o=s.alternate,A=o!==null&&o.memoizedState!==null||ii;o=M0;var c=ii;if(M0=a,(ii=A)&&!c)for(Rt=s;Rt!==null;)a=Rt,A=a.child,a.tag===22&&a.memoizedState!==null?D_(s):A!==null?(A.return=a,Rt=A):D_(s);for(;i!==null;)Rt=i,oN(i),i=i.sibling;Rt=s,M0=o,ii=c}R_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Rt=i):R_(t)}}function R_(t){for(;Rt!==null;){var e=Rt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ii||Uw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ii)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ga(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&y_(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}y_(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Yf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ft(163))}ii||e.flags&512&&l2(e)}catch(p){zn(e,e.return,p)}}if(e===t){Rt=null;break}if(r=e.sibling,r!==null){r.return=e.return,Rt=r;break}Rt=e.return}}function P_(t){for(;Rt!==null;){var e=Rt;if(e===t){Rt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Rt=r;break}Rt=e.return}}function D_(t){for(;Rt!==null;){var e=Rt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Uw(4,e)}catch(A){zn(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(A){zn(e,s,A)}}var i=e.return;try{l2(e)}catch(A){zn(e,i,A)}break;case 5:var a=e.return;try{l2(e)}catch(A){zn(e,a,A)}}}catch(A){zn(e,e.return,A)}if(e===t){Rt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Rt=o;break}Rt=e.return}}var dR=Math.ceil,Tm=gA.ReactCurrentDispatcher,fb=gA.ReactCurrentOwner,Ta=gA.ReactCurrentBatchConfig,Lr=0,Ss=null,ls=null,Ks=0,ta=0,td=Jl(0),xs=0,lp=null,Vc=0,Lw=0,pb=0,Nf=null,Si=null,gb=0,kd=1/0,qo=null,Um=!1,d2=null,Cl=null,O0=!1,dl=null,Lm=0,Ff=0,h2=null,Dg=-1,Mg=0;function yi(){return Lr&6?es():Dg!==-1?Dg:Dg=es()}function Il(t){return t.mode&1?Lr&2&&Ks!==0?Ks&-Ks:Wj.transition!==null?(Mg===0&&(Mg=zk()),Mg):(t=Xr,t!==0||(t=window.event,t=t===void 0?16:Yk(t.type)),t):1}function Ja(t,e,r,n){if(50<Ff)throw Ff=0,h2=null,Error(ft(185));Tp(t,r,n),(!(Lr&2)||t!==Ss)&&(t===Ss&&(!(Lr&2)&&(Lw|=r),xs===4&&nl(t,Ks)),Ri(t,n),r===1&&Lr===0&&!(e.mode&1)&&(kd=es()+500,Nw&&Xl()))}function Ri(t,e){var r=t.callbackNode;WQ(t,e);var n=mm(t,t===Ss?Ks:0);if(n===0)r!==null&&q5(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&q5(r),e===1)t.tag===0?qj(M_.bind(null,t)):mS(M_.bind(null,t)),Kj(function(){!(Lr&6)&&Xl()}),r=null;else{switch(Gk(n)){case 1:r=Hy;break;case 4:r=Vk;break;case 16:r=gm;break;case 536870912:r=Kk;break;default:r=gm}r=pN(r,AN.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function AN(t,e){if(Dg=-1,Mg=0,Lr&6)throw Error(ft(327));var r=t.callbackNode;if(ud()&&t.callbackNode!==r)return null;var n=mm(t,t===Ss?Ks:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Qm(t,n);else{e=n;var s=Lr;Lr|=2;var i=cN();(Ss!==t||Ks!==e)&&(qo=null,kd=es()+500,Uc(t,e));do try{pR();break}catch(o){lN(t,o)}while(!0);tb(),Tm.current=i,Lr=s,ls!==null?e=0:(Ss=null,Ks=0,e=xs)}if(e!==0){if(e===2&&(s=Mv(t),s!==0&&(n=s,e=f2(t,s))),e===1)throw r=lp,Uc(t,0),nl(t,n),Ri(t,es()),r;if(e===6)nl(t,n);else{if(s=t.current.alternate,!(n&30)&&!hR(s)&&(e=Qm(t,n),e===2&&(i=Mv(t),i!==0&&(n=i,e=f2(t,i))),e===1))throw r=lp,Uc(t,0),nl(t,n),Ri(t,es()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ft(345));case 2:xc(t,Si,qo);break;case 3:if(nl(t,n),(n&130023424)===n&&(e=gb+500-es(),10<e)){if(mm(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){yi(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qv(xc.bind(null,t,Si,qo),e);break}xc(t,Si,qo);break;case 4:if(nl(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-Wa(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=es()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dR(n/1960))-n,10<n){t.timeoutHandle=qv(xc.bind(null,t,Si,qo),n);break}xc(t,Si,qo);break;case 5:xc(t,Si,qo);break;default:throw Error(ft(329))}}}return Ri(t,es()),t.callbackNode===r?AN.bind(null,t):null}function f2(t,e){var r=Nf;return t.current.memoizedState.isDehydrated&&(Uc(t,e).flags|=256),t=Qm(t,e),t!==2&&(e=Si,Si=r,e!==null&&p2(e)),t}function p2(t){Si===null?Si=t:Si.push.apply(Si,t)}function hR(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ya(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nl(t,e){for(e&=~pb,e&=~Lw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Wa(e),n=1<<r;t[r]=-1,e&=~n}}function M_(t){if(Lr&6)throw Error(ft(327));ud();var e=mm(t,0);if(!(e&1))return Ri(t,es()),null;var r=Qm(t,e);if(t.tag!==0&&r===2){var n=Mv(t);n!==0&&(e=n,r=f2(t,n))}if(r===1)throw r=lp,Uc(t,0),nl(t,e),Ri(t,es()),r;if(r===6)throw Error(ft(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Si,qo),Ri(t,es()),null}function mb(t,e){var r=Lr;Lr|=1;try{return t(e)}finally{Lr=r,Lr===0&&(kd=es()+500,Nw&&Xl())}}function Kc(t){dl!==null&&dl.tag===0&&!(Lr&6)&&ud();var e=Lr;Lr|=1;var r=Ta.transition,n=Xr;try{if(Ta.transition=null,Xr=1,t)return t()}finally{Xr=n,Ta.transition=r,Lr=e,!(Lr&6)&&Xl()}}function wb(){ta=td.current,bn(td)}function Uc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Vj(r)),ls!==null)for(r=ls.return;r!==null;){var n=r;switch(Yy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bm();break;case 3:Id(),bn(Qi),bn(li),ob();break;case 5:ab(n);break;case 4:Id();break;case 13:bn(Qn);break;case 19:bn(Qn);break;case 10:rb(n.type._context);break;case 22:case 23:wb()}r=r.return}if(Ss=t,ls=t=El(t.current,null),Ks=ta=e,xs=0,lp=null,pb=Lw=Vc=0,Si=Nf=null,Nc!==null){for(e=0;e<Nc.length;e++)if(r=Nc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Nc=null}return t}function lN(t,e){do{var r=ls;try{if(tb(),jg.current=Fm,Nm){for(var n=jn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Nm=!1}if(Hc=0,Is=ms=jn=null,kf=!1,ap=0,fb.current=null,r===null||r.return===null){xs=1,lp=e,ls=null;break}e:{var i=t,a=r.return,o=r,A=e;if(e=Ks,o.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var c=A,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=E_(a);if(g!==null){g.flags&=-257,k_(g,a,o,i,e),g.mode&1&&I_(i,c,e),e=g,A=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(A),e.updateQueue=y}else v.add(A);break e}else{if(!(e&1)){I_(i,c,e),xb();break e}A=Error(ft(426))}}else if(In&&o.mode&1){var S=E_(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),k_(S,a,o,i,e),Zy(Ed(A,o));break e}}i=A=Ed(A,o),xs!==4&&(xs=2),Nf===null?Nf=[i]:Nf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=GS(i,A,e);v_(i,x);break e;case 1:o=A;var I=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Cl===null||!Cl.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var U=$S(i,o,e);v_(i,U);break e}}i=i.return}while(i!==null)}dN(r)}catch(D){e=D,ls===r&&r!==null&&(ls=r=r.return);continue}break}while(!0)}function cN(){var t=Tm.current;return Tm.current=Fm,t===null?Fm:t}function xb(){(xs===0||xs===3||xs===2)&&(xs=4),Ss===null||!(Vc&268435455)&&!(Lw&268435455)||nl(Ss,Ks)}function Qm(t,e){var r=Lr;Lr|=2;var n=cN();(Ss!==t||Ks!==e)&&(qo=null,Uc(t,e));do try{fR();break}catch(s){lN(t,s)}while(!0);if(tb(),Lr=r,Tm.current=n,ls!==null)throw Error(ft(261));return Ss=null,Ks=0,xs}function fR(){for(;ls!==null;)uN(ls)}function pR(){for(;ls!==null&&!MQ();)uN(ls)}function uN(t){var e=fN(t.alternate,t,ta);t.memoizedProps=t.pendingProps,e===null?dN(t):ls=e,fb.current=null}function dN(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=AR(r,e),r!==null){r.flags&=32767,ls=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xs=6,ls=null;return}}else if(r=oR(r,e,ta),r!==null){ls=r;return}if(e=e.sibling,e!==null){ls=e;return}ls=e=t}while(e!==null);xs===0&&(xs=5)}function xc(t,e,r){var n=Xr,s=Ta.transition;try{Ta.transition=null,Xr=1,gR(t,e,r,n)}finally{Ta.transition=s,Xr=n}return null}function gR(t,e,r,n){do ud();while(dl!==null);if(Lr&6)throw Error(ft(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ft(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(JQ(t,i),t===Ss&&(ls=Ss=null,Ks=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||O0||(O0=!0,pN(gm,function(){return ud(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ta.transition,Ta.transition=null;var a=Xr;Xr=1;var o=Lr;Lr|=4,fb.current=null,cR(t,r),aN(r,t),jj(Gv),wm=!!zv,Gv=zv=null,t.current=r,uR(r),OQ(),Lr=o,Xr=a,Ta.transition=i}else t.current=r;if(O0&&(O0=!1,dl=t,Lm=s),i=t.pendingLanes,i===0&&(Cl=null),KQ(r.stateNode),Ri(t,es()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Um)throw Um=!1,t=d2,d2=null,t;return Lm&1&&t.tag!==0&&ud(),i=t.pendingLanes,i&1?t===h2?Ff++:(Ff=0,h2=t):Ff=0,Xl(),null}function ud(){if(dl!==null){var t=Gk(Lm),e=Ta.transition,r=Xr;try{if(Ta.transition=null,Xr=16>t?16:t,dl===null)var n=!1;else{if(t=dl,dl=null,Lm=0,Lr&6)throw Error(ft(331));var s=Lr;for(Lr|=4,Rt=t.current;Rt!==null;){var i=Rt,a=i.child;if(Rt.flags&16){var o=i.deletions;if(o!==null){for(var A=0;A<o.length;A++){var c=o[A];for(Rt=c;Rt!==null;){var u=Rt;switch(u.tag){case 0:case 11:case 15:Sf(8,u,i)}var d=u.child;if(d!==null)d.return=u,Rt=d;else for(;Rt!==null;){u=Rt;var p=u.sibling,g=u.return;if(nN(u),u===c){Rt=null;break}if(p!==null){p.return=g,Rt=p;break}Rt=g}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}Rt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Rt=a;else e:for(;Rt!==null;){if(i=Rt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sf(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Rt=x;break e}Rt=i.return}}var I=t.current;for(Rt=I;Rt!==null;){a=Rt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,Rt=N;else e:for(a=I;Rt!==null;){if(o=Rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Uw(9,o)}}catch(D){zn(o,o.return,D)}if(o===a){Rt=null;break e}var U=o.sibling;if(U!==null){U.return=o.return,Rt=U;break e}Rt=o.return}}if(Lr=s,Xl(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(Cw,t)}catch{}n=!0}return n}finally{Xr=r,Ta.transition=e}}return!1}function O_(t,e,r){e=Ed(r,e),e=GS(t,e,1),t=_l(t,e,1),e=yi(),t!==null&&(Tp(t,1,e),Ri(t,e))}function zn(t,e,r){if(t.tag===3)O_(t,t,r);else for(;e!==null;){if(e.tag===3){O_(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cl===null||!Cl.has(n))){t=Ed(r,t),t=$S(e,t,1),e=_l(e,t,1),t=yi(),e!==null&&(Tp(e,1,t),Ri(e,t));break}}e=e.return}}function mR(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=yi(),t.pingedLanes|=t.suspendedLanes&r,Ss===t&&(Ks&r)===r&&(xs===4||xs===3&&(Ks&130023424)===Ks&&500>es()-gb?Uc(t,0):pb|=r),Ri(t,e)}function hN(t,e){e===0&&(t.mode&1?(e=F0,F0<<=1,!(F0&130023424)&&(F0=4194304)):e=1);var r=yi();t=lA(t,e),t!==null&&(Tp(t,e,r),Ri(t,r))}function wR(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hN(t,r)}function xR(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ft(314))}n!==null&&n.delete(e),hN(t,r)}var fN;fN=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qi.current)Fi=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Fi=!1,aR(t,e,r);Fi=!!(t.flags&131072)}else Fi=!1,In&&e.flags&1048576&&wS(e,Cm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Pg(t,e),t=e.pendingProps;var s=Bd(e,li.current);cd(e,r),s=lb(null,e,n,t,s,r);var i=cb();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ji(n)?(i=!0,Bm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sb(e),s.updater=Tw,e.stateNode=s,s._reactInternals=e,t2(e,n,t,r),e=s2(null,e,n,!0,i,r)):(e.tag=0,In&&i&&Xy(e),vi(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Pg(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=yR(n),t=Ga(n,t),s){case 0:e=n2(null,e,n,t,r);break e;case 1:e=F_(null,e,n,t,r);break e;case 11:e=S_(null,e,n,t,r);break e;case 14:e=N_(null,e,n,Ga(n.type,t),r);break e}throw Error(ft(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ga(n,s),n2(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ga(n,s),F_(t,e,n,s,r);case 3:e:{if(XS(e),t===null)throw Error(ft(387));n=e.pendingProps,i=e.memoizedState,s=i.element,_S(t,e),km(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ed(Error(ft(423)),e),e=T_(t,e,n,r,s);break e}else if(n!==s){s=Ed(Error(ft(424)),e),e=T_(t,e,n,r,s);break e}else for(ra=Bl(e.stateNode.containerInfo.firstChild),sa=e,In=!0,qa=null,r=bS(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_d(),n===s){e=cA(t,e,r);break e}vi(t,e,n,r)}e=e.child}return e;case 5:return CS(e),t===null&&Yv(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,$v(n,s)?a=null:i!==null&&$v(n,i)&&(e.flags|=32),JS(t,e),vi(t,e,a,r),e.child;case 6:return t===null&&Yv(e),null;case 13:return YS(t,e,r);case 4:return ib(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cd(e,null,n,r):vi(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ga(n,s),S_(t,e,n,s,r);case 7:return vi(t,e,e.pendingProps,r),e.child;case 8:return vi(t,e,e.pendingProps.children,r),e.child;case 12:return vi(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,dn(Im,n._currentValue),n._currentValue=a,i!==null)if(Ya(i.value,a)){if(i.children===s.children&&!Qi.current){e=cA(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var A=o.firstContext;A!==null;){if(A.context===n){if(i.tag===1){A=sA(-1,r&-r),A.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?A.next=A:(A.next=u.next,u.next=A),c.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),Zv(i.return,r,e),o.lanes|=r;break}A=A.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ft(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Zv(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}vi(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,cd(e,r),s=Ua(s),n=n(s),e.flags|=1,vi(t,e,n,r),e.child;case 14:return n=e.type,s=Ga(n,e.pendingProps),s=Ga(n.type,s),N_(t,e,n,s,r);case 15:return qS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ga(n,s),Pg(t,e),e.tag=1,ji(n)?(t=!0,Bm(e)):t=!1,cd(e,r),zS(e,n,s),t2(e,n,s,r),s2(null,e,n,!0,t,r);case 19:return ZS(t,e,r);case 22:return WS(t,e,r)}throw Error(ft(156,e.tag))};function pN(t,e){return Hk(t,e)}function vR(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sa(t,e,r,n){return new vR(t,e,r,n)}function vb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yR(t){if(typeof t=="function")return vb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dy)return 11;if(t===My)return 14}return 2}function El(t,e){var r=t.alternate;return r===null?(r=Sa(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Og(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")vb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zu:return Lc(r.children,s,i,e);case Py:a=8,s|=8;break;case Cv:return t=Sa(12,r,e,s|2),t.elementType=Cv,t.lanes=i,t;case Iv:return t=Sa(13,r,e,s),t.elementType=Iv,t.lanes=i,t;case Ev:return t=Sa(19,r,e,s),t.elementType=Ev,t.lanes=i,t;case Ck:return Qw(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bk:a=10;break e;case _k:a=9;break e;case Dy:a=11;break e;case My:a=14;break e;case ZA:a=16,n=null;break e}throw Error(ft(130,t==null?t:typeof t,""))}return e=Sa(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Lc(t,e,r,n){return t=Sa(7,t,n,e),t.lanes=r,t}function Qw(t,e,r,n){return t=Sa(22,t,n,e),t.elementType=Ck,t.lanes=r,t.stateNode={isHidden:!1},t}function wx(t,e,r){return t=Sa(6,t,null,e),t.lanes=r,t}function xx(t,e,r){return e=Sa(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bR(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z1(0),this.expirationTimes=Z1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z1(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yb(t,e,r,n,s,i,a,o,A){return t=new bR(t,e,r,o,A),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Sa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sb(i),t}function BR(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ku,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function gN(t){if(!t)return jl;t=t._reactInternals;e:{if(au(t)!==t||t.tag!==1)throw Error(ft(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ft(171))}if(t.tag===1){var r=t.type;if(ji(r))return gS(t,r,e)}return e}function mN(t,e,r,n,s,i,a,o,A){return t=yb(r,n,!0,t,s,i,a,o,A),t.context=gN(null),r=t.current,n=yi(),s=Il(r),i=sA(n,s),i.callback=e??null,_l(r,i,s),t.current.lanes=s,Tp(t,s,n),Ri(t,n),t}function jw(t,e,r,n){var s=e.current,i=yi(),a=Il(s);return r=gN(r),e.context===null?e.context=r:e.pendingContext=r,e=sA(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=_l(s,e,a),t!==null&&(Ja(t,s,a,i),Qg(t,s,a)),a}function jm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function H_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function bb(t,e){H_(t,e),(t=t.alternate)&&H_(t,e)}function _R(){return null}var wN=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bb(t){this._internalRoot=t}Rw.prototype.render=Bb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ft(409));jw(t,e,null,null)};Rw.prototype.unmount=Bb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kc(function(){jw(null,t,null,null)}),e[AA]=null}};function Rw(t){this._internalRoot=t}Rw.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wk();t={blockedOn:null,target:t,priority:e};for(var r=0;r<rl.length&&e!==0&&e<rl[r].priority;r++);rl.splice(r,0,t),r===0&&Xk(t)}};function _b(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function V_(){}function CR(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=jm(a);i.call(c)}}var a=mN(e,n,t,0,null,!1,!1,"",V_);return t._reactRootContainer=a,t[AA]=a.current,tp(t.nodeType===8?t.parentNode:t),Kc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=jm(A);o.call(c)}}var A=yb(t,0,!1,null,null,!1,!1,"",V_);return t._reactRootContainer=A,t[AA]=A.current,tp(t.nodeType===8?t.parentNode:t),Kc(function(){jw(e,A,r,n)}),A}function Dw(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var A=jm(a);o.call(A)}}jw(e,a,t,s)}else a=CR(r,e,t,s,n);return jm(a)}$k=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=af(e.pendingLanes);r!==0&&(Vy(e,r|1),Ri(e,es()),!(Lr&6)&&(kd=es()+500,Xl()))}break;case 13:Kc(function(){var n=lA(t,1);if(n!==null){var s=yi();Ja(n,t,1,s)}}),bb(t,1)}};Ky=function(t){if(t.tag===13){var e=lA(t,134217728);if(e!==null){var r=yi();Ja(e,t,134217728,r)}bb(t,134217728)}};qk=function(t){if(t.tag===13){var e=Il(t),r=lA(t,e);if(r!==null){var n=yi();Ja(r,t,e,n)}bb(t,e)}};Wk=function(){return Xr};Jk=function(t,e){var r=Xr;try{return Xr=t,e()}finally{Xr=r}};Rv=function(t,e,r){switch(e){case"input":if(Nv(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Sw(n);if(!s)throw Error(ft(90));Ek(n),Nv(n,s)}}}break;case"textarea":Sk(t,r);break;case"select":e=r.value,e!=null&&ad(t,!!r.multiple,e,!1)}};jk=mb;Rk=Kc;var IR={usingClientEntryPoint:!1,Events:[Lp,Wu,Sw,Lk,Qk,mb]},Hh={findFiberByHostInstance:Sc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ER={bundleType:Hh.bundleType,version:Hh.version,rendererPackageName:Hh.rendererPackageName,rendererConfig:Hh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mk(t),t===null?null:t.stateNode},findFiberByHostInstance:Hh.findFiberByHostInstance||_R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H0.isDisabled&&H0.supportsFiber)try{Cw=H0.inject(ER),Co=H0}catch{}}Aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;Aa.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_b(e))throw Error(ft(200));return BR(t,e,null,r)};Aa.createRoot=function(t,e){if(!_b(t))throw Error(ft(299));var r=!1,n="",s=wN;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yb(t,1,!1,null,null,r,!1,n,s),t[AA]=e.current,tp(t.nodeType===8?t.parentNode:t),new Bb(e)};Aa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ft(188)):(t=Object.keys(t).join(","),Error(ft(268,t)));return t=Mk(e),t=t===null?null:t.stateNode,t};Aa.flushSync=function(t){return Kc(t)};Aa.hydrate=function(t,e,r){if(!Pw(e))throw Error(ft(200));return Dw(null,t,e,!0,r)};Aa.hydrateRoot=function(t,e,r){if(!_b(t))throw Error(ft(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=wN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=mN(e,null,t,1,r??null,s,!1,i,a),t[AA]=e.current,tp(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Rw(e)};Aa.render=function(t,e,r){if(!Pw(e))throw Error(ft(200));return Dw(null,t,e,!1,r)};Aa.unmountComponentAtNode=function(t){if(!Pw(t))throw Error(ft(40));return t._reactRootContainer?(Kc(function(){Dw(null,null,t,!1,function(){t._reactRootContainer=null,t[AA]=null})}),!0):!1};Aa.unstable_batchedUpdates=mb;Aa.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Pw(r))throw Error(ft(200));if(t==null||t._reactInternals===void 0)throw Error(ft(38));return Dw(t,e,r,!1,n)};Aa.version="18.3.1-next-f1338f8080-20240426";function xN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xN)}catch(t){console.error(t)}}xN(),xk.exports=Aa;var kR=xk.exports,K_=kR;Bv.createRoot=K_.createRoot,Bv.hydrateRoot=K_.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cp.apply(this,arguments)}var hl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hl||(hl={}));const z_="popstate";function SR(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:o="",hash:A=""}=ou(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),g2("",{pathname:a,search:o,hash:A},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let a=s.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let A=s.location.href,c=A.indexOf("#");o=c===-1?A:A.slice(0,c)}return o+"#"+(typeof i=="string"?i:Rm(i))}function n(s,i){Mw(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return FR(e,r,n,t)}function Rn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NR(){return Math.random().toString(36).substr(2,8)}function G_(t,e){return{usr:t.state,key:t.key,idx:e}}function g2(t,e,r,n){return r===void 0&&(r=null),cp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ou(e):e,{state:r,key:e&&e.key||n||NR()})}function Rm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ou(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function FR(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=hl.Pop,A=null,c=u();c==null&&(c=0,a.replaceState(cp({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=hl.Pop;let S=u(),x=S==null?null:S-c;c=S,A&&A({action:o,location:y.location,delta:x})}function p(S,x){o=hl.Push;let I=g2(y.location,S,x);r&&r(I,S),c=u()+1;let N=G_(I,c),U=y.createHref(I);try{a.pushState(N,"",U)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(U)}i&&A&&A({action:o,location:y.location,delta:1})}function g(S,x){o=hl.Replace;let I=g2(y.location,S,x);r&&r(I,S),c=u();let N=G_(I,c),U=y.createHref(I);a.replaceState(N,"",U),i&&A&&A({action:o,location:y.location,delta:0})}function v(S){let x=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof S=="string"?S:Rm(S);return I=I.replace(/ $/,"%20"),Rn(x,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,x)}let y={get action(){return o},get location(){return t(s,a)},listen(S){if(A)throw new Error("A history only accepts one active listener");return s.addEventListener(z_,d),A=S,()=>{s.removeEventListener(z_,d),A=null}},createHref(S){return e(s,S)},createURL:v,encodeLocation(S){let x=v(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:g,go(S){return a.go(S)}};return y}var $_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($_||($_={}));function TR(t,e,r){return r===void 0&&(r="/"),UR(t,e,r)}function UR(t,e,r,n){let s=typeof e=="string"?ou(e):e,i=Sd(s.pathname||"/",r);if(i==null)return null;let a=vN(t);LR(a);let o=null;for(let A=0;o==null&&A<a.length;++A){let c=zR(i);o=VR(a[A],c)}return o}function vN(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let A={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};A.relativePath.startsWith("/")&&(Rn(A.relativePath.startsWith(n),'Absolute route path "'+A.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),A.relativePath=A.relativePath.slice(n.length));let c=kl([n,A.relativePath]),u=r.concat(A);i.children&&i.children.length>0&&(Rn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vN(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:OR(c,i.index),routesMeta:u})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let A of yN(i.path))s(i,a,A)}),e}function yN(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=yN(n.join("/")),o=[];return o.push(...a.map(A=>A===""?i:[i,A].join("/"))),s&&o.push(...a),o.map(A=>t.startsWith("/")&&A===""?"/":A)}function LR(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:HR(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const QR=/^:[\w-]+$/,jR=3,RR=2,PR=1,DR=10,MR=-2,q_=t=>t==="*";function OR(t,e){let r=t.split("/"),n=r.length;return r.some(q_)&&(n+=MR),e&&(n+=RR),r.filter(s=>!q_(s)).reduce((s,i)=>s+(QR.test(i)?jR:i===""?PR:DR),n)}function HR(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function VR(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let A=n[o],c=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=m2({path:A.relativePath,caseSensitive:A.caseSensitive,end:c},u),p=A.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:kl([i,d.pathname]),pathnameBase:JR(kl([i,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(i=kl([i,d.pathnameBase]))}return a}function m2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=KR(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:p,isOptional:g}=u;if(p==="*"){let y=o[d]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[d];return g&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function KR(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Mw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,A)=>(n.push({paramName:o,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function zR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Sd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const GR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$R=t=>GR.test(t);function qR(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ou(t):t,i;if(r)if($R(r))i=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Mw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?i=W_(r.substring(1),"/"):i=W_(r,e)}else i=e;return{pathname:i,search:XR(n),hash:YR(s)}}function W_(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function vx(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WR(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Cb(t,e){let r=WR(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ib(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ou(t):(s=cp({},t),Rn(!s.pathname||!s.pathname.includes("?"),vx("?","pathname","search",s)),Rn(!s.pathname||!s.pathname.includes("#"),vx("#","pathname","hash",s)),Rn(!s.search||!s.search.includes("#"),vx("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),d-=1;s.pathname=p.join("/")}o=d>=0?e[d]:"/"}let A=qR(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&r.endsWith("/");return!A.pathname.endsWith("/")&&(c||u)&&(A.pathname+="/"),A}const kl=t=>t.join("/").replace(/\/\/+/g,"/"),JR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bN=["post","put","patch","delete"];new Set(bN);const eP=["get",...bN];new Set(eP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},up.apply(this,arguments)}const Ow=G.createContext(null),BN=G.createContext(null),mA=G.createContext(null),Hw=G.createContext(null),wA=G.createContext({outlet:null,matches:[],isDataRoute:!1}),_N=G.createContext(null);function tP(t,e){let{relative:r}=e===void 0?{}:e;Yd()||Rn(!1);let{basename:n,navigator:s}=G.useContext(mA),{hash:i,pathname:a,search:o}=Vw(t,{relative:r}),A=a;return n!=="/"&&(A=a==="/"?n:kl([n,a])),s.createHref({pathname:A,search:o,hash:i})}function Yd(){return G.useContext(Hw)!=null}function Yl(){return Yd()||Rn(!1),G.useContext(Hw).location}function CN(t){G.useContext(mA).static||G.useLayoutEffect(t)}function jp(){let{isDataRoute:t}=G.useContext(wA);return t?gP():rP()}function rP(){Yd()||Rn(!1);let t=G.useContext(Ow),{basename:e,future:r,navigator:n}=G.useContext(mA),{matches:s}=G.useContext(wA),{pathname:i}=Yl(),a=JSON.stringify(Cb(s,r.v7_relativeSplatPath)),o=G.useRef(!1);return CN(()=>{o.current=!0}),G.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=Ib(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:kl([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,i,t])}const nP=G.createContext(null);function sP(t){let e=G.useContext(wA).outlet;return e&&G.createElement(nP.Provider,{value:t},e)}function Vw(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=G.useContext(mA),{matches:s}=G.useContext(wA),{pathname:i}=Yl(),a=JSON.stringify(Cb(s,n.v7_relativeSplatPath));return G.useMemo(()=>Ib(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function iP(t,e){return aP(t,e)}function aP(t,e,r,n){Yd()||Rn(!1);let{navigator:s}=G.useContext(mA),{matches:i}=G.useContext(wA),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let A=a?a.pathnameBase:"/";a&&a.route;let c=Yl(),u;if(e){var d;let S=typeof e=="string"?ou(e):e;A==="/"||(d=S.pathname)!=null&&d.startsWith(A)||Rn(!1),u=S}else u=c;let p=u.pathname||"/",g=p;if(A!=="/"){let S=A.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=TR(t,{pathname:g}),y=uP(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:kl([A,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?A:kl([A,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,r,n);return e&&y?G.createElement(Hw.Provider,{value:{location:up({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:hl.Pop}},y):y}function oP(){let t=pP(),e=ZR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),r?G.createElement("pre",{style:s},r):null,null)}const AP=G.createElement(oP,null);class lP extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?G.createElement(wA.Provider,{value:this.props.routeContext},G.createElement(_N.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cP(t){let{routeContext:e,match:r,children:n}=t,s=G.useContext(Ow);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),G.createElement(wA.Provider,{value:e},n)}function uP(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Rn(!1),a=a.slice(0,Math.min(a.length,u+1))}let A=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:g}=r,v=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){A=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,p)=>{let g,v=!1,y=null,S=null;r&&(g=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||AP,A&&(c<0&&p===0?(mP("route-fallback"),v=!0,S=null):c===p&&(v=!0,S=d.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,p+1)),I=()=>{let N;return g?N=y:v?N=S:d.route.Component?N=G.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=u,G.createElement(cP,{match:d,routeContext:{outlet:u,matches:x,isDataRoute:r!=null},children:N})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?G.createElement(lP,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:I(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):I()},null)}var IN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(IN||{}),EN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(EN||{});function dP(t){let e=G.useContext(Ow);return e||Rn(!1),e}function hP(t){let e=G.useContext(BN);return e||Rn(!1),e}function fP(t){let e=G.useContext(wA);return e||Rn(!1),e}function kN(t){let e=fP(),r=e.matches[e.matches.length-1];return r.route.id||Rn(!1),r.route.id}function pP(){var t;let e=G.useContext(_N),r=hP(),n=kN();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function gP(){let{router:t}=dP(IN.UseNavigateStable),e=kN(EN.UseNavigateStable),r=G.useRef(!1);return CN(()=>{r.current=!0}),G.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,up({fromRouteId:e},i)))},[t,e])}const J_={};function mP(t,e,r){J_[t]||(J_[t]=!0)}function wP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Pm(t){let{to:e,replace:r,state:n,relative:s}=t;Yd()||Rn(!1);let{future:i,static:a}=G.useContext(mA),{matches:o}=G.useContext(wA),{pathname:A}=Yl(),c=jp(),u=Ib(e,Cb(o,i.v7_relativeSplatPath),A,s==="path"),d=JSON.stringify(u);return G.useEffect(()=>c(JSON.parse(d),{replace:r,state:n,relative:s}),[c,d,s,r,n]),null}function xP(t){return sP(t.context)}function ti(t){Rn(!1)}function vP(t){let{basename:e="/",children:r=null,location:n,navigationType:s=hl.Pop,navigator:i,static:a=!1,future:o}=t;Yd()&&Rn(!1);let A=e.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:A,navigator:i,static:a,future:up({v7_relativeSplatPath:!1},o)}),[A,o,i,a]);typeof n=="string"&&(n=ou(n));let{pathname:u="/",search:d="",hash:p="",state:g=null,key:v="default"}=n,y=G.useMemo(()=>{let S=Sd(u,A);return S==null?null:{location:{pathname:S,search:d,hash:p,state:g,key:v},navigationType:s}},[A,u,d,p,g,v,s]);return y==null?null:G.createElement(mA.Provider,{value:c},G.createElement(Hw.Provider,{children:r,value:y}))}function yP(t){let{children:e,location:r}=t;return iP(w2(e),r)}new Promise(()=>{});function w2(t,e){e===void 0&&(e=[]);let r=[];return G.Children.forEach(t,(n,s)=>{if(!G.isValidElement(n))return;let i=[...e,s];if(n.type===G.Fragment){r.push.apply(r,w2(n.props.children,i));return}n.type!==ti&&Rn(!1),!n.props.index||!n.props.children||Rn(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=w2(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dm.apply(this,arguments)}function SN(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function bP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function BP(t,e){return t.button===0&&(!e||e==="_self")&&!bP(t)}function x2(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function _P(t,e){let r=x2(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const CP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],EP="6";try{window.__reactRouterVersion=EP}catch{}const kP=G.createContext({isTransitioning:!1}),SP="startTransition",X_=mQ[SP];function NP(t){let{basename:e,children:r,future:n,window:s}=t,i=G.useRef();i.current==null&&(i.current=SR({window:s,v5Compat:!0}));let a=i.current,[o,A]=G.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},u=G.useCallback(d=>{c&&X_?X_(()=>A(d)):A(d)},[A,c]);return G.useLayoutEffect(()=>a.listen(u),[a,u]),G.useEffect(()=>wP(n),[n]),G.createElement(vP,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const FP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UP=G.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:A,to:c,preventScrollReset:u,viewTransition:d}=e,p=SN(e,CP),{basename:g}=G.useContext(mA),v,y=!1;if(typeof c=="string"&&TP.test(c)&&(v=c,FP))try{let N=new URL(window.location.href),U=c.startsWith("//")?new URL(N.protocol+c):new URL(c),D=Sd(U.pathname,g);U.origin===N.origin&&D!=null?c=D+U.search+U.hash:y=!0}catch{}let S=tP(c,{relative:s}),x=QP(c,{replace:a,state:o,target:A,preventScrollReset:u,relative:s,viewTransition:d});function I(N){n&&n(N),N.defaultPrevented||x(N)}return G.createElement("a",Dm({},p,{href:v||S,onClick:y||i?n:I,ref:r,target:A}))}),vo=G.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:o,to:A,viewTransition:c,children:u}=e,d=SN(e,IP),p=Vw(A,{relative:d.relative}),g=Yl(),v=G.useContext(BN),{navigator:y,basename:S}=G.useContext(mA),x=v!=null&&jP(p)&&c===!0,I=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,N=g.pathname,U=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(N=N.toLowerCase(),U=U?U.toLowerCase():null,I=I.toLowerCase()),U&&S&&(U=Sd(U,S)||U);const D=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let P=N===I||!a&&N.startsWith(I)&&N.charAt(D)==="/",E=U!=null&&(U===I||!a&&U.startsWith(I)&&U.charAt(I.length)==="/"),_={isActive:P,isPending:E,isTransitioning:x},B=P?n:void 0,Q;typeof i=="function"?Q=i(_):Q=[i,P?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(_):o;return G.createElement(UP,Dm({},d,{"aria-current":B,className:Q,ref:r,style:k,to:A,viewTransition:c}),typeof u=="function"?u(_):u)});var v2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(v2||(v2={}));var Y_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Y_||(Y_={}));function LP(t){let e=G.useContext(Ow);return e||Rn(!1),e}function QP(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,A=jp(),c=Yl(),u=Vw(t,{relative:a});return G.useCallback(d=>{if(BP(d,r)){d.preventDefault();let p=n!==void 0?n:Rm(c)===Rm(u);A(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,A,u,n,s,r,t,i,a,o])}function NN(t){let e=G.useRef(x2(t)),r=G.useRef(!1),n=Yl(),s=G.useMemo(()=>_P(n.search,r.current?null:e.current),[n.search]),i=jp(),a=G.useCallback((o,A)=>{const c=x2(typeof o=="function"?o(s):o);r.current=!0,i("?"+c,A)},[i,s]);return[s,a]}function jP(t,e){e===void 0&&(e={});let r=G.useContext(kP);r==null&&Rn(!1);let{basename:n}=LP(v2.useViewTransitionState),s=Vw(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=Sd(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Sd(r.nextLocation.pathname,n)||r.nextLocation.pathname;return m2(s.pathname,a)!=null||m2(s.pathname,i)!=null}var Ze=(t=>(t.First="1 ",t.Second="2 ",t))(Ze||{}),cr=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(cr||{});const Ur=["","","","",""],Os={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Z_=["","","/","","","",""," "],Mm=[{shift:Ze.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:Ze.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:Ze.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:Ze.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:Ze.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:Ze.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:Ze.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:Ze.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:Ze.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:Ze.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:Ze.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:Ze.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:Ze.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:Ze.Second,period:6,start:"18:50",end:"19:35",day:"default"}],RP=[{shift:Ze.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:Ze.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:Ze.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:Ze.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:Ze.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:Ze.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:Ze.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:Ze.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:Ze.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:Ze.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:Ze.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:Ze.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:Ze.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:Ze.Second,period:6,start:"17:00",end:"17:35",day:"default"}],Vh=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),FN=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:Vh(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:Vh(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:Vh(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:Vh(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:Vh(78,86),order:5}],Ni={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:Ze.First,studentsCount:25},{id:"c2",name:"6",shift:Ze.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:Mm,dutyZones:FN,dutySchedule:[],nutritionRecords:[],absenteeismRecords:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",weatherApiKey:"",weatherCity:"Minsk,BY",bellPresets:[{id:"preset_normal",name:" (45 )",bells:Mm},{id:"preset_short",name:" (35 )",bells:RP}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]},telegramTemplates:{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`},adminAnnouncement:{message:"",active:!1,lastUpdated:""}}},PP="modulepreload",DP=function(t){return"/zamenygymn/"+t},eC={},Hg=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(A=>{if(A=DP(A),A in eC)return;eC[A]=!0;const c=A.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":PP,c||(d.as="script"),d.crossOrigin="",d.href=A,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${A}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var tC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},MP=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],A=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(A>>10)),e[n++]=String.fromCharCode(56320+(A&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},UN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,A=s+2<t.length,c=A?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let p=(o&15)<<2|c>>6,g=c&63;A||(g=64,a||(p=64)),n.push(r[u],r[d],r[p],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new OP;const p=i<<2|o>>4;if(n.push(p),c!==64){const g=o<<4&240|c>>2;if(n.push(g),d!==64){const v=c<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HP=function(t){const e=TN(t);return UN.encodeByteArray(e,!0)},Om=function(t){return HP(t).replace(/\./g,"")},LN=function(t){try{return UN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=()=>VP().__FIREBASE_DEFAULTS__,zP=()=>{if(typeof process>"u"||typeof tC>"u")return;const t=tC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LN(t[1]);return e&&JSON.parse(e)},Kw=()=>{try{return KP()||zP()||GP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QN=t=>{var e,r;return(r=(e=Kw())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},$P=t=>{const e=QN(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},jN=()=>{var t;return(t=Kw())===null||t===void 0?void 0:t.config},RN=t=>{var e;return(e=Kw())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Om(JSON.stringify(r)),Om(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vs())}function XP(){var t;const e=(t=Kw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tD(){const t=vs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PN(){return!XP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DN(){try{return typeof indexedDB=="object"}catch{return!1}}function rD(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="FirebaseError";class xA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=nD,Object.setPrototypeOf(this,xA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rp.prototype.create)}}class Rp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?sD(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new xA(s,o,n)}}function sD(t,e){return t.replace(iD,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const iD=/\{\$([^}]+)}/g;function aD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rl(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(rC(i)&&rC(a)){if(!Rl(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function rC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Af(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function lf(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function oD(t,e){const r=new AD(t,e);return r.subscribe.bind(r)}class AD{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");lD(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=yx),s.error===void 0&&(s.error=yx),s.complete===void 0&&(s.complete=yx);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lD(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function yx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){return t&&t._delegate?t._delegate:t}class zc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new qP;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dD(e))try{this.getOrInitializeService({instanceIdentifier:vc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=vc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vc){return this.instances.has(e)}getOptions(e=vc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:uD(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=vc){return this.component?this.component.multipleInstances?e:vc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uD(t){return t===vc?void 0:t}function dD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new cD(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var br;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(br||(br={}));const fD={debug:br.DEBUG,verbose:br.VERBOSE,info:br.INFO,warn:br.WARN,error:br.ERROR,silent:br.SILENT},pD=br.INFO,gD={[br.DEBUG]:"log",[br.VERBOSE]:"log",[br.INFO]:"info",[br.WARN]:"warn",[br.ERROR]:"error"},mD=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=gD[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Eb=class{constructor(e){this.name=e,this._logLevel=pD,this._logHandler=mD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in br))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,br.DEBUG,...e),this._logHandler(this,br.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,br.VERBOSE,...e),this._logHandler(this,br.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,br.INFO,...e),this._logHandler(this,br.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,br.WARN,...e),this._logHandler(this,br.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,br.ERROR,...e),this._logHandler(this,br.ERROR,...e)}};const wD=(t,e)=>e.some(r=>t instanceof r);let nC,sC;function xD(){return nC||(nC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vD(){return sC||(sC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MN=new WeakMap,y2=new WeakMap,ON=new WeakMap,bx=new WeakMap,kb=new WeakMap;function yD(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Sl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&MN.set(r,t)}).catch(()=>{}),kb.set(e,t),e}function bD(t){if(y2.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});y2.set(t,e)}let b2={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return y2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ON.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Sl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BD(t){b2=t(b2)}function _D(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Bx(this),e,...r);return ON.set(n,e.sort?e.sort():[e]),Sl(n)}:vD().includes(t)?function(...e){return t.apply(Bx(this),e),Sl(MN.get(this))}:function(...e){return Sl(t.apply(Bx(this),e))}}function CD(t){return typeof t=="function"?_D(t):(t instanceof IDBTransaction&&bD(t),wD(t,xD())?new Proxy(t,b2):t)}function Sl(t){if(t instanceof IDBRequest)return yD(t);if(bx.has(t))return bx.get(t);const e=CD(t);return e!==t&&(bx.set(t,e),kb.set(e,t)),e}const Bx=t=>kb.get(t);function ID(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Sl(a);return n&&a.addEventListener("upgradeneeded",A=>{n(Sl(a.result),A.oldVersion,A.newVersion,Sl(a.transaction),A)}),r&&a.addEventListener("blocked",A=>r(A.oldVersion,A.newVersion,A)),o.then(A=>{i&&A.addEventListener("close",()=>i()),s&&A.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const ED=["get","getKey","getAll","getAllKeys","count"],kD=["put","add","delete","clear"],_x=new Map;function iC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_x.get(e))return _x.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=kD.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||ED.includes(r)))return;const i=async function(a,...o){const A=this.transaction(a,s?"readwrite":"readonly");let c=A.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&A.done]))[0]};return _x.set(e,i),i}BD(t=>({...t,get:(e,r,n)=>iC(e,r)||t.get(e,r,n),has:(e,r)=>!!iC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ND(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ND(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const B2="@firebase/app",aC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Eb("@firebase/app"),FD="@firebase/app-compat",TD="@firebase/analytics-compat",UD="@firebase/analytics",LD="@firebase/app-check-compat",QD="@firebase/app-check",jD="@firebase/auth",RD="@firebase/auth-compat",PD="@firebase/database",DD="@firebase/data-connect",MD="@firebase/database-compat",OD="@firebase/functions",HD="@firebase/functions-compat",VD="@firebase/installations",KD="@firebase/installations-compat",zD="@firebase/messaging",GD="@firebase/messaging-compat",$D="@firebase/performance",qD="@firebase/performance-compat",WD="@firebase/remote-config",JD="@firebase/remote-config-compat",XD="@firebase/storage",YD="@firebase/storage-compat",ZD="@firebase/firestore",e8="@firebase/vertexai-preview",t8="@firebase/firestore-compat",r8="firebase",n8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",s8={[B2]:"fire-core",[FD]:"fire-core-compat",[UD]:"fire-analytics",[TD]:"fire-analytics-compat",[QD]:"fire-app-check",[LD]:"fire-app-check-compat",[jD]:"fire-auth",[RD]:"fire-auth-compat",[PD]:"fire-rtdb",[DD]:"fire-data-connect",[MD]:"fire-rtdb-compat",[OD]:"fire-fn",[HD]:"fire-fn-compat",[VD]:"fire-iid",[KD]:"fire-iid-compat",[zD]:"fire-fcm",[GD]:"fire-fcm-compat",[$D]:"fire-perf",[qD]:"fire-perf-compat",[WD]:"fire-rc",[JD]:"fire-rc-compat",[XD]:"fire-gcs",[YD]:"fire-gcs-compat",[ZD]:"fire-fst",[t8]:"fire-fst-compat",[e8]:"fire-vertex","fire-js":"fire-js",[r8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new Map,i8=new Map,_2=new Map;function oC(t,e){try{t.container.addComponent(e)}catch(r){uA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Nd(t){const e=t.name;if(_2.has(e))return uA.debug(`There were multiple attempts to register component ${e}.`),!1;_2.set(e,t);for(const r of dp.values())oC(r,t);for(const r of i8.values())oC(r,t);return!0}function Dp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function a8(t,e,r=Hm){Dp(t,e).clearInstance(r)}function Zo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nl=new Rp("app","Firebase",o8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new zc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=n8;function HN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Hm,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Nl.create("bad-app-name",{appName:String(s)});if(r||(r=jN()),!r)throw Nl.create("no-options");const i=dp.get(s);if(i){if(Rl(r,i.options)&&Rl(n,i.config))return i;throw Nl.create("duplicate-app",{appName:s})}const a=new hD(s);for(const A of _2.values())a.addComponent(A);const o=new A8(r,n,a);return dp.set(s,o),o}function Sb(t=Hm){const e=dp.get(t);if(!e&&t===Hm&&jN())return HN();if(!e)throw Nl.create("no-app",{appName:t});return e}function l8(){return Array.from(dp.values())}function Fl(t,e,r){var n;let s=(n=s8[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uA.warn(o.join(" "));return}Nd(new zc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8="firebase-heartbeat-database",u8=1,hp="firebase-heartbeat-store";let Cx=null;function VN(){return Cx||(Cx=ID(c8,u8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hp)}catch(r){console.warn(r)}}}}).catch(t=>{throw Nl.create("idb-open",{originalErrorMessage:t.message})})),Cx}async function d8(t){try{const r=(await VN()).transaction(hp),n=await r.objectStore(hp).get(KN(t));return await r.done,n}catch(e){if(e instanceof xA)uA.warn(e.message);else{const r=Nl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});uA.warn(r.message)}}}async function AC(t,e){try{const n=(await VN()).transaction(hp,"readwrite");await n.objectStore(hp).put(e,KN(t)),await n.done}catch(r){if(r instanceof xA)uA.warn(r.message);else{const n=Nl.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});uA.warn(n.message)}}}function KN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=1024,f8=30*24*60*60*1e3;class p8{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new m8(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=f8}),this._storage.overwrite(this._heartbeatsCache))}catch(n){uA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=lC(),{heartbeatsToSend:n,unsentEntries:s}=g8(this._heartbeatsCache.heartbeats),i=Om(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return uA.warn(r),""}}}function lC(){return new Date().toISOString().substring(0,10)}function g8(t,e=h8){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),cC(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),cC(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class m8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DN()?rD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await d8(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return AC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return AC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cC(t){return Om(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t){Nd(new zc("platform-logger",e=>new SD(e),"PRIVATE")),Nd(new zc("heartbeat",e=>new p8(e),"PRIVATE")),Fl(B2,aC,t),Fl(B2,aC,"esm2017"),Fl("fire-js","")}w8("");var x8="firebase",v8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fl(x8,v8,"app");var uC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qc,zN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function B(){}B.prototype=_.prototype,E.D=_.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(Q,k,L){for(var T=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)T[Y-2]=arguments[Y];return _.prototype[k].apply(Q,T)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,B){B||(B=0);var Q=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)Q[k]=_.charCodeAt(B++)|_.charCodeAt(B++)<<8|_.charCodeAt(B++)<<16|_.charCodeAt(B++)<<24;else for(k=0;16>k;++k)Q[k]=_[B++]|_[B++]<<8|_[B++]<<16|_[B++]<<24;_=E.g[0],B=E.g[1],k=E.g[2];var L=E.g[3],T=_+(L^B&(k^L))+Q[0]+3614090360&4294967295;_=B+(T<<7&4294967295|T>>>25),T=L+(k^_&(B^k))+Q[1]+3905402710&4294967295,L=_+(T<<12&4294967295|T>>>20),T=k+(B^L&(_^B))+Q[2]+606105819&4294967295,k=L+(T<<17&4294967295|T>>>15),T=B+(_^k&(L^_))+Q[3]+3250441966&4294967295,B=k+(T<<22&4294967295|T>>>10),T=_+(L^B&(k^L))+Q[4]+4118548399&4294967295,_=B+(T<<7&4294967295|T>>>25),T=L+(k^_&(B^k))+Q[5]+1200080426&4294967295,L=_+(T<<12&4294967295|T>>>20),T=k+(B^L&(_^B))+Q[6]+2821735955&4294967295,k=L+(T<<17&4294967295|T>>>15),T=B+(_^k&(L^_))+Q[7]+4249261313&4294967295,B=k+(T<<22&4294967295|T>>>10),T=_+(L^B&(k^L))+Q[8]+1770035416&4294967295,_=B+(T<<7&4294967295|T>>>25),T=L+(k^_&(B^k))+Q[9]+2336552879&4294967295,L=_+(T<<12&4294967295|T>>>20),T=k+(B^L&(_^B))+Q[10]+4294925233&4294967295,k=L+(T<<17&4294967295|T>>>15),T=B+(_^k&(L^_))+Q[11]+2304563134&4294967295,B=k+(T<<22&4294967295|T>>>10),T=_+(L^B&(k^L))+Q[12]+1804603682&4294967295,_=B+(T<<7&4294967295|T>>>25),T=L+(k^_&(B^k))+Q[13]+4254626195&4294967295,L=_+(T<<12&4294967295|T>>>20),T=k+(B^L&(_^B))+Q[14]+2792965006&4294967295,k=L+(T<<17&4294967295|T>>>15),T=B+(_^k&(L^_))+Q[15]+1236535329&4294967295,B=k+(T<<22&4294967295|T>>>10),T=_+(k^L&(B^k))+Q[1]+4129170786&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^k&(_^B))+Q[6]+3225465664&4294967295,L=_+(T<<9&4294967295|T>>>23),T=k+(_^B&(L^_))+Q[11]+643717713&4294967295,k=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(k^L))+Q[0]+3921069994&4294967295,B=k+(T<<20&4294967295|T>>>12),T=_+(k^L&(B^k))+Q[5]+3593408605&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^k&(_^B))+Q[10]+38016083&4294967295,L=_+(T<<9&4294967295|T>>>23),T=k+(_^B&(L^_))+Q[15]+3634488961&4294967295,k=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(k^L))+Q[4]+3889429448&4294967295,B=k+(T<<20&4294967295|T>>>12),T=_+(k^L&(B^k))+Q[9]+568446438&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^k&(_^B))+Q[14]+3275163606&4294967295,L=_+(T<<9&4294967295|T>>>23),T=k+(_^B&(L^_))+Q[3]+4107603335&4294967295,k=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(k^L))+Q[8]+1163531501&4294967295,B=k+(T<<20&4294967295|T>>>12),T=_+(k^L&(B^k))+Q[13]+2850285829&4294967295,_=B+(T<<5&4294967295|T>>>27),T=L+(B^k&(_^B))+Q[2]+4243563512&4294967295,L=_+(T<<9&4294967295|T>>>23),T=k+(_^B&(L^_))+Q[7]+1735328473&4294967295,k=L+(T<<14&4294967295|T>>>18),T=B+(L^_&(k^L))+Q[12]+2368359562&4294967295,B=k+(T<<20&4294967295|T>>>12),T=_+(B^k^L)+Q[5]+4294588738&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^k)+Q[8]+2272392833&4294967295,L=_+(T<<11&4294967295|T>>>21),T=k+(L^_^B)+Q[11]+1839030562&4294967295,k=L+(T<<16&4294967295|T>>>16),T=B+(k^L^_)+Q[14]+4259657740&4294967295,B=k+(T<<23&4294967295|T>>>9),T=_+(B^k^L)+Q[1]+2763975236&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^k)+Q[4]+1272893353&4294967295,L=_+(T<<11&4294967295|T>>>21),T=k+(L^_^B)+Q[7]+4139469664&4294967295,k=L+(T<<16&4294967295|T>>>16),T=B+(k^L^_)+Q[10]+3200236656&4294967295,B=k+(T<<23&4294967295|T>>>9),T=_+(B^k^L)+Q[13]+681279174&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^k)+Q[0]+3936430074&4294967295,L=_+(T<<11&4294967295|T>>>21),T=k+(L^_^B)+Q[3]+3572445317&4294967295,k=L+(T<<16&4294967295|T>>>16),T=B+(k^L^_)+Q[6]+76029189&4294967295,B=k+(T<<23&4294967295|T>>>9),T=_+(B^k^L)+Q[9]+3654602809&4294967295,_=B+(T<<4&4294967295|T>>>28),T=L+(_^B^k)+Q[12]+3873151461&4294967295,L=_+(T<<11&4294967295|T>>>21),T=k+(L^_^B)+Q[15]+530742520&4294967295,k=L+(T<<16&4294967295|T>>>16),T=B+(k^L^_)+Q[2]+3299628645&4294967295,B=k+(T<<23&4294967295|T>>>9),T=_+(k^(B|~L))+Q[0]+4096336452&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~k))+Q[7]+1126891415&4294967295,L=_+(T<<10&4294967295|T>>>22),T=k+(_^(L|~B))+Q[14]+2878612391&4294967295,k=L+(T<<15&4294967295|T>>>17),T=B+(L^(k|~_))+Q[5]+4237533241&4294967295,B=k+(T<<21&4294967295|T>>>11),T=_+(k^(B|~L))+Q[12]+1700485571&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~k))+Q[3]+2399980690&4294967295,L=_+(T<<10&4294967295|T>>>22),T=k+(_^(L|~B))+Q[10]+4293915773&4294967295,k=L+(T<<15&4294967295|T>>>17),T=B+(L^(k|~_))+Q[1]+2240044497&4294967295,B=k+(T<<21&4294967295|T>>>11),T=_+(k^(B|~L))+Q[8]+1873313359&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~k))+Q[15]+4264355552&4294967295,L=_+(T<<10&4294967295|T>>>22),T=k+(_^(L|~B))+Q[6]+2734768916&4294967295,k=L+(T<<15&4294967295|T>>>17),T=B+(L^(k|~_))+Q[13]+1309151649&4294967295,B=k+(T<<21&4294967295|T>>>11),T=_+(k^(B|~L))+Q[4]+4149444226&4294967295,_=B+(T<<6&4294967295|T>>>26),T=L+(B^(_|~k))+Q[11]+3174756917&4294967295,L=_+(T<<10&4294967295|T>>>22),T=k+(_^(L|~B))+Q[2]+718787259&4294967295,k=L+(T<<15&4294967295|T>>>17),T=B+(L^(k|~_))+Q[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(k+(T<<21&4294967295|T>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+L&4294967295}n.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var B=_-this.blockSize,Q=this.B,k=this.h,L=0;L<_;){if(k==0)for(;L<=B;)s(this,E,L),L+=this.blockSize;if(typeof E=="string"){for(;L<_;)if(Q[k++]=E.charCodeAt(L++),k==this.blockSize){s(this,Q),k=0;break}}else for(;L<_;)if(Q[k++]=E[L++],k==this.blockSize){s(this,Q),k=0;break}}this.h=k,this.o+=_},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var B=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=B&255,B/=256;for(this.u(E),E=Array(16),_=B=0;4>_;++_)for(var Q=0;32>Q;Q+=8)E[B++]=this.g[_]>>>Q&255;return E};function i(E,_){var B=o;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=_(E)}function a(E,_){this.h=_;for(var B=[],Q=!0,k=E.length-1;0<=k;k--){var L=E[k]|0;Q&&L==_||(B[k]=L,Q=!1)}this.g=B}var o={};function A(E){return-128<=E&&128>E?i(E,function(_){return new a([_|0],0>_?-1:0)}):new a([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return d;if(0>E)return S(c(-E));for(var _=[],B=1,Q=0;E>=B;Q++)_[Q]=E/B|0,B*=4294967296;return new a(_,0)}function u(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return S(u(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=c(Math.pow(_,8)),Q=d,k=0;k<E.length;k+=8){var L=Math.min(8,E.length-k),T=parseInt(E.substring(k,k+L),_);8>L?(L=c(Math.pow(_,L)),Q=Q.j(L).add(c(T))):(Q=Q.j(B),Q=Q.add(c(T)))}return Q}var d=A(0),p=A(1),g=A(16777216);t=a.prototype,t.m=function(){if(y(this))return-S(this).m();for(var E=0,_=1,B=0;B<this.g.length;B++){var Q=this.i(B);E+=(0<=Q?Q:4294967296+Q)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(y(this))return"-"+S(this).toString(E);for(var _=c(Math.pow(E,6)),B=this,Q="";;){var k=U(B,_).g;B=x(B,k.j(_));var L=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=k,v(B))return L+Q;for(;6>L.length;)L="0"+L;Q=L+Q}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function y(E){return E.h==-1}t.l=function(E){return E=x(this,E),y(E)?-1:v(E)?0:1};function S(E){for(var _=E.g.length,B=[],Q=0;Q<_;Q++)B[Q]=~E.g[Q];return new a(B,~E.h).add(p)}t.abs=function(){return y(this)?S(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0,k=0;k<=_;k++){var L=Q+(this.i(k)&65535)+(E.i(k)&65535),T=(L>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);Q=T>>>16,L&=65535,T&=65535,B[k]=T<<16|L}return new a(B,B[B.length-1]&-2147483648?-1:0)};function x(E,_){return E.add(S(_))}t.j=function(E){if(v(this)||v(E))return d;if(y(this))return y(E)?S(this).j(S(E)):S(S(this).j(E));if(y(E))return S(this.j(S(E)));if(0>this.l(g)&&0>E.l(g))return c(this.m()*E.m());for(var _=this.g.length+E.g.length,B=[],Q=0;Q<2*_;Q++)B[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var k=0;k<E.g.length;k++){var L=this.i(Q)>>>16,T=this.i(Q)&65535,Y=E.i(k)>>>16,xe=E.i(k)&65535;B[2*Q+2*k]+=T*xe,I(B,2*Q+2*k),B[2*Q+2*k+1]+=L*xe,I(B,2*Q+2*k+1),B[2*Q+2*k+1]+=T*Y,I(B,2*Q+2*k+1),B[2*Q+2*k+2]+=L*Y,I(B,2*Q+2*k+2)}for(Q=0;Q<_;Q++)B[Q]=B[2*Q+1]<<16|B[2*Q];for(Q=_;Q<2*_;Q++)B[Q]=0;return new a(B,0)};function I(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function N(E,_){this.g=E,this.h=_}function U(E,_){if(v(_))throw Error("division by zero");if(v(E))return new N(d,d);if(y(E))return _=U(S(E),_),new N(S(_.g),S(_.h));if(y(_))return _=U(E,S(_)),new N(S(_.g),_.h);if(30<E.g.length){if(y(E)||y(_))throw Error("slowDivide_ only works with positive integers.");for(var B=p,Q=_;0>=Q.l(E);)B=D(B),Q=D(Q);var k=P(B,1),L=P(Q,1);for(Q=P(Q,2),B=P(B,2);!v(Q);){var T=L.add(Q);0>=T.l(E)&&(k=k.add(B),L=T),Q=P(Q,1),B=P(B,1)}return _=x(E,k.j(_)),new N(k,_)}for(k=d;0<=E.l(_);){for(B=Math.max(1,Math.floor(E.m()/_.m())),Q=Math.ceil(Math.log(B)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),L=c(B),T=L.j(_);y(T)||0<T.l(E);)B-=Q,L=c(B),T=L.j(_);v(L)&&(L=p),k=k.add(L),E=x(E,T)}return new N(k,E)}t.A=function(E){return U(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0;Q<_;Q++)B[Q]=this.i(Q)&E.i(Q);return new a(B,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0;Q<_;Q++)B[Q]=this.i(Q)|E.i(Q);return new a(B,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],Q=0;Q<_;Q++)B[Q]=this.i(Q)^E.i(Q);return new a(B,this.h^E.h)};function D(E){for(var _=E.g.length+1,B=[],Q=0;Q<_;Q++)B[Q]=E.i(Q)<<1|E.i(Q-1)>>>31;return new a(B,E.h)}function P(E,_){var B=_>>5;_%=32;for(var Q=E.g.length-B,k=[],L=0;L<Q;L++)k[L]=0<_?E.i(L+B)>>>_|E.i(L+B+1)<<32-_:E.i(L+B);return new a(k,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,zN=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Qc=a}).apply(typeof uC<"u"?uC:typeof self<"u"?self:typeof window<"u"?window:{});var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GN,cf,$N,Vg,C2,qN,WN,JN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,j){return f==Array.prototype||f==Object.prototype||(f[C]=j.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof V0=="object"&&V0];for(var C=0;C<f.length;++C){var j=f[C];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=r(this);function s(f,C){if(C)e:{var j=n;f=f.split(".");for(var J=0;J<f.length-1;J++){var Fe=f[J];if(!(Fe in j))break e;j=j[Fe]}f=f[f.length-1],J=j[f],C=C(J),C!=J&&C!=null&&e(j,f,{configurable:!0,writable:!0,value:C})}}function i(f,C){f instanceof String&&(f+="");var j=0,J=!1,Fe={next:function(){if(!J&&j<f.length){var Ve=j++;return{value:C(Ve,f[Ve]),done:!1}}return J=!0,{done:!0,value:void 0}}};return Fe[Symbol.iterator]=function(){return Fe},Fe}s("Array.prototype.values",function(f){return f||function(){return i(this,function(C,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function A(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function c(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function u(f,C,j){return f.call.apply(f.bind,arguments)}function d(f,C,j){if(!f)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var Fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Fe,J),f.apply(C,Fe)}}return function(){return f.apply(C,arguments)}}function p(f,C,j){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,p.apply(null,arguments)}function g(f,C){var j=Array.prototype.slice.call(arguments,1);return function(){var J=j.slice();return J.push.apply(J,arguments),f.apply(this,J)}}function v(f,C){function j(){}j.prototype=C.prototype,f.aa=C.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(J,Fe,Ve){for(var wt=Array(arguments.length-2),Ir=2;Ir<arguments.length;Ir++)wt[Ir-2]=arguments[Ir];return C.prototype[Fe].apply(J,wt)}}function y(f){const C=f.length;if(0<C){const j=Array(C);for(let J=0;J<C;J++)j[J]=f[J];return j}return[]}function S(f,C){for(let j=1;j<arguments.length;j++){const J=arguments[j];if(A(J)){const Fe=f.length||0,Ve=J.length||0;f.length=Fe+Ve;for(let wt=0;wt<Ve;wt++)f[Fe+wt]=J[wt]}else f.push(J)}}class x{constructor(C,j){this.i=C,this.j=j,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function I(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function U(f){return U[" "](f),f}U[" "]=function(){};var D=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function P(f,C,j){for(const J in f)C.call(j,f[J],J,f)}function E(f,C){for(const j in f)C.call(void 0,f[j],j,f)}function _(f){const C={};for(const j in f)C[j]=f[j];return C}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(f,C){let j,J;for(let Fe=1;Fe<arguments.length;Fe++){J=arguments[Fe];for(j in J)f[j]=J[j];for(let Ve=0;Ve<B.length;Ve++)j=B[Ve],Object.prototype.hasOwnProperty.call(J,j)&&(f[j]=J[j])}}function k(f){var C=1;f=f.split(":");const j=[];for(;0<C&&f.length;)j.push(f.shift()),C--;return f.length&&j.push(f.join(":")),j}function L(f){o.setTimeout(()=>{throw f},0)}function T(){var f=me;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class Y{constructor(){this.h=this.g=null}add(C,j){const J=xe.get();J.set(C,j),this.h?this.h.next=J:this.g=J,this.h=J}}var xe=new x(()=>new Be,f=>f.reset());class Be{constructor(){this.next=this.g=this.h=null}set(C,j){this.h=C,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,se=!1,me=new Y,Pe=()=>{const f=o.Promise.resolve(void 0);_e=()=>{f.then(Se)}};var Se=()=>{for(var f;f=T();){try{f.h.call(f.g)}catch(j){L(j)}var C=xe;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}se=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};o.addEventListener("test",j,C),o.removeEventListener("test",j,C)}catch{}return f}();function Z(f,C){if(H.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,J=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(D){e:{try{U(C.nodeName);var Fe=!0;break e}catch{}Fe=!1}Fe||(C=null)}}else j=="mouseover"?C=f.fromElement:j=="mouseout"&&(C=f.toElement);this.relatedTarget=C,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ne[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Z.aa.h.call(this)}}v(Z,H);var ne={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function pe(f,C,j,J,Fe){this.listener=f,this.proxy=null,this.src=C,this.type=j,this.capture=!!J,this.ha=Fe,this.key=++Ae,this.da=this.fa=!1}function Ee(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Oe(f){this.src=f,this.g={},this.h=0}Oe.prototype.add=function(f,C,j,J,Fe){var Ve=f.toString();f=this.g[Ve],f||(f=this.g[Ve]=[],this.h++);var wt=ke(f,C,J,Fe);return-1<wt?(C=f[wt],j||(C.fa=!1)):(C=new pe(C,this.src,Ve,!!J,Fe),C.fa=j,f.push(C)),C};function rt(f,C){var j=C.type;if(j in f.g){var J=f.g[j],Fe=Array.prototype.indexOf.call(J,C,void 0),Ve;(Ve=0<=Fe)&&Array.prototype.splice.call(J,Fe,1),Ve&&(Ee(C),f.g[j].length==0&&(delete f.g[j],f.h--))}}function ke(f,C,j,J){for(var Fe=0;Fe<f.length;++Fe){var Ve=f[Fe];if(!Ve.da&&Ve.listener==C&&Ve.capture==!!j&&Ve.ha==J)return Fe}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),R={};function Ce(f,C,j,J,Fe){if(Array.isArray(C)){for(var Ve=0;Ve<C.length;Ve++)Ce(f,C[Ve],j,J,Fe);return null}return j=le(j),f&&f[de]?f.K(C,j,c(J)?!!J.capture:!1,Fe):Me(f,C,j,!1,J,Fe)}function Me(f,C,j,J,Fe,Ve){if(!C)throw Error("Invalid event type");var wt=c(Fe)?!!Fe.capture:!!Fe,Ir=je(f);if(Ir||(f[ce]=Ir=new Oe(f)),j=Ir.add(C,j,J,wt,Ve),j.proxy)return j;if(J=st(),j.proxy=J,J.src=f,J.listener=j,f.addEventListener)K||(Fe=wt),Fe===void 0&&(Fe=!1),f.addEventListener(C.toString(),J,Fe);else if(f.attachEvent)f.attachEvent(we(C.toString()),J);else if(f.addListener&&f.removeListener)f.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return j}function st(){function f(j){return C.call(f.src,f.listener,j)}const C=ue;return f}function ge(f,C,j,J,Fe){if(Array.isArray(C))for(var Ve=0;Ve<C.length;Ve++)ge(f,C[Ve],j,J,Fe);else J=c(J)?!!J.capture:!!J,j=le(j),f&&f[de]?(f=f.i,C=String(C).toString(),C in f.g&&(Ve=f.g[C],j=ke(Ve,j,J,Fe),-1<j&&(Ee(Ve[j]),Array.prototype.splice.call(Ve,j,1),Ve.length==0&&(delete f.g[C],f.h--)))):f&&(f=je(f))&&(C=f.g[C.toString()],f=-1,C&&(f=ke(C,j,J,Fe)),(j=-1<f?C[f]:null)&&be(j))}function be(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[de])rt(C.i,f);else{var j=f.type,J=f.proxy;C.removeEventListener?C.removeEventListener(j,J,f.capture):C.detachEvent?C.detachEvent(we(j),J):C.addListener&&C.removeListener&&C.removeListener(J),(j=je(C))?(rt(j,f),j.h==0&&(j.src=null,C[ce]=null)):Ee(f)}}}function we(f){return f in R?R[f]:R[f]="on"+f}function ue(f,C){if(f.da)f=!0;else{C=new Z(C,this);var j=f.listener,J=f.ha||f.src;f.fa&&be(f),f=j.call(J,C)}return f}function je(f){return f=f[ce],f instanceof Oe?f:null}var q="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(f){return typeof f=="function"?f:(f[q]||(f[q]=function(C){return f.handleEvent(C)}),f[q])}function ae(){M.call(this),this.i=new Oe(this),this.M=this,this.F=null}v(ae,M),ae.prototype[de]=!0,ae.prototype.removeEventListener=function(f,C,j,J){ge(this,f,C,j,J)};function he(f,C){var j,J=f.F;if(J)for(j=[];J;J=J.F)j.push(J);if(f=f.M,J=C.type||C,typeof C=="string")C=new H(C,f);else if(C instanceof H)C.target=C.target||f;else{var Fe=C;C=new H(J,f),Q(C,Fe)}if(Fe=!0,j)for(var Ve=j.length-1;0<=Ve;Ve--){var wt=C.g=j[Ve];Fe=Te(wt,J,!0,C)&&Fe}if(wt=C.g=f,Fe=Te(wt,J,!0,C)&&Fe,Fe=Te(wt,J,!1,C)&&Fe,j)for(Ve=0;Ve<j.length;Ve++)wt=C.g=j[Ve],Fe=Te(wt,J,!1,C)&&Fe}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var j=f.g[C],J=0;J<j.length;J++)Ee(j[J]);delete f.g[C],f.h--}}this.F=null},ae.prototype.K=function(f,C,j,J){return this.i.add(String(f),C,!1,j,J)},ae.prototype.L=function(f,C,j,J){return this.i.add(String(f),C,!0,j,J)};function Te(f,C,j,J){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var Fe=!0,Ve=0;Ve<C.length;++Ve){var wt=C[Ve];if(wt&&!wt.da&&wt.capture==j){var Ir=wt.listener,Ln=wt.ha||wt.src;wt.fa&&rt(f.i,wt),Fe=Ir.call(Ln,J)!==!1&&Fe}}return Fe&&!J.defaultPrevented}function Re(f,C,j){if(typeof f=="function")j&&(f=p(f,j));else if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:o.setTimeout(f,C||0)}function Ge(f){f.g=Re(()=>{f.g=null,f.i&&(f.i=!1,Ge(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class Ke extends M{constructor(C,j){super(),this.m=C,this.l=j,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(f){M.call(this),this.h=f,this.g={}}v(Et,M);var pt=[];function ht(f){P(f.g,function(C,j){this.g.hasOwnProperty(j)&&be(C)},f),f.g={}}Et.prototype.N=function(){Et.aa.N.call(this),ht(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ot=o.JSON.stringify,Je=o.JSON.parse,qe=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Tt(){}Tt.prototype.h=null;function _t(f){return f.h||(f.h=f.i())}function kt(){}var Wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ot(){H.call(this,"d")}v(Ot,H);function vt(){H.call(this,"c")}v(vt,H);var Ht={},rn=null;function jr(){return rn=rn||new ae}Ht.La="serverreachability";function Vr(f){H.call(this,Ht.La,f)}v(Vr,H);function tr(f){const C=jr();he(C,new Vr(C))}Ht.STAT_EVENT="statevent";function Qt(f,C){H.call(this,Ht.STAT_EVENT,f),this.stat=C}v(Qt,H);function kr(f){const C=jr();he(C,new Qt(C,f))}Ht.Ma="timingevent";function us(f,C){H.call(this,Ht.Ma,f),this.size=C}v(us,H);function nn(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},C)}function Rr(){this.g=!0}Rr.prototype.xa=function(){this.g=!1};function pr(f,C,j,J,Fe,Ve){f.info(function(){if(f.g)if(Ve)for(var wt="",Ir=Ve.split("&"),Ln=0;Ln<Ir.length;Ln++){var gr=Ir[Ln].split("=");if(1<gr.length){var Qr=gr[0];gr=gr[1];var ln=Qr.split("_");wt=2<=ln.length&&ln[1]=="type"?wt+(Qr+"="+gr+"&"):wt+(Qr+"=redacted&")}}else wt=null;else wt=Ve;return"XMLHTTP REQ ("+J+") [attempt "+Fe+"]: "+C+`
`+j+`
`+wt})}function Fr(f,C,j,J,Fe,Ve,wt){f.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Fe+"]: "+C+`
`+j+`
`+Ve+" "+wt})}function ie(f,C,j,J){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+yt(f,j)+(J?" "+J:"")})}function $e(f,C){f.info(function(){return"TIMEOUT: "+C})}Rr.prototype.info=function(){};function yt(f,C){if(!f.g)return C;if(!C)return null;try{var j=JSON.parse(C);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var J=j[f];if(!(2>J.length)){var Fe=J[1];if(Array.isArray(Fe)&&!(1>Fe.length)){var Ve=Fe[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var wt=1;wt<Fe.length;wt++)Fe[wt]=""}}}}return ot(j)}catch{return C}}var mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nt;function xt(){}v(xt,Tt),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},nt=new xt;function gt(f,C,j,J){this.j=f,this.i=C,this.l=j,this.R=J||1,this.U=new Et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var Mr={},Cr={};function Ts(f,C,j){f.L=1,f.v=ja(gn(C)),f.m=j,f.P=!0,Mi(f,null)}function Mi(f,C){f.F=Date.now(),ca(f),f.A=gn(f.v);var j=f.A,J=f.R;Array.isArray(J)||(J=[String(J)]),pu(j.i,"t",J),f.C=0,j=f.j.J,f.h=new ir,f.g=Mn(f.j,j?C:null,!f.m),0<f.O&&(f.M=new Ke(p(f.Y,f,f.g),f.O)),C=f.U,j=f.g,J=f.ca;var Fe="readystatechange";Array.isArray(Fe)||(Fe&&(pt[0]=Fe.toString()),Fe=pt);for(var Ve=0;Ve<Fe.length;Ve++){var wt=Ce(j,Fe[Ve],J||C.handleEvent,!1,C.h||C);if(!wt)break;C.g[wt.key]=wt}C=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),tr(),pr(f.i,f.u,f.A,f.l,f.R,f.m)}gt.prototype.ca=function(f){f=f.target;const C=this.M;C&&fi(f)==3?C.j():this.Y(f)},gt.prototype.Y=function(f){try{if(f==this.g)e:{const ln=fi(this.g);var C=this.g.Ba();const Ki=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||cc(this.g)))){this.J||ln!=4||C==7||(C==8||0>=Ki?tr(3):tr(2)),oe(this);var j=this.g.Z();this.X=j;t:if(Oi(this)){var J=cc(this.g);f="";var Fe=J.length,Ve=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tt(this),Ue(this);var wt="";break t}this.h.i=new o.TextDecoder}for(C=0;C<Fe;C++)this.h.h=!0,f+=this.h.i.decode(J[C],{stream:!(Ve&&C==Fe-1)});J.length=0,this.h.g+=f,this.C=0,wt=this.h.g}else wt=this.g.oa();if(this.o=j==200,Fr(this.i,this.u,this.A,this.l,this.R,ln,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Ir,Ln=this.g;if((Ir=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ir)){var gr=Ir;break t}}gr=null}if(j=gr)ie(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,it(this,j);else{this.o=!1,this.s=3,kr(12),tt(this),Ue(this);break e}}if(this.P){j=!0;let Gs;for(;!this.J&&this.C<wt.length;)if(Gs=ci(this,wt),Gs==Cr){ln==4&&(this.s=4,kr(14),j=!1),ie(this.i,this.l,null,"[Incomplete Response]");break}else if(Gs==Mr){this.s=4,kr(15),ie(this.i,this.l,wt,"[Invalid Chunk]"),j=!1;break}else ie(this.i,this.l,Gs,null),it(this,Gs);if(Oi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||wt.length!=0||this.h.h||(this.s=1,kr(16),j=!1),this.o=this.o&&j,!j)ie(this.i,this.l,wt,"[Invalid Chunked Response]"),tt(this),Ue(this);else if(0<wt.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+wt.length),jt(Qr),Qr.M=!0,kr(11))}}else ie(this.i,this.l,wt,null),it(this,wt);ln==4&&tt(this),this.o&&!this.J&&(ln==4?ar(this.j,this):(this.o=!1,ca(this)))}else mu(this.g),j==400&&0<wt.indexOf("Unknown SID")?(this.s=3,kr(12)):(this.s=0,kr(13)),tt(this),Ue(this)}}}catch{}finally{}};function Oi(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ci(f,C){var j=f.C,J=C.indexOf(`
`,j);return J==-1?Cr:(j=Number(C.substring(j,J)),isNaN(j)?Mr:(J+=1,J+j>C.length?Cr:(C=C.slice(J,J+j),f.C=J+j,C)))}gt.prototype.cancel=function(){this.J=!0,tt(this)};function ca(f){f.S=Date.now()+f.I,Qo(f,f.I)}function Qo(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=nn(p(f.ba,f),C)}function oe(f){f.B&&(o.clearTimeout(f.B),f.B=null)}gt.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?($e(this.i,this.A),this.L!=2&&(tr(),kr(17)),tt(this),this.s=2,Ue(this)):Qo(this,this.S-f)};function Ue(f){f.j.G==0||f.J||ar(f.j,f)}function tt(f){oe(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,ht(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function it(f,C){try{var j=f.j;if(j.G!=0&&(j.g==f||Zt(j.h,f))){if(!f.K&&Zt(j.h,f)&&j.G==3){try{var J=j.Da.g.parse(C)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Fe=J;if(Fe[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)er(j),ma(j);else break e;at(j),kr(18)}}else j.za=Fe[1],0<j.za-j.T&&37500>Fe[2]&&j.F&&j.v==0&&!j.C&&(j.C=nn(p(j.Za,j),6e3));if(1>=or(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Dr(j,11)}else if((f.K||j.g==f)&&er(j),!I(C))for(Fe=j.Da.g.parse(C),C=0;C<Fe.length;C++){let gr=Fe[C];if(j.T=gr[0],gr=gr[1],j.G==2)if(gr[0]=="c"){j.K=gr[1],j.ia=gr[2];const Qr=gr[3];Qr!=null&&(j.la=Qr,j.j.info("VER="+j.la));const ln=gr[4];ln!=null&&(j.Aa=ln,j.j.info("SVER="+j.Aa));const Ki=gr[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(J=1.5*Ki,j.L=J,j.j.info("backChannelRequestTimeoutMs_="+J)),J=j;const Gs=f.g;if(Gs){const Ls=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var Ve=J.h;Ve.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(wr(Ve,Ve.h),Ve.h=null))}if(J.D){const Da=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;Da&&(J.ya=Da,fr(J.I,J.D,Da))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),J=j;var wt=f;if(J.qa=Kr(J,J.J?J.ia:null,J.W),wt.K){Pr(J.h,wt);var Ir=wt,Ln=J.L;Ln&&(Ir.I=Ln),Ir.B&&(oe(Ir),ca(Ir)),J.g=wt}else Xe(J);0<j.i.length&&w(j)}else gr[0]!="stop"&&gr[0]!="close"||Dr(j,7);else j.G==3&&(gr[0]=="stop"||gr[0]=="close"?gr[0]=="stop"?Dr(j,7):NA(j):gr[0]!="noop"&&j.l&&j.l.ta(gr),j.v=0)}}tr(4)}catch{}}var ut=class{constructor(f,C){this.g=f,this.map=C}};function Nt(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bt(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function or(f){return f.h?1:f.g?f.g.size:0}function Zt(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function wr(f,C){f.g?f.g.add(C):f.h=C}function Pr(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}Nt.prototype.cancel=function(){if(this.i=Xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Xt(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const j of f.g.values())C=C.concat(j.D);return C}return y(f.i)}function Nn(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(A(f)){for(var C=[],j=f.length,J=0;J<j;J++)C.push(f[J]);return C}C=[],j=0;for(J in f)C[j++]=f[J];return C}function fn(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(A(f)||typeof f=="string"){var C=[];f=f.length;for(var j=0;j<f;j++)C.push(j);return C}C=[],j=0;for(const J in f)C[j++]=J;return C}}}function ds(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(A(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var j=fn(f),J=Nn(f),Fe=J.length,Ve=0;Ve<Fe;Ve++)C.call(void 0,J[Ve],j&&j[Ve],f)}var _i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pn(f,C){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var J=f[j].indexOf("="),Fe=null;if(0<=J){var Ve=f[j].substring(0,J);Fe=f[j].substring(J+1)}else Ve=f[j];C(Ve,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function Jt(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Jt){this.h=f.h,ui(this,f.j),this.o=f.o,this.g=f.g,di(this,f.s),this.l=f.l;var C=f.i,j=new Us;j.i=C.i,C.g&&(j.g=new Map(C.g),j.h=C.h),so(this,j),this.m=f.m}else f&&(C=String(f).match(_i))?(this.h=!1,ui(this,C[1]||"",!0),this.o=ua(C[2]||""),this.g=ua(C[3]||"",!0),di(this,C[4]),this.l=ua(C[5]||"",!0),so(this,C[6]||"",!0),this.m=ua(C[7]||"")):(this.h=!1,this.i=new Us(null,this.h))}Jt.prototype.toString=function(){var f=[],C=this.j;C&&f.push(hi(C,jo,!0),":");var j=this.g;return(j||C=="file")&&(f.push("//"),(C=this.o)&&f.push(hi(C,jo,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(hi(j,j.charAt(0)=="/"?gh:Hi,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",hi(j,fu)),f.join("")};function gn(f){return new Jt(f)}function ui(f,C,j){f.j=j?ua(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function di(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function so(f,C,j){C instanceof Us?(f.i=C,mh(f.i,f.h)):(j||(C=hi(C,oc)),f.i=new Us(C,f.h))}function fr(f,C,j){f.i.set(C,j)}function ja(f){return fr(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ua(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function hi(f,C,j){return typeof f=="string"?(f=encodeURI(f).replace(C,da),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function da(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var jo=/[#\/\?@]/g,Hi=/[#\?:]/g,gh=/[#\?]/g,oc=/[#\?@]/g,fu=/#/g;function Us(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function ha(f){f.g||(f.g=new Map,f.h=0,f.i&&pn(f.i,function(C,j){f.add(decodeURIComponent(C.replace(/\+/g," ")),j)}))}t=Us.prototype,t.add=function(f,C){ha(this),this.i=null,f=Yt(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(C),this.h+=1,this};function io(f,C){ha(f),C=Yt(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function IA(f,C){return ha(f),C=Yt(f,C),f.g.has(C)}t.forEach=function(f,C){ha(this),this.g.forEach(function(j,J){j.forEach(function(Fe){f.call(C,Fe,J,this)},this)},this)},t.na=function(){ha(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),j=[];for(let J=0;J<C.length;J++){const Fe=f[J];for(let Ve=0;Ve<Fe.length;Ve++)j.push(C[J])}return j},t.V=function(f){ha(this);let C=[];if(typeof f=="string")IA(this,f)&&(C=C.concat(this.g.get(Yt(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)C=C.concat(f[j])}return C},t.set=function(f,C){return ha(this),this.i=null,f=Yt(this,f),IA(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},t.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function pu(f,C,j){io(f,C),0<j.length&&(f.i=null,f.g.set(Yt(f,C),y(j)),f.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var j=0;j<C.length;j++){var J=C[j];const Ve=encodeURIComponent(String(J)),wt=this.V(J);for(J=0;J<wt.length;J++){var Fe=Ve;wt[J]!==""&&(Fe+="="+encodeURIComponent(String(wt[J]))),f.push(Fe)}}return this.i=f.join("&")};function Yt(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function mh(f,C){C&&!f.j&&(ha(f),f.i=null,f.g.forEach(function(j,J){var Fe=J.toLowerCase();J!=Fe&&(io(this,J),pu(this,Fe,j))},f)),f.j=C}function wh(f,C){const j=new Rr;if(o.Image){const J=new Image;J.onload=g(bs,j,"TestLoadImage: loaded",!0,C,J),J.onerror=g(bs,j,"TestLoadImage: error",!1,C,J),J.onabort=g(bs,j,"TestLoadImage: abort",!1,C,J),J.ontimeout=g(bs,j,"TestLoadImage: timeout",!1,C,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=f}else C(!1)}function xh(f,C){const j=new Rr,J=new AbortController,Fe=setTimeout(()=>{J.abort(),bs(j,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:J.signal}).then(Ve=>{clearTimeout(Fe),Ve.ok?bs(j,"TestPingServer: ok",!0,C):bs(j,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Fe),bs(j,"TestPingServer: error",!1,C)})}function bs(f,C,j,J,Fe){try{Fe&&(Fe.onload=null,Fe.onerror=null,Fe.onabort=null,Fe.ontimeout=null),J(j)}catch{}}function Ra(){this.g=new qe}function vh(f,C,j){const J=j||"";try{ds(f,function(Fe,Ve){let wt=Fe;c(Fe)&&(wt=ot(Fe)),C.push(J+Ve+"="+encodeURIComponent(wt))})}catch(Fe){throw C.push(J+"type="+encodeURIComponent("_badmap")),Fe}}function EA(f){this.l=f.Ub||null,this.j=f.eb||!1}v(EA,Tt),EA.prototype.g=function(){return new Pa(this.l,this.j)},EA.prototype.i=function(f){return function(){return f}}({});function Pa(f,C){ae.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Pa,ae),t=Pa.prototype,t.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,Ro(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||o).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kA(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function kA(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?Vi(this):Ro(this),this.readyState==3&&kA(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Vi(this))},t.Qa=function(f){this.g&&(this.response=f,Vi(this))},t.ga=function(){this.g&&Vi(this)};function Vi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ro(f)}t.setRequestHeader=function(f,C){this.u.append(f,C)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var j=C.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=C.next();return f.join(`\r
`)};function Ro(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function fa(f){let C="";return P(f,function(j,J){C+=J,C+=":",C+=j,C+=`\r
`}),C}function Ac(f,C,j){e:{for(J in j){var J=!1;break e}J=!0}J||(j=fa(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):fr(f,C,j))}function Yr(f){ae.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Yr,ae);var lc=/^https?$/i,gu=["POST","PUT"];t=Yr.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,C,j,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nt.g(),this.v=this.o?_t(this.o):_t(nt),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(Ve){pa(this,Ve);return}if(f=j||"",j=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Fe in J)j.set(Fe,J[Fe]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Ve of J.keys())j.set(Ve,J.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(j.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),Fe=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(gu,C,void 0))||J||Fe||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,wt]of j)this.g.setRequestHeader(Ve,wt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oo(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ve){pa(this,Ve)}};function pa(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,SA(f),ao(f)}function SA(f){f.A||(f.A=!0,he(f,"complete"),he(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,he(this,"complete"),he(this,"abort"),ao(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ao(this,!0)),Yr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Po(this):this.bb())},t.bb=function(){Po(this)};function Po(f){if(f.h&&typeof a<"u"&&(!f.v[1]||fi(f)!=4||f.Z()!=2)){if(f.u&&fi(f)==4)Re(f.Ea,0,f);else if(he(f,"readystatechange"),fi(f)==4){f.h=!1;try{const wt=f.Z();e:switch(wt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var j;if(!(j=C)){var J;if(J=wt===0){var Fe=String(f.D).match(_i)[1]||null;!Fe&&o.self&&o.self.location&&(Fe=o.self.location.protocol.slice(0,-1)),J=!lc.test(Fe?Fe.toLowerCase():"")}j=J}if(j)he(f,"complete"),he(f,"success");else{f.m=6;try{var Ve=2<fi(f)?f.g.statusText:""}catch{Ve=""}f.l=Ve+" ["+f.Z()+"]",SA(f)}}finally{ao(f)}}}}function ao(f,C){if(f.g){oo(f);const j=f.g,J=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||he(f,"ready");try{j.onreadystatechange=J}catch{}}}function oo(f){f.I&&(o.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function fi(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),Je(C)}};function cc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function mu(f){const C={};f=(f.g&&2<=fi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<f.length;J++){if(I(f[J]))continue;var j=k(f[J]);const Fe=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const Ve=C[Fe]||[];C[Fe]=Ve,Ve.push(j)}E(C,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(f,C,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||C}function ga(f){this.Aa=0,this.i=[],this.j=new Rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pi("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pi("baseRetryDelayMs",5e3,f),this.cb=pi("retryDelaySeedMs",1e4,f),this.Wa=pi("forwardChannelMaxRetries",2,f),this.wa=pi("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Nt(f&&f.concurrentRequestLimit),this.Da=new Ra,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ga.prototype,t.la=8,t.G=1,t.connect=function(f,C,j,J){kr(0),this.W=f,this.H=C||{},j&&J!==void 0&&(this.H.OSID=j,this.H.OAID=J),this.F=this.X,this.I=Kr(this,null,this.W),w(this)};function NA(f){if(uc(f),f.G==3){var C=f.U++,j=gn(f.I);if(fr(j,"SID",f.K),fr(j,"RID",C),fr(j,"TYPE","terminate"),fe(f,j),C=new gt(f,f.j,C),C.L=2,C.v=ja(gn(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(C.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=C.v,j=!0),j||(C.g=Mn(C.j,null),C.g.ea(C.v)),C.F=Date.now(),ca(C)}Fn(f)}function ma(f){f.g&&(jt(f),f.g.cancel(),f.g=null)}function uc(f){ma(f),f.u&&(o.clearTimeout(f.u),f.u=null),er(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function w(f){if(!bt(f.h)&&!f.s){f.s=!0;var C=f.Ga;_e||Pe(),se||(_e(),se=!0),me.add(C,f),f.B=0}}function O(f,C){return or(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=nn(p(f.Ga,f,C),vr(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Fe=new gt(this,this.j,f);let Ve=this.o;if(this.S&&(Ve?(Ve=_(Ve),Q(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(Fe.H=Ve,Ve=null),this.P)e:{for(var C=0,j=0;j<this.i.length;j++){t:{var J=this.i[j];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(C+=J,4096<C){C=j;break e}if(C===4096||j===this.i.length-1){C=j+1;break e}}C=1e3}else C=1e3;C=Ne(this,Fe,C),j=gn(this.I),fr(j,"RID",f),fr(j,"CVER",22),this.D&&fr(j,"X-HTTP-Session-Id",this.D),fe(this,j),Ve&&(this.O?C="headers="+encodeURIComponent(String(fa(Ve)))+"&"+C:this.m&&Ac(j,this.m,Ve)),wr(this.h,Fe),this.Ua&&fr(j,"TYPE","init"),this.P?(fr(j,"$req",C),fr(j,"SID","null"),Fe.T=!0,Ts(Fe,j,null)):Ts(Fe,j,C),this.G=2}}else this.G==3&&(f?ee(this,f):this.i.length==0||bt(this.h)||ee(this))};function ee(f,C){var j;C?j=C.l:j=f.U++;const J=gn(f.I);fr(J,"SID",f.K),fr(J,"RID",j),fr(J,"AID",f.T),fe(f,J),f.m&&f.o&&Ac(J,f.m,f.o),j=new gt(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),C&&(f.i=C.D.concat(f.i)),C=Ne(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),wr(f.h,j),Ts(j,J,C)}function fe(f,C){f.H&&P(f.H,function(j,J){fr(C,J,j)}),f.l&&ds({},function(j,J){fr(C,J,j)})}function Ne(f,C,j){j=Math.min(f.i.length,j);var J=f.l?p(f.l.Na,f.l,f):null;e:{var Fe=f.i;let Ve=-1;for(;;){const wt=["count="+j];Ve==-1?0<j?(Ve=Fe[0].g,wt.push("ofs="+Ve)):Ve=0:wt.push("ofs="+Ve);let Ir=!0;for(let Ln=0;Ln<j;Ln++){let gr=Fe[Ln].g;const Qr=Fe[Ln].map;if(gr-=Ve,0>gr)Ve=Math.max(0,Fe[Ln].g-100),Ir=!1;else try{vh(Qr,wt,"req"+gr+"_")}catch{J&&J(Qr)}}if(Ir){J=wt.join("&");break e}}}return f=f.i.splice(0,j),C.D=f,J}function Xe(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;_e||Pe(),se||(_e(),se=!0),me.add(C,f),f.v=0}}function at(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=nn(p(f.Fa,f),vr(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Vt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=nn(p(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kr(10),ma(this),Vt(this))};function jt(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function Vt(f){f.g=new gt(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=gn(f.qa);fr(C,"RID","rpc"),fr(C,"SID",f.K),fr(C,"AID",f.T),fr(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&fr(C,"TO",f.ja),fr(C,"TYPE","xmlhttp"),fe(f,C),f.m&&f.o&&Ac(C,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=ja(gn(C)),j.m=null,j.P=!0,Mi(j,f)}t.Za=function(){this.C!=null&&(this.C=null,ma(this),at(this),kr(19))};function er(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function ar(f,C){var j=null;if(f.g==C){er(f),jt(f),f.g=null;var J=2}else if(Zt(f.h,C))j=C.D,Pr(f.h,C),J=1;else return;if(f.G!=0){if(C.o)if(J==1){j=C.m?C.m.length:0,C=Date.now()-C.F;var Fe=f.B;J=jr(),he(J,new us(J,j)),w(f)}else Xe(f);else if(Fe=C.s,Fe==3||Fe==0&&0<C.X||!(J==1&&O(f,C)||J==2&&at(f)))switch(j&&0<j.length&&(C=f.h,C.i=C.i.concat(j)),Fe){case 1:Dr(f,5);break;case 4:Dr(f,10);break;case 3:Dr(f,6);break;default:Dr(f,2)}}}function vr(f,C){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*C}function Dr(f,C){if(f.j.info("Error code "+C),C==2){var j=p(f.fb,f),J=f.Xa;const Fe=!J;J=new Jt(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ui(J,"https"),ja(J),Fe?wh(J.toString(),j):xh(J.toString(),j)}else kr(2);f.G=0,f.l&&f.l.sa(C),Fn(f),uc(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),kr(2)):(this.j.info("Failed to ping google.com"),kr(1))};function Fn(f){if(f.G=0,f.ka=[],f.l){const C=Xt(f.h);(C.length!=0||f.i.length!=0)&&(S(f.ka,C),S(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function Kr(f,C,j){var J=j instanceof Jt?gn(j):new Jt(j);if(J.g!="")C&&(J.g=C+"."+J.g),di(J,J.s);else{var Fe=o.location;J=Fe.protocol,C=C?C+"."+Fe.hostname:Fe.hostname,Fe=+Fe.port;var Ve=new Jt(null);J&&ui(Ve,J),C&&(Ve.g=C),Fe&&di(Ve,Fe),j&&(Ve.l=j),J=Ve}return j=f.D,C=f.ya,j&&C&&fr(J,j,C),fr(J,"VER",f.la),fe(f,J),J}function Mn(f,C,j){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new Yr(new EA({eb:j})):new Yr(f.pa),C.Ha(f.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tn(){}t=Tn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function On(){}On.prototype.g=function(f,C){return new Un(f,C)};function Un(f,C){ae.call(this),this.g=new ga(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!I(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!I(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new xa(this)}v(Un,ae),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){NA(this.g)},Un.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=ot(f),f=j);C.i.push(new ut(C.Ya++,f)),C.G==3&&w(C)},Un.prototype.N=function(){this.g.l=null,delete this.j,NA(this.g),delete this.g,Un.aa.N.call(this)};function Ci(f){Ot.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const j in C){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}v(Ci,Ot);function wa(){vt.call(this),this.status=1}v(wa,vt);function xa(f){this.g=f}v(xa,Tn),xa.prototype.ua=function(){he(this.g,"a")},xa.prototype.ta=function(f){he(this.g,new Ci(f))},xa.prototype.sa=function(f){he(this.g,new wa)},xa.prototype.ra=function(){he(this.g,"b")},On.prototype.createWebChannel=On.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,JN=function(){return new On},WN=function(){return jr()},qN=Ht,C2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mt.NO_ERROR=0,mt.TIMEOUT=8,mt.HTTP_ERROR=6,Vg=mt,St.COMPLETE="complete",$N=St,kt.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",ae.prototype.listen=ae.prototype.K,cf=kt,Yr.prototype.listenOnce=Yr.prototype.L,Yr.prototype.getLastError=Yr.prototype.Ka,Yr.prototype.getLastErrorCode=Yr.prototype.Ba,Yr.prototype.getStatus=Yr.prototype.Z,Yr.prototype.getResponseJson=Yr.prototype.Oa,Yr.prototype.getResponseText=Yr.prototype.oa,Yr.prototype.send=Yr.prototype.ea,Yr.prototype.setWithCredentials=Yr.prototype.Ha,GN=Yr}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});const dC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Es.UNAUTHENTICATED=new Es(null),Es.GOOGLE_CREDENTIALS=new Es("google-credentials-uid"),Es.FIRST_PARTY=new Es("first-party-uid"),Es.MOCK_USER=new Es("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new Eb("@firebase/firestore");function ju(){return Pl.logLevel}function y8(t){Pl.setLogLevel(t)}function ct(t,...e){if(Pl.logLevel<=br.DEBUG){const r=e.map(Nb);Pl.debug(`Firestore (${eh}): ${t}`,...r)}}function ss(t,...e){if(Pl.logLevel<=br.ERROR){const r=e.map(Nb);Pl.error(`Firestore (${eh}): ${t}`,...r)}}function aa(t,...e){if(Pl.logLevel<=br.WARN){const r=e.map(Nb);Pl.warn(`Firestore (${eh}): ${t}`,...r)}}function Nb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+t;throw ss(e),new Error(e)}function Mt(t,e){t||Lt()}function b8(t,e){t||Lt()}function Bt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends xA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Es.UNAUTHENTICATED))}shutdown(){}}class B8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class _8{constructor(e){this.t=e,this.currentUser=Es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Mt(this.o===void 0);let n=this.i;const s=A=>this.i!==n?(n=this.i,r(A)):Promise.resolve();let i=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ns,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const A=i;e.enqueueRetryable(async()=>{await A.promise,await s(this.currentUser)})},o=A=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(A=>o(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ns)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Mt(typeof n.accessToken=="string"),new XN(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string"),new Es(e)}}class C8{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Es.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class I8{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new C8(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Mt(this.o===void 0);const n=i=>{i.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ct("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Mt(typeof r.token=="string"),this.R=r.token,new ZN(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class k8{getToken(){return Promise.resolve(new ZN(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=S8(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function sr(t,e){return t<e?-1:t>e?1:0}function Fd(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function eF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new lt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new lt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new lt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new kn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sr(this.nanoseconds,e.nanoseconds):sr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gt(e)}static min(){return new Gt(new kn(0,0))}static max(){return new Gt(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,r,n){r===void 0?r=0:r>e.length&&Lt(),n===void 0?n=e.length-r:n>e.length-r&&Lt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return fp.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof fp?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Br extends fp{construct(e,r,n){return new Br(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new lt(ze.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Br(r)}static emptyPath(){return new Br([])}}const N8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends fp{construct(e,r,n){return new vn(e,r,n)}static isValidIdentifier(e){return N8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new lt(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new lt(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[s+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new lt(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=A,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new lt(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(r)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.path=e}static fromPath(e){return new It(Br.fromString(e))}static fromName(e){return new It(Br.fromString(e).popFirst(5))}static empty(){return new It(Br.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Br.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Br.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new Br(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function I2(t){return t.fields.find(e=>e.kind===2)}function yc(t){return t.fields.filter(e=>e.kind!==2)}function F8(t,e){let r=sr(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=T8(t.fields[n],e.fields[n]),r!==0)return r;return sr(t.fields.length,e.fields.length)}Td.UNKNOWN_ID=-1;class jc{constructor(e,r){this.fieldPath=e,this.kind=r}}function T8(t,e){const r=vn.comparator(t.fieldPath,e.fieldPath);return r!==0?r:sr(t.kind,e.kind)}class Ud{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ud(0,oa.min())}}function tF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Gt.fromTimestamp(n===1e9?new kn(r+1,0):new kn(r,n));return new oa(s,It.empty(),e)}function rF(t){return new oa(t.readTime,t.key,-1)}class oa{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new oa(Gt.min(),It.empty(),-1)}static max(){return new oa(Gt.max(),It.empty(),-1)}}function Tb(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=It.comparator(t.documentKey,e.documentKey),r!==0?r:sr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){if(t.code!==ze.FAILED_PRECONDITION||t.message!==nF)throw t;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Qe((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Qe?r:Qe.resolve(r)}catch(r){return Qe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Qe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Qe.reject(r)}static resolve(e){return new Qe((r,n)=>{r(e)})}static reject(e){return new Qe((r,n)=>{n(e)})}static waitFor(e){return new Qe((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},A=>n(A))}),a=!0,i===s&&r()})}static or(e){let r=Qe.resolve(!1);for(const n of e)r=r.next(s=>s?Qe.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Qe((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let A=0;A<i;A++){const c=A;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Qe((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Ns,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Tf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Ub(n.target.error);this.V.reject(new Tf(e,s))}}static open(e,r,n,s){try{return new zw(r,e.transaction(s,n))}catch(i){throw new Tf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new L8(r)}}class Eo{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Eo.S(vs())===12.2&&ss("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ct("SimpleDb","Removing database:",e),Bc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!DN())return!1;if(Eo.v())return!0;const e=vs(),r=Eo.S(e),n=0<r&&r<10,s=iF(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ct("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new Tf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new lt(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new lt(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new Tf(e,a))},s.onupgradeneeded=i=>{ct("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{ct("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=zw.open(this.db,e,i?"readonly":"readwrite",n),A=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Qe.reject(c))).toPromise();return A.catch(()=>{}),await o.m,A}catch(o){const A=o,c=A.name!=="FirebaseError"&&a<3;if(ct("SimpleDb","Transaction failed with error:",A.message,"Retrying:",c),this.close(),!c)return Promise.reject(A)}}}close(){this.db&&this.db.close(),this.db=void 0}}function iF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class U8{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Bc(this.B.delete())}}class Tf extends lt{constructor(e,r){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ec(t){return t.name==="IndexedDbTransactionError"}class L8{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ct("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bc(n)}add(e){return ct("SimpleDb","ADD",this.store.name,e,e),Bc(this.store.add(e))}get(e){return Bc(this.store.get(e)).next(r=>(r===void 0&&(r=null),ct("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ct("SimpleDb","DELETE",this.store.name,e),Bc(this.store.delete(e))}count(){return ct("SimpleDb","COUNT",this.store.name),Bc(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Qe((a,o)=>{i.onerror=A=>{o(A.target.error)},i.onsuccess=A=>{a(A.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,A)=>{a.push(A)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Qe((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){ct("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Qe((n,s)=>{r.onerror=i=>{const a=Ub(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Qe((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const A=new U8(o),c=r(o.primaryKey,o.value,A);if(c instanceof Qe){const u=c.catch(d=>(A.done(),Qe.reject(d)));n.push(u)}A.isDone?s():A.K===null?o.continue():o.continue(A.K)}}).next(()=>Qe.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Bc(t){return new Qe((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Ub(n.target.error);r(s)}})}let hC=!1;function Ub(t){const e=Eo.S(vs());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hC||(hC=!0,setTimeout(()=>{throw n},0)),n}}return t}class Q8{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ct("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ct("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ec(r)?ct("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Zl(r)}await this.X(6e4)})}}class j8{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Qe.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return ct("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(ct("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=rF(i);Tb(a,n)>0&&(n=a)}),new oa(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ti.oe=-1;function Mp(t){return t==null}function pp(t){return t===0&&1/t==-1/0}function aF(t){return typeof t=="number"&&Number.isInteger(t)&&!pp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=fC(e)),e=R8(t.get(r),e);return fC(e)}function R8(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function fC(t){return t+""}function bo(t){const e=t.length;if(Mt(e>=2),e===2)return Mt(t.charAt(0)===""&&t.charAt(1)===""),Br.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&Lt(),t.charAt(a+1)){case"":const o=t.substring(i,a);let A;s.length===0?A=o:(s+=o,A=s,s=""),n.push(A);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:Lt()}i=a+2}return new Br(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){return[t,oi(e)]}function oF(t,e,r){return[t,oi(e),r]}const P8={},D8=["prefixPath","collectionGroup","readTime","documentId"],M8=["prefixPath","collectionGroup","documentId"],O8=["collectionGroup","readTime","prefixPath","documentId"],H8=["canonicalId","targetId"],V8=["targetId","path"],K8=["path","targetId"],z8=["collectionId","parent"],G8=["indexId","uid"],$8=["uid","sequenceNumber"],q8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W8=["indexId","uid","orderedDocumentKey"],J8=["userId","collectionPath","documentId"],X8=["userId","collectionPath","largestBatchId"],Y8=["userId","collectionGroup","largestBatchId"],AF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z8=[...AF,"documentOverlays"],lF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cF=lF,Lb=[...cF,"indexConfiguration","indexState","indexEntries"],eM=Lb,tM=[...Lb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2 extends sF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function ys(t,e){const r=Bt(t);return Eo.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function tc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function uF(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function dF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,r){this.comparator=e,this.root=r||Ms.EMPTY}insert(e,r){return new hn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ms.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ms.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new K0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new K0(this.root,e,this.comparator,!1)}getReverseIterator(){return new K0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new K0(this.root,e,this.comparator,!0)}}class K0{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ms{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Ms.RED,this.left=s??Ms.EMPTY,this.right=i??Ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Ms(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ms.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Ms.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lt();const e=this.left.check();if(e!==this.right.check())throw Lt();return e+(this.isRed()?0:1)}}Ms.EMPTY=null,Ms.RED=!0,Ms.BLACK=!1;Ms.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt()}get value(){throw Lt()}get color(){throw Lt()}get left(){throw Lt()}get right(){throw Lt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Ms(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new en(this.comparator);return r.data=e,r}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Ui([])}unionWith(e){let r=new en(vn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Ui(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Fd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hF("Invalid base64 string: "+i):i}}(e);return new Dn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Dn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const nM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dA(t){if(Mt(!!t),typeof t=="string"){let e=0;const r=nM.exec(t);if(Mt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Cn(t.seconds),nanos:Cn(t.nanos)}}function Cn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hA(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function $w(t){const e=t.mapValue.fields.__previous_value__;return Gw(e)?$w(e):e}function gp(t){const e=dA(t.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,r,n,s,i,a,o,A,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=c}}class Dl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Dl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zg={nullValue:"NULL_VALUE"};function Ml(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gw(t)?4:fF(t)?9007199254740991:qw(t)?10:11:Lt()}function Fo(t,e){if(t===e)return!0;const r=Ml(t);if(r!==Ml(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gp(t).isEqual(gp(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=dA(s.timestampValue),o=dA(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hA(s.bytesValue).isEqual(hA(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Cn(s.geoPointValue.latitude)===Cn(i.geoPointValue.latitude)&&Cn(s.geoPointValue.longitude)===Cn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Cn(s.integerValue)===Cn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Cn(s.doubleValue),o=Cn(i.doubleValue);return a===o?pp(a)===pp(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Fd(t.arrayValue.values||[],e.arrayValue.values||[],Fo);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(gC(a)!==gC(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!Fo(a[A],o[A])))return!1;return!0}(t,e);default:return Lt()}}function mp(t,e){return(t.values||[]).find(r=>Fo(r,e))!==void 0}function Ol(t,e){if(t===e)return 0;const r=Ml(t),n=Ml(e);if(r!==n)return sr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return sr(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Cn(i.integerValue||i.doubleValue),A=Cn(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1}(t,e);case 3:return wC(t.timestampValue,e.timestampValue);case 4:return wC(gp(t),gp(e));case 5:return sr(t.stringValue,e.stringValue);case 6:return function(i,a){const o=hA(i),A=hA(a);return o.compareTo(A)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),A=a.split("/");for(let c=0;c<o.length&&c<A.length;c++){const u=sr(o[c],A[c]);if(u!==0)return u}return sr(o.length,A.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=sr(Cn(i.latitude),Cn(a.latitude));return o!==0?o:sr(Cn(i.longitude),Cn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xC(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,A,c,u;const d=i.fields||{},p=a.fields||{},g=(o=d.value)===null||o===void 0?void 0:o.arrayValue,v=(A=p.value)===null||A===void 0?void 0:A.arrayValue,y=sr(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:xC(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===fl.mapValue&&a===fl.mapValue)return 0;if(i===fl.mapValue)return 1;if(a===fl.mapValue)return-1;const o=i.fields||{},A=Object.keys(o),c=a.fields||{},u=Object.keys(c);A.sort(),u.sort();for(let d=0;d<A.length&&d<u.length;++d){const p=sr(A[d],u[d]);if(p!==0)return p;const g=Ol(o[A[d]],c[u[d]]);if(g!==0)return g}return sr(A.length,u.length)}(t.mapValue,e.mapValue);default:throw Lt()}}function wC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return sr(t,e);const r=dA(t),n=dA(e),s=sr(r.seconds,n.seconds);return s!==0?s:sr(r.nanos,n.nanos)}function xC(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Ol(r[s],n[s]);if(i)return i}return sr(r.length,n.length)}function Ld(t){return k2(t)}function k2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=dA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return hA(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return It.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=k2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${k2(r.fields[a])}`;return s+"}"}(t.mapValue):Lt()}function Gg(t){switch(Ml(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$w(t);return e?16+Gg(e):16;case 5:return 2*t.stringValue.length;case 6:return hA(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+Gg(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return tc(n.fields,(i,a)=>{s+=i.length+Gg(a)}),s}(t.mapValue);default:throw Lt()}}function Gc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function S2(t){return!!t&&"integerValue"in t}function wp(t){return!!t&&"arrayValue"in t}function vC(t){return!!t&&"nullValue"in t}function yC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $g(t){return!!t&&"mapValue"in t}function qw(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Uf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return tc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Uf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Uf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function fF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const pF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iM(t){return"nullValue"in t?zg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gc(Dl.empty(),It.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?qw(t)?pF:{mapValue:{}}:Lt()}function aM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gc(Dl.empty(),It.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?pF:"mapValue"in t?qw(t)?{mapValue:{}}:fl:Lt()}function bC(t,e){const r=Ol(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function BC(t,e){const r=Ol(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.value=e}static empty(){return new Hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!$g(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uf(r)}setAll(e){let r=vn.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const A=this.getFieldsMap(r);this.applyChanges(A,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=Uf(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());$g(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Fo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];$g(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){tc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Hs(Uf(this.value))}}function gF(t){const e=[];return tc(t.fields,(r,n)=>{const s=new vn([r]);if($g(n)){const i=gF(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Ui(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new xn(e,0,Gt.min(),Gt.min(),Gt.min(),Hs.empty(),0)}static newFoundDocument(e,r,n,s){return new xn(e,1,r,Gt.min(),n,s,0)}static newNoDocument(e,r){return new xn(e,2,r,Gt.min(),Gt.min(),Hs.empty(),0)}static newUnknownDocument(e,r){return new xn(e,3,r,Gt.min(),Gt.min(),Hs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,r){this.position=e,this.inclusive=r}}function _C(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=It.comparator(It.fromName(a.referenceValue),r.key):n=Ol(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function CC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Fo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,r="asc"){this.field=e,this.dir=r}}function oM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{}class _r extends mF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new AM(e,r,n):r==="array-contains"?new uM(e,n):r==="in"?new BF(e,n):r==="not-in"?new dM(e,n):r==="array-contains-any"?new hM(e,n):new _r(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new lM(e,n):new cM(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Ol(r,this.value)):r!==null&&Ml(this.value)===Ml(r)&&this.matchesComparison(Ol(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends mF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Jr(e,r)}matches(e){return Qd(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qd(t){return t.op==="and"}function N2(t){return t.op==="or"}function Qb(t){return wF(t)&&Qd(t)}function wF(t){for(const e of t.filters)if(e instanceof Jr)return!1;return!0}function F2(t){if(t instanceof _r)return t.field.canonicalString()+t.op.toString()+Ld(t.value);if(Qb(t))return t.filters.map(e=>F2(e)).join(",");{const e=t.filters.map(r=>F2(r)).join(",");return`${t.op}(${e})`}}function xF(t,e){return t instanceof _r?function(n,s){return s instanceof _r&&n.op===s.op&&n.field.isEqual(s.field)&&Fo(n.value,s.value)}(t,e):t instanceof Jr?function(n,s){return s instanceof Jr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&xF(a,s.filters[o]),!0):!1}(t,e):void Lt()}function vF(t,e){const r=t.filters.concat(e);return Jr.create(r,t.op)}function yF(t){return t instanceof _r?function(r){return`${r.field.canonicalString()} ${r.op} ${Ld(r.value)}`}(t):t instanceof Jr?function(r){return r.op.toString()+" {"+r.getFilters().map(yF).join(" ,")+"}"}(t):"Filter"}class AM extends _r{constructor(e,r,n){super(e,r,n),this.key=It.fromName(n.referenceValue)}matches(e){const r=It.comparator(e.key,this.key);return this.matchesComparison(r)}}class lM extends _r{constructor(e,r){super(e,"in",r),this.keys=bF("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class cM extends _r{constructor(e,r){super(e,"not-in",r),this.keys=bF("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function bF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>It.fromName(n.referenceValue))}class uM extends _r{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return wp(r)&&mp(r.arrayValue,this.value)}}class BF extends _r{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&mp(this.value.arrayValue,r)}}class dM extends _r{constructor(e,r){super(e,"not-in",r)}matches(e){if(mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!mp(this.value.arrayValue,r)}}class hM extends _r{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!wp(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>mp(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function T2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new fM(t,e,r,n,s,i,a)}function $c(t){const e=Bt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>F2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Mp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ld(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ld(n)).join(",")),e.ue=r}return e.ue}function Op(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!oM(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!xF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!CC(t.startAt,e.startAt)&&CC(t.endAt,e.endAt)}function Vm(t){return It.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Km(t,e){return t.filters.filter(r=>r instanceof _r&&r.field.isEqual(e))}function IC(t,e,r){let n=zg,s=!0;for(const i of Km(t,e)){let a=zg,o=!0;switch(i.op){case"<":case"<=":a=iM(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=zg}bC({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];bC({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function EC(t,e,r){let n=fl,s=!0;for(const i of Km(t,e)){let a=fl,o=!0;switch(i.op){case">=":case">":a=aM(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=fl}BC({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];BC({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,A=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=A,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _F(t,e,r,n,s,i,a,o){return new vA(t,e,r,n,s,i,a,o)}function th(t){return new vA(t)}function kC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jb(t){return t.collectionGroup!==null}function dd(t){const e=Bt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new en(vn.comparator);return a.filters.forEach(A=>{A.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new xp(i,n))}),r.has(vn.keyField().canonicalString())||e.ce.push(new xp(vn.keyField(),n))}return e.ce}function Ai(t){const e=Bt(t);return e.le||(e.le=IF(e,dd(t))),e.le}function CF(t){const e=Bt(t);return e.he||(e.he=IF(e,t.explicitOrderBy)),e.he}function IF(t,e){if(t.limitType==="F")return T2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xp(s.field,i)});const r=t.endAt?new Hl(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Hl(t.startAt.position,t.startAt.inclusive):null;return T2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function U2(t,e){const r=t.filters.concat([e]);return new vA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function zm(t,e,r){return new vA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Hp(t,e){return Op(Ai(t),Ai(e))&&t.limitType===e.limitType}function EF(t){return`${$c(Ai(t))}|lt:${t.limitType}`}function Ru(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>yF(s)).join(", ")}]`),Mp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Ld(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Ld(s)).join(",")),`Target(${n})`}(Ai(t))}; limitType=${t.limitType})`}function Vp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):It.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of dd(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,A){const c=_C(a,o,A);return a.inclusive?c<=0:c<0}(n.startAt,dd(n),s)||n.endAt&&!function(a,o,A){const c=_C(a,o,A);return a.inclusive?c>=0:c>0}(n.endAt,dd(n),s))}(t,e)}function kF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SF(t){return(e,r)=>{let n=!1;for(const s of dd(t)){const i=pM(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function pM(t,e,r){const n=t.field.isKeyField()?It.comparator(e.key,r.key):function(i,a,o){const A=a.data.field(i),c=o.data.field(i);return A!==null&&c!==null?Ol(A,c):Lt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Lt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return dF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new hn(It.comparator);function Li(){return gM}const NF=new hn(It.comparator);function uf(...t){let e=NF;for(const r of t)e=e.insert(r.key,r);return e}function FF(t){let e=NF;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Bo(){return Lf()}function TF(){return Lf()}function Lf(){return new yA(t=>t.toString(),(t,e)=>t.isEqual(e))}const mM=new hn(It.comparator),wM=new en(It.comparator);function ur(...t){let e=wM;for(const r of t)e=e.add(r);return e}const xM=new en(sr);function Rb(){return xM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pp(e)?"-0":e}}function UF(t){return{integerValue:""+t}}function LF(t,e){return aF(e)?UF(e):Pb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this._=void 0}}function vM(t,e,r){return t instanceof jd?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Gw(i)&&(i=$w(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof qc?jF(t,e):t instanceof Wc?RF(t,e):function(s,i){const a=QF(s,i),o=SC(a)+SC(s.Pe);return S2(a)&&S2(s.Pe)?UF(o):Pb(s.serializer,o)}(t,e)}function yM(t,e,r){return t instanceof qc?jF(t,e):t instanceof Wc?RF(t,e):r}function QF(t,e){return t instanceof Rd?function(n){return S2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class jd extends Ww{}class qc extends Ww{constructor(e){super(),this.elements=e}}function jF(t,e){const r=PF(e);for(const n of t.elements)r.some(s=>Fo(s,n))||r.push(n);return{arrayValue:{values:r}}}class Wc extends Ww{constructor(e){super(),this.elements=e}}function RF(t,e){let r=PF(e);for(const n of t.elements)r=r.filter(s=>!Fo(s,n));return{arrayValue:{values:r}}}class Rd extends Ww{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function SC(t){return Cn(t.integerValue||t.doubleValue)}function PF(t){return wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,r){this.field=e,this.transform=r}}function bM(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof qc&&s instanceof qc||n instanceof Wc&&s instanceof Wc?Fd(n.elements,s.elements,Fo):n instanceof Rd&&s instanceof Rd?Fo(n.Pe,s.Pe):n instanceof jd&&s instanceof jd}(t.transform,e.transform)}class BM{constructor(e,r){this.version=e,this.transformResults=r}}class En{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jw{}function DF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nh(t.key,En.none()):new rh(t.key,t.data,En.none());{const r=t.data,n=Hs.empty();let s=new en(vn.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new bA(t.key,n,new Ui(s.toArray()),En.none())}}function _M(t,e,r){t instanceof rh?function(s,i,a){const o=s.value.clone(),A=FC(s.fieldTransforms,i,a.transformResults);o.setAll(A),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof bA?function(s,i,a){if(!qg(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=FC(s.fieldTransforms,i,a.transformResults),A=i.data;A.setAll(MF(s)),A.setAll(o),i.convertToFoundDocument(a.version,A).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Qf(t,e,r,n){return t instanceof rh?function(i,a,o,A){if(!qg(i.precondition,a))return o;const c=i.value.clone(),u=TC(i.fieldTransforms,A,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof bA?function(i,a,o,A){if(!qg(i.precondition,a))return o;const c=TC(i.fieldTransforms,A,a),u=a.data;return u.setAll(MF(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return qg(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function CM(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=QF(n.transform,s||null);i!=null&&(r===null&&(r=Hs.empty()),r.set(n.field,i))}return r||null}function NC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Fd(n,s,(i,a)=>bM(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rh extends Jw{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bA extends Jw{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function MF(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function FC(t,e,r){const n=new Map;Mt(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,yM(a,o,r[s]))}return n}function TC(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,vM(i,a,e))}return n}class nh extends Jw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Db extends Jw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&_M(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Qf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Qf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=TF();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const A=DF(a,o);A!==null&&n.set(s.key,A),a.isValidDocument()||a.convertToNoDocument(Gt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ur())}isEqual(e){return this.batchId===e.batchId&&Fd(this.mutations,e.mutations,(r,n)=>NC(r,n))&&Fd(this.baseMutations,e.baseMutations,(r,n)=>NC(r,n))}}class Ob{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Mt(e.mutations.length===n.length);let s=function(){return mM}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Ob(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var as,Nr;function HF(t){switch(t){default:return Lt();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function VF(t){if(t===void 0)return ss("GRPC error has no .code"),ze.UNKNOWN;switch(t){case as.OK:return ze.OK;case as.CANCELLED:return ze.CANCELLED;case as.UNKNOWN:return ze.UNKNOWN;case as.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case as.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case as.INTERNAL:return ze.INTERNAL;case as.UNAVAILABLE:return ze.UNAVAILABLE;case as.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case as.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case as.NOT_FOUND:return ze.NOT_FOUND;case as.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case as.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case as.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case as.ABORTED:return ze.ABORTED;case as.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case as.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case as.DATA_LOSS:return ze.DATA_LOSS;default:return Lt()}}(Nr=as||(as={}))[Nr.OK=0]="OK",Nr[Nr.CANCELLED=1]="CANCELLED",Nr[Nr.UNKNOWN=2]="UNKNOWN",Nr[Nr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nr[Nr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nr[Nr.NOT_FOUND=5]="NOT_FOUND",Nr[Nr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nr[Nr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nr[Nr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nr[Nr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nr[Nr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nr[Nr.ABORTED=10]="ABORTED",Nr[Nr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nr[Nr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nr[Nr.INTERNAL=13]="INTERNAL",Nr[Nr.UNAVAILABLE=14]="UNAVAILABLE",Nr[Nr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new Qc([4294967295,4294967295],0);function UC(t){const e=KF().encode(t),r=new zN;return r.update(e),new Uint8Array(r.digest())}function LC(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qc([r,n],0),new Qc([s,i],0)]}class Vb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new df(`Invalid padding: ${r}`);if(n<0)throw new df(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new df(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new df(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Qc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Qc.fromNumber(n)));return s.compare(EM)===1&&(s=new Qc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=UC(e),[n,s]=LC(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Vb(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=UC(e),[n,s]=LC(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Gp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new zp(Gt.min(),s,new hn(sr),Li(),ur())}}class Gp{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Gp(n,r,ur(),ur(),ur())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class zF{constructor(e,r){this.targetId=e,this.me=r}}class GF{constructor(e,r,n=Dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class QC{constructor(){this.fe=0,this.ge=RC(),this.pe=Dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ur(),r=ur(),n=ur();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Lt()}}),new Gp(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=RC()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Li(),this.qe=jC(),this.Qe=new hn(sr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Lt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Vm(i))if(n===0){const a=new It(i.path);this.Ue(r,a,xn.newNoDocument(a,Gt.min()))}else Mt(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),A=o?this.Xe(o,e,a):1;if(A!==0){this.je(r);const c=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Gm==null||Gm.et(function(u,d,p,g,v){var y,S,x,I,N,U;const D={localCacheCount:u,existenceFilterCount:d.count,databaseId:p.database,projectId:p.projectId},P=d.unchangedNames;return P&&(D.bloomFilter={applied:v===0,hashCount:(y=P==null?void 0:P.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(I=(x=(S=P==null?void 0:P.bits)===null||S===void 0?void 0:S.bitmap)===null||x===void 0?void 0:x.length)!==null&&I!==void 0?I:0,padding:(U=(N=P==null?void 0:P.bits)===null||N===void 0?void 0:N.padding)!==null&&U!==void 0?U:0,mightContain:E=>{var _;return(_=g==null?void 0:g.mightContain(E))!==null&&_!==void 0&&_}}),D}(a,e.me,this.Le.tt(),o,A))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=hA(n).toUint8Array()}catch(A){if(A instanceof hF)return aa("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new Vb(a,s,i)}catch(A){return aa(A instanceof df?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Vm(o.target)){const A=new It(o.target.path);this.ke.get(A)!==null||this.it(a,A)||this.Ue(a,A,xn.newNoDocument(A,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=ur();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(A=>{const c=this.Je(A);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new zp(e,r,this.Qe,this.ke,n);return this.ke=Li(),this.qe=jC(),this.Qe=new hn(sr),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new QC,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new en(sr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ct("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new QC),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function jC(){return new hn(It.comparator)}function RC(){return new hn(It.comparator)}const SM={asc:"ASCENDING",desc:"DESCENDING"},NM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FM={and:"AND",or:"OR"};class TM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function L2(t,e){return t.useProto3Json||Mp(e)?e:{value:e}}function Pd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $F(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UM(t,e){return Pd(t,e.toTimestamp())}function is(t){return Mt(!!t),Gt.fromTimestamp(function(r){const n=dA(r);return new kn(n.seconds,n.nanos)}(t))}function Kb(t,e){return Q2(t,e).canonicalString()}function Q2(t,e){const r=function(s){return new Br(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function qF(t){const e=Br.fromString(t);return Mt(sT(e)),e}function vp(t,e){return Kb(t.databaseId,e.path)}function ko(t,e){const r=qF(e);if(r.get(1)!==t.databaseId.projectId)throw new lt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new lt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new It(XF(r))}function WF(t,e){return Kb(t.databaseId,e)}function JF(t){const e=qF(t);return e.length===4?Br.emptyPath():XF(e)}function j2(t){return new Br(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XF(t){return Mt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function PC(t,e,r){return{name:vp(t,e),fields:r.value.mapValue.fields}}function YF(t,e,r){const n=ko(t,e.name),s=is(e.updateTime),i=e.createTime?is(e.createTime):Gt.min(),a=new Hs({mapValue:{fields:e.fields}}),o=xn.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function LM(t,e){return"found"in e?function(n,s){Mt(!!s.found),s.found.name,s.found.updateTime;const i=ko(n,s.found.name),a=is(s.found.updateTime),o=s.found.createTime?is(s.found.createTime):Gt.min(),A=new Hs({mapValue:{fields:s.found.fields}});return xn.newFoundDocument(i,a,o,A)}(t,e):"missing"in e?function(n,s){Mt(!!s.missing),Mt(!!s.readTime);const i=ko(n,s.missing),a=is(s.readTime);return xn.newNoDocument(i,a)}(t,e):Lt()}function QM(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Lt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Mt(u===void 0||typeof u=="string"),Dn.fromBase64String(u||"")):(Mt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Dn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?ze.UNKNOWN:VF(c.code);return new lt(u,c.message||"")}(a);r=new GF(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=ko(t,n.document.name),i=is(n.document.updateTime),a=n.document.createTime?is(n.document.createTime):Gt.min(),o=new Hs({mapValue:{fields:n.document.fields}}),A=xn.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Wg(c,u,A.key,A)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=ko(t,n.document),i=n.readTime?is(n.readTime):Gt.min(),a=xn.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Wg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=ko(t,n.document),i=n.removedTargetIds||[];r=new Wg([],i,s,null)}else{if(!("filter"in e))return Lt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new IM(s,i),o=n.targetId;r=new zF(o,a)}}return r}function yp(t,e){let r;if(e instanceof rh)r={update:PC(t,e.key,e.value)};else if(e instanceof nh)r={delete:vp(t,e.key)};else if(e instanceof bA)r={update:PC(t,e.key,e.data),updateMask:OM(e.fieldMask)};else{if(!(e instanceof Db))return Lt();r={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof jd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Wc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Rd)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Lt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:UM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Lt()}(t,e.precondition)),r}function R2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?En.updateTime(is(i.updateTime)):i.exists!==void 0?En.exists(i.exists):En.none()}(e.currentDocument):En.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let A=null;if("setToServerValue"in o)Mt(o.setToServerValue==="REQUEST_TIME"),A=new jd;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];A=new qc(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];A=new Wc(u)}else"increment"in o?A=new Rd(a,o.increment):Lt();const c=vn.fromServerFormat(o.fieldPath);return new Kp(c,A)}(t,s)):[];if(e.update){e.update.name;const s=ko(t,e.update.name),i=new Hs({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(A){const c=A.fieldPaths||[];return new Ui(c.map(u=>vn.fromServerFormat(u)))}(e.updateMask);return new bA(s,i,a,r,n)}return new rh(s,i,r,n)}if(e.delete){const s=ko(t,e.delete);return new nh(s,r)}if(e.verify){const s=ko(t,e.verify);return new Db(s,r)}return Lt()}function jM(t,e){return t&&t.length>0?(Mt(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?is(s.updateTime):is(i);return a.isEqual(Gt.min())&&(a=is(i)),new BM(a,s.transformResults||[])}(r,e))):[]}function ZF(t,e){return{documents:[WF(t,e.path)]}}function Xw(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=WF(t,s);const i=function(c){if(c.length!==0)return nT(Jr.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:sl(p.field),direction:PM(p.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=L2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function eT(t,e,r,n){const{_t:s,parent:i}=Xw(t,e),a={},o=[];let A=0;return r.forEach(c=>{const u=n?c.alias:"aggregate_"+A++;a[u]=c.alias,c.aggregateType==="count"?o.push({alias:u,count:{}}):c.aggregateType==="avg"?o.push({alias:u,avg:{field:sl(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:u,sum:{field:sl(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:s.structuredQuery},parent:s.parent},ut:a,parent:i}}function tT(t){let e=JF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Mt(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(d){const p=rT(d);return p instanceof Jr&&Qb(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(p=>function(v){return new xp(Pu(v.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(d){let p;return p=typeof d=="object"?d.value:d,Mp(p)?null:p}(r.limit));let A=null;r.startAt&&(A=function(d){const p=!!d.before,g=d.values||[];return new Hl(g,p)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new Hl(g,p)}(r.endAt)),_F(e,s,a,i,o,"F",A,c)}function RM(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function rT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Pu(r.unaryFilter.field);return _r.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Pu(r.unaryFilter.field);return _r.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Pu(r.unaryFilter.field);return _r.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Pu(r.unaryFilter.field);return _r.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Lt()}}(t):t.fieldFilter!==void 0?function(r){return _r.create(Pu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Jr.create(r.compositeFilter.filters.map(n=>rT(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Lt()}}(r.compositeFilter.op))}(t):Lt()}function PM(t){return SM[t]}function DM(t){return NM[t]}function MM(t){return FM[t]}function sl(t){return{fieldPath:t.canonicalString()}}function Pu(t){return vn.fromServerFormat(t.fieldPath)}function nT(t){return t instanceof _r?function(r){if(r.op==="=="){if(yC(r.value))return{unaryFilter:{field:sl(r.field),op:"IS_NAN"}};if(vC(r.value))return{unaryFilter:{field:sl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(yC(r.value))return{unaryFilter:{field:sl(r.field),op:"IS_NOT_NAN"}};if(vC(r.value))return{unaryFilter:{field:sl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(r.field),op:DM(r.op),value:r.value}}}(t):t instanceof Jr?function(r){const n=r.getFilters().map(s=>nT(s));return n.length===1?n[0]:{compositeFilter:{op:MM(r.op),filters:n}}}(t):Lt()}function OM(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function sT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,r,n,s,i=Gt.min(),a=Gt.min(),o=Dn.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(e){return new eA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new eA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.ct=e}}function HM(t,e){let r;if(e.document)r=YF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=It.fromSegments(e.noDocument.path),s=Xc(e.noDocument.readTime);r=xn.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Lt();{const n=It.fromSegments(e.unknownDocument.path),s=Xc(e.unknownDocument.version);r=xn.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new kn(s[0],s[1]);return Gt.fromTimestamp(i)}(e.readTime)),r}function DC(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:$m(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:vp(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Pd(i,a.version.toTimestamp()),createTime:Pd(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Jc(e.version)};else{if(!e.isUnknownDocument())return Lt();n.unknownDocument={path:r.path.toArray(),version:Jc(e.version)}}return n}function $m(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Jc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xc(t){const e=new kn(t.seconds,t.nanoseconds);return Gt.fromTimestamp(e)}function _c(t,e){const r=(e.baseMutations||[]).map(i=>R2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>R2(t.ct,i)),s=kn.fromMillis(e.localWriteTimeMs);return new Mb(e.batchId,s,r,n)}function hf(t){const e=Xc(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Xc(t.lastLimboFreeSnapshotVersion):Gt.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return Mt(i.documents.length===1),Ai(th(JF(i.documents[0])))}(t.query):function(i){return Ai(tT(i))}(t.query),new eA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Dn.fromBase64String(t.resumeToken))}function aT(t,e){const r=Jc(e.snapshotVersion),n=Jc(e.lastLimboFreeSnapshotVersion);let s;s=Vm(e.target)?ZF(t.ct,e.target):Xw(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$c(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function zb(t){const e=tT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zm(e,e.limit,"L"):e}function Ix(t,e){return new Hb(e.largestBatchId,R2(t.ct,e.overlayMutation))}function MC(t,e){const r=e.path.lastSegment();return[t,oi(e.path.popLast()),r]}function OC(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Jc(n.readTime),documentKey:oi(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{getBundleMetadata(e,r){return HC(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:Xc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return HC(e).put(function(s){return{bundleId:s.id,createTime:Jc(is(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return VC(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:zb(i.bundledQuery),readTime:Xc(i.readTime)}}(n)})}saveNamedQuery(e,r){return VC(e).put(function(s){return{name:s.name,readTime:Jc(is(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function HC(t){return ys(t,"bundles")}function VC(t){return ys(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Yw(e,n)}getOverlay(e,r){return Kh(e).get(MC(this.userId,r)).next(n=>n?Ix(this.serializer,n):null)}getOverlays(e,r){const n=Bo();return Qe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Hb(r,a);s.push(this.ht(e,o))}),Qe.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(oi(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Kh(e).j("collectionPathOverlayIndex",o))}),Qe.waitFor(i)}getOverlaysForCollection(e,r,n){const s=Bo(),i=oi(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Kh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const A of o){const c=Ix(this.serializer,A);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=Bo();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Kh(e).J({index:"collectionGroupOverlayIndex",range:o},(A,c,u)=>{const d=Ix(this.serializer,c);i.size()<s||d.largestBatchId===a?(i.set(d.getKey(),d),a=d.largestBatchId):u.done()}).next(()=>i)}ht(e,r){return Kh(e).put(function(s,i,a){const[o,A,c]=MC(i,a.mutation.key);return{userId:i,collectionPath:A,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:yp(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Kh(t){return ys(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{Pt(e){return ys(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Dn.fromUint8Array(n):Dn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Cn(e.integerValue));else if("doubleValue"in e){const n=Cn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),pp(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=dA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(hA(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?fF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):qw(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Lt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Cn(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),It.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Cc.vt=new Cc;function zM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function KC(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=zM(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class GM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=KC(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=KC(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class $M{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class qM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class zh{constructor(){this.jt=new GM,this.Ht=new $M(this.jt),this.Jt=new qM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ic(this.indexId,this.documentKey,this.arrayValue,n)}}function zA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=zC(t.arrayValue,e.arrayValue),r!==0?r:(r=zC(t.directionalValue,e.directionalValue),r!==0?r:It.comparator(t.documentKey,e.documentKey)))}function zC(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.Xt=new en((r,n)=>vn.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Mt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=I2(e);if(r!==void 0&&!this.sn(r))return!1;const n=yc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const A=n[i];if(!this.on(o,A)||!this._n(this.en[a++],A))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new en(vn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new jc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new jc(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new jc(n.field,n.dir==="asc"?0:1)));return new Td(Td.UNKNOWN_ID,this.collectionId,r,Ud.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){var e,r;if(Mt(t instanceof _r||t instanceof Jr),t instanceof _r){if(t instanceof BF){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>_r.create(t.field,"==",i)))||[];return Jr.create(s,"or")}return t}const n=t.filters.map(s=>oT(s));return Jr.create(n,t.op)}function WM(t){if(t.getFilters().length===0)return[];const e=M2(oT(t));return Mt(AT(e)),P2(e)||D2(e)?[e]:e.getFilters()}function P2(t){return t instanceof _r}function D2(t){return t instanceof Jr&&Qb(t)}function AT(t){return P2(t)||D2(t)||function(r){if(r instanceof Jr&&N2(r)){for(const n of r.getFilters())if(!P2(n)&&!D2(n))return!1;return!0}return!1}(t)}function M2(t){if(Mt(t instanceof _r||t instanceof Jr),t instanceof _r)return t;if(t.filters.length===1)return M2(t.filters[0]);const e=t.filters.map(n=>M2(n));let r=Jr.create(e,t.op);return r=qm(r),AT(r)?r:(Mt(r instanceof Jr),Mt(Qd(r)),Mt(r.filters.length>1),r.filters.reduce((n,s)=>Gb(n,s)))}function Gb(t,e){let r;return Mt(t instanceof _r||t instanceof Jr),Mt(e instanceof _r||e instanceof Jr),r=t instanceof _r?e instanceof _r?function(s,i){return Jr.create([s,i],"and")}(t,e):$C(t,e):e instanceof _r?$C(e,t):function(s,i){if(Mt(s.filters.length>0&&i.filters.length>0),Qd(s)&&Qd(i))return vF(s,i.getFilters());const a=N2(s)?s:i,o=N2(s)?i:s,A=a.filters.map(c=>Gb(c,o));return Jr.create(A,"or")}(t,e),qm(r)}function $C(t,e){if(Qd(e))return vF(e,t.getFilters());{const r=e.filters.map(n=>Gb(t,n));return Jr.create(r,"or")}}function qm(t){if(Mt(t instanceof _r||t instanceof Jr),t instanceof _r)return t;const e=t.getFilters();if(e.length===1)return qm(e[0]);if(wF(t))return t;const r=e.map(s=>qm(s)),n=[];return r.forEach(s=>{s instanceof _r?n.push(s):s instanceof Jr&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Jr.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.un=new $b}addToCollectionParentIndex(e,r){return this.un.add(r),Qe.resolve()}getCollectionParents(e,r){return Qe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Qe.resolve()}deleteFieldIndex(e,r){return Qe.resolve()}deleteAllFieldIndexes(e){return Qe.resolve()}createTargetIndexes(e,r){return Qe.resolve()}getDocumentsMatchingTarget(e,r){return Qe.resolve(null)}getIndexType(e,r){return Qe.resolve(0)}getFieldIndexes(e,r){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,r){return Qe.resolve(oa.min())}getMinOffsetFromCollectionGroup(e,r){return Qe.resolve(oa.min())}updateCollectionGroup(e,r,n){return Qe.resolve()}updateIndexEntries(e,r){return Qe.resolve()}}class $b{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new en(Br.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new en(Br.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Uint8Array(0);class XM{constructor(e,r){this.databaseId=r,this.cn=new $b,this.ln=new yA(n=>$c(n),(n,s)=>Op(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:oi(s)};return qC(e).put(i)}return Qe.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[eF(r),""],!1,!0);return qC(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(bo(a.parent))}return n})}addFieldIndex(e,r){const n=Gh(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=_u(e);return i.next(o=>{a.put(OC(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Gh(e),s=_u(e),i=Bu(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Gh(e),n=Bu(e),s=_u(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Qe.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new GC(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=Bu(e);let s=!0;const i=new Map;return Qe.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=ur();const o=[];return Qe.forEach(i,(A,c)=>{ct("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(A)} to execute ${$c(r)}`);const u=function(N,U){const D=I2(U);if(D===void 0)return null;for(const P of Km(N,D.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(c,A),d=function(N,U){const D=new Map;for(const P of yc(U))for(const E of Km(N,P.fieldPath))switch(E.op){case"==":case"in":D.set(P.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return D.set(P.fieldPath.canonicalString(),E.value),Array.from(D.values())}return null}(c,A),p=function(N,U){const D=[];let P=!0;for(const E of yc(U)){const _=E.kind===0?IC(N,E.fieldPath,N.startAt):EC(N,E.fieldPath,N.startAt);D.push(_.value),P&&(P=_.inclusive)}return new Hl(D,P)}(c,A),g=function(N,U){const D=[];let P=!0;for(const E of yc(U)){const _=E.kind===0?EC(N,E.fieldPath,N.endAt):IC(N,E.fieldPath,N.endAt);D.push(_.value),P&&(P=_.inclusive)}return new Hl(D,P)}(c,A),v=this.In(A,c,p),y=this.In(A,c,g),S=this.Tn(A,c,d),x=this.En(A.indexId,u,v,p.inclusive,y,g.inclusive,S);return Qe.forEach(x,I=>n.G(I,r.limit).next(N=>{N.forEach(U=>{const D=It.fromSegments(U.documentKey);a.has(D)||(a=a.add(D),o.push(D))})}))}).next(()=>o)}return Qe.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=WM(Jr.create(e.filters,"and")).map(n=>T2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const A=(r!=null?r.length:1)*Math.max(n.length,i.length),c=A/(r!=null?r.length:1),u=[];for(let d=0;d<A;++d){const p=r?this.dn(r[d/c]):z0,g=this.An(e,p,n[d%c],s),v=this.Rn(e,p,i[d%c],a),y=o.map(S=>this.An(e,p,S,!0));u.push(...this.createRange(g,v,y))}return u}An(e,r,n,s){const i=new Ic(e,It.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new Ic(e,It.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new GC(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Qe.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(A){let c=new en(vn.comparator),u=!1;for(const d of A.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?u=!0:c=c.add(p.field));for(const d of A.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new zh;for(const s of yc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);Cc.vt.It(i,a)}return n.zt()}dn(e){const r=new zh;return Cc.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new zh;return Cc.vt.It(Gc(this.databaseId,r),n.Yt(function(i){const a=yc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new zh);let i=0;for(const a of yc(e)){const o=n[i++];for(const A of s)if(this.fn(r,a.fieldPath)&&wp(o))s=this.gn(s,a,o);else{const c=A.Yt(a.kind);Cc.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const A=new zh;A.seed(o.zt()),Cc.vt.It(a,A.Yt(r.kind)),i.push(A)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof _r&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Gh(e),s=_u(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Qe.forEach(i,o=>s.get([o.indexId,this.uid]).next(A=>{a.push(function(u,d){const p=d?new Ud(d.sequenceNumber,new oa(Xc(d.readTime),new It(bo(d.documentKey)),d.largestBatchId)):Ud.empty(),g=u.fields.map(([v,y])=>new jc(vn.fromServerFormat(v),y));return new Td(u.indexId,u.collectionGroup,g,p)}(o,A))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:sr(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Gh(e),i=_u(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Qe.forEach(o,A=>i.put(OC(A.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Qe.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Qe.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Qe.forEach(o,A=>this.wn(e,s,A).next(c=>{const u=this.Sn(i,A);return c.isEqual(u)?Qe.resolve():this.bn(e,i,A,c,u)}))))})}Dn(e,r,n,s){return Bu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return Bu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=Bu(e);let i=new en(zA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new Ic(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new en(zA);const s=this.Vn(r,e);if(s==null)return n;const i=I2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(wp(a))for(const o of a.arrayValue.values||[])n=n.add(new Ic(r.indexId,e.key,this.dn(o),s))}else n=n.add(new Ic(r.indexId,e.key,z0,s));return n}bn(e,r,n,s,i){ct("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(A,c,u,d,p){const g=A.getIterator(),v=c.getIterator();let y=bu(g),S=bu(v);for(;y||S;){let x=!1,I=!1;if(y&&S){const N=u(y,S);N<0?I=!0:N>0&&(x=!0)}else y!=null?I=!0:x=!0;x?(d(S),S=bu(v)):I?(p(y),y=bu(g)):(y=bu(g),S=bu(v))}}(s,i,zA,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Qe.waitFor(a)}yn(e){let r=1;return _u(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>zA(a,o)).filter((a,o,A)=>!o||zA(a,A[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=zA(a,e),A=zA(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&A<0)s.push(a),s.push(a.Zt());else if(A>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,z0,[]],A=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,z0,[]];i.push(IDBKeyRange.bound(o,A))}return i}Cn(e,r){return zA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(WC)}getMinOffset(e,r){return Qe.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Lt())).next(WC)}}function qC(t){return ys(t,"collectionParents")}function Bu(t){return ys(t,"indexEntries")}function Gh(t){return ys(t,"indexConfiguration")}function _u(t){return ys(t,"indexState")}function WC(t){Mt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Tb(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new oa(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ni{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ni(e,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const A=n.J({range:a},(u,d,p)=>(o++,p.delete()));i.push(A.next(()=>{Mt(o===1)}));const c=[];for(const u of r.mutations){const d=oF(e,u.key.path,r.batchId);i.push(s.delete(d)),c.push(u.key)}return Qe.waitFor(i).next(()=>c)}function Wm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Lt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni.DEFAULT_COLLECTION_PERCENTILE=10,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ni.DEFAULT=new ni(41943040,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ni.DISABLED=new ni(-1,0,0);class Zw{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Mt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Zw(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return GA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Du(e),a=GA(e);return a.add({}).next(o=>{Mt(typeof o=="number");const A=new Mb(o,r,n,s),c=function(g,v,y){const S=y.baseMutations.map(I=>yp(g.ct,I)),x=y.mutations.map(I=>yp(g.ct,I));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:S,mutations:x}}(this.serializer,this.userId,A),u=[];let d=new en((p,g)=>sr(p.canonicalString(),g.canonicalString()));for(const p of s){const g=oF(this.userId,p.key.path,o);d=d.add(p.key.path.popLast()),u.push(a.put(c)),u.push(i.put(g,P8))}return d.forEach(p=>{u.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[o]=A.keys()}),Qe.waitFor(u).next(()=>A)})}lookupMutationBatch(e,r){return GA(e).get(r).next(n=>n?(Mt(n.userId===this.userId),_c(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Qe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return GA(e).J({index:"userMutationsIndex",range:s},(a,o,A)=>{o.userId===this.userId&&(Mt(o.batchId>=n),i=_c(this.serializer,o)),A.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return GA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return GA(e).U("userMutationsIndex",r).next(n=>n.map(s=>_c(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Kg(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Du(e).J({range:s},(a,o,A)=>{const[c,u,d]=a,p=bo(u);if(c===this.userId&&r.path.isEqual(p))return GA(e).get(d).next(g=>{if(!g)throw Lt();Mt(g.userId===this.userId),i.push(_c(this.serializer,g))});A.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new en(sr);const s=[];return r.forEach(i=>{const a=Kg(this.userId,i.path),o=IDBKeyRange.lowerBound(a),A=Du(e).J({range:o},(c,u,d)=>{const[p,g,v]=c,y=bo(g);p===this.userId&&i.path.isEqual(y)?n=n.add(v):d.done()});s.push(A)}),Qe.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=Kg(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new en(sr);return Du(e).J({range:a},(A,c,u)=>{const[d,p,g]=A,v=bo(p);d===this.userId&&n.isPrefixOf(v)?v.length===s&&(o=o.add(g)):u.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(GA(e).get(i).next(a=>{if(a===null)throw Lt();Mt(a.userId===this.userId),n.push(_c(this.serializer,a))}))}),Qe.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return lT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Qe.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Qe.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Du(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const A=bo(i[1]);s.push(A)}else o.done()}).next(()=>{Mt(s.length===0)})})}containsKey(e,r){return cT(e,this.userId,r)}Nn(e){return uT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cT(t,e,r){const n=Kg(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Du(t).J({range:i,H:!0},(o,A,c)=>{const[u,d,p]=o;u===e&&d===s&&(a=!0),c.done()}).next(()=>a)}function GA(t){return ys(t,"mutations")}function Du(t){return ys(t,"documentMutations")}function uT(t){return ys(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yc(0)}static kn(){return new Yc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Yc(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Gt.fromTimestamp(new kn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Cu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Mt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Cu(e).J((a,o)=>{const A=hf(o);A.sequenceNumber<=r&&n.get(A.targetId)===null&&(s++,i.push(this.removeTargetData(e,A)))}).next(()=>Qe.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Cu(e).J((n,s)=>{const i=hf(s);r(i)})}qn(e){return XC(e).get("targetGlobalKey").next(r=>(Mt(r!==null),r))}Qn(e,r){return XC(e).put("targetGlobalKey",r)}Kn(e,r){return Cu(e).put(aT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=$c(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Cu(e).J({range:s,index:"queryTargetsIndex"},(a,o,A)=>{const c=hf(o);Op(r,c.target)&&(i=c,A.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=il(e);return r.forEach(a=>{const o=oi(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Qe.waitFor(s)}removeMatchingKeys(e,r,n){const s=il(e);return Qe.forEach(r,i=>{const a=oi(i.path);return Qe.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=il(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=il(e);let i=ur();return s.J({range:n,H:!0},(a,o,A)=>{const c=bo(a[1]),u=new It(c);i=i.add(u)}).next(()=>i)}containsKey(e,r){const n=oi(r.path),s=IDBKeyRange.bound([n],[eF(n)],!1,!0);let i=0;return il(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],A,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return Cu(e).get(r).next(n=>n?hf(n):null)}}function Cu(t){return ys(t,"targets")}function XC(t){return ys(t,"targetGlobal")}function il(t){return ys(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC([t,e],[r,n]){const s=sr(t,r);return s===0?sr(e,n):s}class ZM{constructor(e){this.Un=e,this.buffer=new en(YC),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();YC(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class dT{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ct("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ec(r)?ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Zl(r)}await this.Hn(3e5)})}}class eO{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Qe.resolve(Ti.oe);const n=new ZM(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(JC)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JC):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,A,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,a=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,r))).next(d=>(i=d,A=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(c=Date.now(),ju()<=br.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(A-o)+`ms
	Removed ${d} documents in `+(c-A)+`ms
Total Duration: ${c-u}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function hT(t,e){return new eO(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,r){this.db=e,this.garbageCollector=hT(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return G0(e,n)}removeReference(e,r,n){return G0(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return G0(e,r)}nr(e,r){return function(s,i){let a=!1;return uT(s).Y(o=>cT(s,o,i).next(A=>(A&&(a=!0),Qe.resolve(!A)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const A=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,Gt.min()),il(e).delete(function(d){return[0,oi(d.path)]}(a))))});s.push(A)}}).next(()=>Qe.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return G0(e,r)}tr(e,r){const n=il(e);let s,i=Ti.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:A,sequenceNumber:c})=>{a===0?(i!==Ti.oe&&r(new It(bo(s)),i),i=c,s=A):i=Ti.oe}).next(()=>{i!==Ti.oe&&r(new It(bo(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function G0(t,e){return il(t).put(function(n,s){return{targetId:0,path:oi(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.changes=new yA(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Qe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return gc(e).put(n)}removeEntry(e,r,n){return gc(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],$m(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=xn.newInvalidDocument(r);return gc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($h(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:xn.newInvalidDocument(r)};return gc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($h(r))},(s,i)=>{n={document:this.ir(r,i),size:Wm(i)}}).next(()=>n)}getEntries(e,r){let n=Li();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=Li(),s=new hn(It.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,Wm(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Qe.resolve();let s=new en(tI);r.forEach(A=>s=s.add(A));const i=IDBKeyRange.bound($h(s.first()),$h(s.last())),a=s.getIterator();let o=a.getNext();return gc(e).J({index:"documentKeyIndex",range:i},(A,c,u)=>{const d=It.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&tI(o,d)<0;)n(o,null),o=a.getNext();o&&o.isEqual(d)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?u.$($h(o)):u.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),$m(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],A=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gc(e).U(IDBKeyRange.bound(o,A,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=Li();for(const d of c){const p=this.ir(It.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(Vp(r,p)||s.has(p.key))&&(u=u.insert(p.key,p))}return u})}getAllFromCollectionGroup(e,r,n,s){let i=Li();const a=eI(r,n),o=eI(r,oa.max());return gc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(A,c,u)=>{const d=this.ir(It.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(d.key,d),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new nO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return ZC(e).get("remoteDocumentGlobalKey").next(r=>(Mt(!!r),r))}rr(e,r){return ZC(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=HM(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Gt.min())))return n}return xn.newInvalidDocument(e)}}function pT(t){return new rO(t)}class nO extends fT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new yA(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new en((i,a)=>sr(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const A=DC(this.cr.serializer,a);s=s.add(i.path.popLast());const c=Wm(A);n+=c-o.size,r.push(this.cr.addEntry(e,i,A))}else if(n-=o.size,this.trackRemovals){const A=DC(this.cr.serializer,a.convertToNoDocument(Gt.min()));r.push(this.cr.addEntry(e,i,A))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Qe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function ZC(t){return ys(t,"remoteDocumentGlobal")}function gc(t){return ys(t,"remoteDocumentsV14")}function $h(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eI(t,e){const r=e.documentKey.path.toArray();return[t,$m(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function tI(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=sr(r[i],n[i]),s)return s;return s=sr(r.length,n.length),s||(s=sr(r[r.length-2],n[n.length-2]),s||sr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Qf(n.mutation,s,Ui.empty(),kn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ur()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ur()){const s=Bo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=uf();return i.forEach((o,A)=>{a=a.insert(o,A.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Bo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ur()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Li();const a=Lf(),o=function(){return Lf()}();return r.forEach((A,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof bA)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Qf(u.mutation,c,u.mutation.getFieldMask(),kn.now())):a.set(c.key,Ui.empty())}),this.recalculateAndSaveOverlays(e,i).next(A=>(A.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new sO(u,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Lf();let s=new hn((a,o)=>a-o),i=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(A=>{const c=r.get(A);if(c===null)return;let u=n.get(A)||Ui.empty();u=o.applyToLocalView(c,u),n.set(A,u);const d=(s.get(o.batchId)||ur()).add(A);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),c=A.key,u=A.value,d=TF();u.forEach(p=>{if(!i.has(p)){const g=DF(r.get(p),n.get(p));g!==null&&d.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Qe.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return It.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):jb(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Qe.resolve(Bo());let o=-1,A=i;return a.next(c=>Qe.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?Qe.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{A=A.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,A,c,ur())).next(u=>({batchId:o,changes:FF(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new It(r)).next(n=>{let s=uf();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=uf();return this.indexManager.getCollectionParents(e,i).next(o=>Qe.forEach(o,A=>{const c=function(d,p){return new vA(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,A.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,p)=>{a=a.insert(d,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((A,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,xn.newInvalidDocument(u)))});let o=uf();return a.forEach((A,c)=>{const u=i.get(A);u!==void 0&&Qf(u.mutation,c,Ui.empty(),kn.now()),Vp(r,c)&&(o=o.insert(A,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Qe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:is(s.createTime)}}(r)),Qe.resolve()}getNamedQuery(e,r){return Qe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:zb(s.bundledQuery),readTime:is(s.readTime)}}(r)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.overlays=new hn(It.comparator),this.Ir=new Map}getOverlay(e,r){return Qe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Bo();return Qe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Qe.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Qe.resolve()}getOverlaysForCollection(e,r,n){const s=Bo(),i=r.length+1,a=new It(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,c=A.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&A.largestBatchId>n&&s.set(A.getKey(),A)}return Qe.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new hn((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Bo(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Bo(),A=i.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Qe.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Hb(r,n));let i=this.Ir.get(r);i===void 0&&(i=ur(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return Qe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Qe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.Tr=new en(Cs.Er),this.dr=new en(Cs.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Cs(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Cs(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new It(new Br([])),n=new Cs(r,e),s=new Cs(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new It(new Br([])),n=new Cs(r,e),s=new Cs(r,e+1);let i=ur();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new Cs(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Cs{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return It.comparator(e.key,r.key)||sr(e.wr,r.wr)}static Ar(e,r){return sr(e.wr,r.wr)||It.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new en(Cs.Er)}checkEmpty(e){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Mb(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Cs(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Qe.resolve(a)}lookupMutationBatch(e,r){return Qe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Qe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Cs(r,0),s=new Cs(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Qe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new en(sr);return r.forEach(s=>{const i=new Cs(s,0),a=new Cs(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Qe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;It.isDocumentKey(i)||(i=i.child(""));const a=new Cs(new It(i),0);let o=new en(sr);return this.br.forEachWhile(A=>{const c=A.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(A.wr)),!0)},a),Qe.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Mt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Qe.forEach(r.mutations,s=>{const i=new Cs(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Cs(r,0),s=this.br.firstAfterOrEqual(n);return Qe.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.Mr=e,this.docs=function(){return new hn(It.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Qe.resolve(n?n.document.mutableCopy():xn.newInvalidDocument(r))}getEntries(e,r){let n=Li();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():xn.newInvalidDocument(s))}),Qe.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Li();const a=r.path,o=new It(a.child("")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:c,value:{document:u}}=A.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Tb(rF(u),n)<=0||(s.has(u.key)||Vp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Qe.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Lt()}Or(e,r){return Qe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new cO(this)}getSize(e){return Qe.resolve(this.size)}}class cO extends fT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Qe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.persistence=e,this.Nr=new yA(r=>$c(r),Op),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qb,this.targetCount=0,this.kr=Yc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Qe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Yc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Qe.resolve()}updateTargetData(e,r){return this.Kn(r),Qe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Qe.waitFor(i).next(()=>s)}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Qe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Qe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Qe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Qe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Qe.resolve(n)}containsKey(e,r){return Qe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ti(0),this.Kr=!1,this.Kr=!0,this.$r=new oO,this.referenceDelegate=e(this),this.Ur=new uO(this),this.indexManager=new JM,this.remoteDocumentCache=function(s){return new lO(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new iT(r),this.Gr=new iO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new aO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new AO(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ct("MemoryPersistence","Starting transaction:",e);const s=new dO(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Qe.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class dO extends sF{constructor(e){super(),this.currentSequenceNumber=e}}class e1{constructor(e){this.persistence=e,this.Jr=new qb,this.Yr=null}static Zr(e){return new e1(e)}get Xr(){if(this.Yr)return this.Yr;throw Lt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Qe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Qe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Qe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Xr,n=>{const s=It.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Gt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Qe.or([()=>Qe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Jm{constructor(e,r){this.persistence=e,this.ti=new yA(n=>oi(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=hT(this,r)}static Zr(e,r){return new Jm(e,r)}zr(){}jr(e){return Qe.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return Qe.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(i=>i?Qe.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Or(e,a=>this.nr(e,a,r).next(o=>{o||(n++,i.removeEntry(a,Gt.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),Qe.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Qe.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Qe.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),Qe.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Gg(e.data.value)),r}nr(e,r,n){return Qe.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return Qe.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.serializer=e}O(e,r,n,s){const i=new zw("createOrUpgrade",r);n<1&&s>=1&&(function(A){A.createObjectStore("owner")}(e),function(A){A.createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pC,{unique:!0}),A.createObjectStore("documentMutations")}(e),rI(e),function(A){A.createObjectStore("remoteDocuments")}(e));let a=Qe.resolve();return n<3&&s>=3&&(n!==0&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),rI(e)),a=a.next(()=>function(A){const c=A.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gt.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(A,c){return c.store("mutations").U().next(u=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pC,{unique:!0});const d=c.store("mutations"),p=u.map(g=>d.put(g));return Qe.waitFor(p)})}(e,i))),a=a.next(()=>{(function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(A){const c=A.createObjectStore("documentOverlays",{keyPath:J8});c.createIndex("collectionPathOverlayIndex",X8,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Y8,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(A){const c=A.createObjectStore("remoteDocumentsV14",{keyPath:D8});c.createIndex("documentKeyIndex",M8),c.createIndex("collectionGroupIndex",O8)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:G8}).createIndex("sequenceNumberIndex",$8,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:q8}).createIndex("documentKeyIndex",W8,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(A){A.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Wm(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Qe.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Qe.forEach(o,A=>{Mt(A.userId===i.userId);const c=_c(this.serializer,A);return lT(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const A=new Br(a),c=function(d){return[0,oi(d)]}(A);i.push(r.get(c).next(u=>u?Qe.resolve():(d=>r.put({targetId:0,path:oi(d),sequenceNumber:s.highestListenSequenceNumber}))(A)))}).next(()=>Qe.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:z8});const n=r.store("collectionParents"),s=new $b,i=a=>{if(s.add(a)){const o=a.lastSegment(),A=a.popLast();return n.put({collectionId:o,parent:oi(A)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const A=new Br(a);return i(A.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,A],c)=>{const u=bo(o);return i(u.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=hf(s),a=aT(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),A=function(d){return d.document?new It(Br.fromString(d.document.name).popFirst(5)):d.noDocument?It.fromSegments(d.noDocument.path):d.unknownDocument?It.fromSegments(d.unknownDocument.path):Lt()}(a).path.toArray(),c={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Qe.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=pT(this.serializer),i=new Wb(e1.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(A=>{var c;let u=(c=o.get(A.userId))!==null&&c!==void 0?c:ur();_c(this.serializer,A).keys().forEach(d=>u=u.add(d)),o.set(A.userId,u)}),Qe.forEach(o,(A,c)=>{const u=new Es(c),d=Yw.lt(this.serializer,u),p=i.getIndexManager(u),g=Zw.lt(u,this.serializer,p,i.referenceDelegate);return new gT(s,g,d,p).recalculateAndSaveOverlaysForDocumentKeys(new E2(r,Ti.oe),A).next()})})}}function rI(t){t.createObjectStore("targetDocuments",{keyPath:V8}).createIndex("documentTargetsIndex",K8,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",H8,{unique:!0}),t.createObjectStore("targetGlobal")}const Ex="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jb{constructor(e,r,n,s,i,a,o,A,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Jb.D())throw new lt(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tO(this,s),this.Ai=r+"main",this.serializer=new iT(A),this.Ri=new Eo(this.Ai,this.hi,new hO(this.serializer)),this.$r=new KM,this.Ur=new YM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pT(this.serializer),this.Gr=new VM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&ss("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new lt(ze.FAILED_PRECONDITION,Ex);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ti(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ec(e))return ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return qh(e).get("owner").next(r=>Qe.resolve(this.vi(r)))}Ci(e){return $0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=ys(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Qe.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Qe.resolve(!0):qh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new lt(ze.FAILED_PRECONDITION,Ex);return!1}}return!(!this.networkEnabled||!this.inForeground)||$0(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&ct("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new E2(e,Ti.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>$0(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Zw.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new XM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yw.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ct("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(A){return A===17?tM:A===16?eM:A===15?Lb:A===14?cF:A===13?lF:A===12?Z8:A===11?AF:void Lt()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new E2(o,this.Qr?this.Qr.next():Ti.oe),r==="readwrite-primary"?this.wi(a).next(A=>!!A||this.Si(a)).next(A=>{if(!A)throw ss(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new lt(ze.FAILED_PRECONDITION,nF);return n(a)}).next(A=>this.Di(a).next(()=>A)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return qh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new lt(ze.FAILED_PRECONDITION,Ex)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qh(e).put("owner",r)}static D(){return Eo.D()}bi(e){const r=qh(e);return r.get("owner").next(n=>this.vi(n)?(ct("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Qe.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ss(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;PN()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ct("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ss("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ss("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qh(t){return ys(t,"owner")}function $0(t){return ys(t,"clientMetadata")}function Xb(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=ur(),s=ur();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Yb(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PN()?8:iF(vs())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new fO;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(ju()<=br.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",Ru(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Qe.resolve()):(ju()<=br.DEBUG&&ct("QueryEngine","Query:",Ru(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(ju()<=br.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",Ru(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(r))):Qe.resolve())}Yi(e,r){if(kC(r))return Qe.resolve(null);let n=Ai(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=zm(r,null,"F"),n=Ai(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=ur(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(A=>{const c=this.ts(r,o);return this.ns(r,c,a,A.readTime)?this.Yi(e,zm(r,null,"F")):this.rs(e,c,r,A)}))})))}Zi(e,r,n,s){return kC(r)||s.isEqual(Gt.min())?Qe.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Qe.resolve(null):(ju()<=br.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ru(r)),this.rs(e,a,r,tF(s,-1)).next(o=>o))})}ts(e,r){let n=new en(SF(e));return r.forEach((s,i)=>{Vp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return ju()<=br.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",Ru(r)),this.Ji.getDocumentsMatchingQuery(e,r,oa.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new hn(sr),this._s=new yA(i=>$c(i),Op),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function wT(t,e,r,n){return new pO(t,e,r,n)}async function xT(t,e){const r=Bt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let A=ur();for(const c of s){a.push(c.batchId);for(const u of c.mutations)A=A.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)A=A.add(u.key)}return r.localDocuments.getDocuments(n,A).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function gO(t,e){const r=Bt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,A,c,u){const d=c.batch,p=d.keys();let g=Qe.resolve();return p.forEach(v=>{g=g.next(()=>u.getEntry(A,v)).next(y=>{const S=c.docVersions.get(v);Mt(S!==null),y.version.compareTo(S)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(A,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let A=ur();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(A=A.add(o.batch.mutations[c].key));return A}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function vT(t){const e=Bt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function mO(t,e){const r=Bt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,d)=>{const p=s.get(d);if(!p)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,d)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Dn.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,n)),s=s.insert(d,g),function(y,S,x){return y.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,g,u)&&o.push(r.Ur.updateTargetData(i,g))});let A=Li(),c=ur();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(yT(i,a,e.documentUpdates).next(u=>{A=u.Ps,c=u.Is})),!n.isEqual(Gt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Qe.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,A,c)).next(()=>A)}).then(i=>(r.os=s,i))}function yT(t,e,r){let n=ur(),s=ur();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Li();return r.forEach((o,A)=>{const c=i.get(o);A.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),A.isNoDocument()&&A.version.isEqual(Gt.min())?(e.removeEntry(o,A.readTime),a=a.insert(o,A)):!c.isValidDocument()||A.version.compareTo(c.version)>0||A.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(A),a=a.insert(o,A)):ct("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",A.version)}),{Ps:a,Is:s}})}function wO(t,e){const r=Bt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Dd(t,e){const r=Bt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Qe.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new eA(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Md(t,e,r){const n=Bt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ec(a))throw a;ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Xm(t,e,r){const n=Bt(t);let s=Gt.min(),i=ur();return n.persistence.runTransaction("Execute query","readwrite",a=>function(A,c,u){const d=Bt(A),p=d._s.get(u);return p!==void 0?Qe.resolve(d.os.get(p)):d.Ur.getTargetData(c,u)}(n,a,Ai(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(A=>{i=A})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Gt.min(),r?i:ur())).next(o=>(_T(n,kF(e),o),{documents:o,Ts:i})))}function bT(t,e){const r=Bt(t),n=Bt(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",i=>n.ot(i,e).next(a=>a?a.target:null))}function BT(t,e){const r=Bt(t),n=r.us.get(e)||Gt.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,tF(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(_T(r,e,s),s))}function _T(t,e,r){let n=t.us.get(e)||Gt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}async function xO(t,e,r,n){const s=Bt(t);let i=ur(),a=Li();for(const c of r){const u=e.Es(c.metadata.name);c.document&&(i=i.add(u));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),a=a.insert(u,d)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),A=await Dd(s,function(u){return Ai(th(Br.fromString(`__bundle__/docs/${u}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>yT(c,o,a).next(u=>(o.apply(c),u)).next(u=>s.Ur.removeMatchingKeysForTargetId(c,A.targetId).next(()=>s.Ur.addMatchingKeys(c,i,A.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))}async function vO(t,e,r=ur()){const n=await Dd(t,Ai(zb(e.bundledQuery))),s=Bt(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const a=is(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return s.Gr.saveNamedQuery(i,e);const o=n.withResumeToken(Dn.EMPTY_BYTE_STRING,a);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(i,o).next(()=>s.Ur.removeMatchingKeysForTargetId(i,n.targetId)).next(()=>s.Ur.addMatchingKeys(i,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(i,e))})}function nI(t,e){return`firestore_clients_${t}_${e}`}function sI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function kx(t,e){return`firestore_targets_${t}_${e}`}class Ym{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let i,a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string",a&&(i=new lt(s.error.code,s.error.message))),a?new Ym(e,r,s.state,i):(ss("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(s=new lt(n.error.code,n.error.message))),i?new jf(e,n.state,s):(ss("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zm{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,i=Rb();for(let a=0;s&&a<n.activeTargetIds.length;++a)s=aF(n.activeTargetIds[a]),i=i.add(n.activeTargetIds[a]);return s?new Zm(e,i):(ss("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Zb{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Zb(r.clientId,r.onlineState):(ss("SharedClientState",`Failed to parse online state: ${e}`),null)}}class O2{constructor(){this.activeTargetIds=Rb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sx{constructor(e,r,n,s,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new hn(sr),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=nI(this.persistenceKey,this.ps),this.vs=function(A){return`firestore_sequence_number_${A}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new O2),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(A){return`firestore_online_state_${A}`}(this.persistenceKey),this.Os=function(A){return`firestore_bundle_loaded_v2_${A}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(nI(this.persistenceKey,n));if(s){const i=Zm.Rs(n,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(kx(this.persistenceKey,e));if(s){const i=jf.Rs(e,s);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kx(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ct("SharedClientState","READ",e,r),r}setItem(e,r){ct("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ct("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ss("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(i){let a=Ti.oe;if(i!=null)try{const o=JSON.parse(i);Mt(typeof o=="number"),a=o}catch(o){ss("SharedClientState","Failed to read sequence number from WebStorage",o)}return a}(r.newValue);n!==Ti.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new Ym(this.currentUser,e,r,n),i=sI(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const r=sI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=kx(this.persistenceKey,e),i=new jf(e,r,n);this.setItem(s,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Zm.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Ym.Rs(new Es(i),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return jf.Rs(s,r)}Ls(e){return Zb.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(n),a=[],o=[];return i.forEach(A=>{s.has(A)||a.push(A)}),s.forEach(A=>{i.has(A)||o.push(A)}),this.syncEngine.io(a,o).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Rb();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class CT{constructor(){this.so=new O2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new O2,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q0=null;function Nx(){return q0===null?q0=function(){return 268435456+Math.round(2147483648*Math.random())}():q0++,"0x"+q0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="WebChannelConnection";class _O extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=Nx(),A=this.xo(r,n.toUriEncodedString());ct("RestConnection",`Sending RPC '${r}' ${o}:`,A,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,A,c,s).then(u=>(ct("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw aa("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",A,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eh}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=bO[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=Nx();return new Promise((a,o)=>{const A=new GN;A.setWithCredentials(!0),A.listenOnce($N.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Vg.NO_ERROR:const u=A.getResponseJson();ct(Js,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Vg.TIMEOUT:ct(Js,`RPC '${e}' ${i} timed out`),o(new lt(ze.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const d=A.getStatus();if(ct(Js,`RPC '${e}' ${i} failed with status:`,d,"response text:",A.getResponseText()),d>0){let p=A.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(x)>=0?x:ze.UNKNOWN}(g.status);o(new lt(v,g.message))}else o(new lt(ze.UNKNOWN,"Server responded with status "+A.getStatus()))}else o(new lt(ze.UNAVAILABLE,"Connection failed."));break;default:Lt()}}finally{ct(Js,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ct(Js,`RPC '${e}' ${i} sending request:`,s),A.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=Nx(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=JN(),o=WN(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(A.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(A.useFetchStreams=!0),this.Oo(A.initMessageHeaders,r,n),A.encodeInitMessageHeaders=!0;const u=i.join("");ct(Js,`Creating RPC '${e}' stream ${s}: ${u}`,A);const d=a.createWebChannel(u,A);let p=!1,g=!1;const v=new BO({Io:S=>{g?ct(Js,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(p||(ct(Js,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),ct(Js,`RPC '${e}' stream ${s} sending:`,S),d.send(S))},To:()=>d.close()}),y=(S,x,I)=>{S.listen(x,N=>{try{I(N)}catch(U){setTimeout(()=>{throw U},0)}})};return y(d,cf.EventType.OPEN,()=>{g||(ct(Js,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),y(d,cf.EventType.CLOSE,()=>{g||(g=!0,ct(Js,`RPC '${e}' stream ${s} transport closed`),v.So())}),y(d,cf.EventType.ERROR,S=>{g||(g=!0,aa(Js,`RPC '${e}' stream ${s} transport errored:`,S),v.So(new lt(ze.UNAVAILABLE,"The operation could not be completed")))}),y(d,cf.EventType.MESSAGE,S=>{var x;if(!g){const I=S.data[0];Mt(!!I);const N=I,U=N.error||((x=N[0])===null||x===void 0?void 0:x.error);if(U){ct(Js,`RPC '${e}' stream ${s} received error:`,U);const D=U.status;let P=function(B){const Q=as[B];if(Q!==void 0)return VF(Q)}(D),E=U.message;P===void 0&&(P=ze.INTERNAL,E="Unknown error status: "+D+" with message "+U.message),g=!0,v.So(new lt(P,E)),d.close()}else ct(Js,`RPC '${e}' stream ${s} received:`,I),v.bo(I)}}),y(o,qN.STAT_EVENT,S=>{S.stat===C2.PROXY?ct(Js,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===C2.NOPROXY&&ct(Js,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return typeof window<"u"?window:null}function Jg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){return new TM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ct("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,r,n,s,i,a,o,A){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eB(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ze.RESOURCE_EXHAUSTED?(ss(r.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ze.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new lt(ze.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CO extends ET{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=QM(this.serializer,e),n=function(i){if(!("targetChange"in i))return Gt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Gt.min():a.readTime?is(a.readTime):Gt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=j2(this.serializer),r.addTarget=function(i,a){let o;const A=a.target;if(o=Vm(A)?{documents:ZF(i,A)}:{query:Xw(i,A)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=$F(i,a.resumeToken);const c=L2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Gt.min())>0){o.readTime=Pd(i,a.snapshotVersion.toTimestamp());const c=L2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=RM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=j2(this.serializer),r.removeTarget=e,this.a_(r)}}class IO extends ET{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=jM(e.writeResults,e.commitTime),n=is(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=j2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>yp(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new lt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Q2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new lt(ze.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Q2(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new lt(ze.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ss(r),this.D_=!1):ct("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{rc(this)&&(ct("RemoteStore","Restarting streams for network reachability change."),await async function(A){const c=Bt(A);c.L_.add(4),await sh(c),c.q_.set("Unknown"),c.L_.delete(4),await qp(c)}(this))})}),this.q_=new kO(n,s)}}async function qp(t){if(rc(t))for(const e of t.B_)await e(!0)}async function sh(t){for(const e of t.B_)await e(!1)}function t1(t,e){const r=Bt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),nB(r)?rB(r):ah(r).r_()&&tB(r,e))}function Od(t,e){const r=Bt(t),n=ah(r);r.N_.delete(e),n.r_()&&kT(r,e),r.N_.size===0&&(n.r_()?n.o_():rc(r)&&r.q_.set("Unknown"))}function tB(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ah(t).A_(e)}function kT(t,e){t.Q_.xe(e),ah(t).R_(e)}function rB(t){t.Q_=new kM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ah(t).start(),t.q_.v_()}function nB(t){return rc(t)&&!ah(t).n_()&&t.N_.size>0}function rc(t){return Bt(t).L_.size===0}function ST(t){t.Q_=void 0}async function NO(t){t.q_.set("Online")}async function FO(t){t.N_.forEach((e,r)=>{tB(t,e)})}async function TO(t,e){ST(t),nB(t)?(t.q_.M_(e),rB(t)):t.q_.set("Unknown")}async function UO(t,e,r){if(t.q_.set("Online"),e instanceof GF&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ew(t,n)}else if(e instanceof Wg?t.Q_.Ke(e):e instanceof zF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Gt.min()))try{const n=await vT(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((A,c)=>{if(A.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(A.resumeToken,a))}}),o.targetMismatches.forEach((A,c)=>{const u=i.N_.get(A);if(!u)return;i.N_.set(A,u.withResumeToken(Dn.EMPTY_BYTE_STRING,u.snapshotVersion)),kT(i,A);const d=new eA(u.target,A,c,u.sequenceNumber);tB(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ct("RemoteStore","Failed to raise snapshot:",n),await ew(t,n)}}async function ew(t,e,r){if(!ec(e))throw e;t.L_.add(1),await sh(t),t.q_.set("Offline"),r||(r=()=>vT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ct("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await qp(t)})}function NT(t,e){return e().catch(r=>ew(t,r,e))}async function ih(t){const e=Bt(t),r=Vl(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LO(e);)try{const s=await wO(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,QO(e,s)}catch(s){await ew(e,s)}FT(e)&&TT(e)}function LO(t){return rc(t)&&t.O_.length<10}function QO(t,e){t.O_.push(e);const r=Vl(t);r.r_()&&r.V_&&r.m_(e.mutations)}function FT(t){return rc(t)&&!Vl(t).n_()&&t.O_.length>0}function TT(t){Vl(t).start()}async function jO(t){Vl(t).p_()}async function RO(t){const e=Vl(t);for(const r of t.O_)e.m_(r.mutations)}async function PO(t,e,r){const n=t.O_.shift(),s=Ob.from(n,e,r);await NT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ih(t)}async function DO(t,e){e&&Vl(t).V_&&await async function(n,s){if(function(a){return HF(a)&&a!==ze.ABORTED}(s.code)){const i=n.O_.shift();Vl(n).s_(),await NT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ih(n)}}(t,e),FT(t)&&TT(t)}async function aI(t,e){const r=Bt(t);r.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const n=rc(r);r.L_.add(3),await sh(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await qp(r)}async function H2(t,e){const r=Bt(t);e?(r.L_.delete(2),await qp(r)):e||(r.L_.add(2),await sh(r),r.q_.set("Unknown"))}function ah(t){return t.K_||(t.K_=function(r,n,s){const i=Bt(r);return i.w_(),new CO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:NO.bind(null,t),Ro:FO.bind(null,t),mo:TO.bind(null,t),d_:UO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),nB(t)?rB(t):t.q_.set("Unknown")):(await t.K_.stop(),ST(t))})),t.K_}function Vl(t){return t.U_||(t.U_=function(r,n,s){const i=Bt(r);return i.w_(),new IO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jO.bind(null,t),mo:DO.bind(null,t),f_:RO.bind(null,t),g_:PO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ih(t)):(await t.U_.stop(),t.O_.length>0&&(ct("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new sB(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oh(t,e){if(ss("AsyncQueue",`${e}: ${t}`),ec(t))return new lt(ze.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||It.comparator(r.key,n.key):(r,n)=>It.comparator(r.key,n.key),this.keyedMap=uf(),this.sortedSet=new hn(this.comparator)}static emptySet(e){return new hd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof hd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new hd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.W_=new hn(It.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Lt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Hd{constructor(e,r,n,s,i,a,o,A,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Hd(e,r,hd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OO{constructor(){this.queries=AI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Bt(r),i=s.queries;s.queries=AI(),i.forEach((a,o)=>{for(const A of o.j_)A.onError(n)})})(this,new lt(ze.ABORTED,"Firestore shutting down"))}}function AI(){return new yA(t=>EF(t),Hp)}async function iB(t,e){const r=Bt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new MO,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=oh(a,`Initialization of query '${Ru(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&oB(r)}async function aB(t,e){const r=Bt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function HO(t,e){const r=Bt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&oB(r)}function VO(t,e,r){const n=Bt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function oB(t){t.Y_.forEach(e=>{e.next()})}var V2,lI;(lI=V2||(V2={})).ea="default",lI.Cache="cache";class AB{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Hd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==V2.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.serializer=e}Es(e){return ko(this.serializer,e)}ds(e){return e.metadata.exists?YF(this.serializer,e.document,!1):xn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return is(e)}}class zO{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=Br.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new cI(this.serializer);for(const s of e)if(s.metadata.queries){const i=n.Es(s.metadata.name);for(const a of s.metadata.queries){const o=(r.get(a)||ur()).add(i);r.set(a,o)}}return r}async complete(){const e=await xO(this.localStore,new cI(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await vO(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function UT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.key=e}}class QT{constructor(e){this.key=e}}class jT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ur(),this.mutatedKeys=ur(),this.Aa=SF(e),this.Ra=new hd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new oI,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const A=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const p=s.get(u),g=Vp(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;p&&g?p.data.isEqual(g.data)?v!==y&&(n.track({type:3,doc:g}),S=!0):this.ga(p,g)||(n.track({type:2,doc:g}),S=!0,(A&&this.Aa(g,A)>0||c&&this.Aa(g,c)<0)&&(o=!0)):!p&&g?(n.track({type:0,doc:g}),S=!0):p&&!g&&(n.track({type:1,doc:p}),S=!0,(A||c)&&(o=!0)),S&&(g?(a=a.add(g),i=y?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,d)=>function(g,v){const y=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt()}};return y(g)-y(v)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],A=this.da.size===0&&this.current&&!s?1:0,c=A!==this.Ea;return this.Ea=A,a.length!==0||c?{snapshot:new Hd(this.query,e.Ra,i,a,e.mutatedKeys,A===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new oI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ur(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new QT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new LT(n))}),r}ba(e){this.Ta=e.Ts,this.da=ur();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Hd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class GO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class $O{constructor(e){this.key=e,this.va=!1}}class qO{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new yA(o=>EF(o),Hp),this.Ma=new Map,this.xa=new Set,this.Oa=new hn(It.comparator),this.Na=new Map,this.La=new qb,this.Ba={},this.ka=new Map,this.qa=Yc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WO(t,e,r=!0){const n=r1(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await RT(n,e,r,!0),s}async function JO(t,e){const r=r1(t);await RT(r,e,!0,!1)}async function RT(t,e,r,n){const s=await Dd(t.localStore,Ai(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await lB(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&t1(t.remoteStore,s),o}async function lB(t,e,r,n,s){t.Ka=(d,p,g)=>async function(y,S,x,I){let N=S.view.ma(x);N.ns&&(N=await Xm(y.localStore,S.query,!1).then(({documents:E})=>S.view.ma(E,N)));const U=I&&I.targetChanges.get(S.targetId),D=I&&I.targetMismatches.get(S.targetId)!=null,P=S.view.applyChanges(N,y.isPrimaryClient,U,D);return K2(y,S.targetId,P.wa),P.snapshot}(t,d,p,g);const i=await Xm(t.localStore,e,!0),a=new jT(e,i.Ts),o=a.ma(i.documents),A=Gp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,A);K2(t,r,c.wa);const u=new GO(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function XO(t,e,r){const n=Bt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Hp(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Md(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Od(n.remoteStore,s.targetId),Vd(n,s.targetId)}).catch(Zl)):(Vd(n,s.targetId),await Md(n.localStore,s.targetId,!0))}async function YO(t,e){const r=Bt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Od(r.remoteStore,n.targetId))}async function ZO(t,e,r){const n=hB(t);try{const s=await function(a,o){const A=Bt(a),c=kn.now(),u=o.reduce((g,v)=>g.add(v.key),ur());let d,p;return A.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Li(),y=ur();return A.cs.getEntries(g,u).next(S=>{v=S,v.forEach((x,I)=>{I.isValidDocument()||(y=y.add(x))})}).next(()=>A.localDocuments.getOverlayedDocuments(g,v)).next(S=>{d=S;const x=[];for(const I of o){const N=CM(I,d.get(I.key).overlayedDocument);N!=null&&x.push(new bA(I.key,N,gF(N.value.mapValue),En.exists(!0)))}return A.mutationQueue.addMutationBatch(g,c,x,o)}).next(S=>{p=S;const x=S.applyToLocalDocumentSet(d,y);return A.documentOverlayCache.saveOverlays(g,S.batchId,x)})}).then(()=>({batchId:p.batchId,changes:FF(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,A){let c=a.Ba[a.currentUser.toKey()];c||(c=new hn(sr)),c=c.insert(o,A),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await BA(n,s.changes),await ih(n.remoteStore)}catch(s){const i=oh(s,"Failed to persist write");r.reject(i)}}async function PT(t,e){const r=Bt(t);try{const n=await mO(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(Mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Mt(a.va):s.removedDocuments.size>0&&(Mt(a.va),a.va=!1))}),await BA(r,n,e)}catch(n){await Zl(n)}}function uI(t,e,r){const n=Bt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const A=Bt(a);A.onlineState=o;let c=!1;A.queries.forEach((u,d)=>{for(const p of d.j_)p.Z_(o)&&(c=!0)}),c&&oB(A)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function e7(t,e,r){const n=Bt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new hn(It.comparator);a=a.insert(i,xn.newNoDocument(i,Gt.min()));const o=ur().add(i),A=new zp(Gt.min(),new Map,new hn(sr),a,o);await PT(n,A),n.Oa=n.Oa.remove(i),n.Na.delete(e),dB(n)}else await Md(n.localStore,e,!1).then(()=>Vd(n,e,r)).catch(Zl)}async function t7(t,e){const r=Bt(t),n=e.batch.batchId;try{const s=await gO(r.localStore,e);uB(r,n,null),cB(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await BA(r,s)}catch(s){await Zl(s)}}async function r7(t,e,r){const n=Bt(t);try{const s=await function(a,o){const A=Bt(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return A.mutationQueue.lookupMutationBatch(c,o).next(d=>(Mt(d!==null),u=d.keys(),A.mutationQueue.removeMutationBatch(c,d))).next(()=>A.mutationQueue.performConsistencyCheck(c)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>A.localDocuments.getDocuments(c,u))})}(n.localStore,e);uB(n,e,r),cB(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await BA(n,s)}catch(s){await Zl(s)}}async function n7(t,e){const r=Bt(t);rc(r.remoteStore)||ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(a){const o=Bt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",A=>o.mutationQueue.getHighestUnacknowledgedBatchId(A))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=oh(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function cB(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function uB(t,e,r){const n=Bt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Vd(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||DT(t,n)})}function DT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Od(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),dB(t))}function K2(t,e,r){for(const n of r)n instanceof LT?(t.La.addReference(n.key,e),s7(t,n)):n instanceof QT?(ct("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||DT(t,n.key)):Lt()}function s7(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ct("SyncEngine","New document in limbo: "+r),t.xa.add(n),dB(t))}function dB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new It(Br.fromString(e)),n=t.qa.next();t.Na.set(n,new $O(r)),t.Oa=t.Oa.insert(r,n),t1(t.remoteStore,new eA(Ai(th(r.path)),n,"TargetPurposeLimboResolution",Ti.oe))}}async function BA(t,e,r){const n=Bt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,A)=>{a.push(n.Ka(A,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(A.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(A.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Yb.Wi(A.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(A,c){const u=Bt(A);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Qe.forEach(c,p=>Qe.forEach(p.$i,g=>u.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>Qe.forEach(p.Ui,g=>u.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!ec(d))throw d;ct("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=u.os.get(p),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(p,y)}}}(n.localStore,i))}async function i7(t,e){const r=Bt(t);if(!r.currentUser.isEqual(e)){ct("SyncEngine","User change. New user:",e.toKey());const n=await xT(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(A=>{A.reject(new lt(ze.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await BA(r,n.hs)}}function a7(t,e){const r=Bt(t),n=r.Na.get(e);if(n&&n.va)return ur().add(n.key);{let s=ur();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}async function o7(t,e){const r=Bt(t),n=await Xm(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&K2(r,e.targetId,s.wa),s}async function A7(t,e){const r=Bt(t);return BT(r.localStore,e).then(n=>BA(r,n))}async function l7(t,e,r,n){const s=Bt(t),i=await function(o,A){const c=Bt(o),u=Bt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,A).next(p=>p?c.localDocuments.getDocuments(d,p):Qe.resolve(null)))}(s.localStore,e);i!==null?(r==="pending"?await ih(s.remoteStore):r==="acknowledged"||r==="rejected"?(uB(s,e,n||null),cB(s,e),function(o,A){Bt(Bt(o).mutationQueue).On(A)}(s.localStore,e)):Lt(),await BA(s,i)):ct("SyncEngine","Cannot apply mutation batch with id: "+e)}async function c7(t,e){const r=Bt(t);if(r1(r),hB(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await dI(r,n.toArray());r.Qa=!0,await H2(r.remoteStore,!0);for(const i of s)t1(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((i,a)=>{r.sharedClientState.isLocalQueryTarget(a)?n.push(a):s=s.then(()=>(Vd(r,a),Md(r.localStore,a,!0))),Od(r.remoteStore,a)}),await s,await dI(r,n),function(a){const o=Bt(a);o.Na.forEach((A,c)=>{Od(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new hn(It.comparator)}(r),r.Qa=!1,await H2(r.remoteStore,!1)}}async function dI(t,e,r){const n=Bt(t),s=[],i=[];for(const a of e){let o;const A=n.Ma.get(a);if(A&&A.length!==0){o=await Dd(n.localStore,Ai(A[0]));for(const c of A){const u=n.Fa.get(c),d=await o7(n,u);d.snapshot&&i.push(d.snapshot)}}else{const c=await bT(n.localStore,a);o=await Dd(n.localStore,c),await lB(n,MT(c),a,!1,o.resumeToken)}s.push(o)}return n.Ca.d_(i),s}function MT(t){return _F(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function u7(t){return function(r){return Bt(Bt(r).persistence).Qi()}(Bt(t).localStore)}async function d7(t,e,r,n){const s=Bt(t);if(s.Qa)return void ct("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const a=await BT(s.localStore,kF(i[0])),o=zp.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Dn.EMPTY_BYTE_STRING);await BA(s,a,o);break}case"rejected":await Md(s.localStore,e,!0),Vd(s,e,n);break;default:Lt()}}async function h7(t,e,r){const n=r1(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){ct("SyncEngine","Adding an already active target "+s);continue}const i=await bT(n.localStore,s),a=await Dd(n.localStore,i);await lB(n,MT(i),a.targetId,!1,a.resumeToken),t1(n.remoteStore,a)}for(const s of r)n.Ma.has(s)&&await Md(n.localStore,s,!1).then(()=>{Od(n.remoteStore,s),Vd(n,s)}).catch(Zl)}}function r1(t){const e=Bt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e7.bind(null,e),e.Ca.d_=HO.bind(null,e.eventManager),e.Ca.$a=VO.bind(null,e.eventManager),e}function hB(t){const e=Bt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r7.bind(null,e),e}function f7(t,e,r){const n=Bt(t);(async function(i,a,o){try{const A=await a.getMetadata();if(await function(g,v){const y=Bt(g),S=is(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",x=>y.Gr.getBundleMetadata(x,v.id)).then(x=>!!x&&x.createTime.compareTo(S)>=0)}(i.localStore,A))return await a.close(),o._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(A)),Promise.resolve(new Set);o._updateProgress(UT(A));const c=new zO(A,i.localStore,a.serializer);let u=await a.Ua();for(;u;){const p=await c.la(u);p&&o._updateProgress(p),u=await a.Ua()}const d=await c.complete();return await BA(i,d.Ia,void 0),await function(g,v){const y=Bt(g);return y.persistence.runTransaction("Save bundle","readwrite",S=>y.Gr.saveBundleMetadata(S,v))}(i.localStore,A),o._completeWith(d.progress),Promise.resolve(d.Pa)}catch(A){return aa("SyncEngine",`Loading bundle failed with ${A}`),o._failWith(A),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class Kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$p(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return wT(this.persistence,new mT,e.initialUser,this.serializer)}Ga(e){return new Wb(e1.Zr,this.serializer)}Wa(e){return new CT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kl.provider={build:()=>new Kl};class p7 extends Kl{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Mt(this.persistence.referenceDelegate instanceof Jm);const n=this.persistence.referenceDelegate.garbageCollector;return new dT(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new Wb(n=>Jm.Zr(n,r),this.serializer)}}class fB extends Kl{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await hB(this.Ja.syncEngine),await ih(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return wT(this.persistence,new mT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new dT(n,e.asyncQueue,r)}Ha(e,r){const n=new j8(r,this.persistence);return new Q8(e.asyncQueue,n)}Ga(e){const r=Xb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new Jb(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,IT(),Jg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new CT}}class OT extends fB{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Sx&&(this.sharedClientState.syncEngine={no:l7.bind(null,r),ro:d7.bind(null,r),io:h7.bind(null,r),Qi:u7.bind(null,r),eo:A7.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await c7(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=IT();if(!Sx.D(r))throw new lt(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Xb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sx(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class zl{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>uI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=i7.bind(null,this.syncEngine),await H2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OO}()}createDatastore(e){const r=$p(e.databaseInfo.databaseId),n=function(i){return new _O(i)}(e.databaseInfo);return function(i,a,o,A){return new EO(i,a,o,A)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new SO(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>uI(this.syncEngine,r,0),function(){return iI.D()?new iI:new yO}())}createSyncEngine(e,r){return function(s,i,a,o,A,c,u){const d=new qO(s,i,a,o,A,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Bt(s);ct("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await sh(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}zl.provider={build:()=>new zl};function hI(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Ns,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new KO(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new lt(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=Bt(s),o={documents:i.map(d=>vp(a.serializer,d))},A=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Br.emptyPath(),o,i.length),c=new Map;A.forEach(d=>{const p=LM(a.serializer,d);c.set(p.key.toString(),p)});const u=[];return i.forEach(d=>{const p=c.get(d.toString());Mt(!!p),u.push(p)}),u}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=It.fromPath(n);this.mutations.push(new Db(s,this.precondition(s)))}),await async function(n,s){const i=Bt(n),a={writes:s.map(o=>yp(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,Br.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Lt();r=Gt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new lt(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Gt.min())?En.exists(!1):En.updateTime(r):En.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Gt.min()))throw new lt(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(r)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new eB(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new m7(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Mp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!HF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Es.UNAUTHENTICATED,this.clientId=Fb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{ct("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ct("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=oh(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Fx(t,e){t.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await xT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await pB(t);ct("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>aI(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>aI(e.remoteStore,s)),t._onlineComponents=e}async function pB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ct("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ze.FAILED_PRECONDITION||s.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;aa("Error using user provided cache. Falling back to memory cache: "+r),await Fx(t,new Kl)}}else ct("FirestoreClient","Using default OfflineComponentProvider"),await Fx(t,new Kl);return t._offlineComponents}async function s1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ct("FirestoreClient","Using user provided OnlineComponentProvider"),await fI(t,t._uninitializedComponentsProvider._online)):(ct("FirestoreClient","Using default OnlineComponentProvider"),await fI(t,new zl))),t._onlineComponents}function HT(t){return pB(t).then(e=>e.persistence)}function Ah(t){return pB(t).then(e=>e.localStore)}function VT(t){return s1(t).then(e=>e.remoteStore)}function gB(t){return s1(t).then(e=>e.syncEngine)}function KT(t){return s1(t).then(e=>e.datastore)}async function Kd(t){const e=await s1(t),r=e.eventManager;return r.onListen=WO.bind(null,e.syncEngine),r.onUnlisten=XO.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=JO.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=YO.bind(null,e.syncEngine),r}function v7(t){return t.asyncQueue.enqueue(async()=>{const e=await HT(t),r=await VT(t);return e.setNetworkEnabled(!0),function(s){const i=Bt(s);return i.L_.delete(0),qp(i)}(r)})}function y7(t){return t.asyncQueue.enqueue(async()=>{const e=await HT(t),r=await VT(t);return e.setNetworkEnabled(!1),async function(s){const i=Bt(s);i.L_.add(0),await sh(i),i.q_.set("Offline")}(r)})}function b7(t,e){const r=new Ns;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,a){try{const o=await function(c,u){const d=Bt(c);return d.persistence.runTransaction("read document","readonly",p=>d.localDocuments.getDocument(p,u))}(s,i);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new lt(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const A=oh(o,`Failed to get document '${i} from cache`);a.reject(A)}}(await Ah(t),e,r)),r.promise}function zT(t,e,r={}){const n=new Ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const u=new n1({next:p=>{u.Za(),a.enqueueAndForget(()=>aB(i,d));const g=p.docs.has(o);!g&&p.fromCache?c.reject(new lt(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&A&&A.source==="server"?c.reject(new lt(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new AB(th(o.path),u,{includeMetadataChanges:!0,_a:!0});return iB(i,d)}(await Kd(t),t.asyncQueue,e,r,n)),n.promise}function B7(t,e){const r=new Ns;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,a){try{const o=await Xm(s,i,!0),A=new jT(i,o.Ts),c=A.ma(o.documents),u=A.applyChanges(c,!1);a.resolve(u.snapshot)}catch(o){const A=oh(o,`Failed to execute query '${i} against cache`);a.reject(A)}}(await Ah(t),e,r)),r.promise}function GT(t,e,r={}){const n=new Ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const u=new n1({next:p=>{u.Za(),a.enqueueAndForget(()=>aB(i,d)),p.fromCache&&A.source==="server"?c.reject(new lt(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new AB(o,u,{includeMetadataChanges:!0,_a:!0});return iB(i,d)}(await Kd(t),t.asyncQueue,e,r,n)),n.promise}function _7(t,e,r){const n=new Ns;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await KT(t);n.resolve(async function(a,o,A){var c;const u=Bt(a),{request:d,ut:p,parent:g}=eT(u.serializer,CF(o),A);u.connection.Fo||delete d.parent;const v=(await u.Lo("RunAggregationQuery",u.serializer.databaseId,g,d,1)).filter(S=>!!S.result);Mt(v.length===1);const y=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(y).reduce((S,x)=>(S[p[x]]=y[x],S),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function C7(t,e){const r=new n1(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){Bt(s).Y_.add(i),i.next()}(await Kd(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){Bt(s).Y_.delete(i)}(await Kd(t),r))}}function I7(t,e,r,n){const s=function(a,o){let A;return A=typeof a=="string"?KF().encode(a):a,function(u,d){return new g7(u,d)}(function(u,d){if(u instanceof Uint8Array)return hI(u,d);if(u instanceof ArrayBuffer)return hI(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),o)}(r,$p(e));t.asyncQueue.enqueueAndForget(async()=>{f7(await gB(t),s,n)})}function E7(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const i=Bt(n);return i.persistence.runTransaction("Get named query","readonly",a=>i.Gr.getNamedQuery(a,s))}(await Ah(t),e))}function k7(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const i=Bt(n),a=i.indexManager,o=[];return i.persistence.runTransaction("Configure indexes","readwrite",A=>a.getFieldIndexes(A).next(c=>function(d,p,g,v,y){d=[...d],p=[...p],d.sort(g),p.sort(g);const S=d.length,x=p.length;let I=0,N=0;for(;I<x&&N<S;){const U=g(d[N],p[I]);U<0?y(d[N++]):U>0?v(p[I++]):(I++,N++)}for(;I<x;)v(p[I++]);for(;N<S;)y(d[N++])}(c,s,F8,u=>{o.push(a.addFieldIndex(A,u))},u=>{o.push(a.deleteFieldIndex(A,u))})).next(()=>Qe.waitFor(o)))}(await Ah(t),e))}function S7(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){Bt(n).ss.zi=s}(await Ah(t),e))}function N7(t){return t.asyncQueue.enqueue(async()=>function(r){const n=Bt(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await Ah(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(t,e,r){if(!r)throw new lt(ze.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qT(t,e,r,n){if(e===!0&&n===!0)throw new lt(ze.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function gI(t){if(!It.isDocumentKey(t))throw new lt(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mI(t){if(It.isDocumentKey(t))throw new lt(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Lt()}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new lt(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=i1(t);throw new lt(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function WT(t,e){if(e<=0)throw new lt(ze.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new lt(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new lt(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new lt(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new lt(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wI(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new YN;switch(n.type){case"firstParty":return new I8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new lt(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=pI.get(r);n&&(ct("ComponentProvider","Removing Datastore"),pI.delete(r),n.terminate())}(this),Promise.resolve()}}function JT(t,e,r,n={}){var s;const i=(t=mr(t,Wp))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,A;if(typeof n.mockUserToken=="string")o=n.mockUserToken,A=Es.MOCK_USER;else{o=WP(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new lt(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Es(c)}t._authCredentials=new B8(new XN(o,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class Gn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class Xa extends Fs{constructor(e,r,n){super(e,r,th(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new It(e))}withConverter(e){return new Xa(this.firestore,e,this._path)}}function z2(t,e,...r){if(t=An(t),mB("collection","path",e),t instanceof Wp){const n=Br.fromString(e,...r);return mI(n),new Xa(t,null,n)}{if(!(t instanceof Gn||t instanceof Xa))throw new lt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Br.fromString(e,...r));return mI(n),new Xa(t.firestore,null,n)}}function F7(t,e){if(t=mr(t,Wp),mB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new lt(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fs(t,null,function(n){return new vA(Br.emptyPath(),n)}(e))}function wo(t,e,...r){if(t=An(t),arguments.length===1&&(e=Fb.newId()),mB("doc","path",e),t instanceof Wp){const n=Br.fromString(e,...r);return gI(n),new Gn(t,null,new It(n))}{if(!(t instanceof Gn||t instanceof Xa))throw new lt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Br.fromString(e,...r));return gI(n),new Gn(t.firestore,t instanceof Xa?t.converter:null,new It(n))}}function T7(t,e){return t=An(t),e=An(e),(t instanceof Gn||t instanceof Xa)&&(e instanceof Gn||e instanceof Xa)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function wB(t,e){return t=An(t),e=An(e),t instanceof Fs&&e instanceof Fs&&t.firestore===e.firestore&&Hp(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eB(this,"async_queue_retry"),this.Vu=()=>{const n=Jg();n&&ct("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Jg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Jg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Ns;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ec(e))throw e;ct("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw ss("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=sB.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Lt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function G2(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class XT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ns,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7=-1;class tn extends Wp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new xI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xI(e),this._firestoreClient=void 0,await e}}}function L7(t,e,r){r||(r="(default)");const n=Dp(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Rl(i,e))return s;throw new lt(ze.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new lt(ze.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new lt(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function YT(t,e){const r=typeof t=="object"?t:Sb(),n=typeof t=="string"?t:e||"(default)",s=Dp(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=$P("firestore");i&&JT(s,...i)}return s}function Sn(t){if(t._terminated)throw new lt(ze.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZT(t),t._firestoreClient}function ZT(t){var e,r,n;const s=t._freezeSettings(),i=function(o,A,c,u){return new sM(o,A,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,$T(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new x7(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}}(t._componentsProvider))}function Q7(t,e){aa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return e3(t,zl.provider,{build:n=>new fB(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function j7(t){aa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();e3(t,zl.provider,{build:r=>new OT(r,e.cacheSizeBytes)})}function e3(t,e,r){if((t=mr(t,tn))._firestoreClient||t._terminated)throw new lt(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new lt(ze.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},ZT(t)}function R7(t){if(t._initialized&&!t._terminated)throw new lt(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ns;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Eo.D())return Promise.resolve();const s=n+"main";await Eo.delete(s)}(Xb(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function P7(t){return function(r){const n=new Ns;return r.asyncQueue.enqueueAndForget(async()=>n7(await gB(r),n)),n.promise}(Sn(t=mr(t,tn)))}function D7(t){return v7(Sn(t=mr(t,tn)))}function M7(t){return y7(Sn(t=mr(t,tn)))}function O7(t){return a8(t.app,"firestore",t._databaseId.database),t._delete()}function H7(t,e){const r=Sn(t=mr(t,tn)),n=new XT;return I7(r,t._databaseId,e,n),n}function V7(t,e){return E7(Sn(t=mr(t,tn)),e).then(r=>r?new Fs(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class t3{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gl(Dn.fromBase64String(e))}catch(r){throw new lt(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Gl(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new lt(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function K7(){return new nc("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new lt(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new lt(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sr(this._lat,e._lat)||sr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7=/^__.*__$/;class G7{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new bA(e,this.data,this.fieldMask,r,this.fieldTransforms):new rh(e,this.data,r,this.fieldTransforms)}}class r3{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new bA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function n3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt()}}class o1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new o1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tw(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(n3(this.Cu)&&z7.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $7{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||$p(e)}Qu(e,r,n,s=!1){return new o1({Cu:e,methodName:r,qu:n,path:vn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Au(t){const e=t._freezeSettings(),r=$p(t._databaseId);return new $7(t._databaseId,!!e.ignoreUndefinedProperties,r)}function A1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);CB("Data must be an object, but it was:",a,n);const o=a3(n,a);let A,c;if(i.merge)A=new Ui(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const p=bp(e,d,r);if(!a.contains(p))throw new lt(ze.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);A3(u,p)||u.push(p)}A=new Ui(u),c=a.fieldTransforms.filter(d=>A.covers(d.field))}else A=null,c=a.fieldTransforms;return new G7(new Hs(o),A,c)}class Xp extends sc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xp}}function s3(t,e,r){return new o1({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xB extends sc{_toFieldTransform(e){return new Kp(e.path,new jd)}isEqual(e){return e instanceof xB}}class vB extends sc{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=s3(this,e,!0),n=this.Ku.map(i=>lu(i,r)),s=new qc(n);return new Kp(e.path,s)}isEqual(e){return e instanceof vB&&Rl(this.Ku,e.Ku)}}class yB extends sc{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=s3(this,e,!0),n=this.Ku.map(i=>lu(i,r)),s=new Wc(n);return new Kp(e.path,s)}isEqual(e){return e instanceof yB&&Rl(this.Ku,e.Ku)}}class bB extends sc{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Rd(e.serializer,LF(e.serializer,this.$u));return new Kp(e.path,r)}isEqual(e){return e instanceof bB&&this.$u===e.$u}}function BB(t,e,r,n){const s=t.Qu(1,e,r);CB("Data must be an object, but it was:",s,n);const i=[],a=Hs.empty();tc(n,(A,c)=>{const u=l1(e,A,r);c=An(c);const d=s.Nu(u);if(c instanceof Xp)i.push(u);else{const p=lu(c,d);p!=null&&(i.push(u),a.set(u,p))}});const o=new Ui(i);return new r3(a,o,s.fieldTransforms)}function _B(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[bp(e,n,r)],A=[s];if(i.length%2!=0)throw new lt(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(bp(e,i[p])),A.push(i[p+1]);const c=[],u=Hs.empty();for(let p=o.length-1;p>=0;--p)if(!A3(c,o[p])){const g=o[p];let v=A[p];v=An(v);const y=a.Nu(g);if(v instanceof Xp)c.push(g);else{const S=lu(v,y);S!=null&&(c.push(g),u.set(g,S))}}const d=new Ui(c);return new r3(u,d,a.fieldTransforms)}function i3(t,e,r,n=!1){return lu(r,t.Qu(n?4:3,e))}function lu(t,e){if(o3(t=An(t)))return CB("Unsupported field value:",e,t),a3(t,e);if(t instanceof sc)return function(n,s){if(!n3(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let A=lu(o,s.Lu(a));A==null&&(A={nullValue:"NULL_VALUE"}),i.push(A),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=An(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return LF(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=kn.fromDate(n);return{timestampValue:Pd(s.serializer,i)}}if(n instanceof kn){const i=new kn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Pd(s.serializer,i)}}if(n instanceof a1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Gl)return{bytesValue:$F(s.serializer,n._byteString)};if(n instanceof Gn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Kb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Jp)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(A=>{if(typeof A!="number")throw o.Bu("VectorValues must only contain numeric values.");return Pb(o.serializer,A)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${i1(n)}`)}(t,e)}function a3(t,e){const r={};return dF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(t,(n,s)=>{const i=lu(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function o3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof kn||t instanceof a1||t instanceof Gl||t instanceof Gn||t instanceof sc||t instanceof Jp)}function CB(t,e,r){if(!o3(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=i1(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function bp(t,e,r){if((e=An(e))instanceof nc)return e._internalPath;if(typeof e=="string")return l1(t,e);throw tw("Field path arguments must be of type string or ",t,!1,void 0,r)}const q7=new RegExp("[~\\*/\\[\\]]");function l1(t,e,r){if(e.search(q7)>=0)throw tw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new nc(...e.split("."))._internalPath}catch{throw tw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function tw(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(i||a)&&(A+=" (found",i&&(A+=` in field ${n}`),a&&(A+=` in document ${s}`),A+=")"),new lt(ze.INVALID_ARGUMENT,o+t+A)}function A3(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(c1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class W7 extends Bp{data(){return super.data()}}function c1(t,e){return typeof e=="string"?l1(t,e):e instanceof nc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new lt(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IB{}class lh extends IB{}function $2(t,e,...r){let n=[];e instanceof IB&&n.push(e),n=n.concat(r),function(i){const a=i.filter(A=>A instanceof cu).length,o=i.filter(A=>A instanceof ch).length;if(a>1||a>0&&o>0)throw new lt(ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class ch extends lh{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new ch(e,r,n)}_apply(e){const r=this._parse(e);return u3(e._query,r),new Fs(e.firestore,e.converter,U2(e._query,r))}_parse(e){const r=Au(e.firestore);return function(i,a,o,A,c,u,d){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new lt(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){yI(d,u);const g=[];for(const v of d)g.push(vI(A,i,v));p={arrayValue:{values:g}}}else p=vI(A,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||yI(d,u),p=i3(o,a,d,u==="in"||u==="not-in");return _r.create(c,u,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function J7(t,e,r){const n=e,s=c1("where",t);return ch._create(s,n,r)}class cu extends IB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new cu(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Jr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const A of o)u3(a,A),a=U2(a,A)}(e._query,r),new Fs(e.firestore,e.converter,U2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function X7(...t){return t.forEach(e=>d3("or",e)),cu._create("or",t)}function Y7(...t){return t.forEach(e=>d3("and",e)),cu._create("and",t)}class u1 extends lh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new u1(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new lt(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new lt(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xp(i,a)}(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new vA(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Z7(t,e="asc"){const r=e,n=c1("orderBy",t);return u1._create(n,r)}class Yp extends lh{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Yp(e,r,n)}_apply(e){return new Fs(e.firestore,e.converter,zm(e._query,this._limit,this._limitType))}}function eH(t){return WT("limit",t),Yp._create("limit",t,"F")}function tH(t){return WT("limitToLast",t),Yp._create("limitToLast",t,"L")}class Zp extends lh{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Zp(e,r,n)}_apply(e){const r=c3(e,this.type,this._docOrFields,this._inclusive);return new Fs(e.firestore,e.converter,function(s,i){return new vA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function rH(...t){return Zp._create("startAt",t,!0)}function nH(...t){return Zp._create("startAfter",t,!1)}class e0 extends lh{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new e0(e,r,n)}_apply(e){const r=c3(e,this.type,this._docOrFields,this._inclusive);return new Fs(e.firestore,e.converter,function(s,i){return new vA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,r))}}function sH(...t){return e0._create("endBefore",t,!1)}function iH(...t){return e0._create("endAt",t,!0)}function c3(t,e,r,n){if(r[0]=An(r[0]),r[0]instanceof Bp)return function(i,a,o,A,c){if(!A)throw new lt(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of dd(i))if(d.field.isKeyField())u.push(Gc(a,A.key));else{const p=A.data.field(d.field);if(Gw(p))throw new lt(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=d.field.canonicalString();throw new lt(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(p)}return new Hl(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Au(t.firestore);return function(a,o,A,c,u,d){const p=a.explicitOrderBy;if(u.length>p.length)throw new lt(ze.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<u.length;v++){const y=u[v];if(p[v].field.isKeyField()){if(typeof y!="string")throw new lt(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!jb(a)&&y.indexOf("/")!==-1)throw new lt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const S=a.path.child(Br.fromString(y));if(!It.isDocumentKey(S))throw new lt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const x=new It(S);g.push(Gc(o,x))}else{const S=i3(A,c,y);g.push(S)}}return new Hl(g,d)}(t._query,t.firestore._databaseId,s,e,r,n)}}function vI(t,e,r){if(typeof(r=An(r))=="string"){if(r==="")throw new lt(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jb(e)&&r.indexOf("/")!==-1)throw new lt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Br.fromString(r));if(!It.isDocumentKey(n))throw new lt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Gc(t,new It(n))}if(r instanceof Gn)return Gc(t,r._key);throw new lt(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${i1(r)}.`)}function yI(t,e){if(!Array.isArray(t)||t.length===0)throw new lt(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u3(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new lt(ze.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(ze.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function d3(t,e){if(!(e instanceof ch||e instanceof cu))throw new lt(ze.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class EB{convertValue(e,r="none"){switch(Ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(hA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Lt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return tc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Cn(a.doubleValue));return new Jp(i)}convertGeoPoint(e){return new a1(Cn(e.latitude),Cn(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=$w(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(gp(e));default:return null}}convertTimestamp(e){const r=dA(e);return new kn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Br.fromString(e);Mt(sT(n));const s=new Dl(n.get(1),n.get(3)),i=new It(n.popFirst(5));return s.isEqual(r)||ss(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class aH extends EB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t){return new zd("sum",bp("sum",t))}function AH(t){return new zd("avg",bp("average",t))}function h3(){return new zd("count")}function lH(t,e){var r,n;return t instanceof zd&&e instanceof zd&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function cH(t,e){return wB(t.query,e.query)&&Rl(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zc extends Bp{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(c1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Rf extends Zc{data(e={}){return super.data(e)}}class eu{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new pl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Rf(this._firestore,this._userDataWriter,n.key,n,new pl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new lt(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const A=new Rf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const A=new Rf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:uH(o.type),doc:A,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function uH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt()}}function dH(t,e){return t instanceof Zc&&e instanceof Zc?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof eu&&e instanceof eu&&t._firestore===e._firestore&&wB(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t){t=mr(t,Gn);const e=mr(t.firestore,tn);return zT(Sn(e),t._key).then(r=>kB(e,t,r))}class ic extends EB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,r)}}function fH(t){t=mr(t,Gn);const e=mr(t.firestore,tn),r=Sn(e),n=new ic(e);return b7(r,t._key).then(s=>new Zc(e,n,t._key,s,new pl(s!==null&&s.hasLocalMutations,!0),t.converter))}function pH(t){t=mr(t,Gn);const e=mr(t.firestore,tn);return zT(Sn(e),t._key,{source:"server"}).then(r=>kB(e,t,r))}function f3(t){t=mr(t,Fs);const e=mr(t.firestore,tn),r=Sn(e),n=new ic(e);return l3(t._query),GT(r,t._query).then(s=>new eu(e,n,t,s))}function gH(t){t=mr(t,Fs);const e=mr(t.firestore,tn),r=Sn(e),n=new ic(e);return B7(r,t._query).then(s=>new eu(e,n,t,s))}function mH(t){t=mr(t,Fs);const e=mr(t.firestore,tn),r=Sn(e),n=new ic(e);return GT(r,t._query,{source:"server"}).then(s=>new eu(e,n,t,s))}function Xg(t,e,r){t=mr(t,Gn);const n=mr(t.firestore,tn),s=d1(t.converter,e,r);return uh(n,[A1(Au(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,En.none())])}function wH(t,e,r,...n){t=mr(t,Gn);const s=mr(t.firestore,tn),i=Au(s);let a;return a=typeof(e=An(e))=="string"||e instanceof nc?_B(i,"updateDoc",t._key,e,r,n):BB(i,"updateDoc",t._key,e),uh(s,[a.toMutation(t._key,En.exists(!0))])}function p3(t){return uh(mr(t.firestore,tn),[new nh(t._key,En.none())])}function xH(t,e){const r=mr(t.firestore,tn),n=wo(t),s=d1(t.converter,e);return uh(r,[A1(Au(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,En.exists(!1))]).then(()=>n)}function Yg(t,...e){var r,n,s;t=An(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||G2(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(G2(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let A,c,u;if(t instanceof Gn)c=mr(t.firestore,tn),u=th(t._key.path),A={next:d=>{e[a]&&e[a](kB(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=mr(t,Fs);c=mr(d.firestore,tn),u=d._query;const p=new ic(c);A={next:g=>{e[a]&&e[a](new eu(c,p,d,g))},error:e[a+1],complete:e[a+2]},l3(t._query)}return function(p,g,v,y){const S=new n1(y),x=new AB(g,S,v);return p.asyncQueue.enqueueAndForget(async()=>iB(await Kd(p),x)),()=>{S.Za(),p.asyncQueue.enqueueAndForget(async()=>aB(await Kd(p),x))}}(Sn(c),u,o,A)}function vH(t,e){return C7(Sn(t=mr(t,tn)),G2(e)?e:{next:e})}function uh(t,e){return function(n,s){const i=new Ns;return n.asyncQueue.enqueueAndForget(async()=>ZO(await gB(n),s,i)),i.promise}(Sn(t),e)}function kB(t,e,r){const n=r.docs.get(e._key),s=new ic(t);return new Zc(t,s,e._key,n,new pl(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t){return g3(t,{count:h3()})}function g3(t,e){const r=mr(t.firestore,tn),n=Sn(r),s=uF(e,(i,a)=>new OF(a,i.aggregateType,i._internalFieldPath));return _7(n,t._query,s).then(i=>function(o,A,c){const u=new ic(o);return new t3(A,u,c)}(r,t,i))}class bH{constructor(e){this.kind="memory",this._onlineComponentProvider=zl.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Kl.provider}toJSON(){return{kind:this.kind}}}class BH{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=m3(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class _H{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Kl.provider}toJSON(){return{kind:this.kind}}}class CH{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new p7(e)}}toJSON(){return{kind:this.kind}}}function IH(){return new _H}function EH(t){return new CH(t==null?void 0:t.cacheSizeBytes)}function kH(t){return new bH(t)}function SH(t){return new BH(t)}class NH{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zl.provider,this._offlineComponentProvider={build:r=>new fB(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class FH{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zl.provider,this._offlineComponentProvider={build:r=>new OT(r,e==null?void 0:e.cacheSizeBytes)}}}function m3(t){return new NH(t==null?void 0:t.forceOwnership)}function TH(){return new FH}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Au(e)}set(e,r,n){this._verifyNotCommitted();const s=al(e,this._firestore),i=d1(s.converter,r,n),a=A1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,En.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=al(e,this._firestore);let a;return a=typeof(r=An(r))=="string"||r instanceof nc?_B(this._dataReader,"WriteBatch.update",i._key,r,n,s):BB(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=al(e,this._firestore);return this._mutations=this._mutations.concat(new nh(r._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new lt(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function al(t,e){if((t=An(t)).firestore!==e)throw new lt(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3 extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Au(r)}get(r){const n=al(r,this._firestore),s=new aH(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Lt();const a=i[0];if(a.isFoundDocument())return new Bp(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new Bp(this._firestore,s,n._key,null,n.converter);throw Lt()})}set(r,n,s){const i=al(r,this._firestore),a=d1(i.converter,n,s),o=A1(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=al(r,this._firestore);let o;return o=typeof(n=An(n))=="string"||n instanceof nc?_B(this._dataReader,"Transaction.update",a._key,n,s,i):BB(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=al(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=al(e,this._firestore),n=new ic(this._firestore);return super.get(e).then(s=>new Zc(this._firestore,n,r._key,s._document,new pl(!1,!1),r.converter))}}function LH(t,e,r){t=mr(t,tn);const n=Object.assign(Object.assign({},UH),r);return function(i){if(i.maxAttempts<1)throw new lt(ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const A=new Ns;return i.asyncQueue.enqueueAndForget(async()=>{const c=await KT(i);new w7(i.asyncQueue,c,o,a,A).au()}),A.promise}(Sn(t),s=>e(new x3(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(){return new Xp("deleteField")}function jH(){return new xB("serverTimestamp")}function RH(...t){return new vB("arrayUnion",t)}function PH(...t){return new yB("arrayRemove",t)}function DH(t){return new bB("increment",t)}function MH(t){return new Jp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){return Sn(t=mr(t,tn)),new w3(t,e=>uh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t,e){const r=Sn(t=mr(t,tn));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return aa("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(i){const a=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(u){throw new lt(ze.INVALID_ARGUMENT,"Failed to parse JSON: "+(u==null?void 0:u.message))}}(i):i,o=[];if(Array.isArray(a.indexes))for(const A of a.indexes){const c=bI(A,"collectionGroup"),u=[];if(Array.isArray(A.fields))for(const d of A.fields){const p=l1("setIndexConfiguration",bI(d,"fieldPath"));d.arrayConfig==="CONTAINS"?u.push(new jc(p,2)):d.order==="ASCENDING"?u.push(new jc(p,0)):d.order==="DESCENDING"&&u.push(new jc(p,1))}o.push(new Td(Td.UNKNOWN_ID,c,u,Ud.empty()))}return o}(e);return k7(r,n)}function bI(t,e){if(typeof t[e]!="string")throw new lt(ze.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function HH(t){var e;t=mr(t,tn);const r=BI.get(t);if(r)return r;if(((e=Sn(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new y3(t);return BI.set(t,n),n}function VH(t){b3(t,!0)}function KH(t){b3(t,!1)}function zH(t){N7(Sn(t._firestore)).then(e=>ct("deleting all persistent cache indexes succeeded")).catch(e=>aa("deleting all persistent cache indexes failed",e))}function b3(t,e){S7(Sn(t._firestore),e).then(r=>ct(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>aa(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const BI=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GH(t){var e;const r=(e=Sn(mr(t.firestore,tn))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Xw(r,Ai(t._query))._t}function $H(t,e){var r;const n=uF(e,(i,a)=>new OF(a,i.aggregateType,i._internalFieldPath)),s=(r=Sn(mr(t.firestore,tn))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:eT(s,CF(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return SB.instance.onExistenceFilterMismatch(e)}}class SB{constructor(){this.Uu=new Map}static get instance(){return W0||(W0=new SB,function(r){if(Gm)throw new Error("a TestingHooksSpi instance is already set");Gm=r}(W0)),W0}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let W0=null;(function(e,r=!0){(function(s){eh=s})(Zd),Nd(new zc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new tn(new _8(n.getProvider("auth-internal")),new E8(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new lt(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dl(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Fl(dC,"4.7.3",e),Fl(dC,"4.7.3","esm2017")})();const WH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:EB,AggregateField:zd,AggregateQuerySnapshot:t3,Bytes:Gl,CACHE_SIZE_UNLIMITED:U7,CollectionReference:Xa,DocumentReference:Gn,DocumentSnapshot:Zc,FieldPath:nc,FieldValue:sc,Firestore:tn,FirestoreError:lt,GeoPoint:a1,LoadBundleTask:XT,PersistentCacheIndexManager:y3,Query:Fs,QueryCompositeFilterConstraint:cu,QueryConstraint:lh,QueryDocumentSnapshot:Rf,QueryEndAtConstraint:e0,QueryFieldFilterConstraint:ch,QueryLimitConstraint:Yp,QueryOrderByConstraint:u1,QuerySnapshot:eu,QueryStartAtConstraint:Zp,SnapshotMetadata:pl,Timestamp:kn,Transaction:x3,VectorValue:Jp,WriteBatch:w3,_AutoId:Fb,_ByteString:Dn,_DatabaseId:Dl,_DocumentKey:It,_EmptyAppCheckTokenProvider:k8,_EmptyAuthCredentialsProvider:YN,_FieldPath:vn,_TestingHooks:qH,_cast:mr,_debugAssert:b8,_internalAggregationQueryToProtoRunAggregationQueryRequest:$H,_internalQueryToProtoQueryTarget:GH,_isBase64Available:rM,_logWarn:aa,_validateIsNotUsedTogether:qT,addDoc:xH,aggregateFieldEqual:lH,aggregateQuerySnapshotEqual:cH,and:Y7,arrayRemove:PH,arrayUnion:RH,average:AH,clearIndexedDbPersistence:R7,collection:z2,collectionGroup:F7,connectFirestoreEmulator:JT,count:h3,deleteAllPersistentCacheIndexes:zH,deleteDoc:p3,deleteField:QH,disableNetwork:M7,disablePersistentCacheIndexAutoCreation:KH,doc:wo,documentId:K7,enableIndexedDbPersistence:Q7,enableMultiTabIndexedDbPersistence:j7,enableNetwork:D7,enablePersistentCacheIndexAutoCreation:VH,endAt:iH,endBefore:sH,ensureFirestoreConfigured:Sn,executeWrite:uh,getAggregateFromServer:g3,getCountFromServer:yH,getDoc:hH,getDocFromCache:fH,getDocFromServer:pH,getDocs:f3,getDocsFromCache:gH,getDocsFromServer:mH,getFirestore:YT,getPersistentCacheIndexManager:HH,increment:DH,initializeFirestore:L7,limit:eH,limitToLast:tH,loadBundle:H7,memoryEagerGarbageCollector:IH,memoryLocalCache:kH,memoryLruGarbageCollector:EH,namedQuery:V7,onSnapshot:Yg,onSnapshotsInSync:vH,or:X7,orderBy:Z7,persistentLocalCache:SH,persistentMultipleTabManager:TH,persistentSingleTabManager:m3,query:$2,queryEqual:wB,refEqual:T7,runTransaction:LH,serverTimestamp:jH,setDoc:Xg,setIndexConfiguration:OH,setLogLevel:y8,snapshotEqual:dH,startAfter:nH,startAt:rH,sum:oH,terminate:O7,updateDoc:wH,vector:MH,waitForPendingWrites:P7,where:J7,writeBatch:v3},Symbol.toStringTag,{value:"Module"}));function NB(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function B3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JH=B3,_3=new Rp("auth","Firebase",B3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Eb("@firebase/auth");function XH(t,...e){rw.logLevel<=br.WARN&&rw.warn(`Auth (${Zd}): ${t}`,...e)}function Zg(t,...e){rw.logLevel<=br.ERROR&&rw.error(`Auth (${Zd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,...e){throw FB(t,...e)}function So(t,...e){return FB(t,...e)}function C3(t,e,r){const n=Object.assign(Object.assign({},JH()),{[e]:r});return new Rp("auth","Firebase",n).create(e,{appName:t.name})}function Tl(t){return C3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FB(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return _3.create(t,...e)}function rr(t,e,...r){if(!t)throw FB(e,...r)}function tA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zg(e),new Error(e)}function fA(t,e){t||tA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function YH(){return _I()==="http:"||_I()==="https:"}function _I(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YH()||ZP()||"connection"in navigator)?navigator.onLine:!0}function eV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,r){this.shortDelay=e,this.longDelay=r,fA(r>e,"Short delay should be less than long delay!"),this.isMobile=JP()||eD()}get(){return ZH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t,e){fA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=new t0(3e4,6e4);function uu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ac(t,e,r,n,s={}){return E3(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Pp(Object.assign({key:t.config.apiKey},a)).slice(1),A=await t._getAdditionalHeaders();A["Content-Type"]="application/json",t.languageCode&&(A["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:A},i);return YP()||(c.referrerPolicy="no-referrer"),I3.fetch()(k3(t,t.config.apiHost,r,o),c)})}async function E3(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},tV),e);try{const s=new sV(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw J0(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[A,c]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw J0(t,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw J0(t,"email-already-in-use",a);if(A==="USER_DISABLED")throw J0(t,"user-disabled",a);const u=n[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw C3(t,u,c);Za(t,u)}}catch(s){if(s instanceof xA)throw s;Za(t,"network-request-failed",{message:String(s)})}}async function h1(t,e,r,n,s={}){const i=await ac(t,e,r,n,s);return"mfaPendingCredential"in i&&Za(t,"multi-factor-auth-required",{_serverResponse:i}),i}function k3(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?TB(t.config,s):`${t.config.apiScheme}://${s}`}function nV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(So(this.auth,"network-request-failed")),rV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function J0(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=So(t,e,n);return s.customData._tokenResponse=r,s}function CI(t){return t!==void 0&&t.enterprise!==void 0}class iV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return nV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function aV(t,e){return ac(t,"GET","/v2/recaptchaConfig",uu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(t,e){return ac(t,"POST","/v1/accounts:delete",e)}async function S3(t,e){return ac(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AV(t,e=!1){const r=An(t),n=await r.getIdToken(e),s=UB(n);rr(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Pf(Tx(s.auth_time)),issuedAtTime:Pf(Tx(s.iat)),expirationTime:Pf(Tx(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Tx(t){return Number(t)*1e3}function UB(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Zg("JWT malformed, contained fewer than 3 sections"),null;try{const s=LN(r);return s?JSON.parse(s):(Zg("Failed to decode base64 JWT payload"),null)}catch(s){return Zg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function II(t){const e=UB(t);return rr(e,"internal-error"),rr(typeof e.exp<"u","internal-error"),rr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof xA&&lV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function lV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pf(this.lastLoginAt),this.creationTime=Pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nw(t){var e;const r=t.auth,n=await t.getIdToken(),s=await _p(t,S3(r,{idToken:n}));rr(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?N3(i.providerUserInfo):[],o=dV(t.providerData,a),A=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=A?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new W2(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function uV(t){const e=An(t);await nw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dV(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function N3(t){return t.map(e=>{var{providerId:r}=e,n=NB(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e){const r=await E3(t,{},async()=>{const n=Pp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=k3(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",I3.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function fV(t,e){return ac(t,"POST","/v2/accounts:revokeToken",uu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rr(e.idToken,"internal-error"),rr(typeof e.idToken<"u","internal-error"),rr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):II(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){rr(e.length!==0,"internal-error");const r=II(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(rr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await hV(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new fd;return n&&(rr(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(rr(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(rr(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fd,this.toJSON())}_performRefresh(){return tA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e){rr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rA{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=NB(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new W2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await _p(this,this.stsTokenManager.getToken(this.auth,e));return rr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return AV(this,e)}reload(){return uV(this)}_assign(e){this!==e&&(rr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new rA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){rr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await nw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zo(this.auth.app))return Promise.reject(Tl(this.auth));const e=await this.getIdToken();return await _p(this,oV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,A,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,g=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,v=(a=r.photoURL)!==null&&a!==void 0?a:void 0,y=(o=r.tenantId)!==null&&o!==void 0?o:void 0,S=(A=r._redirectEventId)!==null&&A!==void 0?A:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,I=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:U,isAnonymous:D,providerData:P,stsTokenManager:E}=r;rr(N&&E,e,"internal-error");const _=fd.fromJSON(this.name,E);rr(typeof N=="string",e,"internal-error"),$A(d,e.name),$A(p,e.name),rr(typeof U=="boolean",e,"internal-error"),rr(typeof D=="boolean",e,"internal-error"),$A(g,e.name),$A(v,e.name),$A(y,e.name),$A(S,e.name),$A(x,e.name),$A(I,e.name);const B=new rA({uid:N,auth:e,email:p,emailVerified:U,displayName:d,isAnonymous:D,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:_,createdAt:x,lastLoginAt:I});return P&&Array.isArray(P)&&(B.providerData=P.map(Q=>Object.assign({},Q))),S&&(B._redirectEventId=S),B}static async _fromIdTokenResponse(e,r,n=!1){const s=new fd;s.updateFromServerResponse(r);const i=new rA({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await nw(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];rr(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?N3(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new fd;o.updateFromIdToken(n);const A=new rA({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new W2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(A,c),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new Map;function nA(t){fA(t instanceof Function,"Expected a class definition");let e=EI.get(t);return e?(fA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}F3.type="NONE";const kI=F3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,r){return`firebase:${t}:${e}:${r}`}class pd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=em(this.userKey,s.apiKey,i),this.fullPersistenceKey=em("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?rA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new pd(nA(kI),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||nA(kI);const a=em(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const d=rA._fromJSON(e,u);c!==i&&(o=d),i=c;break}}catch{}const A=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!A.length?new pd(i,e,n):(i=A[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new pd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R3(e))return"Blackberry";if(P3(e))return"Webos";if(U3(e))return"Safari";if((e.includes("chrome/")||L3(e))&&!e.includes("edge/"))return"Chrome";if(j3(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function T3(t=vs()){return/firefox\//i.test(t)}function U3(t=vs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L3(t=vs()){return/crios\//i.test(t)}function Q3(t=vs()){return/iemobile/i.test(t)}function j3(t=vs()){return/android/i.test(t)}function R3(t=vs()){return/blackberry/i.test(t)}function P3(t=vs()){return/webos/i.test(t)}function LB(t=vs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pV(t=vs()){var e;return LB(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gV(){return tD()&&document.documentMode===10}function D3(t=vs()){return LB(t)||j3(t)||P3(t)||R3(t)||/windows phone/i.test(t)||Q3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t,e=[]){let r;switch(t){case"Browser":r=SI(vs());break;case"Worker":r=`${SI(vs())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Zd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const A=e(i);a(A)}catch(A){o(A)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV(t,e={}){return ac(t,"GET","/v2/passwordPolicy",uu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=6;class vV{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:xV,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=(r=A.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),A.isValid&&(A.isValid=(n=A.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),A.isValid&&(A.isValid=(s=A.containsLowercaseLetter)!==null&&s!==void 0?s:!0),A.isValid&&(A.isValid=(i=A.containsUppercaseLetter)!==null&&i!==void 0?i:!0),A.isValid&&(A.isValid=(a=A.containsNumericCharacter)!==null&&a!==void 0?a:!0),A.isValid&&(A.isValid=(o=A.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),A}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NI(this),this.idTokenSubscription=new NI(this),this.beforeStateQueue=new mV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=nA(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await pd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await S3(this,{idToken:e}),n=await rA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Zo(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,A=await this.tryRedirectSignIn(e);(!a||a===o)&&(A!=null&&A.user)&&(s=A.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return rr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await nw(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zo(this.app))return Promise.reject(Tl(this));const r=e?An(e):null;return r&&rr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&rr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zo(this.app)?Promise.reject(Tl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zo(this.app)?Promise.reject(Tl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wV(this),r=new vV(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await fV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&nA(e)||this._popupRedirectResolver;rr(r,this,"argument-error"),this.redirectPersistenceManager=await pd.create(this,[nA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(rr(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const A=e.addObserver(r,n,s);return()=>{a=!0,A()}}else{const A=e.addObserver(r);return()=>{a=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&XH(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function dh(t){return An(t)}class NI{constructor(e){this.auth=e,this.observer=null,this.addObserver=oD(r=>this.observer=r)}get next(){return rr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bV(t){f1=t}function O3(t){return f1.loadJS(t)}function BV(){return f1.recaptchaEnterpriseScript}function _V(){return f1.gapiScript}function CV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const IV="recaptcha-enterprise",EV="NO_RECAPTCHA";class kV{constructor(e){this.type=IV,this.auth=dh(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{aV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new iV(A);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(A=>{o(A)})})}function s(i,a,o){const A=window.grecaptcha;CI(A)?A.enterprise.ready(()=>{A.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(EV)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&CI(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=BV();A.length!==0&&(A+=o),O3(A).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function FI(t,e,r,n=!1){const s=new kV(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function TI(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await FI(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await FI(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t,e){const r=Dp(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Rl(i,e??{}))return s;Za(s,"already-initialized")}return r.initialize({options:e})}function NV(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(nA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function FV(t,e,r){const n=dh(t);rr(n._canInitEmulator,n,"emulator-config-failed"),rr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=H3(e),{host:a,port:o}=TV(e),A=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${A}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),UV()}function H3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TV(t){const e=H3(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:UI(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:UI(a)}}}function UI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UV(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return tA("not implemented")}_getIdTokenResponse(e){return tA("not implemented")}_linkToIdToken(e,r){return tA("not implemented")}_getReauthenticationResolver(e){return tA("not implemented")}}async function LV(t,e){return ac(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t,e){return h1(t,"POST","/v1/accounts:signInWithPassword",uu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return h1(t,"POST","/v1/accounts:signInWithEmailLink",uu(t,e))}async function RV(t,e){return h1(t,"POST","/v1/accounts:signInWithEmailLink",uu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends QB{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Cp(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Cp(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TI(e,r,"signInWithPassword",QV);case"emailLink":return jV(e,{email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TI(e,n,"signUpPassword",LV);case"emailLink":return RV(e,{idToken:r,email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(t,e){return h1(t,"POST","/v1/accounts:signInWithIdp",uu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="http://localhost";class tu extends QB{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new tu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Za("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=NB(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new tu(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return gd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,gd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,gd(e,r)}buildRequest(){const e={requestUri:PV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Pp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MV(t){const e=Af(lf(t)).link,r=e?Af(lf(e)).deep_link_id:null,n=Af(lf(t)).deep_link_id;return(n?Af(lf(n)).link:null)||n||r||e||t}class jB{constructor(e){var r,n,s,i,a,o;const A=Af(lf(e)),c=(r=A.apiKey)!==null&&r!==void 0?r:null,u=(n=A.oobCode)!==null&&n!==void 0?n:null,d=DV((s=A.mode)!==null&&s!==void 0?s:null);rr(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(i=A.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=A.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=A.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=MV(e);try{return new jB(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.providerId=hh.PROVIDER_ID}static credential(e,r){return Cp._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=jB.parseLink(r);return rr(n,"argument-error"),Cp._fromEmailAndCode(e,n.code,n.tenantId)}}hh.PROVIDER_ID="password";hh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends V3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends r0{constructor(){super("facebook.com")}static credential(e){return tu._fromParams({providerId:ol.PROVIDER_ID,signInMethod:ol.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ol.credentialFromTaggedObject(e)}static credentialFromError(e){return ol.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ol.credential(e.oauthAccessToken)}catch{return null}}}ol.FACEBOOK_SIGN_IN_METHOD="facebook.com";ol.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends r0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return tu._fromParams({providerId:Al.PROVIDER_ID,signInMethod:Al.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Al.credentialFromTaggedObject(e)}static credentialFromError(e){return Al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Al.credential(r,n)}catch{return null}}}Al.GOOGLE_SIGN_IN_METHOD="google.com";Al.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends r0{constructor(){super("github.com")}static credential(e){return tu._fromParams({providerId:ll.PROVIDER_ID,signInMethod:ll.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ll.credentialFromTaggedObject(e)}static credentialFromError(e){return ll.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ll.credential(e.oauthAccessToken)}catch{return null}}}ll.GITHUB_SIGN_IN_METHOD="github.com";ll.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends r0{constructor(){super("twitter.com")}static credential(e,r){return tu._fromParams({providerId:cl.PROVIDER_ID,signInMethod:cl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return cl.credentialFromTaggedObject(e)}static credentialFromError(e){return cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return cl.credential(r,n)}catch{return null}}}cl.TWITTER_SIGN_IN_METHOD="twitter.com";cl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await rA._fromIdTokenResponse(e,n,s),a=LI(n);return new Gd({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=LI(n);return new Gd({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function LI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends xA{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,sw.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new sw(e,r,n,s)}}function K3(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sw._fromErrorAndOperation(t,i,e,n):i})}async function OV(t,e,r=!1){const n=await _p(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Gd._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e,r=!1){const{auth:n}=t;if(Zo(n.app))return Promise.reject(Tl(n));const s="reauthenticate";try{const i=await _p(t,K3(n,s,e,t),r);rr(i.idToken,n,"internal-error");const a=UB(i.idToken);rr(a,n,"internal-error");const{sub:o}=a;return rr(t.uid===o,n,"user-mismatch"),Gd._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Za(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t,e,r=!1){if(Zo(t.app))return Promise.reject(Tl(t));const n="signIn",s=await K3(t,n,e),i=await Gd._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function VV(t,e){return z3(dh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(t){const e=dh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function zV(t,e,r){return Zo(t.app)?Promise.reject(Tl(t)):VV(An(t),hh.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&KV(t),n})}function GV(t,e,r,n){return An(t).onIdTokenChanged(e,r,n)}function $V(t,e,r){return An(t).beforeAuthStateChanged(e,r)}function qV(t,e,r,n){return An(t).onAuthStateChanged(e,r,n)}function WV(t){return An(t).signOut()}const iw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(iw,"1"),this.storage.removeItem(iw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=1e3,XV=10;class $3 extends G3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);gV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,XV):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},JV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}$3.type="LOCAL";const YV=$3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3 extends G3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}q3.type="SESSION";const W3=q3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new p1(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),A=await ZV(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:A})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,A)=>{const c=RB("",20);s.port1.start();const u=setTimeout(()=>{A(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(p.data.response);break;default:clearTimeout(u),clearTimeout(i),A(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){return window}function t9(t){No().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(){return typeof No().WorkerGlobalScope<"u"&&typeof No().importScripts=="function"}async function r9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s9(){return J3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="firebaseLocalStorageDb",i9=1,aw="firebaseLocalStorage",Y3="fbase_key";class n0{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function g1(t,e){return t.transaction([aw],e?"readwrite":"readonly").objectStore(aw)}function a9(){const t=indexedDB.deleteDatabase(X3);return new n0(t).toPromise()}function J2(){const t=indexedDB.open(X3,i9);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(aw,{keyPath:Y3})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(aw)?e(n):(n.close(),await a9(),e(await J2()))})})}async function QI(t,e,r){const n=g1(t,!0).put({[Y3]:e,value:r});return new n0(n).toPromise()}async function o9(t,e){const r=g1(t,!1).get(e),n=await new n0(r).toPromise();return n===void 0?null:n.value}function jI(t,e){const r=g1(t,!0).delete(e);return new n0(r).toPromise()}const A9=800,l9=3;class Z3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>l9)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p1._getInstance(s9()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await r9(),!this.activeServiceWorker)return;this.sender=new e9(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J2();return await QI(e,iw,"1"),await jI(e,iw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>QI(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>o9(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>jI(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=g1(s,!1).getAll();return new n0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z3.type="LOCAL";const c9=Z3;new t0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t,e){return e?nA(e):(rr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB extends QB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return gd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return gd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function d9(t){return z3(t.auth,new PB(t),t.bypassAuthState)}function h9(t){const{auth:e,user:r}=t;return rr(r,e,"internal-error"),HV(r,new PB(t),t.bypassAuthState)}async function f9(t){const{auth:e,user:r}=t;return rr(r,e,"internal-error"),OV(r,new PB(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d9;case"linkViaPopup":case"linkViaRedirect":return f9;case"reauthViaPopup":case"reauthViaRedirect":return h9;default:Za(this.auth,"internal-error")}}resolve(e){fA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new t0(2e3,1e4);class rd extends eU{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,rd.currentPopupAction&&rd.currentPopupAction.cancel(),rd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rr(e,this.auth,"internal-error"),e}async onExecution(){fA(this.filter.length===1,"Popup operations only handle one event");const e=RB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(So(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(So(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(So(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,p9.get())};e()}}rd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="pendingRedirect",tm=new Map;class m9 extends eU{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=tm.get(this.auth._key());if(!e){try{const n=await w9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}tm.set(this.auth._key(),e)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w9(t,e){const r=y9(e),n=v9(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function x9(t,e){tm.set(t._key(),e)}function v9(t){return nA(t._redirectPersistence)}function y9(t){return em(g9,t.config.apiKey,t.name)}async function b9(t,e,r=!1){if(Zo(t.app))return Promise.reject(Tl(t));const n=dh(t),s=u9(n,e),a=await new m9(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=10*60*1e3;class _9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C9(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!tU(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(So(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B9&&this.cachedEventUids.clear(),this.cachedEventUids.has(RI(e))}saveEventToCache(e){this.cachedEventUids.add(RI(e)),this.lastProcessedEventTime=Date.now()}}function RI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(t,e={}){return ac(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k9=/^https?/;async function S9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I9(t);for(const r of e)try{if(N9(r))return}catch{}Za(t,"unauthorized-domain")}function N9(t){const e=q2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!k9.test(r))return!1;if(E9.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=new t0(3e4,6e4);function PI(){const t=No().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function T9(t){return new Promise((e,r)=>{var n,s,i;function a(){PI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PI(),r(So(t,"network-request-failed"))},timeout:F9.get()})}if(!((s=(n=No().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=No().gapi)===null||i===void 0)&&i.load)a();else{const o=CV("iframefcb");return No()[o]=()=>{gapi.load?a():r(So(t,"network-request-failed"))},O3(`${_V()}?onload=${o}`).catch(A=>r(A))}}).catch(e=>{throw rm=null,e})}let rm=null;function U9(t){return rm=rm||T9(t),rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=new t0(5e3,15e3),Q9="__/auth/iframe",j9="emulator/auth/iframe",R9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D9(t){const e=t.config;rr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?TB(e,j9):`https://${t.config.authDomain}/${Q9}`,n={apiKey:e.apiKey,appName:t.name,v:Zd},s=P9.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Pp(n).slice(1)}`}async function M9(t){const e=await U9(t),r=No().gapi;return rr(r,t,"internal-error"),e.open({where:document.body,url:D9(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R9,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=So(t,"network-request-failed"),o=No().setTimeout(()=>{i(a)},L9.get());function A(){No().clearTimeout(o),s(n)}n.ping(A).then(A,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H9=500,V9=600,K9="_blank",z9="http://localhost";class DI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G9(t,e,r,n=H9,s=V9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const A=Object.assign(Object.assign({},O9),{width:n.toString(),height:s.toString(),top:i,left:a}),c=vs().toLowerCase();r&&(o=L3(c)?K9:r),T3(c)&&(e=e||z9,A.scrollbars="yes");const u=Object.entries(A).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(pV(c)&&o!=="_self")return $9(e||"",o),new DI(null);const d=window.open(e||"",o,u);rr(d,t,"popup-blocked");try{d.focus()}catch{}return new DI(d)}function $9(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="__/auth/handler",W9="emulator/auth/handler",J9=encodeURIComponent("fac");async function MI(t,e,r,n,s,i){rr(t.config.authDomain,t,"auth-domain-config-required"),rr(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Zd,eventId:s};if(e instanceof V3){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",aD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof r0){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const A=await t._getAppCheckToken(),c=A?`#${J9}=${encodeURIComponent(A)}`:"";return`${X9(t)}?${Pp(o).slice(1)}${c}`}function X9({config:t}){return t.emulator?TB(t,W9):`https://${t.authDomain}/${q9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="webStorageSupport";class Y9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=W3,this._completeRedirectFn=b9,this._overrideRedirectResult=x9}async _openPopup(e,r,n,s){var i;fA((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await MI(e,r,n,q2(),s);return G9(e,a,RB())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await MI(e,r,n,q2(),s);return t9(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(fA(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await M9(e),n=new _9(e);return r.register("authEvent",s=>(rr(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Ux,{type:Ux},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ux];a!==void 0&&r(!!a),Za(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=S9(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return D3()||U3()||LB()}}const Z9=Y9;var OI="@firebase/auth",HI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){rr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rK(t){Nd(new zc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;rr(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const A={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M3(t)},c=new yV(n,s,i,A);return NV(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Nd(new zc("auth-internal",e=>{const r=dh(e.getProvider("auth").getImmediate());return(n=>new eK(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fl(OI,HI,tK(t)),Fl(OI,HI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=5*60,sK=RN("authIdTokenMaxAge")||nK;let VI=null;const iK=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>sK)return;const s=r==null?void 0:r.token;VI!==s&&(VI=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aK(t=Sb()){const e=Dp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=SV(t,{popupRedirectResolver:Z9,persistence:[c9,YV,W3]}),n=RN("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=iK(i.toString());$V(r,a,()=>a(r.currentUser)),GV(r,o=>a(o))}}const s=QN("auth");return s&&FV(r,`http://${s}`),r}function oK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bV({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=So("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",oK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rK("Browser");const AK="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",lK="zameny-b6c3f.firebaseapp.com",cK="zameny-b6c3f",uK="zameny-b6c3f.firebasestorage.app",dK="323355347910",hK="1:323355347910:web:c81f2813dce5ee9373c0c7",rU={apiKey:AK,authDomain:lK,projectId:cK,storageBucket:uK,messagingSenderId:dK,appId:hK};let ow;l8().length?ow=Sb():ow=HN(rU);const Bs=YT(ow),Ea=aK(ow);rU.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const qr={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule",NUTRITION:"nutrition_records",ABSENTEEISM:"absenteeism_records"},Iu=new Map,fK=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},nd=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>nd(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=nd(n);s!==void 0&&(e[r]=s)}return e}return t},nU=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!nU(t[s],e[s]))return!1;return!0}return!1};async function pK(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const os={syncCollection:async(t,e)=>{if(!Bs)return;let r=Iu.get(t);r||(r=new Map,Iu.set(t,r));const n=new Map;e.forEach(i=>{i&&i.id&&n.set(i.id,nd(i))});const s=[];if(r.forEach((i,a)=>{n.has(a)||s.push({type:"delete",id:a})}),n.forEach((i,a)=>{const o=r.get(a);(!o||!nU(o,i))&&s.push({type:o?"update":"create",item:i,id:a})}),s.length!==0)try{const i=fK(s,450);for(const a of i){const o=v3(Bs);a.forEach(A=>{const c=wo(Bs,t,A.id);A.type==="delete"?(o.delete(c),r.delete(A.id)):(o.set(c,A.item,{merge:!0}),r.set(A.id,A.item))}),await o.commit()}}catch(i){throw console.error(`Failed to sync ${t}:`,i),i}},syncCacheWithDatabase:async t=>{if(Bs){if(Iu.has(t)&&Iu.get(t).size>0){console.log(`Cache already exists for ${t}, skipping sync`);return}try{const e=$2(z2(Bs,t)),r=await pK(async()=>await f3(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),Iu.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)}catch(e){console.error(`Failed to sync cache for ${t}:`,e)}}},save:async(t,e)=>{if(!Bs||!(e||(Ea==null?void 0:Ea.currentUser)))return;const n=[];t.teachers&&n.push(os.syncCollection(qr.TEACHERS,t.teachers)),t.subjects&&n.push(os.syncCollection(qr.SUBJECTS,t.subjects)),t.classes&&n.push(os.syncCollection(qr.CLASSES,t.classes)),t.rooms&&n.push(os.syncCollection(qr.ROOMS,t.rooms)),t.schedule&&n.push(os.syncCollection(qr.SCHEDULE_1,t.schedule)),t.schedule2&&n.push(os.syncCollection(qr.SCHEDULE_2,t.schedule2)),t.substitutions&&n.push(os.syncCollection(qr.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&n.push(os.syncCollection(qr.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&n.push(os.syncCollection(qr.DUTY_SCHEDULE,t.dutySchedule)),t.nutritionRecords&&n.push(os.syncCollection(qr.NUTRITION,t.nutritionRecords)),t.absenteeismRecords&&n.push(os.syncCollection(qr.ABSENTEEISM,t.absenteeismRecords)),t.settings&&n.push(Xg(wo(Bs,qr.CONFIG,"settings"),nd(t.settings),{merge:!0})),t.bellSchedule&&n.push(Xg(wo(Bs,qr.CONFIG,"bells"),nd({items:t.bellSchedule}))),await Promise.all(n)},subscribe:(t,e)=>{if(!Bs)return()=>{};let r={},n=!0,s;const i=()=>{clearTimeout(s),s=setTimeout(async()=>{const A={...r};n&&(n=!1,console.log("Skipping initial cache synchronization to save Firestore quota")),t(A)},50)},a=[],o=(A,c)=>{const u=$2(z2(Bs,A));return Yg(u,d=>{const p=d.docs.map(v=>v.data()),g=new Map;p.forEach(v=>{v&&v.id&&g.set(v.id,v)}),Iu.set(A,g),p.sort((v,y)=>{const S=typeof v.order=="number"?v.order:999999,x=typeof y.order=="number"?y.order:999999;return S-x}),r[c]=p,i()},d=>{console.warn(`Error reading ${A}:`,d)})};return a.push(o(qr.TEACHERS,"teachers")),a.push(o(qr.SUBJECTS,"subjects")),a.push(o(qr.CLASSES,"classes")),a.push(o(qr.ROOMS,"rooms")),a.push(o(qr.SCHEDULE_1,"schedule")),a.push(o(qr.SCHEDULE_2,"schedule2")),a.push(o(qr.SUBSTITUTIONS,"substitutions")),a.push(o(qr.DUTY_ZONES,"dutyZones")),a.push(o(qr.DUTY_SCHEDULE,"dutySchedule")),a.push(o(qr.NUTRITION,"nutritionRecords")),a.push(o(qr.ABSENTEEISM,"absenteeismRecords")),a.push(Yg(wo(Bs,qr.CONFIG,"settings"),A=>{A.exists()&&(r.settings={...Ni.settings,...A.data()},i())})),a.push(Yg(wo(Bs,qr.CONFIG,"bells"),A=>{if(A.exists()){const c=A.data();r.bellSchedule=c.items||Ni.bellSchedule,i()}})),()=>{a.forEach(A=>A()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(i=new Date)=>{const a=i.getFullYear(),o=String(i.getMonth()+1).padStart(2,"0"),A=String(i.getDate()).padStart(2,"0");return`${a}-${o}-${A}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Bs)throw new Error("Database not initialized");const r=Ea==null?void 0:Ea.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(i=>({id:i.id,name:i.name,color:i.color,difficulty:i.difficulty,requiredRoomType:i.requiredRoomType,order:i.order})),teachers:e.teachers.map(i=>({id:i.id,name:i.name,subjectIds:i.subjectIds,shifts:i.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:i.order})),classes:e.classes.map(i=>({id:i.id,name:i.name,shift:i.shift,studentsCount:i.studentsCount,order:i.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=nd(n);await Xg(wo(Bs,qr.PUBLIC,t),s)},getPublicData:async t=>{if(!Bs)return null;try{const e=await Hg(()=>Promise.resolve().then(()=>WH),void 0).then(r=>r.getDoc(wo(Bs,qr.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Bs&&await p3(wo(Bs,qr.PUBLIC,t))}},sU=G.createContext(void 0),gK="admin@gymnasium22.com",mK=({children:t})=>{const[e,r]=G.useState(null),[n,s]=G.useState(null),[i,a]=G.useState(!0);G.useEffect(()=>{if(!Ea){console.warn("Firebase Auth is not initialized."),a(!1);return}const c=qV(Ea,u=>{r(u),u?u.email===gK?s("admin"):u.email==="canteen@gymnasium22.com"?s("canteen"):u.email&&u.email.includes("@")?s("teacher"):s("guest"):s(null),a(!1)});return()=>c()},[]);const o=async()=>{Ea&&await WV(Ea),s(null)},A=()=>{s("guest"),a(!1)};return l.jsx(sU.Provider,{value:{user:e,role:n,loading:i,logout:o,setGuestRole:A},children:t})},_A=()=>{const t=G.useContext(sU);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},ai=()=>crypto.randomUUID(),s0=(t,e)=>{const r=t.getMonth(),n=e==null?void 0:e.semesterConfig;if(n){if(n.secondSemesterMonths.includes(r))return 2;if(n.firstSemesterMonths.includes(r))return 1}return r>=0&&r<=4?2:1},iU=(t,e)=>s0(t,e.settings)===2?e.schedule2||[]:e.schedule||[],iA=(t=new Date)=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},wK=iA,aU=G.createContext(void 0),Wh="gym_data_local_backup_v2",KI="gym_sync_queue_backup",Jh=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},ff=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},oU=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},Yn={items:[],isProcessing:!1,load:()=>{const t=oU(KI);if(t)try{const e=JSON.parse(t);Array.isArray(e)&&(Yn.items=e,console.log(`Loaded ${e.length} pending items from sync queue`))}catch(e){console.warn("Failed to parse persistent sync queue",e)}},save:()=>{try{ff(KI,JSON.stringify(Yn.items))}catch(t){console.warn("Failed to save sync queue",t)}},add:t=>{const e=ai();Yn.items.push({id:e,data:t,timestamp:Date.now(),retryCount:0}),Yn.save(),console.log("   :",e)},process:async t=>{if(Yn.isProcessing||!navigator.onLine)return;Yn.isProcessing=!0;const e=[];try{for(const r of Yn.items){if(!navigator.onLine)break;try{await os.save(r.data,t),e.push(r.id),console.log(" :",r.id)}catch(n){if(r.retryCount++,(n==null?void 0:n.code)==="resource-exhausted"){console.warn("Quota exhausted, keeping item in queue:",r.id);break}r.retryCount>=10?(console.error("    10 :",r.id),e.push(r.id)):console.log(`   ${r.retryCount}/10:`,r.id)}}}finally{e.length>0&&(Yn.items=Yn.items.filter(r=>!e.includes(r.id)),Yn.save()),Yn.isProcessing=!1,Yn.items.length>0&&navigator.onLine&&setTimeout(()=>Yn.process(t),5e3)}}},qA={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)},firebaseOffline:(t,e,r)=>{const n=window.innerWidth<768,s=n?" .     .":` ${e}.         .`;console.warn(`Firebase ${e} ():`,t),n||alert(s),Yn.add(r)}},AU=({children:t,initialData:e})=>{const[r,n]=G.useState(Ni),[s,i]=G.useState(!0),[a,o]=G.useState(!1),[A,c]=G.useState([]),[u,d]=G.useState(-1),{user:p,role:g,loading:v}=_A();G.useEffect(()=>{if(Yn.load(),e){n(e),c([e]),d(0),i(!1);return}if(v)return;let U=null;if(Jh()&&(U=oU(Wh),U))try{const _=JSON.parse(U);_&&_.teachers&&(n(B=>({...B,..._})),console.log("Loaded from local storage backup"))}catch(_){qA.log("Error parsing local backup",_)}const D=p&&g!=="guest";if(!(p||g==="guest")){n(Ni),i(!1);return}if(!D){U||n(Ni),i(!1);return}i(!0);let E;try{E=os.subscribe(_=>{n(B=>{const Q={...B,..._};return Q.teachers||(Q.teachers=[]),Q.teachers=Q.teachers.map(k=>({telegramChatId:"",...k,shifts:k.shifts||[Ze.First,Ze.Second]})),Q.schedule||(Q.schedule=[]),Q.schedule2||(Q.schedule2=[]),Q.substitutions||(Q.substitutions=[]),Q.bellSchedule||(Q.bellSchedule=Mm),(!Q.dutyZones||Q.dutyZones.length===0)&&(Q.dutyZones=FN),Q.dutySchedule||(Q.dutySchedule=[]),Q.nutritionRecords||(Q.nutritionRecords=[]),Q.absenteeismRecords||(Q.absenteeismRecords=[]),Q.settings?Q.settings={...Ni.settings,...Q.settings}:Q.settings=Ni.settings,Yn.items.length>0&&(console.log(`Applying ${Yn.items.length} pending changes to incoming data`),Yn.items.forEach(k=>{Object.assign(Q,k.data)})),Jh()&&ff(Wh,JSON.stringify(Q)),c(k=>k.length===0?[Q]:k),Q}),i(!1)},_=>{qA.log("Failed to subscribe to data:",_),i(!1)})}catch(_){qA.log("Failed to initialize subscription:",_),i(!1),E=void 0}return()=>{E&&E()}},[e,p,g,v]);const y=G.useCallback(async(U,D=!0)=>{const P=g==="guest";o(!0);try{const E={...r,...U};if(n(E),Jh()&&ff(Wh,JSON.stringify(E)),!e&&p&&!P)try{await os.save(U,p)}catch(_){qA.firebaseOffline(_," ",U)}else P&&console.warn("       .");if(D){const _=A.slice(0,u+1);_.push(E);const B=50;if(_.length>B){const Q=_.length-B;_.splice(0,Q),d(B-1)}else d(_.length-1);c(_)}}finally{o(!1)}},[r,A,u,p,g,e]);G.useEffect(()=>{const U=()=>{Yn.items.length>0&&p&&g!=="guest"&&!e&&(console.log(` .  ${Yn.items.length} ...`),Yn.process(p))};return window.addEventListener("online",U),()=>window.removeEventListener("online",U)},[p,g,e]);const S=G.useCallback(async()=>{d(U=>{if(U>0){const D=A[U-1];if(n(D),Jh()&&ff(Wh,JSON.stringify(D)),!e&&p)try{os.save(D,p).catch(P=>qA.firebase(P," "))}catch(P){qA.firebase(P," ")}return U-1}return U})},[A,e,p]),x=G.useCallback(async()=>{d(U=>{if(U<A.length-1){const D=A[U+1];if(n(D),Jh()&&ff(Wh,JSON.stringify(D)),!e&&p)try{os.save(D,p).catch(P=>qA.firebase(P," "))}catch(P){qA.firebase(P," ")}return U+1}return U})},[A,e,p]),I=G.useCallback(async()=>{await y(Ni)},[y]),N=G.useMemo(()=>({data:r,isLoading:s,isSaving:a,saveData:y,resetData:I,undo:S,redo:x,canUndo:u>0,canRedo:u<A.length-1}),[r,s,a,y,I,S,x,u]);return l.jsx(aU.Provider,{value:N,children:t})},m1=()=>{const t=G.useContext(aU);if(!t)throw new Error("useFullData must be used within DataProvider");return t},lU=G.createContext(void 0),cU=G.createContext(void 0),uU=({children:t})=>{const{data:e,saveData:r}=m1(),n=G.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=G.useCallback(async(a,o)=>{await r(a,o)},[r]),i=G.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return l.jsx(lU.Provider,{value:i,children:t})},dU=({children:t})=>{const{data:e,saveData:r}=m1(),i=s0(new Date,e.settings)===2?e.schedule2||[]:e.schedule||[],a=G.useCallback(async(u,d)=>{u===1?await r({schedule:d}):await r({schedule2:d})},[r]),o=G.useCallback(async(u,d)=>{await r(u,d)},[r]),A=G.useMemo(()=>({schedule:i,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,nutritionRecords:e.nutritionRecords||[],absenteeismRecords:e.absenteeismRecords||[],saveSemesterSchedule:a,saveScheduleData:o}),[i,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,e.nutritionRecords,e.absenteeismRecords,a,o]),c=G.useMemo(()=>({...A,saveScheduleData:o}),[A,o]);return l.jsx(cU.Provider,{value:c,children:t})},Pi=()=>{const t=G.useContext(lU);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=m1();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||Ni.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},CA=()=>{const t=G.useContext(cU);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=m1();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[],nutritionRecords:t.nutritionRecords||[],absenteeismRecords:t.absenteeismRecords||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},zI={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),l.jsx("path",{d:"m20 16-4-4 4-4"}),l.jsx("path",{d:"m4 8 4 4-4 4"}),l.jsx("path",{d:"m16 4-4 4-4-4"}),l.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Coffee:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),Edit:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Info:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),WifiOff:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),l.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),l.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),l.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),l.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),l.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),l.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),Cloud:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17.5 19c0-1.7-1.3-3-3-3h-1.1c-.2-2.3-2.1-4-4.4-4-2.5 0-4.5 1.8-4.9 4.2-2.3.2-4.1 2.2-4.1 4.5 0 2.5 2 4.5 4.5 4.5h8.5c2.5 0 4.5-2 4.5-4.5z"})}),CloudRain:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"21"}),l.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"21"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"23"}),l.jsx("path",{d:"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"})]}),Wind:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"})}),Droplets:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"}),l.jsx("path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"})]}),Thermometer:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"})})},ve=({name:t,size:e=24,className:r="",...n})=>{const s=zI[t]||zI.Info;return l.jsx(s,{width:e,height:e,className:r,...n})},hU=G.createContext(void 0),xK=({children:t})=>{const[e,r]=G.useState([]),n=i=>{const a=ai();r(o=>[...o,{...i,id:a}])},s=i=>{r(a=>a.filter(o=>o.id!==i))};return l.jsxs(hU.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,l.jsx(vK,{toasts:e,onRemoveToast:s})]})},w1=()=>{const t=G.useContext(hU);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},vK=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:l.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&l.jsx("div",{className:"flex justify-end mb-2",children:l.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>l.jsx(yK,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},cs=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(G.useEffect(()=>{if(!t)return;const i=a=>{a.key==="Escape"&&e()};return document.addEventListener("keydown",i),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",i),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:i=>i.target===i.currentTarget&&e(),children:l.jsxs("div",{className:`bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx(ve,{name:"X",size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),yK=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:i})=>{const[a,o]=G.useState(!0),[A,c]=G.useState(!1),u=G.useRef(null);G.useEffect(()=>(u.current=setTimeout(()=>{d()},s),()=>{u.current&&clearTimeout(u.current)}),[]);const d=()=>{u.current&&(clearTimeout(u.current),u.current=null),c(!0),setTimeout(()=>{o(!1),i(t)},300)};if(!a)return null;const g=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),v=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return l.jsx("div",{className:`max-w-sm w-full animate-slide-in ${A?"animate-fade-out":""}`,children:l.jsx("div",{className:`modern-card border p-4 ${g.bg}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`flex-shrink-0 ${g.icon}`,children:l.jsx(ve,{name:v,size:20})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`text-sm font-semibold ${g.title}`,children:r}),n&&l.jsx("p",{className:`text-sm mt-1 ${g.message}`,children:n})]}),l.jsx("button",{onClick:d,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:l.jsx(ve,{name:"X",size:16})})]})})})},bK=({x:t,y:e,onClose:r,actions:n})=>{const s=G.useRef(null);if(G.useEffect(()=>{if(t===null||e===null)return;const o=c=>{s.current&&!s.current.contains(c.target)&&r()},A=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",o,!0),document.addEventListener("keydown",A),()=>{window.removeEventListener("click",o,!0),document.removeEventListener("keydown",A)}},[t,e,r]),t===null||e===null)return null;const i=window.innerWidth-t<200?t-200:t,a={top:e,left:i};return l.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:a,children:n.map(o=>l.jsxs("button",{onClick:A=>{A.stopPropagation(),o.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${o.color||"text-slate-700 dark:text-slate-200"}`,children:[o.icon&&l.jsx(ve,{name:o.icon,size:16}),o.label]},o.id||o.label))})},BK=()=>{const{bellSchedule:t,isSaving:e}=Pi(),[r,n]=G.useState("..."),[s,i]=G.useState(""),[a,o]=G.useState(0),[A,c]=G.useState("bg-slate-500"),[u,d]=G.useState(""),[p,g]=G.useState(navigator.onLine);return G.useEffect(()=>{const v=()=>g(!0),y=()=>g(!1);return window.addEventListener("online",v),window.addEventListener("offline",y),()=>{window.removeEventListener("online",v),window.removeEventListener("offline",y)}},[]),G.useEffect(()=>{const v=()=>{const S=new Date,x=S.getDay(),N=[null,cr.Monday,cr.Tuesday,cr.Wednesday,cr.Thursday,cr.Friday,null][x];if(d(N||""),!N){n(" "),i(" "),c("bg-slate-400"),o(0);return}const U=B=>{const[Q,k]=B.split(":").map(Number);return Q*60+k},D=S.getHours()*60+S.getMinutes();let P=t.filter(B=>B.day===N);P.length===0&&(P=t.filter(B=>B.day==="default")),P.sort((B,Q)=>U(B.start)-U(Q.start));let E=null,_=null;for(let B=0;B<P.length;B++){const Q=P[B],k=U(Q.start),L=U(Q.end);if(D>=k&&D<L){E={...Q,duration:L-k,passed:D-k};break}if(B<P.length-1){const T=P[B+1],Y=U(T.start);if(D>=L&&D<Y){const xe=Y-L;if(xe>0&&xe<60){const Be=D-L,_e=Y-D;_={nextLesson:T,duration:xe,passed:Be,remaining:_e};break}}}}if(E){n(`${E.period} `);const B=Math.max(0,E.duration-E.passed);i(`${E.shift===Ze.First?"1 ":"2 "}  . ${B} `);const Q=E.duration>0?E.passed/E.duration*100:0;o(Math.min(100,Math.max(0,Q))),c("bg-indigo-600")}else if(_){n(""),i(` ${_.remaining}  ${_.nextLesson.period} `),c("bg-amber-500");const B=_.duration>0?_.passed/_.duration*100:0;o(Math.min(100,Math.max(0,B)))}else n(" "),i(" "),c("bg-slate-400"),o(0)};v();const y=setInterval(v,6e4);return()=>clearInterval(y)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${A}`}),!p&&l.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-amber-500 text-white text-xs font-bold py-1 px-3 rounded-t-2xl text-center flex items-center justify-center gap-1",children:[l.jsx(ve,{name:"WifiOff",size:12}),l.jsx("span",{children:"      "})]}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:u}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),l.jsxs("div",{className:`w-8 h-8 rounded-full ${A} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(ve,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),!p&&!e&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(ve,{name:"WifiOff",size:16,className:"text-amber-500"})}),l.jsx(ve,{name:e?"Loader":p?"Clock":"WifiOff",size:16,className:e?"text-indigo-600 animate-spin":p?A==="bg-indigo-600"?"text-indigo-600":A==="bg-amber-500"?"text-amber-500":"text-slate-400":"text-amber-500"})]})]}),a>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${A} transition-all duration-1000`,style:{width:`${a}%`}})})]})},Df=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var v;const[i,a]=G.useState(!1),[o,A]=G.useState(""),c=G.useRef(null);G.useEffect(()=>{const y=x=>{c.current&&!c.current.contains(x.target)&&a(!1)},S=x=>{x.key==="Escape"&&a(!1)};return document.addEventListener("mousedown",y),document.addEventListener("keydown",S),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("keydown",S)}},[]);const d=((v=(s?t.flatMap(y=>y.options):t).find(y=>y.value===e))==null?void 0:v.label)||n,p=s?t.map(y=>({...y,options:y.options.filter(S=>S.label.toLowerCase().includes(o.toLowerCase()))})).filter(y=>y.options.length>0):null,g=s?null:t.filter(y=>y.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>a(!i),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:d}),l.jsx(ve,{name:"Filter",size:14,className:"text-slate-400"})]}),i&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:l.jsx("input",{autoFocus:!0,value:o,onChange:y=>A(y.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&p?p.map(y=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:y.label}),y.options.map(S=>l.jsx("div",{onClick:()=>{r(S.value),a(!1),A("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===S.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:S.label},S.value))]},y.id||y.label)):g?g.map(y=>l.jsx("div",{onClick:()=>{r(y.value),a(!1),A("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===y.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:y.label},y.value)):null]})]})},X0=({children:t,className:e=""})=>{const r=yo.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,s)=>{const i=yo.isValidElement(n)&&n.key?n.key:s;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},i)})})},Lx=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(s=>{const i=s.id??s.label,a=Math.min(100,Math.max(0,s.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${a}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},i)})})},_K=({onMenuClick:t,role:e})=>{const{settings:r}=Pi(),n=e==="admin",s=e==="teacher",i=e==="canteen",a=e==="guest",o=n||s,A=n||s||a,c=n||s||i,d=s0(new Date,r)===2?"/schedule2":"/schedule";return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:l.jsxs("div",{className:"flex justify-around items-center h-20",children:[o&&l.jsxs(vo,{to:"/dashboard",className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(ve,{name:"Home",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),A&&l.jsxs(vo,{to:d,className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(ve,{name:"Calendar",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),c&&l.jsxs(vo,{to:"/nutrition",className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(ve,{name:"Coffee",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),n&&l.jsxs(vo,{to:"/substitutions",className:({isActive:p})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${p?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(ve,{name:"Repeat",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),l.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 active:bg-indigo-50/50 dark:active:bg-indigo-900/20 transition-all duration-300 flex-1 h-full hover:bg-slate-100/50 dark:hover:bg-slate-700/30",children:[l.jsx(ve,{name:"Menu",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]})]})})},CK=[{id:"search",label:"",visible:!0},{id:"substitutions",label:"",visible:!0},{id:"occupancy",label:"",visible:!0},{id:"conflicts",label:"",visible:!0},{id:"birthdays",label:"",visible:!0},{id:"notes",label:"",visible:!0}],IK=()=>{const{settings:t}=Pi(),[e,r]=G.useState(null),[n,s]=G.useState([]),[i,a]=G.useState(!0),[o,A]=G.useState(null),c=t.weatherApiKey,u=t.weatherCity||"Minsk,BY";if(G.useEffect(()=>{(async()=>{if(!c){a(!1);return}const v="gym_weather_cache",y=30*60*1e3,S=localStorage.getItem(v);if(S)try{const x=JSON.parse(S);if(Date.now()-x.timestamp<y){r(x.current),s(x.forecast),a(!1);return}}catch{console.warn("Weather cache invalid")}try{const x=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${u}&units=metric&lang=ru&appid=${c}`);if(!x.ok)throw new Error("Weather API Error");const I=await x.json(),N=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${u}&units=metric&lang=ru&appid=${c}`);if(!N.ok)throw new Error("Forecast API Error");const U=await N.json(),D=[],P=new Set,E=new Date().toISOString().split("T")[0];for(const _ of U.list){const B=_.dt_txt.split(" ")[0];if(B!==E&&!P.has(B)&&(D.push(_),P.add(B),D.length>=3))break}r(I),s(D),a(!1),localStorage.setItem(v,JSON.stringify({timestamp:Date.now(),current:I,forecast:D}))}catch(x){console.error(x),A("  "),a(!1)}})()},[c,u]),!c)return null;if(i)return l.jsx("div",{className:"h-32 w-full bg-slate-100 dark:bg-slate-800 rounded-3xl animate-pulse"});if(o||!e)return null;const d=g=>g.startsWith("01")?"Sun":g.startsWith("02")||g.startsWith("03")||g.startsWith("04")?"Cloud":g.startsWith("09")||g.startsWith("10")?"CloudRain":g.startsWith("11")?"Snowflake":g.startsWith("50")?"Wind":"Cloud",p=(()=>{const g=e.weather[0].icon;return g.endsWith("n")?"bg-gradient-to-br from-indigo-900 to-purple-900":g.startsWith("01")||g.startsWith("02")?"bg-gradient-to-br from-sky-400 to-blue-600":g.startsWith("09")||g.startsWith("10")||g.startsWith("11")?"bg-gradient-to-br from-slate-500 to-slate-700":"bg-gradient-to-br from-blue-300 to-slate-400"})();return l.jsxs("div",{className:`p-5 rounded-3xl relative overflow-hidden shadow-lg text-white ${p} flex flex-col justify-center h-full`,children:[l.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-white/10 rounded-full blur-2xl pointer-events-none"}),l.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black",children:[Math.round(e.main.temp),""]}),l.jsx("div",{className:"text-xs opacity-90 font-medium",children:e.name})]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx(ve,{name:d(e.weather[0].icon),size:36,className:"text-white/90 drop-shadow-md mb-1"}),l.jsx("div",{className:"text-[10px] opacity-75 capitalize",children:e.weather[0].description})]})]}),l.jsx("div",{className:"mt-3 pt-2 border-t border-white/20 flex justify-between text-center relative z-10",children:n.slice(0,3).map((g,v)=>l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[9px] opacity-80 uppercase font-bold",children:new Date(g.dt*1e3).toLocaleDateString("ru-RU",{weekday:"short"})}),l.jsxs("span",{className:"text-xs font-bold",children:[Math.round(g.main.temp),""]})]},v))})]})},EK=()=>{var ke;const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:i}=Pi(),{schedule:a,substitutions:o,nutritionRecords:A}=CA(),{role:c}=_A(),u=jp(),{addToast:d}=w1(),[p,g]=G.useState(localStorage.getItem("gym_notes")||""),[v]=G.useState(new Date),[y,S]=G.useState(""),[x,I]=G.useState([]),[N,U]=G.useState(!1),[D,P]=G.useState(!1),[E,_]=G.useState(()=>{const ce=localStorage.getItem("gym_dashboard_widgets_v4");return ce?JSON.parse(ce):CK}),[B,Q]=G.useState(!1),[k,L]=G.useState(!1),[T,Y]=G.useState(""),[xe,Be]=G.useState(!1),_e=ce=>ce.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),se=ce=>{const R=_e(ce);g(R),P(!0)},me=()=>{localStorage.setItem("gym_notes",p),P(!1),d({type:"success",title:" ",message:"     ",duration:3e3})};G.useEffect(()=>{if(!D)return;const ce=setTimeout(()=>{localStorage.setItem("gym_notes",p),P(!1)},3e3);return()=>clearTimeout(ce)},[p,D]);const Pe=G.useMemo(()=>{const ce=v.getHours();return ce<5?" ":ce<12?" ":ce<18?" ":" "},[v]),Se=G.useMemo(()=>wK(v),[v]),M=G.useMemo(()=>{const ce=v.getDay();return ce===0||ce===6?null:Ur[ce-1]},[v]),H=G.useMemo(()=>{const ce=new Date,R=ce.getHours()*60+ce.getMinutes(),Me=[null,cr.Monday,cr.Tuesday,cr.Wednesday,cr.Thursday,cr.Friday,null][ce.getDay()];if(!Me)return{type:"weekend",label:""};let st=s.filter(be=>be.day===Me);st.length===0&&(st=s.filter(be=>be.day==="default"));const ge=be=>{const[we,ue]=be.split(":").map(Number);return we*60+ue};st.sort((be,we)=>ge(be.start)-ge(we.start));for(let be=0;be<st.length;be++){const we=st[be],ue=ge(we.start),je=ge(we.end);if(R>=ue&&R<je)return{type:"lesson",bell:we,label:`${we.period} `};if(be<st.length-1){const q=st[be+1],le=ge(q.start);if(R>=je&&R<le)return{type:"break",nextBell:q,label:` (. ${q.period} )`}}}if(st.length>0){const be=ge(st[0].start);return R<be?{type:"before",label:" "}:{type:"after",label:" "}}return{type:"unknown",label:"  "}},[s,v]);G.useEffect(()=>{if(!y.trim()){I([]);return}const ce=y.toLowerCase(),R=[],Ce=H.type==="lesson",Me=H.type==="lesson"?H.bell:null,st=(ge,be,we)=>{var le,ae;if(!ge)return{text:"",color:"blue",room:""};const ue=o.find(he=>he.date===Se&&he.scheduleItemId===ge.id);if((ue==null?void 0:ue.replacementTeacherId)==="cancelled")return{text:" ",color:"red",room:""};const je=((le=t.find(he=>he.id===ge.subjectId))==null?void 0:le.name)||"",q=((ae=n.find(he=>he.id===((ue==null?void 0:ue.replacementRoomId)||ge.roomId)))==null?void 0:ae.name)||(ue==null?void 0:ue.replacementRoomId)||ge.roomId||"?";return{text:`${je} ${we?"()":""}`,color:we?"amber":"green",room:q}};e.forEach(ge=>{if(ge.name.toLowerCase().includes(ce)){let be={type:"teacher",id:ge.id,name:ge.name,icon:"User",statusText:"",statusColor:"slate",isBusy:!1};if(ge.unavailableDates.includes(Se))be.statusText="",be.statusColor="red",be.icon="UserX";else if(Ce&&Me){const we=a.find(le=>le.teacherId===ge.id&&le.period===Me.period&&le.day===M&&le.shift===Me.shift),ue=o.find(le=>le.date===Se&&le.replacementTeacherId===ge.id);let je=we,q=!1;if(ue){const le=a.find(ae=>ae.id===ue.scheduleItemId);le&&le.period===Me.period&&le.shift===Me.shift&&(je=le,q=!0)}else if(we){const le=o.find(ae=>ae.date===Se&&ae.scheduleItemId===we.id);le&&le.replacementTeacherId!==ge.id&&(je=void 0)}if(je){const le=st(je,ge.id,q);be.statusText=le.text,be.location=`. ${le.room}`,be.statusColor=le.color,be.isBusy=!0}else be.statusText="",be.statusColor="blue",be.isBusy=!1}else be.statusText=H.label,be.statusColor="slate";R.push(be)}}),r.forEach(ge=>{var be,we;if(ge.name.toLowerCase().includes(ce)){let ue={type:"class",id:ge.id,name:ge.name,icon:"GraduationCap",statusText:"",statusColor:"slate",isBusy:!1};if(Ce&&Me){const je=a.find(q=>q.classId===ge.id&&q.period===Me.period&&q.day===M&&q.shift===Me.shift);if(je){const q=o.find(le=>le.date===Se&&le.scheduleItemId===je.id);if((q==null?void 0:q.replacementTeacherId)==="cancelled")ue.statusText=" ",ue.statusColor="red";else{const le=(be=t.find(he=>he.id===je.subjectId))==null?void 0:be.name,ae=((we=n.find(he=>he.id===((q==null?void 0:q.replacementRoomId)||je.roomId)))==null?void 0:we.name)||(q==null?void 0:q.replacementRoomId)||je.roomId;ue.statusText=le||"",ue.location=`. ${ae}`,ue.statusColor="green",ue.isBusy=!0}}else ue.statusText=" ",ue.statusColor="blue"}else ue.statusText=H.label;R.push(ue)}}),n.forEach(ge=>{var be,we;if(ge.name.toLowerCase().includes(ce)){let ue={type:"room",id:ge.id,name:ge.name,subName:ge.type,icon:"DoorOpen",statusText:"",statusColor:"slate",isBusy:!1};if(Ce&&Me){const je=a.find(ae=>ae.roomId===ge.id&&ae.period===Me.period&&ae.day===M&&ae.shift===Me.shift),q=o.find(ae=>ae.date===Se&&ae.replacementRoomId===ge.id);let le=je;if(q){const ae=a.find(he=>he.id===q.scheduleItemId);ae&&ae.period===Me.period&&ae.shift===Me.shift&&(le=ae)}if(je&&o.find(he=>he.date===Se&&he.scheduleItemId===je.id&&he.replacementRoomId&&he.replacementRoomId!==ge.id)&&(le=void 0),le){const ae=(be=r.find(Te=>Te.id===le.classId))==null?void 0:be.name,he=(we=e.find(Te=>{var Re;return Te.id===(((Re=o.find(Ge=>Ge.scheduleItemId===le.id&&Ge.date===Se))==null?void 0:Re.replacementTeacherId)||le.teacherId)}))==null?void 0:we.name;ue.statusText="",ue.location=`${ae}  ${he==null?void 0:he.split(" ")[0]}`,ue.statusColor="green",ue.isBusy=!0}else ue.statusText="",ue.statusColor="blue"}else ue.statusText=H.label;R.push(ue)}}),I(R.slice(0,5))},[y,e,r,n,a,o,H,Se,M,t]);const K=G.useMemo(()=>{const ce=new Date;return ce.setHours(0,0,0,0),e.filter(R=>R.birthDate).map(R=>{const Ce=new Date(R.birthDate);let Me=new Date(ce.getFullYear(),Ce.getMonth(),Ce.getDate());Me<ce&&Me.setFullYear(ce.getFullYear()+1);const st=Math.ceil((Me.getTime()-ce.getTime())/(1e3*60*60*24));return{...R,diff:st,age:ce.getFullYear()-Ce.getFullYear()}}).filter(R=>R.diff<=30).sort((R,Ce)=>R.diff-Ce.diff)},[e]),Z=G.useMemo(()=>{const ce=e.length,R=new Map;e.filter(ue=>ue.unavailableDates.includes(Se)).forEach(ue=>{var le;const q=((le=ue.absenceReasons)==null?void 0:le[Se])===" "?" ":"";R.set(ue.id,{id:ue.id,name:ue.name,displayReason:q})});const Ce=o.filter(ue=>ue.date===Se&&ue.replacementTeacherId!=="conducted"&&ue.replacementTeacherId!==ue.originalTeacherId),Me=new Map;Ce.forEach(ue=>{if(R.has(ue.originalTeacherId))return;const je=e.find(ae=>ae.id===ue.originalTeacherId);if(!je)return;const q=a.find(ae=>ae.id===ue.scheduleItemId);if(!q)return;Me.has(ue.originalTeacherId)||Me.set(ue.originalTeacherId,{teacher:je,lessons:[]}),Me.get(ue.originalTeacherId).lessons.push({period:q.period,reason:ue.lessonAbsenceReason})});const st=Array.from(R.values());Me.forEach((ue,je)=>{const q=ue.lessons.sort((Te,Re)=>Te.period-Re.period),le=q.map(Te=>Te.period).join(", "),he=q.some(Te=>Te.reason===" ")?" ":"";st.push({id:je,name:ue.teacher.name,displayReason:`${le} : ${he}`})}),st.sort((ue,je)=>ue.name.localeCompare(je.name));const ge=st.length,be=ce-ge;return{presentPercent:ce>0?Math.round(be/ce*100):0,absentCount:ge,totalTeachers:ce,absentTeachersList:st}},[e,Se,o,a]),ne=G.useMemo(()=>{const ce=new Date(v);for(ce.setDate(v.getDate()+1);ce.getDay()===0||ce.getDay()===6;)ce.setDate(ce.getDate()+1);const Ce=[null,"","","","","",null][ce.getDay()];if(!Ce)return[];const Me=[];return r.filter(ge=>!ge.excludeFromReports).forEach(ge=>{const be=a.filter(we=>we.classId===ge.id&&we.day===Ce);be.length===0?Me.push({class:ge.name,issue:`   ${Ce}`}):be.length<4&&Me.push({class:ge.name,issue:`  (${be.length})`}),be.forEach(we=>{if(a.some(je=>je.id!==we.id&&je.day===Ce&&je.period===we.period&&je.shift===we.shift&&je.teacherId===we.teacherId)&&Me.push({class:ge.name,issue:`  (${we.period} )`}),we.roomId){const je=n.find(q=>q.id===we.roomId);je&&je.capacity<ge.studentsCount&&Me.push({class:ge.name,issue:`: ${je.name} (${we.period} )`})}})}),Me.filter((ge,be,we)=>we.findIndex(ue=>ue.class===ge.class&&ue.issue===ge.issue)===be)},[a,r,e,n,v]),de=G.useMemo(()=>{if(!M)return 0;let ce=0;const R=a.filter(Ce=>Ce.day===M);for(const Ce of R){const Me=e.find(st=>st.id===Ce.teacherId);Me&&Me.unavailableDates.includes(Se)&&(o.find(ge=>ge.scheduleItemId===Ce.id&&ge.date===Se)||ce++)}return ce},[a,e,o,Se,M]);G.useMemo(()=>{if(c!=="canteen")return 0;const ce=A.filter(Ce=>Ce.date===Se),R=new Set(ce.map(Ce=>Ce.classId));return r.filter(Ce=>!R.has(Ce.id)).length},[c,A,Se,r]);const Ae=async()=>{if(!T.trim()){alert(",   .");return}if(!(i!=null&&i.telegramToken)||!(i!=null&&i.feedbackChatId)){alert("     .");return}Be(!0);const ce=` *   :*

${T}`;try{const Ce=await(await fetch(`https://api.telegram.org/bot${i.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:i.feedbackChatId,text:ce,parse_mode:"Markdown"})})).json();if(Ce.ok)alert("!   ."),L(!1),Y("");else throw new Error(Ce.description)}catch(R){console.error("   Telegram:",R),alert(`   . : ${R}`)}finally{Be(!1)}},pe=ce=>{const R=E.map(Ce=>Ce.id===ce?{...Ce,visible:!Ce.visible}:Ce);_(R)},Ee=(ce,R)=>{const Ce=E.findIndex(st=>st.id===ce);if(Ce===-1)return;const Me=[...E];R==="up"&&Ce>0?[Me[Ce],Me[Ce-1]]=[Me[Ce-1],Me[Ce]]:R==="down"&&Ce<Me.length-1&&([Me[Ce],Me[Ce+1]]=[Me[Ce+1],Me[Ce]]),_(Me)},Oe=()=>{localStorage.setItem("gym_dashboard_widgets_v4",JSON.stringify(E)),Q(!1)},rt=ce=>{if(!ce.visible)return null;switch(ce.id){case"search":return l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:l.jsx(ve,{name:"Search",size:22})}),l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx("input",{type:"text",inputMode:"search",placeholder:",   ...",value:y,onChange:R=>S(R.target.value),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl py-3.5 pl-11 pr-4 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),l.jsx(ve,{name:"Search",size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]}),x.length>0&&l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mr-2 pr-2 space-y-2",children:x.map(R=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white dark:bg-slate-700/50 border border-slate-100 dark:border-slate-600 hover:border-indigo-300 dark:hover:border-indigo-500 transition-colors cursor-pointer",onClick:()=>{const Me=s0(new Date,i)===2?"/schedule2":"/schedule",st=M?`&day=${M}`:"";let ge="";if(R.type==="class"){const be=r.find(we=>we.id===R.id);be&&(ge=`&shift=${be.shift===Ze.First?1:2}`)}R.type==="teacher"&&u(`${Me}?view=teacher&id=${R.id}${st}`),R.type==="class"&&u(`${Me}?view=class&id=${R.id}${st}${ge}`)},children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${R.isBusy?"bg-indigo-100 text-indigo-600":R.statusColor==="red"?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:l.jsx(ve,{name:R.icon,size:18})}),l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm truncate",children:[R.name," ",R.subName&&l.jsx("span",{className:"text-slate-400 font-normal",children:R.subName})]}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:R.type==="room"?"":R.type==="class"?"":""})]})]}),l.jsxs("div",{className:"text-right shrink-0",children:[l.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg inline-block ${R.statusColor==="green"?"bg-emerald-100 text-emerald-700":R.statusColor==="red"?"bg-red-100 text-red-700":R.statusColor==="blue"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}`,children:R.statusText}),R.location&&l.jsx("div",{className:"text-[10px] font-mono mt-1 text-slate-400",children:R.location})]})]},`${R.type}-${R.id}`))})]},ce.id);case"substitutions":return l.jsxs("div",{className:`p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 ${de>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[de>0&&l.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[l.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${de>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:l.jsx(ve,{name:de>0?"AlertTriangle":"CheckCircle",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:de>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:de}),l.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),l.jsxs("button",{onClick:()=>u("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",l.jsx(ve,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:l.jsx(ve,{name:"CheckCircle",size:64})}),l.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]},ce.id);case"occupancy":return l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:l.jsx(ve,{name:"PieChart",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>U(!N),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:N?" ":" ",children:l.jsx(ve,{name:N?"PieChart":"List",size:20})})]}),N?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:Z.absentTeachersList.length>0?l.jsx("div",{className:"space-y-3",children:Z.absentTeachersList.map(R=>l.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:R.name}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:R.displayReason})]},R.id))}):l.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:l.jsx("p",{className:"text-sm font-medium",children:"   "})})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[l.jsxs("div",{className:"relative w-28 h-28",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${Z.presentPercent}, 100`,strokeLinecap:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),l.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),l.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[Z.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:Z.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]},ce.id);case"notes":return l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full group card-hover relative bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:l.jsx(ve,{name:"Edit2",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:me,disabled:!D,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${D?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:D?" ":" ",children:l.jsx(ve,{name:"Save",size:16})}),l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(p),d({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(ve,{name:"Copy",size:16})}),l.jsx("button",{onClick:()=>{confirm(" ?")&&(g(""),localStorage.setItem("gym_notes",""),P(!1),d({type:"success",title:" ",duration:2e3}))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(ve,{name:"Trash2",size:16})})]})]}),l.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[l.jsx("textarea",{inputMode:"text",className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:p,onChange:R=>se(R.target.value),maxLength:1e4}),D&&l.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[l.jsx(ve,{name:"Clock",size:10}),"  "]})]})]},ce.id);case"conflicts":return l.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:l.jsx(ve,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:ne.length?ne.map(R=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:R.class}),l.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:R.issue})]},`${R.class}-${R.issue}`)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},ce.id);case"birthdays":return l.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:l.jsx(ve,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:K.length?K.map(R=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:R.name}),l.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${R.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:R.diff===0?"!":` ${R.diff} .`})]},R.id)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},ce.id);default:return null}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[l.jsxs("div",{className:"lg:col-span-2 flex flex-col justify-end",children:[l.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[Pe,", ",c==="admin"?"":c==="canteen"?"":"","!"]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium mb-4",children:[" ",v.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>Q(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",title:"  ",children:l.jsx(ve,{name:"Settings",size:18})}),l.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[l.jsx(ve,{name:"Send",size:18}),"  "]})]}),((ke=i==null?void 0:i.adminAnnouncement)==null?void 0:ke.active)&&l.jsx("div",{className:"mt-6 bg-amber-100 dark:bg-amber-900/30 border-l-4 border-amber-500 p-4 rounded-r-xl shadow-sm",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-amber-600 dark:text-amber-400 shrink-0 mt-1",children:l.jsx(ve,{name:"Bell",size:20})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-base text-amber-800 dark:text-amber-100 mb-1",children:""}),l.jsx("p",{className:"text-slate-800 dark:text-slate-200 text-sm whitespace-pre-wrap leading-relaxed",children:i.adminAnnouncement.message})]})]})})]}),l.jsx("div",{className:"hidden lg:block h-full min-h-[160px]",children:l.jsx(IK,{})})]}),c==="admin"&&de>0&&l.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-4 animate-fade-in",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-amber-500 text-white p-2 rounded-xl",children:l.jsx(ve,{name:"AlertTriangle",size:20})}),l.jsx("div",{className:"flex-1",children:l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:[de," ",de===1?"":de<5?"":"","  "]})}),l.jsx(vo,{to:"/substitutions",className:"px-4 py-2 bg-amber-500 text-white rounded-xl font-semibold hover:bg-amber-600 transition-colors text-sm",children:""})]})}),l.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3 animate-fade-in",children:[l.jsxs(vo,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-xl",children:l.jsx(ve,{name:"Calendar",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&l.jsxs(vo,{to:"/substitutions",className:"p-4 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-orange-500 text-white p-3 rounded-xl",children:l.jsx(ve,{name:"Repeat",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&l.jsxs(vo,{to:"/duty",className:"p-4 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-xl",children:l.jsx(ve,{name:"Shield",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="guest"&&l.jsxs(vo,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30 border border-emerald-200 dark:border-emerald-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-emerald-500 text-white p-3 rounded-xl",children:l.jsx(ve,{name:"Users",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.slice(0,4).map(ce=>rt(ce))}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E.slice(4).map(ce=>rt(ce))}),l.jsx(cs,{isOpen:k,onClose:()=>L(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),l.jsx("textarea",{inputMode:"text",value:T,onChange:ce=>Y(ce.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:Ae,disabled:xe,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[xe?l.jsx(ve,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(ve,{name:"Send",size:16}),xe?"...":""]})})]})}),l.jsx(cs,{isOpen:B,onClose:()=>Q(!1),title:"  ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      ."}),l.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:E.map((ce,R)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-xl border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"checkbox",checked:ce.visible,onChange:()=>pe(ce.id),className:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),l.jsx("span",{className:"font-bold text-slate-700 dark:text-white",children:ce.label})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>Ee(ce.id,"up"),disabled:R===0,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(ve,{name:"ArrowRight",className:"-rotate-90",size:16})}),l.jsx("button",{onClick:()=>Ee(ce.id,"down"),disabled:R===E.length-1,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(ve,{name:"ArrowRight",className:"rotate-90",size:16})})]})]},ce.id))}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:Oe,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})})]})})]})};var fU={},pU={},gU={},x1={};Object.defineProperty(x1,"__esModule",{value:!0});function kK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}x1.default=kK;var DB={};Object.defineProperty(DB,"__esModule",{value:!0});var SK=x1,NK=" and ";function FK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=SK.default(r),i=n;return typeof i=="boolean"?i?s:"not "+s:(typeof i=="number"&&/[height|width]$/.test(s)&&(i=i+"px"),"("+s+": "+i+")")}).join(NK)}DB.default=FK;var MB={};Object.defineProperty(MB,"__esModule",{value:!0});function TK(){}MB.default=TK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=x1;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=DB;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=MB;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(gU);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=G,r=gU;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(i,a){a===void 0&&(a=!1);var o=e.useState(a),A=o[0],c=o[1],u=r.queryObjectToString(i);return s(function(){var d=!0,p=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(u),g=function(){d&&c(!!p.matches)};return p.addListener(g),c(p.matches),function(){d=!1,p.removeListener(g)}},[u]),A}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(pU);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=pU;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(fU);const mU=ok(fU),wU=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:i}=Pi(),{schedule1:a,schedule2:o,saveSemesterSchedule:A,canUndo:c,canRedo:u,undo:d,redo:p}=CA(),g=e===2?o:a,v=async ie=>{await A(e,ie)},[y,S]=G.useState(Ze.First),[x,I]=G.useState(cr.Monday),[N,U]=G.useState(!1),[D,P]=G.useState({}),[E,_]=G.useState("class"),[B,Q]=G.useState(""),[k,L]=G.useState(""),[T,Y]=G.useState(""),[xe,Be]=G.useState(!1),[_e,se]=G.useState({visible:!1,x:0,y:0,item:null,cell:null}),[me,Pe]=G.useState(null),[Se,M]=G.useState([]),[H,K]=G.useState(!1),[Z,ne]=G.useState(null),[de,Ae]=G.useState(null),[pe,Ee]=G.useState(null),Oe=mU({maxWidth:767}),[rt,ke]=G.useState(!0),[ce,R]=G.useState(!1),[Ce,Me]=G.useState({isOpen:!1,type:"",day:"",classId:""}),[st,ge]=G.useState(cr.Monday),[be,we]=G.useState(""),[ue]=NN();G.useEffect(()=>{const ie=ue.get("view"),$e=ue.get("id"),yt=ue.get("day"),mt=ue.get("shift");ie&&["class","teacher","subject","week"].includes(ie)&&(_(ie),$e&&Q($e),yt&&Ur.includes(yt)&&I(yt),mt&&(mt==="1"&&S(Ze.First),mt==="2"&&S(Ze.Second)))},[ue]);const je=Os[y],q=G.useMemo(()=>E==="week"?Os[y].map(ie=>({id:ie.toString(),name:`${ie} `})):E==="class"?B?s.filter(ie=>ie.id===B&&ie.shift===y):s.filter(ie=>ie.shift===y):E==="teacher"?B?n.filter(ie=>ie.id===B):n:E==="subject"?B?r.filter(ie=>ie.id===B):r:[],[E,B,s,n,r,y]),le=()=>q,[ae]=G.useState(()=>new Map);G.useEffect(()=>{ae.clear()},[g,ae]),G.useEffect(()=>{ae.size>500&&(ae.clear(),console.warn("Schedule cache cleared to prevent memory leak"))},[ae]);const he=G.useCallback((ie,$e)=>{const yt=`${E}-${ie}-${$e}-${y}-${x}-${B}-${k}-${T}`;if(ae.has(yt))return ae.get(yt);let mt=[];if(E==="week"){const St=parseInt(ie);if(isNaN(St))return[];const nt=String($e);mt=g.filter(xt=>xt.shift===y&&xt.period===St&&xt.day===nt),B&&(mt=mt.filter(xt=>xt.classId===B))}else{const St=typeof $e=="string"?parseInt($e):$e;if(isNaN(St))return[];E==="class"&&(mt=g.filter(nt=>nt.classId===ie&&nt.period===St&&nt.day===x&&nt.shift===y)),E==="teacher"&&(mt=g.filter(nt=>nt.teacherId===ie&&nt.period===St&&nt.day===x&&nt.shift===y)),E==="subject"&&(mt=g.filter(nt=>nt.subjectId===ie&&nt.period===St&&nt.day===x&&nt.shift===y))}return k&&(mt=mt.filter(St=>{if(!St.roomId)return!1;const nt=i.find(gt=>gt.id===St.roomId);return((nt?nt.name:St.roomId)||"").toLowerCase().includes(k.toLowerCase())})),T&&(mt=mt.filter(St=>{var nt;return(nt=St.direction)==null?void 0:nt.toLowerCase().includes(T.toLowerCase())})),ae.set(yt,mt),mt},[E,g,y,x,B,k,T,i]),Te=ie=>{const $e=[],yt=g.filter(nt=>nt.id!==ie.id&&nt.day===ie.day&&nt.period===ie.period&&nt.shift===ie.shift);return yt.find(nt=>nt.teacherId===ie.teacherId)&&$e.push("teacher"),yt.find(nt=>!(nt.classId!==ie.classId||nt.direction&&ie.direction&&nt.direction!==ie.direction))&&$e.push("class"),ie.roomId&&yt.find(xt=>xt.roomId===ie.roomId)&&$e.push("room"),$e},Re=ie=>{const $e=[],yt=g.filter(nt=>nt.id!==ie.id&&nt.day===ie.day&&nt.period===ie.period&&nt.shift===ie.shift);return yt.filter(nt=>nt.teacherId===ie.teacherId).forEach(nt=>{var ir,Mr;const xt=(ir=s.find(Cr=>Cr.id===nt.classId))==null?void 0:ir.name,gt=((Mr=i.find(Cr=>Cr.id===nt.roomId))==null?void 0:Mr.name)||nt.roomId;$e.push({type:"",description:`   ${xt}  . ${gt||"?"}`})}),yt.filter(nt=>!(nt.classId!==ie.classId||nt.direction&&ie.direction&&nt.direction!==ie.direction)).forEach(nt=>{var gt;const xt=(gt=r.find(ir=>ir.id===nt.subjectId))==null?void 0:gt.name;$e.push({type:"",description:`   "${xt}"`})}),ie.roomId&&yt.filter(xt=>xt.roomId===ie.roomId).forEach(xt=>{var Mr,Cr;const gt=(Mr=n.find(Ts=>Ts.id===xt.teacherId))==null?void 0:Mr.name,ir=(Cr=s.find(Ts=>Ts.id===xt.classId))==null?void 0:Cr.name;$e.push({type:"",description:`: ${ir}, ${gt}`})}),$e},Ge=(ie,$e)=>{ie.stopPropagation();const yt=Re($e);ne({item:$e,conflicts:yt}),K(!0)},Ke=(ie,$e,yt)=>{const mt=[],St=s.find(gt=>gt.id===ie),nt=r.find(gt=>gt.id===$e),xt=i.find(gt=>gt.id===yt);return xt&&(St&&xt.capacity<St.studentsCount&&mt.push(`  !   ${St.studentsCount} .,     ${xt.capacity}.`),nt&&nt.requiredRoomType&&nt.requiredRoomType!==""&&xt.type!==nt.requiredRoomType&&mt.push(`   !   "${nt.requiredRoomType}",   "${xt.type}".`)),mt},Et=ie=>{if(!ie.classId||!ie.subjectId||!ie.roomId){M([]);return}const $e=Ke(ie.classId,ie.subjectId,ie.roomId);M($e)},pt=ie=>{t||(P(ie),Et(ie),U(!0))},ht=(ie,$e,yt=x)=>{if(t)return;const mt={period:$e,day:yt,shift:y,id:ai()};E==="class"&&(mt.classId=ie),E==="teacher"&&(mt.teacherId=ie),E==="subject"&&(mt.subjectId=ie),E==="week"&&(mt.period=parseInt(ie),mt.day=yt,B&&s.find(St=>St.id===B)&&(mt.classId=B)),P(mt),M([]),U(!0)},ot=async()=>{if(!D.subjectId||!D.teacherId||!D.classId)return;const ie=[];if(D.period!==void 0){const gt=D.shift||y;(Os[gt]||[]).includes(D.period)||ie.push(` ${D.period}    "${gt}"`)}if(n.find(gt=>gt.id===D.teacherId)||ie.push("   "),r.find(gt=>gt.id===D.subjectId)||ie.push("   "),s.find(gt=>gt.id===D.classId)||ie.push("   "),D.roomId&&(i.find(ir=>ir.id===D.roomId)||ie.push("   ")),ie.length>0){alert(`  :

${ie.join(`
`)}`);return}const St=Te(D);if(St.length>0){const gt={teacher:"",class:"",room:""},ir=St.map(Mr=>gt[Mr]).join(", ");if(!confirm(`  : ${ir}     .

   ?`))return}let nt=[...g];const xt=nt.findIndex(gt=>gt.id===D.id);xt>=0?nt[xt]=D:nt.push(D),await v(nt),U(!1)},Je=async ie=>{const $e=g.filter(yt=>yt.id!==(ie||D.id));await v($e),U(!1)},qe=(ie,$e,yt)=>{t||(ie.preventDefault(),ie.stopPropagation(),se({visible:!0,x:ie.clientX,y:ie.clientY,item:$e,cell:yt}))},Tt=(ie,$e)=>{if(t)return;Ae($e),ie.dataTransfer.effectAllowed="move";const yt=ie.currentTarget;setTimeout(()=>yt.classList.add("dragging"),0)},_t=ie=>{ie.currentTarget.classList.remove("dragging"),Ae(null),Ee(null)},kt=(ie,$e)=>{ie.preventDefault(),!t&&Ee(`${$e.rowId}-${$e.colKey}`)},Wt=async(ie,$e)=>{if(ie.preventDefault(),!de||t)return;const yt={...de};E==="week"?(yt.period=parseInt($e.rowId),yt.day=$e.colKey):(yt.period=$e.colKey,yt.day=x,E==="class"&&(yt.classId=$e.rowId),E==="teacher"&&(yt.teacherId=$e.rowId),E==="subject"&&(yt.subjectId=$e.rowId));const mt=g.map(xt=>xt.id===yt.id?yt:xt),St=Ot(mt,yt);if(St.length>0){const xt=St.map(gt=>{switch(gt.type){case"teacher":return` ${gt.entityName}     `;case"room":return` ${gt.entityName}     `;case"class":return` ${gt.entityName}      `;default:return"  "}});alert(`  :
${xt.join(`
`)}`),Ae(null),Ee(null);return}await v(mt),Ae(null),Ee(null)},Ot=(ie,$e)=>{const yt=[],mt=ie.filter(xt=>xt.id!==$e.id&&xt.day===$e.day&&xt.period===$e.period&&xt.shift===$e.shift);if(mt.find(xt=>xt.teacherId===$e.teacherId)){const xt=n.find(gt=>gt.id===$e.teacherId);yt.push({type:"teacher",entityName:(xt==null?void 0:xt.name)||$e.teacherId})}if($e.roomId&&mt.find(gt=>gt.roomId===$e.roomId)){const gt=i.find(ir=>ir.id===$e.roomId);yt.push({type:"room",entityName:(gt==null?void 0:gt.name)||$e.roomId})}if(mt.find(xt=>xt.classId===$e.classId)){const xt=s.find(gt=>gt.id===$e.classId);yt.push({type:"class",entityName:(xt==null?void 0:xt.name)||$e.classId})}return yt},vt=[];if(_e.item)vt.push({label:"",icon:"Copy",onClick:()=>Pe(_e.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>Je(_e.item.id)});else if(_e.cell){const ie=_e.cell;me&&vt.push({label:"",icon:"Clipboard",onClick:async()=>{const $e={...me,id:ai(),day:x,shift:y,period:ie.colKey};E==="week"&&($e.day=ie.colKey,$e.period=parseInt(ie.rowId)),E==="class"?$e.classId=ie.rowId:E==="teacher"?$e.teacherId=ie.rowId:E==="subject"&&($e.subjectId=ie.rowId);let yt=[...g,$e];await v(yt),Pe(null)}}),vt.push({label:" ",icon:"Plus",onClick:()=>ht(ie.rowId||"",typeof ie.colKey=="number"?ie.colKey:parseInt(ie.rowId||"0"),E==="week"?ie.colKey:x)})}const Ht=D.subjectId?n.filter(ie=>ie.subjectIds&&ie.subjectIds.includes(D.subjectId)):[],rn=D.subjectId?n.filter(ie=>!ie.subjectIds||!ie.subjectIds.includes(D.subjectId)):n,jr=G.useMemo(()=>{const ie=e===2?" (2- )":"";if(B){if(E==="teacher"){const $e=n.find(yt=>yt.id===B);return $e?$e.name+ie:""+ie}if(E==="class"){const $e=s.find(yt=>yt.id===B);return $e?$e.name+ie:""+ie}if(E==="subject"){const $e=r.find(yt=>yt.id===B);return $e?$e.name+ie:""+ie}if(E==="week"){const $e=s.find(yt=>yt.id===B);return $e?$e.name+ie:""+ie}}return`  ${x}`+ie},[B,E,n,s,r,x,e]),Vr=!!B,tr=G.useMemo(()=>Vr?Ur:je,[Vr,je]),Qt=G.useMemo(()=>Vr?Os[y].map(ie=>({id:ie.toString(),name:`${ie} `})):le(),[Vr,y,le]),kr=(ie,$e)=>{if(Vr){const yt=parseInt(ie),mt=$e;let St=g.filter(nt=>nt.shift===y&&nt.period===yt&&nt.day===mt);return E==="class"||E==="week"?St=St.filter(nt=>nt.classId===B):E==="teacher"?St=St.filter(nt=>nt.teacherId===B):E==="subject"&&(St=St.filter(nt=>nt.subjectId===B)),St}else return he(ie,$e)},us=E==="week"?Ur:je,nn=(ie,$e,yt)=>{Me({isOpen:!0,type:ie,day:$e||"",classId:yt||""})},Rr=async()=>{let ie=[...g];Ce.type==="clearAll"?ie=[]:Ce.type==="clearDay"&&Ce.day?ie=ie.filter($e=>$e.day!==Ce.day):Ce.type==="clearClass"&&Ce.classId&&(ie=ie.filter($e=>$e.classId!==Ce.classId)),await v(ie),Me({isOpen:!1,type:"",day:"",classId:""}),R(!1)},pr=(ie,$e,yt)=>t&&ie.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[ie.map(mt=>{const St=r.find(Cr=>Cr.id===mt.subjectId),nt=n.find(Cr=>Cr.id===mt.teacherId),xt=s.find(Cr=>Cr.id===mt.classId),gt=Te(mt),ir=i.find(Cr=>Cr.id===mt.roomId),Mr=ir?ir.name:mt.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:Cr=>Tt(Cr,mt),onDragEnd:t?void 0:_t,onClick:t?void 0:()=>pt(mt),onContextMenu:t?void 0:Cr=>qe(Cr,mt,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${gt.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:gt.length===0&&(St!=null&&St.color)?{backgroundColor:`${St.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:E==="subject"||E==="week"?xt==null?void 0:xt.name:St==null?void 0:St.name}),mt.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:mt.direction})]}),E==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:St==null?void 0:St.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:nt==null?void 0:nt.name,children:[l.jsx(ve,{name:E==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:E==="teacher"?xt==null?void 0:xt.name:nt==null?void 0:nt.name})]}),Mr&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:ir?`: ${ir.capacity}, : ${ir.type}`:"",children:Mr})]}),gt.length>0&&l.jsx("button",{onClick:Cr=>Ge(Cr,mt),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-[10px] font-bold shadow-sm hover:bg-red-600 hover:scale-110 transition-all z-10",title:"   ",children:"!"})]},mt.id)}),!t&&ie.length<3&&l.jsx("button",{onClick:()=>ht(yt,typeof $e=="number"?$e:parseInt(yt),E==="week"?$e:x),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(ve,{name:"Plus",size:16})})]}),Fr=()=>{if(!B)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const ie=g.filter($e=>$e.day===x&&$e.shift===y&&(E==="class"&&$e.classId===B||E==="teacher"&&$e.teacherId===B||E==="subject"&&$e.subjectId===B)).sort(($e,yt)=>$e.period-yt.period);return ie.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",x,"  ",y,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:ie.map($e=>{const yt=r.find(ir=>ir.id===$e.subjectId),mt=n.find(ir=>ir.id===$e.teacherId),St=s.find(ir=>ir.id===$e.classId),nt=i.find(ir=>ir.id===$e.roomId),xt=nt?nt.name:$e.roomId,gt=Te($e);return l.jsxs("div",{onClick:t?void 0:()=>pt($e),className:`rounded-xl p-4 shadow-sm border ${gt.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[$e.period," "]}),gt.length>0&&l.jsx("button",{onClick:ir=>Ge(ir,$e),className:"bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-sm",children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[yt==null?void 0:yt.name," ",$e.direction&&`(${$e.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[St==null?void 0:St.name,"  ",mt==null?void 0:mt.name]}),xt&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",xt]})]},$e.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),_e.visible&&l.jsx(bK,{x:_e.x,y:_e.y,onClose:()=>se({..._e,visible:!1}),actions:vt}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>S(Ze.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===Ze.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>S(Ze.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===Ze.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),E!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Ur.map(ie=>l.jsx("button",{onClick:()=>I(ie),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${x===ie?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:ie},ie))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:d,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(ve,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:p,disabled:!u,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(ve,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{_("class"),Q("")},className:`p-2 rounded-md ${E==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(ve,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{_("teacher"),Q("")},className:`p-2 rounded-md ${E==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(ve,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{_("subject"),Q("")},className:`p-2 rounded-md ${E==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(ve,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var ie;_("week"),Q(((ie=s[0])==null?void 0:ie.id)||"")},className:`p-2 rounded-md ${E==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(ve,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(ve,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:B,onChange:ie=>Q(ie.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",E==="class"?"":E==="teacher"?"":E==="week"?" ()":""]}),(E==="class"||E==="week")&&s.filter(ie=>ie.shift===y).map(ie=>l.jsx("option",{value:ie.id,children:ie.name},ie.id)),E==="teacher"&&n.map(ie=>l.jsx("option",{value:ie.id,children:ie.name},ie.id)),E==="subject"&&r.map(ie=>l.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),l.jsx("input",{placeholder:"...",value:k,onChange:ie=>L(ie.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:T,onChange:ie=>Y(ie.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(ve,{name:"List",size:16})," . ."]}),(B||E==="week")&&l.jsx("button",{onClick:()=>Be(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:l.jsx(ve,{name:"Printer",size:16})})]})]}),Oe&&!t&&B&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>ke(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${rt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(ve,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>ke(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${rt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(ve,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Oe&&rt&&!t&&B?Fr():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:E==="week"?"":E==="class"?"":E==="teacher"?"":""}),us.map(ie=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:E==="week"?ie:`${ie} `},ie))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:q.length>0?q.map(ie=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:ie.name}),us.map($e=>{const yt=he(ie.id,$e),mt=`${ie.id}-${$e}`,St={rowId:ie.id,colKey:$e};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${pe===mt?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:nt=>qe(nt,null,St),onDragOver:t?void 0:nt=>kt(nt,St),onDrop:t?void 0:nt=>Wt(nt,St),children:pr(yt,$e,ie.id)},$e)})]},ie.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(cs,{isOpen:N,onClose:()=>U(!1),title:D.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",D.day]}),l.jsxs("span",{children:[": ",D.period]}),l.jsxs("span",{children:[": ",D.shift===Ze.First?"1 ":"2 "]})]}),Se.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Se.map(ie=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ve,{name:"AlertTriangle",size:14}),ie]},ie))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Df,{options:s.filter(ie=>ie.shift===y).map(ie=>({value:ie.id,label:ie.name})),value:D.classId||null,onChange:ie=>{P({...D,classId:ie}),Et({...D,classId:ie})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Df,{options:r.map(ie=>({value:ie.id,label:ie.name})),value:D.subjectId||null,onChange:ie=>{P({...D,subjectId:ie}),Et({...D,subjectId:ie})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Df,{options:[{label:"",options:Ht.map(ie=>({value:ie.id,label:ie.name}))},{label:"",options:rn.map(ie=>({value:ie.id,label:ie.name}))}],value:D.teacherId||null,onChange:ie=>P({...D,teacherId:ie}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:D.direction||"",onChange:ie=>P({...D,direction:ie.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:D.roomId||"",onChange:ie=>{P({...D,roomId:ie.target.value}),Et({...D,roomId:ie.target.value})},children:[l.jsx("option",{value:"",children:" "}),i.map(ie=>l.jsxs("option",{value:ie.id,children:[ie.name," (",ie.capacity," )"]},ie.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[D.id&&l.jsx("button",{onClick:()=>Je(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:ot,className:"btn-primary btn-ripple",children:""})]})]})}),l.jsx(cs,{isOpen:ce,onClose:()=>R(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>nn("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:st,onChange:ie=>ge(ie.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Ur.map(ie=>l.jsx("option",{value:ie,children:ie},ie))})}),l.jsxs("button",{onClick:()=>nn("clearDay",st),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",st]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:be,onChange:ie=>we(ie.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),s.map(ie=>l.jsx("option",{value:ie.id,children:ie.name},ie.id))]})}),l.jsx("button",{onClick:()=>{be&&nn("clearClass",void 0,be)},disabled:!be,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(cs,{isOpen:Ce.isOpen,onClose:()=>Me({...Ce,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>Me({...Ce,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Rr,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),l.jsx(cs,{isOpen:H,onClose:()=>K(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"     :"}),l.jsx("div",{className:"space-y-3",children:Z&&Z.conflicts.length>0?Z.conflicts.map((ie,$e)=>l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-3 flex items-start gap-3",children:[l.jsx(ve,{name:"AlertTriangle",className:"text-red-500 shrink-0 mt-0.5",size:18}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-red-700 dark:text-red-300 text-sm mb-1",children:ie.type}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:ie.description})]})]},$e)):l.jsx("p",{className:"text-center text-slate-400 py-4",children:" "})}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-bold hover:bg-slate-300 transition text-sm",children:""})})]})}),xe&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(ve,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>Be(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:jr}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:Vr||E==="week"?"":E==="class"?"":E==="teacher"?"":""}),tr.map(ie=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:Vr||E==="week"?ie:`${ie} `},ie))]})}),l.jsx("tbody",{children:Qt.map(ie=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:ie.name}),tr.map($e=>{const yt=kr(ie.id,$e);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:yt.map(mt=>{const St=r.find(ci=>ci.id===mt.subjectId),nt=n.find(ci=>ci.id===mt.teacherId),xt=s.find(ci=>ci.id===mt.classId),gt=i.find(ci=>ci.id===mt.roomId),ir=gt?gt.name:mt.roomId,Mr=E==="teacher",Mi=E==="subject"||E==="week"||Vr&&Mr?xt==null?void 0:xt.name:St==null?void 0:St.name,Oi=Mr?xt==null?void 0:xt.name:nt==null?void 0:nt.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Mi,mt.direction&&` (${mt.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:Oi}),ir&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:ir})]})]},mt.id)})},$e)})]},ie.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X2=function(t,e){return X2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},X2(t,e)};function to(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Y2=function(){return Y2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Y2.apply(this,arguments)};function xi(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function A(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,A)}c((n=n.apply(t,[])).next())})}function ri(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return A([c,u])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Y0(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var pA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),v1=function(t,e){return pA.fromClientRect(t,e.getBoundingClientRect())},UK=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new pA(0,0,n,s)},y1=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Zn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},GI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Z0=0;Z0<GI.length;Z0++)LK[GI.charCodeAt(Z0)]=Z0;var $I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eg=0;eg<$I.length;eg++)pf[$I.charCodeAt(eg)]=eg;var QK=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=pf[t.charCodeAt(n)],a=pf[t.charCodeAt(n+1)],o=pf[t.charCodeAt(n+2)],A=pf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|A&63;return c},jK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},RK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Rc=5,OB=11,Qx=2,PK=OB-Rc,xU=65536>>Rc,DK=1<<Rc,jx=DK-1,MK=1024>>Rc,OK=xU+MK,HK=OK,VK=32,KK=HK+VK,zK=65536>>OB,GK=1<<PK,$K=GK-1,qI=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},qK=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},WK=function(t,e){var r=QK(t),n=Array.isArray(r)?RK(r):new Uint32Array(r),s=Array.isArray(r)?jK(r):new Uint16Array(r),i=24,a=qI(s,i/2,n[4]/2),o=n[5]===2?qI(s,(i+n[4])/2):qK(n,Math.ceil((i+n[4])/4));return new JK(n[0],n[1],n[2],n[3],a,o)},JK=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Rc],r=(r<<Qx)+(e&jx),this.data[r];if(e<=65535)return r=this.index[xU+(e-55296>>Rc)],r=(r<<Qx)+(e&jx),this.data[r];if(e<this.highStart)return r=KK-zK+(e>>OB),r=this.index[r],r+=e>>Rc&$K,r=this.index[r],r=(r<<Qx)+(e&jx),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),WI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tg=0;tg<WI.length;tg++)XK[WI.charCodeAt(tg)]=tg;var YK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",JI=50,ZK=1,vU=2,yU=3,ez=4,tz=5,XI=7,bU=8,YI=9,gl=10,Z2=11,ZI=12,ey=13,rz=14,gf=15,ty=16,rg=17,Xh=18,nz=19,eE=20,ry=21,Yh=22,Rx=23,Eu=24,ea=25,mf=26,wf=27,ku=28,sz=29,Ec=30,iz=31,ng=32,sg=33,ny=34,sy=35,iy=36,Ip=37,ay=38,nm=39,sm=40,Px=41,BU=42,az=43,oz=[9001,65288],_U="!",yr="",ig="",oy=WK(YK),Ko=[Ec,iy],Ay=[ZK,vU,yU,tz],CU=[gl,bU],tE=[wf,mf],Az=Ay.concat(CU),rE=[ay,nm,sm,ny,sy],lz=[gf,ey],cz=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var o=oy.get(i);if(o>JI?(s.push(!0),o-=JI):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(ty);if(o===ez||o===Z2){if(a===0)return n.push(a),r.push(Ec);var A=r[a-1];return Az.indexOf(A)===-1?(n.push(n[a-1]),r.push(A)):(n.push(a),r.push(Ec))}if(n.push(a),o===iz)return r.push(e==="strict"?ry:Ip);if(o===BU||o===sz)return r.push(Ec);if(o===az)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(Ip):r.push(Ec);r.push(o)}),[n,r,s]},Dx=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==gl)break}if(s===gl)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var A=r;A<=n.length;){A++;var a=n[A];if(a===e)return!0;if(a!==gl)break}if(o!==gl)break}return!1},nE=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===gl)r--;else return n}return 0},uz=function(t,e,r,n,s){if(r[n]===0)return yr;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return yr;var a=i-1,o=i+1,A=e[i],c=a>=0?e[a]:0,u=e[o];if(A===vU&&u===yU)return yr;if(Ay.indexOf(A)!==-1)return _U;if(Ay.indexOf(u)!==-1||CU.indexOf(u)!==-1)return yr;if(nE(i,e)===bU)return ig;if(oy.get(t[i])===Z2||(A===ng||A===sg)&&oy.get(t[o])===Z2||A===XI||u===XI||A===YI||[gl,ey,gf].indexOf(A)===-1&&u===YI||[rg,Xh,nz,Eu,ku].indexOf(u)!==-1||nE(i,e)===Yh||Dx(Rx,Yh,i,e)||Dx([rg,Xh],ry,i,e)||Dx(ZI,ZI,i,e))return yr;if(A===gl)return ig;if(A===Rx||u===Rx)return yr;if(u===ty||A===ty)return ig;if([ey,gf,ry].indexOf(u)!==-1||A===rz||c===iy&&lz.indexOf(A)!==-1||A===ku&&u===iy||u===eE||Ko.indexOf(u)!==-1&&A===ea||Ko.indexOf(A)!==-1&&u===ea||A===wf&&[Ip,ng,sg].indexOf(u)!==-1||[Ip,ng,sg].indexOf(A)!==-1&&u===mf||Ko.indexOf(A)!==-1&&tE.indexOf(u)!==-1||tE.indexOf(A)!==-1&&Ko.indexOf(u)!==-1||[wf,mf].indexOf(A)!==-1&&(u===ea||[Yh,gf].indexOf(u)!==-1&&e[o+1]===ea)||[Yh,gf].indexOf(A)!==-1&&u===ea||A===ea&&[ea,ku,Eu].indexOf(u)!==-1)return yr;if([ea,ku,Eu,rg,Xh].indexOf(u)!==-1)for(var d=i;d>=0;){var p=e[d];if(p===ea)return yr;if([ku,Eu].indexOf(p)!==-1)d--;else break}if([wf,mf].indexOf(u)!==-1)for(var d=[rg,Xh].indexOf(A)!==-1?a:i;d>=0;){var p=e[d];if(p===ea)return yr;if([ku,Eu].indexOf(p)!==-1)d--;else break}if(ay===A&&[ay,nm,ny,sy].indexOf(u)!==-1||[nm,ny].indexOf(A)!==-1&&[nm,sm].indexOf(u)!==-1||[sm,sy].indexOf(A)!==-1&&u===sm||rE.indexOf(A)!==-1&&[eE,mf].indexOf(u)!==-1||rE.indexOf(u)!==-1&&A===wf||Ko.indexOf(A)!==-1&&Ko.indexOf(u)!==-1||A===Eu&&Ko.indexOf(u)!==-1||Ko.concat(ea).indexOf(A)!==-1&&u===Yh&&oz.indexOf(t[o])===-1||Ko.concat(ea).indexOf(u)!==-1&&A===Xh)return yr;if(A===Px&&u===Px){for(var g=r[i],v=1;g>0&&(g--,e[g]===Px);)v++;if(v%2!==0)return yr}return A===ng&&u===sg?yr:ig},dz=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=cz(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ea,Ec,BU].indexOf(o)!==-1?Ip:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,A){return o&&t[A]>=19968&&t[A]<=40959}):void 0;return[n,s,a]},hz=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===_U,this.start=n,this.end=s}return t.prototype.slice=function(){return Zn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),fz=function(t,e){var r=y1(t),n=dz(r,e),s=n[0],i=n[1],a=n[2],o=r.length,A=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=yr;c<o&&(u=uz(r,i,s,++c,a))===yr;);if(u!==yr||c===o){var d=new hz(r,u,A,c);return A=c,{value:d,done:!1}}return{done:!0,value:null}}}},pz=1,gz=2,i0=4,sE=8,Aw=10,iE=47,Mf=92,mz=9,wz=32,ag=34,Zh=61,xz=35,vz=36,yz=37,og=39,Ag=40,ef=41,bz=95,ki=45,Bz=33,_z=60,Cz=62,Iz=64,Ez=91,kz=93,Sz=61,Nz=123,lg=63,Fz=125,aE=124,Tz=126,Uz=128,oE=65533,Mx=42,Tc=43,Lz=44,Qz=58,jz=59,Ep=46,Rz=0,Pz=8,Dz=11,Mz=14,Oz=31,Hz=127,ho=-1,IU=48,EU=97,kU=101,Vz=102,Kz=117,zz=122,SU=65,NU=69,FU=70,Gz=85,$z=90,si=function(t){return t>=IU&&t<=57},qz=function(t){return t>=55296&&t<=57343},Su=function(t){return si(t)||t>=SU&&t<=FU||t>=EU&&t<=Vz},Wz=function(t){return t>=EU&&t<=zz},Jz=function(t){return t>=SU&&t<=$z},Xz=function(t){return Wz(t)||Jz(t)},Yz=function(t){return t>=Uz},cg=function(t){return t===Aw||t===mz||t===wz},lw=function(t){return Xz(t)||Yz(t)||t===bz},AE=function(t){return lw(t)||si(t)||t===ki},Zz=function(t){return t>=Rz&&t<=Pz||t===Dz||t>=Mz&&t<=Oz||t===Hz},tl=function(t,e){return t!==Mf?!1:e!==Aw},ug=function(t,e,r){return t===ki?lw(e)||tl(e,r):lw(t)?!0:!!(t===Mf&&tl(t,e))},Ox=function(t,e,r){return t===Tc||t===ki?si(e)?!0:e===Ep&&si(r):si(t===Ep?e:t)},eG=function(t){var e=0,r=1;(t[e]===Tc||t[e]===ki)&&(t[e]===ki&&(r=-1),e++);for(var n=[];si(t[e]);)n.push(t[e++]);var s=n.length?parseInt(Zn.apply(void 0,n),10):0;t[e]===Ep&&e++;for(var i=[];si(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(Zn.apply(void 0,i),10):0;(t[e]===NU||t[e]===kU)&&e++;var A=1;(t[e]===Tc||t[e]===ki)&&(t[e]===ki&&(A=-1),e++);for(var c=[];si(t[e]);)c.push(t[e++]);var u=c.length?parseInt(Zn.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-a))*Math.pow(10,A*u)},tG={type:2},rG={type:3},nG={type:4},sG={type:13},iG={type:8},aG={type:21},oG={type:9},AG={type:10},lG={type:11},cG={type:12},uG={type:14},dg={type:23},dG={type:1},hG={type:25},fG={type:24},pG={type:26},gG={type:27},mG={type:28},wG={type:29},xG={type:31},ly={type:32},TU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(y1(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==ly;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ag:return this.consumeStringToken(ag);case xz:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(AE(r)||tl(n,s)){var i=ug(r,n,s)?gz:pz,a=this.consumeName();return{type:5,value:a,flags:i}}break;case vz:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),sG;break;case og:return this.consumeStringToken(og);case Ag:return tG;case ef:return rG;case Mx:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),uG;break;case Tc:if(Ox(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Lz:return nG;case ki:var o=e,A=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Ox(o,A,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ug(o,A,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===ki&&c===Cz)return this.consumeCodePoint(),this.consumeCodePoint(),fG;break;case Ep:if(Ox(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case iE:if(this.peekCodePoint(0)===Mx)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Mx&&(u=this.consumeCodePoint(),u===iE))return this.consumeToken();if(u===ho)return this.consumeToken()}break;case Qz:return pG;case jz:return gG;case _z:if(this.peekCodePoint(0)===Bz&&this.peekCodePoint(1)===ki&&this.peekCodePoint(2)===ki)return this.consumeCodePoint(),this.consumeCodePoint(),hG;break;case Iz:var d=this.peekCodePoint(0),p=this.peekCodePoint(1),g=this.peekCodePoint(2);if(ug(d,p,g)){var a=this.consumeName();return{type:7,value:a}}break;case Ez:return mG;case Mf:if(tl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case kz:return wG;case Sz:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),iG;break;case Nz:return lG;case Fz:return cG;case Kz:case Gz:var v=this.peekCodePoint(0),y=this.peekCodePoint(1);return v===Tc&&(Su(y)||y===lg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case aE:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),oG;if(this.peekCodePoint(0)===aE)return this.consumeCodePoint(),aG;break;case Tz:if(this.peekCodePoint(0)===Zh)return this.consumeCodePoint(),AG;break;case ho:return ly}return cg(e)?(this.consumeWhiteSpace(),xG):si(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):lw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Zn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Su(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===lg&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(Zn.apply(void 0,e.map(function(A){return A===lg?IU:A})),16),i=parseInt(Zn.apply(void 0,e.map(function(A){return A===lg?FU:A})),16);return{type:30,start:s,end:i}}var a=parseInt(Zn.apply(void 0,e),16);if(this.peekCodePoint(0)===ki&&Su(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Su(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(Zn.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ag?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ag?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ho)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===og||r===ag){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ho||this.peekCodePoint(0)===ef)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),dg)}for(;;){var s=this.consumeCodePoint();if(s===ho||s===ef)return{type:22,value:Zn.apply(void 0,e)};if(cg(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ho||this.peekCodePoint(0)===ef?(this.consumeCodePoint(),{type:22,value:Zn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),dg);if(s===ag||s===og||s===Ag||Zz(s))return this.consumeBadUrlRemnants(),dg;if(s===Mf)if(tl(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),dg;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;cg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ef||e===ho)return;tl(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=Zn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===ho||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===Aw)return this._value.splice(0,n),dG;if(s===Mf){var i=this._value[n+1];i!==ho&&i!==void 0&&(i===Aw?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):tl(s,i)&&(r+=this.consumeStringSlice(n),r+=Zn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=i0,n=this.peekCodePoint(0);for((n===Tc||n===ki)&&e.push(this.consumeCodePoint());si(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===Ep&&si(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=sE;si(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===NU||n===kU)&&((s===Tc||s===ki)&&si(i)||si(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=sE;si(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[eG(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(ug(s,i,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===yz?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Su(e)){for(var r=Zn(e);Su(this.peekCodePoint(0))&&r.length<6;)r+=Zn(this.consumeCodePoint());cg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||qz(n)||n>1114111?oE:n}return e===ho?oE:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(AE(r))e+=Zn(r);else if(tl(r,this.peekCodePoint(0)))e+=Zn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),UU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new TU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||yG(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ly:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),a0=function(t){return t.type===15},fh=function(t){return t.type===17},Zr=function(t){return t.type===20},vG=function(t){return t.type===0},cy=function(t,e){return Zr(t)&&t.value===e},LU=function(t){return t.type!==31},$d=function(t){return t.type!==31&&t.type!==4},To=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},yG=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},$l=function(t){return t.type===17||t.type===15},As=function(t){return t.type===16||$l(t)},QU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Vs={type:17,number:0,flags:i0},HB={type:16,number:50,flags:i0},ml={type:16,number:100,flags:i0},xf=function(t,e,r){var n=t[0],s=t[1];return[un(n,e),un(typeof s<"u"?s:n,r)]},un=function(t,e){if(t.type===16)return t.number/100*e;if(a0(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},jU="deg",RU="grad",PU="rad",DU="turn",b1={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case jU:return Math.PI*e.number/180;case RU:return Math.PI/200*e.number;case PU:return e.number;case DU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},MU=function(t){return t.type===15&&(t.unit===jU||t.unit===RU||t.unit===PU||t.unit===DU)},OU=function(t){var e=t.filter(Zr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Vs,Vs];case"to top":case"bottom":return Na(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Vs,ml];case"to right":case"left":return Na(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ml,ml];case"to bottom":case"top":return Na(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ml,Vs];case"to left":case"right":return Na(270)}return 0},Na=function(t){return Math.PI*t/180},Ul={name:"color",parse:function(t,e){if(e.type===18){var r=bG[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return wl(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return wl(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return wl(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return wl(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=aA[e.value.toUpperCase()];if(typeof o<"u")return o}return aA.TRANSPARENT}},Ll=function(t){return(255&t)===0},_s=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},wl=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},lE=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},cE=function(t,e){var r=e.filter($d);if(r.length===3){var n=r.map(lE),s=n[0],i=n[1],a=n[2];return wl(s,i,a,1)}if(r.length===4){var o=r.map(lE),s=o[0],i=o[1],a=o[2],A=o[3];return wl(s,i,a,A)}return 0};function Hx(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var uE=function(t,e){var r=e.filter($d),n=r[0],s=r[1],i=r[2],a=r[3],o=(n.type===17?Na(n.number):b1.parse(t,n))/(Math.PI*2),A=As(s)?s.number/100:0,c=As(i)?i.number/100:0,u=typeof a<"u"&&As(a)?un(a,1):1;if(A===0)return wl(c*255,c*255,c*255,1);var d=c<=.5?c*(A+1):c+A-c*A,p=c*2-d,g=Hx(p,d,o+1/3),v=Hx(p,d,o),y=Hx(p,d,o-1/3);return wl(g*255,v*255,y*255,u)},bG={hsl:uE,hsla:uE,rgb:cE,rgba:cE},Of=function(t,e){return Ul.parse(t,UU.create(e).parseComponentValue())},aA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},BG={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Zr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_G={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},B1=function(t,e){var r=Ul.parse(t,e[0]),n=e[1];return n&&As(n)?{color:r,stop:n}:{color:r,stop:null}},dE=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Vs),n.stop===null&&(n.stop=ml);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var A=un(o,e);A>i?s.push(A):s.push(i),i=A}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var u=s[a];if(u===null)c===null&&(c=a);else if(c!==null){for(var d=a-c,p=s[c-1],g=(u-p)/(d+1),v=1;v<=d;v++)s[c+v-1]=g*v;c=null}}return t.map(function(y,S){var x=y.color;return{color:x,stop:Math.max(Math.min(1,s[S]/e),0)}})},CG=function(t,e,r){var n=e/2,s=r/2,i=un(t[0],e)-n,a=s-un(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},IG=function(t,e,r){var n=typeof t=="number"?t:CG(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,o=s/2,A=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,i-c,i+c,a-A,a+A]},za=function(t,e){return Math.sqrt(t*t+e*e)},hE=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var A=o[0],c=o[1],u=za(r-A,n-c);return(s?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:o,optimumDistance:u}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},EG=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(za(e,r),za(e,r-s),za(e-n,r),za(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),A=hE(n,s,e,r,!0),c=A[0],u=A[1];i=za(c-e,(u-r)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(za(e,r),za(e,r-s),za(e-n,r),za(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),d=hE(n,s,e,r,!1),c=d[0],u=d[1];i=za(c-e,(u-r)/o),a=o*i}break}return Array.isArray(t.size)&&(i=un(t.size[0],n),a=t.size.length===2?un(t.size[1],s):i),[i,a]},kG=function(t,e){var r=Na(180),n=[];return To(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=OU(s);return}else if(MU(a)){r=b1.parse(t,a);return}}var o=B1(t,s);n.push(o)}),{angle:r,stops:n,type:1}},hg=function(t,e){var r=Na(180),n=[];return To(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=OU(s);return}else if(MU(a)){r=(b1.parse(t,a)+Na(270))%Na(360);return}}var o=B1(t,s);n.push(o)}),{angle:r,stops:n,type:1}},SG=function(t,e){var r=Na(180),n=[],s=1,i=0,a=3,o=[];return To(e).forEach(function(A,c){var u=A[0];if(c===0){if(Zr(u)&&u.value==="linear"){s=1;return}else if(Zr(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var d=Ul.parse(t,u.values[0]);n.push({stop:Vs,color:d})}else if(u.name==="to"){var d=Ul.parse(t,u.values[0]);n.push({stop:ml,color:d})}else if(u.name==="color-stop"){var p=u.values.filter($d);if(p.length===2){var d=Ul.parse(t,p[1]),g=p[0];fh(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:d})}}}}),s===1?{angle:(r+Na(180))%Na(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:o,type:s}},HU="closest-side",VU="farthest-side",KU="closest-corner",zU="farthest-corner",GU="circle",$U="ellipse",qU="cover",WU="contain",NG=function(t,e){var r=0,n=3,s=[],i=[];return To(e).forEach(function(a,o){var A=!0;if(o===0){var c=!1;A=a.reduce(function(d,p){if(c)if(Zr(p))switch(p.value){case"center":return i.push(HB),d;case"top":case"left":return i.push(Vs),d;case"right":case"bottom":return i.push(ml),d}else(As(p)||$l(p))&&i.push(p);else if(Zr(p))switch(p.value){case GU:return r=0,!1;case $U:return r=1,!1;case"at":return c=!0,!1;case HU:return n=0,!1;case qU:case VU:return n=1,!1;case WU:case KU:return n=2,!1;case zU:return n=3,!1}else if($l(p)||As(p))return Array.isArray(n)||(n=[]),n.push(p),!1;return d},A)}if(A){var u=B1(t,a);s.push(u)}}),{size:n,shape:r,stops:s,position:i,type:2}},fg=function(t,e){var r=0,n=3,s=[],i=[];return To(e).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(u,d){if(Zr(d))switch(d.value){case"center":return i.push(HB),!1;case"top":case"left":return i.push(Vs),!1;case"right":case"bottom":return i.push(ml),!1}else if(As(d)||$l(d))return i.push(d),!1;return u},A):o===1&&(A=a.reduce(function(u,d){if(Zr(d))switch(d.value){case GU:return r=0,!1;case $U:return r=1,!1;case WU:case HU:return n=0,!1;case VU:return n=1,!1;case KU:return n=2,!1;case qU:case zU:return n=3,!1}else if($l(d)||As(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return u},A)),A){var c=B1(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},FG=function(t){return t.type===1},TG=function(t){return t.type===2},VB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=JU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function UG(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!JU[t.name])}var JU={"linear-gradient":kG,"-moz-linear-gradient":hg,"-ms-linear-gradient":hg,"-o-linear-gradient":hg,"-webkit-linear-gradient":hg,"radial-gradient":NG,"-moz-radial-gradient":fg,"-ms-radial-gradient":fg,"-o-radial-gradient":fg,"-webkit-radial-gradient":fg,"-webkit-gradient":SG},LG={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return $d(n)&&UG(n)}).map(function(n){return VB.parse(t,n)})}},QG={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Zr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},jG={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return To(e).map(function(r){return r.filter(As)}).map(QU)}},RG={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return To(e).map(function(r){return r.filter(Zr).map(function(n){return n.value}).join(" ")}).map(PG)}},PG=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},md;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(md||(md={}));var DG={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return To(e).map(function(r){return r.filter(MG)})}},MG=function(t){return Zr(t)||As(t)},_1=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},OG=_1("top"),HG=_1("right"),VG=_1("bottom"),KG=_1("left"),C1=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return QU(r.filter(As))}}},zG=C1("top-left"),GG=C1("top-right"),$G=C1("bottom-right"),qG=C1("bottom-left"),I1=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},WG=I1("top"),JG=I1("right"),XG=I1("bottom"),YG=I1("left"),E1=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return a0(r)?r.number:0}}},ZG=E1("top"),e$=E1("right"),t$=E1("bottom"),r$=E1("left"),n$={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},s$={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},i$={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Zr).reduce(function(r,n){return r|a$(n.value)},0)}},a$=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},o$={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},A$={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},cw;(function(t){t.NORMAL="normal",t.STRICT="strict"})(cw||(cw={}));var l$={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return cw.STRICT;case"normal":default:return cw.NORMAL}}},c$={name:"line-height",initialValue:"normal",prefix:!1,type:4},fE=function(t,e){return Zr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:As(t)?un(t,e):e},u$={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:VB.parse(t,e)}},d$={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},uy={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},k1=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},h$=k1("top"),f$=k1("right"),p$=k1("bottom"),g$=k1("left"),m$={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Zr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},w$={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},S1=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},x$=S1("top"),v$=S1("right"),y$=S1("bottom"),b$=S1("left"),B$={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},_$={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},C$={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&cy(e[0],"none")?[]:To(e).map(function(r){for(var n={color:aA.TRANSPARENT,offsetX:Vs,offsetY:Vs,blur:Vs},s=0,i=0;i<r.length;i++){var a=r[i];$l(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=Ul.parse(t,a)}return n})}},I$={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},E$={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=N$[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},k$=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},S$=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,o]:null},N$={matrix:k$,matrix3d:S$},pE={type:16,number:50,flags:i0},F$=[pE,pE],T$={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(As);return r.length!==2?F$:[r[0],r[1]]}},U$={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Hf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Hf||(Hf={}));var L$={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Hf.BREAK_ALL;case"keep-all":return Hf.KEEP_ALL;case"normal":default:return Hf.NORMAL}}},Q$={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(fh(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},XU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},j$={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return fh(e)?e.number:1}},R$={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},P$={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Zr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},D$={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},M$={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},O$={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(fh(e))return e.number;if(Zr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},H$={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Zr).map(function(r){return r.value})}},V$={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ws=function(t,e){return(t&e)!==0},K$={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},z$={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(LU),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var A=o&&fh(o)?o.number:1;n.push({counter:a.value,increment:A})}}return n}},G$={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(LU),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(Zr(i)&&i.value!=="none"){var o=a&&fh(a)?a.number:0;r.push({counter:i.value,reset:o})}}return r}},$$={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(a0).map(function(r){return XU.parse(t,r)})}},q$={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(vG);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;n.push({open:a,close:o})}return n}},gE=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},W$={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&cy(e[0],"none")?[]:To(e).map(function(r){for(var n={color:255,offsetX:Vs,offsetY:Vs,blur:Vs,spread:Vs,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];cy(a,"inset")?n.inset=!0:$l(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=Ul.parse(t,a)}return n})}},J$={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Zr).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},X$={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Y$={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return a0(e)?e.number:0}},Z$=function(){function t(e,r){var n,s;this.animationDuration=Ut(e,$$,r.animationDuration),this.backgroundClip=Ut(e,BG,r.backgroundClip),this.backgroundColor=Ut(e,_G,r.backgroundColor),this.backgroundImage=Ut(e,LG,r.backgroundImage),this.backgroundOrigin=Ut(e,QG,r.backgroundOrigin),this.backgroundPosition=Ut(e,jG,r.backgroundPosition),this.backgroundRepeat=Ut(e,RG,r.backgroundRepeat),this.backgroundSize=Ut(e,DG,r.backgroundSize),this.borderTopColor=Ut(e,OG,r.borderTopColor),this.borderRightColor=Ut(e,HG,r.borderRightColor),this.borderBottomColor=Ut(e,VG,r.borderBottomColor),this.borderLeftColor=Ut(e,KG,r.borderLeftColor),this.borderTopLeftRadius=Ut(e,zG,r.borderTopLeftRadius),this.borderTopRightRadius=Ut(e,GG,r.borderTopRightRadius),this.borderBottomRightRadius=Ut(e,$G,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ut(e,qG,r.borderBottomLeftRadius),this.borderTopStyle=Ut(e,WG,r.borderTopStyle),this.borderRightStyle=Ut(e,JG,r.borderRightStyle),this.borderBottomStyle=Ut(e,XG,r.borderBottomStyle),this.borderLeftStyle=Ut(e,YG,r.borderLeftStyle),this.borderTopWidth=Ut(e,ZG,r.borderTopWidth),this.borderRightWidth=Ut(e,e$,r.borderRightWidth),this.borderBottomWidth=Ut(e,t$,r.borderBottomWidth),this.borderLeftWidth=Ut(e,r$,r.borderLeftWidth),this.boxShadow=Ut(e,W$,r.boxShadow),this.color=Ut(e,n$,r.color),this.direction=Ut(e,s$,r.direction),this.display=Ut(e,i$,r.display),this.float=Ut(e,o$,r.cssFloat),this.fontFamily=Ut(e,D$,r.fontFamily),this.fontSize=Ut(e,M$,r.fontSize),this.fontStyle=Ut(e,V$,r.fontStyle),this.fontVariant=Ut(e,H$,r.fontVariant),this.fontWeight=Ut(e,O$,r.fontWeight),this.letterSpacing=Ut(e,A$,r.letterSpacing),this.lineBreak=Ut(e,l$,r.lineBreak),this.lineHeight=Ut(e,c$,r.lineHeight),this.listStyleImage=Ut(e,u$,r.listStyleImage),this.listStylePosition=Ut(e,d$,r.listStylePosition),this.listStyleType=Ut(e,uy,r.listStyleType),this.marginTop=Ut(e,h$,r.marginTop),this.marginRight=Ut(e,f$,r.marginRight),this.marginBottom=Ut(e,p$,r.marginBottom),this.marginLeft=Ut(e,g$,r.marginLeft),this.opacity=Ut(e,j$,r.opacity);var i=Ut(e,m$,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Ut(e,w$,r.overflowWrap),this.paddingTop=Ut(e,x$,r.paddingTop),this.paddingRight=Ut(e,v$,r.paddingRight),this.paddingBottom=Ut(e,y$,r.paddingBottom),this.paddingLeft=Ut(e,b$,r.paddingLeft),this.paintOrder=Ut(e,J$,r.paintOrder),this.position=Ut(e,_$,r.position),this.textAlign=Ut(e,B$,r.textAlign),this.textDecorationColor=Ut(e,R$,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Ut(e,P$,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Ut(e,C$,r.textShadow),this.textTransform=Ut(e,I$,r.textTransform),this.transform=Ut(e,E$,r.transform),this.transformOrigin=Ut(e,T$,r.transformOrigin),this.visibility=Ut(e,U$,r.visibility),this.webkitTextStrokeColor=Ut(e,X$,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ut(e,Y$,r.webkitTextStrokeWidth),this.wordBreak=Ut(e,L$,r.wordBreak),this.zIndex=Ut(e,Q$,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ll(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return ws(this.display,4)||ws(this.display,33554432)||ws(this.display,268435456)||ws(this.display,536870912)||ws(this.display,67108864)||ws(this.display,134217728)},t}(),eq=function(){function t(e,r){this.content=Ut(e,K$,r.content),this.quotes=Ut(e,q$,r.quotes)}return t}(),mE=function(){function t(e,r){this.counterIncrement=Ut(e,z$,r.counterIncrement),this.counterReset=Ut(e,G$,r.counterReset)}return t}(),Ut=function(t,e,r){var n=new TU,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new UU(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Zr(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return b1.parse(t,i.parseComponentValue());case"color":return Ul.parse(t,i.parseComponentValue());case"image":return VB.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return $l(o)?o:Vs;case"length-percentage":var A=i.parseComponentValue();return As(A)?A:Vs;case"time":return XU.parse(t,i.parseComponentValue())}break}},tq="data-html2canvas-debug",rq=function(t){var e=t.getAttribute(tq);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},dy=function(t,e){var r=rq(t);return r===1||e===r},Uo=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,dy(r,3))debugger;this.styles=new Z$(e,window.getComputedStyle(r,null)),py(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=v1(this.context,r),dy(r,4)&&(this.flags|=16)}return t}(),nq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",wE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var pg=0;pg<wE.length;pg++)vf[wE.charCodeAt(pg)]=pg;var sq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=vf[t.charCodeAt(n)],a=vf[t.charCodeAt(n+1)],o=vf[t.charCodeAt(n+2)],A=vf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|A&63;return c},iq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},aq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Pc=5,KB=11,Vx=2,oq=KB-Pc,YU=65536>>Pc,Aq=1<<Pc,Kx=Aq-1,lq=1024>>Pc,cq=YU+lq,uq=cq,dq=32,hq=uq+dq,fq=65536>>KB,pq=1<<oq,gq=pq-1,xE=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},mq=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},wq=function(t,e){var r=sq(t),n=Array.isArray(r)?aq(r):new Uint32Array(r),s=Array.isArray(r)?iq(r):new Uint16Array(r),i=24,a=xE(s,i/2,n[4]/2),o=n[5]===2?xE(s,(i+n[4])/2):mq(n,Math.ceil((i+n[4])/4));return new xq(n[0],n[1],n[2],n[3],a,o)},xq=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Pc],r=(r<<Vx)+(e&Kx),this.data[r];if(e<=65535)return r=this.index[YU+(e-55296>>Pc)],r=(r<<Vx)+(e&Kx),this.data[r];if(e<this.highStart)return r=hq-fq+(e>>KB),r=this.index[r],r+=e>>Pc&gq,r=this.index[r],r=(r<<Vx)+(e&Kx),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),vE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gg=0;gg<vE.length;gg++)vq[vE.charCodeAt(gg)]=gg;var yq=1,zx=2,Gx=3,yE=4,bE=5,bq=7,BE=8,$x=9,qx=10,_E=11,CE=12,IE=13,EE=14,Wx=15,Bq=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},_q=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Cq=wq(nq),_a="",Jx="",Iq=function(t){return Cq.get(t)},Eq=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===zx&&a===Gx)return _a;if(i===zx||i===Gx||i===yE||a===zx||a===Gx||a===yE)return Jx;if(i===BE&&[BE,$x,_E,CE].indexOf(a)!==-1||(i===_E||i===$x)&&(a===$x||a===qx)||(i===CE||i===qx)&&a===qx||a===IE||a===bE||a===bq||i===yq)return _a;if(i===IE&&a===EE){for(;s===bE;)s=e[--n];if(s===EE)return _a}if(i===Wx&&a===Wx){for(var o=0;s===Wx;)o++,s=e[--n];if(o%2===0)return _a}return Jx},kq=function(t){var e=Bq(t),r=e.length,n=0,s=0,i=e.map(Iq);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=_a;n<r&&(a=Eq(e,i,++n))===_a;);if(a!==_a||n===r){var o=_q.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},Sq=function(t){for(var e=kq(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Nq=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},Fq=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=y1(n.data).map(function(A){return Zn(A)}),i=0,a={},o=s.every(function(A,c){r.setStart(n,i),r.setEnd(n,i+A.length);var u=r.getBoundingClientRect();i+=A.length;var d=u.x>a.x||u.y>a.y;return a=u,c===0?!0:d});return t.body.removeChild(e),o},Tq=function(){return typeof new Image().crossOrigin<"u"},Uq=function(){return typeof new XMLHttpRequest().responseType=="string"},Lq=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},kE=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Qq=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=hy(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),SE(a).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",kE(A)?SE(hy(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),kE(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},hy=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},SE=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Ds={get SUPPORT_RANGE_BOUNDS(){var t=Nq(document);return Object.defineProperty(Ds,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Ds.SUPPORT_RANGE_BOUNDS&&Fq(document);return Object.defineProperty(Ds,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Lq(document);return Object.defineProperty(Ds,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Qq(document):Promise.resolve(!1);return Object.defineProperty(Ds,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Tq();return Object.defineProperty(Ds,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Uq();return Object.defineProperty(Ds,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ds,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ds,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Vf=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),jq=function(t,e,r,n){var s=Dq(e,r),i=[],a=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Ds.SUPPORT_RANGE_BOUNDS){var A=NE(n,a,o.length).getClientRects();if(A.length>1){var c=zB(o),u=0;c.forEach(function(p){i.push(new Vf(p,pA.fromDOMRectList(t,NE(n,u+a,p.length).getClientRects()))),u+=p.length})}else i.push(new Vf(o,pA.fromDOMRectList(t,A)))}else{var d=n.splitText(o.length);i.push(new Vf(o,Rq(t,n))),n=d}else Ds.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),i},Rq=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=v1(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return pA.EMPTY},NE=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},zB=function(t){if(Ds.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Sq(t)},Pq=function(t,e){if(Ds.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Oq(t,e)},Dq=function(t,e){return e.letterSpacing!==0?zB(t):Pq(t,e)},Mq=[32,160,4961,65792,65793,4153,4241],Oq=function(t,e){for(var r=fz(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),o=y1(a),A="";o.forEach(function(c){Mq.indexOf(c)===-1?A+=Zn(c):(A.length&&n.push(A),n.push(Zn(c)),A="")}),A.length&&n.push(A)}};!(s=r.next()).done;)i();return n},Hq=function(){function t(e,r,n){this.text=Vq(r.data,n.textTransform),this.textBounds=jq(e,this.text,n,r)}return t}(),Vq=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Kq,zq);case 2:return t.toUpperCase();default:return t}},Kq=/(^|\s|:|-|\(|\))([a-z])/g,zq=function(t,e,r){return t.length>0?e+r.toUpperCase():t},ZU=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Uo),eL=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Uo),tL=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=v1(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Uo),rL=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Uo),fy=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Uo),Gq=[{type:15,flags:0,unit:"px",number:3}],$q=[{type:16,flags:0,number:50}],qq=function(t){return t.width>t.height?new pA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new pA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Wq=function(t){var e=t.type===Jq?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},uw="checkbox",dw="radio",Jq="password",FE=707406591,GB=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=Wq(n),(s.type===uw||s.type===dw)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=qq(s.bounds)),s.type){case uw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Gq;break;case dw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=$q;break}return s}return e}(Uo),nL=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Uo),sL=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Uo),iL=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=oL(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Of(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):aA.TRANSPARENT,a=n.contentWindow.document.body?Of(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):aA.TRANSPARENT;s.backgroundColor=Ll(i)?Ll(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Uo),Xq=["OL","UL","MENU"],im=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,AL(s)&&s.data.trim().length>0)r.textNodes.push(new Hq(t,s,r.styles));else if(sd(s))if(dL(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return im(t,o,r,n)});else{var a=aL(t,s);a.styles.isVisible()&&(Yq(s,a,n)?a.flags|=4:Zq(a.styles)&&(a.flags|=2),Xq.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?im(t,s.shadowRoot,a,n):!hw(s)&&!lL(s)&&!fw(s)&&im(t,s,a,n))}},aL=function(t,e){return gy(e)?new ZU(t,e):cL(e)?new eL(t,e):lL(e)?new tL(t,e):eW(e)?new rL(t,e):tW(e)?new fy(t,e):rW(e)?new GB(t,e):fw(e)?new nL(t,e):hw(e)?new sL(t,e):uL(e)?new iL(t,e):new Uo(t,e)},oL=function(t,e){var r=aL(t,e);return r.flags|=4,im(t,e,r,r),r},Yq=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||$B(t)&&r.styles.isTransparent()},Zq=function(t){return t.isPositioned()||t.isFloating()},AL=function(t){return t.nodeType===Node.TEXT_NODE},sd=function(t){return t.nodeType===Node.ELEMENT_NODE},py=function(t){return sd(t)&&typeof t.style<"u"&&!am(t)},am=function(t){return typeof t.className=="object"},eW=function(t){return t.tagName==="LI"},tW=function(t){return t.tagName==="OL"},rW=function(t){return t.tagName==="INPUT"},nW=function(t){return t.tagName==="HTML"},lL=function(t){return t.tagName==="svg"},$B=function(t){return t.tagName==="BODY"},cL=function(t){return t.tagName==="CANVAS"},TE=function(t){return t.tagName==="VIDEO"},gy=function(t){return t.tagName==="IMG"},uL=function(t){return t.tagName==="IFRAME"},UE=function(t){return t.tagName==="STYLE"},sW=function(t){return t.tagName==="SCRIPT"},hw=function(t){return t.tagName==="TEXTAREA"},fw=function(t){return t.tagName==="SELECT"},dL=function(t){return t.tagName==="SLOT"},LE=function(t){return t.tagName.indexOf("-")>0},iW=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var A=r.counters[o.counter];A&&o.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var A=r.counters[o.counter];a.push(o.counter),A||(A=r.counters[o.counter]=[]),A.push(o.reset)}),a},t}(),QE={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},jE={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Nu=function(t,e,r,n,s,i){return t<e||t>r?kp(t,s,i.length>0):n.integers.reduce(function(a,o,A){for(;t>=o;)t-=o,a+=n.values[A];return a},"")+i},hL=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},Xn=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(hL(Math.abs(t),i,n,function(a){return Zn(Math.floor(a%i)+e)})+s)},mc=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return hL(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Mu=1,XA=2,YA=4,yf=8,zo=function(t,e,r,n,s,i){if(t<-9999||t>9999)return kp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var A=0;a>0&&A<=4;A++){var c=a%10;c===0&&ws(i,Mu)&&o!==""?o=e[c]+o:c>1||c===1&&A===0||c===1&&A===1&&ws(i,XA)||c===1&&A===1&&ws(i,YA)&&t>100||c===1&&A>1&&ws(i,yf)?o=e[c]+(A>0?r[A-1]:"")+o:c===1&&A>0&&(o=r[A-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},RE="",PE="",DE="",Xx="",kp=function(t,e,r){var n=r?". ":"",s=r?"":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=Xn(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return mc(t,"",s);case 6:return Nu(t,1,3999,QE,3,n).toLowerCase();case 7:return Nu(t,1,3999,QE,3,n);case 8:return Xn(t,945,969,!1,n);case 9:return Xn(t,97,122,!1,n);case 10:return Xn(t,65,90,!1,n);case 11:return Xn(t,1632,1641,!0,n);case 12:case 49:return Nu(t,1,9999,jE,3,n);case 35:return Nu(t,1,9999,jE,3,n).toLowerCase();case 13:return Xn(t,2534,2543,!0,n);case 14:case 30:return Xn(t,6112,6121,!0,n);case 15:return mc(t,"",s);case 16:return mc(t,"",s);case 17:case 48:return zo(t,"",RE,"",s,XA|YA|yf);case 47:return zo(t,"",PE,"",s,Mu|XA|YA|yf);case 42:return zo(t,"",RE,"",s,XA|YA|yf);case 41:return zo(t,"",PE,"",s,Mu|XA|YA|yf);case 26:return zo(t,"","",DE,s,0);case 25:return zo(t,"","",DE,s,Mu|XA|YA);case 31:return zo(t,"","",Xx,i,Mu|XA|YA);case 33:return zo(t,"","",Xx,i,0);case 32:return zo(t,"","",Xx,i,Mu|XA|YA);case 18:return Xn(t,2406,2415,!0,n);case 20:return Nu(t,1,19999,oW,3,n);case 21:return Xn(t,2790,2799,!0,n);case 22:return Xn(t,2662,2671,!0,n);case 22:return Nu(t,1,10999,aW,3,n);case 23:return mc(t,"");case 24:return mc(t,"");case 27:return Xn(t,3302,3311,!0,n);case 28:return mc(t,"",s);case 29:return mc(t,"",s);case 34:return Xn(t,3792,3801,!0,n);case 37:return Xn(t,6160,6169,!0,n);case 38:return Xn(t,4160,4169,!0,n);case 39:return Xn(t,2918,2927,!0,n);case 40:return Xn(t,1776,1785,!0,n);case 43:return Xn(t,3046,3055,!0,n);case 44:return Xn(t,3174,3183,!0,n);case 45:return Xn(t,3664,3673,!0,n);case 46:return Xn(t,3872,3881,!0,n);case 3:default:return Xn(t,48,57,!0,n)}},fL="data-html2canvas-ignore",ME=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new iW,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=AW(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,A=o.document,c=uW(s).then(function(){return xi(n,void 0,void 0,function(){var u,d;return ri(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(pW),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),u=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,cW(A)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,d)}).then(function(){return s})]:[2,s]}})})});return A.open(),A.write(hW(document.doctype)+"<html></html>"),fW(this.referenceElement.ownerDocument,i,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(e){if(dy(e,2))debugger;if(cL(e))return this.createCanvasClone(e);if(TE(e))return this.createVideoClone(e);if(UE(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return gy(r)&&(gy(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),LE(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Yx(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!sd(r)||!sW(r)&&!r.hasAttribute(fL)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!sd(r)||!UE(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(sd(i)&&dL(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(AL(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&sd(e)&&(py(e)||am(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&py(s)&&(this.clonedReferenceElement=s),$B(s)&&wW(s);var A=this.counters.parse(new mE(this.context,i)),c=this.resolvePseudoContent(e,s,a,Kf.BEFORE);LE(e)&&(r=!0),TE(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,o,Kf.AFTER);return u&&s.appendChild(u),this.counters.pop(A),(i&&(this.options.copyStyles||am(e))&&!uL(e)||r)&&Yx(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(hw(e)||fw(e))&&(hw(s)||fw(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new mE(this.context,n));var A=new eq(this.context,n),c=o.createElement("html2canvaspseudoelement");Yx(n,c),A.content.forEach(function(d){if(d.type===0)c.appendChild(o.createTextNode(d.value));else if(d.type===22){var p=o.createElement("img");p.src=d.value,p.style.opacity="1",c.appendChild(p)}else if(d.type===18){if(d.name==="attr"){var g=d.values.filter(Zr);g.length&&c.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(d.name==="counter"){var v=d.values.filter($d),y=v[0],S=v[1];if(y&&Zr(y)){var x=i.counters.getCounterValue(y.value),I=S&&Zr(S)?uy.parse(i.context,S.value):3;c.appendChild(o.createTextNode(kp(x,I,!1)))}}else if(d.name==="counters"){var N=d.values.filter($d),y=N[0],U=N[1],S=N[2];if(y&&Zr(y)){var D=i.counters.getCounterValues(y.value),P=S&&Zr(S)?uy.parse(i.context,S.value):3,E=U&&U.type===0?U.value:"",_=D.map(function(k){return kp(k,P,!1)}).join(E);c.appendChild(o.createTextNode(_))}}}else if(d.type===20)switch(d.value){case"open-quote":c.appendChild(o.createTextNode(gE(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(gE(A.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(d.value))}}),c.className=my+" "+wy;var u=s===Kf.BEFORE?" "+my:" "+wy;return am(r)?r.className.baseValue+=u:r.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Kf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Kf||(Kf={}));var AW=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(fL,"true"),t.body.appendChild(r),r},lW=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},cW=function(t){return Promise.all([].slice.call(t.images,0).map(lW))},uW=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},dW=["all","d","content"],Yx=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);dW.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},hW=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},fW=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},pW=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},gW=":before",mW=":after",my="___html2canvas___pseudoelement_before",wy="___html2canvas___pseudoelement_after",OE=`{
    content: "" !important;
    display: none !important;
}`,wW=function(t){xW(t,"."+my+gW+OE+`
         .`+wy+mW+OE)},xW=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},pL=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),vW=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(ev(e)||_W(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return xi(this,void 0,void 0,function(){var r,n,s,i,a=this;return ri(this,function(o){switch(o.label){case 0:return r=pL.isSameOrigin(e),n=!Zx(e)&&this._options.useCORS===!0&&Ds.SUPPORT_CORS_IMAGES&&!r,s=!Zx(e)&&!r&&!ev(e)&&typeof this._options.proxy=="string"&&Ds.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Zx(e)&&!ev(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,c){var u=new Image;u.onload=function(){return A(u)},u.onerror=c,(CW(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return A(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=Ds.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")i(A.response);else{var d=new FileReader;d.addEventListener("load",function(){return i(d.result)},!1),d.addEventListener("error",function(p){return a(p)},!1),d.readAsDataURL(A.response)}else a("Failed to proxy resource "+s+" with status code "+A.status)},A.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),r._options.imageTimeout){var u=r._options.imageTimeout;A.timeout=u,A.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+s)}}A.send()})},t}(),yW=/^data:image\/svg\+xml/i,bW=/^data:image\/.*;base64,/i,BW=/^data:image\/.*/i,_W=function(t){return Ds.SUPPORT_SVG_DRAWING||!IW(t)},Zx=function(t){return BW.test(t)},CW=function(t){return bW.test(t)},ev=function(t){return t.substr(0,4)==="blob"},IW=function(t){return t.substr(-3).toLowerCase()==="svg"||yW.test(t)},Ft=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Fu=function(t,e,r){return new Ft(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},mg=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Fu(this.start,this.startControl,e),s=Fu(this.startControl,this.endControl,e),i=Fu(this.endControl,this.end,e),a=Fu(n,s,e),o=Fu(s,i,e),A=Fu(a,o,e);return r?new t(this.start,n,a,A):new t(A,o,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ka=function(t){return t.type===1},EW=function(){function t(e){var r=e.styles,n=e.bounds,s=xf(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],o=xf(r.borderTopRightRadius,n.width,n.height),A=o[0],c=o[1],u=xf(r.borderBottomRightRadius,n.width,n.height),d=u[0],p=u[1],g=xf(r.borderBottomLeftRadius,n.width,n.height),v=g[0],y=g[1],S=[];S.push((i+A)/n.width),S.push((v+d)/n.width),S.push((a+y)/n.height),S.push((c+p)/n.height);var x=Math.max.apply(Math,S);x>1&&(i/=x,a/=x,A/=x,c/=x,d/=x,p/=x,v/=x,y/=x);var I=n.width-A,N=n.height-p,U=n.width-d,D=n.height-y,P=r.borderTopWidth,E=r.borderRightWidth,_=r.borderBottomWidth,B=r.borderLeftWidth,Q=un(r.paddingTop,e.bounds.width),k=un(r.paddingRight,e.bounds.width),L=un(r.paddingBottom,e.bounds.width),T=un(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?Bn(n.left+B/3,n.top+P/3,i-B/3,a-P/3,Hr.TOP_LEFT):new Ft(n.left+B/3,n.top+P/3),this.topRightBorderDoubleOuterBox=i>0||a>0?Bn(n.left+I,n.top+P/3,A-E/3,c-P/3,Hr.TOP_RIGHT):new Ft(n.left+n.width-E/3,n.top+P/3),this.bottomRightBorderDoubleOuterBox=d>0||p>0?Bn(n.left+U,n.top+N,d-E/3,p-_/3,Hr.BOTTOM_RIGHT):new Ft(n.left+n.width-E/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=v>0||y>0?Bn(n.left+B/3,n.top+D,v-B/3,y-_/3,Hr.BOTTOM_LEFT):new Ft(n.left+B/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?Bn(n.left+B*2/3,n.top+P*2/3,i-B*2/3,a-P*2/3,Hr.TOP_LEFT):new Ft(n.left+B*2/3,n.top+P*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?Bn(n.left+I,n.top+P*2/3,A-E*2/3,c-P*2/3,Hr.TOP_RIGHT):new Ft(n.left+n.width-E*2/3,n.top+P*2/3),this.bottomRightBorderDoubleInnerBox=d>0||p>0?Bn(n.left+U,n.top+N,d-E*2/3,p-_*2/3,Hr.BOTTOM_RIGHT):new Ft(n.left+n.width-E*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||y>0?Bn(n.left+B*2/3,n.top+D,v-B*2/3,y-_*2/3,Hr.BOTTOM_LEFT):new Ft(n.left+B*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=i>0||a>0?Bn(n.left+B/2,n.top+P/2,i-B/2,a-P/2,Hr.TOP_LEFT):new Ft(n.left+B/2,n.top+P/2),this.topRightBorderStroke=i>0||a>0?Bn(n.left+I,n.top+P/2,A-E/2,c-P/2,Hr.TOP_RIGHT):new Ft(n.left+n.width-E/2,n.top+P/2),this.bottomRightBorderStroke=d>0||p>0?Bn(n.left+U,n.top+N,d-E/2,p-_/2,Hr.BOTTOM_RIGHT):new Ft(n.left+n.width-E/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=v>0||y>0?Bn(n.left+B/2,n.top+D,v-B/2,y-_/2,Hr.BOTTOM_LEFT):new Ft(n.left+B/2,n.top+n.height-_/2),this.topLeftBorderBox=i>0||a>0?Bn(n.left,n.top,i,a,Hr.TOP_LEFT):new Ft(n.left,n.top),this.topRightBorderBox=A>0||c>0?Bn(n.left+I,n.top,A,c,Hr.TOP_RIGHT):new Ft(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||p>0?Bn(n.left+U,n.top+N,d,p,Hr.BOTTOM_RIGHT):new Ft(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||y>0?Bn(n.left,n.top+D,v,y,Hr.BOTTOM_LEFT):new Ft(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?Bn(n.left+B,n.top+P,Math.max(0,i-B),Math.max(0,a-P),Hr.TOP_LEFT):new Ft(n.left+B,n.top+P),this.topRightPaddingBox=A>0||c>0?Bn(n.left+Math.min(I,n.width-E),n.top+P,I>n.width+E?0:Math.max(0,A-E),Math.max(0,c-P),Hr.TOP_RIGHT):new Ft(n.left+n.width-E,n.top+P),this.bottomRightPaddingBox=d>0||p>0?Bn(n.left+Math.min(U,n.width-B),n.top+Math.min(N,n.height-_),Math.max(0,d-E),Math.max(0,p-_),Hr.BOTTOM_RIGHT):new Ft(n.left+n.width-E,n.top+n.height-_),this.bottomLeftPaddingBox=v>0||y>0?Bn(n.left+B,n.top+Math.min(D,n.height-_),Math.max(0,v-B),Math.max(0,y-_),Hr.BOTTOM_LEFT):new Ft(n.left+B,n.top+n.height-_),this.topLeftContentBox=i>0||a>0?Bn(n.left+B+T,n.top+P+Q,Math.max(0,i-(B+T)),Math.max(0,a-(P+Q)),Hr.TOP_LEFT):new Ft(n.left+B+T,n.top+P+Q),this.topRightContentBox=A>0||c>0?Bn(n.left+Math.min(I,n.width+B+T),n.top+P+Q,I>n.width+B+T?0:A-B+T,c-(P+Q),Hr.TOP_RIGHT):new Ft(n.left+n.width-(E+k),n.top+P+Q),this.bottomRightContentBox=d>0||p>0?Bn(n.left+Math.min(U,n.width-(B+T)),n.top+Math.min(N,n.height+P+Q),Math.max(0,d-(E+k)),p-(_+L),Hr.BOTTOM_RIGHT):new Ft(n.left+n.width-(E+k),n.top+n.height-(_+L)),this.bottomLeftContentBox=v>0||y>0?Bn(n.left+B+T,n.top+D,Math.max(0,v-(B+T)),y-(_+L),Hr.BOTTOM_LEFT):new Ft(n.left+B+T,n.top+n.height-(_+L))}return t}(),Hr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Hr||(Hr={}));var Bn=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,o=n*i,A=t+r,c=e+n;switch(s){case Hr.TOP_LEFT:return new mg(new Ft(t,c),new Ft(t,c-o),new Ft(A-a,e),new Ft(A,e));case Hr.TOP_RIGHT:return new mg(new Ft(t,e),new Ft(t+a,e),new Ft(A,c-o),new Ft(A,c));case Hr.BOTTOM_RIGHT:return new mg(new Ft(A,e),new Ft(A,e+o),new Ft(t+a,c),new Ft(t,c));case Hr.BOTTOM_LEFT:default:return new mg(new Ft(A,c),new Ft(A-a,c),new Ft(t,e+o),new Ft(t,e))}},pw=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},kW=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},gw=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},SW=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),wg=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),NW=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),FW=function(t){return t.type===0},gL=function(t){return t.type===1},TW=function(t){return t.type===2},HE=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},UW=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},mL=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),wL=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new EW(this.container),this.container.styles.opacity<1&&this.effects.push(new NW(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new SW(n,s,i))}if(this.container.styles.overflowX!==0){var a=pw(this.curves),o=gw(this.curves);HE(a,o)?this.effects.push(new wg(a,6)):(this.effects.push(new wg(a,2)),this.effects.push(new wg(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(A){return!gL(A)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=pw(n.curves),o=gw(n.curves);HE(a,o)||s.unshift(new wg(o,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(A){return ws(A.target,e)})},t}(),xy=function(t,e,r,n){t.container.elements.forEach(function(s){var i=ws(s.flags,4),a=ws(s.flags,2),o=new wL(s,t);ws(s.styles.display,2048)&&n.push(o);var A=ws(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,u=new mL(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var d=s.styles.zIndex.order;if(d<0){var p=0;c.negativeZIndex.some(function(v,y){return d>v.element.container.styles.zIndex.order?(p=y,!1):p>0}),c.negativeZIndex.splice(p,0,u)}else if(d>0){var g=0;c.positiveZIndex.some(function(v,y){return d>=v.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),c.positiveZIndex.splice(g,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);xy(o,u,i?u:r,A)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),xy(o,e,r,A);ws(s.flags,8)&&xL(s,A)})},xL=function(t,e){for(var r=t instanceof fy?t.start:1,n=t instanceof fy?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof rL&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=kp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},LW=function(t){var e=new wL(t,null),r=new mL(e),n=[];return xy(e,r,r,n),xL(e.container,n),r},VE=function(t,e){switch(e){case 0:return Fa(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Fa(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Fa(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Fa(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},QW=function(t,e){switch(e){case 0:return Fa(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Fa(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Fa(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Fa(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},jW=function(t,e){switch(e){case 0:return Fa(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Fa(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Fa(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Fa(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},RW=function(t,e){switch(e){case 0:return xg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return xg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return xg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return xg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},xg=function(t,e){var r=[];return ka(t)?r.push(t.subdivide(.5,!1)):r.push(t),ka(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Fa=function(t,e,r,n){var s=[];return ka(t)?s.push(t.subdivide(.5,!1)):s.push(t),ka(r)?s.push(r.subdivide(.5,!0)):s.push(r),ka(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),ka(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},vL=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},mw=function(t){var e=t.styles,r=t.bounds,n=un(e.paddingLeft,r.width),s=un(e.paddingRight,r.width),i=un(e.paddingTop,r.width),a=un(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},PW=function(t,e){return t===0?e.bounds:t===2?mw(e):vL(e)},DW=function(t,e){return t===0?e.bounds:t===2?mw(e):vL(e)},tv=function(t,e,r){var n=PW(Ou(t.styles.backgroundOrigin,e),t),s=DW(Ou(t.styles.backgroundClip,e),t),i=MW(Ou(t.styles.backgroundSize,e),r,n),a=i[0],o=i[1],A=xf(Ou(t.styles.backgroundPosition,e),n.width-a,n.height-o),c=OW(Ou(t.styles.backgroundRepeat,e),A,i,n,s),u=Math.round(n.left+A[0]),d=Math.round(n.top+A[1]);return[c,u,d,a,o]},Tu=function(t){return Zr(t)&&t.value===md.AUTO},vg=function(t){return typeof t=="number"},MW=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(As(a)&&o&&As(o))return[un(a,r.width),un(o,r.height)];var A=vg(i);if(Zr(a)&&(a.value===md.CONTAIN||a.value===md.COVER)){if(vg(i)){var c=r.width/r.height;return c<i!=(a.value===md.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=vg(n),d=vg(s),p=u||d;if(Tu(a)&&(!o||Tu(o))){if(u&&d)return[n,s];if(!A&&!p)return[r.width,r.height];if(p&&A){var g=u?n:s*i,v=d?s:n/i;return[g,v]}var y=u?n:r.width,S=d?s:r.height;return[y,S]}if(A){var x=0,I=0;return As(a)?x=un(a,r.width):As(o)&&(I=un(o,r.height)),Tu(a)?x=I*i:(!o||Tu(o))&&(I=x/i),[x,I]}var N=null,U=null;if(As(a)?N=un(a,r.width):o&&As(o)&&(U=un(o,r.height)),N!==null&&(!o||Tu(o))&&(U=u&&d?N/n*s:r.height),U!==null&&Tu(a)&&(N=u&&d?U/s*n:r.width),N!==null&&U!==null)return[N,U];throw new Error("Unable to calculate background-size for element")},Ou=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},OW=function(t,e,r,n,s){var i=e[0],a=e[1],o=r[0],A=r[1];switch(t){case 2:return[new Ft(Math.round(n.left),Math.round(n.top+a)),new Ft(Math.round(n.left+n.width),Math.round(n.top+a)),new Ft(Math.round(n.left+n.width),Math.round(A+n.top+a)),new Ft(Math.round(n.left),Math.round(A+n.top+a))];case 3:return[new Ft(Math.round(n.left+i),Math.round(n.top)),new Ft(Math.round(n.left+i+o),Math.round(n.top)),new Ft(Math.round(n.left+i+o),Math.round(n.height+n.top)),new Ft(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new Ft(Math.round(n.left+i),Math.round(n.top+a)),new Ft(Math.round(n.left+i+o),Math.round(n.top+a)),new Ft(Math.round(n.left+i+o),Math.round(n.top+a+A)),new Ft(Math.round(n.left+i),Math.round(n.top+a+A))];default:return[new Ft(Math.round(s.left),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ft(Math.round(s.left),Math.round(s.height+s.top))]}},HW="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",KE="Hidden Text",VW=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=HW,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(KE)),n.appendChild(i),n.appendChild(s);var o=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(KE)),n.style.lineHeight="normal",s.style.verticalAlign="super";var A=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:A}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),yL=function(){function t(e,r){this.context=e,this.options=r}return t}(),KW=1e4,zW=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new VW(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),TW(r)&&(this.ctx.globalAlpha=r.opacity),FW(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),gL(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return xi(this,void 0,void 0,function(){var n;return ri(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return xi(this,void 0,void 0,function(){return ri(this,function(n){switch(n.label){case 0:if(ws(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=zB(r.text);a.reduce(function(o,A){return i.ctx.fillText(A,o,r.bounds.top+s),o+i.ctx.measureText(A).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=JW(r.fontFamily).join(", "),i=a0(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return xi(this,void 0,void 0,function(){var s,i,a,o,A,c,u,d,p=this;return ri(this,function(g){return s=this.createFontStyle(n),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),c=A.baseline,u=A.middle,d=n.paintOrder,r.textBounds.forEach(function(v){d.forEach(function(y){switch(y){case 0:p.ctx.fillStyle=_s(n.color),p.renderTextWithLetterSpacing(v,n.letterSpacing,c);var S=n.textShadow;S.length&&v.text.trim().length&&(S.slice(0).reverse().forEach(function(x){p.ctx.shadowColor=_s(x.color),p.ctx.shadowOffsetX=x.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=x.offsetY.number*p.options.scale,p.ctx.shadowBlur=x.blur.number,p.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),n.textDecorationLine.length&&(p.ctx.fillStyle=_s(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:p.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:p.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:p.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+u),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(p.ctx.strokeStyle=_s(n.webkitTextStrokeColor),p.ctx.lineWidth=n.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=mw(r),a=gw(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return xi(this,void 0,void 0,function(){var n,s,i,a,o,A,I,I,c,u,d,p,U,g,v,D,y,S,x,I,N,U,D;return ri(this,function(P){switch(P.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,o=n.textNodes,P.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,i)]):[3,4];case 2:P.sent(),P.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof ZU))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return I=P.sent(),this.renderReplacedElement(n,s,I),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof eL&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof tL))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return I=P.sent(),this.renderReplacedElement(n,s,I),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof iL&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=P.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),P.label=14;case 14:if(n instanceof GB&&(d=Math.min(n.bounds.width,n.bounds.height),n.type===uw?n.checked&&(this.ctx.save(),this.path([new Ft(n.bounds.left+d*.39363,n.bounds.top+d*.79),new Ft(n.bounds.left+d*.16,n.bounds.top+d*.5549),new Ft(n.bounds.left+d*.27347,n.bounds.top+d*.44071),new Ft(n.bounds.left+d*.39694,n.bounds.top+d*.5649),new Ft(n.bounds.left+d*.72983,n.bounds.top+d*.23),new Ft(n.bounds.left+d*.84,n.bounds.top+d*.34085),new Ft(n.bounds.left+d*.39363,n.bounds.top+d*.79)]),this.ctx.fillStyle=_s(FE),this.ctx.fill(),this.ctx.restore()):n.type===dw&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+d/2,n.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=_s(FE),this.ctx.fill(),this.ctx.restore())),GW(n)&&n.value.length){switch(p=this.createFontStyle(i),U=p[0],g=p[1],v=this.fontMetrics.getMetrics(U,g).baseline,this.ctx.font=U,this.ctx.fillStyle=_s(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qW(n.styles.textAlign),D=mw(n),y=0,n.styles.textAlign){case 1:y+=D.width/2;break;case 2:y+=D.width;break}S=D.add(y,0,0,-D.height/2+1),this.ctx.save(),this.path([new Ft(D.left,D.top),new Ft(D.left+D.width,D.top),new Ft(D.left+D.width,D.top+D.height),new Ft(D.left,D.top+D.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Vf(n.value,S),i.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ws(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];I=void 0,N=x.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return I=P.sent(),this.ctx.drawImage(I,n.bounds.left-(I.width+10),n.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(U=this.createFontStyle(i)[0],this.ctx.font=U,this.ctx.fillStyle=_s(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",D=new pA(n.bounds.left,n.bounds.top+un(n.styles.paddingTop,n.bounds.width),n.bounds.width,fE(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Vf(r.listValue,D),i.letterSpacing,fE(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return xi(this,void 0,void 0,function(){var n,s,x,i,a,x,o,A,x,c,u,x,d,p,x,g,v,x,y,S,x;return ri(this,function(I){switch(I.label){case 0:if(ws(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:I.sent(),n=0,s=r.negativeZIndex,I.label=2;case 2:return n<s.length?(x=s[n],[4,this.renderStack(x)]):[3,5];case 3:I.sent(),I.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:I.sent(),i=0,a=r.nonInlineLevel,I.label=7;case 7:return i<a.length?(x=a[i],[4,this.renderNode(x)]):[3,10];case 8:I.sent(),I.label=9;case 9:return i++,[3,7];case 10:o=0,A=r.nonPositionedFloats,I.label=11;case 11:return o<A.length?(x=A[o],[4,this.renderStack(x)]):[3,14];case 12:I.sent(),I.label=13;case 13:return o++,[3,11];case 14:c=0,u=r.nonPositionedInlineLevel,I.label=15;case 15:return c<u.length?(x=u[c],[4,this.renderStack(x)]):[3,18];case 16:I.sent(),I.label=17;case 17:return c++,[3,15];case 18:d=0,p=r.inlineLevel,I.label=19;case 19:return d<p.length?(x=p[d],[4,this.renderNode(x)]):[3,22];case 20:I.sent(),I.label=21;case 21:return d++,[3,19];case 22:g=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,I.label=23;case 23:return g<v.length?(x=v[g],[4,this.renderStack(x)]):[3,26];case 24:I.sent(),I.label=25;case 25:return g++,[3,23];case 26:y=0,S=r.positiveZIndex,I.label=27;case 27:return y<S.length?(x=S[y],[4,this.renderStack(x)]):[3,30];case 28:I.sent(),I.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=ka(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),ka(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var A=o.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return xi(this,void 0,void 0,function(){var n,s,i,a,o,A;return ri(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(u){var d,p,g,Q,Be,_e,T,Y,_,v,Q,Be,_e,T,Y,y,S,x,I,N,U,D,P,E,_,B,Q,k,L,T,Y,xe,Be,_e,se,me,Pe,Se,M,H,K,Z;return ri(this,function(ne){switch(ne.label){case 0:if(u.type!==0)return[3,5];d=void 0,p=u.url,ne.label=1;case 1:return ne.trys.push([1,3,,4]),[4,i.context.cache.match(p)];case 2:return d=ne.sent(),[3,4];case 3:return ne.sent(),i.context.logger.error("Error loading background-image "+p),[3,4];case 4:return d&&(g=tv(r,n,[d.width,d.height,d.width/d.height]),Q=g[0],Be=g[1],_e=g[2],T=g[3],Y=g[4],_=i.ctx.createPattern(i.resizeImage(d,T,Y),"repeat"),i.renderRepeat(Q,_,Be,_e)),[3,6];case 5:FG(u)?(v=tv(r,n,[null,null,null]),Q=v[0],Be=v[1],_e=v[2],T=v[3],Y=v[4],y=IG(u.angle,T,Y),S=y[0],x=y[1],I=y[2],N=y[3],U=y[4],D=document.createElement("canvas"),D.width=T,D.height=Y,P=D.getContext("2d"),E=P.createLinearGradient(x,N,I,U),dE(u.stops,S).forEach(function(de){return E.addColorStop(de.stop,_s(de.color))}),P.fillStyle=E,P.fillRect(0,0,T,Y),T>0&&Y>0&&(_=i.ctx.createPattern(D,"repeat"),i.renderRepeat(Q,_,Be,_e))):TG(u)&&(B=tv(r,n,[null,null,null]),Q=B[0],k=B[1],L=B[2],T=B[3],Y=B[4],xe=u.position.length===0?[HB]:u.position,Be=un(xe[0],T),_e=un(xe[xe.length-1],Y),se=EG(u,Be,_e,T,Y),me=se[0],Pe=se[1],me>0&&Pe>0&&(Se=i.ctx.createRadialGradient(k+Be,L+_e,0,k+Be,L+_e,me),dE(u.stops,me*2).forEach(function(de){return Se.addColorStop(de.stop,_s(de.color))}),i.path(Q),i.ctx.fillStyle=Se,me!==Pe?(M=r.bounds.left+.5*r.bounds.width,H=r.bounds.top+.5*r.bounds.height,K=Pe/me,Z=1/K,i.ctx.save(),i.ctx.translate(M,H),i.ctx.transform(1,0,0,K,0,0),i.ctx.translate(-M,-H),i.ctx.fillRect(k,Z*(L-H)+H,T,Y*Z),i.ctx.restore()):i.ctx.fill())),ne.label=6;case 6:return n--,[2]}})},i=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(A=o[a],[5,s(A)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return xi(this,void 0,void 0,function(){return ri(this,function(i){return this.path(VE(s,n)),this.ctx.fillStyle=_s(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return xi(this,void 0,void 0,function(){var a,o;return ri(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return A.sent(),[2];case 2:return a=QW(i,s),this.path(a),this.ctx.fillStyle=_s(r),this.ctx.fill(),o=jW(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return xi(this,void 0,void 0,function(){var n,s,i,a,o,A,c,u,d=this;return ri(this,function(p){switch(p.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!Ll(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=$W(Ou(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Ll(n.backgroundColor)||(this.ctx.fillStyle=_s(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){d.ctx.save();var v=pw(r.curves),y=g.inset?0:KW,S=UW(v,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(d.path(v),d.ctx.clip(),d.mask(S)):(d.mask(v),d.ctx.clip(),d.path(S)),d.ctx.shadowOffsetX=g.offsetX.number+y,d.ctx.shadowOffsetY=g.offsetY.number,d.ctx.shadowColor=_s(g.color),d.ctx.shadowBlur=g.blur.number,d.ctx.fillStyle=g.inset?_s(g.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),p.label=2;case 2:o=0,A=0,c=i,p.label=3;case 3:return A<c.length?(u=c[A],u.style!==0&&!Ll(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,3)];case 6:return p.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,r.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,r.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return xi(this,void 0,void 0,function(){var o,A,c,u,d,p,g,v,y,S,x,I,N,U,D,P,D,P;return ri(this,function(E){return this.ctx.save(),o=RW(i,s),A=VE(i,s),a===2&&(this.path(A),this.ctx.clip()),ka(A[0])?(c=A[0].start.x,u=A[0].start.y):(c=A[0].x,u=A[0].y),ka(A[1])?(d=A[1].end.x,p=A[1].end.y):(d=A[1].x,p=A[1].y),s===0||s===2?g=Math.abs(c-d):g=Math.abs(u-p),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),v=n<3?n*3:n*2,y=n<3?n*2:n,a===3&&(v=n,y=n),S=!0,g<=v*2?S=!1:g<=v*2+y?(x=g/(2*v+y),v*=x,y*=x):(I=Math.floor((g+y)/(v+y)),N=(g-I*v)/(I-1),U=(g-(I+1)*v)/I,y=U<=0||Math.abs(y-N)<Math.abs(y-U)?N:U),S&&(a===3?this.ctx.setLineDash([0,v+y]):this.ctx.setLineDash([v,y])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=_s(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(ka(A[0])&&(D=A[3],P=A[0],this.ctx.beginPath(),this.formatPath([new Ft(D.end.x,D.end.y),new Ft(P.start.x,P.start.y)]),this.ctx.stroke()),ka(A[1])&&(D=A[1],P=A[2],this.ctx.beginPath(),this.formatPath([new Ft(D.end.x,D.end.y),new Ft(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return xi(this,void 0,void 0,function(){var n;return ri(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=_s(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=LW(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(yL),GW=function(t){return t instanceof sL||t instanceof nL?!0:t instanceof GB&&t.type!==dw&&t.type!==uw},$W=function(t,e){switch(t){case 0:return pw(e);case 2:return kW(e);case 1:default:return gw(e)}},qW=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},WW=["-apple-system","system-ui"],JW=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return WW.indexOf(e)===-1}):t},XW=function(t){to(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return xi(this,void 0,void 0,function(){var n,s;return ri(this,function(i){switch(i.label){case 0:return n=hy(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,YW(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=_s(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(yL),YW=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ZW=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Y0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Y0([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Y0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Y0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),eJ=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new ZW({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new vW(this,e)}return t.instanceCount=1,t}(),qd=function(t,e){return e===void 0&&(e={}),tJ(t,e)};typeof window<"u"&&pL.setContext(window);var tJ=function(t,e){return xi(void 0,void 0,void 0,function(){var r,n,s,i,a,o,A,c,u,d,p,g,v,y,S,x,I,N,U,D,E,P,E,_,B,Q,k,L,T,Y,xe,Be,_e,se,me,Pe,Se,M,H,K;return ri(this,function(Z){switch(Z.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},i=Y2({logging:(k=e.logging)!==null&&k!==void 0?k:!0,cache:e.cache},s),a={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:n.innerHeight,scrollX:(Y=e.scrollX)!==null&&Y!==void 0?Y:n.pageXOffset,scrollY:(xe=e.scrollY)!==null&&xe!==void 0?xe:n.pageYOffset},o=new pA(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new eJ(i,o),c=(Be=e.foreignObjectRendering)!==null&&Be!==void 0?Be:!1,u={allowTaint:(_e=e.allowTaint)!==null&&_e!==void 0?_e:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),d=new ME(A,t,u),p=d.clonedReferenceElement,p?[4,d.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=Z.sent(),v=$B(p)||nW(p)?UK(p.ownerDocument):v1(A,p),y=v.width,S=v.height,x=v.left,I=v.top,N=rJ(A,p,e.backgroundColor),U={canvas:e.canvas,backgroundColor:N,scale:(me=(se=e.scale)!==null&&se!==void 0?se:n.devicePixelRatio)!==null&&me!==void 0?me:1,x:((Pe=e.x)!==null&&Pe!==void 0?Pe:0)+x,y:((Se=e.y)!==null&&Se!==void 0?Se:0)+I,width:(M=e.width)!==null&&M!==void 0?M:Math.ceil(y),height:(H=e.height)!==null&&H!==void 0?H:Math.ceil(S)},c?(A.logger.debug("Document cloned, using foreign object rendering"),E=new XW(A,U),[4,E.render(p)]):[3,3];case 2:return D=Z.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+x+","+I+" with size "+y+"x"+S+" using computed rendering"),A.logger.debug("Starting DOM parsing"),P=oL(A,p),N===P.styles.backgroundColor&&(P.styles.backgroundColor=aA.TRANSPARENT),A.logger.debug("Starting renderer for element at "+U.x+","+U.y+" with size "+U.width+"x"+U.height),E=new zW(A,U),[4,E.render(P)];case 4:D=Z.sent(),Z.label=5;case 5:return(!((K=e.removeContainer)!==null&&K!==void 0)||K)&&(ME.destroy(g)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,D]}})})},rJ=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Of(t,getComputedStyle(n.documentElement).backgroundColor):aA.TRANSPARENT,i=n.body?Of(t,getComputedStyle(n.body).backgroundColor):aA.TRANSPARENT,a=typeof r=="string"?Of(t,r):r===null?aA.TRANSPARENT:4294967295;return e===n.documentElement?Ll(s)?Ll(i)?a:i:s:a};const nJ=Object.freeze(Object.defineProperty({__proto__:null,default:qd},Symbol.toStringTag,{value:"Module"}));function Wr(t){"@babel/helpers - typeof";return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(t)}var eo=Uint8Array,na=Uint16Array,qB=Int32Array,WB=new eo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JB=new eo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zE=new eo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bL=function(t,e){for(var r=new na(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new qB(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},BL=bL(WB,2),sJ=BL.b,vy=BL.r;sJ[28]=258,vy[258]=28;var iJ=bL(JB,0),GE=iJ.r,yy=new na(32768);for(var yn=0;yn<32768;++yn){var WA=(yn&43690)>>1|(yn&21845)<<1;WA=(WA&52428)>>2|(WA&13107)<<2,WA=(WA&61680)>>4|(WA&3855)<<4,yy[yn]=((WA&65280)>>8|(WA&255)<<8)>>1}var zf=function(t,e,r){for(var n=t.length,s=0,i=new na(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new na(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new na(1<<e);var A=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],d=a[t[s]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)o[yy[d]>>A]=c}else for(o=new na(n),s=0;s<n;++s)t[s]&&(o[s]=yy[a[t[s]-1]++]>>15-t[s]);return o},ru=new eo(288);for(var yn=0;yn<144;++yn)ru[yn]=8;for(var yn=144;yn<256;++yn)ru[yn]=9;for(var yn=256;yn<280;++yn)ru[yn]=7;for(var yn=280;yn<288;++yn)ru[yn]=8;var ww=new eo(32);for(var yn=0;yn<32;++yn)ww[yn]=5;var aJ=zf(ru,9,0),oJ=zf(ww,5,0),_L=function(t){return(t+7)/8|0},AJ=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new eo(t.subarray(e,r))},Go=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},tf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},rv=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:IL,l:0};if(s==1){var a=new eo(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(D,P){return D.f-P.f}),r.push({s:-1,f:25001});var o=r[0],A=r[1],c=0,u=1,d=2;for(r[0]={s:-1,f:o.f+A.f,l:o,r:A};u!=s-1;)o=r[r[c].f<r[d].f?c++:d++],A=r[c!=u&&r[c].f<r[d].f?c++:d++],r[u++]={s:-1,f:o.f+A.f,l:o,r:A};for(var p=i[0].s,n=1;n<s;++n)i[n].s>p&&(p=i[n].s);var g=new na(p+1),v=by(r[u-1],g,0);if(v>e){var n=0,y=0,S=v-e,x=1<<S;for(i.sort(function(P,E){return g[E.s]-g[P.s]||P.f-E.f});n<s;++n){var I=i[n].s;if(g[I]>e)y+=x-(1<<v-g[I]),g[I]=e;else break}for(y>>=S;y>0;){var N=i[n].s;g[N]<e?y-=1<<e-g[N]++-1:++n}for(;n>=0&&y;--n){var U=i[n].s;g[U]==e&&(--g[U],++y)}v=e}return{t:new eo(g),l:v}},by=function(t,e,r){return t.s==-1?Math.max(by(t.l,e,r+1),by(t.r,e,r+1)):e[t.s]=r},$E=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new na(++e),n=0,s=t[0],i=1,a=function(A){r[n++]=A},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},rf=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},CL=function(t,e,r){var n=r.length,s=_L(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},qE=function(t,e,r,n,s,i,a,o,A,c,u){Go(e,u++,r),++s[256];for(var d=rv(s,15),p=d.t,g=d.l,v=rv(i,15),y=v.t,S=v.l,x=$E(p),I=x.c,N=x.n,U=$E(y),D=U.c,P=U.n,E=new na(19),_=0;_<I.length;++_)++E[I[_]&31];for(var _=0;_<D.length;++_)++E[D[_]&31];for(var B=rv(E,7),Q=B.t,k=B.l,L=19;L>4&&!Q[zE[L-1]];--L);var T=c+5<<3,Y=rf(s,ru)+rf(i,ww)+a,xe=rf(s,p)+rf(i,y)+a+14+3*L+rf(E,Q)+2*E[16]+3*E[17]+7*E[18];if(A>=0&&T<=Y&&T<=xe)return CL(e,u,t.subarray(A,A+c));var Be,_e,se,me;if(Go(e,u,1+(xe<Y)),u+=2,xe<Y){Be=zf(p,g,0),_e=p,se=zf(y,S,0),me=y;var Pe=zf(Q,k,0);Go(e,u,N-257),Go(e,u+5,P-1),Go(e,u+10,L-4),u+=14;for(var _=0;_<L;++_)Go(e,u+3*_,Q[zE[_]]);u+=3*L;for(var Se=[I,D],M=0;M<2;++M)for(var H=Se[M],_=0;_<H.length;++_){var K=H[_]&31;Go(e,u,Pe[K]),u+=Q[K],K>15&&(Go(e,u,H[_]>>5&127),u+=H[_]>>12)}}else Be=aJ,_e=ru,se=oJ,me=ww;for(var _=0;_<o;++_){var Z=n[_];if(Z>255){var K=Z>>18&31;tf(e,u,Be[K+257]),u+=_e[K+257],K>7&&(Go(e,u,Z>>23&31),u+=WB[K]);var ne=Z&31;tf(e,u,se[ne]),u+=me[ne],ne>3&&(tf(e,u,Z>>5&8191),u+=JB[ne])}else tf(e,u,Be[Z]),u+=_e[Z]}return tf(e,u,Be[256]),u+_e[256]},lJ=new qB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),IL=new eo(0),cJ=function(t,e,r,n,s,i){var a=i.z||t.length,o=new eo(n+a+5*(1+Math.ceil(a/7e3))+s),A=o.subarray(n,o.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(A[0]=i.r>>3);for(var d=lJ[e-1],p=d>>13,g=d&8191,v=(1<<r)-1,y=i.p||new na(32768),S=i.h||new na(v+1),x=Math.ceil(r/3),I=2*x,N=function(ce){return(t[ce]^t[ce+1]<<x^t[ce+2]<<I)&v},U=new qB(25e3),D=new na(288),P=new na(32),E=0,_=0,B=i.i||0,Q=0,k=i.w||0,L=0;B+2<a;++B){var T=N(B),Y=B&32767,xe=S[T];if(y[Y]=xe,S[T]=Y,k<=B){var Be=a-B;if((E>7e3||Q>24576)&&(Be>423||!c)){u=qE(t,A,0,U,D,P,_,Q,L,B-L,u),Q=E=_=0,L=B;for(var _e=0;_e<286;++_e)D[_e]=0;for(var _e=0;_e<30;++_e)P[_e]=0}var se=2,me=0,Pe=g,Se=Y-xe&32767;if(Be>2&&T==N(B-Se))for(var M=Math.min(p,Be)-1,H=Math.min(32767,B),K=Math.min(258,Be);Se<=H&&--Pe&&Y!=xe;){if(t[B+se]==t[B+se-Se]){for(var Z=0;Z<K&&t[B+Z]==t[B+Z-Se];++Z);if(Z>se){if(se=Z,me=Se,Z>M)break;for(var ne=Math.min(Se,Z-2),de=0,_e=0;_e<ne;++_e){var Ae=B-Se+_e&32767,pe=y[Ae],Ee=Ae-pe&32767;Ee>de&&(de=Ee,xe=Ae)}}}Y=xe,xe=y[Y],Se+=Y-xe&32767}if(me){U[Q++]=268435456|vy[se]<<18|GE[me];var Oe=vy[se]&31,rt=GE[me]&31;_+=WB[Oe]+JB[rt],++D[257+Oe],++P[rt],k=B+se,++E}else U[Q++]=t[B],++D[t[B]]}}for(B=Math.max(B,k);B<a;++B)U[Q++]=t[B],++D[t[B]];u=qE(t,A,c,U,D,P,_,Q,L,B-L,u),c||(i.r=u&7|A[u/8|0]<<3,u-=7,i.h=S,i.p=y,i.i=B,i.w=k)}else{for(var B=i.w||0;B<a+c;B+=65535){var ke=B+65535;ke>=a&&(A[u/8|0]=c,ke=a),u=CL(A,u+1,t.subarray(B,ke))}i.i=a}return AJ(o,0,n+_L(u)+s)},EL=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},uJ=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new eo(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return cJ(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},kL=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},dJ=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=EL();s.p(e.dictionary),kL(t,2,s.d())}};function By(t,e){e||(e={});var r=EL();r.p(t);var n=uJ(t,e,e.dictionary?6:2,4);return dJ(n,e),kL(n,n.length-4,r.d()),n}var hJ=typeof TextDecoder<"u"&&new TextDecoder,fJ=0;try{hJ.decode(IL,{stream:!0}),fJ=1}catch{}function pJ(t){if(Array.isArray(t))return t}function gJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,o=[],A=!0,c=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(A=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);A=!0);}catch(u){c=!0,s=u}finally{try{if(!A&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}function WE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function mJ(t,e){if(t){if(typeof t=="string")return WE(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?WE(t,e):void 0}}function wJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JE(t,e){return pJ(t)||gJ(t,e)||mJ(t,e)||wJ()}function XE(t,e="utf8"){return new TextDecoder(e).decode(t)}const xJ=new TextEncoder;function vJ(t){return xJ.encode(t)}const yJ=1024*8,bJ=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),nv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class XB{constructor(e=yJ,r={}){$r(this,"buffer");$r(this,"byteLength");$r(this,"byteOffset");$r(this,"length");$r(this,"offset");$r(this,"lastWrittenByte");$r(this,"littleEndian");$r(this,"_data");$r(this,"_mark");$r(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,i=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof XB)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=nv[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===bJ&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+n));o.reverse();const A=new nv[r](o.buffer);return this.offset+=n,A.reverse(),A}const a=new nv[r](i);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return XE(this.readBytes(e))}decodeText(e=1,r="utf8"){return XE(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(vJ(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ph(t){let e=t.length;for(;--e>=0;)t[e]=0}const BJ=3,_J=258,SL=29,CJ=256,IJ=CJ+1+SL,NL=30,EJ=512,kJ=new Array((IJ+2)*2);ph(kJ);const SJ=new Array(NL*2);ph(SJ);const NJ=new Array(EJ);ph(NJ);const FJ=new Array(_J-BJ+1);ph(FJ);const TJ=new Array(SL);ph(TJ);const UJ=new Array(NL);ph(UJ);const LJ=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do s=s+e[n++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var _y=LJ;const QJ=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},jJ=new Uint32Array(QJ()),RJ=(t,e,r,n)=>{const s=jJ,i=n+r;t^=-1;for(let a=n;a<i;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var fo=RJ,Cy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},FL={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const PJ=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var DJ=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)PJ(r,n)&&(t[n]=r[n])}}return t},MJ=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let a=t[n];r.set(a,s),s+=a.length}return r},TL={assign:DJ,flattenChunks:MJ};let UL=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{UL=!1}const Sp=new Uint8Array(256);for(let t=0;t<256;t++)Sp[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Sp[254]=Sp[254]=1;var OJ=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,a=t.length,o=0;for(s=0;s<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),i=0,s=0;i<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const HJ=(t,e)=>{if(e<65534&&t.subarray&&UL)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var VJ=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let a=t[n++];if(a<128){i[s++]=a;continue}let o=Sp[a];if(o>4){i[s++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return HJ(i,s)},KJ=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Sp[t[r]]>e?r:e},Iy={string2buf:OJ,buf2string:VJ,utf8border:KJ};function zJ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var GJ=zJ;const yg=16209,$J=16191;var qJ=function(e,r){let n,s,i,a,o,A,c,u,d,p,g,v,y,S,x,I,N,U,D,P,E,_,B,Q;const k=e.state;n=e.next_in,B=e.input,s=n+(e.avail_in-5),i=e.next_out,Q=e.output,a=i-(r-e.avail_out),o=i+(e.avail_out-257),A=k.dmax,c=k.wsize,u=k.whave,d=k.wnext,p=k.window,g=k.hold,v=k.bits,y=k.lencode,S=k.distcode,x=(1<<k.lenbits)-1,I=(1<<k.distbits)-1;e:do{v<15&&(g+=B[n++]<<v,v+=8,g+=B[n++]<<v,v+=8),N=y[g&x];t:for(;;){if(U=N>>>24,g>>>=U,v-=U,U=N>>>16&255,U===0)Q[i++]=N&65535;else if(U&16){D=N&65535,U&=15,U&&(v<U&&(g+=B[n++]<<v,v+=8),D+=g&(1<<U)-1,g>>>=U,v-=U),v<15&&(g+=B[n++]<<v,v+=8,g+=B[n++]<<v,v+=8),N=S[g&I];r:for(;;){if(U=N>>>24,g>>>=U,v-=U,U=N>>>16&255,U&16){if(P=N&65535,U&=15,v<U&&(g+=B[n++]<<v,v+=8,v<U&&(g+=B[n++]<<v,v+=8)),P+=g&(1<<U)-1,P>A){e.msg="invalid distance too far back",k.mode=yg;break e}if(g>>>=U,v-=U,U=i-a,P>U){if(U=P-U,U>u&&k.sane){e.msg="invalid distance too far back",k.mode=yg;break e}if(E=0,_=p,d===0){if(E+=c-U,U<D){D-=U;do Q[i++]=p[E++];while(--U);E=i-P,_=Q}}else if(d<U){if(E+=c+d-U,U-=d,U<D){D-=U;do Q[i++]=p[E++];while(--U);if(E=0,d<D){U=d,D-=U;do Q[i++]=p[E++];while(--U);E=i-P,_=Q}}}else if(E+=d-U,U<D){D-=U;do Q[i++]=p[E++];while(--U);E=i-P,_=Q}for(;D>2;)Q[i++]=_[E++],Q[i++]=_[E++],Q[i++]=_[E++],D-=3;D&&(Q[i++]=_[E++],D>1&&(Q[i++]=_[E++]))}else{E=i-P;do Q[i++]=Q[E++],Q[i++]=Q[E++],Q[i++]=Q[E++],D-=3;while(D>2);D&&(Q[i++]=Q[E++],D>1&&(Q[i++]=Q[E++]))}}else if(U&64){e.msg="invalid distance code",k.mode=yg;break e}else{N=S[(N&65535)+(g&(1<<U)-1)];continue r}break}}else if(U&64)if(U&32){k.mode=$J;break e}else{e.msg="invalid literal/length code",k.mode=yg;break e}else{N=y[(N&65535)+(g&(1<<U)-1)];continue t}break}}while(n<s&&i<o);D=v>>3,n-=D,v-=D<<3,g&=(1<<v)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<o?257+(o-i):257-(i-o),k.hold=g,k.bits=v};const Uu=15,YE=852,ZE=592,e4=0,sv=1,t4=2,WJ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),JJ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XJ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),YJ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ZJ=(t,e,r,n,s,i,a,o)=>{const A=o.bits;let c=0,u=0,d=0,p=0,g=0,v=0,y=0,S=0,x=0,I=0,N,U,D,P,E,_=null,B;const Q=new Uint16Array(Uu+1),k=new Uint16Array(Uu+1);let L=null,T,Y,xe;for(c=0;c<=Uu;c++)Q[c]=0;for(u=0;u<n;u++)Q[e[r+u]]++;for(g=A,p=Uu;p>=1&&Q[p]===0;p--);if(g>p&&(g=p),p===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<p&&Q[d]===0;d++);for(g<d&&(g=d),S=1,c=1;c<=Uu;c++)if(S<<=1,S-=Q[c],S<0)return-1;if(S>0&&(t===e4||p!==1))return-1;for(k[1]=0,c=1;c<Uu;c++)k[c+1]=k[c]+Q[c];for(u=0;u<n;u++)e[r+u]!==0&&(a[k[e[r+u]]++]=u);if(t===e4?(_=L=a,B=20):t===sv?(_=WJ,L=JJ,B=257):(_=XJ,L=YJ,B=0),I=0,u=0,c=d,E=i,v=g,y=0,D=-1,x=1<<g,P=x-1,t===sv&&x>YE||t===t4&&x>ZE)return 1;for(;;){T=c-y,a[u]+1<B?(Y=0,xe=a[u]):a[u]>=B?(Y=L[a[u]-B],xe=_[a[u]-B]):(Y=96,xe=0),N=1<<c-y,U=1<<v,d=U;do U-=N,s[E+(I>>y)+U]=T<<24|Y<<16|xe|0;while(U!==0);for(N=1<<c-1;I&N;)N>>=1;if(N!==0?(I&=N-1,I+=N):I=0,u++,--Q[c]===0){if(c===p)break;c=e[r+a[u]]}if(c>g&&(I&P)!==D){for(y===0&&(y=g),E+=d,v=c-y,S=1<<v;v+y<p&&(S-=Q[v+y],!(S<=0));)v++,S<<=1;if(x+=1<<v,t===sv&&x>YE||t===t4&&x>ZE)return 1;D=I&P,s[D]=g<<24|v<<16|E-i|0}}return I!==0&&(s[E+I]=c-y<<24|64<<16|0),o.bits=g,0};var Gf=ZJ;const eX=0,LL=1,QL=2,{Z_FINISH:r4,Z_BLOCK:tX,Z_TREES:bg,Z_OK:nu,Z_STREAM_END:rX,Z_NEED_DICT:nX,Z_STREAM_ERROR:Qa,Z_DATA_ERROR:jL,Z_MEM_ERROR:RL,Z_BUF_ERROR:sX,Z_DEFLATED:n4}=FL,N1=16180,s4=16181,i4=16182,a4=16183,o4=16184,A4=16185,l4=16186,c4=16187,u4=16188,d4=16189,xw=16190,$o=16191,iv=16192,h4=16193,av=16194,f4=16195,p4=16196,g4=16197,m4=16198,Bg=16199,_g=16200,w4=16201,x4=16202,v4=16203,y4=16204,b4=16205,ov=16206,B4=16207,_4=16208,_n=16209,PL=16210,DL=16211,iX=852,aX=592,oX=15,AX=oX,C4=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function lX(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const du=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<N1||e.mode>DL?1:0},ML=t=>{if(du(t))return Qa;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=N1,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(iX),e.distcode=e.distdyn=new Int32Array(aX),e.sane=1,e.back=-1,nu},OL=t=>{if(du(t))return Qa;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ML(t)},HL=(t,e)=>{let r;if(du(t))return Qa;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Qa:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,OL(t))},VL=(t,e)=>{if(!t)return Qa;const r=new lX;t.state=r,r.strm=t,r.window=null,r.mode=N1;const n=HL(t,e);return n!==nu&&(t.state=null),n},cX=t=>VL(t,AX);let I4=!0,Av,lv;const uX=t=>{if(I4){Av=new Int32Array(512),lv=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Gf(LL,t.lens,0,288,Av,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Gf(QL,t.lens,0,32,lv,0,t.work,{bits:5}),I4=!1}t.lencode=Av,t.lenbits=9,t.distcode=lv,t.distbits=5},KL=(t,e,r,n)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},dX=(t,e)=>{let r,n,s,i,a,o,A,c,u,d,p,g,v,y,S=0,x,I,N,U,D,P,E,_;const B=new Uint8Array(4);let Q,k;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(du(t)||!t.output||!t.input&&t.avail_in!==0)return Qa;r=t.state,r.mode===$o&&(r.mode=iv),a=t.next_out,s=t.output,A=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,d=o,p=A,_=nu;e:for(;;)switch(r.mode){case N1:if(r.wrap===0){r.mode=iv;break}for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,B[0]=c&255,B[1]=c>>>8&255,r.check=fo(r.check,B,2,0),c=0,u=0,r.mode=s4;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=_n;break}if((c&15)!==n4){t.msg="unknown compression method",r.mode=_n;break}if(c>>>=4,u-=4,E=(c&15)+8,r.wbits===0&&(r.wbits=E),E>15||E>r.wbits){t.msg="invalid window size",r.mode=_n;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?d4:$o,c=0,u=0;break;case s4:for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==n4){t.msg="unknown compression method",r.mode=_n;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=_n;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,r.check=fo(r.check,B,2,0)),c=0,u=0,r.mode=i4;case i4:for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,B[2]=c>>>16&255,B[3]=c>>>24&255,r.check=fo(r.check,B,4,0)),c=0,u=0,r.mode=a4;case a4:for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,r.check=fo(r.check,B,2,0)),c=0,u=0,r.mode=o4;case o4:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(B[0]=c&255,B[1]=c>>>8&255,r.check=fo(r.check,B,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=A4;case A4:if(r.flags&1024&&(g=r.length,g>o&&(g=o),g&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+g),E)),r.flags&512&&r.wrap&4&&(r.check=fo(r.check,n,g,i)),o-=g,i+=g,r.length-=g),r.length))break e;r.length=0,r.mode=l4;case l4:if(r.flags&2048){if(o===0)break e;g=0;do E=n[i+g++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E));while(E&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=fo(r.check,n,g,i)),o-=g,i+=g,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=c4;case c4:if(r.flags&4096){if(o===0)break e;g=0;do E=n[i+g++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E));while(E&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=fo(r.check,n,g,i)),o-=g,i+=g,E)break e}else r.head&&(r.head.comment=null);r.mode=u4;case u4:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=_n;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=$o;break;case d4:for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}t.adler=r.check=C4(c),c=0,u=0,r.mode=xw;case xw:if(r.havedict===0)return t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,nX;t.adler=r.check=1,r.mode=$o;case $o:if(e===tX||e===bg)break e;case iv:if(r.last){c>>>=u&7,u-=u&7,r.mode=ov;break}for(;u<3;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=h4;break;case 1:if(uX(r),r.mode=Bg,e===bg){c>>>=2,u-=2;break e}break;case 2:r.mode=p4;break;case 3:t.msg="invalid block type",r.mode=_n}c>>>=2,u-=2;break;case h4:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=_n;break}if(r.length=c&65535,c=0,u=0,r.mode=av,e===bg)break e;case av:r.mode=f4;case f4:if(g=r.length,g){if(g>o&&(g=o),g>A&&(g=A),g===0)break e;s.set(n.subarray(i,i+g),a),o-=g,i+=g,A-=g,a+=g,r.length-=g;break}r.mode=$o;break;case p4:for(;u<14;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=_n;break}r.have=0,r.mode=g4;case g4:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.lens[L[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Q={bits:r.lenbits},_=Gf(eX,r.lens,0,19,r.lencode,0,r.work,Q),r.lenbits=Q.bits,_){t.msg="invalid code lengths set",r.mode=_n;break}r.have=0,r.mode=m4;case m4:for(;r.have<r.nlen+r.ndist;){for(;S=r.lencode[c&(1<<r.lenbits)-1],x=S>>>24,I=S>>>16&255,N=S&65535,!(x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(N<16)c>>>=x,u-=x,r.lens[r.have++]=N;else{if(N===16){for(k=x+2;u<k;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(c>>>=x,u-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=_n;break}E=r.lens[r.have-1],g=3+(c&3),c>>>=2,u-=2}else if(N===17){for(k=x+3;u<k;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=x,u-=x,E=0,g=3+(c&7),c>>>=3,u-=3}else{for(k=x+7;u<k;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=x,u-=x,E=0,g=11+(c&127),c>>>=7,u-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=_n;break}for(;g--;)r.lens[r.have++]=E}}if(r.mode===_n)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=_n;break}if(r.lenbits=9,Q={bits:r.lenbits},_=Gf(LL,r.lens,0,r.nlen,r.lencode,0,r.work,Q),r.lenbits=Q.bits,_){t.msg="invalid literal/lengths set",r.mode=_n;break}if(r.distbits=6,r.distcode=r.distdyn,Q={bits:r.distbits},_=Gf(QL,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Q),r.distbits=Q.bits,_){t.msg="invalid distances set",r.mode=_n;break}if(r.mode=Bg,e===bg)break e;case Bg:r.mode=_g;case _g:if(o>=6&&A>=258){t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,qJ(t,p),a=t.next_out,s=t.output,A=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,r.mode===$o&&(r.back=-1);break}for(r.back=0;S=r.lencode[c&(1<<r.lenbits)-1],x=S>>>24,I=S>>>16&255,N=S&65535,!(x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(I&&!(I&240)){for(U=x,D=I,P=N;S=r.lencode[P+((c&(1<<U+D)-1)>>U)],x=S>>>24,I=S>>>16&255,N=S&65535,!(U+x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=U,u-=U,r.back+=U}if(c>>>=x,u-=x,r.back+=x,r.length=N,I===0){r.mode=b4;break}if(I&32){r.back=-1,r.mode=$o;break}if(I&64){t.msg="invalid literal/length code",r.mode=_n;break}r.extra=I&15,r.mode=w4;case w4:if(r.extra){for(k=r.extra;u<k;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=x4;case x4:for(;S=r.distcode[c&(1<<r.distbits)-1],x=S>>>24,I=S>>>16&255,N=S&65535,!(x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(!(I&240)){for(U=x,D=I,P=N;S=r.distcode[P+((c&(1<<U+D)-1)>>U)],x=S>>>24,I=S>>>16&255,N=S&65535,!(U+x<=u);){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}c>>>=U,u-=U,r.back+=U}if(c>>>=x,u-=x,r.back+=x,I&64){t.msg="invalid distance code",r.mode=_n;break}r.offset=N,r.extra=I&15,r.mode=v4;case v4:if(r.extra){for(k=r.extra;u<k;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=_n;break}r.mode=y4;case y4:if(A===0)break e;if(g=p-A,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=_n;break}g>r.wnext?(g-=r.wnext,v=r.wsize-g):v=r.wnext-g,g>r.length&&(g=r.length),y=r.window}else y=s,v=a-r.offset,g=r.length;g>A&&(g=A),A-=g,r.length-=g;do s[a++]=y[v++];while(--g);r.length===0&&(r.mode=_g);break;case b4:if(A===0)break e;s[a++]=r.length,A--,r.mode=_g;break;case ov:if(r.wrap){for(;u<32;){if(o===0)break e;o--,c|=n[i++]<<u,u+=8}if(p-=A,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?fo(r.check,s,p,a-p):_y(r.check,s,p,a-p)),p=A,r.wrap&4&&(r.flags?c:C4(c))!==r.check){t.msg="incorrect data check",r.mode=_n;break}c=0,u=0}r.mode=B4;case B4:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=_n;break}c=0,u=0}r.mode=_4;case _4:_=rX;break e;case _n:_=jL;break e;case PL:return RL;case DL:default:return Qa}return t.next_out=a,t.avail_out=A,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=u,(r.wsize||p!==t.avail_out&&r.mode<_n&&(r.mode<ov||e!==r4))&&KL(t,t.output,t.next_out,p-t.avail_out),d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?fo(r.check,s,p,t.next_out-p):_y(r.check,s,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===$o?128:0)+(r.mode===Bg||r.mode===av?256:0),(d===0&&p===0||e===r4)&&_===nu&&(_=sX),_},hX=t=>{if(du(t))return Qa;let e=t.state;return e.window&&(e.window=null),t.state=null,nu},fX=(t,e)=>{if(du(t))return Qa;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,nu):Qa},pX=(t,e)=>{const r=e.length;let n,s,i;return du(t)||(n=t.state,n.wrap!==0&&n.mode!==xw)?Qa:n.mode===xw&&(s=1,s=_y(s,e,r,0),s!==n.check)?jL:(i=KL(t,e,r,r),i?(n.mode=PL,RL):(n.havedict=1,nu))};var gX=OL,mX=HL,wX=ML,xX=cX,vX=VL,yX=dX,bX=hX,BX=fX,_X=pX,CX="pako inflate (from Nodeca project)",Jo={inflateReset:gX,inflateReset2:mX,inflateResetKeep:wX,inflateInit:xX,inflateInit2:vX,inflate:yX,inflateEnd:bX,inflateGetHeader:BX,inflateSetDictionary:_X,inflateInfo:CX};function IX(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var EX=IX;const zL=Object.prototype.toString,{Z_NO_FLUSH:kX,Z_FINISH:SX,Z_OK:Np,Z_STREAM_END:cv,Z_NEED_DICT:uv,Z_STREAM_ERROR:NX,Z_DATA_ERROR:E4,Z_MEM_ERROR:FX}=FL;function o0(t){this.options=TL.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new GJ,this.strm.avail_out=0;let r=Jo.inflateInit2(this.strm,e.windowBits);if(r!==Np)throw new Error(Cy[r]);if(this.header=new EX,Jo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Iy.string2buf(e.dictionary):zL.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Jo.inflateSetDictionary(this.strm,e.dictionary),r!==Np)))throw new Error(Cy[r])}o0.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?SX:kX,zL.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Jo.inflate(r,a),i===uv&&s&&(i=Jo.inflateSetDictionary(r,s),i===Np?i=Jo.inflate(r,a):i===E4&&(i=uv));r.avail_in>0&&i===cv&&r.state.wrap>0&&t[r.next_in]!==0;)Jo.inflateReset(r),i=Jo.inflate(r,a);switch(i){case NX:case E4:case uv:case FX:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===cv))if(this.options.to==="string"){let A=Iy.utf8border(r.output,r.next_out),c=r.next_out-A,u=Iy.buf2string(r.output,A);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(A,A+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Np&&o===0)){if(i===cv)return i=Jo.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};o0.prototype.onData=function(t){this.chunks.push(t)};o0.prototype.onEnd=function(t){t===Np&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=TL.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function TX(t,e){const r=new o0(e);if(r.push(t),r.err)throw r.msg||Cy[r.err];return r.result}var UX=o0,LX=TX,QX={Inflate:UX,inflate:LX};const{Inflate:jX,inflate:RX}=QX;var k4=jX,PX=RX;const GL=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;GL[t]=e}const S4=4294967295;function DX(t,e,r){let n=t;for(let s=0;s<r;s++)n=GL[(n^e[s])&255]^n>>>8;return n}function MX(t,e){return(DX(S4,t,e)^S4)>>>0}function N4(t,e,r){const n=t.readUint32(),s=MX(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function $L(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function qL(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function WL(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function JL(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-s]+r[i]>>1)&255}}function XL(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+OX(e[i-s],r[i],r[i-s])&255}}function OX(t,e,r){const n=t+e-r,s=Math.abs(n-t),i=Math.abs(n-e),a=Math.abs(n-r);return s<=i&&s<=a?t:i<=a?e:r}function HX(t,e,r,n,s,i){switch(t){case 0:$L(e,r,s);break;case 1:qL(e,r,s,i);break;case 2:WL(e,r,n,s);break;case 3:JL(e,r,n,s,i);break;case 4:XL(e,r,n,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const VX=new Uint16Array([255]),KX=new Uint8Array(VX.buffer),zX=KX[0]===255;function GX(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*s,A=new Uint8Array(n*r*o);let c=0;for(let u=0;u<7;u++){const d=a[u],p=Math.ceil((r-d.x)/d.xStep),g=Math.ceil((n-d.y)/d.yStep);if(p<=0||g<=0)continue;const v=p*o,y=new Uint8Array(v);for(let S=0;S<g;S++){const x=e[c++],I=e.subarray(c,c+v);c+=v;const N=new Uint8Array(v);HX(x,I,N,y,v,o),y.set(N);for(let U=0;U<p;U++){const D=d.x+U*d.xStep,P=d.y+S*d.yStep;if(!(D>=r||P>=n))for(let E=0;E<o;E++)A[(P*r+D)*o+E]=N[U*o+E]}}}if(i===16){const u=new Uint16Array(A.buffer);if(zX)for(let d=0;d<u.length;d++)u[d]=$X(u[d]);return u}else return A}function $X(t){return(t&255)<<8|t>>8&255}const qX=new Uint16Array([255]),WX=new Uint8Array(qX.buffer),JX=WX[0]===255,XX=new Uint8Array(0);function F4(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=Math.ceil(i/8)*s,o=Math.ceil(i/8*s*r),A=new Uint8Array(n*o);let c=XX,u=0,d,p;for(let g=0;g<n;g++){switch(d=e.subarray(u+1,u+1+o),p=A.subarray(g*o,(g+1)*o),e[u]){case 0:$L(d,p,o);break;case 1:qL(d,p,o,a);break;case 2:WL(d,p,c,o);break;case 3:JL(d,p,c,o,a);break;case 4:XL(d,p,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}c=p,u+=o+1}if(i===16){const g=new Uint16Array(A.buffer);if(JX)for(let v=0;v<g.length;v++)g[v]=YX(g[v]);return g}else return A}function YX(t){return(t&255)<<8|t>>8&255}const om=Uint8Array.of(137,80,78,71,13,10,26,10);function T4(t){if(!ZX(t.readBytes(om.length)))throw new Error("wrong PNG signature")}function ZX(t){if(t.length<om.length)return!1;for(let e=0;e<om.length;e++)if(t[e]!==om[e])return!1;return!0}const eY="tEXt",tY=0,YL=new TextDecoder("latin1");function rY(t){if(sY(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const nY=/^[\u0000-\u00FF]*$/;function sY(t){if(!nY.test(t))throw new Error("invalid latin1 text")}function iY(t,e,r){const n=ZL(e);t[n]=aY(e,r-n.length-1)}function ZL(t){for(t.mark();t.readByte()!==tY;);const e=t.offset;t.reset();const r=YL.decode(t.readBytes(e-t.offset-1));return t.skip(1),rY(r),r}function aY(t,e){return YL.decode(t.readBytes(e))}const Zi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},dv={UNKNOWN:-1,DEFLATE:0},U4={UNKNOWN:-1,ADAPTIVE:0},hv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Cg={NONE:0,BACKGROUND:1,PREVIOUS:2},fv={SOURCE:0,OVER:1};class oY extends XB{constructor(r,n={}){super(r);$r(this,"_checkCrc");$r(this,"_inflator");$r(this,"_png");$r(this,"_apng");$r(this,"_end");$r(this,"_hasPalette");$r(this,"_palette");$r(this,"_hasTransparency");$r(this,"_transparency");$r(this,"_compressionMethod");$r(this,"_filterMethod");$r(this,"_interlaceMethod");$r(this,"_colorType");$r(this,"_isAnimated");$r(this,"_numberOfFrames");$r(this,"_numberOfPlays");$r(this,"_frames");$r(this,"_writingDataChunks");const{checkCrc:s=!1}=n;this._checkCrc=s,this._inflator=new k4,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=dv.UNKNOWN,this._filterMethod=U4.UNKNOWN,this._interlaceMethod=hv.UNKNOWN,this._colorType=Zi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(T4(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(T4(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const s=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case eY:iY(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?N4(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const s=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?N4(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=AY(this.readUint8());const n=this.readUint8();this._colorType=n;let s;switch(n){case Zi.GREYSCALE:s=1;break;case Zi.TRUECOLOUR:s=3;break;case Zi.INDEXED_COLOUR:s=1;break;case Zi.GREYSCALE_ALPHA:s=2;break;case Zi.TRUECOLOUR_ALPHA:s=4;break;case Zi.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==dv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<n;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,s=this.offset+this.byteOffset;if(s+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Zi.GREYSCALE:case Zi.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Zi.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const s=this.readByte();this._palette[n].push(s)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Zi.UNKNOWN:case Zi.GREYSCALE_ALPHA:case Zi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=ZL(this),s=this.readUint8();if(s!==dv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:PX(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:n,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=F4({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)n.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,n),this.addFrameDataToCanvas(n,s)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,s){switch(r.disposeOp){case Cg.NONE:break;case Cg.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const o=(i*r.width+a)*this._png.channels;for(let A=0;A<this._png.channels;A++)s.data[o+A]=0}break;case Cg.PREVIOUS:s.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const s=1<<this._png.depth,i=(a,o)=>{const A=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(a*n.width+o)*this._png.channels;return{index:A,frameIndex:c}};switch(n.blendOp){case fv.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:c}=i(a,o);for(let u=0;u<this._png.channels;u++)r.data[A+u]=n.data[c+u]}break;case fv.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:c}=i(a,o);for(let u=0;u<this._png.channels;u++){const d=n.data[c+this._png.channels-1]/s,p=u%(this._png.channels-1)===0?1:n.data[c+u],g=Math.floor(d*p+(1-d)*r.data[A+u]);r.data[A+u]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==U4.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===hv.NO_INTERLACE)this._png.data=F4({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===hv.ADAM7)this._png.data=GX({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Cg.NONE,blendOp:fv.SOURCE,data:r}),this._inflator=new k4,this._writingDataChunks=!1}}function AY(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var L4;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(L4||(L4={}));function lY(t,e){return new oY(t,e).decode()}var nr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function pv(){nr.console&&typeof nr.console.log=="function"&&nr.console.log.apply(nr.console,arguments)}var on={log:pv,warn:function(t){nr.console&&(typeof nr.console.warn=="function"?nr.console.warn.apply(nr.console,arguments):pv.call(null,arguments))},error:function(t){nr.console&&(typeof nr.console.error=="function"?nr.console.error.apply(nr.console,arguments):pv(t))}};function gv(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){bc(n.response,e,r)},n.onerror=function(){on.error("could not download file")},n.send()}function Q4(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ig(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var bc=nr.saveAs||((typeof window>"u"?"undefined":Wr(window))!=="object"||window!==nr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=nr.URL||nr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?Q4(s.href)?gv(t,e,r):Ig(s,s.target="_blank"):Ig(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Ig(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(Q4(t))gv(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Ig(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Wr(i)!=="object"&&(on.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return gv(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(nr.HTMLElement)||nr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Wr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var A=nr.URL||nr.webkitURL,c=A.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){A.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function e6(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),c.length==1&&(c="0"+c),"#"+o+A+c}}var Am=nr.atob.bind(nr),j4=nr.btoa.bind(nr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function mv(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=Xs(r,n,s,i,e[0],7,-680876936),i=Xs(i,r,n,s,e[1],12,-389564586),s=Xs(s,i,r,n,e[2],17,606105819),n=Xs(n,s,i,r,e[3],22,-1044525330),r=Xs(r,n,s,i,e[4],7,-176418897),i=Xs(i,r,n,s,e[5],12,1200080426),s=Xs(s,i,r,n,e[6],17,-1473231341),n=Xs(n,s,i,r,e[7],22,-45705983),r=Xs(r,n,s,i,e[8],7,1770035416),i=Xs(i,r,n,s,e[9],12,-1958414417),s=Xs(s,i,r,n,e[10],17,-42063),n=Xs(n,s,i,r,e[11],22,-1990404162),r=Xs(r,n,s,i,e[12],7,1804603682),i=Xs(i,r,n,s,e[13],12,-40341101),s=Xs(s,i,r,n,e[14],17,-1502002290),r=Ys(r,n=Xs(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Ys(i,r,n,s,e[6],9,-1069501632),s=Ys(s,i,r,n,e[11],14,643717713),n=Ys(n,s,i,r,e[0],20,-373897302),r=Ys(r,n,s,i,e[5],5,-701558691),i=Ys(i,r,n,s,e[10],9,38016083),s=Ys(s,i,r,n,e[15],14,-660478335),n=Ys(n,s,i,r,e[4],20,-405537848),r=Ys(r,n,s,i,e[9],5,568446438),i=Ys(i,r,n,s,e[14],9,-1019803690),s=Ys(s,i,r,n,e[3],14,-187363961),n=Ys(n,s,i,r,e[8],20,1163531501),r=Ys(r,n,s,i,e[13],5,-1444681467),i=Ys(i,r,n,s,e[2],9,-51403784),s=Ys(s,i,r,n,e[7],14,1735328473),r=Zs(r,n=Ys(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Zs(i,r,n,s,e[8],11,-2022574463),s=Zs(s,i,r,n,e[11],16,1839030562),n=Zs(n,s,i,r,e[14],23,-35309556),r=Zs(r,n,s,i,e[1],4,-1530992060),i=Zs(i,r,n,s,e[4],11,1272893353),s=Zs(s,i,r,n,e[7],16,-155497632),n=Zs(n,s,i,r,e[10],23,-1094730640),r=Zs(r,n,s,i,e[13],4,681279174),i=Zs(i,r,n,s,e[0],11,-358537222),s=Zs(s,i,r,n,e[3],16,-722521979),n=Zs(n,s,i,r,e[6],23,76029189),r=Zs(r,n,s,i,e[9],4,-640364487),i=Zs(i,r,n,s,e[12],11,-421815835),s=Zs(s,i,r,n,e[15],16,530742520),r=ei(r,n=Zs(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=ei(i,r,n,s,e[7],10,1126891415),s=ei(s,i,r,n,e[14],15,-1416354905),n=ei(n,s,i,r,e[5],21,-57434055),r=ei(r,n,s,i,e[12],6,1700485571),i=ei(i,r,n,s,e[3],10,-1894986606),s=ei(s,i,r,n,e[10],15,-1051523),n=ei(n,s,i,r,e[1],21,-2054922799),r=ei(r,n,s,i,e[8],6,1873313359),i=ei(i,r,n,s,e[15],10,-30611744),s=ei(s,i,r,n,e[6],15,-1560198380),n=ei(n,s,i,r,e[13],21,1309151649),r=ei(r,n,s,i,e[4],6,-145523070),i=ei(i,r,n,s,e[11],10,-1120210379),s=ei(s,i,r,n,e[2],15,718787259),n=ei(n,s,i,r,e[9],21,-343485551),t[0]=xl(r,t[0]),t[1]=xl(n,t[1]),t[2]=xl(s,t[2]),t[3]=xl(i,t[3])}function F1(t,e,r,n,s,i){return e=xl(xl(e,t),xl(n,i)),xl(e<<s|e>>>32-s,r)}function Xs(t,e,r,n,s,i,a){return F1(e&r|~e&n,t,e,s,i,a)}function Ys(t,e,r,n,s,i,a){return F1(e&n|r&~n,t,e,s,i,a)}function Zs(t,e,r,n,s,i,a){return F1(e^r^n,t,e,s,i,a)}function ei(t,e,r,n,s,i,a){return F1(r^(e|~n),t,e,s,i,a)}function t6(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)mv(n,cY(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(mv(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,mv(n,s),n}function cY(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var R4="0123456789abcdef".split("");function uY(t){for(var e="",r=0;r<4;r++)e+=R4[t>>8*r+4&15]+R4[t>>8*r&15];return e}function dY(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ey(t){return t6(t).map(dY).join("")}var hY=function(t){for(var e=0;e<t.length;e++)t[e]=uY(t[e]);return t.join("")}(t6("hello"))!="5d41402abc4b2a76b9719d911017c592";function xl(t,e){if(hY){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ky(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),o=[],A=0;A<256;A++)o[A]=A;var c=0;for(A=0;A<256;A++){var u=o[A];c=(c+u+a.charCodeAt(A))%256,o[A]=o[c],o[c]=u}r=t,n=o}else o=n;var d=e.length,p=0,g=0,v="";for(A=0;A<d;A++)g=(g+(u=o[p=(p+1)%256]))%256,o[p]=o[g],o[g]=u,a=o[(o[p]+o[g])%256],v+=String.fromCharCode(e.charCodeAt(A)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var P4={print:4,modify:8,copy:16,"annot-forms":32};function Hu(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(P4.perm!==void 0)throw new Error("Invalid permission: "+o);s+=P4[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=Ey(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=ky(this.encryptionKey,this.padding)}function Vu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function D4(t){if(Wr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){nr.console&&on.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vw(t){if(!(this instanceof vw))return new vw(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function r6(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function kc(t,e,r,n,s){if(!(this instanceof kc))return new kc(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,r6.call(this,n,s)}function id(t,e,r,n,s){if(!(this instanceof id))return new id(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,r6.call(this,n,s)}function qt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,A=16,c="S",u=null;Wr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=D4;var v="1.3",y=g.__private__.getPdfVersion=function(){return v};g.__private__.setPdfVersion=function(w){v=w};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return S};var x=g.__private__.getPageFormat=function(w){return S[w]};s=s||"a4";var I="compat",N="advanced",U=I;function D(){this.saveGraphicsState(),R(new Qt(Ge,0,0,-Ge,0,ma()*Ge).toString()+" cm"),this.setFontSize(this.getFontSize()/Ge),c="n",U=N}function P(){this.restoreGraphicsState(),c="S",U=I}var E=g.__private__.combineFontStyleAndFontWeight=function(w,O){if(w=="bold"&&O=="normal"||w=="bold"&&O==400||w=="normal"&&O=="italic"||w=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(w=O==400||O==="normal"?w==="italic"?"italic":"normal":O!=700&&O!=="bold"||w!=="normal"?(O==700?"bold":O)+""+w:"bold"),w};g.advancedAPI=function(w){var O=U===I;return O&&D.call(this),typeof w!="function"||(w(this),O&&P.call(this)),this},g.compatAPI=function(w){var O=U===N;return O&&P.call(this),typeof w!="function"||(w(this),O&&D.call(this)),this},g.isAdvancedAPI=function(){return U===N};var _,B=function(w){if(U!==N)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=g.roundToPrecision=g.__private__.roundToPrecision=function(w,O){var ee=e||O;if(isNaN(w)||isNaN(ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ee).replace(/0+$/,"")};_=g.hpf=g.__private__.hpf=typeof A=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(w,A)}:A==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(w,16)};var k=g.f2=g.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return Q(w,2)},L=g.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return Q(w,3)},T=g.scale=g.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return U===I?w*Ge:U===N?w:void 0},Y=function(w){return T(function(O){return U===I?ma()-O:U===N?O:void 0}(w))};g.__private__.setPrecision=g.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var xe,Be="00000000000000000000000000000000",_e=g.__private__.getFileId=function(){return Be},se=g.__private__.setFileId=function(w){return Be=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():Be.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Jt=new Hu(u.userPermissions,u.userPassword,u.ownerPassword,Be)),Be};g.setFileId=function(w){return se(w),this},g.getFileId=function(){return _e()};var me=g.__private__.convertDateToPDFDate=function(w){var O=w.getTimezoneOffset(),ee=O<0?"+":"-",fe=Math.floor(Math.abs(O/60)),Ne=Math.abs(O%60),Xe=[ee,K(fe),"'",K(Ne),"'"].join("");return["D:",w.getFullYear(),K(w.getMonth()+1),K(w.getDate()),K(w.getHours()),K(w.getMinutes()),K(w.getSeconds()),Xe].join("")},Pe=g.__private__.convertPDFDateToDate=function(w){var O=parseInt(w.substr(2,4),10),ee=parseInt(w.substr(6,2),10)-1,fe=parseInt(w.substr(8,2),10),Ne=parseInt(w.substr(10,2),10),Xe=parseInt(w.substr(12,2),10),at=parseInt(w.substr(14,2),10);return new Date(O,ee,fe,Ne,Xe,at,0)},Se=g.__private__.setCreationDate=function(w){var O;if(w===void 0&&(w=new Date),w instanceof Date)O=me(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=w}return xe=O},M=g.__private__.getCreationDate=function(w){var O=xe;return w==="jsDate"&&(O=Pe(xe)),O};g.setCreationDate=function(w){return Se(w),this},g.getCreationDate=function(w){return M(w)};var H,K=g.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},Z=g.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ne=0,de=[],Ae=[],pe=0,Ee=[],Oe=[],rt=!1,ke=Ae;g.__private__.setCustomOutputDestination=function(w){rt=!0,ke=w};var ce=function(w){rt||(ke=w)};g.__private__.resetCustomOutputDestination=function(){rt=!1,ke=Ae};var R=g.__private__.out=function(w){return w=w.toString(),pe+=w.length+1,ke.push(w),ke},Ce=g.__private__.write=function(w){return R(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},Me=g.__private__.getArrayBuffer=function(w){for(var O=w.length,ee=new ArrayBuffer(O),fe=new Uint8Array(ee);O--;)fe[O]=w.charCodeAt(O);return ee},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return st};var ge=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(w){return ge=U===N?w/Ge:w,this};var be,we=g.__private__.getFontSize=g.getFontSize=function(){return U===I?ge:ge*Ge},ue=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(w){return ue=w,this},g.__private__.getR2L=g.getR2L=function(){return ue};var je,q=g.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))be=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');be=w}else be=parseInt(w,10)};g.__private__.getZoomMode=function(){return be};var le,ae=g.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');je=w};g.__private__.getPageMode=function(){return je};var he=g.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');le=w};g.__private__.getLayoutMode=function(){return le},g.__private__.setDisplayMode=g.setDisplayMode=function(w,O,ee){return q(w),he(O),ae(ee),this};var Te={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(w){if(Object.keys(Te).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Te[w]},g.__private__.getDocumentProperties=function(){return Te},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(w){for(var O in Te)Te.hasOwnProperty(O)&&w[O]&&(Te[O]=w[O]);return this},g.__private__.setDocumentProperty=function(w,O){if(Object.keys(Te).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Te[w]=O};var Re,Ge,Ke,Et,pt,ht={},ot={},Je=[],qe={},Tt={},_t={},kt={},Wt=null,Ot=0,vt=[],Ht=new D4(g),rn=t.hotfixes||[],jr={},Vr={},tr=[],Qt=function w(O,ee,fe,Ne,Xe,at){if(!(this instanceof w))return new w(O,ee,fe,Ne,Xe,at);isNaN(O)&&(O=1),isNaN(ee)&&(ee=0),isNaN(fe)&&(fe=0),isNaN(Ne)&&(Ne=1),isNaN(Xe)&&(Xe=0),isNaN(at)&&(at=0),this._matrix=[O,ee,fe,Ne,Xe,at]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(w)},Qt.prototype.multiply=function(w){var O=w.sx*this.sx+w.shy*this.shx,ee=w.sx*this.shy+w.shy*this.sy,fe=w.shx*this.sx+w.sy*this.shx,Ne=w.shx*this.shy+w.sy*this.sy,Xe=w.tx*this.sx+w.ty*this.shx+this.tx,at=w.tx*this.shy+w.ty*this.sy+this.ty;return new Qt(O,ee,fe,Ne,Xe,at)},Qt.prototype.decompose=function(){var w=this.sx,O=this.shy,ee=this.shx,fe=this.sy,Ne=this.tx,Xe=this.ty,at=Math.sqrt(w*w+O*O),jt=(w/=at)*ee+(O/=at)*fe;ee-=w*jt,fe-=O*jt;var Vt=Math.sqrt(ee*ee+fe*fe);return jt/=Vt,w*(fe/=Vt)<O*(ee/=Vt)&&(w=-w,O=-O,jt=-jt,at=-at),{scale:new Qt(at,0,0,Vt,0,0),translate:new Qt(1,0,0,1,Ne,Xe),rotate:new Qt(w,O,-O,w,0,0),skew:new Qt(1,0,jt,1,0,0)}},Qt.prototype.toString=function(w){return this.join(" ")},Qt.prototype.inversed=function(){var w=this.sx,O=this.shy,ee=this.shx,fe=this.sy,Ne=this.tx,Xe=this.ty,at=1/(w*fe-O*ee),jt=fe*at,Vt=-O*at,er=-ee*at,ar=w*at;return new Qt(jt,Vt,er,ar,-jt*Ne-er*Xe,-Vt*Ne-ar*Xe)},Qt.prototype.applyToPoint=function(w){var O=w.x*this.sx+w.y*this.shx+this.tx,ee=w.x*this.shy+w.y*this.sy+this.ty;return new pa(O,ee)},Qt.prototype.applyToRectangle=function(w){var O=this.applyToPoint(w),ee=this.applyToPoint(new pa(w.x+w.w,w.y+w.h));return new SA(O.x,O.y,ee.x-O.x,ee.y-O.y)},Qt.prototype.clone=function(){var w=this.sx,O=this.shy,ee=this.shx,fe=this.sy,Ne=this.tx,Xe=this.ty;return new Qt(w,O,ee,fe,Ne,Xe)},g.Matrix=Qt;var kr=g.matrixMult=function(w,O){return O.multiply(w)},us=new Qt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=us;var nn=function(w,O){if(!Tt[w]){var ee=(O instanceof kc?"Sh":"P")+(Object.keys(qe).length+1).toString(10);O.id=ee,Tt[w]=ee,qe[ee]=O,Ht.publish("addPattern",O)}};g.ShadingPattern=kc,g.TilingPattern=id,g.addShadingPattern=function(w,O){return B("addShadingPattern()"),nn(w,O),this},g.beginTilingPattern=function(w){B("beginTilingPattern()"),ao(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},g.endTilingPattern=function(w,O){B("endTilingPattern()"),O.stream=Oe[H].join(`
`),nn(w,O),Ht.publish("endTilingPattern",O),tr.pop().restore()};var Rr,pr=g.__private__.newObject=function(){var w=Fr();return ie(w,!0),w},Fr=g.__private__.newObjectDeferred=function(){return ne++,de[ne]=function(){return pe},ne},ie=function(w,O){return O=typeof O=="boolean"&&O,de[w]=pe,O&&R(w+" 0 obj"),w},$e=g.__private__.newAdditionalObject=function(){var w={objId:Fr(),content:""};return Ee.push(w),w},yt=Fr(),mt=Fr(),St=g.__private__.decodeColorString=function(w){var O=w.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var ee=parseFloat(O[0]);O=[ee,ee,ee,"r"]}for(var fe="#",Ne=0;Ne<3;Ne++)fe+=("0"+Math.floor(255*parseFloat(O[Ne])).toString(16)).slice(-2);return fe},nt=g.__private__.encodeColorString=function(w){var O;typeof w=="string"&&(w={ch1:w});var ee=w.ch1,fe=w.ch2,Ne=w.ch3,Xe=w.ch4,at=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ee=="string"&&ee.charAt(0)!=="#"){var jt=new e6(ee);if(jt.ok)ee=jt.toHex();else if(!/^\d*\.?\d*$/.test(ee))throw new Error('Invalid color "'+ee+'" passed to jsPDF.encodeColorString.')}if(typeof ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ee)&&(ee="#"+ee[1]+ee[1]+ee[2]+ee[2]+ee[3]+ee[3]),typeof ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ee)){var Vt=parseInt(ee.substr(1),16);ee=Vt>>16&255,fe=Vt>>8&255,Ne=255&Vt}if(fe===void 0||Xe===void 0&&ee===fe&&fe===Ne)O=typeof ee=="string"?ee+" "+at[0]:w.precision===2?k(ee/255)+" "+at[0]:L(ee/255)+" "+at[0];else if(Xe===void 0||Wr(Xe)==="object"){if(Xe&&!isNaN(Xe.a)&&Xe.a===0)return["1.","1.","1.",at[1]].join(" ");O=typeof ee=="string"?[ee,fe,Ne,at[1]].join(" "):w.precision===2?[k(ee/255),k(fe/255),k(Ne/255),at[1]].join(" "):[L(ee/255),L(fe/255),L(Ne/255),at[1]].join(" ")}else O=typeof ee=="string"?[ee,fe,Ne,Xe,at[2]].join(" "):w.precision===2?[k(ee),k(fe),k(Ne),k(Xe),at[2]].join(" "):[L(ee),L(fe),L(Ne),L(Xe),at[2]].join(" ");return O},xt=g.__private__.getFilters=function(){return a},gt=g.__private__.putStream=function(w){var O=(w=w||{}).data||"",ee=w.filters||xt(),fe=w.alreadyAppliedFilters||[],Ne=w.addLength1||!1,Xe=O.length,at=w.objectId,jt=function(Mn){return Mn};if(u!==null&&at===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(jt=Jt.encryptor(at,0));var Vt={};ee===!0&&(ee=["FlateEncode"]);var er=w.additionalKeyValues||[],ar=(Vt=qt.API.processDataByFilters!==void 0?qt.API.processDataByFilters(O,ee):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(Vt.data.length!==0&&(er.push({key:"Length",value:Vt.data.length}),Ne===!0&&er.push({key:"Length1",value:Xe})),ar.length!=0)if(ar.split("/").length-1==1)er.push({key:"Filter",value:ar});else{er.push({key:"Filter",value:"["+ar+"]"});for(var vr=0;vr<er.length;vr+=1)if(er[vr].key==="DecodeParms"){for(var Dr=[],Fn=0;Fn<Vt.reverseChain.split("/").length-1;Fn+=1)Dr.push("null");Dr.push(er[vr].value),er[vr].value="["+Dr.join(" ")+"]"}}R("<<");for(var Kr=0;Kr<er.length;Kr++)R("/"+er[Kr].key+" "+er[Kr].value);R(">>"),Vt.data.length!==0&&(R("stream"),R(jt(Vt.data)),R("endstream"))},ir=g.__private__.putPage=function(w){var O=w.number,ee=w.data,fe=w.objId,Ne=w.contentsObjId;ie(fe,!0),R("<</Type /Page"),R("/Parent "+w.rootDictionaryObjId+" 0 R"),R("/Resources "+w.resourceDictionaryObjId+" 0 R"),R("/MediaBox ["+parseFloat(_(w.mediaBox.bottomLeftX))+" "+parseFloat(_(w.mediaBox.bottomLeftY))+" "+_(w.mediaBox.topRightX)+" "+_(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&R("/CropBox ["+_(w.cropBox.bottomLeftX)+" "+_(w.cropBox.bottomLeftY)+" "+_(w.cropBox.topRightX)+" "+_(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&R("/BleedBox ["+_(w.bleedBox.bottomLeftX)+" "+_(w.bleedBox.bottomLeftY)+" "+_(w.bleedBox.topRightX)+" "+_(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&R("/TrimBox ["+_(w.trimBox.bottomLeftX)+" "+_(w.trimBox.bottomLeftY)+" "+_(w.trimBox.topRightX)+" "+_(w.trimBox.topRightY)+"]"),w.artBox!==null&&R("/ArtBox ["+_(w.artBox.bottomLeftX)+" "+_(w.artBox.bottomLeftY)+" "+_(w.artBox.topRightX)+" "+_(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&R("/UserUnit "+w.userUnit),Ht.publish("putPage",{objId:fe,pageContext:vt[O],pageNumber:O,page:ee}),R("/Contents "+Ne+" 0 R"),R(">>"),R("endobj");var Xe=ee.join(`
`);return U===N&&(Xe+=`
Q`),ie(Ne,!0),gt({data:Xe,filters:xt(),objectId:Ne}),R("endobj"),fe},Mr=g.__private__.putPages=function(){var w,O,ee=[];for(w=1;w<=Ot;w++)vt[w].objId=Fr(),vt[w].contentsObjId=Fr();for(w=1;w<=Ot;w++)ee.push(ir({number:w,data:Oe[w],objId:vt[w].objId,contentsObjId:vt[w].contentsObjId,mediaBox:vt[w].mediaBox,cropBox:vt[w].cropBox,bleedBox:vt[w].bleedBox,trimBox:vt[w].trimBox,artBox:vt[w].artBox,userUnit:vt[w].userUnit,rootDictionaryObjId:yt,resourceDictionaryObjId:mt}));ie(yt,!0),R("<</Type /Pages");var fe="/Kids [";for(O=0;O<Ot;O++)fe+=ee[O]+" 0 R ";R(fe+"]"),R("/Count "+Ot),R(">>"),R("endobj"),Ht.publish("postPutPages")},Cr=function(w){Ht.publish("putFont",{font:w,out:R,newObject:pr,putStream:gt}),w.isAlreadyPutted!==!0&&(w.objectNumber=pr(),R("<<"),R("/Type /Font"),R("/BaseFont /"+Vu(w.postScriptName)),R("/Subtype /Type1"),typeof w.encoding=="string"&&R("/Encoding /"+w.encoding),R("/FirstChar 32"),R("/LastChar 255"),R(">>"),R("endobj"))},Ts=function(w){w.objectNumber=pr();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[_(w.x),_(w.y),_(w.x+w.width),_(w.y+w.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ee=w.pages[1].join(`
`);gt({data:ee,additionalKeyValues:O,objectId:w.objectNumber}),R("endobj")},Mi=function(w,O){O||(O=21);var ee=pr(),fe=function(at,jt){var Vt,er=[],ar=1/(jt-1);for(Vt=0;Vt<1;Vt+=ar)er.push(Vt);if(er.push(1),at[0].offset!=0){var vr={offset:0,color:at[0].color};at.unshift(vr)}if(at[at.length-1].offset!=1){var Dr={offset:1,color:at[at.length-1].color};at.push(Dr)}for(var Fn="",Kr=0,Mn=0;Mn<er.length;Mn++){for(Vt=er[Mn];Vt>at[Kr+1].offset;)Kr++;var Tn=at[Kr].offset,On=(Vt-Tn)/(at[Kr+1].offset-Tn),Un=at[Kr].color,Ci=at[Kr+1].color;Fn+=Z(Math.round((1-On)*Un[0]+On*Ci[0]).toString(16))+Z(Math.round((1-On)*Un[1]+On*Ci[1]).toString(16))+Z(Math.round((1-On)*Un[2]+On*Ci[2]).toString(16))}return Fn.trim()}(w.colors,O),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+O+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gt({data:fe,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ee}),R("endobj"),w.objectNumber=pr(),R("<< /ShadingType "+w.type),R("/ColorSpace /DeviceRGB");var Xe="/Coords ["+_(parseFloat(w.coords[0]))+" "+_(parseFloat(w.coords[1]))+" ";w.type===2?Xe+=_(parseFloat(w.coords[2]))+" "+_(parseFloat(w.coords[3])):Xe+=_(parseFloat(w.coords[2]))+" "+_(parseFloat(w.coords[3]))+" "+_(parseFloat(w.coords[4]))+" "+_(parseFloat(w.coords[5])),R(Xe+="]"),w.matrix&&R("/Matrix ["+w.matrix.toString()+"]"),R("/Function "+ee+" 0 R"),R("/Extend [true true]"),R(">>"),R("endobj")},Oi=function(w,O){var ee=Fr(),fe=pr();O.push({resourcesOid:ee,objectOid:fe}),w.objectNumber=fe;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+w.boundingBox.map(_).join(" ")+"]"}),Ne.push({key:"XStep",value:_(w.xStep)}),Ne.push({key:"YStep",value:_(w.yStep)}),Ne.push({key:"Resources",value:ee+" 0 R"}),w.matrix&&Ne.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),gt({data:w.stream,additionalKeyValues:Ne,objectId:w.objectNumber}),R("endobj")},ci=function(w){for(var O in w.objectNumber=pr(),R("<<"),w)switch(O){case"opacity":R("/ca "+k(w[O]));break;case"stroke-opacity":R("/CA "+k(w[O]))}R(">>"),R("endobj")},ca=function(w){ie(w.resourcesOid,!0),R("<<"),R("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var O in R("/Font <<"),ht)ht.hasOwnProperty(O)&&(d===!1||d===!0&&p.hasOwnProperty(O))&&R("/"+O+" "+ht[O].objectNumber+" 0 R");R(">>")}(),function(){if(Object.keys(qe).length>0){for(var O in R("/Shading <<"),qe)qe.hasOwnProperty(O)&&qe[O]instanceof kc&&qe[O].objectNumber>=0&&R("/"+O+" "+qe[O].objectNumber+" 0 R");Ht.publish("putShadingPatternDict"),R(">>")}}(),function(O){if(Object.keys(qe).length>0){for(var ee in R("/Pattern <<"),qe)qe.hasOwnProperty(ee)&&qe[ee]instanceof g.TilingPattern&&qe[ee].objectNumber>=0&&qe[ee].objectNumber<O&&R("/"+ee+" "+qe[ee].objectNumber+" 0 R");Ht.publish("putTilingPatternDict"),R(">>")}}(w.objectOid),function(){if(Object.keys(_t).length>0){var O;for(O in R("/ExtGState <<"),_t)_t.hasOwnProperty(O)&&_t[O].objectNumber>=0&&R("/"+O+" "+_t[O].objectNumber+" 0 R");Ht.publish("putGStateDict"),R(">>")}}(),function(){for(var O in R("/XObject <<"),jr)jr.hasOwnProperty(O)&&jr[O].objectNumber>=0&&R("/"+O+" "+jr[O].objectNumber+" 0 R");Ht.publish("putXobjectDict"),R(">>")}(),R(">>"),R("endobj")},Qo=function(w){ot[w.fontName]=ot[w.fontName]||{},ot[w.fontName][w.fontStyle]=w.id},oe=function(w,O,ee,fe,Ne){var Xe={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:w,fontName:O,fontStyle:ee,encoding:fe,isStandardFont:Ne||!1,metadata:{}};return Ht.publish("addFont",{font:Xe,instance:this}),ht[Xe.id]=Xe,Qo(Xe),Xe.id},Ue=g.__private__.pdfEscape=g.pdfEscape=function(w,O){return function(ee,fe){var Ne,Xe,at,jt,Vt,er,ar,vr,Dr;if(at=(fe=fe||{}).sourceEncoding||"Unicode",Vt=fe.outputEncoding,(fe.autoencode||Vt)&&ht[Re].metadata&&ht[Re].metadata[at]&&ht[Re].metadata[at].encoding&&(jt=ht[Re].metadata[at].encoding,!Vt&&ht[Re].encoding&&(Vt=ht[Re].encoding),!Vt&&jt.codePages&&(Vt=jt.codePages[0]),typeof Vt=="string"&&(Vt=jt[Vt]),Vt)){for(ar=!1,er=[],Ne=0,Xe=ee.length;Ne<Xe;Ne++)(vr=Vt[ee.charCodeAt(Ne)])?er.push(String.fromCharCode(vr)):er.push(ee[Ne]),er[Ne].charCodeAt(0)>>8&&(ar=!0);ee=er.join("")}for(Ne=ee.length;ar===void 0&&Ne!==0;)ee.charCodeAt(Ne-1)>>8&&(ar=!0),Ne--;if(!ar)return ee;for(er=fe.noBOM?[]:[254,255],Ne=0,Xe=ee.length;Ne<Xe;Ne++){if((Dr=(vr=ee.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");er.push(Dr),er.push(vr-(Dr<<8))}return String.fromCharCode.apply(void 0,er)}(w,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tt=g.__private__.beginPage=function(w){Oe[++Ot]=[],vt[Ot]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},Nt(Ot),ce(Oe[H])},it=function(w,O){var ee,fe,Ne;switch(r=O||r,typeof w=="string"&&(ee=x(w.toLowerCase()),Array.isArray(ee)&&(fe=ee[0],Ne=ee[1])),Array.isArray(w)&&(fe=w[0]*Ge,Ne=w[1]*Ge),isNaN(fe)&&(fe=s[0],Ne=s[1]),(fe>14400||Ne>14400)&&(on.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),Ne=Math.min(14400,Ne)),s=[fe,Ne],r.substr(0,1)){case"l":Ne>fe&&(s=[Ne,fe]);break;case"p":fe>Ne&&(s=[Ne,fe])}tt(s),Yt(IA),R(Pa),Yr!==0&&R(Yr+" J"),lc!==0&&R(lc+" j"),Ht.publish("addPage",{pageNumber:Ot})},ut=function(w){w>0&&w<=Ot&&(Oe.splice(w,1),vt.splice(w,1),Ot--,H>Ot&&(H=Ot),this.setPage(H))},Nt=function(w){w>0&&w<=Ot&&(H=w)},bt=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Oe.length-1},or=function(w,O,ee){var fe,Ne=void 0;return ee=ee||{},w=w!==void 0?w:ht[Re].fontName,O=O!==void 0?O:ht[Re].fontStyle,fe=w.toLowerCase(),ot[fe]!==void 0&&ot[fe][O]!==void 0?Ne=ot[fe][O]:ot[w]!==void 0&&ot[w][O]!==void 0?Ne=ot[w][O]:ee.disableWarning===!1&&on.warn("Unable to look up font label for font '"+w+"', '"+O+"'. Refer to getFontList() for available fonts."),Ne||ee.noFallback||(Ne=ot.times[O])==null&&(Ne=ot.times.normal),Ne},Zt=g.__private__.putInfo=function(){var w=pr(),O=function(fe){return fe};for(var ee in u!==null&&(O=Jt.encryptor(w,0)),R("<<"),R("/Producer ("+Ue(O("jsPDF "+qt.version))+")"),Te)Te.hasOwnProperty(ee)&&Te[ee]&&R("/"+ee.substr(0,1).toUpperCase()+ee.substr(1)+" ("+Ue(O(Te[ee]))+")");R("/CreationDate ("+Ue(O(xe))+")"),R(">>"),R("endobj")},wr=g.__private__.putCatalog=function(w){var O=(w=w||{}).rootDictionaryObjId||yt;switch(pr(),R("<<"),R("/Type /Catalog"),R("/Pages "+O+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":R("/OpenAction [3 0 R /FitH null]");break;case"fullheight":R("/OpenAction [3 0 R /FitV null]");break;case"fullpage":R("/OpenAction [3 0 R /Fit]");break;case"original":R("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ee=""+be;ee.substr(ee.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&R("/OpenAction [3 0 R /XYZ null null "+k(be)+"]")}switch(le||(le="continuous"),le){case"continuous":R("/PageLayout /OneColumn");break;case"single":R("/PageLayout /SinglePage");break;case"two":case"twoleft":R("/PageLayout /TwoColumnLeft");break;case"tworight":R("/PageLayout /TwoColumnRight")}je&&R("/PageMode /"+je),Ht.publish("putCatalog"),R(">>"),R("endobj")},Pr=g.__private__.putTrailer=function(){R("trailer"),R("<<"),R("/Size "+(ne+1)),R("/Root "+ne+" 0 R"),R("/Info "+(ne-1)+" 0 R"),u!==null&&R("/Encrypt "+Jt.oid+" 0 R"),R("/ID [ <"+Be+"> <"+Be+"> ]"),R(">>")},Xt=g.__private__.putHeader=function(){R("%PDF-"+v),R("%")},Nn=g.__private__.putXRef=function(){var w="0000000000";R("xref"),R("0 "+(ne+1)),R("0000000000 65535 f ");for(var O=1;O<=ne;O++)typeof de[O]=="function"?R((w+de[O]()).slice(-10)+" 00000 n "):de[O]!==void 0?R((w+de[O]).slice(-10)+" 00000 n "):R("0000000000 00000 n ")},fn=g.__private__.buildDocument=function(){var w;ne=0,pe=0,Ae=[],de=[],Ee=[],yt=Fr(),mt=Fr(),ce(Ae),Ht.publish("buildDocument"),Xt(),Mr(),function(){Ht.publish("putAdditionalObjects");for(var ee=0;ee<Ee.length;ee++){var fe=Ee[ee];ie(fe.objId,!0),R(fe.content),R("endobj")}Ht.publish("postPutAdditionalObjects")}(),w=[],function(){for(var ee in ht)ht.hasOwnProperty(ee)&&(d===!1||d===!0&&p.hasOwnProperty(ee))&&Cr(ht[ee])}(),function(){var ee;for(ee in _t)_t.hasOwnProperty(ee)&&ci(_t[ee])}(),function(){for(var ee in jr)jr.hasOwnProperty(ee)&&Ts(jr[ee])}(),function(ee){var fe;for(fe in qe)qe.hasOwnProperty(fe)&&(qe[fe]instanceof kc?Mi(qe[fe]):qe[fe]instanceof id&&Oi(qe[fe],ee))}(w),Ht.publish("putResources"),w.forEach(ca),ca({resourcesOid:mt,objectOid:Number.MAX_SAFE_INTEGER}),Ht.publish("postPutResources"),u!==null&&(Jt.oid=pr(),R("<<"),R("/Filter /Standard"),R("/V "+Jt.v),R("/R "+Jt.r),R("/U <"+Jt.toHexString(Jt.U)+">"),R("/O <"+Jt.toHexString(Jt.O)+">"),R("/P "+Jt.P),R(">>"),R("endobj")),Zt(),wr();var O=pe;return Nn(),Pr(),R("startxref"),R(""+O),R("%%EOF"),ce(Oe[H]),Ae.join(`
`)},ds=g.__private__.getBlob=function(w){return new Blob([Me(w)],{type:"application/pdf"})},_i=g.output=g.__private__.output=(Rr=function(w,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",w){case void 0:return fn();case"save":g.save(O.filename);break;case"arraybuffer":return Me(fn());case"blob":return ds(fn());case"bloburi":case"bloburl":if(nr.URL!==void 0&&typeof nr.URL.createObjectURL=="function")return nr.URL&&nr.URL.createObjectURL(ds(fn()))||void 0;on.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ee="",fe=fn();try{ee=j4(fe)}catch{ee=j4(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+O.filename+";base64,"+ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(nr)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(Ne=O.pdfObjectUrl,Xe="");var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+Xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",jt=nr.open();return jt!==null&&jt.document.write(at),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(nr)==="[object Window]"){var Vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',er=nr.open();if(er!==null){er.document.write(Vt);var ar=this;er.document.documentElement.querySelector("#pdfViewer").onload=function(){er.document.title=O.filename,er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ar.output("bloburl"))}}return er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(nr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Dr=nr.open();if(Dr!==null&&(Dr.document.write(vr),Dr.document.title=O.filename),Dr||typeof safari>"u")return Dr;break;case"datauri":case"dataurl":return nr.document.location.href=this.output("datauristring",O);default:return null}},Rr.foo=function(){try{return Rr.apply(this,arguments)}catch(ee){var w=ee.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var O="Error in function "+w.split(`
`)[0].split("<")[0]+": "+ee.message;if(!nr.console)throw new Error(O);nr.console.error(O,ee),nr.alert&&alert(O)}},Rr.foo.bar=Rr,Rr.foo),pn=function(w){return Array.isArray(rn)===!0&&rn.indexOf(w)>-1};switch(n){case"pt":Ge=1;break;case"mm":Ge=72/25.4;break;case"cm":Ge=72/2.54;break;case"in":Ge=72;break;case"px":Ge=pn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ge=12;break;case"ex":Ge=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ge=n}var Jt=null;Se(),se();var gn=g.__private__.getPageInfo=g.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vt[w].objId,pageNumber:w,pageContext:vt[w]}},ui=g.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in vt)if(vt[O].objId===w)break;return gn(O)},di=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:vt[H].objId,pageNumber:H,pageContext:vt[H]}};g.addPage=function(){return it.apply(this,arguments),this},g.setPage=function(){return Nt.apply(this,arguments),ce.call(this,Oe[H]),this},g.insertPage=function(w){return this.addPage(),this.movePage(H,w),this},g.movePage=function(w,O){var ee,fe;if(w>O){ee=Oe[w],fe=vt[w];for(var Ne=w;Ne>O;Ne--)Oe[Ne]=Oe[Ne-1],vt[Ne]=vt[Ne-1];Oe[O]=ee,vt[O]=fe,this.setPage(O)}else if(w<O){ee=Oe[w],fe=vt[w];for(var Xe=w;Xe<O;Xe++)Oe[Xe]=Oe[Xe+1],vt[Xe]=vt[Xe+1];Oe[O]=ee,vt[O]=fe,this.setPage(O)}return this},g.deletePage=function(){return ut.apply(this,arguments),this},g.__private__.text=g.text=function(w,O,ee,fe,Ne){var Xe,at,jt,Vt,er,ar,vr,Dr,Fn,Kr=(fe=fe||{}).scope||this;if(typeof w=="number"&&typeof O=="number"&&(typeof ee=="string"||Array.isArray(ee))){var Mn=ee;ee=O,O=w,w=Mn}if(arguments[3]instanceof Qt==0?(jt=arguments[4],Vt=arguments[5],Wr(vr=arguments[3])==="object"&&vr!==null||(typeof jt=="string"&&(Vt=jt,jt=null),typeof vr=="string"&&(Vt=vr,vr=null),typeof vr=="number"&&(jt=vr,vr=null),fe={flags:vr,angle:jt,align:Vt})):(B("The transform parameter of text() with a Matrix value"),Fn=Ne),isNaN(O)||isNaN(ee)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Kr;var Tn,On="",Un=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:io,Ci=Kr.internal.scaleFactor;function wa(Or){return Or=Or.split("	").join(Array(fe.TabLen||9).join(" ")),Ue(Or,vr)}function xa(Or){for(var sn,qn=Or.concat(),hs=[],Mo=qn.length;Mo--;)typeof(sn=qn.shift())=="string"?hs.push(sn):Array.isArray(Or)&&(sn.length===1||sn[1]===void 0&&sn[2]===void 0)?hs.push(sn[0]):hs.push([sn[0],sn[1],sn[2]]);return hs}function f(Or,sn){var qn;if(typeof Or=="string")qn=sn(Or)[0];else if(Array.isArray(Or)){for(var hs,Mo,kh=Or.concat(),xu=[],l0=kh.length;l0--;)typeof(hs=kh.shift())=="string"?xu.push(sn(hs)[0]):Array.isArray(hs)&&typeof hs[0]=="string"&&(Mo=sn(hs[0],hs[1],hs[2]),xu.push([Mo[0],Mo[1],Mo[2]]));qn=xu}return qn}var C=!1,j=!0;if(typeof w=="string")C=!0;else if(Array.isArray(w)){var J=w.concat();at=[];for(var Fe,Ve=J.length;Ve--;)(typeof(Fe=J.shift())!="string"||Array.isArray(Fe)&&typeof Fe[0]!="string")&&(j=!1);C=j}if(C===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var wt=ge/Kr.internal.scaleFactor,Ir=wt*(Un-1);switch(fe.baseline){case"bottom":ee-=Ir;break;case"top":ee+=wt-Ir;break;case"hanging":ee+=wt-2*Ir;break;case"middle":ee+=wt/2-Ir}if((ar=fe.maxWidth||0)>0&&(typeof w=="string"?w=Kr.splitTextToSize(w,ar):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Or,sn){return Or.concat(Kr.splitTextToSize(sn,ar))},[]))),Xe={text:w,x:O,y:ee,options:fe,mutex:{pdfEscape:Ue,activeFontKey:Re,fonts:ht,activeFontSize:ge}},Ht.publish("preProcessText",Xe),w=Xe.text,jt=(fe=Xe.options).angle,Fn instanceof Qt==0&&jt&&typeof jt=="number"){jt*=Math.PI/180,fe.rotationDirection===0&&(jt=-jt),U===N&&(jt=-jt);var Ln=Math.cos(jt),gr=Math.sin(jt);Fn=new Qt(Ln,gr,-gr,Ln,0,0)}else jt&&jt instanceof Qt&&(Fn=jt);U!==N||Fn||(Fn=us),(er=fe.charSpace||fa)!==void 0&&(On+=_(T(er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dr=fe.horizontalScale)!==void 0&&(On+=_(100*Dr)+` Tz
`),fe.lang;var Qr=-1,ln=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,Ki=Kr.internal.getCurrentPageInfo().pageContext;switch(ln){case 0:case!1:case"fill":Qr=0;break;case 1:case!0:case"stroke":Qr=1;break;case 2:case"fillThenStroke":Qr=2;break;case 3:case"invisible":Qr=3;break;case 4:case"fillAndAddForClipping":Qr=4;break;case 5:case"strokeAndAddPathForClipping":Qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qr=6;break;case 7:case"addToPathForClipping":Qr=7}var Gs=Ki.usedRenderingMode!==void 0?Ki.usedRenderingMode:-1;Qr!==-1?On+=Qr+` Tr
`:Gs!==-1&&(On+=`0 Tr
`),Qr!==-1&&(Ki.usedRenderingMode=Qr),Vt=fe.align||"left";var Ls,Da=ge*Un,yh=Kr.internal.pageSize.getWidth(),bh=ht[Re];er=fe.charSpace||fa,ar=fe.maxWidth||0,vr=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var FA=[],dc=function(Or){return Kr.getStringUnitWidth(Or,{font:bh,charSpace:er,fontSize:ge,doKerning:!1})*ge/Ci};if(Object.prototype.toString.call(w)==="[object Array]"){var zi;at=xa(w),Vt!=="left"&&(Ls=at.map(dc));var Gi,TA=0;if(Vt==="right"){O-=Ls[0],w=[],Ve=at.length;for(var Do=0;Do<Ve;Do++)Do===0?(Gi=bs(O),zi=Ra(ee)):(Gi=T(TA-Ls[Do]),zi=-Da),w.push([at[Do],Gi,zi]),TA=Ls[Do]}else if(Vt==="center"){O-=Ls[0]/2,w=[],Ve=at.length;for(var UA=0;UA<Ve;UA++)UA===0?(Gi=bs(O),zi=Ra(ee)):(Gi=T((TA-Ls[UA])/2),zi=-Da),w.push([at[UA],Gi,zi]),TA=Ls[UA]}else if(Vt==="left"){w=[],Ve=at.length;for(var Bh=0;Bh<Ve;Bh++)w.push(at[Bh])}else if(Vt==="justify"&&bh.encoding==="Identity-H"){w=[],Ve=at.length,ar=ar!==0?ar:yh;for(var wu=0,$n=0;$n<Ve;$n++)if(zi=$n===0?Ra(ee):-Da,Gi=$n===0?bs(O):wu,$n<Ve-1){var A0=T((ar-Ls[$n])/(at[$n].split(" ").length-1)),Ao=at[$n].split(" ");w.push([Ao[0]+" ",Gi,zi]),wu=0;for(var lo=1;lo<Ao.length;lo++){var _h=(dc(Ao[lo-1]+" "+Ao[lo])-dc(Ao[lo]))*Ci+A0;lo==Ao.length-1?w.push([Ao[lo],_h,0]):w.push([Ao[lo]+" ",_h,0]),wu-=_h}}else w.push([at[$n],Gi,zi]);w.push(["",wu,0])}else{if(Vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Ve=at.length,ar=ar!==0?ar:yh,$n=0;$n<Ve;$n++){zi=$n===0?Ra(ee):-Da,Gi=$n===0?bs(O):0;var Ch=at[$n].split(" ").length-1,Ih=Ch>0?(ar-Ls[$n])/Ch:0;$n<Ve-1?FA.push(_(T(Ih))):FA.push(0),w.push([at[$n],Gi,zi])}}}(typeof fe.R2L=="boolean"?fe.R2L:ue)===!0&&(w=f(w,function(Or,sn,qn){return[Or.split("").reverse().join(""),sn,qn]})),Xe={text:w,x:O,y:ee,options:fe,mutex:{pdfEscape:Ue,activeFontKey:Re,fonts:ht,activeFontSize:ge}},Ht.publish("postProcessText",Xe),w=Xe.text,Tn=Xe.mutex.isHex||!1;var Eh=ht[Re].encoding;Eh!=="WinAnsiEncoding"&&Eh!=="StandardEncoding"||(w=f(w,function(Or,sn,qn){return[wa(Or),sn,qn]})),at=xa(w),w=[];for(var LA,QA,jA,hc=Array.isArray(at[0])?1:0,RA="",fc=function(Or,sn,qn){var hs="";return qn instanceof Qt?(qn=typeof fe.angle=="number"?kr(qn,new Qt(1,0,0,1,Or,sn)):kr(new Qt(1,0,0,1,Or,sn),qn),U===N&&(qn=kr(new Qt(1,0,0,-1,0,0),qn)),hs=qn.join(" ")+` Tm
`):hs=_(Or)+" "+_(sn)+` Td
`,hs},va=0;va<at.length;va++){switch(RA="",hc){case 1:jA=(Tn?"<":"(")+at[va][0]+(Tn?">":")"),LA=parseFloat(at[va][1]),QA=parseFloat(at[va][2]);break;case 0:jA=(Tn?"<":"(")+at[va]+(Tn?">":")"),LA=bs(O),QA=Ra(ee)}FA!==void 0&&FA[va]!==void 0&&(RA=FA[va]+` Tw
`),va===0?w.push(RA+fc(LA,QA,Fn)+jA):hc===0?w.push(RA+jA):hc===1&&w.push(RA+fc(LA,QA,Fn)+jA)}w=hc===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var co=`BT
/`;return co+=Re+" "+ge+` Tf
`,co+=_(ge*Un)+` TL
`,co+=Vi+`
`,co+=On,co+=w,R(co+="ET"),p[Re]=!0,Kr};var so=g.__private__.clip=g.clip=function(w){return R(w==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return so("evenodd")},g.__private__.discardPath=g.discardPath=function(){return R("n"),this};var fr=g.__private__.isValidStyle=function(w){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(O=!0),O};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(w){return fr(w)&&(c=w),this};var ja=g.__private__.getStyle=g.getStyle=function(w){var O=c;switch(w){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=w}return O},ua=g.close=function(){return R("h"),this};g.stroke=function(){return R("S"),this},g.fill=function(w){return hi("f",w),this},g.fillEvenOdd=function(w){return hi("f*",w),this},g.fillStroke=function(w){return hi("B",w),this},g.fillStrokeEvenOdd=function(w){return hi("B*",w),this};var hi=function(w,O){Wr(O)==="object"?Hi(O,w):R(w)},da=function(w){w===null||U===N&&w===void 0||(w=ja(w),R(w))};function jo(w,O,ee,fe,Ne){var Xe=new id(O||this.boundingBox,ee||this.xStep,fe||this.yStep,this.gState,Ne||this.matrix);Xe.stream=this.stream;var at=w+"$$"+this.cloneIndex+++"$$";return nn(at,Xe),Xe}var Hi=function(w,O){var ee=Tt[w.key],fe=qe[ee];if(fe instanceof kc)R("q"),R(gh(O)),fe.gState&&g.setGState(fe.gState),R(w.matrix.toString()+" cm"),R("/"+ee+" sh"),R("Q");else if(fe instanceof id){var Ne=new Qt(1,0,0,-1,0,ma());w.matrix&&(Ne=Ne.multiply(w.matrix||us),ee=jo.call(fe,w.key,w.boundingBox,w.xStep,w.yStep,Ne).id),R("q"),R("/Pattern cs"),R("/"+ee+" scn"),fe.gState&&g.setGState(fe.gState),R(O),R("Q")}},gh=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},oc=g.moveTo=function(w,O){return R(_(T(w))+" "+_(Y(O))+" m"),this},fu=g.lineTo=function(w,O){return R(_(T(w))+" "+_(Y(O))+" l"),this},Us=g.curveTo=function(w,O,ee,fe,Ne,Xe){return R([_(T(w)),_(Y(O)),_(T(ee)),_(Y(fe)),_(T(Ne)),_(Y(Xe)),"c"].join(" ")),this};g.__private__.line=g.line=function(w,O,ee,fe,Ne){if(isNaN(w)||isNaN(O)||isNaN(ee)||isNaN(fe)||!fr(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return U===I?this.lines([[ee-w,fe-O]],w,O,[1,1],Ne||"S"):this.lines([[ee-w,fe-O]],w,O,[1,1]).stroke()},g.__private__.lines=g.lines=function(w,O,ee,fe,Ne,Xe){var at,jt,Vt,er,ar,vr,Dr,Fn,Kr,Mn,Tn,On;if(typeof w=="number"&&(On=ee,ee=O,O=w,w=On),fe=fe||[1,1],Xe=Xe||!1,isNaN(O)||isNaN(ee)||!Array.isArray(w)||!Array.isArray(fe)||!fr(Ne)||typeof Xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(oc(O,ee),at=fe[0],jt=fe[1],er=w.length,Mn=O,Tn=ee,Vt=0;Vt<er;Vt++)(ar=w[Vt]).length===2?(Mn=ar[0]*at+Mn,Tn=ar[1]*jt+Tn,fu(Mn,Tn)):(vr=ar[0]*at+Mn,Dr=ar[1]*jt+Tn,Fn=ar[2]*at+Mn,Kr=ar[3]*jt+Tn,Mn=ar[4]*at+Mn,Tn=ar[5]*jt+Tn,Us(vr,Dr,Fn,Kr,Mn,Tn));return Xe&&ua(),da(Ne),this},g.path=function(w){for(var O=0;O<w.length;O++){var ee=w[O],fe=ee.c;switch(ee.op){case"m":oc(fe[0],fe[1]);break;case"l":fu(fe[0],fe[1]);break;case"c":Us.apply(this,fe);break;case"h":ua()}}return this},g.__private__.rect=g.rect=function(w,O,ee,fe,Ne){if(isNaN(w)||isNaN(O)||isNaN(ee)||isNaN(fe)||!fr(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return U===I&&(fe=-fe),R([_(T(w)),_(Y(O)),_(T(ee)),_(T(fe)),"re"].join(" ")),da(Ne),this},g.__private__.triangle=g.triangle=function(w,O,ee,fe,Ne,Xe,at){if(isNaN(w)||isNaN(O)||isNaN(ee)||isNaN(fe)||isNaN(Ne)||isNaN(Xe)||!fr(at))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ee-w,fe-O],[Ne-ee,Xe-fe],[w-Ne,O-Xe]],w,O,[1,1],at,!0),this},g.__private__.roundedRect=g.roundedRect=function(w,O,ee,fe,Ne,Xe,at){if(isNaN(w)||isNaN(O)||isNaN(ee)||isNaN(fe)||isNaN(Ne)||isNaN(Xe)||!fr(at))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*ee),Xe=Math.min(Xe,.5*fe),this.lines([[ee-2*Ne,0],[Ne*jt,0,Ne,Xe-Xe*jt,Ne,Xe],[0,fe-2*Xe],[0,Xe*jt,-Ne*jt,Xe,-Ne,Xe],[2*Ne-ee,0],[-Ne*jt,0,-Ne,-Xe*jt,-Ne,-Xe],[0,2*Xe-fe],[0,-Xe*jt,Ne*jt,-Xe,Ne,-Xe]],w+Ne,O,[1,1],at,!0),this},g.__private__.ellipse=g.ellipse=function(w,O,ee,fe,Ne){if(isNaN(w)||isNaN(O)||isNaN(ee)||isNaN(fe)||!fr(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Xe=4/3*(Math.SQRT2-1)*ee,at=4/3*(Math.SQRT2-1)*fe;return oc(w+ee,O),Us(w+ee,O-at,w+Xe,O-fe,w,O-fe),Us(w-Xe,O-fe,w-ee,O-at,w-ee,O),Us(w-ee,O+at,w-Xe,O+fe,w,O+fe),Us(w+Xe,O+fe,w+ee,O+at,w+ee,O),da(Ne),this},g.__private__.circle=g.circle=function(w,O,ee,fe){if(isNaN(w)||isNaN(O)||isNaN(ee)||!fr(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,O,ee,ee,fe)},g.setFont=function(w,O,ee){return ee&&(O=E(O,ee)),Re=or(w,O,{disableWarning:!1}),this};var ha=g.__private__.getFont=g.getFont=function(){return ht[or.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var w,O,ee={};for(w in ot)if(ot.hasOwnProperty(w))for(O in ee[w]=[],ot[w])ot[w].hasOwnProperty(O)&&ee[w].push(O);return ee},g.addFont=function(w,O,ee,fe,Ne){var Xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Xe.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&Xe.indexOf(arguments[3])==-1&&(ee=E(ee,fe)),oe.call(this,w,O,ee,Ne=Ne||"Identity-H")};var io,IA=t.lineWidth||.200025,pu=g.__private__.getLineWidth=g.getLineWidth=function(){return IA},Yt=g.__private__.setLineWidth=g.setLineWidth=function(w){return IA=w,R(_(T(w))+" w"),this};g.__private__.setLineDash=qt.API.setLineDash=qt.API.setLineDashPattern=function(w,O){if(w=w||[],O=O||0,isNaN(O)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ee){return _(T(ee))}).join(" "),O=_(T(O)),R("["+w+"] "+O+" d"),this};var mh=g.__private__.getLineHeight=g.getLineHeight=function(){return ge*io};g.__private__.getLineHeight=g.getLineHeight=function(){return ge*io};var wh=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(io=w),this},xh=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return io};wh(t.lineHeight);var bs=g.__private__.getHorizontalCoordinate=function(w){return T(w)},Ra=g.__private__.getVerticalCoordinate=function(w){return U===N?w:vt[H].mediaBox.topRightY-vt[H].mediaBox.bottomLeftY-T(w)},vh=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(w){return _(bs(w))},EA=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(w){return _(Ra(w))},Pa=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return St(Pa)},g.__private__.setStrokeColor=g.setDrawColor=function(w,O,ee,fe){return Pa=nt({ch1:w,ch2:O,ch3:ee,ch4:fe,pdfColorType:"draw",precision:2}),R(Pa),this};var kA=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return St(kA)},g.__private__.setFillColor=g.setFillColor=function(w,O,ee,fe){return kA=nt({ch1:w,ch2:O,ch3:ee,ch4:fe,pdfColorType:"fill",precision:2}),R(kA),this};var Vi=t.textColor||"0 g",Ro=g.__private__.getTextColor=g.getTextColor=function(){return St(Vi)};g.__private__.setTextColor=g.setTextColor=function(w,O,ee,fe){return Vi=nt({ch1:w,ch2:O,ch3:ee,ch4:fe,pdfColorType:"text",precision:3}),this};var fa=t.charSpace,Ac=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(fa||0)};g.__private__.setCharSpace=g.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fa=w,this};var Yr=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(w){var O=g.CapJoinStyles[w];if(O===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yr=O,R(O+" J"),this};var lc=0;g.__private__.setLineJoin=g.setLineJoin=function(w){var O=g.CapJoinStyles[w];if(O===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lc=O,R(O+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return R(_(T(w))+" M"),this},g.GState=vw,g.setGState=function(w){(w=typeof w=="string"?_t[kt[w]]:gu(null,w)).equals(Wt)||(R("/"+w.id+" gs"),Wt=w)};var gu=function(w,O){if(!w||!kt[w]){var ee=!1;for(var fe in _t)if(_t.hasOwnProperty(fe)&&_t[fe].equals(O)){ee=!0;break}if(ee)O=_t[fe];else{var Ne="GS"+(Object.keys(_t).length+1).toString(10);_t[Ne]=O,O.id=Ne}return w&&(kt[w]=O.id),Ht.publish("addGState",O),O}};g.addGState=function(w,O){return gu(w,O),this},g.saveGraphicsState=function(){return R("q"),Je.push({key:Re,size:ge,color:Vi}),this},g.restoreGraphicsState=function(){R("Q");var w=Je.pop();return Re=w.key,ge=w.size,Vi=w.color,Wt=null,this},g.setCurrentTransformationMatrix=function(w){return R(w.toString()+" cm"),this},g.comment=function(w){return R("#"+w),this};var pa=function(w,O){var ee=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ee},set:function(Xe){isNaN(Xe)||(ee=parseFloat(Xe))}});var fe=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Xe){isNaN(Xe)||(fe=parseFloat(Xe))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(Xe){Ne=Xe.toString()}}),this},SA=function(w,O,ee,fe){pa.call(this,w,O),this.type="rect";var Ne=ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(at){isNaN(at)||(Ne=parseFloat(at))}});var Xe=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Xe},set:function(at){isNaN(at)||(Xe=parseFloat(at))}}),this},Po=function(){this.page=Ot,this.currentPage=H,this.pages=Oe.slice(0),this.pagesContext=vt.slice(0),this.x=Ke,this.y=Et,this.matrix=pt,this.width=fi(H),this.height=mu(H),this.outputDestination=ke,this.id="",this.objectNumber=-1};Po.prototype.restore=function(){Ot=this.page,H=this.currentPage,vt=this.pagesContext,Oe=this.pages,Ke=this.x,Et=this.y,pt=this.matrix,cc(H,this.width),pi(H,this.height),ke=this.outputDestination};var ao=function(w,O,ee,fe,Ne){tr.push(new Po),Ot=H=0,Oe=[],Ke=w,Et=O,pt=Ne,tt([ee,fe])};for(var oo in g.beginFormObject=function(w,O,ee,fe,Ne){return ao(w,O,ee,fe,Ne),this},g.endFormObject=function(w){return function(O){if(Vr[O])tr.pop().restore();else{var ee=new Po,fe="Xo"+(Object.keys(jr).length+1).toString(10);ee.id=fe,Vr[O]=fe,jr[fe]=ee,Ht.publish("addFormObject",ee),tr.pop().restore()}}(w),this},g.doFormObject=function(w,O){var ee=jr[Vr[w]];return R("q"),R(O.toString()+" cm"),R("/"+ee.id+" Do"),R("Q"),this},g.getFormObject=function(w){var O=jr[Vr[w]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},g.save=function(w,O){return w=w||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(bc(ds(fn()),w),typeof bc.unload=="function"&&nr.setTimeout&&setTimeout(bc.unload,911),this):new Promise(function(ee,fe){try{var Ne=bc(ds(fn()),w);typeof bc.unload=="function"&&nr.setTimeout&&setTimeout(bc.unload,911),ee(Ne)}catch(Xe){fe(Xe.message)}})},qt.API)qt.API.hasOwnProperty(oo)&&(oo==="events"&&qt.API.events.length?function(w,O){var ee,fe,Ne;for(Ne=O.length-1;Ne!==-1;Ne--)ee=O[Ne][0],fe=O[Ne][1],w.subscribe.apply(w,[ee].concat(typeof fe=="function"?[fe]:fe))}(Ht,qt.API.events):g[oo]=qt.API[oo]);function fi(w){return vt[w].mediaBox.topRightX-vt[w].mediaBox.bottomLeftX}function cc(w,O){vt[w].mediaBox.topRightX=O+vt[w].mediaBox.bottomLeftX}function mu(w){return vt[w].mediaBox.topRightY-vt[w].mediaBox.bottomLeftY}function pi(w,O){vt[w].mediaBox.topRightY=O+vt[w].mediaBox.bottomLeftY}var ga=g.getPageWidth=function(w){return fi(w=w||H)/Ge},NA=g.setPageWidth=function(w,O){cc(w,O*Ge)},ma=g.getPageHeight=function(w){return mu(w=w||H)/Ge},uc=g.setPageHeight=function(w,O){pi(w,O*Ge)};return g.internal={pdfEscape:Ue,getStyle:ja,getFont:ha,getFontSize:we,getCharSpace:Ac,getTextColor:Ro,getLineHeight:mh,getLineHeightFactor:xh,getLineWidth:pu,write:Ce,getHorizontalCoordinate:bs,getVerticalCoordinate:Ra,getCoordinateString:vh,getVerticalCoordinateString:EA,collections:{},newObject:pr,newAdditionalObject:$e,newObjectDeferred:Fr,newObjectDeferredBegin:ie,getFilters:xt,putStream:gt,events:Ht,scaleFactor:Ge,pageSize:{getWidth:function(){return ga(H)},setWidth:function(w){NA(H,w)},getHeight:function(){return ma(H)},setHeight:function(w){uc(H,w)}},encryptionOptions:u,encryption:Jt,getEncryptor:function(w){return u!==null?Jt.encryptor(w,0):function(O){return O}},output:_i,getNumberOfPages:bt,get pages(){return Oe},out:R,f2:k,f3:L,getPageInfo:gn,getPageInfoByObjId:ui,getCurrentPageInfo:di,getPDFVersion:y,Point:pa,Rectangle:SA,Matrix:Qt,hasHotfix:pn},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return ga(H)},set:function(w){NA(H,w)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ma(H)},set:function(w){uc(H,w)},enumerable:!0,configurable:!0}),(function(w){for(var O=0,ee=st.length;O<ee;O++){var fe=oe.call(this,w[O][0],w[O][1],w[O][2],st[O][3],!0);d===!1&&(p[fe]=!0);var Ne=w[O][0].split("-");Qo({id:fe,fontName:Ne[0],fontStyle:Ne[1]||""})}Ht.publish("addFonts",{fonts:ht,dictionary:ot})}).call(g,st),Re="F1",it(s,r),Ht.publish("initialized"),g}Hu.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Hu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Hu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Hu.prototype.processOwnerPassword=function(t,e){return ky(Ey(e).substr(0,5),t)},Hu.prototype.encryptor=function(t,e){var r=Ey(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return ky(r,n)}},vw.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Wr(t)!==Wr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},qt.API={events:[]},qt.version="4.1.0";var Kn=qt.API,YB=1,hu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},yw=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var r=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(r.length===1?"0"+r:r)})},Ar=function(t){return t.toFixed(2)},JA=function(t){return t.toFixed(5)};Kn.__acroform__={};var Di=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},M4=function(t){return t*YB},go=function(t){var e=new s6,r=Dt.internal.getHeight(t)||0,n=Dt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ar(n)),Number(Ar(r))],e},fY=Kn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},pY=Kn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},gY=Kn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ts=Kn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gY(t,e-1)},rs=Kn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return fY(t,e-1)},ns=Kn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return pY(t,e-1)},mY=Kn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],A={};return A.lowerLeft_X=r(s)||0,A.lowerLeft_Y=n(i+o)||0,A.upperRight_X=r(s+a)||0,A.upperRight_Y=n(i)||0,[Number(Ar(A.lowerLeft_X)),Number(Ar(A.lowerLeft_Y)),Number(Ar(A.upperRight_X)),Number(Ar(A.upperRight_Y))]},wY=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Sy(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Ar(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=go(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},Sy=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(k){return k.split(`
`)}):s.map(function(k){return[k]});var i=r,a=Dt.internal.getHeight(t)||0;a=a<0?-a:a;var o=Dt.internal.getWidth(t)||0;o=o<0?-o:o;var A=function(k,L,T){if(k+1<s.length){var Y=L+" "+s[k+1][0];return Eg(Y,t,T).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,d=Eg("3",t,i).height,p=t.multiline?a-i:(a-d)/2,g=p+=2,v=0,y=0,S=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Eg(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var x="",I=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var U=!1;if(s[N].length!==1&&S!==s[N].length-1){if((d+2)*(I+2)+2>a)continue e;x+=s[N][S],U=!0,y=N,N--}else{x=(x+=s[N][S]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var D=parseInt(N),P=A(D,x,i),E=N>=s.length-1;if(P&&!E){x+=" ",S=0;continue}if(P||E){if(E)y=D;else if(t.multiline&&(d+2)*(I+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(I+2)+2>a)continue e;y=D}}for(var _="",B=v;B<=y;B++){var Q=s[B];if(t.multiline){if(B===y){_+=Q[S]+" ",S=(S+1)%Q.length;continue}if(B===v){_+=Q[Q.length-1]+" ";continue}}_+=Q[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,u=Eg(_,t,i).width,t.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}e+=Ar(c)+" "+Ar(g)+` Td
`,e+="("+hu(_)+`) Tj
`,e+=-Ar(c)+` 0 Td
`,g=-(i+2),u=0,v=U?y:y+1,I++,x=""}break}return n.text=e,n.fontSize=i,n},Eg=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},xY={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vY=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},yY=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ro.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(xY)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");YB=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new i6,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&vY(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],A=[],c=o.Rect;if(o.Rect&&(o.Rect=mY(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Dt.createDefaultAppearanceStream(o),Wr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=wY(o);A.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var d="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var g=o.appearanceStreamContent[p];if(d+="/"+p+" ",d+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var v=g[a];typeof v=="function"&&(v=v.call(s,o)),d+="/"+a+" "+v+" ",s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v)}}else typeof(v=g)=="function"&&(v=v.call(s,o)),d+="/"+a+" "+v,s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v);d+=">>"}A.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:A,objectId:o.objId}),s.internal.out("endobj")}i&&function(y,S){for(var x in y)if(y.hasOwnProperty(x)){var I=x,N=y[x];S.internal.newObjectDeferredBegin(N.objId,!0),Wr(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete y[I]}}(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},n6=Kn.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Wr(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)==="/"?s+="/"+yw(t[i].substr(1)):(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+hu(n(t[i].toString()))+")")}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wv=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+hu(n(t))+")"},_o=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};_o.prototype.toString=function(){return this.objId+" 0 R"},_o.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},_o.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:n6(s,this.objId,this.scope)}):s instanceof _o?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var s6=function(){_o.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Di(s6,_o);var i6=function(){_o.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+hu(r(t))+")"}},set:function(r){t=r}})};Di(i6,_o);var ro=function t(){_o.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ts(e,3)},set:function(x){x?this.F=rs(e,3):this.F=ns(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof bw)return;i="FieldObject"+t.FieldNum++}var x=function(I){return I};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+hu(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(x){A=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/YB:c},set:function(x){c=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof bw||this instanceof Dc))return wv(d,this.objId,this.scope)},set:function(x){x=x.toString(),d=x}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ks==0?wv(p,this.objId,this.scope):p},set:function(x){x=x.toString(),p=this instanceof ks==0?x.substr(0,1)==="("?Lu(x.substr(1,x.length-2)):Lu(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ks==1?Lu(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof ks==1?"/"+yw(x):x}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ks==0?wv(g,this.objId,this.scope):g},set:function(x){x=x.toString(),g=this instanceof ks==0?x.substr(0,1)==="("?Lu(x.substr(1,x.length-2)):Lu(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ks==1?Lu(g.substr(1,g.length-1)):g},set:function(x){x=x.toString(),g=this instanceof ks==1?"/"+yw(x):x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(x){x=!!x,y=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,1)},set:function(x){x?this.Ff=rs(this.Ff,1):this.Ff=ns(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,2)},set:function(x){x?this.Ff=rs(this.Ff,2):this.Ff=ns(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,3)},set:function(x){x?this.Ff=rs(this.Ff,3):this.Ff=ns(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');S=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(S){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};Di(ro,_o);var wd=function(){ro.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return n6(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var A,c=[];A=a.exec(i);)c.push(A[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,18)},set:function(r){r?this.Ff=rs(this.Ff,18):this.Ff=ns(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=rs(this.Ff,19):this.Ff=ns(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,20)},set:function(r){r?(this.Ff=rs(this.Ff,20),e.sort()):this.Ff=ns(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,22)},set:function(r){r?this.Ff=rs(this.Ff,22):this.Ff=ns(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,23)},set:function(r){r?this.Ff=rs(this.Ff,23):this.Ff=ns(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,27)},set:function(r){r?this.Ff=rs(this.Ff,27):this.Ff=ns(this.Ff,27)}}),this.hasAppearanceStream=!1};Di(wd,ro);var xd=function(){wd.call(this),this.fontName="helvetica",this.combo=!1};Di(xd,wd);var vd=function(){xd.call(this),this.combo=!0};Di(vd,xd);var lm=function(){vd.call(this),this.edit=!0};Di(lm,vd);var ks=function(){ro.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,15)},set:function(r){r?this.Ff=rs(this.Ff,15):this.Ff=ns(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,16)},set:function(r){r?this.Ff=rs(this.Ff,16):this.Ff=ns(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,17)},set:function(r){r?this.Ff=rs(this.Ff,17):this.Ff=ns(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,26)},set:function(r){r?this.Ff=rs(this.Ff,26):this.Ff=ns(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+hu(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Wr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+yw(r)}})};Di(ks,ro);var cm=function(){ks.call(this),this.pushButton=!0};Di(cm,ks);var yd=function(){ks.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Di(yd,ks);var bw=function(){var t,e;ro.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+hu(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Wr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Di(bw,ro),yd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},yd.prototype.createOption=function(t){var e=new bw;return e.Parent=this,e.optionName=t,this.Kids.push(e),bY.call(this.scope,e),e};var um=function(){ks.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dt.CheckBox.createAppearanceStream()};Di(um,ks);var Dc=function(){ro.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,13)},set:function(e){e?this.Ff=rs(this.Ff,13):this.Ff=ns(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,21)},set:function(e){e?this.Ff=rs(this.Ff,21):this.Ff=ns(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,23)},set:function(e){e?this.Ff=rs(this.Ff,23):this.Ff=ns(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,24)},set:function(e){e?this.Ff=rs(this.Ff,24):this.Ff=ns(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,25)},set:function(e){e?this.Ff=rs(this.Ff,25):this.Ff=ns(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,26)},set:function(e){e?this.Ff=rs(this.Ff,26):this.Ff=ns(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Di(Dc,ro);var dm=function(){Dc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,14)},set:function(t){t?this.Ff=rs(this.Ff,14):this.Ff=ns(this.Ff,14)}}),this.password=!0};Di(dm,Dc);var Dt={CheckBox:{createAppearanceStream:function(){return{N:{On:Dt.CheckBox.YesNormal},D:{On:Dt.CheckBox.YesPushDown,Off:Dt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=go(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=Sy(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Ar(Dt.internal.getWidth(t))+" "+Ar(Dt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ar(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=go(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=Dt.internal.getHeight(t),a=Dt.internal.getWidth(t),o=Sy(t,t.caption);return s.push("1 g"),s.push("0 0 "+Ar(a)+" "+Ar(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Ar(a-1)+" "+Ar(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Ar(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=go(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ar(Dt.internal.getWidth(t))+" "+Ar(Dt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Dt.RadioButton.Circle.YesNormal,e.D[t]=Dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=go(t);e.scope=t.scope;var r=[],n=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Dt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+JA(Dt.internal.getWidth(t)/2)+" "+JA(Dt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=go(t);e.scope=t.scope;var r=[],n=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Dt.internal.Bezier_C).toFixed(5)),a=Number((n*Dt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+JA(Dt.internal.getWidth(t)/2)+" "+JA(Dt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+JA(Dt.internal.getWidth(t)/2)+" "+JA(Dt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=go(t);e.scope=t.scope;var r=[],n=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Dt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+JA(Dt.internal.getWidth(t)/2)+" "+JA(Dt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Dt.RadioButton.Cross.YesNormal,e.D[t]=Dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=go(t);e.scope=t.scope;var r=[],n=Dt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Ar(Dt.internal.getWidth(t)-2)+" "+Ar(Dt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ar(n.x1.x)+" "+Ar(n.x1.y)+" m"),r.push(Ar(n.x2.x)+" "+Ar(n.x2.y)+" l"),r.push(Ar(n.x4.x)+" "+Ar(n.x4.y)+" m"),r.push(Ar(n.x3.x)+" "+Ar(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=go(t);e.scope=t.scope;var r=Dt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ar(Dt.internal.getWidth(t))+" "+Ar(Dt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ar(Dt.internal.getWidth(t)-2)+" "+Ar(Dt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ar(r.x1.x)+" "+Ar(r.x1.y)+" m"),n.push(Ar(r.x2.x)+" "+Ar(r.x2.y)+" l"),n.push(Ar(r.x4.x)+" "+Ar(r.x4.y)+" m"),n.push(Ar(r.x3.x)+" "+Ar(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=go(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ar(Dt.internal.getWidth(t))+" "+Ar(Dt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Dt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Dt.internal.getWidth(t),r=Dt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Dt.internal.getWidth=function(t){var e=0;return Wr(t)==="object"&&(e=M4(t.Rect[2])),e},Dt.internal.getHeight=function(t){var e=0;return Wr(t)==="object"&&(e=M4(t.Rect[3])),e};var bY=Kn.addField=function(t){if(yY(this,t),!(t instanceof ro))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Kn.AcroFormChoiceField=wd,Kn.AcroFormListBox=xd,Kn.AcroFormComboBox=vd,Kn.AcroFormEditBox=lm,Kn.AcroFormButton=ks,Kn.AcroFormPushButton=cm,Kn.AcroFormRadioButton=yd,Kn.AcroFormCheckBox=um,Kn.AcroFormTextField=Dc,Kn.AcroFormPasswordField=dm,Kn.AcroFormAppearance=Dt,Kn.AcroForm={ChoiceField:wd,ListBox:xd,ComboBox:vd,EditBox:lm,Button:ks,PushButton:cm,RadioButton:yd,CheckBox:um,TextField:Dc,PasswordField:dm,Appearance:Dt},qt.AcroForm={ChoiceField:wd,ListBox:xd,ComboBox:vd,EditBox:lm,Button:ks,PushButton:cm,RadioButton:yd,CheckBox:um,TextField:Dc,PasswordField:dm,Appearance:Dt};qt.AcroForm;function a6(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(k,L){var T,Y,xe,Be,_e,se=r;if((L=L||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(P(k))for(_e in n)for(xe=n[_e],T=0;T<xe.length;T+=1){for(Be=!0,Y=0;Y<xe[T].length;Y+=1)if(xe[T][Y]!==void 0&&xe[T][Y]!==k[Y]){Be=!1;break}if(Be===!0){se=_e;break}}else for(_e in n)for(xe=n[_e],T=0;T<xe.length;T+=1){for(Be=!0,Y=0;Y<xe[T].length;Y+=1)if(xe[T][Y]!==void 0&&xe[T][Y]!==k.charCodeAt(Y)){Be=!1;break}if(Be===!0){se=_e;break}}return se===r&&L!==r&&(se=L),se},i=function k(L){for(var T=this.internal.write,Y=this.internal.putStream,xe=(0,this.internal.getFilters)();xe.indexOf("FlateEncode")!==-1;)xe.splice(xe.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Be=[];if(Be.push({key:"Type",value:"/XObject"}),Be.push({key:"Subtype",value:"/Image"}),Be.push({key:"Width",value:L.width}),Be.push({key:"Height",value:L.height}),L.colorSpace===x.INDEXED?Be.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Be.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===x.DEVICE_CMYK&&Be.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Be.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Be.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var _e="",se=0,me=L.transparency.length;se<me;se++)_e+=L.transparency[se]+" "+L.transparency[se]+" ";Be.push({key:"Mask",value:"["+_e+"]"})}L.sMask!==void 0&&Be.push({key:"SMask",value:L.objectId+1+" 0 R"});var Pe=L.filter!==void 0?["/"+L.filter]:void 0;if(Y({data:L.data,additionalKeyValues:Be,alreadyAppliedFilters:Pe,objectId:L.objectId}),T("endobj"),"sMask"in L&&L.sMask!==void 0){var Se,M=(Se=L.sMaskBitsPerComponent)!==null&&Se!==void 0?Se:L.bitsPerComponent,H={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:L.sMask};"filter"in L&&(H.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(L.width),H.filter=L.filter),k.call(this,H)}if(L.colorSpace===x.INDEXED){var K=this.internal.newObject();Y({data:_(new Uint8Array(L.palette)),objectId:K}),T("endobj")}},a=function(){var k=this.internal.collections[e+"images"];for(var L in k)i.call(this,k[L])},o=function(){var k,L=this.internal.collections[e+"images"],T=this.internal.write;for(var Y in L)T("/I"+(k=L[Y]).index,k.objectId,"0","R")},A=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var k=this.internal.collections[e+"images"];return A.call(this),k},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(k){return typeof t["process"+k.toUpperCase()]=="function"},p=function(k){return Wr(k)==="object"&&k.nodeType===1},g=function(k,L){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var T=""+k.getAttribute("src");if(T.indexOf("data:image/")===0)return Am(unescape(T).split("base64,").pop());var Y=t.loadFile(T,!0);if(Y!==void 0)return Y}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var xe;switch(L){case"PNG":xe="image/png";break;case"WEBP":xe="image/webp";break;default:xe="image/jpeg"}return Am(k.toDataURL(xe,1).split("base64,").pop())}},v=function(k){var L=this.internal.collections[e+"images"];if(L){for(var T in L)if(k===L[T].alias)return L[T]}},y=function(k,L,T){return k||L||(k=-96,L=-96),k<0&&(k=-1*T.width*72/k/this.internal.scaleFactor),L<0&&(L=-1*T.height*72/L/this.internal.scaleFactor),k===0&&(k=L*T.width/T.height),L===0&&(L=k*T.height/T.width),[k,L]},S=function(k,L,T,Y,xe,Be){var _e=y.call(this,T,Y,xe),se=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,Pe=c.call(this);if(T=_e[0],Y=_e[1],Pe[xe.index]=xe,Be){Be*=Math.PI/180;var Se=Math.cos(Be),M=Math.sin(Be),H=function(Z){return Z.toFixed(4)},K=[H(Se),H(M),H(-1*M),H(Se),0,0,"cm"]}this.internal.write("q"),Be?(this.internal.write([1,"0","0",1,se(k),me(L+Y),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([se(T),"0","0",se(Y),"0","0","cm"].join(" "))):this.internal.write([se(T),"0","0",se(Y),se(k),me(L+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+xe.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(k){var L,T,Y=0;if(typeof k=="string")for(T=k.length,L=0;L<T;L++)Y=(Y<<5)-Y+k.charCodeAt(L),Y|=0;else if(P(k))for(T=k.byteLength/2,L=0;L<T;L++)Y=(Y<<5)-Y+k[L],Y|=0;return Y},U=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var L=!0;return k.length===0&&(L=!1),k.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(L=!1),L},D=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var L=k.indexOf(",");return L<0?null:k.substring(0,L).trim().endsWith("base64")?k.substring(L+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},E=t.__addimage__.binaryStringToUint8Array=function(k){for(var L=k.length,T=new Uint8Array(L),Y=0;Y<L;Y++)T[Y]=k.charCodeAt(Y);return T},_=t.__addimage__.arrayBufferToBinaryString=function(k){for(var L="",T=P(k)?k:new Uint8Array(k),Y=0;Y<T.length;Y+=8192)L+=String.fromCharCode.apply(null,T.subarray(Y,Y+8192));return L};t.addImage=function(){var k,L,T,Y,xe,Be,_e,se,me;if(typeof arguments[1]=="number"?(L=r,T=arguments[1],Y=arguments[2],xe=arguments[3],Be=arguments[4],_e=arguments[5],se=arguments[6],me=arguments[7]):(L=arguments[1],T=arguments[2],Y=arguments[3],xe=arguments[4],Be=arguments[5],_e=arguments[6],se=arguments[7],me=arguments[8]),Wr(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var Pe=k;k=Pe.imageData,L=Pe.format||L||r,T=Pe.x||T||0,Y=Pe.y||Y||0,xe=Pe.w||Pe.width||xe,Be=Pe.h||Pe.height||Be,_e=Pe.alias||_e,se=Pe.compression||se,me=Pe.rotation||Pe.angle||me}var Se=this.internal.getFilters();if(se===void 0&&Se.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(T)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var M=B.call(this,k,L,_e,se);return S.call(this,T,Y,xe,Be,M,me),this};var B=function(k,L,T,Y){var xe,Be,_e;if(typeof k=="string"&&s(k)===r){k=unescape(k);var se=Q(k,!1);(se!==""||(se=t.loadFile(k,!0))!==void 0)&&(k=se)}if(p(k)&&(k=g(k,L)),L=s(k,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((_e=T)==null||_e.length===0)&&(T=function(me){return typeof me=="string"||P(me)?N(me):P(me.data)?N(me.data):null}(k)),(xe=v.call(this,T))||(k instanceof Uint8Array||L==="RGBA"||(Be=k,k=E(k)),xe=this["process"+L.toUpperCase()](k,u.call(this),T,function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in t.image_compression?me:I.NONE}(Y),Be)),!xe)throw new Error("An unknown error occurred whilst processing the image.");return xe},Q=t.__addimage__.convertBase64ToBinaryString=function(k,L){L=typeof L!="boolean"||L;var T,Y="";if(typeof k=="string"){var xe;T=(xe=D(k))!==null&&xe!==void 0?xe:k;try{Y=Am(T)}catch(Be){if(L)throw U(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Be.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(k){var L,T,Y="";if(p(k)&&(k=g(k)),typeof k=="string"&&s(k)===r&&((Y=Q(k,!1))===""&&(Y=t.loadFile(k)||""),k=Y),T=s(k),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(k instanceof Uint8Array||(k=E(k)),!(L=this["process"+T.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=T,L}})(qt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};qt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((n=c[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var g=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(y.objId),I=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(x(n.contents))+")",i+=" /Popup "+S.objId+" 0 R",i+=" /P "+A.objId+" 0 R",i+=" /T ("+g(x(I))+") >>",y.content=i;var N=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",S.content=i,this.internal.write(y.objId,"0 R",S.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var U=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var D=this.annotations._nameMap[n.options.name];n.options.pageNumber=D.page,n.options.top=D.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var P=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+P+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(r),y:c(n),w:A(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,A=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;a=Math.ceil(c*u)}else o=A,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=A/2),i.align==="right"&&(n-=A),this.link(n,s-c,o,a,i),A},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(qt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(y){var S=0,x=r,I="",N=0;for(S=0;S<y.length;S+=1)x[y.charCodeAt(S)]!==void 0?(N++,typeof(x=x[y.charCodeAt(S)])=="number"&&(I+=String.fromCharCode(x),x=r,N=0),S===y.length-1&&(x=r,I+=y.charAt(S-(N-1)),S-=N-1,N=0)):(x=r,I+=y.charAt(S-N),S-=N,N=0);return I};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,S,x){return a(y)?i(y)===!1?-1:!c(y)||!a(S)&&!a(x)||!a(x)&&o(S)||o(y)&&!a(S)||o(y)&&A(S)||o(y)&&o(S)?0:u(y)&&a(S)&&!o(S)&&a(x)&&c(x)?3:o(y)||!a(x)?1:2:-1},g=function(y){var S=0,x=0,I=0,N="",U="",D="",P=(y=y||"").split("\\s+"),E=[];for(S=0;S<P.length;S+=1){for(E.push(""),x=0;x<P[S].length;x+=1)N=P[S][x],U=P[S][x-1],D=P[S][x+1],a(N)?(I=p(N,U,D),E[S]+=I!==-1?String.fromCharCode(e[N.charCodeAt(0)][I]):N):E[S]+=N;E[S]=d(E[S])}return E.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var y,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(S)){var I=0;for(x=[],I=0;I<S.length;I+=1)Array.isArray(S[I])?x.push([g(S[I][0]),S[I][1],S[I][2]]):x.push([g(S[I])]);y=x}else y=g(S);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",v])}(qt.API),qt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(qt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(y){A=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,g=0,v=0,y=0,S=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var x=c.maxWidth;x>0?typeof A=="string"?A=this.splitTextToSize(A,x):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(N,U){return N.concat(S.splitTextToSize(U,x))},[])):A=Array.isArray(A)?A:[A];for(var I=0;I<A.length;I++)g<(y=this.getStringUnitWidth(A[I],{font:d})*u)&&(g=y);return g!==0&&(v=A.length),{w:g/=p,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var A;A=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===A.lineNumber?(A.x=(c.x||0)+(c.width||0),A.y=c.y||0):c.y+c.height+A.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=d.top,g&&p&&(this.printHeaderRow(A.lineNumber,!0),A.y+=p[0].height)):A.y=c.y+c.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,r===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-u,A.y+u,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+u,{align:"center",baseline:"top",maxWidth:A.width-u-u}):this.text(A.text,A.x+u,A.y+u,{align:"left",baseline:"top",maxWidth:A.width-u-u})),this.internal.__cell__.lastCell=A,this};t.table=function(A,c,u,d,p){if(n.call(this),!u)throw new Error("No data for PDF table.");var g,v,y,S,x=[],I=[],N=[],U={},D={},P=[],E=[],_=(p=p||{}).autoSize||!1,B=p.printHeaders!==!1,Q=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},e),L=typeof p.padding=="number"?p.padding:3,T=p.headerBackgroundColor||"#c8c8c8",Y=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=Y,this.setFontSize(Q),d==null)I=x=Object.keys(u[0]),N=x.map(function(){return"left"});else if(Array.isArray(d)&&Wr(d[0])==="object")for(x=d.map(function(Pe){return Pe.name}),I=d.map(function(Pe){return Pe.prompt||Pe.name||""}),N=d.map(function(Pe){return Pe.align||"left"}),g=0;g<d.length;g+=1)D[d[g].name]=.7499990551181103*d[g].width;else Array.isArray(d)&&typeof d[0]=="string"&&(I=x=d,N=x.map(function(){return"left"}));if(_||Array.isArray(d)&&typeof d[0]=="string")for(g=0;g<x.length;g+=1){for(U[S=x[g]]=u.map(function(Pe){return Pe[S]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(I[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=U[S],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)P.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[S]=Math.max.apply(null,P)+L+L,P=[]}if(B){var xe={};for(g=0;g<x.length;g+=1)xe[x[g]]={},xe[x[g]].text=I[g],xe[x[g]].align=N[g];var Be=o.call(this,xe,D);E=x.map(function(Pe){return new i(A,c,D[Pe],Be,xe[Pe].text,void 0,xe[Pe].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var _e=d.reduce(function(Pe,Se){return Pe[Se.name]=Se.align,Pe},{});for(g=0;g<u.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:u[g]},this);var se=o.call(this,u[g],D);for(y=0;y<x.length;y+=1){var me=u[g][x[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:y,data:me},this),a.call(this,new i(A,c,D[x[y]],se,me,g+2,_e[x[y]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=c,this};var o=function(A,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(A).map(function(g){var v=A[g];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*d/p+u+u},this).reduce(function(g,v){return Math.max(g,v)},0)};t.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=A;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(qt.API);var o6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},A6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ny=a6(A6),l6=[100,200,300,400,500,600,700,800,900],BY=a6(l6);function xv(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return o6[i=i||"normal"]?i:"normal"}(t.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),s=function(i){return typeof Ny[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function O4(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var _Y={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},H4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function V4(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function K4(t){return t.trimLeft()}function CY(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function IY(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Qu,kg,z4,G4,$4,vv=["times"];function q4(t,e,r,n,s){var i=4,a=J4;switch(s){case qt.API.image_compression.FAST:i=1,a=W4;break;case qt.API.image_compression.MEDIUM:i=6,a=X4;break;case qt.API.image_compression.SLOW:i=9,a=Y4}t=function(A,c,u,d){for(var p,g=A.length/c,v=new Uint8Array(A.length+g),y=[EY,W4,J4,X4,Y4],S=0;S<g;S+=1){var x=S*c,I=A.subarray(x,x+c);if(d)v.set(d(I,u,p),x+S);else{for(var N=y.length,U=[],D=0;D<N;D+=1)U[D]=y[D](I,u,p);var P=SY(U.concat());v.set(U[P],x+S)}p=I}return v}(t,e,Math.ceil(r*n/8),a);var o=By(t,{level:i});return qt.API.__addimage__.arrayBufferToBinaryString(o)}function EY(t){var e=Array.apply([],t);return e.unshift(0),e}function W4(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var i=t[s-e]||0;n[s+1]=t[s]-i+256&255}return n}function J4(t,e,r){var n=t.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var a=r&&r[i]||0;s[i+1]=t[i]-a+256&255}return s}function X4(t,e,r){var n=t.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var a=t[i-e]||0,o=r&&r[i]||0;s[i+1]=t[i]+256-(a+o>>>1)&255}return s}function Y4(t,e,r){var n=t.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var a=kY(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);s[i+1]=t[i]-a+256&255}return s}function kY(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=s&&n<=i?t:s<=i?e:r}function SY(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function yv(t,e,r){var n=e*r,s=Math.floor(n/8),i=16-(n-8*s+r),a=(1<<r)-1;return c6(t,s)>>i&a}function Z4(t,e,r,n){var s=r*n,i=Math.floor(s/8),a=16-(s-8*i+n),o=(1<<n)-1,A=(e&o)<<a;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var p=d>>8&255;c.setUint8(u,p)}})(t,i,c6(t,i)&~(o<<a)&65535|A)}function c6(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function NY(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<1+(7&s);t[e++],t[e++];var o=null,A=null;i&&(o=e,A=a,e+=3*a);var c=!0,u=[],d=0,p=null,g=0,v=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,p=t[e++],1&y||(p=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var S=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,U=t[e++],D=U>>6&1,P=1<<1+(7&U),E=o,_=A,B=!1;U>>7&&(B=!0,E=e,_=P,e+=3*P);var Q=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}u.push({x:S,y:x,width:I,height:N,has_local_palette:B,palette_offset:E,palette_size:_,data_offset:Q,data_length:e-Q,transparent_index:p,interlaced:!!D,delay:d,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(L){if(L<0||L>=u.length)throw new Error("Frame index out of range.");return u[L]},this.decodeAndBlitFrameBGRA=function(L,T){var Y=this.frameInfo(L),xe=Y.width*Y.height,Be=new Uint8Array(xe);ek(t,Y.data_offset,Be,xe);var _e=Y.palette_offset,se=Y.transparent_index;se===null&&(se=256);var me=Y.width,Pe=r-me,Se=me,M=4*(Y.y*r+Y.x),H=4*((Y.y+Y.height)*r+Y.x),K=M,Z=4*Pe;Y.interlaced===!0&&(Z+=4*r*7);for(var ne=8,de=0,Ae=Be.length;de<Ae;++de){var pe=Be[de];if(Se===0&&(Se=me,(K+=Z)>=H&&(Z=4*Pe+4*r*(ne-1),K=M+(me+Pe)*(ne<<1),ne>>=1)),pe===se)K+=4;else{var Ee=t[_e+3*pe],Oe=t[_e+3*pe+1],rt=t[_e+3*pe+2];T[K++]=rt,T[K++]=Oe,T[K++]=Ee,T[K++]=255}--Se}},this.decodeAndBlitFrameRGBA=function(L,T){var Y=this.frameInfo(L),xe=Y.width*Y.height,Be=new Uint8Array(xe);ek(t,Y.data_offset,Be,xe);var _e=Y.palette_offset,se=Y.transparent_index;se===null&&(se=256);var me=Y.width,Pe=r-me,Se=me,M=4*(Y.y*r+Y.x),H=4*((Y.y+Y.height)*r+Y.x),K=M,Z=4*Pe;Y.interlaced===!0&&(Z+=4*r*7);for(var ne=8,de=0,Ae=Be.length;de<Ae;++de){var pe=Be[de];if(Se===0&&(Se=me,(K+=Z)>=H&&(Z=4*Pe+4*r*(ne-1),K=M+(me+Pe)*(ne<<1),ne>>=1)),pe===se)K+=4;else{var Ee=t[_e+3*pe],Oe=t[_e+3*pe+1],rt=t[_e+3*pe+2];T[K++]=Ee,T[K++]=Oe,T[K++]=rt,T[K++]=255}--Se}}}function ek(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,A=s+1,c=(1<<A)-1,u=0,d=0,p=0,g=t[e++],v=new Int32Array(4096),y=null;;){for(;u<16&&g!==0;)d|=t[e++]<<u,u+=8,g===1?g=t[e++]:--g;if(u<A)break;var S=d&c;if(d>>=A,u-=A,S!==i){if(S===a)break;for(var x=S<o?S:y,I=0,N=x;N>i;)N=v[N]>>8,++I;var U=N;if(p+I+(x!==S?1:0)>n)return void on.log("Warning, gif stream longer than expected.");r[p++]=U;var D=p+=I;for(x!==S&&(r[p++]=U),N=x;I--;)N=v[N],r[--D]=255&N,N>>=8;y!==null&&o<4096&&(v[o++]=y<<8|U,o>=c+1&&A<12&&(++A,c=c<<1|1)),y=S}else o=a+1,c=(1<<(A=s+1))-1,y=null}return p!==n&&on.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bv(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),A=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),p=new Array(65535),g=new Array(64),v=new Array(64),y=[],S=0,x=7,I=new Array(64),N=new Array(64),U=new Array(64),D=new Array(256),P=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],xe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Be(M,H){for(var K=0,Z=0,ne=new Array,de=1;de<=16;de++){for(var Ae=1;Ae<=M[de];Ae++)ne[H[Z]]=[],ne[H[Z]][0]=K,ne[H[Z]][1]=de,Z++,K++;K*=2}return ne}function _e(M){for(var H=M[0],K=M[1]-1;K>=0;)H&1<<K&&(S|=1<<x),K--,--x<0&&(S==255?(se(255),se(0)):se(S),x=7,S=0)}function se(M){y.push(M)}function me(M){se(M>>8&255),se(255&M)}function Pe(M,H,K,Z,ne){for(var de,Ae=ne[0],pe=ne[240],Ee=function(ge,be){var we,ue,je,q,le,ae,he,Te,Re,Ge,Ke=0;for(Re=0;Re<8;++Re){we=ge[Ke],ue=ge[Ke+1],je=ge[Ke+2],q=ge[Ke+3],le=ge[Ke+4],ae=ge[Ke+5],he=ge[Ke+6];var Et=we+(Te=ge[Ke+7]),pt=we-Te,ht=ue+he,ot=ue-he,Je=je+ae,qe=je-ae,Tt=q+le,_t=q-le,kt=Et+Tt,Wt=Et-Tt,Ot=ht+Je,vt=ht-Je;ge[Ke]=kt+Ot,ge[Ke+4]=kt-Ot;var Ht=.707106781*(vt+Wt);ge[Ke+2]=Wt+Ht,ge[Ke+6]=Wt-Ht;var rn=.382683433*((kt=_t+qe)-(vt=ot+pt)),jr=.5411961*kt+rn,Vr=1.306562965*vt+rn,tr=.707106781*(Ot=qe+ot),Qt=pt+tr,kr=pt-tr;ge[Ke+5]=kr+jr,ge[Ke+3]=kr-jr,ge[Ke+1]=Qt+Vr,ge[Ke+7]=Qt-Vr,Ke+=8}for(Ke=0,Re=0;Re<8;++Re){we=ge[Ke],ue=ge[Ke+8],je=ge[Ke+16],q=ge[Ke+24],le=ge[Ke+32],ae=ge[Ke+40],he=ge[Ke+48];var us=we+(Te=ge[Ke+56]),nn=we-Te,Rr=ue+he,pr=ue-he,Fr=je+ae,ie=je-ae,$e=q+le,yt=q-le,mt=us+$e,St=us-$e,nt=Rr+Fr,xt=Rr-Fr;ge[Ke]=mt+nt,ge[Ke+32]=mt-nt;var gt=.707106781*(xt+St);ge[Ke+16]=St+gt,ge[Ke+48]=St-gt;var ir=.382683433*((mt=yt+ie)-(xt=pr+nn)),Mr=.5411961*mt+ir,Cr=1.306562965*xt+ir,Ts=.707106781*(nt=ie+pr),Mi=nn+Ts,Oi=nn-Ts;ge[Ke+40]=Oi+Mr,ge[Ke+24]=Oi-Mr,ge[Ke+8]=Mi+Cr,ge[Ke+56]=Mi-Cr,Ke++}for(Re=0;Re<64;++Re)Ge=ge[Re]*be[Re],g[Re]=Ge>0?Ge+.5|0:Ge-.5|0;return g}(M,H),Oe=0;Oe<64;++Oe)v[E[Oe]]=Ee[Oe];var rt=v[0]-K;K=v[0],rt==0?_e(Z[0]):(_e(Z[p[de=32767+rt]]),_e(d[de]));for(var ke=63;ke>0&&v[ke]==0;)ke--;if(ke==0)return _e(Ae),K;for(var ce,R=1;R<=ke;){for(var Ce=R;v[R]==0&&R<=ke;)++R;var Me=R-Ce;if(Me>=16){ce=Me>>4;for(var st=1;st<=ce;++st)_e(pe);Me&=15}de=32767+v[R],_e(ne[(Me<<4)+p[de]]),_e(d[de]),R++}return ke!=63&&_e(Ae),K}function Se(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(H){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ne=a((K[Z]*H+50)/100);ne=Math.min(Math.max(ne,1),255),o[E[Z]]=ne}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var pe=a((de[Ae]*H+50)/100);pe=Math.min(Math.max(pe,1),255),A[E[Ae]]=pe}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Oe=0,rt=0;rt<8;rt++)for(var ke=0;ke<8;ke++)c[Oe]=1/(o[E[Oe]]*Ee[rt]*Ee[ke]*8),u[Oe]=1/(A[E[Oe]]*Ee[rt]*Ee[ke]*8),Oe++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,H){H&&Se(H),y=new Array,S=0,x=7,me(65496),me(65504),me(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),me(1),me(1),se(0),se(0),function(){me(65499),me(132),se(0);for(var ue=0;ue<64;ue++)se(o[ue]);se(1);for(var je=0;je<64;je++)se(A[je])}(),function(ue,je){me(65472),me(17),se(8),me(je),me(ue),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)}(M.width,M.height),function(){me(65476),me(418),se(0);for(var ue=0;ue<16;ue++)se(_[ue+1]);for(var je=0;je<=11;je++)se(B[je]);se(16);for(var q=0;q<16;q++)se(Q[q+1]);for(var le=0;le<=161;le++)se(k[le]);se(1);for(var ae=0;ae<16;ae++)se(L[ae+1]);for(var he=0;he<=11;he++)se(T[he]);se(17);for(var Te=0;Te<16;Te++)se(Y[Te+1]);for(var Re=0;Re<=161;Re++)se(xe[Re])}(),me(65498),me(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var K=0,Z=0,ne=0;S=0,x=7,this.encode.displayName="_encode_";for(var de,Ae,pe,Ee,Oe,rt,ke,ce,R,Ce=M.data,Me=M.width,st=M.height,ge=4*Me,be=0;be<st;){for(de=0;de<ge;){for(Oe=ge*be+de,ke=-1,ce=0,R=0;R<64;R++)rt=Oe+(ce=R>>3)*ge+(ke=4*(7&R)),be+ce>=st&&(rt-=ge*(be+1+ce-st)),de+ke>=ge&&(rt-=de+ke-ge+4),Ae=Ce[rt++],pe=Ce[rt++],Ee=Ce[rt++],I[R]=(P[Ae]+P[pe+256|0]+P[Ee+512|0]>>16)-128,N[R]=(P[Ae+768|0]+P[pe+1024|0]+P[Ee+1280|0]>>16)-128,U[R]=(P[Ae+1280|0]+P[pe+1536|0]+P[Ee+1792|0]>>16)-128;K=Pe(I,c,K,e,n),Z=Pe(N,u,Z,r,s),ne=Pe(U,u,ne,r,s),de+=32}be+=8}if(x>=0){var we=[];we[1]=x+1,we[0]=(1<<x+1)-1,_e(we)}return me(65497),new Uint8Array(y)},t=t||50,function(){for(var M=String.fromCharCode,H=0;H<256;H++)D[H]=M(H)}(),e=Be(_,B),r=Be(L,T),n=Be(Q,k),s=Be(Y,xe),function(){for(var M=1,H=2,K=1;K<=15;K++){for(var Z=M;Z<H;Z++)p[32767+Z]=K,d[32767+Z]=[],d[32767+Z][1]=K,d[32767+Z][0]=Z;for(var ne=-(H-1);ne<=-M;ne++)p[32767+ne]=K,d[32767+ne]=[],d[32767+ne][1]=K,d[32767+ne][0]=H-1+ne;M<<=1,H<<=1}}(),function(){for(var M=0;M<256;M++)P[M]=19595*M,P[M+256|0]=38470*M,P[M+512|0]=7471*M+32768,P[M+768|0]=-11059*M,P[M+1024|0]=-21709*M,P[M+1280|0]=32768*M+8421375,P[M+1536|0]=-27439*M,P[M+1792|0]=-5329*M}(),Se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ka(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function tk(t){function e(B){if(!B)throw Error("assert :P")}function r(B,Q,k){for(var L=0;4>L;L++)if(B[Q+L]!=k.charCodeAt(L))return!0;return!1}function n(B,Q,k,L,T){for(var Y=0;Y<T;Y++)B[Q+Y]=k[L+Y]}function s(B,Q,k,L){for(var T=0;T<L;T++)B[Q+T]=k}function i(B){return new Int32Array(B)}function a(B,Q){for(var k=[],L=0;L<B;L++)k.push(new Q);return k}function o(B,Q){var k=[];return function L(T,Y,xe){for(var Be=xe[Y],_e=0;_e<Be&&(T.push(xe.length>Y+1?[]:new Q),!(xe.length<Y+1));_e++)L(T[_e],Y+1,xe)}(k,0,B),k}var A=function(){var B=this;function Q(h,m){for(var b=1<<m-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function k(h,m,b,F,V){e(!(F%b));do h[m+(F-=b)]=V;while(0<F)}function L(h,m,b,F,V){if(e(2328>=V),512>=V)var z=i(512);else if((z=i(V))==null)return 0;return function($,W,X,te,ye,He){var re,Ie,Le=W,We=1<<X,De=i(16),Ye=i(16);for(e(ye!=0),e(te!=null),e($!=null),e(0<X),Ie=0;Ie<ye;++Ie){if(15<te[Ie])return 0;++De[te[Ie]]}if(De[0]==ye)return 0;for(Ye[1]=0,re=1;15>re;++re){if(De[re]>1<<re)return 0;Ye[re+1]=Ye[re]+De[re]}for(Ie=0;Ie<ye;++Ie)re=te[Ie],0<te[Ie]&&(He[Ye[re]++]=Ie);if(Ye[15]==1)return(te=new T).g=0,te.value=He[0],k($,Le,1,We,te),We;var et,dt=-1,At=We-1,$t=0,Pt=1,dr=1,Kt=1<<X;for(Ie=0,re=1,ye=2;re<=X;++re,ye<<=1){if(Pt+=dr<<=1,0>(dr-=De[re]))return 0;for(;0<De[re];--De[re])(te=new T).g=re,te.value=He[Ie++],k($,Le+$t,ye,Kt,te),$t=Q($t,re)}for(re=X+1,ye=2;15>=re;++re,ye<<=1){if(Pt+=dr<<=1,0>(dr-=De[re]))return 0;for(;0<De[re];--De[re]){if(te=new T,($t&At)!=dt){for(Le+=Kt,et=1<<(dt=re)-X;15>dt&&!(0>=(et-=De[dt]));)++dt,et<<=1;We+=Kt=1<<(et=dt-X),$[W+(dt=$t&At)].g=et+X,$[W+dt].value=Le-W-dt}te.g=re-X,te.value=He[Ie++],k($,Le+($t>>X),ye,Kt,te),$t=Q($t,re)}}return Pt!=2*Ye[15]-1?0:We}(h,m,b,F,V,z)}function T(){this.value=this.g=0}function Y(){this.value=this.g=0}function xe(){this.G=a(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(dc,Y)}function Be(h,m,b,F){e(h!=null),e(m!=null),e(2147483648>F),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=b,h.Jd=m,h.Yc=b+F,h.Zc=4<=F?b+F-4+1:b,Ae(h)}function _e(h,m){for(var b=0;0<m--;)b|=Ee(h,128)<<m;return b}function se(h,m){var b=_e(h,m);return pe(h)?-b:b}function me(h,m,b,F){var V,z=0;for(e(h!=null),e(m!=null),e(4294967288>F),h.Sb=F,h.Ra=0,h.u=0,h.h=0,4<F&&(F=4),V=0;V<F;++V)z+=m[b+V]<<8*V;h.Ra=z,h.bb=F,h.oa=m,h.pa=b}function Pe(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<TA-8>>>0,++h.bb,h.u-=8;Z(h)&&(h.h=1,h.u=0)}function Se(h,m){if(e(0<=m),!h.h&&m<=Gi){var b=K(h)&zi[m];return h.u+=m,Pe(h),b}return h.h=1,h.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(h){return h.Ra>>>(h.u&TA-1)>>>0}function Z(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>TA}function ne(h,m){h.u=m,h.h=Z(h)}function de(h){h.u>=Do&&(e(h.u>=Do),Pe(h))}function Ae(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function pe(h){return _e(h,1)}function Ee(h,m){var b=h.Ca;0>h.b&&Ae(h);var F=h.b,V=b*m>>>8,z=(h.I>>>F>V)+0;for(z?(b-=V,h.I-=V+1<<F>>>0):b=V+1,F=b,V=0;256<=F;)V+=8,F>>=8;return F=7^V+UA[F],h.b-=F,h.Ca=(b<<F)-1,z}function Oe(h,m,b){h[m+0]=b>>24&255,h[m+1]=b>>16&255,h[m+2]=b>>8&255,h[m+3]=255&b}function rt(h,m){return h[m+0]|h[m+1]<<8}function ke(h,m){return rt(h,m)|h[m+2]<<16}function ce(h,m){return rt(h,m)|rt(h,m+2)<<16}function R(h,m){var b=1<<m;return e(h!=null),e(0<m),h.X=i(b),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function Ce(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),n(m.X,0,h.X,0,1<<m.Xa)}function Me(){this.X=[],this.Xa=this.Mb=0}function st(h,m,b,F){e(b!=null),e(F!=null);var V=b[0],z=F[0];return V==0&&(V=(h*z+m/2)/m),z==0&&(z=(m*V+h/2)/h),0>=V||0>=z?0:(b[0]=V,F[0]=z,1)}function ge(h,m){return h+(1<<m)-1>>>m}function be(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function we(h,m){B[m]=function(b,F,V,z,$,W,X){var te;for(te=0;te<$;++te){var ye=B[h](W[X+te-1],V,z+te);W[X+te]=be(b[F+te],ye)}}}function ue(){this.ud=this.hd=this.jd=0}function je(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function q(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function le(h,m){return q(h+(h-m+.5>>1))}function ae(h,m,b){return Math.abs(m-b)-Math.abs(h-b)}function he(h,m,b,F,V,z,$){for(F=z[$-1],b=0;b<V;++b)z[$+b]=F=be(h[m+b],F)}function Te(h,m,b,F,V){var z;for(z=0;z<b;++z){var $=h[m+z],W=$>>8&255,X=16711935&(X=(X=16711935&$)+((W<<16)+W));F[V+z]=(4278255360&$)+X>>>0}}function Re(h,m){m.jd=255&h,m.hd=h>>8&255,m.ud=h>>16&255}function Ge(h,m,b,F,V,z){var $;for($=0;$<F;++$){var W=m[b+$],X=W>>>8,te=W,ye=255&(ye=(ye=W>>>16)+((h.jd<<24>>24)*(X<<24>>24)>>>5));te=255&(te=(te+=(h.hd<<24>>24)*(X<<24>>24)>>>5)+((h.ud<<24>>24)*(ye<<24>>24)>>>5)),V[z+$]=(4278255360&W)+(ye<<16)+te}}function Ke(h,m,b,F,V){B[m]=function(z,$,W,X,te,ye,He,re,Ie){for(X=He;X<re;++X)for(He=0;He<Ie;++He)te[ye++]=V(W[F(z[$++])])},B[h]=function(z,$,W,X,te,ye,He){var re=8>>z.b,Ie=z.Ea,Le=z.K[0],We=z.w;if(8>re)for(z=(1<<z.b)-1,We=(1<<re)-1;$<W;++$){var De,Ye=0;for(De=0;De<Ie;++De)De&z||(Ye=F(X[te++])),ye[He++]=V(Le[Ye&We]),Ye>>=re}else B["VP8LMapColor"+b](X,te,Le,We,ye,He,$,W,Ie)}}function Et(h,m,b,F,V){for(b=m+b;m<b;){var z=h[m++];F[V++]=z>>16&255,F[V++]=z>>8&255,F[V++]=255&z}}function pt(h,m,b,F,V){for(b=m+b;m<b;){var z=h[m++];F[V++]=z>>16&255,F[V++]=z>>8&255,F[V++]=255&z,F[V++]=z>>24&255}}function ht(h,m,b,F,V){for(b=m+b;m<b;){var z=($=h[m++])>>16&240|$>>12&15,$=240&$|$>>28&15;F[V++]=z,F[V++]=$}}function ot(h,m,b,F,V){for(b=m+b;m<b;){var z=($=h[m++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;F[V++]=z,F[V++]=$}}function Je(h,m,b,F,V){for(b=m+b;m<b;){var z=h[m++];F[V++]=255&z,F[V++]=z>>8&255,F[V++]=z>>16&255}}function qe(h,m,b,F,V,z){if(z==0)for(b=m+b;m<b;)Oe(F,((z=h[m++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),V+=32;else n(F,V,h,m,b)}function Tt(h,m){B[m][0]=B[h+"0"],B[m][1]=B[h+"1"],B[m][2]=B[h+"2"],B[m][3]=B[h+"3"],B[m][4]=B[h+"4"],B[m][5]=B[h+"5"],B[m][6]=B[h+"6"],B[m][7]=B[h+"7"],B[m][8]=B[h+"8"],B[m][9]=B[h+"9"],B[m][10]=B[h+"10"],B[m][11]=B[h+"11"],B[m][12]=B[h+"12"],B[m][13]=B[h+"13"],B[m][14]=B[h+"0"],B[m][15]=B[h+"0"]}function _t(h){return h==L1||h==Q1||h==p0||h==j1}function kt(){this.eb=[],this.size=this.A=this.fb=0}function Wt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ot(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kt,this.f.kb=new Wt,this.sd=null}function vt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rn(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function jr(h,m){var b=h.T,F=m.ba.f.RGBA,V=F.eb,z=F.fb+h.ka*F.A,$=ba[m.ba.S],W=h.y,X=h.O,te=h.f,ye=h.N,He=h.ea,re=h.W,Ie=m.cc,Le=m.dc,We=m.Mc,De=m.Nc,Ye=h.ka,et=h.ka+h.T,dt=h.U,At=dt+1>>1;for(Ye==0?$(W,X,null,null,te,ye,He,re,te,ye,He,re,V,z,null,null,dt):($(m.ec,m.fc,W,X,Ie,Le,We,De,te,ye,He,re,V,z-F.A,V,z,dt),++b);Ye+2<et;Ye+=2)Ie=te,Le=ye,We=He,De=re,ye+=h.Rc,re+=h.Rc,z+=2*F.A,$(W,(X+=2*h.fa)-h.fa,W,X,Ie,Le,We,De,te,ye,He,re,V,z-F.A,V,z,dt);return X+=h.fa,h.j+et<h.o?(n(m.ec,m.fc,W,X,dt),n(m.cc,m.dc,te,ye,At),n(m.Mc,m.Nc,He,re,At),b--):1&et||$(W,X,null,null,te,ye,He,re,te,ye,He,re,V,z+F.A,null,null,dt),b}function Vr(h,m,b){var F=h.F,V=[h.J];if(F!=null){var z=h.U,$=m.ba.S,W=$==f0||$==p0;m=m.ba.f.RGBA;var X=[0],te=h.ka;X[0]=h.T,h.Kb&&(te==0?--X[0]:(--te,V[0]-=h.width),h.j+h.ka+h.T==h.o&&(X[0]=h.o-h.j-te));var ye=m.eb;te=m.fb+te*m.A,h=a5(F,V[0],h.width,z,X,ye,te+(W?0:3),m.A),e(b==X),h&&_t($)&&Sh(ye,te,W,z,X,m.A)}return 0}function tr(h){var m=h.ma,b=m.ba.S,F=11>b,V=b==d0||b==h0||b==f0||b==U1||b==12||_t(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!yh(m.Oa,h,V?11:12))return 0;if(V&&_t(b)&&xa(),h.da)alert("todo:use_scaling");else{if(F){if(m.Ib=rn,h.Kb){if(b=h.U+1>>1,m.memory=i(h.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=jr,xa()}}else alert("todo:EmitYUV");V&&(m.Jb=Vr,F&&Ci())}if(F&&!b5){for(h=0;256>h;++h)L6[h]=89858*(h-128)+m0>>g0,R6[h]=-22014*(h-128)+m0,j6[h]=-45773*(h-128),Q6[h]=113618*(h-128)+m0>>g0;for(h=Fh;h<D1;++h)m=76283*(h-16)+m0>>g0,P6[h-Fh]=Zt(m,255),D6[h-Fh]=Zt(m+8>>4,15);b5=1}return 1}function Qt(h){var m=h.ma,b=h.U,F=h.T;return e(!(1&h.ka)),0>=b||0>=F?0:(b=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,b),m.Dc+=b,1)}function kr(h){h.ma.memory=null}function us(h,m,b,F){return Se(h,8)!=47?0:(m[0]=Se(h,14)+1,b[0]=Se(h,14)+1,F[0]=Se(h,1),Se(h,3)!=0?0:!h.h)}function nn(h,m){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+Se(m,b)+1}function Rr(h,m){return 120<m?m-120:1<=(b=((b=v6[m-1])>>4)*h+(8-(15&b)))?b:1;var b}function pr(h,m,b){var F=K(b),V=h[m+=255&F].g-8;return 0<V&&(ne(b,b.u+8),F=K(b),m+=h[m].value,m+=F&(1<<V)-1),ne(b,b.u+h[m].g),h[m].value}function Fr(h,m,b){return b.g+=h.g,b.value+=h.value<<m>>>0,e(8>=b.g),h.g}function ie(h,m,b){var F=h.xc;return e((m=F==0?0:h.vc[h.md*(b>>F)+(m>>F)])<h.Wb),h.Ya[m]}function $e(h,m,b,F){var V=h.ab,z=h.c*m,$=h.C;m=$+m;var W=b,X=F;for(F=h.Ta,b=h.Ua;0<V--;){var te=h.gc[V],ye=$,He=m,re=W,Ie=X,Le=(X=F,W=b,te.Ea);switch(e(ye<He),e(He<=te.nc),te.hc){case 2:$n(re,Ie,(He-ye)*Le,X,W);break;case 0:var We=ye,De=He,Ye=X,et=W,dt=(Kt=te).Ea;We==0&&(Bh(re,Ie,null,null,1,Ye,et),he(re,Ie+1,0,0,dt-1,Ye,et+1),Ie+=dt,et+=dt,++We);for(var At=1<<Kt.b,$t=At-1,Pt=ge(dt,Kt.b),dr=Kt.K,Kt=Kt.w+(We>>Kt.b)*Pt;We<De;){var Er=dr,fs=Kt,hr=1;for(wu(re,Ie,Ye,et-dt,1,Ye,et);hr<dt;){var zt=(hr&~$t)+At;zt>dt&&(zt=dt),(0,Ch[Er[fs++]>>8&15])(re,Ie+ +hr,Ye,et+hr-dt,zt-hr,Ye,et+hr),hr=zt}Ie+=dt,et+=dt,++We&$t||(Kt+=Pt)}He!=te.nc&&n(X,W-Le,X,W+(He-ye-1)*Le,Le);break;case 1:for(Le=re,De=Ie,dt=(re=te.Ea)-(et=re&~(Ye=(Ie=1<<te.b)-1)),We=ge(re,te.b),At=te.K,te=te.w+(ye>>te.b)*We;ye<He;){for($t=At,Pt=te,dr=new ue,Kt=De+et,Er=De+re;De<Kt;)Re($t[Pt++],dr),Ih(dr,Le,De,Ie,X,W),De+=Ie,W+=Ie;De<Er&&(Re($t[Pt++],dr),Ih(dr,Le,De,dt,X,W),De+=dt,W+=dt),++ye&Ye||(te+=We)}break;case 3:if(re==X&&Ie==W&&0<te.b){for(De=X,re=Le=W+(He-ye)*Le-(et=(He-ye)*ge(te.Ea,te.b)),Ie=X,Ye=W,We=[],et=(dt=et)-1;0<=et;--et)We[et]=Ie[Ye+et];for(et=dt-1;0<=et;--et)De[re+et]=We[et];A0(te,ye,He,X,Le,X,W)}else A0(te,ye,He,re,Ie,X,W)}W=F,X=b}X!=b&&n(F,b,W,X,z)}function yt(h,m){var b=h.V,F=h.Ba+h.c*h.C,V=m-h.C;if(e(m<=h.l.o),e(16>=V),0<V){var z=h.l,$=h.Ta,W=h.Ua,X=z.width;if($e(h,V,b,F),V=W=[W],e((b=h.C)<(F=m)),e(z.v<z.va),F>z.o&&(F=z.o),b<z.j){var te=z.j-b;b=z.j,V[0]+=te*X}if(b>=F?b=0:(V[0]+=4*z.v,z.ka=b-z.j,z.U=z.va-z.v,z.T=F-b,b=1),b){if(W=W[0],11>(b=h.ca).S){var ye=b.f.RGBA,He=(F=b.S,V=z.U,z=z.T,te=ye.eb,ye.A),re=z;for(ye=ye.fb+h.Ma*ye.A;0<re--;){var Ie=$,Le=W,We=V,De=te,Ye=ye;switch(F){case u0:Eh(Ie,Le,We,De,Ye);break;case d0:LA(Ie,Le,We,De,Ye);break;case L1:LA(Ie,Le,We,De,Ye),Sh(De,Ye,0,We,1,0);break;case h5:hc(Ie,Le,We,De,Ye);break;case h0:qe(Ie,Le,We,De,Ye,1);break;case Q1:qe(Ie,Le,We,De,Ye,1),Sh(De,Ye,0,We,1,0);break;case f0:qe(Ie,Le,We,De,Ye,0);break;case p0:qe(Ie,Le,We,De,Ye,0),Sh(De,Ye,1,We,1,0);break;case U1:QA(Ie,Le,We,De,Ye);break;case j1:QA(Ie,Le,We,De,Ye),i5(De,Ye,We,1,0);break;case f5:jA(Ie,Le,We,De,Ye);break;default:e(0)}W+=X,ye+=He}h.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=b.height)}}h.C=m,e(h.C<=h.i)}function mt(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var b=h.Ya[m].G,F=h.Ya[m].H;if(0<b[1][F[1]+0].g||0<b[2][F[2]+0].g||0<b[3][F[3]+0].g)return 0}return 1}function St(h,m,b,F,V,z){if(h.Z!=0){var $=h.qd,W=h.rd;for(e(DA[h.Z]!=null);m<b;++m)DA[h.Z]($,W,F,V,F,V,z),$=F,W=V,V+=z;h.qd=$,h.rd=W}}function nt(h,m){var b=h.l.ma,F=b.Z==0||b.Z==1?h.l.j:h.C;if(F=h.C<F?F:h.C,e(m<=h.l.o),m>F){var V=h.l.width,z=b.ca,$=b.tb+V*F,W=h.V,X=h.Ba+h.c*F,te=h.gc;e(h.ab==1),e(te[0].hc==3),lo(te[0],F,m,W,X,z,$),St(b,F,m,z,$,V)}h.C=h.Ma=m}function xt(h,m,b,F,V,z,$){var W=h.$/F,X=h.$%F,te=h.m,ye=h.s,He=b+h.$,re=He;V=b+F*V;var Ie=b+F*z,Le=280+ye.ua,We=h.Pb?W:16777216,De=0<ye.ua?ye.Wa:null,Ye=ye.wc,et=He<Ie?ie(ye,X,W):null;e(h.C<z),e(Ie<=V);var dt=!1;e:for(;;){for(;dt||He<Ie;){var At=0;if(W>=We){var $t=He-b;e((We=h).Pb),We.wd=We.m,We.xd=$t,0<We.s.ua&&Ce(We.s.Wa,We.s.vb),We=W+b6}if(X&Ye||(et=ie(ye,X,W)),e(et!=null),et.Qb&&(m[He]=et.qb,dt=!0),!dt)if(de(te),et.jc){At=te,$t=m;var Pt=He,dr=et.pd[K(At)&dc-1];e(et.jc),256>dr.g?(ne(At,At.u+dr.g),$t[Pt]=dr.value,At=0):(ne(At,At.u+dr.g-256),e(256<=dr.value),At=dr.value),At==0&&(dt=!0)}else At=pr(et.G[0],et.H[0],te);if(te.h)break;if(dt||256>At){if(!dt)if(et.nd)m[He]=(et.qb|At<<8)>>>0;else{if(de(te),dt=pr(et.G[1],et.H[1],te),de(te),$t=pr(et.G[2],et.H[2],te),Pt=pr(et.G[3],et.H[3],te),te.h)break;m[He]=(Pt<<24|dt<<16|At<<8|$t)>>>0}if(dt=!1,++He,++X>=F&&(X=0,++W,$!=null&&W<=z&&!(W%16)&&$(h,W),De!=null))for(;re<He;)At=m[re++],De.X[(506832829*At&4294967295)>>>De.Mb]=At}else if(280>At){if(At=nn(At-256,te),$t=pr(et.G[4],et.H[4],te),de(te),$t=Rr(F,$t=nn($t,te)),te.h)break;if(He-b<$t||V-He<At)break e;for(Pt=0;Pt<At;++Pt)m[He+Pt]=m[He+Pt-$t];for(He+=At,X+=At;X>=F;)X-=F,++W,$!=null&&W<=z&&!(W%16)&&$(h,W);if(e(He<=V),X&Ye&&(et=ie(ye,X,W)),De!=null)for(;re<He;)At=m[re++],De.X[(506832829*At&4294967295)>>>De.Mb]=At}else{if(!(At<Le))break e;for(dt=At-280,e(De!=null);re<He;)At=m[re++],De.X[(506832829*At&4294967295)>>>De.Mb]=At;At=He,e(!(dt>>>($t=De).Xa)),m[At]=$t.X[dt],dt=!0}dt||e(te.h==Z(te))}if(h.Pb&&te.h&&He<V)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ce(h.s.vb,h.s.Wa);else{if(te.h)break e;$!=null&&$(h,W>z?z:W),h.a=0,h.$=He-b}return 1}return h.a=3,0}function gt(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function ir(){var h=new er;return h==null?null:(h.a=0,h.xb=m5,Tt("Predictor","VP8LPredictors"),Tt("Predictor","VP8LPredictors_C"),Tt("PredictorAdd","VP8LPredictorsAdd"),Tt("PredictorAdd","VP8LPredictorsAdd_C"),$n=Te,Ih=Ge,Eh=Et,LA=pt,QA=ht,jA=ot,hc=Je,B.VP8LMapColor32b=Ao,B.VP8LMapColor8b=_h,h)}function Mr(h,m,b,F,V){var z=1,$=[h],W=[m],X=F.m,te=F.s,ye=null,He=0;e:for(;;){if(b)for(;z&&Se(X,1);){var re=$,Ie=W,Le=F,We=1,De=Le.m,Ye=Le.gc[Le.ab],et=Se(De,2);if(Le.Oc&1<<et)z=0;else{switch(Le.Oc|=1<<et,Ye.hc=et,Ye.Ea=re[0],Ye.nc=Ie[0],Ye.K=[null],++Le.ab,e(4>=Le.ab),et){case 0:case 1:Ye.b=Se(De,3)+2,We=Mr(ge(Ye.Ea,Ye.b),ge(Ye.nc,Ye.b),0,Le,Ye.K),Ye.K=Ye.K[0];break;case 3:var dt,At=Se(De,8)+1,$t=16<At?0:4<At?1:2<At?2:3;if(re[0]=ge(Ye.Ea,$t),Ye.b=$t,dt=We=Mr(At,1,0,Le,Ye.K)){var Pt,dr=At,Kt=Ye,Er=1<<(8>>Kt.b),fs=i(Er);if(fs==null)dt=0;else{var hr=Kt.K[0],zt=Kt.w;for(fs[0]=Kt.K[0][0],Pt=1;Pt<1*dr;++Pt)fs[Pt]=be(hr[zt+Pt],fs[Pt-1]);for(;Pt<4*Er;++Pt)fs[Pt]=0;Kt.K[0]=null,Kt.K[0]=fs,dt=1}}We=dt;break;case 2:break;default:e(0)}z=We}}if($=$[0],W=W[0],z&&Se(X,1)&&!(z=1<=(He=Se(X,4))&&11>=He)){F.a=3;break e}var Ct;if(Ct=z)t:{var Wn,lr,Sr,mn=F,Qs=$,gi=W,Hn=He,$s=b,mi=mn.m,ps=mn.s,Tr=[null],zr=1,Vn=0,Gr=y6[Hn];r:for(;;){if($s&&Se(mi,1)){var js=Se(mi,3)+2,Oa=ge(Qs,js),Jn=ge(gi,js),Ii=Oa*Jn;if(!Mr(Oa,Jn,0,mn,Tr))break r;for(Tr=Tr[0],ps.xc=js,Wn=0;Wn<Ii;++Wn){var an=Tr[Wn]>>8&65535;Tr[Wn]=an,an>=zr&&(zr=an+1)}}if(mi.h)break r;for(lr=0;5>lr;++lr){var gs=p5[lr];!lr&&0<Hn&&(gs+=1<<Hn),Vn<gs&&(Vn=gs)}var qi=a(zr*Gr,T),wi=zr,Wi=a(wi,xe);if(Wi==null)var Ji=null;else e(65536>=wi),Ji=Wi;var Ei=i(Vn);if(Ji==null||Ei==null||qi==null){mn.a=1;break r}var Xi=qi;for(Wn=Sr=0;Wn<zr;++Wn){var cn=Ji[Wn],Yi=cn.G,Ha=cn.H,pc=0,Ho=1,Rs=0;for(lr=0;5>lr;++lr){gs=p5[lr],Yi[lr]=Xi,Ha[lr]=Sr,!lr&&0<Hn&&(gs+=1<<Hn);s:{var x0,M1=gs,v0=mn,Th=Ei,H6=Xi,V6=Sr,O1=0,MA=v0.m,K6=Se(MA,1);if(s(Th,0,0,M1),K6){var z6=Se(MA,1)+1,G6=Se(MA,1),C5=Se(MA,G6==0?1:8);Th[C5]=1,z6==2&&(Th[C5=Se(MA,8)]=1);var y0=1}else{var I5=i(19),E5=Se(MA,4)+4;if(19<E5){v0.a=3;var b0=0;break s}for(x0=0;x0<E5;++x0)I5[x6[x0]]=Se(MA,3);var H1=void 0,Uh=void 0,k5=v0,$6=I5,B0=M1,S5=Th,V1=0,OA=k5.m,N5=8,F5=a(128,T);n:for(;L(F5,0,7,$6,19);){if(Se(OA,1)){var q6=2+2*Se(OA,3);if((H1=2+Se(OA,q6))>B0)break n}else H1=B0;for(Uh=0;Uh<B0&&H1--;){de(OA);var T5=F5[0+(127&K(OA))];ne(OA,OA.u+T5.g);var vu=T5.value;if(16>vu)S5[Uh++]=vu,vu!=0&&(N5=vu);else{var W6=vu==16,U5=vu-16,J6=m6[U5],L5=Se(OA,g6[U5])+J6;if(Uh+L5>B0)break n;for(var X6=W6?N5:0;0<L5--;)S5[Uh++]=X6}}V1=1;break n}V1||(k5.a=3),y0=V1}(y0=y0&&!MA.h)&&(O1=L(H6,V6,8,Th,M1)),y0&&O1!=0?b0=O1:(v0.a=3,b0=0)}if(b0==0)break r;if(Ho&&w6[lr]==1&&(Ho=Xi[Sr].g==0),pc+=Xi[Sr].g,Sr+=b0,3>=lr){var Lh,K1=Ei[0];for(Lh=1;Lh<gs;++Lh)Ei[Lh]>K1&&(K1=Ei[Lh]);Rs+=K1}}if(cn.nd=Ho,cn.Qb=0,Ho&&(cn.qb=(Yi[3][Ha[3]+0].value<<24|Yi[1][Ha[1]+0].value<<16|Yi[2][Ha[2]+0].value)>>>0,pc==0&&256>Yi[0][Ha[0]+0].value&&(cn.Qb=1,cn.qb+=Yi[0][Ha[0]+0].value<<8)),cn.jc=!cn.Qb&&6>Rs,cn.jc){var _0,Vo=cn;for(_0=0;_0<dc;++_0){var HA=_0,VA=Vo.pd[HA],C0=Vo.G[0][Vo.H[0]+HA];256<=C0.value?(VA.g=C0.g+256,VA.value=C0.value):(VA.g=0,VA.value=0,HA>>=Fr(C0,8,VA),HA>>=Fr(Vo.G[1][Vo.H[1]+HA],16,VA),HA>>=Fr(Vo.G[2][Vo.H[2]+HA],0,VA),Fr(Vo.G[3][Vo.H[3]+HA],24,VA))}}}ps.vc=Tr,ps.Wb=zr,ps.Ya=Ji,ps.yc=qi,Ct=1;break t}Ct=0}if(!(z=Ct)){F.a=3;break e}if(0<He){if(te.ua=1<<He,!R(te.Wa,He)){F.a=1,z=0;break e}}else te.ua=0;var z1=F,Q5=$,Y6=W,G1=z1.s,$1=G1.xc;if(z1.c=Q5,z1.i=Y6,G1.md=ge(Q5,$1),G1.wc=$1==0?-1:(1<<$1)-1,b){F.xb=S6;break e}if((ye=i($*W))==null){F.a=1,z=0;break e}z=(z=xt(F,ye,0,$,W,W,null))&&!X.h;break e}return z?(V!=null?V[0]=ye:(e(ye==null),e(b)),F.$=0,b||gt(te)):gt(te),z}function Cr(h,m){var b=h.c*h.i,F=b+m+16*m;return e(h.c<=m),h.V=i(F),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+m,1)}function Ts(h,m){var b=h.C,F=m-b,V=h.V,z=h.Ba+h.c*b;for(e(m<=h.l.o);0<F;){var $=16<F?16:F,W=h.l.ma,X=h.l.width,te=X*$,ye=W.ca,He=W.tb+X*b,re=h.Ta,Ie=h.Ua;$e(h,$,V,z),o5(re,Ie,ye,He,te),St(W,b,b+$,ye,He,X),F-=$,V+=$*h.c,b+=$}e(b==m),h.C=h.Ma=m}function Mi(){this.ub=this.yd=this.td=this.Rb=0}function Oi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ci(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ca(){this.Yb=function(){var h=[];return function m(b,F,V){for(var z=V[F],$=0;$<z&&(b.push(V.length>F+1?[]:0),!(V.length<F+1));$++)m(b[$],F+1,V)}(h,0,[3,11]),h}()}function Qo(){this.jb=i(3),this.Wc=o([4,8],ca),this.Xc=o([4,17],ca)}function oe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ue(){this.ld=this.La=this.dd=this.tc=0}function tt(){this.Na=this.la=0}function it(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ut(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Nt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ue),this.Y=0,this.ya=Array(new ut),this.aa=0,this.l=new wr}function bt(){this.y=i(16),this.f=i(8),this.ea=i(8)}function or(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new Mi,this.Kc=new Oi,this.ed=new oe,this.Qa=new ci,this.Ic=this.$c=this.Aa=0,this.D=new Nt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,M),this.ia=0,this.pb=a(4,it),this.Pa=new Qo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bt),this.Hd=0,this.rb=Array(new tt),this.sb=0,this.wa=Array(new Ue),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ut),this.L=this.aa=0,this.gd=o([4,2],Ue),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zt(h,m){return 0>h?0:h>m?m:h}function wr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pr(){var h=new or;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Nh||(Nh=ds)),h}function Xt(h,m,b){return h.a==0&&(h.a=m,h.sc=b,h.cb=0),0}function Nn(h,m,b){return 3<=b&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function fn(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return Xt(h,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,F=m.w,V=m.ha;if(4>V)return Xt(h,7,"Truncated header.");var z=b[F+0]|b[F+1]<<8|b[F+2]<<16,$=h.Od;if($.Rb=!(1&z),$.td=z>>1&7,$.yd=z>>4&1,$.ub=z>>5,3<$.td)return Xt(h,3,"Incorrect keyframe parameters.");if(!$.yd)return Xt(h,4,"Frame not displayable.");F+=3,V-=3;var W=h.Kc;if($.Rb){if(7>V)return Xt(h,7,"cannot parse picture header");if(!Nn(b,F,V))return Xt(h,3,"Bad code word");W.c=16383&(b[F+4]<<8|b[F+3]),W.Td=b[F+4]>>6,W.i=16383&(b[F+6]<<8|b[F+5]),W.Ud=b[F+6]>>6,F+=7,V-=7,h.za=W.c+15>>4,h.Ub=W.i+15>>4,m.width=W.c,m.height=W.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,s((z=h.Pa).jb,0,255,z.jb.length),e((z=h.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,s(z.Zb,0,0,z.Zb.length),s(z.Lb,0,0,z.Lb)}if($.ub>V)return Xt(h,7,"bad partition length");Be(z=h.m,b,F,$.ub),F+=$.ub,V-=$.ub,$.Rb&&(W.Ld=pe(z),W.Kd=pe(z)),W=h.Qa;var X,te=h.Pa;if(e(z!=null),e(W!=null),W.Cb=pe(z),W.Cb){if(W.Bb=pe(z),pe(z)){for(W.Fb=pe(z),X=0;4>X;++X)W.Zb[X]=pe(z)?se(z,7):0;for(X=0;4>X;++X)W.Lb[X]=pe(z)?se(z,6):0}if(W.Bb)for(X=0;3>X;++X)te.jb[X]=pe(z)?_e(z,8):255}else W.Bb=0;if(z.Ka)return Xt(h,3,"cannot parse segment header");if((W=h.ed).zd=pe(z),W.Tb=_e(z,6),W.wb=_e(z,3),W.Pc=pe(z),W.Pc&&pe(z)){for(te=0;4>te;++te)pe(z)&&(W.vd[te]=se(z,6));for(te=0;4>te;++te)pe(z)&&(W.od[te]=se(z,6))}if(h.L=W.Tb==0?0:W.zd?1:2,z.Ka)return Xt(h,3,"cannot parse filter header");var ye=V;if(V=X=F,F=X+ye,W=ye,h.Xb=(1<<_e(h.m,2))-1,ye<3*(te=h.Xb))b=7;else{for(X+=3*te,W-=3*te,ye=0;ye<te;++ye){var He=b[V+0]|b[V+1]<<8|b[V+2]<<16;He>W&&(He=W),Be(h.Jc[+ye],b,X,He),X+=He,W-=He,V+=3}Be(h.Jc[+te],b,X,W),b=X<F?0:5}if(b!=0)return Xt(h,b,"cannot parse partitions");for(b=_e(X=h.m,7),V=pe(X)?se(X,4):0,F=pe(X)?se(X,4):0,W=pe(X)?se(X,4):0,te=pe(X)?se(X,4):0,X=pe(X)?se(X,4):0,ye=h.Qa,He=0;4>He;++He){if(ye.Cb){var re=ye.Zb[He];ye.Fb||(re+=b)}else{if(0<He){h.pb[He]=h.pb[0];continue}re=b}var Ie=h.pb[He];Ie.Sc[0]=R1[Zt(re+V,127)],Ie.Sc[1]=P1[Zt(re+0,127)],Ie.Eb[0]=2*R1[Zt(re+F,127)],Ie.Eb[1]=101581*P1[Zt(re+W,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=R1[Zt(re+te,117)],Ie.Qc[1]=P1[Zt(re+X,127)],Ie.lc=re+X}if(!$.Rb)return Xt(h,4,"Not a key frame.");for(pe(z),$=h.Pa,b=0;4>b;++b){for(V=0;8>V;++V)for(F=0;3>F;++F)for(W=0;11>W;++W)te=Ee(z,E6[b][V][F][W])?_e(z,8):C6[b][V][F][W],$.Wc[b][V].Yb[F][W]=te;for(V=0;17>V;++V)$.Xc[b][V]=$.Wc[b][k6[V]]}return h.kc=pe(z),h.kc&&(h.Bd=_e(z,8)),h.cb=1}function ds(h,m,b,F,V,z,$){var W=m[V].Yb[b];for(b=0;16>V;++V){if(!Ee(h,W[b+0]))return V;for(;!Ee(h,W[b+1]);)if(W=m[++V].Yb[0],b=0,V==16)return 16;var X=m[V+1].Yb;if(Ee(h,W[b+2])){var te=h,ye=0;if(Ee(te,(re=W)[(He=b)+3]))if(Ee(te,re[He+6])){for(W=0,He=2*(ye=Ee(te,re[He+8]))+(re=Ee(te,re[He+9+ye])),ye=0,re=B6[He];re[W];++W)ye+=ye+Ee(te,re[W]);ye+=3+(8<<He)}else Ee(te,re[He+7])?(ye=7+2*Ee(te,165),ye+=Ee(te,145)):ye=5+Ee(te,159);else ye=Ee(te,re[He+4])?3+Ee(te,re[He+5]):2;W=X[2]}else ye=1,W=X[1];X=$+_6[V],0>(te=h).b&&Ae(te);var He,re=te.b,Ie=(He=te.Ca>>1)-(te.I>>re)>>31;--te.b,te.Ca+=Ie,te.Ca|=1,te.I-=(He+1&Ie)<<re,z[X]=((ye^Ie)-Ie)*F[(0<V)+0]}return 16}function _i(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,s(h.zc,0,0,h.zc.length),h.ja=0}function pn(h,m,b,F,V){V=h[m+b+32*F]+(V>>3),h[m+b+32*F]=-256&V?0>V?0:255:V}function Jt(h,m,b,F,V,z){pn(h,m,0,b,F+V),pn(h,m,1,b,F+z),pn(h,m,2,b,F-z),pn(h,m,3,b,F-V)}function gn(h){return(20091*h>>16)+h}function ui(h,m,b,F){var V,z=0,$=i(16);for(V=0;4>V;++V){var W=h[m+0]+h[m+8],X=h[m+0]-h[m+8],te=(35468*h[m+4]>>16)-gn(h[m+12]),ye=gn(h[m+4])+(35468*h[m+12]>>16);$[z+0]=W+ye,$[z+1]=X+te,$[z+2]=X-te,$[z+3]=W-ye,z+=4,m++}for(V=z=0;4>V;++V)W=(h=$[z+0]+4)+$[z+8],X=h-$[z+8],te=(35468*$[z+4]>>16)-gn($[z+12]),pn(b,F,0,0,W+(ye=gn($[z+4])+(35468*$[z+12]>>16))),pn(b,F,1,0,X+te),pn(b,F,2,0,X-te),pn(b,F,3,0,W-ye),z++,F+=32}function di(h,m,b,F){var V=h[m+0]+4,z=35468*h[m+4]>>16,$=gn(h[m+4]),W=35468*h[m+1]>>16;Jt(b,F,0,V+$,h=gn(h[m+1]),W),Jt(b,F,1,V+z,h,W),Jt(b,F,2,V-z,h,W),Jt(b,F,3,V-$,h,W)}function so(h,m,b,F,V){ui(h,m,b,F),V&&ui(h,m+16,b,F+4)}function fr(h,m,b,F){fc(h,m+0,b,F,1),fc(h,m+32,b,F+128,1)}function ja(h,m,b,F){var V;for(h=h[m+0]+4,V=0;4>V;++V)for(m=0;4>m;++m)pn(b,F,m,V,h)}function ua(h,m,b,F){h[m+0]&&Or(h,m+0,b,F),h[m+16]&&Or(h,m+16,b,F+4),h[m+32]&&Or(h,m+32,b,F+128),h[m+48]&&Or(h,m+48,b,F+128+4)}function hi(h,m,b,F){var V,z=i(16);for(V=0;4>V;++V){var $=h[m+0+V]+h[m+12+V],W=h[m+4+V]+h[m+8+V],X=h[m+4+V]-h[m+8+V],te=h[m+0+V]-h[m+12+V];z[0+V]=$+W,z[8+V]=$-W,z[4+V]=te+X,z[12+V]=te-X}for(V=0;4>V;++V)$=(h=z[0+4*V]+3)+z[3+4*V],W=z[1+4*V]+z[2+4*V],X=z[1+4*V]-z[2+4*V],te=h-z[3+4*V],b[F+0]=$+W>>3,b[F+16]=te+X>>3,b[F+32]=$-W>>3,b[F+48]=te-X>>3,F+=64}function da(h,m,b){var F,V=m-32,z=$i,$=255-h[V-1];for(F=0;F<b;++F){var W,X=z,te=$+h[m-1];for(W=0;W<b;++W)h[m+W]=X[te+h[V+W]];m+=32}}function jo(h,m){da(h,m,4)}function Hi(h,m){da(h,m,8)}function gh(h,m){da(h,m,16)}function oc(h,m){var b;for(b=0;16>b;++b)n(h,m+32*b,h,m-32,16)}function fu(h,m){var b;for(b=16;0<b;--b)s(h,m,h[m-1],16),m+=32}function Us(h,m,b){var F;for(F=0;16>F;++F)s(m,b+32*F,h,16)}function ha(h,m){var b,F=16;for(b=0;16>b;++b)F+=h[m-1+32*b]+h[m+b-32];Us(F>>5,h,m)}function io(h,m){var b,F=8;for(b=0;16>b;++b)F+=h[m-1+32*b];Us(F>>4,h,m)}function IA(h,m){var b,F=8;for(b=0;16>b;++b)F+=h[m+b-32];Us(F>>4,h,m)}function pu(h,m){Us(128,h,m)}function Yt(h,m,b){return h+2*m+b+2>>2}function mh(h,m){var b,F=m-32;for(F=new Uint8Array([Yt(h[F-1],h[F+0],h[F+1]),Yt(h[F+0],h[F+1],h[F+2]),Yt(h[F+1],h[F+2],h[F+3]),Yt(h[F+2],h[F+3],h[F+4])]),b=0;4>b;++b)n(h,m+32*b,F,0,F.length)}function wh(h,m){var b=h[m-1],F=h[m-1+32],V=h[m-1+64],z=h[m-1+96];Oe(h,m+0,16843009*Yt(h[m-1-32],b,F)),Oe(h,m+32,16843009*Yt(b,F,V)),Oe(h,m+64,16843009*Yt(F,V,z)),Oe(h,m+96,16843009*Yt(V,z,z))}function xh(h,m){var b,F=4;for(b=0;4>b;++b)F+=h[m+b-32]+h[m-1+32*b];for(F>>=3,b=0;4>b;++b)s(h,m+32*b,F,4)}function bs(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],z=h[m-1-32],$=h[m+0-32],W=h[m+1-32],X=h[m+2-32],te=h[m+3-32];h[m+0+96]=Yt(F,V,h[m-1+96]),h[m+1+96]=h[m+0+64]=Yt(b,F,V),h[m+2+96]=h[m+1+64]=h[m+0+32]=Yt(z,b,F),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=Yt($,z,b),h[m+3+64]=h[m+2+32]=h[m+1+0]=Yt(W,$,z),h[m+3+32]=h[m+2+0]=Yt(X,W,$),h[m+3+0]=Yt(te,X,W)}function Ra(h,m){var b=h[m+1-32],F=h[m+2-32],V=h[m+3-32],z=h[m+4-32],$=h[m+5-32],W=h[m+6-32],X=h[m+7-32];h[m+0+0]=Yt(h[m+0-32],b,F),h[m+1+0]=h[m+0+32]=Yt(b,F,V),h[m+2+0]=h[m+1+32]=h[m+0+64]=Yt(F,V,z),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=Yt(V,z,$),h[m+3+32]=h[m+2+64]=h[m+1+96]=Yt(z,$,W),h[m+3+64]=h[m+2+96]=Yt($,W,X),h[m+3+96]=Yt(W,X,X)}function vh(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],z=h[m-1-32],$=h[m+0-32],W=h[m+1-32],X=h[m+2-32],te=h[m+3-32];h[m+0+0]=h[m+1+64]=z+$+1>>1,h[m+1+0]=h[m+2+64]=$+W+1>>1,h[m+2+0]=h[m+3+64]=W+X+1>>1,h[m+3+0]=X+te+1>>1,h[m+0+96]=Yt(V,F,b),h[m+0+64]=Yt(F,b,z),h[m+0+32]=h[m+1+96]=Yt(b,z,$),h[m+1+32]=h[m+2+96]=Yt(z,$,W),h[m+2+32]=h[m+3+96]=Yt($,W,X),h[m+3+32]=Yt(W,X,te)}function EA(h,m){var b=h[m+0-32],F=h[m+1-32],V=h[m+2-32],z=h[m+3-32],$=h[m+4-32],W=h[m+5-32],X=h[m+6-32],te=h[m+7-32];h[m+0+0]=b+F+1>>1,h[m+1+0]=h[m+0+64]=F+V+1>>1,h[m+2+0]=h[m+1+64]=V+z+1>>1,h[m+3+0]=h[m+2+64]=z+$+1>>1,h[m+0+32]=Yt(b,F,V),h[m+1+32]=h[m+0+96]=Yt(F,V,z),h[m+2+32]=h[m+1+96]=Yt(V,z,$),h[m+3+32]=h[m+2+96]=Yt(z,$,W),h[m+3+64]=Yt($,W,X),h[m+3+96]=Yt(W,X,te)}function Pa(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],z=h[m-1+96];h[m+0+0]=b+F+1>>1,h[m+2+0]=h[m+0+32]=F+V+1>>1,h[m+2+32]=h[m+0+64]=V+z+1>>1,h[m+1+0]=Yt(b,F,V),h[m+3+0]=h[m+1+32]=Yt(F,V,z),h[m+3+32]=h[m+1+64]=Yt(V,z,z),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=z}function kA(h,m){var b=h[m-1+0],F=h[m-1+32],V=h[m-1+64],z=h[m-1+96],$=h[m-1-32],W=h[m+0-32],X=h[m+1-32],te=h[m+2-32];h[m+0+0]=h[m+2+32]=b+$+1>>1,h[m+0+32]=h[m+2+64]=F+b+1>>1,h[m+0+64]=h[m+2+96]=V+F+1>>1,h[m+0+96]=z+V+1>>1,h[m+3+0]=Yt(W,X,te),h[m+2+0]=Yt($,W,X),h[m+1+0]=h[m+3+32]=Yt(b,$,W),h[m+1+32]=h[m+3+64]=Yt(F,b,$),h[m+1+64]=h[m+3+96]=Yt(V,F,b),h[m+1+96]=Yt(z,V,F)}function Vi(h,m){var b;for(b=0;8>b;++b)n(h,m+32*b,h,m-32,8)}function Ro(h,m){var b;for(b=0;8>b;++b)s(h,m,h[m-1],8),m+=32}function fa(h,m,b){var F;for(F=0;8>F;++F)s(m,b+32*F,h,8)}function Ac(h,m){var b,F=8;for(b=0;8>b;++b)F+=h[m+b-32]+h[m-1+32*b];fa(F>>4,h,m)}function Yr(h,m){var b,F=4;for(b=0;8>b;++b)F+=h[m+b-32];fa(F>>3,h,m)}function lc(h,m){var b,F=4;for(b=0;8>b;++b)F+=h[m-1+32*b];fa(F>>3,h,m)}function gu(h,m){fa(128,h,m)}function pa(h,m,b){var F=h[m-b],V=h[m+0],z=3*(V-F)+T1[1020+h[m-2*b]-h[m+b]],$=c0[112+(z+4>>3)];h[m-b]=$i[255+F+c0[112+(z+3>>3)]],h[m+0]=$i[255+V-$]}function SA(h,m,b,F){var V=h[m+0],z=h[m+b];return ya[255+h[m-2*b]-h[m-b]]>F||ya[255+z-V]>F}function Po(h,m,b,F){return 4*ya[255+h[m-b]-h[m+0]]+ya[255+h[m-2*b]-h[m+b]]<=F}function ao(h,m,b,F,V){var z=h[m-3*b],$=h[m-2*b],W=h[m-b],X=h[m+0],te=h[m+b],ye=h[m+2*b],He=h[m+3*b];return 4*ya[255+W-X]+ya[255+$-te]>F?0:ya[255+h[m-4*b]-z]<=V&&ya[255+z-$]<=V&&ya[255+$-W]<=V&&ya[255+He-ye]<=V&&ya[255+ye-te]<=V&&ya[255+te-X]<=V}function oo(h,m,b,F){var V=2*F+1;for(F=0;16>F;++F)Po(h,m+F,b,V)&&pa(h,m+F,b)}function fi(h,m,b,F){var V=2*F+1;for(F=0;16>F;++F)Po(h,m+F*b,1,V)&&pa(h,m+F*b,1)}function cc(h,m,b,F){var V;for(V=3;0<V;--V)oo(h,m+=4*b,b,F)}function mu(h,m,b,F){var V;for(V=3;0<V;--V)fi(h,m+=4,b,F)}function pi(h,m,b,F,V,z,$,W){for(z=2*z+1;0<V--;){if(ao(h,m,b,z,$))if(SA(h,m,b,W))pa(h,m,b);else{var X=h,te=m,ye=b,He=X[te-2*ye],re=X[te-ye],Ie=X[te+0],Le=X[te+ye],We=X[te+2*ye],De=27*(et=T1[1020+3*(Ie-re)+T1[1020+He-Le]])+63>>7,Ye=18*et+63>>7,et=9*et+63>>7;X[te-3*ye]=$i[255+X[te-3*ye]+et],X[te-2*ye]=$i[255+He+Ye],X[te-ye]=$i[255+re+De],X[te+0]=$i[255+Ie-De],X[te+ye]=$i[255+Le-Ye],X[te+2*ye]=$i[255+We-et]}m+=F}}function ga(h,m,b,F,V,z,$,W){for(z=2*z+1;0<V--;){if(ao(h,m,b,z,$))if(SA(h,m,b,W))pa(h,m,b);else{var X=h,te=m,ye=b,He=X[te-ye],re=X[te+0],Ie=X[te+ye],Le=c0[112+(4+(We=3*(re-He))>>3)],We=c0[112+(We+3>>3)],De=Le+1>>1;X[te-2*ye]=$i[255+X[te-2*ye]+De],X[te-ye]=$i[255+He+We],X[te+0]=$i[255+re-Le],X[te+ye]=$i[255+Ie-De]}m+=F}}function NA(h,m,b,F,V,z){pi(h,m,b,1,16,F,V,z)}function ma(h,m,b,F,V,z){pi(h,m,1,b,16,F,V,z)}function uc(h,m,b,F,V,z){var $;for($=3;0<$;--$)ga(h,m+=4*b,b,1,16,F,V,z)}function w(h,m,b,F,V,z){var $;for($=3;0<$;--$)ga(h,m+=4,1,b,16,F,V,z)}function O(h,m,b,F,V,z,$,W){pi(h,m,V,1,8,z,$,W),pi(b,F,V,1,8,z,$,W)}function ee(h,m,b,F,V,z,$,W){pi(h,m,1,V,8,z,$,W),pi(b,F,1,V,8,z,$,W)}function fe(h,m,b,F,V,z,$,W){ga(h,m+4*V,V,1,8,z,$,W),ga(b,F+4*V,V,1,8,z,$,W)}function Ne(h,m,b,F,V,z,$,W){ga(h,m+4,1,V,8,z,$,W),ga(b,F+4,1,V,8,z,$,W)}function Xe(){this.ba=new Ot,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function at(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vt(){this.ua=0,this.Wa=new Me,this.vb=new Me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new xe,this.yc=new T}function er(){this.xb=this.a=0,this.l=new wr,this.ca=new Ot,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vt,this.ab=0,this.gc=a(4,jt),this.Oc=0}function ar(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vr(h,m,b,F,V,z,$){for(h=h==null?0:h[m+0],m=0;m<$;++m)V[z+m]=h+b[F+m]&255,h=V[z+m]}function Dr(h,m,b,F,V,z,$){var W;if(h==null)vr(null,null,b,F,V,z,$);else for(W=0;W<$;++W)V[z+W]=h[m+W]+b[F+W]&255}function Fn(h,m,b,F,V,z,$){if(h==null)vr(null,null,b,F,V,z,$);else{var W,X=h[m+0],te=X,ye=X;for(W=0;W<$;++W)te=ye+(X=h[m+W])-te,ye=b[F+W]+(-256&te?0>te?0:255:te)&255,te=X,V[z+W]=ye}}function Kr(h,m,b,F){var V=m.width,z=m.o;if(e(h!=null&&m!=null),0>b||0>=F||b+F>z)return null;if(!h.Cc){if(h.ga==null){var $;if(h.ga=new ar,($=h.ga==null)||($=m.width*m.o,e(h.Gb.length==0),h.Gb=i($),h.Uc=0,h.Gb==null?$=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,$=1),$=!$),!$){$=h.ga;var W=h.Fa,X=h.P,te=h.qc,ye=h.mb,He=h.nb,re=X+1,Ie=te-1,Le=$.l;if(e(W!=null&&ye!=null&&m!=null),DA[0]=null,DA[1]=vr,DA[2]=Dr,DA[3]=Fn,$.ca=ye,$.tb=He,$.c=m.width,$.i=m.height,e(0<$.c&&0<$.i),1>=te)m=0;else if($.$a=3&W[X+0],$.Z=W[X+0]>>2&3,$.Lc=W[X+0]>>4&3,X=W[X+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||X)m=0;else if(Le.put=Qt,Le.ac=tr,Le.bc=kr,Le.ma=$,Le.width=m.width,Le.height=m.height,Le.Da=m.Da,Le.v=m.v,Le.va=m.va,Le.j=m.j,Le.o=m.o,$.$a)e:{e($.$a==1),m=ir();t:for(;;){if(m==null){m=0;break e}if(e($!=null),$.mc=m,m.c=$.c,m.i=$.i,m.l=$.l,m.l.ma=$,m.l.width=$.c,m.l.height=$.i,m.a=0,me(m.m,W,re,Ie),!Mr($.c,$.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&mt(m.s)?($.ic=1,W=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i(W),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):($.ic=0,m=Cr(m,$.c)),!m))break t;m=1;break e}$.mc=null,m=0}else m=Ie>=$.c*$.i;$=!m}if($)return null;h.ga.Lc!=1?h.Ga=0:F=z-b}e(h.ga!=null),e(b+F<=z);e:{if(m=(W=h.ga).c,z=W.l.o,W.$a==0){if(re=h.rc,Ie=h.Vc,Le=h.Fa,X=h.P+1+b*m,te=h.mb,ye=h.nb+b*m,e(X<=h.P+h.qc),W.Z!=0)for(e(DA[W.Z]!=null),$=0;$<F;++$)DA[W.Z](re,Ie,Le,X,te,ye,m),re=te,Ie=ye,ye+=m,X+=m;else for($=0;$<F;++$)n(te,ye,Le,X,m),re=te,Ie=ye,ye+=m,X+=m;h.rc=re,h.Vc=Ie}else{if(e(W.mc!=null),m=b+F,e(($=W.mc)!=null),e(m<=$.i),$.C>=m)m=1;else if(W.ic||Ci(),W.ic){W=$.V,re=$.Ba,Ie=$.c;var We=$.i,De=(Le=1,X=$.$/Ie,te=$.$%Ie,ye=$.m,He=$.s,$.$),Ye=Ie*We,et=Ie*m,dt=He.wc,At=De<et?ie(He,te,X):null;e(De<=Ye),e(m<=We),e(mt(He));t:for(;;){for(;!ye.h&&De<et;){if(te&dt||(At=ie(He,te,X)),e(At!=null),de(ye),256>(We=pr(At.G[0],At.H[0],ye)))W[re+De]=We,++De,++te>=Ie&&(te=0,++X<=m&&!(X%16)&&nt($,X));else{if(!(280>We)){Le=0;break t}We=nn(We-256,ye);var $t,Pt=pr(At.G[4],At.H[4],ye);if(de(ye),!(De>=(Pt=Rr(Ie,Pt=nn(Pt,ye)))&&Ye-De>=We)){Le=0;break t}for($t=0;$t<We;++$t)W[re+De+$t]=W[re+De+$t-Pt];for(De+=We,te+=We;te>=Ie;)te-=Ie,++X<=m&&!(X%16)&&nt($,X);De<et&&te&dt&&(At=ie(He,te,X))}e(ye.h==Z(ye))}nt($,X>m?m:X);break t}!Le||ye.h&&De<Ye?(Le=0,$.a=ye.h?5:3):$.$=De,m=Le}else m=xt($,$.V,$.Ba,$.c,$.i,m,Ts);if(!m){F=0;break e}}b+F>=z&&(h.Cc=1),F=1}if(!F)return null;if(h.Cc&&((F=h.ga)!=null&&(F.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*V}function Mn(h,m,b,F,V,z){for(;0<V--;){var $,W=h,X=m+(b?1:0),te=h,ye=m+(b?0:3);for($=0;$<F;++$){var He=te[ye+4*$];He!=255&&(He*=32897,W[X+4*$+0]=W[X+4*$+0]*He>>23,W[X+4*$+1]=W[X+4*$+1]*He>>23,W[X+4*$+2]=W[X+4*$+2]*He>>23)}m+=z}}function Tn(h,m,b,F,V){for(;0<F--;){var z;for(z=0;z<b;++z){var $=h[m+2*z+0],W=15&(te=h[m+2*z+1]),X=4369*W,te=(240&te|te>>4)*X>>16;h[m+2*z+0]=(240&$|$>>4)*X>>16&240|(15&$|$<<4)*X>>16>>4&15,h[m+2*z+1]=240&te|W}m+=V}}function On(h,m,b,F,V,z,$,W){var X,te,ye=255;for(te=0;te<V;++te){for(X=0;X<F;++X){var He=h[m+X];z[$+4*X]=He,ye&=He}m+=b,$+=W}return ye!=255}function Un(h,m,b,F,V){var z;for(z=0;z<V;++z)b[F+z]=h[m+z]>>8}function Ci(){Sh=Mn,i5=Tn,a5=On,o5=Un}function wa(h,m,b){B[h]=function(F,V,z,$,W,X,te,ye,He,re,Ie,Le,We,De,Ye,et,dt){var At,$t=dt-1>>1,Pt=W[X+0]|te[ye+0]<<16,dr=He[re+0]|Ie[Le+0]<<16;e(F!=null);var Kt=3*Pt+dr+131074>>2;for(m(F[V+0],255&Kt,Kt>>16,We,De),z!=null&&(Kt=3*dr+Pt+131074>>2,m(z[$+0],255&Kt,Kt>>16,Ye,et)),At=1;At<=$t;++At){var Er=W[X+At]|te[ye+At]<<16,fs=He[re+At]|Ie[Le+At]<<16,hr=Pt+Er+dr+fs+524296,zt=hr+2*(Er+dr)>>3;Kt=zt+Pt>>1,Pt=(hr=hr+2*(Pt+fs)>>3)+Er>>1,m(F[V+2*At-1],255&Kt,Kt>>16,We,De+(2*At-1)*b),m(F[V+2*At-0],255&Pt,Pt>>16,We,De+(2*At-0)*b),z!=null&&(Kt=hr+dr>>1,Pt=zt+fs>>1,m(z[$+2*At-1],255&Kt,Kt>>16,Ye,et+(2*At-1)*b),m(z[$+2*At+0],255&Pt,Pt>>16,Ye,et+(2*At+0)*b)),Pt=Er,dr=fs}1&dt||(Kt=3*Pt+dr+131074>>2,m(F[V+dt-1],255&Kt,Kt>>16,We,De+(dt-1)*b),z!=null&&(Kt=3*dr+Pt+131074>>2,m(z[$+dt-1],255&Kt,Kt>>16,Ye,et+(dt-1)*b)))}}function xa(){ba[u0]=N6,ba[d0]=w5,ba[h5]=F6,ba[h0]=x5,ba[f0]=v5,ba[U1]=y5,ba[f5]=T6,ba[L1]=w5,ba[Q1]=x5,ba[p0]=v5,ba[j1]=y5}function f(h){return h&-16384?0>h?0:255:h>>U6}function C(h,m){return f((19077*h>>8)+(26149*m>>8)-14234)}function j(h,m,b){return f((19077*h>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function J(h,m){return f((19077*h>>8)+(33050*m>>8)-17685)}function Fe(h,m,b,F,V){F[V+0]=C(h,b),F[V+1]=j(h,m,b),F[V+2]=J(h,m)}function Ve(h,m,b,F,V){F[V+0]=J(h,m),F[V+1]=j(h,m,b),F[V+2]=C(h,b)}function wt(h,m,b,F,V){var z=j(h,m,b);m=z<<3&224|J(h,m)>>3,F[V+0]=248&C(h,b)|z>>5,F[V+1]=m}function Ir(h,m,b,F,V){var z=240&J(h,m)|15;F[V+0]=240&C(h,b)|j(h,m,b)>>4,F[V+1]=z}function Ln(h,m,b,F,V){F[V+0]=255,Fe(h,m,b,F,V+1)}function gr(h,m,b,F,V){Ve(h,m,b,F,V),F[V+3]=255}function Qr(h,m,b,F,V){Fe(h,m,b,F,V),F[V+3]=255}function ln(h,m,b){B[h]=function(F,V,z,$,W,X,te,ye,He){for(var re=ye+(-2&He)*b;ye!=re;)m(F[V+0],z[$+0],W[X+0],te,ye),m(F[V+1],z[$+0],W[X+0],te,ye+b),V+=2,++$,++X,ye+=2*b;1&He&&m(F[V+0],z[$+0],W[X+0],te,ye)}}function Ki(h,m,b){return b==0?h==0?m==0?6:5:m==0?4:0:b}function Gs(h,m,b,F,V){switch(h>>>30){case 3:fc(m,b,F,V,0);break;case 2:va(m,b,F,V);break;case 1:Or(m,b,F,V)}}function Ls(h,m){var b,F,V=m.M,z=m.Nb,$=h.oc,W=h.pc+40,X=h.oc,te=h.pc+584,ye=h.oc,He=h.pc+600;for(b=0;16>b;++b)$[W+32*b-1]=129;for(b=0;8>b;++b)X[te+32*b-1]=129,ye[He+32*b-1]=129;for(0<V?$[W-1-32]=X[te-1-32]=ye[He-1-32]=129:(s($,W-32-1,127,21),s(X,te-32-1,127,9),s(ye,He-32-1,127,9)),F=0;F<h.za;++F){var re=m.ya[m.aa+F];if(0<F){for(b=-1;16>b;++b)n($,W+32*b-4,$,W+32*b+12,4);for(b=-1;8>b;++b)n(X,te+32*b-4,X,te+32*b+4,4),n(ye,He+32*b-4,ye,He+32*b+4,4)}var Ie=h.Gd,Le=h.Hd+F,We=re.ad,De=re.Hc;if(0<V&&(n($,W-32,Ie[Le].y,0,16),n(X,te-32,Ie[Le].f,0,8),n(ye,He-32,Ie[Le].ea,0,8)),re.Za){var Ye=$,et=W-32+16;for(0<V&&(F>=h.za-1?s(Ye,et,Ie[Le].y[15],4):n(Ye,et,Ie[Le+1].y,0,4)),b=0;4>b;b++)Ye[et+128+b]=Ye[et+256+b]=Ye[et+384+b]=Ye[et+0+b];for(b=0;16>b;++b,De<<=2)Ye=$,et=W+B5[b],Ma[re.Ob[b]](Ye,et),Gs(De,We,16*+b,Ye,et)}else if(Ye=Ki(F,V,re.Ob[0]),PA[Ye]($,W),De!=0)for(b=0;16>b;++b,De<<=2)Gs(De,We,16*+b,$,W+B5[b]);for(b=re.Gc,Ye=Ki(F,V,re.Dd),Oo[Ye](X,te),Oo[Ye](ye,He),De=We,Ye=X,et=te,255&(re=0|b)&&(170&re?co(De,256,Ye,et):sn(De,256,Ye,et)),re=ye,De=He,255&(b>>=8)&&(170&b?co(We,320,re,De):sn(We,320,re,De)),V<h.Ub-1&&(n(Ie[Le].y,0,$,W+480,16),n(Ie[Le].f,0,X,te+224,8),n(Ie[Le].ea,0,ye,He+224,8)),b=8*z*h.B,Ie=h.sa,Le=h.ta+16*F+16*z*h.R,We=h.qa,re=h.ra+8*F+b,De=h.Ha,Ye=h.Ia+8*F+b,b=0;16>b;++b)n(Ie,Le+b*h.R,$,W+32*b,16);for(b=0;8>b;++b)n(We,re+b*h.B,X,te+32*b,8),n(De,Ye+b*h.B,ye,He+32*b,8)}}function Da(h,m,b,F,V,z,$,W,X){var te=[0],ye=[0],He=0,re=X!=null?X.kd:0,Ie=X??new at;if(h==null||12>b)return 7;Ie.data=h,Ie.w=m,Ie.ha=b,m=[m],b=[b],Ie.gb=[Ie.gb];e:{var Le=m,We=b,De=Ie.gb;if(e(h!=null),e(We!=null),e(De!=null),De[0]=0,12<=We[0]&&!r(h,Le[0],"RIFF")){if(r(h,Le[0]+8,"WEBP")){De=3;break e}var Ye=ce(h,Le[0]+4);if(12>Ye||4294967286<Ye){De=3;break e}if(re&&Ye>We[0]-8){De=7;break e}De[0]=Ye,Le[0]+=12,We[0]-=12}De=0}if(De!=0)return De;for(Ye=0<Ie.gb[0],b=b[0];;){e:{var et=h;We=m,De=b;var dt=te,At=ye,$t=Le=[0];if((Kt=He=[He])[0]=0,8>De[0])De=7;else{if(!r(et,We[0],"VP8X")){if(ce(et,We[0]+4)!=10){De=3;break e}if(18>De[0]){De=7;break e}var Pt=ce(et,We[0]+8),dr=1+ke(et,We[0]+12);if(2147483648<=dr*(et=1+ke(et,We[0]+15))){De=3;break e}$t!=null&&($t[0]=Pt),dt!=null&&(dt[0]=dr),At!=null&&(At[0]=et),We[0]+=18,De[0]-=18,Kt[0]=1}De=0}}if(He=He[0],Le=Le[0],De!=0)return De;if(We=!!(2&Le),!Ye&&He)return 3;if(z!=null&&(z[0]=!!(16&Le)),$!=null&&($[0]=We),W!=null&&(W[0]=0),$=te[0],Le=ye[0],He&&We&&X==null){De=0;break}if(4>b){De=7;break}if(Ye&&He||!Ye&&!He&&!r(h,m[0],"ALPH")){b=[b],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{Pt=h,De=m,Ye=b;var Kt=Ie.gb;dt=Ie.na,At=Ie.P,$t=Ie.Sa,dr=22,e(Pt!=null),e(Ye!=null),et=De[0];var Er=Ye[0];for(e(dt!=null),e($t!=null),dt[0]=null,At[0]=null,$t[0]=0;;){if(De[0]=et,Ye[0]=Er,8>Er){De=7;break e}var fs=ce(Pt,et+4);if(4294967286<fs){De=3;break e}var hr=8+fs+1&-2;if(dr+=hr,0<Kt&&dr>Kt){De=3;break e}if(!r(Pt,et,"VP8 ")||!r(Pt,et,"VP8L")){De=0;break e}if(Er[0]<hr){De=7;break e}r(Pt,et,"ALPH")||(dt[0]=Pt,At[0]=et+8,$t[0]=fs),et+=hr,Er-=hr}}if(b=b[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],De!=0)break}b=[b],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(Kt=h,De=m,Ye=b,dt=Ie.gb[0],At=Ie.Ja,$t=Ie.xa,Pt=De[0],et=!r(Kt,Pt,"VP8 "),dr=!r(Kt,Pt,"VP8L"),e(Kt!=null),e(Ye!=null),e(At!=null),e($t!=null),8>Ye[0])De=7;else{if(et||dr){if(Kt=ce(Kt,Pt+4),12<=dt&&Kt>dt-12){De=3;break e}if(re&&Kt>Ye[0]-8){De=7;break e}At[0]=Kt,De[0]+=8,Ye[0]-=8,$t[0]=dr}else $t[0]=5<=Ye[0]&&Kt[Pt+0]==47&&!(Kt[Pt+4]>>5),At[0]=Ye[0];De=0}if(b=b[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],m=m[0],De!=0)break;if(4294967286<Ie.Ja)return 3;if(W==null||We||(W[0]=Ie.xa?2:1),$=[$],Le=[Le],Ie.xa){if(5>b){De=7;break}W=$,re=Le,We=z,h==null||5>b?h=0:5<=b&&h[m+0]==47&&!(h[m+4]>>5)?(Ye=[0],Kt=[0],dt=[0],me(At=new H,h,m,b),us(At,Ye,Kt,dt)?(W!=null&&(W[0]=Ye[0]),re!=null&&(re[0]=Kt[0]),We!=null&&(We[0]=dt[0]),h=1):h=0):h=0}else{if(10>b){De=7;break}W=Le,h==null||10>b||!Nn(h,m+3,b-3)?h=0:(re=h[m+0]|h[m+1]<<8|h[m+2]<<16,We=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=Ie.Ja||!We||!h?h=0:($&&($[0]=We),W&&(W[0]=h),h=1))}if(!h||($=$[0],Le=Le[0],He&&(te[0]!=$||ye[0]!=Le)))return 3;X!=null&&(X[0]=Ie,X.offset=m-X.w,e(4294967286>m-X.w),e(X.offset==X.ha-b));break}return De==0||De==7&&He&&X==null?(z!=null&&(z[0]|=Ie.na!=null&&0<Ie.na.length),F!=null&&(F[0]=$),V!=null&&(V[0]=Le),0):De}function yh(h,m,b){var F=m.width,V=m.height,z=0,$=0,W=F,X=V;if(m.Da=h!=null&&0<h.Da,m.Da&&(W=h.cd,X=h.bd,z=h.v,$=h.j,11>b||(z&=-2,$&=-2),0>z||0>$||0>=W||0>=X||z+W>F||$+X>V))return 0;if(m.v=z,m.j=$,m.va=z+W,m.o=$+X,m.U=W,m.T=X,m.da=h!=null&&0<h.da,m.da){if(!st(W,X,b=[h.ib],z=[h.hb]))return 0;m.ib=b[0],m.hb=z[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*F/4&&m.hb<3*V/4,m.Kb=0),1}function bh(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function FA(h,m,b,F){if(F==null||0>=h||0>=m)return 2;if(b!=null){if(b.Da){var V=b.cd,z=b.bd,$=-2&b.v,W=-2&b.j;if(0>$||0>W||0>=V||0>=z||$+V>h||W+z>m)return 2;h=V,m=z}if(b.da){if(!st(h,m,V=[b.ib],z=[b.hb]))return 2;h=V[0],m=z[0]}}F.width=h,F.height=m;e:{var X=F.width,te=F.height;if(h=F.S,0>=X||0>=te||!(h>=u0&&13>h))h=2;else{if(0>=F.Rd&&F.sd==null){$=z=V=m=0;var ye=(W=X*_5[h])*te;if(11>h||(z=(te+1)/2*(m=(X+1)/2),h==12&&($=(V=X)*te)),(te=i(ye+2*z+$))==null){h=1;break e}F.sd=te,11>h?((X=F.f.RGBA).eb=te,X.fb=0,X.A=W,X.size=ye):((X=F.f.kb).y=te,X.O=0,X.fa=W,X.Fd=ye,X.f=te,X.N=0+ye,X.Ab=m,X.Cd=z,X.ea=te,X.W=0+ye+z,X.Db=m,X.Ed=z,h==12&&(X.F=te,X.J=0+ye+2*z),X.Tc=$,X.lb=V)}if(m=1,V=F.S,z=F.width,$=F.height,V>=u0&&13>V)if(11>V)h=F.f.RGBA,m&=(W=Math.abs(h.A))*($-1)+z<=h.size,m&=W>=z*_5[V],m&=h.eb!=null;else{h=F.f.kb,W=(z+1)/2,ye=($+1)/2,X=Math.abs(h.fa),te=Math.abs(h.Ab);var He=Math.abs(h.Db),re=Math.abs(h.lb),Ie=re*($-1)+z;m&=X*($-1)+z<=h.Fd,m&=te*(ye-1)+W<=h.Cd,m=(m&=He*(ye-1)+W<=h.Ed)&X>=z&te>=W&He>=W,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,V==12&&(m&=re>=z,m&=Ie<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||b!=null&&b.fd&&(h=bh(F)),h}var dc=64,zi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gi=24,TA=32,Do=8,UA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];we("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(h){return h},B.Predictor2=function(h,m,b){return m[b+0]},B.Predictor3=function(h,m,b){return m[b+1]},B.Predictor4=function(h,m,b){return m[b-1]},B.Predictor5=function(h,m,b){return je(je(h,m[b+1]),m[b+0])},B.Predictor6=function(h,m,b){return je(h,m[b-1])},B.Predictor7=function(h,m,b){return je(h,m[b+0])},B.Predictor8=function(h,m,b){return je(m[b-1],m[b+0])},B.Predictor9=function(h,m,b){return je(m[b+0],m[b+1])},B.Predictor10=function(h,m,b){return je(je(h,m[b-1]),je(m[b+0],m[b+1]))},B.Predictor11=function(h,m,b){var F=m[b+0];return 0>=ae(F>>24&255,h>>24&255,(m=m[b-1])>>24&255)+ae(F>>16&255,h>>16&255,m>>16&255)+ae(F>>8&255,h>>8&255,m>>8&255)+ae(255&F,255&h,255&m)?F:h},B.Predictor12=function(h,m,b){var F=m[b+0];return(q((h>>24&255)+(F>>24&255)-((m=m[b-1])>>24&255))<<24|q((h>>16&255)+(F>>16&255)-(m>>16&255))<<16|q((h>>8&255)+(F>>8&255)-(m>>8&255))<<8|q((255&h)+(255&F)-(255&m)))>>>0},B.Predictor13=function(h,m,b){var F=m[b-1];return(le((h=je(h,m[b+0]))>>24&255,F>>24&255)<<24|le(h>>16&255,F>>16&255)<<16|le(h>>8&255,F>>8&255)<<8|le(255&h,255&F))>>>0};var Bh=B.PredictorAdd0;B.PredictorAdd1=he,we("Predictor2","PredictorAdd2"),we("Predictor3","PredictorAdd3"),we("Predictor4","PredictorAdd4"),we("Predictor5","PredictorAdd5"),we("Predictor6","PredictorAdd6"),we("Predictor7","PredictorAdd7"),we("Predictor8","PredictorAdd8"),we("Predictor9","PredictorAdd9"),we("Predictor10","PredictorAdd10"),we("Predictor11","PredictorAdd11"),we("Predictor12","PredictorAdd12"),we("Predictor13","PredictorAdd13");var wu=B.PredictorAdd2;Ke("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Ke("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var $n,A0=B.ColorIndexInverseTransform,Ao=B.MapARGB,lo=B.VP8LColorIndexInverseTransformAlpha,_h=B.MapAlpha,Ch=B.VP8LPredictorsAdd=[];Ch.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Ih,Eh,LA,QA,jA,hc,RA,fc,va,co,Or,sn,qn,hs,Mo,kh,xu,l0,ZB,e5,t5,r5,n5,s5,Sh,i5,a5,o5,A5=i(511),l5=i(2041),c5=i(225),u5=i(767),d5=0,T1=l5,c0=c5,$i=u5,ya=A5,u0=0,d0=1,h5=2,h0=3,f0=4,U1=5,f5=6,L1=7,Q1=8,p0=9,j1=10,g6=[2,3,7],m6=[3,3,11],p5=[280,256,256,256,40],w6=[0,1,1,1,0],x6=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],v6=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],y6=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],b6=8,R1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],P1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Nh=null,B6=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_6=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],g5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],C6=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],I6=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],E6=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],k6=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],PA=[],Ma=[],Oo=[],S6=1,m5=2,DA=[],ba=[];wa("UpsampleRgbLinePair",Fe,3),wa("UpsampleBgrLinePair",Ve,3),wa("UpsampleRgbaLinePair",Qr,4),wa("UpsampleBgraLinePair",gr,4),wa("UpsampleArgbLinePair",Ln,4),wa("UpsampleRgba4444LinePair",Ir,2),wa("UpsampleRgb565LinePair",wt,2);var N6=B.UpsampleRgbLinePair,F6=B.UpsampleBgrLinePair,w5=B.UpsampleRgbaLinePair,x5=B.UpsampleBgraLinePair,v5=B.UpsampleArgbLinePair,y5=B.UpsampleRgba4444LinePair,T6=B.UpsampleRgb565LinePair,g0=16,m0=1<<g0-1,Fh=-227,D1=482,U6=6,b5=0,L6=i(256),Q6=i(256),j6=i(256),R6=i(256),P6=i(D1-Fh),D6=i(D1-Fh);ln("YuvToRgbRow",Fe,3),ln("YuvToBgrRow",Ve,3),ln("YuvToRgbaRow",Qr,4),ln("YuvToBgraRow",gr,4),ln("YuvToArgbRow",Ln,4),ln("YuvToRgba4444Row",Ir,2),ln("YuvToRgb565Row",wt,2);var B5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],w0=[0,2,8],M6=[8,7,6,4,4,2,2,2,1,1,1,1],O6=1;this.WebPDecodeRGBA=function(h,m,b,F,V){var z=d0,$=new Xe,W=new Ot;$.ba=W,W.S=z,W.width=[W.width],W.height=[W.height];var X=W.width,te=W.height,ye=new vt;if(ye==null||h==null)var He=2;else e(ye!=null),He=Da(h,m,b,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(He!=0?X=0:(X!=null&&(X[0]=ye.width[0]),te!=null&&(te[0]=ye.height[0]),X=1),X){W.width=W.width[0],W.height=W.height[0],F!=null&&(F[0]=W.width),V!=null&&(V[0]=W.height);e:{if(F=new wr,(V=new at).data=h,V.w=m,V.ha=b,V.kd=1,m=[0],e(V!=null),((h=Da(V.data,V.w,V.ha,null,null,null,m,null,V))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e($!=null),F.data=V.data,F.w=V.w+V.offset,F.ha=V.ha-V.offset,F.put=Qt,F.ac=tr,F.bc=kr,F.ma=$,V.xa){if((h=ir())==null){$=1;break e}if(function(re,Ie){var Le=[0],We=[0],De=[0];t:for(;;){if(re==null)return 0;if(Ie==null)return re.a=2,0;if(re.l=Ie,re.a=0,me(re.m,Ie.data,Ie.w,Ie.ha),!us(re.m,Le,We,De)){re.a=3;break t}if(re.xb=m5,Ie.width=Le[0],Ie.height=We[0],!Mr(Le[0],We[0],1,re,null))break t;return 1}return e(re.a!=0),0}(h,F)){if(F=(m=FA(F.width,F.height,$.Oa,$.ba))==0){t:{F=h;r:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((b=F.l)!=null),e((V=b.ma)!=null),F.xb!=0){if(F.ca=V.ba,F.tb=V.tb,e(F.ca!=null),!yh(V.Oa,b,h0)){F.a=2;break r}if(!Cr(F,b.width)||b.da)break r;if((b.da||_t(F.ca.S))&&Ci(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Ci()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!R(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!xt(F,F.V,F.Ba,F.c,F.i,b.o,yt))break r;V.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(m=h.a)}else m=h.a}else{if((h=new Pr)==null){$=1;break e}if(h.Fa=V.na,h.P=V.P,h.qc=V.Sa,fn(h,F)){if((m=FA(F.width,F.height,$.Oa,$.ba))==0){if(h.Aa=0,b=$.Oa,e((V=h)!=null),b!=null){if(0<(X=0>(X=b.Md)?0:100<X?255:255*X/100)){for(te=ye=0;4>te;++te)12>(He=V.pb[te]).lc&&(He.ia=X*M6[0>He.lc?0:He.lc]>>3),ye|=He.ia;ye&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=b.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(re,Ie){if(re==null)return 0;if(Ie==null)return Xt(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!fn(re,Ie))return 0;if(e(re.cb),Ie.ac==null||Ie.ac(Ie)){Ie.ob&&(re.L=0);var Le=w0[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=Ie.v-Le>>4,re.zb=Ie.j-Le>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=Ie.o+15+Le>>4,re.Hb=Ie.va+15+Le>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var We=re.ed;for(Le=0;4>Le;++Le){var De;if(re.Qa.Cb){var Ye=re.Qa.Lb[Le];re.Qa.Fb||(Ye+=We.Tb)}else Ye=We.Tb;for(De=0;1>=De;++De){var et=re.gd[Le][De],dt=Ye;if(We.Pc&&(dt+=We.vd[0],De&&(dt+=We.od[0])),0<(dt=0>dt?0:63<dt?63:dt)){var At=dt;0<We.wb&&(At=4<We.wb?At>>2:At>>1)>9-We.wb&&(At=9-We.wb),1>At&&(At=1),et.dd=At,et.tc=2*dt+At,et.ld=40<=dt?2:15<=dt?1:0}else et.tc=0;et.La=De}}}Le=0}else Xt(re,6,"Frame setup failed"),Le=re.a;if(Le=Le==0){if(Le){re.$c=0,0<re.Aa||(re.Ic=O6);t:{Le=re.Ic,We=4*(At=re.za);var $t=32*At,Pt=At+1,dr=0<re.L?At*(0<re.Aa?2:1):0,Kt=(re.Aa==2?2:1)*At;if((et=We+832+(De=3*(16*Le+w0[re.L])/2*$t)+(Ye=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=et)Le=0;else{if(et>re.Vb){if(re.Vb=0,re.Ec=i(et),re.Fc=0,re.Ec==null){Le=Xt(re,1,"no memory during frame initialization.");break t}re.Vb=et}et=re.Ec,dt=re.Fc,re.Ac=et,re.Bc=dt,dt+=We,re.Gd=a($t,bt),re.Hd=0,re.rb=a(Pt+1,tt),re.sb=1,re.wa=dr?a(dr,Ue):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=At),e(!0),re.oc=et,re.pc=dt,dt+=832,re.ya=a(Kt,ut),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=At),re.R=16*At,re.B=8*At,At=($t=w0[re.L])*re.R,$t=$t/2*re.B,re.sa=et,re.ta=dt+At,re.qa=re.sa,re.ra=re.ta+16*Le*re.R+$t,re.Ha=re.qa,re.Ia=re.ra+8*Le*re.B+$t,re.$c=0,dt+=De,re.mb=Ye?et:null,re.nb=Ye?dt:null,e(dt+Ye<=re.Fc+re.Vb),_i(re),s(re.Ac,re.Bc,0,We),Le=1}}if(Le){if(Ie.ka=0,Ie.y=re.sa,Ie.O=re.ta,Ie.f=re.qa,Ie.N=re.ra,Ie.ea=re.Ha,Ie.Vd=re.Ia,Ie.fa=re.R,Ie.Rc=re.B,Ie.F=null,Ie.J=0,!d5){for(Le=-255;255>=Le;++Le)A5[255+Le]=0>Le?-Le:Le;for(Le=-1020;1020>=Le;++Le)l5[1020+Le]=-128>Le?-128:127<Le?127:Le;for(Le=-112;112>=Le;++Le)c5[112+Le]=-16>Le?-16:15<Le?15:Le;for(Le=-255;510>=Le;++Le)u5[255+Le]=0>Le?0:255<Le?255:Le;d5=1}RA=hi,fc=so,co=fr,Or=ja,sn=ua,va=di,qn=NA,hs=ma,Mo=O,kh=ee,xu=uc,l0=w,ZB=fe,e5=Ne,t5=oo,r5=fi,n5=cc,s5=mu,Ma[0]=xh,Ma[1]=jo,Ma[2]=mh,Ma[3]=wh,Ma[4]=bs,Ma[5]=vh,Ma[6]=Ra,Ma[7]=EA,Ma[8]=kA,Ma[9]=Pa,PA[0]=ha,PA[1]=gh,PA[2]=oc,PA[3]=fu,PA[4]=io,PA[5]=IA,PA[6]=pu,Oo[0]=Ac,Oo[1]=Hi,Oo[2]=Vi,Oo[3]=Ro,Oo[4]=lc,Oo[5]=Yr,Oo[6]=gu,Le=1}else Le=0}Le&&(Le=function(Er,fs){for(Er.M=0;Er.M<Er.Va;++Er.M){var hr,zt=Er.Jc[Er.M&Er.Xb],Ct=Er.m,Wn=Er;for(hr=0;hr<Wn.za;++hr){var lr=Ct,Sr=Wn,mn=Sr.Ac,Qs=Sr.Bc+4*hr,gi=Sr.zc,Hn=Sr.ya[Sr.aa+hr];if(Sr.Qa.Bb?Hn.$b=Ee(lr,Sr.Pa.jb[0])?2+Ee(lr,Sr.Pa.jb[2]):Ee(lr,Sr.Pa.jb[1]):Hn.$b=0,Sr.kc&&(Hn.Ad=Ee(lr,Sr.Bd)),Hn.Za=!Ee(lr,145)+0,Hn.Za){var $s=Hn.Ob,mi=0;for(Sr=0;4>Sr;++Sr){var ps,Tr=gi[0+Sr];for(ps=0;4>ps;++ps){Tr=I6[mn[Qs+ps]][Tr];for(var zr=g5[Ee(lr,Tr[0])];0<zr;)zr=g5[2*zr+Ee(lr,Tr[zr])];Tr=-zr,mn[Qs+ps]=Tr}n($s,mi,mn,Qs,4),mi+=4,gi[0+Sr]=Tr}}else Tr=Ee(lr,156)?Ee(lr,128)?1:3:Ee(lr,163)?2:0,Hn.Ob[0]=Tr,s(mn,Qs,Tr,4),s(gi,0,Tr,4);Hn.Dd=Ee(lr,142)?Ee(lr,114)?Ee(lr,183)?1:3:2:0}if(Wn.m.Ka)return Xt(Er,7,"Premature end-of-partition0 encountered.");for(;Er.ja<Er.za;++Er.ja){if(Wn=zt,lr=(Ct=Er).rb[Ct.sb-1],mn=Ct.rb[Ct.sb+Ct.ja],hr=Ct.ya[Ct.aa+Ct.ja],Qs=Ct.kc?hr.Ad:0)lr.la=mn.la=0,hr.Za||(lr.Na=mn.Na=0),hr.Hc=0,hr.Gc=0,hr.ia=0;else{var Vn,Gr;if(lr=mn,mn=Wn,Qs=Ct.Pa.Xc,gi=Ct.ya[Ct.aa+Ct.ja],Hn=Ct.pb[gi.$b],Sr=gi.ad,$s=0,mi=Ct.rb[Ct.sb-1],Tr=ps=0,s(Sr,$s,0,384),gi.Za)var js=0,Oa=Qs[3];else{zr=i(16);var Jn=lr.Na+mi.Na;if(Jn=Nh(mn,Qs[1],Jn,Hn.Eb,0,zr,0),lr.Na=mi.Na=(0<Jn)+0,1<Jn)RA(zr,0,Sr,$s);else{var Ii=zr[0]+3>>3;for(zr=0;256>zr;zr+=16)Sr[$s+zr]=Ii}js=1,Oa=Qs[0]}var an=15&lr.la,gs=15&mi.la;for(zr=0;4>zr;++zr){var qi=1&gs;for(Ii=Gr=0;4>Ii;++Ii)an=an>>1|(qi=(Jn=Nh(mn,Oa,Jn=qi+(1&an),Hn.Sc,js,Sr,$s))>js)<<7,Gr=Gr<<2|(3<Jn?3:1<Jn?2:Sr[$s+0]!=0),$s+=16;an>>=4,gs=gs>>1|qi<<7,ps=(ps<<8|Gr)>>>0}for(Oa=an,js=gs>>4,Vn=0;4>Vn;Vn+=2){for(Gr=0,an=lr.la>>4+Vn,gs=mi.la>>4+Vn,zr=0;2>zr;++zr){for(qi=1&gs,Ii=0;2>Ii;++Ii)Jn=qi+(1&an),an=an>>1|(qi=0<(Jn=Nh(mn,Qs[2],Jn,Hn.Qc,0,Sr,$s)))<<3,Gr=Gr<<2|(3<Jn?3:1<Jn?2:Sr[$s+0]!=0),$s+=16;an>>=2,gs=gs>>1|qi<<5}Tr|=Gr<<4*Vn,Oa|=an<<4<<Vn,js|=(240&gs)<<Vn}lr.la=Oa,mi.la=js,gi.Hc=ps,gi.Gc=Tr,gi.ia=43690&Tr?0:Hn.ia,Qs=!(ps|Tr)}if(0<Ct.L&&(Ct.wa[Ct.Y+Ct.ja]=Ct.gd[hr.$b][hr.Za],Ct.wa[Ct.Y+Ct.ja].La|=!Qs),Wn.Ka)return Xt(Er,7,"Premature end-of-file encountered.")}if(_i(Er),Ct=fs,Wn=1,hr=(zt=Er).D,lr=0<zt.L&&zt.M>=zt.zb&&zt.M<=zt.Va,zt.Aa==0)t:{if(hr.M=zt.M,hr.uc=lr,Ls(zt,hr),Wn=1,hr=(Gr=zt.D).Nb,lr=(Tr=w0[zt.L])*zt.R,mn=Tr/2*zt.B,zr=16*hr*zt.R,Ii=8*hr*zt.B,Qs=zt.sa,gi=zt.ta-lr+zr,Hn=zt.qa,Sr=zt.ra-mn+Ii,$s=zt.Ha,mi=zt.Ia-mn+Ii,gs=(an=Gr.M)==0,ps=an>=zt.Va-1,zt.Aa==2&&Ls(zt,Gr),Gr.uc)for(qi=(Jn=zt).D.M,e(Jn.D.uc),Gr=Jn.yb;Gr<Jn.Hb;++Gr){js=Gr,Oa=qi;var wi=(Wi=(Rs=Jn).D).Nb;Vn=Rs.R;var Wi=Wi.wa[Wi.Y+js],Ji=Rs.sa,Ei=Rs.ta+16*wi*Vn+16*js,Xi=Wi.dd,cn=Wi.tc;if(cn!=0)if(e(3<=cn),Rs.L==1)0<js&&r5(Ji,Ei,Vn,cn+4),Wi.La&&s5(Ji,Ei,Vn,cn),0<Oa&&t5(Ji,Ei,Vn,cn+4),Wi.La&&n5(Ji,Ei,Vn,cn);else{var Yi=Rs.B,Ha=Rs.qa,pc=Rs.ra+8*wi*Yi+8*js,Ho=Rs.Ha,Rs=Rs.Ia+8*wi*Yi+8*js;wi=Wi.ld,0<js&&(hs(Ji,Ei,Vn,cn+4,Xi,wi),kh(Ha,pc,Ho,Rs,Yi,cn+4,Xi,wi)),Wi.La&&(l0(Ji,Ei,Vn,cn,Xi,wi),e5(Ha,pc,Ho,Rs,Yi,cn,Xi,wi)),0<Oa&&(qn(Ji,Ei,Vn,cn+4,Xi,wi),Mo(Ha,pc,Ho,Rs,Yi,cn+4,Xi,wi)),Wi.La&&(xu(Ji,Ei,Vn,cn,Xi,wi),ZB(Ha,pc,Ho,Rs,Yi,cn,Xi,wi))}}if(zt.ia&&alert("todo:DitherRow"),Ct.put!=null){if(Gr=16*an,an=16*(an+1),gs?(Ct.y=zt.sa,Ct.O=zt.ta+zr,Ct.f=zt.qa,Ct.N=zt.ra+Ii,Ct.ea=zt.Ha,Ct.W=zt.Ia+Ii):(Gr-=Tr,Ct.y=Qs,Ct.O=gi,Ct.f=Hn,Ct.N=Sr,Ct.ea=$s,Ct.W=mi),ps||(an-=Tr),an>Ct.o&&(an=Ct.o),Ct.F=null,Ct.J=null,zt.Fa!=null&&0<zt.Fa.length&&Gr<an&&(Ct.J=Kr(zt,Ct,Gr,an-Gr),Ct.F=zt.mb,Ct.F==null&&Ct.F.length==0)){Wn=Xt(zt,3,"Could not decode alpha data.");break t}Gr<Ct.j&&(Tr=Ct.j-Gr,Gr=Ct.j,e(!(1&Tr)),Ct.O+=zt.R*Tr,Ct.N+=zt.B*(Tr>>1),Ct.W+=zt.B*(Tr>>1),Ct.F!=null&&(Ct.J+=Ct.width*Tr)),Gr<an&&(Ct.O+=Ct.v,Ct.N+=Ct.v>>1,Ct.W+=Ct.v>>1,Ct.F!=null&&(Ct.J+=Ct.v),Ct.ka=Gr-Ct.j,Ct.U=Ct.va-Ct.v,Ct.T=an-Gr,Wn=Ct.put(Ct))}hr+1!=zt.Ic||ps||(n(zt.sa,zt.ta-lr,Qs,gi+16*zt.R,lr),n(zt.qa,zt.ra-mn,Hn,Sr+8*zt.B,mn),n(zt.Ha,zt.Ia-mn,$s,mi+8*zt.B,mn))}if(!Wn)return Xt(Er,6,"Output aborted.")}return 1}(re,Ie)),Ie.bc!=null&&Ie.bc(Ie),Le&=1}return Le?(re.cb=0,Le):0})(h,F)||(m=h.a)}}else m=h.a}m==0&&$.Oa!=null&&$.Oa.fd&&(m=bh($.ba))}$=m}z=$!=0?null:11>z?W.f.RGBA.eb:W.f.kb.y}else z=null;return z};var _5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(B,Q){for(var k="",L=0;L<4;L++)k+=String.fromCharCode(B[Q++]);return k}function u(B,Q){return B[Q+0]|B[Q+1]<<8}function d(B,Q){return(B[Q+0]|B[Q+1]<<8|B[Q+2]<<16)>>>0}function p(B,Q){return(B[Q+0]|B[Q+1]<<8|B[Q+2]<<16|B[Q+3]<<24)>>>0}new A;var g=[0],v=[0],y=[],S=new A,x=t,I=function(B,Q){var k={},L=0,T=!1,Y=0,xe=0;if(k.frames=[],!function(M,H){for(var K=0;K<4;K++)if(M[H+K]!="RIFF".charCodeAt(K))return!0;return!1}(B,Q)){for(p(B,Q+=4),Q+=8;Q<B.length;){var Be=c(B,Q),_e=p(B,Q+=4);Q+=4;var se=_e+(1&_e);switch(Be){case"VP8 ":case"VP8L":k.frames[L]===void 0&&(k.frames[L]={}),(Se=k.frames[L]).src_off=T?xe:Q-8,Se.src_size=Y+_e+8,L++,T&&(T=!1,Y=0,xe=0);break;case"VP8X":(Se=k.header={}).feature_flags=B[Q];var me=Q+4;Se.canvas_width=1+d(B,me),me+=3,Se.canvas_height=1+d(B,me),me+=3;break;case"ALPH":T=!0,Y=se+8,xe=Q-8;break;case"ANIM":(Se=k.header).bgcolor=p(B,Q),me=Q+4,Se.loop_count=u(B,me),me+=2;break;case"ANMF":var Pe,Se;(Se=k.frames[L]={}).offset_x=2*d(B,Q),Q+=3,Se.offset_y=2*d(B,Q),Q+=3,Se.width=1+d(B,Q),Q+=3,Se.height=1+d(B,Q),Q+=3,Se.duration=d(B,Q),Q+=3,Pe=B[Q++],Se.dispose=1&Pe,Se.blend=Pe>>1&1}Be!="ANMF"&&(Q+=se)}return k}}(x,0);I.response=x,I.rgbaoutput=!0,I.dataurl=!1;var N=I.header?I.header:null,U=I.frames?I.frames:null;if(N){N.loop_counter=N.loop_count,g=[N.canvas_height],v=[N.canvas_width];for(var D=0;D<U.length&&U[D].blend!=0;D++);}var P=U[0],E=S.WebPDecodeRGBA(x,P.src_off,P.src_size,v,g);P.rgba=E,P.imgwidth=v[0],P.imgheight=g[0];for(var _=0;_<v[0]*g[0]*4;_++)y[_]=E[_];return this.width=v,this.height=g,this.data=y,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function FY(){var t,e=this.internal.__metadata__.metadata,r=unescape(encodeURIComponent(e));t=this.internal.__metadata__.rawXml?r:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function TY(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var e,r,n,s,i,a,o,A,c,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new A,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new a,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new a,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,c=new u}]);var d=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=M;Object.defineProperty(this,"pdf",{get:function(){return H}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(R){K=!!R}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(R){Z=!!R}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(R){isNaN(R)||(ne=R)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(R){isNaN(R)||(de=R)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(R){var Ce;typeof R=="number"?Ce=[R,R,R,R]:((Ce=new Array(4))[0]=R[0],Ce[1]=R.length>=2?R[1]:Ce[0],Ce[2]=R.length>=3?R[2]:Ce[0],Ce[3]=R.length>=4?R[3]:Ce[1]),c.margin=Ce}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(R){Ae=R}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(R){pe=R}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(R){Ee=R}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(R){R instanceof u&&(c=R)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(R){c.path=R}});var Oe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Oe},set:function(R){Oe=R}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(R){var Ce;Ce=p(R),this.ctx.fillStyle=Ce.style,this.ctx.isFillTransparent=Ce.a===0,this.ctx.fillOpacity=Ce.a,this.pdf.setFillColor(Ce.r,Ce.g,Ce.b,{a:Ce.a}),this.pdf.setTextColor(Ce.r,Ce.g,Ce.b,{a:Ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(R){var Ce=p(R);this.ctx.strokeStyle=Ce.style,this.ctx.isStrokeTransparent=Ce.a===0,this.ctx.strokeOpacity=Ce.a,Ce.a===0?this.pdf.setDrawColor(255,255,255):(Ce.a,this.pdf.setDrawColor(Ce.r,Ce.g,Ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(R){["butt","round","square"].indexOf(R)!==-1&&(this.ctx.lineCap=R,this.pdf.setLineCap(R))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(R){isNaN(R)||(this.ctx.lineWidth=R,this.pdf.setLineWidth(R))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(R){["bevel","round","miter"].indexOf(R)!==-1&&(this.ctx.lineJoin=R,this.pdf.setLineJoin(R))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(R){isNaN(R)||(this.ctx.miterLimit=R,this.pdf.setMiterLimit(R))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(R){this.ctx.textBaseline=R}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(R){["right","end","center","left","start"].indexOf(R)!==-1&&(this.ctx.textAlign=R)}});var rt=null,ke=null,ce=null;Object.defineProperty(this,"fontFaces",{get:function(){return ce},set:function(R){rt=null,ke=null,ce=R}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(R){var Ce;if(this.ctx.font=R,(Ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(R))!==null){var Me=Ce[1];Ce[2];var st=Ce[3],ge=Ce[4];Ce[5];var be=Ce[6],we=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ge)[2];ge=Math.floor(we==="px"?parseFloat(ge)*this.pdf.internal.scaleFactor:we==="em"?parseFloat(ge)*this.pdf.getFontSize():parseFloat(ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ge);var ue=function(Ke){var Et,pt,ht=[],ot=Ke.trim();if(ot==="")return vv;if(ot in H4)return[H4[ot]];for(;ot!=="";){switch(pt=null,Et=(ot=K4(ot)).charAt(0)){case'"':case"'":pt=CY(ot.substring(1),Et);break;default:pt=IY(ot)}if(pt===null||(ht.push(pt[0]),(ot=K4(pt[1]))!==""&&ot.charAt(0)!==","))return vv;ot=ot.replace(/^,/,"")}return ht}(be);if(this.fontFaces){var je=function(Ke,Et){var pt=Ke.getFontList(),ht=JSON.stringify(pt);if(rt===null||ke!==ht){var ot=function(Je){var qe=[];return Object.keys(Je).forEach(function(Tt){Je[Tt].forEach(function(_t){var kt=null;switch(_t){case"bold":kt={family:Tt,weight:"bold"};break;case"italic":kt={family:Tt,style:"italic"};break;case"bolditalic":kt={family:Tt,weight:"bold",style:"italic"};break;case"":case"normal":kt={family:Tt}}kt!==null&&(kt.ref={name:Tt,style:_t},qe.push(kt))})}),qe}(pt);rt=function(Je){for(var qe={},Tt=0;Tt<Je.length;++Tt){var _t=xv(Je[Tt]),kt=_t.family,Wt=_t.stretch,Ot=_t.style,vt=_t.weight;qe[kt]=qe[kt]||{},qe[kt][Wt]=qe[kt][Wt]||{},qe[kt][Wt][Ot]=qe[kt][Wt][Ot]||{},qe[kt][Wt][Ot][vt]=_t}return qe}(ot.concat(Et)),ke=ht}return rt}(this.pdf,this.fontFaces),q=ue.map(function(Ke){return{family:Ke,stretch:"normal",weight:st,style:Me}}),le=function(Ke,Et,pt){for(var ht=(pt=pt||{}).defaultFontFamily||"times",ot=Object.assign({},_Y,pt.genericFontFamilies||{}),Je=null,qe=null,Tt=0;Tt<Et.length;++Tt)if(ot[(Je=xv(Et[Tt])).family]&&(Je.family=ot[Je.family]),Ke.hasOwnProperty(Je.family)){qe=Ke[Je.family];break}if(!(qe=qe||Ke[ht]))throw new Error("Could not find a font-family for the rule '"+V4(Je)+"' and default family '"+ht+"'.");if(qe=function(_t,kt){if(kt[_t])return kt[_t];var Wt=Ny[_t],Ot=Wt<=Ny.normal?-1:1,vt=O4(kt,A6,Wt,Ot);if(!vt)throw new Error("Could not find a matching font-stretch value for "+_t);return vt}(Je.stretch,qe),qe=function(_t,kt){if(kt[_t])return kt[_t];for(var Wt=o6[_t],Ot=0;Ot<Wt.length;++Ot)if(kt[Wt[Ot]])return kt[Wt[Ot]];throw new Error("Could not find a matching font-style for "+_t)}(Je.style,qe),!(qe=function(_t,kt){if(kt[_t])return kt[_t];if(_t===400&&kt[500])return kt[500];if(_t===500&&kt[400])return kt[400];var Wt=BY[_t],Ot=O4(kt,l6,Wt,_t<400?-1:1);if(!Ot)throw new Error("Could not find a matching font-weight for value "+_t);return Ot}(Je.weight,qe)))throw new Error("Failed to resolve a font for the rule '"+V4(Je)+"'.");return qe}(je,q);this.pdf.setFont(le.ref.name,le.ref.style)}else{var ae="";(st==="bold"||parseInt(st,10)>=700||Me==="bold")&&(ae="bold"),Me==="italic"&&(ae+="italic"),ae.length===0&&(ae="normal");for(var he="",Te={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Re=0;Re<ue.length;Re++){if(this.pdf.internal.getFont(ue[Re],ae,{noFallback:!0,disableWarning:!0})!==void 0){he=ue[Re];break}if(ae==="bolditalic"&&this.pdf.internal.getFont(ue[Re],"bold",{noFallback:!0,disableWarning:!0})!==void 0)he=ue[Re],ae="bold";else if(this.pdf.internal.getFont(ue[Re],"normal",{noFallback:!0,disableWarning:!0})!==void 0){he=ue[Re],ae="normal";break}}if(he===""){for(var Ge=0;Ge<ue.length;Ge++)if(Te[ue[Ge]]){he=Te[ue[Ge]];break}}he=he===""?"Times":he,this.pdf.setFont(he,ae)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(R){this.ctx.globalCompositeOperation=R}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(R){this.ctx.globalAlpha=R}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(R){this.ctx.lineDashOffset=R,Se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(R){this.ctx.lineDash=R,Se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(R){this.ctx.ignoreClearRect=!!R}})};d.prototype.setLineDash=function(M){this.lineDash=M},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){U.call(this,"fill",!1)},d.prototype.stroke=function(){U.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(M,H){if(isNaN(M)||isNaN(H))throw on.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new a(M,H));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(M,H)},d.prototype.closePath=function(){var M=new a(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Wr(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){M=new a(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(M.x,M.y)},d.prototype.lineTo=function(M,H){if(isNaN(M)||isNaN(H))throw on.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new a(M,H));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},d.prototype.quadraticCurveTo=function(M,H,K,Z){if(isNaN(K)||isNaN(Z)||isNaN(M)||isNaN(H))throw on.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new a(K,Z)),de=this.ctx.transform.applyToPoint(new a(M,H));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new a(ne.x,ne.y)},d.prototype.bezierCurveTo=function(M,H,K,Z,ne,de){if(isNaN(ne)||isNaN(de)||isNaN(M)||isNaN(H)||isNaN(K)||isNaN(Z))throw on.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new a(ne,de)),pe=this.ctx.transform.applyToPoint(new a(M,H)),Ee=this.ctx.transform.applyToPoint(new a(K,Z));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:Ee.x,y2:Ee.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new a(Ae.x,Ae.y)},d.prototype.arc=function(M,H,K,Z,ne,de){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(Z)||isNaN(ne))throw on.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new a(M,H));M=Ae.x,H=Ae.y;var pe=this.ctx.transform.applyToPoint(new a(0,K)),Ee=this.ctx.transform.applyToPoint(new a(0,0));K=Math.sqrt(Math.pow(pe.x-Ee.x,2)+Math.pow(pe.y-Ee.y,2))}Math.abs(ne-Z)>=2*Math.PI&&(Z=0,ne=2*Math.PI),this.path.push({type:"arc",x:M,y:H,radius:K,startAngle:Z,endAngle:ne,counterclockwise:de})},d.prototype.arcTo=function(M,H,K,Z,ne){throw new Error("arcTo not implemented.")},d.prototype.rect=function(M,H,K,Z){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(Z))throw on.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,H),this.lineTo(M+K,H),this.lineTo(M+K,H+Z),this.lineTo(M,H+Z),this.lineTo(M,H),this.lineTo(M+K,H),this.lineTo(M,H)},d.prototype.fillRect=function(M,H,K,Z){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(Z))throw on.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,H,K,Z),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},d.prototype.strokeRect=function(M,H,K,Z){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(Z))throw on.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(M,H,K,Z),this.stroke())},d.prototype.clearRect=function(M,H,K,Z){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(Z))throw on.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,H,K,Z))},d.prototype.save=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},d.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(H),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(M){var H,K,Z,ne;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))H=0,K=0,Z=0,ne=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(de!==null)H=parseInt(de[1]),K=parseInt(de[2]),Z=parseInt(de[3]),ne=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)H=parseInt(de[1]),K=parseInt(de[2]),Z=parseInt(de[3]),ne=parseFloat(de[4]);else{if(ne=1,typeof M=="string"&&M.charAt(0)!=="#"){var Ae=new e6(M);M=Ae.ok?Ae.toHex():"#000000"}M.length===4?(H=M.substring(1,2),H+=H,K=M.substring(2,3),K+=K,Z=M.substring(3,4),Z+=Z):(H=M.substring(1,3),K=M.substring(3,5),Z=M.substring(5,7)),H=parseInt(H,16),K=parseInt(K,16),Z=parseInt(Z,16)}}return{r:H,g:K,b:Z,a:ne,style:M}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(M,H,K,Z){if(isNaN(H)||isNaN(K)||typeof M!="string")throw on.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!g.call(this)){var ne=se(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:M,x:H,y:K,scale:de,angle:ne,align:this.textAlign,maxWidth:Z})}},d.prototype.strokeText=function(M,H,K,Z){if(isNaN(H)||isNaN(K)||typeof M!="string")throw on.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Z=isNaN(Z)?void 0:Z;var ne=se(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:M,x:H,y:K,scale:de,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:Z})}},d.prototype.measureText=function(M){if(typeof M!="string")throw on.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,K=this.pdf.internal.scaleFactor,Z=H.internal.getFontSize(),ne=H.getStringUnitWidth(M)*Z/H.internal.scaleFactor;return new function(de){var Ae=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:ne*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(M,H){if(isNaN(M)||isNaN(H))throw on.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new A(M,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(M){if(isNaN(M))throw on.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new A(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.translate=function(M,H){if(isNaN(M)||isNaN(H))throw on.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new A(1,0,0,1,M,H);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(M,H,K,Z,ne,de){if(isNaN(M)||isNaN(H)||isNaN(K)||isNaN(Z)||isNaN(ne)||isNaN(de))throw on.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new A(M,H,K,Z,ne,de);this.ctx.transform=this.ctx.transform.multiply(Ae)},d.prototype.setTransform=function(M,H,K,Z,ne,de){M=isNaN(M)?1:M,H=isNaN(H)?0:H,K=isNaN(K)?0:K,Z=isNaN(Z)?1:Z,ne=isNaN(ne)?0:ne,de=isNaN(de)?0:de,this.ctx.transform=new A(M,H,K,Z,ne,de)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(M,H,K,Z,ne,de,Ae,pe,Ee){var Oe=this.pdf.getImageProperties(M),rt=1,ke=1,ce=1,R=1;Z!==void 0&&pe!==void 0&&(ce=pe/Z,R=Ee/ne,rt=Oe.width/Z*pe/Z,ke=Oe.height/ne*Ee/ne),de===void 0&&(de=H,Ae=K,H=0,K=0),Z!==void 0&&pe===void 0&&(pe=Z,Ee=ne),Z===void 0&&pe===void 0&&(pe=Oe.width,Ee=Oe.height);var Ce=this.ctx.transform.decompose(),Me=se(Ce.rotate.shx),st=new A,ge=(st=(st=(st=st.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale)).applyToRectangle(new o(de-H*ce,Ae-K*R,Z*rt,ne*ke));if(this.autoPaging){for(var be,we=S.call(this,ge),ue=[],je=0;je<we.length;je+=1)ue.indexOf(we[je])===-1&&ue.push(we[je]);N(ue);for(var q=ue[0],le=ue[ue.length-1],ae=q;ae<le+1;ae++){this.pdf.setPage(ae);var he=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=ae===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=ae===1?0:Re+(ae-2)*Ge;if(this.ctx.clip_path.length!==0){var Et=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(be,this.posX+this.margin[3],-Ke+Te+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=Et}var pt=JSON.parse(JSON.stringify(ge));pt=I([pt],this.posX+this.margin[3],-Ke+Te+this.ctx.prevPageLastElemOffset)[0];var ht=(ae>q||ae<le)&&y.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,Ge,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,Me),ht&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,Me)};var S=function(M,H,K){var Z=[];H=H||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Z.push(Math.floor((M.y+ne)/K)+1);break;case"arc":Z.push(Math.floor((M.y+ne-M.radius)/K)+1),Z.push(Math.floor((M.y+ne+M.radius)/K)+1);break;case"qct":var de=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Z.push(Math.floor((de.y+ne)/K)+1),Z.push(Math.floor((de.y+de.h+ne)/K)+1);break;case"bct":var Ae=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Z.push(Math.floor((Ae.y+ne)/K)+1),Z.push(Math.floor((Ae.y+Ae.h+ne)/K)+1);break;case"rect":Z.push(Math.floor((M.y+ne)/K)+1),Z.push(Math.floor((M.y+M.h+ne)/K)+1)}for(var pe=0;pe<Z.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<Z[pe];)x.call(this);return Z},x=function(){var M=this.fillStyle,H=this.strokeStyle,K=this.font,Z=this.lineCap,ne=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=H,this.font=K,this.lineCap=Z,this.lineWidth=ne,this.lineJoin=de},I=function(M,H,K){for(var Z=0;Z<M.length;Z++)switch(M[Z].type){case"bct":M[Z].x2+=H,M[Z].y2+=K;case"qct":M[Z].x1+=H,M[Z].y1+=K;default:M[Z].x+=H,M[Z].y+=K}return M},N=function(M){return M.sort(function(H,K){return H-K})},U=function(M,H){var K=this.fillStyle,Z=this.strokeStyle,ne=this.lineCap,de=this.lineWidth,Ae=Math.abs(de*this.ctx.transform.scaleX),pe=this.lineJoin;if(this.autoPaging){for(var Ee,Oe,rt=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),ce=[],R=0;R<ke.length;R++)if(ke[R].x!==void 0)for(var Ce=S.call(this,ke[R]),Me=0;Me<Ce.length;Me+=1)ce.indexOf(Ce[Me])===-1&&ce.push(Ce[Me]);for(var st=0;st<ce.length;st++)for(;this.pdf.internal.getNumberOfPages()<ce[st];)x.call(this);N(ce);for(var ge=ce[0],be=ce[ce.length-1],we=ge;we<be+1;we++){this.pdf.setPage(we),this.fillStyle=K,this.strokeStyle=Z,this.lineCap=ne,this.lineWidth=Ae,this.lineJoin=pe;var ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],je=we===1?this.posY+this.margin[0]:this.margin[0],q=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ae=we===1?0:q+(we-2)*le;if(this.ctx.clip_path.length!==0){var he=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Ee,this.posX+this.margin[3],-ae+je+this.ctx.prevPageLastElemOffset),D.call(this,M,!0),this.path=he}if(Oe=JSON.parse(JSON.stringify(rt)),this.path=I(Oe,this.posX+this.margin[3],-ae+je+this.ctx.prevPageLastElemOffset),H===!1||we===0){var Te=(we>ge||we<be)&&y.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ue,le,null).clip().discardPath()),D.call(this,M,H),Te&&this.pdf.restoreGraphicsState()}this.lineWidth=de}this.path=rt}else this.lineWidth=Ae,D.call(this,M,H),this.lineWidth=de},D=function(M,H){if((M!=="stroke"||H||!v.call(this))&&(M==="stroke"||H||!g.call(this))){for(var K,Z,ne=[],de=this.path,Ae=0;Ae<de.length;Ae++){var pe=de[Ae];switch(pe.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:pe,deltas:[],abs:[]});break;case"lt":var Ee=ne.length;if(de[Ae-1]&&!isNaN(de[Ae-1].x)&&(K=[pe.x-de[Ae-1].x,pe.y-de[Ae-1].y],Ee>0)){for(;Ee>=0;Ee--)if(ne[Ee-1].close!==!0&&ne[Ee-1].begin!==!0){ne[Ee-1].deltas.push(K),ne[Ee-1].abs.push(pe);break}}break;case"bct":K=[pe.x1-de[Ae-1].x,pe.y1-de[Ae-1].y,pe.x2-de[Ae-1].x,pe.y2-de[Ae-1].y,pe.x-de[Ae-1].x,pe.y-de[Ae-1].y],ne[ne.length-1].deltas.push(K);break;case"qct":var Oe=de[Ae-1].x+2/3*(pe.x1-de[Ae-1].x),rt=de[Ae-1].y+2/3*(pe.y1-de[Ae-1].y),ke=pe.x+2/3*(pe.x1-pe.x),ce=pe.y+2/3*(pe.y1-pe.y),R=pe.x,Ce=pe.y;K=[Oe-de[Ae-1].x,rt-de[Ae-1].y,ke-de[Ae-1].x,ce-de[Ae-1].y,R-de[Ae-1].x,Ce-de[Ae-1].y],ne[ne.length-1].deltas.push(K);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(pe)}}Z=H?null:M==="stroke"?"stroke":"fill";for(var Me=!1,st=0;st<ne.length;st++)if(ne[st].arc)for(var ge=ne[st].abs,be=0;be<ge.length;be++){var we=ge[be];we.type==="arc"?_.call(this,we.x,we.y,we.radius,we.startAngle,we.endAngle,we.counterclockwise,void 0,H,!Me):T.call(this,we.x,we.y),Me=!0}else if(ne[st].close===!0)this.pdf.internal.out("h"),Me=!1;else if(ne[st].begin!==!0){var ue=ne[st].start.x,je=ne[st].start.y;Y.call(this,ne[st].deltas,ue,je),Me=!0}Z&&B.call(this,Z),H&&Q.call(this)}},P=function(M){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-K;case"top":return M+H-K;case"hanging":return M+H-2*K;case"middle":return M+H/2-K;default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(H,K){this.colorStops.push([H,K])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(M,H,K,Z,ne,de,Ae,pe,Ee){for(var Oe=Be.call(this,K,Z,ne,de),rt=0;rt<Oe.length;rt++){var ke=Oe[rt];rt===0&&(Ee?k.call(this,ke.x1+M,ke.y1+H):T.call(this,ke.x1+M,ke.y1+H)),xe.call(this,M,H,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}pe?Q.call(this):B.call(this,Ae)},B=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(M,H){this.pdf.internal.out(r(M)+" "+n(H)+" m")},L=function(M){var H;switch(M.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var K,Z,ne,de=this.pdf.getTextDimensions(M.text),Ae=P.call(this,M.y),pe=E.call(this,Ae)-de.h,Ee=this.ctx.transform.applyToPoint(new a(M.x,Ae));if(this.autoPaging){var Oe=this.ctx.transform.decompose(),rt=new A;rt=(rt=(rt=rt.multiply(Oe.translate)).multiply(Oe.skew)).multiply(Oe.scale);for(var ke=this.ctx.transform.applyToRectangle(new o(M.x,Ae,de.w,de.h)),ce=rt.applyToRectangle(new o(M.x,pe,de.w,de.h)),R=S.call(this,ce),Ce=[],Me=0;Me<R.length;Me+=1)Ce.indexOf(R[Me])===-1&&Ce.push(R[Me]);N(Ce);for(var st=Ce[0],ge=Ce[Ce.length-1],be=st;be<ge+1;be++){this.pdf.setPage(be);var we=be===1?this.posY+this.margin[0]:this.margin[0],ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[2],q=je-this.margin[0],le=this.pdf.internal.pageSize.width-this.margin[1],ae=le-this.margin[3],he=be===1?0:ue+(be-2)*q;if(this.ctx.clip_path.length!==0){var Te=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(K,this.posX+this.margin[3],-1*he+we),D.call(this,"fill",!0),this.path=Te}var Re=I([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-he+we+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Z*M.scale),ne=this.lineWidth,this.lineWidth=ne*M.scale);var Ge=this.autoPaging!=="text";if(Ge||Re.y+Re.h<=je){if(Ge||Re.y>=we&&Re.x<=le){var Ke=Ge?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||le-Re.x)[0],Et=I([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-he+we+this.ctx.prevPageLastElemOffset)[0],pt=Ge&&(be>st||be<ge)&&y.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ae,q,null).clip().discardPath()),this.pdf.text(Ke,Et.x,Et.y,{angle:M.angle,align:H,renderingMode:M.renderingMode}),pt&&this.pdf.restoreGraphicsState()}}else Re.y<je&&(this.ctx.prevPageLastElemOffset+=je-Re.y);M.scale>=.01&&(this.pdf.setFontSize(Z),this.lineWidth=ne)}}else M.scale>=.01&&(Z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Z*M.scale),ne=this.lineWidth,this.lineWidth=ne*M.scale),this.pdf.text(M.text,Ee.x+this.posX,Ee.y+this.posY,{angle:M.angle,align:H,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Z),this.lineWidth=ne)},T=function(M,H,K,Z){K=K||0,Z=Z||0,this.pdf.internal.out(r(M+K)+" "+n(H+Z)+" l")},Y=function(M,H,K){return this.pdf.lines(M,H,K,null,null)},xe=function(M,H,K,Z,ne,de,Ae,pe){this.pdf.internal.out([e(s(K+M)),e(i(Z+H)),e(s(ne+M)),e(i(de+H)),e(s(Ae+M)),e(i(pe+H)),"c"].join(" "))},Be=function(M,H,K,Z){for(var ne=2*Math.PI,de=Math.PI/2;H>K;)H-=ne;var Ae=Math.abs(K-H);Ae<ne&&Z&&(Ae=ne-Ae);for(var pe=[],Ee=Z?-1:1,Oe=H;Ae>1e-5;){var rt=Oe+Ee*Math.min(Ae,de);pe.push(_e.call(this,M,Oe,rt)),Ae-=Math.abs(rt-Oe),Oe=rt}return pe},_e=function(M,H,K){var Z=(K-H)/2,ne=M*Math.cos(Z),de=M*Math.sin(Z),Ae=ne,pe=-de,Ee=Ae*Ae+pe*pe,Oe=Ee+Ae*ne+pe*de,rt=4/3*(Math.sqrt(2*Ee*Oe)-Oe)/(Ae*de-pe*ne),ke=Ae-rt*pe,ce=pe+rt*Ae,R=ke,Ce=-ce,Me=Z+H,st=Math.cos(Me),ge=Math.sin(Me);return{x1:M*Math.cos(H),y1:M*Math.sin(H),x2:ke*st-ce*ge,y2:ke*ge+ce*st,x3:R*st-Ce*ge,y3:R*ge+Ce*st,x4:M*Math.cos(K),y4:M*Math.sin(K)}},se=function(M){return 180*M/Math.PI},me=function(M,H,K,Z,ne,de){var Ae=M+.5*(K-M),pe=H+.5*(Z-H),Ee=ne+.5*(K-ne),Oe=de+.5*(Z-de),rt=Math.min(M,ne,Ae,Ee),ke=Math.max(M,ne,Ae,Ee),ce=Math.min(H,de,pe,Oe),R=Math.max(H,de,pe,Oe);return new o(rt,ce,ke-rt,R-ce)},Pe=function(M,H,K,Z,ne,de,Ae,pe){var Ee,Oe,rt,ke,ce,R,Ce,Me,st,ge,be,we,ue,je,q=K-M,le=Z-H,ae=ne-K,he=de-Z,Te=Ae-ne,Re=pe-de;for(Oe=0;Oe<41;Oe++)st=(Ce=(rt=M+(Ee=Oe/40)*q)+Ee*((ce=K+Ee*ae)-rt))+Ee*(ce+Ee*(ne+Ee*Te-ce)-Ce),ge=(Me=(ke=H+Ee*le)+Ee*((R=Z+Ee*he)-ke))+Ee*(R+Ee*(de+Ee*Re-R)-Me),Oe==0?(be=st,we=ge,ue=st,je=ge):(be=Math.min(be,st),we=Math.min(we,ge),ue=Math.max(ue,st),je=Math.max(je,ge));return new o(Math.round(be),Math.round(we),Math.round(ue-be),Math.round(je-we))},Se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,H,K=(M=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:H}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(qt.API),function(t){var e=function(a){var o,A,c,u,d,p,g,v,y,S;for(A=[],c=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(p=(d=((d=((d=((d=(d-(S=d%85))/85)-(y=d%85))/85)-(v=d%85))/85)-(g=d%85))/85)%85,A.push(p+33,g+33,v+33,y+33,S+33)):A.push(122);return function(x,I){for(var N=I;N>0;N--)x.pop()}(A,o.length),String.fromCharCode.apply(String,A)+"~>"},r=function(a){var o,A,c,u,d,p=String,g="length",v=255,y="charCodeAt",S="slice",x="replace";for(a[S](-2),a=a[S](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],u=0,d=(a+=o="uuuuu"[S](a[g]%5||5))[g];d>u;u+=5)A=52200625*(a[y](u)-33)+614125*(a[y](u+1)-33)+7225*(a[y](u+2)-33)+85*(a[y](u+3)-33)+(a[y](u+4)-33),c.push(v&A>>24,v&A>>16,v&A>>8,v&A);return function(I,N){for(var U=N;U>0;U--)I.pop()}(c,o[g]),p.fromCharCode.apply(p,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var A="",c=0;c<a.length;c+=2)A+=String.fromCharCode("0x"+(a[c]+a[c+1]));return A},i=function(a){for(var o=new Uint8Array(a.length),A=a.length;A--;)o[A]=a.charCodeAt(A);return(o=By(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,o){var A=0,c=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),A=0;A<o.length;A+=1)switch(o[A]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[A]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(qt.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(A,c,u){var d=new XMLHttpRequest,p=0,g=function(v){var y=v.length,S=[],x=String.fromCharCode;for(p=0;p<y;p+=1)S.push(x(255&v.charCodeAt(p)));return S.join("")};if(d.open("GET",A,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(g(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return g(d.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile}(qt.API),function(t){function e(){return(nr.html2canvas?Promise.resolve(nr.html2canvas):Hg(()=>Promise.resolve().then(()=>nJ),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(nr.DOMPurify?Promise.resolve(nr.DOMPurify):Hg(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var A=Wr(o);return A==="undefined"?"undefined":A==="string"||o instanceof String?"string":A==="number"||o instanceof Number?"number":A==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":A==="object"?"object":"unknown"},s=function(o,A){var c=document.createElement(o);for(var u in A.className&&(c.className=A.className),A.innerHTML&&A.dompurify&&(c.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)c.style[u]=A.style[u];return c},i=function o(A,c){for(var u=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),d=A.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(o(d,c));return A.nodeType===1&&(A.nodeName==="CANVAS"?(u.width=A.width,u.height=A.height,u.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(u.value=A.value),u.addEventListener("load",function(){u.scrollTop=A.scrollTop,u.scrollLeft=A.scrollLeft},!0)),u},a=function o(A){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return(u=u.setProgress(1,o,1,[o])).set(A)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,A){return o.__proto__=A||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,A){return this.then(function(){switch(A=A||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),A){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,A(this.prop.container,c)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var v=u[g],y=v.src.find(function(S){return S.format==="truetype"});y&&c.addFont(y.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),A(this.prop.container,p)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,A,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,A):this.outputPdf(o,A)},a.prototype.outputPdf=function(o,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,A)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var A=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(A)})},a.prototype.get=function(o,A){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return A?A(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function A(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||qt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:A(o.inner.width,o.k),height:A(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,A,c,u){return o!=null&&(this.progress.val=o),A!=null&&(this.progress.state=A),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,A,c,u){return this.setProgress(o?this.progress.val+o:null,A||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,A){var c=this;return this.thenCore(o,A,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,u),p}).then(u,d).then(function(p){return c.updateProgress(1),p})})},a.prototype.thenCore=function(o,A,c){c=c||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),A&&(A=A.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),p=c.call(d,o,A);return a.convert(p,u.__proto__)},a.prototype.thenExternal=function(o,A){return Promise.prototype.then.call(this,o,A)},a.prototype.thenList=function(o){var A=this;return o.forEach(function(c){A=A.thenCore(c)}),A},a.prototype.catch=function(o){o&&(o=o.bind(this));var A=Promise.prototype.catch.call(this,o);return a.convert(A,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,qt.getPageSize=function(o,A,c){if(Wr(o)==="object"){var u=o;o=u.orientation,A=u.unit||A,c=u.format||c}A=A||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+A}var v,y=0,S=0;if(g.hasOwnProperty(p))y=g[p][1]/d,S=g[p][0]/d;else try{y=c[1],S=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",S>y&&(v=S,S=y,y=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>S&&(v=S,S=y,y=v)}return{width:S,height:y,unit:A,k:d,orientation:o}},t.html=function(o,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(xv):null;var c=new a(A);return A.worker?c:c.from(o).doCallback()}}(qt.API),qt.API.addJS=function(t){var e,r,n=t;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&r!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var A=o[1];r.internal.newObjectDeferredBegin(A,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var d=r.internal.newObject();u.push(d);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(qt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var A,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,A=function(d){for(var p,g=256*d.charCodeAt(4)+d.charCodeAt(5),v=d.length,y={width:0,height:0,numcomponents:1},S=4;S<v;S+=2){if(S+=g,e.indexOf(d.charCodeAt(S+1))!==-1){p=256*d.charCodeAt(S+5)+d.charCodeAt(S+6),y={width:256*d.charCodeAt(S+7)+d.charCodeAt(S+8),height:p,numcomponents:d.charCodeAt(S+9)};break}g=256*d.charCodeAt(S+2)+d.charCodeAt(S+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),A.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return u}}(qt.API),qt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=lY(t,{checkCrc:!0}),a=i.width,o=i.height,A=i.channels,c=i.palette,u=i.depth;s=c&&A===1?function(_){for(var B=_.width,Q=_.height,k=_.data,L=_.palette,T=_.depth,Y=!1,xe=[],Be=[],_e=void 0,se=!1,me=0,Pe=0;Pe<L.length;Pe++){var Se=JE(L[Pe],4),M=Se[0],H=Se[1],K=Se[2],Z=Se[3];xe.push(M,H,K),Z!=null&&(Z===0?(me++,Be.length<1&&Be.push(Pe)):Z<255&&(se=!0))}if(se||me>1){Y=!0,Be=void 0;var ne=B*Q;_e=new Uint8Array(ne);for(var de=new DataView(k.buffer),Ae=0;Ae<ne;Ae++){var pe=yv(de,Ae,T),Ee=JE(L[pe],4)[3];_e[Ae]=Ee}}else me===0&&(Be=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Y?8:void 0,colorBytes:k,alphaBytes:_e,needSMask:Y,palette:xe,mask:Be}}(i):A===2||A===4?function(_){for(var B=_.data,Q=_.width,k=_.height,L=_.channels,T=_.depth,Y=L===2?"DeviceGray":"DeviceRGB",xe=L-1,Be=Q*k,_e=xe,se=Be*_e,me=1*Be,Pe=Math.ceil(se*T/8),Se=Math.ceil(me*T/8),M=new Uint8Array(Pe),H=new Uint8Array(Se),K=new DataView(B.buffer),Z=new DataView(M.buffer),ne=new DataView(H.buffer),de=!1,Ae=0;Ae<Be;Ae++){for(var pe=Ae*L,Ee=0;Ee<_e;Ee++)Z4(Z,yv(K,pe+Ee,T),Ae*_e+Ee,T);var Oe=yv(K,pe+_e,T);Oe<(1<<T)-1&&(de=!0),Z4(ne,Oe,1*Ae,T)}return{colorSpace:Y,colorsPerPixel:xe,sMaskBitsPerComponent:de?T:void 0,colorBytes:M,alphaBytes:H,needSMask:de}}(i):function(_){var B=_.data,Q=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Q,colorsPerPixel:Q==="DeviceGray"?1:3,colorBytes:B instanceof Uint16Array?function(k){for(var L=k.length,T=new Uint8Array(2*L),Y=new DataView(T.buffer,T.byteOffset,T.byteLength),xe=0;xe<L;xe++)Y.setUint16(2*xe,k[xe],!1);return T}(B):B,needSMask:!1}}(i);var d,p,g,v=s,y=v.colorSpace,S=v.colorsPerPixel,x=v.sMaskBitsPerComponent,I=v.colorBytes,N=v.alphaBytes,U=v.needSMask,D=v.palette,P=v.mask,E=null;return n!==qt.API.image_compression.NONE&&typeof By=="function"?(E=function(_){var B;switch(_){case qt.API.image_compression.FAST:B=11;break;case qt.API.image_compression.MEDIUM:B=13;break;case qt.API.image_compression.SLOW:B=14;break;default:B=12}return B}(n),d=this.decode.FLATE_DECODE,p="/Predictor ".concat(E," /Colors ").concat(S," /BitsPerComponent ").concat(u," /Columns ").concat(a),t=q4(I,Math.ceil(a*S*u/8),S,u,n),U&&(g=q4(N,Math.ceil(a*x/8),1,x,n))):(d=void 0,p=void 0,t=I,U&&(g=N)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:t,index:e,filter:d,decodeParameters:p,transparency:P,palette:D,sMask:g,predictor:E,width:a,height:o,bitsPerComponent:u,sMaskBitsPerComponent:x,colorSpace:y}}},function(t){t.processGIF89A=function(e,r,n,s){var i=new NY(e),a=i.width,o=i.height,A=[];i.decodeAndBlitFrameRGBA(0,A);var c={data:A,width:a,height:o},u=new bv(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)},t.processGIF87A=t.processGIF89A}(qt.API),Ka.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ka.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[t]()}catch(r){on.log("bit decode error:"+r)}},Ka.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var A=this.palette[i>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ka.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,A=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[A],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ka.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Ka.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,A=(i>>10&e)/e*255|0,c=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=A,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=t}},Ka.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,A=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=A,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},Ka.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ka.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},Ka.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new Ka(e,!1),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new bv(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(qt.API),tk.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new tk(e),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new bv(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(qt.API),qt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,A=0,c=0;c<s;c+=4){var u=n[c],d=n[c+1],p=n[c+2],g=n[c+3];i[o++]=u,i[o++]=d,i[o++]=p,a[A++]=g}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},qt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qu=qt.API,kg=Qu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,A=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,p=0,g=t.length,v=0,y=o[0]||A,S=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?S.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(p=d&&Wr(c[n])==="object"&&!isNaN(parseInt(c[n][v],10))?c[n][v]/u:0,S.push((o[n]||y)/A+p)),v=n;return S},z4=Qu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Qu.processArabic&&(t=Qu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:kg.apply(this,arguments).reduce(function(i,a){return i+a},0)},G4=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var A=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(A,i)),o=0,A=i),o+=e[i],i++;return A!==i&&s.push(t.slice(A,i)),s},$4=function(t,e,r){r||(r={});var n,s,i,a,o,A,c,u=[],d=[u],p=r.textIndent||0,g=0,v=0,y=t.split(" "),S=kg.apply(this,[" ",r])[0];if(A=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var x=Array(A).join(" "),I=[];y.map(function(U){(U=U.split(/\s*\n/)).length>1?I=I.concat(U.map(function(D,P){return(P&&D.length?`
`:"")+D})):I.push(U[0])}),y=I,A=z4.apply(this,[x,r])}for(i=0,a=y.length;i<a;i++){var N=0;if(n=y[i],A&&n[0]==`
`&&(n=n.substr(1),N=1),p+g+(v=(s=kg.apply(this,[n,r])).reduce(function(U,D){return U+D},0))>e||N){if(v>e){for(o=G4.apply(this,[n,s,e-(p+g),e]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);v=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(U,D){return U+D},0)}else u=[n];d.push(u),p=v+A,g=S}else u.push(n),p+=g+v,g=S}return c=A?function(U,D){return(D?x:"")+U.join(" ")}:function(U){return U.join(" ")},d.map(c)},Qu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),p="Unicode";return d.metadata[p]?{widths:d.metadata[p].widths||{0:1},kerning:d.metadata[p].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,A,c=[];for(o=0,A=n.length;o<A;o++)c=c.concat($4.apply(this,[n[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[r[i]]=e[i],s[e[i]]=r[i];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var g,v,y,S,x=["{"];for(var I in p){if(g=p[I],isNaN(parseInt(I,10))?v="'"+I+"'":(I=parseInt(I,10),v=(v=a(I).slice(2)).slice(0,-1)+s[v.slice(-1)]),typeof g=="number")g<0?(y=a(g).slice(3),S="-"):(y=a(g).slice(2),S=""),y=S+y.slice(0,-1)+s[y.slice(-1)];else{if(Wr(g)!=="object")throw new Error("Don't know what to do with value type "+Wr(g)+".");y=o(g)}x.push(v+y)}return x.push("}"),x.join("")},A=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,v,y,S,x={},I=1,N=x,U=[],D="",P="",E=p.length-1,_=1;_<E;_+=1)(S=p[_])=="'"?g?(y=g.join(""),g=void 0):g=[]:g?g.push(S):S=="{"?(U.push([N,y]),N={},y=void 0):S=="}"?((v=U.pop())[0][v[1]]=N,y=void 0,N=v[0]):S=="-"?I=-1:y===void 0?n.hasOwnProperty(S)?(D+=n[S],y=parseInt(D,16)*I,I=1,D=""):D+=S:n.hasOwnProperty(S)?(P+=n[S],N[y]=parseInt(P,16)*I,I=1,y=void 0,P=""):P+=S;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var g=p.font,v=d.Unicode[g.postScriptName];v&&(g.metadata.Unicode={},g.metadata.Unicode.widths=v.widths,g.metadata.Unicode.kerning=v.kerning);var y=u.Unicode[g.postScriptName];y&&(g.metadata.Unicode.encoding=y,g.encoding=y.codePages[0])}])}(qt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Am(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(qt),qt.API.addSvgAsImage=function(t,e,r,n,s,i,a,o){if(isNaN(e)||isNaN(r))throw on.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw on.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=n,A.height=s;var c=A.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,A.width,A.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(nr.canvg?Promise.resolve(nr.canvg):Hg(()=>import("./index.es-CwEkDVk_.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(c,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(u)}).then(function(){d.addImage(A.toDataURL("image/jpeg",1),e,r,n,s,a,o)})},qt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},qt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],c=0,u=0,d=0;function p(v,y){var S,x=!1;for(S=0;S<v.length;S+=1)v[S]===y&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(d=0;d<g;d+=1)r[o[d]].value=r[o[d]].defaultValue,r[o[d]].explicitSet=!1}if(Wr(t)==="object"){for(s in t)if(i=t[s],p(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")A.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&A.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+A.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?y.push("/"+v+" /"+r[v].value):y.push("/"+v+" "+r[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},qt.API.addMetadata=function(t,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",TY),this.internal.events.subscribe("postPutResources",FY)),this},function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,A=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,p=i.length;d<p;++d){if(o=a.metadata.characterToGlyph(i.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(d),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var a,o,A,c,u,d,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],d=0,p=(o=Object.keys(i).sort(function(g,v){return g-v})).length;d<p;d++)a=o[d],A.length>=100&&(u+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+c+">"));return A.length&&(u+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",v=0;v<p.length;v++)g+=String.fromCharCode(p[v]);var y=c();u({data:g,addLength1:!0,objectId:y}),A("endobj");var S=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:S}),A("endobj");var x=c();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Vu(o.fontName)),A("/FontFile2 "+y+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var I=c();A("<<"),A("/Type /Font"),A("/BaseFont /"+Vu(o.fontName)),A("/FontDescriptor "+x+" 0 R"),A("/W "+t.API.PDFObject.convert(d)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=c(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+S+" 0 R"),A("/BaseFont /"+Vu(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+I+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,p="",g=0;g<d.length;g++)p+=String.fromCharCode(d[g]);var v=c();u({data:p,addLength1:!0,objectId:v}),A("endobj");var y=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),A("endobj");var S=c();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+v+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+Vu(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=c();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Vu(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",A=i.x,c=i.y,u=i.options||{},d=i.mutex||{},p=d.pdfEscape,g=d.activeFontKey,v=d.fonts,y=g,S="",x=0,I="",N=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:o,x:A,y:c,options:u,mutex:d};for(I=o,y=g,Array.isArray(o)&&(I=o[0]),x=0;x<I.length;x+=1)v[y].metadata.hasOwnProperty("cmap")&&(a=v[y].metadata.cmap.unicode.codeMap[I[x].charCodeAt(0)]),a||I[x].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?S+=I[x]:S+="";var U="";return parseInt(y.slice(1))<14||N==="WinAnsiEncoding"?U=p(S,y).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(U=r(S,v[y])),d.isHex=!0,{text:U,x:A,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],A={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},A,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},A,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},A,{text:a})).text}])}(qt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(qt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,A,c,u,d=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,N=0;this.__bidiEngine__={};var U=function(k){var L=k.charCodeAt(),T=L>>8,Y=y[T];return Y!==void 0?d[256*Y+(255&L)]:T===252||T===253?"AL":x.test(T)?"L":T===8?"R":"N"},D=function(k){for(var L,T=0;T<k.length;T++){if((L=U(k.charAt(T)))==="L")return!1;if(L==="R")return!0}return!1},P=function(k,L,T,Y){var xe,Be,_e,se,me=L[Y];switch(me){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"N":case"AN":break;case"EN":I&&(me="AN");break;case"AL":I=!0,me="R";break;case"WS":case"BN":me="N";break;case"CS":Y<1||Y+1>=L.length||(xe=T[Y-1])!=="EN"&&xe!=="AN"||(Be=L[Y+1])!=="EN"&&Be!=="AN"?me="N":I&&(Be="AN"),me=Be===xe?Be:"N";break;case"ES":me=(xe=Y>0?T[Y-1]:"B")==="EN"&&Y+1<L.length&&L[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&T[Y-1]==="EN"){me="EN";break}if(I){me="N";break}for(_e=Y+1,se=L.length;_e<se&&L[_e]==="ET";)_e++;me=_e<se&&L[_e]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(se=L.length,_e=Y+1;_e<se&&L[_e]==="NSM";)_e++;if(_e<se){var Pe=k[Y],Se=Pe>=1425&&Pe<=2303||Pe===64286;if(xe=L[_e],Se&&(xe==="R"||xe==="AL")){me="R";break}}}me=Y<1||(xe=L[Y-1])==="B"?"N":T[Y-1];break;case"B":I=!1,s=!0,me=N;break;case"S":i=!0,me="N"}return me},E=function(k,L,T){var Y=k.split("");return T&&_(Y,T,{hiLevel:N}),Y.reverse(),L&&L.reverse(),Y.join("")},_=function(k,L,T){var Y,xe,Be,_e,se,me=-1,Pe=k.length,Se=0,M=[],H=N?g:p,K=[];for(I=!1,s=!1,i=!1,xe=0;xe<Pe;xe++)K[xe]=U(k[xe]);for(Be=0;Be<Pe;Be++){if(se=Se,M[Be]=P(k,K,M,Be),Y=240&(Se=H[se][v[M[Be]]]),Se&=15,L[Be]=_e=H[Se][5],Y>0)if(Y===16){for(xe=me;xe<Be;xe++)L[xe]=1;me=-1}else me=-1;if(H[Se][6])me===-1&&(me=Be);else if(me>-1){for(xe=me;xe<Be;xe++)L[xe]=_e;me=-1}K[Be]==="B"&&(L[Be]=0),T.hiLevel|=_e}i&&function(Z,ne,de){for(var Ae=0;Ae<de;Ae++)if(Z[Ae]==="S"){ne[Ae]=N;for(var pe=Ae-1;pe>=0&&Z[pe]==="WS";pe--)ne[pe]=N}}(K,L,Pe)},B=function(k,L,T,Y,xe){if(!(xe.hiLevel<k)){if(k===1&&N===1&&!s)return L.reverse(),void(T&&T.reverse());for(var Be,_e,se,me,Pe=L.length,Se=0;Se<Pe;){if(Y[Se]>=k){for(se=Se+1;se<Pe&&Y[se]>=k;)se++;for(me=Se,_e=se-1;me<_e;me++,_e--)Be=L[me],L[me]=L[_e],L[_e]=Be,T&&(Be=T[me],T[me]=T[_e],T[_e]=Be);Se=se}Se++}}},Q=function(k,L,T){var Y=k.split(""),xe={hiLevel:N};return T||(T=[]),_(Y,T,xe),function(Be,_e,se){if(se.hiLevel!==0&&u)for(var me,Pe=0;Pe<Be.length;Pe++)_e[Pe]===1&&(me=S.indexOf(Be[Pe]))>=0&&(Be[Pe]=S[me+1])}(Y,T,xe),B(2,Y,L,T,xe),B(1,Y,L,T,xe),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(k,L,T){if(function(xe,Be){if(Be)for(var _e=0;_e<xe.length;_e++)Be[_e]=_e;o===void 0&&(o=D(xe)),c===void 0&&(c=D(xe))}(k,L),a||!A||c)if(a&&A&&o^c)N=o?1:0,k=E(k,L,T);else if(!a&&A&&c)N=o?1:0,k=Q(k,L,T),k=E(k,L);else if(!a||o||A||c){if(a&&!A&&o^c)k=E(k,L),o?(N=0,k=Q(k,L,T)):(N=1,k=Q(k,L,T),k=E(k,L));else if(a&&o&&!A&&c)N=1,k=Q(k,L,T),k=E(k,L);else if(!a&&!A&&o^c){var Y=u;o?(N=1,k=Q(k,L,T),N=0,u=!1,k=Q(k,L,T),u=Y):(N=0,k=Q(k,L,T),k=E(k,L),N=1,u=!1,k=Q(k,L,T),u=Y,k=E(k,L))}}else N=0,k=Q(k,L,T);else N=o?1:0,k=Q(k,L,T);return k},this.__bidiEngine__.setOptions=function(k){k&&(a=k.isInputVisual,A=k.isOutputVisual,o=k.isInputRtl,c=k.isOutputRtl,u=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(qt),qt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new ql(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new $Y(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new UY(this.contents),this.head=new QY(this),this.name=new MY(this),this.cmap=new u6(this),this.toUnicode={},this.hhea=new jY(this),this.maxp=new OY(this),this.hmtx=new HY(this),this.post=new PY(this),this.os2=new RY(this),this.loca=new GY(this),this.glyf=new VY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,c;for(c=[],a=0,o=(A=this.bbox).length;a<o;a++)e=A[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var no,ql=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,A;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+A},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),UY=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,A,c,u,d,p,g,v,y;for(y in g=Object.keys(r).length,A=Math.log(2),d=16*Math.floor(Math.log(g)/A),a=Math.floor(d/A),u=16*g-d,(s=new ql).writeInt(this.scalarType),s.writeShort(g),s.writeShort(d),s.writeShort(a),s.writeShort(u),i=16*g,c=s.pos+i,o=null,v=[],r)for(p=r[y],s.writeString(y),s.writeInt(t(p)),s.writeInt(c),s.writeInt(p.length),v=v.concat(p),y==="head"&&(o=c),c+=p.length;c%4;)v.push(0),c++;return s.write(v),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=d6.call(r);r.length%4;)r.push(0);for(i=new ql(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),LY={}.hasOwnProperty,Lo=function(t,e){for(var r in e)LY.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};no=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var QY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new ql).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),rk=function(){function t(e,r){var n,s,i,a,o,A,c,u,d,p,g,v,y,S,x,I,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,i=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),e.pos+=2,y=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),c=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),u=function(){var U,D;for(D=[],A=U=0;0<=p?U<p:U>p;A=0<=p?++U:--U)D.push(e.readUInt16());return D}(),s=(this.length-e.pos+this.offset)/2,o=function(){var U,D;for(D=[],A=U=0;0<=s?U<s:U>s;A=0<=s?++U:--U)D.push(e.readUInt16());return D}(),A=x=0,N=i.length;x<N;A=++x)for(S=i[A],n=I=v=y[A];v<=S?I<=S:I>=S;n=v<=S?++I:--I)u[A]===0?a=n+c[A]:(a=o[u[A]/2+(n-v)-(p-A)]||0)!==0&&(a+=c[A]),this.codeMap[n]=65535&a}e.pos=d}return t.encode=function(e,r){var n,s,i,a,o,A,c,u,d,p,g,v,y,S,x,I,N,U,D,P,E,_,B,Q,k,L,T,Y,xe,Be,_e,se,me,Pe,Se,M,H,K,Z,ne,de,Ae,pe,Ee,Oe,rt;switch(Y=new ql,a=Object.keys(e).sort(function(ke,ce){return ke-ce}),r){case"macroman":for(y=0,S=function(){var ke=[];for(v=0;v<256;++v)ke.push(0);return ke}(),I={0:0},i={},xe=0,me=a.length;xe<me;xe++)I[pe=e[s=a[xe]]]==null&&(I[pe]=++y),i[s]={old:e[s],new:I[e[s]]},S[s]=I[e[s]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(S),{charMap:i,subtable:Y.data,maxGlyphID:y+1};case"unicode":for(L=[],d=[],N=0,I={},n={},x=c=null,Be=0,Pe=a.length;Be<Pe;Be++)I[D=e[s=a[Be]]]==null&&(I[D]=++N),n[s]={old:D,new:I[D]},o=I[D]-s,x!=null&&o===c||(x&&d.push(x),L.push(s),c=o),x=s;for(x&&d.push(x),d.push(65535),L.push(65535),Q=2*(B=L.length),_=2*Math.pow(Math.log(B)/Math.LN2,2),p=Math.log(_/2)/Math.LN2,E=2*B-_,A=[],P=[],g=[],v=_e=0,Se=L.length;_e<Se;v=++_e){if(k=L[v],u=d[v],k===65535){A.push(0),P.push(0);break}if(k-(T=n[k].new)>=32768)for(A.push(0),P.push(2*(g.length+B-v)),s=se=k;k<=u?se<=u:se>=u;s=k<=u?++se:--se)g.push(n[s].new);else A.push(T-k),P.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*B+2*g.length),Y.writeUInt16(0),Y.writeUInt16(Q),Y.writeUInt16(_),Y.writeUInt16(p),Y.writeUInt16(E),de=0,M=d.length;de<M;de++)s=d[de],Y.writeUInt16(s);for(Y.writeUInt16(0),Ae=0,H=L.length;Ae<H;Ae++)s=L[Ae],Y.writeUInt16(s);for(Ee=0,K=A.length;Ee<K;Ee++)o=A[Ee],Y.writeUInt16(o);for(Oe=0,Z=P.length;Oe<Z;Oe++)U=P[Oe],Y.writeUInt16(U);for(rt=0,ne=g.length;rt<ne;rt++)y=g[rt],Y.writeUInt16(y);return{charMap:n,subtable:Y.data,maxGlyphID:N+1}}},t}(),u6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new rk(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=rk.encode(e,r),(s=new ql).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),jY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),RY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),PY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,A;for(A=[],i=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;i=0<=o?++a:--a)A.push(e.readUInt32());return A}).call(this)}},t}(),DY=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},MY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,i,a,o,A,c,u,d,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(A={},i=u=0,d=n.length;u<d;i=++u)s=n[i],e.pos=s.offset,c=e.readString(s.length),a=new DY(c,s),A[p=s.nameID]==null&&(A[p]=[]),A[s.nameID].push(a);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t}(),OY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),HY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,i,a,o,A;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(e.readInt16());return u}(),this.widths=(function(){var c,u,d,p;for(p=[],c=0,u=(d=this.metrics).length;c<u;c++)i=d[c],p.push(i.advance);return p}).call(this),n=this.widths[this.widths.length-1],A=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)A.push(this.widths.push(n));return A},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),d6=[].slice,VY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,i,a,o,A,c,u,d;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new ql(r.read(s))).readShort(),c=o.readShort(),d=o.readShort(),A=o.readShort(),u=o.readShort(),this.cache[e]=a===-1?new zY(o,c,d,A,u):new KY(o,a,c,d,A,u),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,i,a,o,A;for(a=[],i=[],o=0,A=r.length;o<A;o++)s=e[r[o]],i.push(a.length),s&&(a=a.concat(s.encode(n)));return i.push(a.length),{table:a,offsets:i}},t}(),KY=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),zY=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new ql(d6.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),GY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,no),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<n.length;++a)if(n[a]=s,i<r.length&&r[i]==a){++i,n[a]=s;var o=this.offsets[a],A=this.offsets[a+1]-o;A>0&&(s+=A)}for(var c=new Array(4*n.length),u=0;u<n.length;++u)c[4*u+3]=255&n[u],c[4*u+2]=(65280&n[u])>>8,c[4*u+1]=(16711680&n[u])>>16,c[4*u]=(4278190080&n[u])>>24;return c},t}(),$Y=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,A;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in A=this.glyphsFor(r))n=A[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,A,c,u,d,p,g,v,y,S,x;for(s in n=u6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),g={0:0},x=n.charMap)g[(A=x[s]).old]=A.new;for(v in p=n.maxGlyphID,a)v in g||(g[v]=p++);return u=function(I){var N,U;for(N in U={},I)U[I[N]]=N;return U}(g),d=Object.keys(u).sort(function(I,N){return I-N}),y=function(){var I,N,U;for(U=[],I=0,N=d.length;I<N;I++)o=d[I],U.push(u[o]);return U}(),i=this.font.glyf.encode(a,y,g),c=this.font.loca.encode(i.offsets,y),S={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t}();qt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,A,c;for(c=[],o=0,A=r.length;o<A;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const Ba=t=>{if(!t)return 0;const[e,r]=t.split(":").map(Number);return e*60+r},Sg=t=>{let e=Math.floor(t/60),r=t%60;return e>=24&&(e-=24),e<0&&(e+=24),`${String(e).padStart(2,"0")}:${String(r).padStart(2,"0")}`},qY=()=>{var ue,je;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:i}=Pi(),[a,o]=G.useState("teachers"),[A,c]=G.useState(!1),[u,d]=G.useState(null),[p,g]=G.useState({}),[v,y]=G.useState({}),[S,x]=G.useState({}),[I,N]=G.useState({}),[U,D]=G.useState("preset_normal"),[P,E]=G.useState([]),[_,B]=G.useState(!1),[Q,k]=G.useState(""),[L,T]=G.useState(Ze.First),[Y,xe]=G.useState(!1),[Be,_e]=G.useState(new Date().toISOString().split("T")[0]),se=G.useRef(null),[me,Pe]=G.useState(null);G.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const q=s.bellPresets.find(le=>le.id===U);if(q){E(q.bells);return}}E(Mm)},[U,s.bellPresets]);const Se=q=>{d(q||null),a==="teachers"?g(q?e.find(le=>le.id===q)??{}:{subjectIds:[],unavailableDates:[],shifts:[Ze.First,Ze.Second],telegramChatId:""}):a==="subjects"?y(q?t.find(le=>le.id===q)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):a==="classes"?x(q?r.find(le=>le.id===q)??{}:{shift:Ze.First,studentsCount:25,excludeFromReports:!1}):a==="rooms"&&N(q?n.find(le=>le.id===q)??{}:{capacity:30,type:""}),c(!0)},M=async()=>{const q={teachers:{list:e,form:p,key:"teachers"},subjects:{list:t,form:v,key:"subjects"},classes:{list:r,form:S,key:"classes"},rooms:{list:n,form:I,key:"rooms"}};if(a==="bells"||!(a in q))return;const le=q[a],{list:ae,form:he,key:Te}=le;if(!he.name)return;let Re=[...ae];if(u)Re=Re.map(Ge=>Ge.id===u?{...Ge,...he}:Ge);else{const Ge=ae.reduce((Et,pt)=>Math.max(Et,pt.order||0),0),Ke={...he,id:ai(),order:Ge+1};Re.push(Ke)}await i({[Te]:Re}),c(!1)},H=async q=>{if(window.confirm(" ?"))switch(a){case"teachers":await i({teachers:e.filter(le=>le.id!==q)});break;case"subjects":await i({subjects:t.filter(le=>le.id!==q)});break;case"classes":await i({classes:r.filter(le=>le.id!==q)});break;case"rooms":await i({rooms:n.filter(le=>le.id!==q)});break}},K=(q,le)=>{Pe(le),q.dataTransfer.effectAllowed="move"},Z=q=>{q.preventDefault()},ne=async(q,le)=>{if(me===null||me===le)return;const ae=he=>{const Te=[...he],[Re]=Te.splice(me,1);return Te.splice(le,0,Re),Te.map((Ge,Ke)=>({...Ge,order:Ke}))};switch(a){case"teachers":{await i({teachers:ae(e)});break}case"subjects":{await i({subjects:ae(t)});break}case"classes":{await i({classes:ae(r)});break}case"rooms":{await i({rooms:ae(n)});break}}Pe(null)},de=(q,le,ae,he)=>{let Te=[...P],Re=Te.findIndex(Ke=>Ke.shift===q&&Ke.period===le&&Ke.day==="default");Re===-1&&(Te.push({shift:q,period:le,[ae]:he,start:"00:00",end:"00:00",day:"default"}),Re=Te.length-1);const Ge=Te[Re];if(ae==="start"){const Ke=Ba(Ge.start),pt=Ba(Ge.end)-Ke,ot=Ba(he)+(pt>0?pt:45);Te[Re]={...Ge,start:he,end:Sg(ot)}}else Te[Re]={...Ge,end:he};E(Te)},Ae=(q,le)=>{const ae=[...P],he=ae.findIndex(Te=>Te.shift===q&&Te.period===le&&Te.day==="default");he>=0?ae[he]={...ae[he],cancelled:!ae[he].cancelled}:ae.push({shift:q,period:le,start:"00:00",end:"00:00",day:"default",cancelled:!0}),E(ae)},pe=(q,le)=>{const ae=P.map(he=>{if(he.shift!==q)return he;const Te=Ba(he.start)+le,Re=Ba(he.end)+le;return{...he,start:Sg(Te),end:Sg(Re)}});E(ae)},Ee=(q,le)=>{const ae=P.map(he=>{if(he.shift!==q)return he;const Te=Ba(he.start);return{...he,end:Sg(Te+le)}});E(ae)},Oe=async()=>{let q=[...s.bellPresets||[]];const le=q.findIndex(ae=>ae.id===U);le>=0?q[le]={...q[le],bells:P}:q.push({id:U,name:Q||" ",bells:P}),await i({settings:{...s,bellPresets:q}}),alert(" !")},rt=()=>{k(""),B(!0)},ke=()=>{var le;const q=(le=s.bellPresets)==null?void 0:le.find(ae=>ae.id===U);k(((q==null?void 0:q.name)||"")+" ()"),B(!0)},ce=async()=>{if(!Q)return;const q=`preset_${ai()}`,le=[...s.bellPresets||[]];le.push({id:q,name:Q,bells:JSON.parse(JSON.stringify(P))}),await i({settings:{...s,bellPresets:le}}),D(q),B(!1)},R=async()=>{var ae;if(U==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const q=(s.bellPresets||[]).filter(he=>he.id!==U),le=((ae=q[0])==null?void 0:ae.id)||"preset_normal";D(le),await i({settings:{...s,bellPresets:q}})},Ce=async()=>{var q,le;window.confirm(`   "${(le=(q=s.bellPresets)==null?void 0:q.find(ae=>ae.id===U))==null?void 0:le.name}"   ?`)&&(await i({bellSchedule:P}),alert("  !"))},Me=()=>{var le;const q=(le=s.bellPresets)==null?void 0:le.find(ae=>ae.id===U);return`
            <div style="font-family: 'Segoe UI', Arial, sans-serif; padding: 10px 40px 20px 40px; background: white; width: 1000px; max-width: 1000px; margin: 0 auto; color: #1e293b; box-sizing: border-box;">
                <div style="text-align: center; margin-bottom: 25px; padding-top: 10px;">
                    <h1 style="font-size: 32px; font-weight: 900; text-transform: uppercase; color: #1e293b; margin: 0 0 5px 0; letter-spacing: -0.5px;">
                         
                    </h1>
                    <p style="font-size: 20px; color: #64748b; font-weight: 600; margin: 0;">
                        : <span style="color: #4f46e5;">${(q==null?void 0:q.name)||""}</span>
                        ${Be?`<br> ${new Date(Be).toLocaleDateString("ru-RU")}`:""}
                    </p>
                    <div style="height: 6px; width: 80px; background: #4f46e5; margin: 15px auto 0; border-radius: 4px;"></div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                    ${[Ze.First,Ze.Second].map(ae=>{const he=P.filter(Te=>Te.shift===ae);return`
                            <div style="background: #fff; border: 2px solid #e2e8f0; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);">
                                <div style="background: ${ae===Ze.First?"#4f46e5":"#7c3aed"}; color: white; padding: 12px; text-align: center; font-weight: 800; font-size: 16px; text-transform: uppercase; letter-spacing: 1px;">
                                    ${ae}
                                </div>
                                <div style="padding: 20px;">
                                    ${Os[ae].map(Te=>{const Re=he.find(Ge=>Ge.period===Te&&Ge.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return Re.cancelled?`
                                                <div style="display: flex; align-items: center; margin-bottom: 10px; padding: 8px 12px; background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 10px;">
                                                    <div style="width: 40px; height: 40px; line-height: 40px; text-align: center; border-radius: 50%; background: #fee2e2; color: #991b1b; font-weight: bold; margin-right: 15px; font-size: 20px; flex-shrink: 0;">${Te}</div>
                                                    <div style="font-weight: 800; color: #dc2626; text-transform: uppercase; font-size: 13px; letter-spacing: 0.5px;"> </div>
                                                </div>
                                            `:`
                                            <div style="display: flex; align-items: center; margin-bottom: 10px; padding: 8px 12px; background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 10px;">
                                                <div style="width: 40px; height: 40px; line-height: 40px; text-align: center; border-radius: 50%; background: #e2e8f0; color: #475569; font-weight: bold; margin-right: 15px; font-size: 20px; flex-shrink: 0;">${Te}</div>
                                                <div style="flex: 1; display: flex; justify-content: space-between; align-items: center; font-weight: bold; font-size: 28px; color: #0f172a; font-variant-numeric: tabular-nums;">
                                                    <span>${Re.start}</span>
                                                    <span style="color: #cbd5e1; font-weight: normal; margin: 0 10px;">&mdash;</span>
                                                    <span>${Re.end}</span>
                                                </div>
                                            </div>
                                        `}).join("")}
                                </div>
                            </div>
                        `}).join("")}
                </div>

                <div style="margin-top: 40px; padding-top: 15px; border-top: 2px solid #e2e8f0; display: flex; justify-content: space-between; align-items: flex-end;">
                    <div style="font-size: 12px; font-weight: bold; color: #64748b;">
                        <div style="text-transform: uppercase; margin-bottom: 4px; letter-spacing: 0.5px;"></div>
                        <div style="color: #0f172a;"> </div>
                    </div>
                    <div style="text-align: right;">
                         <div style="border-bottom: 2px solid #94a3b8; width: 180px; margin-bottom: 4px;"></div>
                         <div style="font-size: 10px; color: #94a3b8; text-transform: uppercase;"></div>
                    </div>
                </div>
            </div>
        `},st=async()=>{var he;if(!se.current)return;const q=await qd(se.current,{scale:2,backgroundColor:"#ffffff"}),le=document.createElement("a");le.href=q.toDataURL("image/png");const ae=(he=s.bellPresets)==null?void 0:he.find(Te=>Te.id===U);le.download=`_${(ae==null?void 0:ae.name)||""}.png`,le.click()},ge=async()=>{var Ge;if(!se.current)return;const q=await qd(se.current,{scale:2,backgroundColor:"#ffffff"}),le=q.toDataURL("image/png"),ae=new qt("p","mm","a4"),he=ae.internal.pageSize.getWidth(),Te=q.height*he/q.width;ae.addImage(le,"PNG",0,0,he,Te);const Re=(Ge=s.bellPresets)==null?void 0:Ge.find(Ke=>Ke.id===U);ae.save(`_${(Re==null?void 0:Re.name)||""}.pdf`)},be=()=>{var Re;const q=(Re=s.bellPresets)==null?void 0:Re.find(Ge=>Ge.id===U);let le=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 8px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 18pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 16pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #312e81; color: white; border: 2px solid #000; }
                    .lesson-header { font-size: 14pt; font-weight: bold; background-color: #e5e7eb; border: 2px solid #000; }
                    .time-cell { font-size: 16pt; font-weight: bold; background-color: #fff; width: 150px; }
                    .cancelled-cell { font-size: 14pt; font-weight: bold; background-color: #fef2f2; color: #dc2626; text-transform: uppercase; letter-spacing: 0.1em; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 11pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 11pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 15px; }
                </style>
            </head>
            <body>
        `;le+=`
            <table>
                <tr>
                    <td colspan="2" style="border:none"></td>
                    <td colspan="2" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        __________ ..<br>
                        "__" ______ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="4" style="border:none"></td></tr>
            </table>
        `,le+=`
            <table>
                <tr><td colspan="4" class="title-main"> </td></tr>
                ${Be?`<tr><td colspan="4" class="title-sub"> ${new Date(Be).toLocaleDateString("ru-RU")}</td></tr>`:""}
                <tr><td colspan="4" class="title-sub">: ${(q==null?void 0:q.name)||""}</td></tr>
                <tr class="empty-row"><td colspan="4" style="border:none"></td></tr>
                <tr>
                    <th class="lesson-header"></th>
                    <th class="lesson-header"> </th>
                    <th class="lesson-header"> </th>
                    <th class="lesson-header"> </th>
                </tr>
        `,[Ze.First,Ze.Second].forEach(Ge=>{const Ke=Ge===Ze.First?"1- ":"2- ";Os[Ge].forEach((Et,pt)=>{const ht=P.find(ot=>ot.shift===Ge&&ot.period===Et&&ot.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};le+=`
                    <tr>
                        ${pt===0?`<td rowspan="${Os[Ge].length}" class="shift-header">${Ke}</td>`:""}
                        <td class="lesson-header">${Et}</td>
                        ${ht.cancelled?'<td colspan="2" class="cancelled-cell"> </td>':`<td class="time-cell">${ht.start}</td><td class="time-cell">${ht.end}</td>`}
                    </tr>
                `}),le+='<tr class="empty-row"><td colspan="4" style="border:none"></td></tr>'}),le+=`
                <tr class="empty-row"><td colspan="4" style="border:none"></td></tr>
                <tr>
                    <td colspan="4" class="footer-block">
                        : ${new Date().toLocaleDateString("ru-RU")}  ${new Date().toLocaleTimeString("ru-RU")}
                    </td>
                </tr>
            </table>
            </body>
            </html>
        `;const ae=new Blob([le],{type:"application/vnd.ms-excel"}),he=document.createElement("a");he.href=URL.createObjectURL(ae);const Te=Be?`_${new Date(Be).toLocaleDateString("ru-RU").replace(/\./g,"-")}`:"";he.download=`__${(q==null?void 0:q.name)||""}${Te}.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},we=({shift:q})=>{const le=Os[q],ae=P.filter(he=>he.shift===q&&he.day==="default");return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white text-center bg-gradient-to-r ${q===Ze.First?"from-indigo-600 to-indigo-700":"from-purple-600 to-purple-700"}`,children:q}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-2 flex justify-center gap-2 border-b border-slate-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>pe(q,-5),className:"px-2 py-1 text-xs font-bold text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded shadow-sm border border-slate-200 dark:border-slate-500",children:"-5 "}),l.jsx("button",{onClick:()=>pe(q,5),className:"px-2 py-1 text-xs font-bold text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded shadow-sm border border-slate-200 dark:border-slate-500",children:"+5 "}),l.jsx("div",{className:"w-px h-6 bg-slate-300 dark:bg-slate-600 mx-1"}),l.jsx("button",{onClick:()=>Ee(q,45),className:"px-2 py-1 text-xs font-bold text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded border border-indigo-200 dark:border-indigo-800",children:"45 "}),l.jsx("button",{onClick:()=>Ee(q,40),className:"px-2 py-1 text-xs font-bold text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded border border-indigo-200 dark:border-indigo-800",children:"40 "})]}),l.jsxs("div",{className:"p-4 space-y-2 relative flex-1 overflow-y-auto custom-scrollbar",children:[l.jsx("div",{className:"absolute left-[2.85rem] top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700 z-0"}),le.map((he,Te)=>{const Re=ae.find(ht=>ht.period===he)||{start:"00:00",end:"00:00",cancelled:!1},Ge=Te>0?ae.find(ht=>ht.period===le[Te-1]):null,Ke=Ge&&Ba(Re.start)<Ba(Ge.end),Et=Ba(Re.end)<=Ba(Re.start);let pt=0;return Ge&&(pt=Ba(Re.start)-Ba(Ge.end)),l.jsxs(yo.Fragment,{children:[Te>0&&l.jsxs("div",{className:"flex items-center gap-4 relative z-10 my-1",children:[l.jsx("div",{className:"w-12 flex justify-center",children:l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-500"})}),l.jsxs("div",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1 ${pt<5?"bg-red-100 text-red-600":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:[l.jsx(ve,{name:"Coffee",size:10}),pt," "]})]}),l.jsxs("div",{className:`relative z-10 flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${Re.cancelled?"bg-[linear-gradient(45deg,#fef2f2_25%,#fee2e2_25%,#fee2e2_50%,#fef2f2_50%,#fef2f2_75%,#fee2e2_75%,#fee2e2_100%)] bg-[length:20px_20px] border-red-200 dark:border-red-900/50":"bg-white dark:bg-slate-700/30 border-slate-100 dark:border-slate-600 hover:border-indigo-200 dark:hover:border-indigo-500"}`,children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-lg shadow-sm border-2 ${Re.cancelled?"bg-white text-red-400 border-red-100":"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-600 dark:to-slate-700 text-slate-600 dark:text-slate-300 border-white dark:border-slate-500"}`,children:he}),Re.cancelled?l.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[l.jsx("span",{className:"text-red-500 font-bold uppercase text-xs tracking-wider bg-white/80 px-2 py-1 rounded",children:" "}),l.jsx("button",{onClick:()=>Ae(q,he),className:"p-2 bg-white text-emerald-600 hover:bg-emerald-50 rounded-lg transition shadow-sm",children:l.jsx(ve,{name:"RotateCcw",size:16})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex-1 grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"time",value:Re.start,onChange:ht=>de(q,he,"start",ht.target.value),className:`w-full bg-slate-50 dark:bg-slate-800 border rounded-lg px-2 py-1 text-center font-mono font-bold text-lg outline-none focus:ring-2 focus:ring-indigo-500 ${Ke?"border-red-500 text-red-600":"border-slate-200 dark:border-slate-600 dark:text-white"}`}),Ke&&l.jsx("div",{className:"absolute -top-2 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),l.jsx("span",{className:"text-slate-300 dark:text-slate-600 font-bold",children:"-"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"time",value:Re.end,onChange:ht=>de(q,he,"end",ht.target.value),className:`w-full bg-slate-50 dark:bg-slate-800 border rounded-lg px-2 py-1 text-center font-mono font-bold text-lg outline-none focus:ring-2 focus:ring-indigo-500 ${Et?"border-red-500 text-red-600":"border-slate-200 dark:border-slate-600 dark:text-white"}`})})]}),l.jsx("button",{onClick:()=>Ae(q,he),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-slate-50 dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(ve,{name:"X",size:16})})]})]})]},he)})]})]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(q=>l.jsxs("button",{onClick:()=>o(q.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${a===q.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(ve,{name:q.icon,size:18})," ",q.label]},q.id))}),a!=="bells"&&l.jsxs("button",{onClick:()=>Se(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(ve,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[a==="teachers"&&l.jsx(X0,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:ae=>K(ae,le),onDragOver:Z,onDrop:ae=>ne(ae,le),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ve,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:q.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(ve,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(ve,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:q.birthDate?`: ${new Date(q.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[q.shifts.includes(Ze.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),q.shifts.includes(Ze.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:q.subjectIds.map(ae=>{const he=t.find(Te=>Te.id===ae);return he?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:he.color,color:"#334155"},children:he.name},ae):null})})]},q.id))}),a==="subjects"&&l.jsx(X0,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:ae=>K(ae,le),onDragOver:Z,onDrop:ae=>ne(ae,le),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:q.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ve,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",q.difficulty,"  ",q.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(ve,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(ve,{name:"Trash2",size:16})})]})]},q.id))}),a==="classes"&&l.jsx(X0,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:ae=>K(ae,le),onDragOver:Z,onDrop:ae=>ne(ae,le),className:`bg-white dark:bg-dark-800 p-4 rounded-2xl border ${q.excludeFromReports?"border-dashed border-slate-300 bg-slate-50":"border-slate-100"} dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing`,children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(ve,{name:"GripVertical",size:14})}),l.jsx("div",{className:`text-2xl font-black ${q.excludeFromReports?"text-slate-400":"text-slate-800 dark:text-slate-100"} mb-1`,children:q.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[q.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${q.shift===Ze.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[q.shift===Ze.First?"I":"II"," "]}),q.excludeFromReports&&l.jsx("div",{className:"mt-2 text-[10px] text-slate-400 font-bold uppercase border border-slate-200 rounded px-1 inline-block",children:""}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(ve,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(ve,{name:"Trash2",size:14})})]})]},q.id))}),a==="rooms"&&l.jsx(X0,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((q,le)=>l.jsxs("div",{draggable:!0,onDragStart:ae=>K(ae,le),onDragOver:Z,onDrop:ae=>ne(ae,le),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ve,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(ve,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",q.capacity,"  ",q.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Se(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(ve,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>H(q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(ve,{name:"Trash2",size:16})})]})]},q.id))}),a==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row gap-4 items-start md:items-center justify-between sticky top-0 z-20",children:[l.jsxs("div",{className:"flex flex-col gap-2 w-full md:w-auto",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:" "}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0 custom-scrollbar",children:[(s.bellPresets||[]).map(q=>l.jsxs("div",{onClick:()=>D(q.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border transition-all cursor-pointer whitespace-nowrap group ${U===q.id?"bg-indigo-600 border-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:border-indigo-300 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:[l.jsx("span",{className:"text-sm font-bold",children:q.name}),U===q.id&&l.jsxs("div",{className:"flex items-center gap-1 ml-2 border-l border-indigo-400 pl-2",children:[l.jsx("button",{onClick:le=>{le.stopPropagation(),ke()},className:"text-indigo-100 hover:text-white p-1 rounded hover:bg-indigo-500/50 transition-colors",title:"",children:l.jsx(ve,{name:"Copy",size:14})}),l.jsx("button",{onClick:le=>{le.stopPropagation(),R()},className:"text-indigo-200 hover:text-red-200 p-1 rounded hover:bg-red-500/20 transition-colors",title:"",children:l.jsx(ve,{name:"Trash2",size:14})})]})]},q.id)),l.jsx("button",{onClick:rt,className:"p-2 bg-slate-100 dark:bg-slate-700 text-slate-500 hover:bg-slate-200 rounded-xl",title:"",children:l.jsx(ve,{name:"Plus",size:20})})]})]}),l.jsxs("div",{className:"flex gap-3 flex-wrap items-end w-full md:w-auto justify-end",children:[l.jsxs("button",{onClick:Oe,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(ve,{name:"Save",size:18})," "]}),l.jsxs("button",{onClick:Ce,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(ve,{name:"CheckCircle",size:18})," "]}),l.jsxs("button",{onClick:()=>xe(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(ve,{name:"Printer",size:18}),"  / "]})]})]}),l.jsxs("div",{className:"lg:hidden flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>T(Ze.First),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${L===Ze.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>T(Ze.Second),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${L===Ze.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[l.jsx("div",{className:`${L===Ze.First?"block":"hidden lg:block"}`,children:l.jsx(we,{shift:Ze.First})}),l.jsx("div",{className:`${L===Ze.Second?"block":"hidden lg:block"}`,children:l.jsx(we,{shift:Ze.Second})})]})]})]}),l.jsx(cs,{isOpen:A,onClose:()=>c(!1),title:u?"":"",children:l.jsxs("div",{className:"space-y-4",children:[a==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:p.name||"",onChange:q=>g({...p,name:q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.birthDate||"",onChange:q=>g({...p,birthDate:q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.telegramChatId||"",onChange:q=>g({...p,telegramChatId:q.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(ue=p.shifts)==null?void 0:ue.includes(Ze.First),onChange:()=>{const q=p.shifts||[];g({...p,shifts:q.includes(Ze.First)?q.filter(le=>le!==Ze.First):[...q,Ze.First]})}})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(je=p.shifts)==null?void 0:je.includes(Ze.Second),onChange:()=>{const q=p.shifts||[];g({...p,shifts:q.includes(Ze.Second)?q.filter(le=>le!==Ze.Second):[...q,Ze.Second]})}})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(q=>{var le;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(le=p.subjectIds)==null?void 0:le.includes(q.id),onChange:ae=>{const he=p.subjectIds||[];g({...p,subjectIds:ae.target.checked?[...he,q.id]:he.filter(Te=>Te!==q.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:q.name})]},q.id)})})]}),a==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:v.name||"",onChange:q=>y({...v,name:q.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:v.color||"#ffffff",onChange:q=>y({...v,color:q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",inputMode:"numeric",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.difficulty||5,onChange:q=>y({...v,difficulty:parseInt(q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.requiredRoomType,onChange:q=>y({...v,requiredRoomType:q.target.value}),children:Z_.map(q=>l.jsx("option",{value:q,children:q},q))})]})]}),a==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:S.name||"",onChange:q=>x({...S,name:q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:S.studentsCount||25,onChange:q=>x({...S,studentsCount:parseInt(q.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>x({...S,shift:Ze.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${S.shift===Ze.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>x({...S,shift:Ze.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${S.shift===Ze.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("label",{className:"flex items-center gap-2 mt-4 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:S.excludeFromReports||!1,onChange:q=>x({...S,excludeFromReports:q.target.checked})}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"   "})]}),l.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"      ,     ."})]}),a==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:I.name||"",onChange:q=>N({...I,name:q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.capacity||30,onChange:q=>N({...I,capacity:parseInt(q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.type,onChange:q=>N({...I,type:q.target.value}),children:Z_.map(q=>l.jsx("option",{value:q,children:q},q))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:M,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),l.jsx(cs,{isOpen:_,onClose:()=>B(!1),title:"  ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:Q,onChange:q=>k(q.target.value),autoFocus:!0})]}),l.jsx("div",{className:"flex justify-end pt-2",children:l.jsx("button",{onClick:ce,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})}),l.jsx(cs,{isOpen:Y,onClose:()=>xe(!1),title:"  ",maxWidth:"max-w-6xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("label",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"  :"}),l.jsx("input",{type:"date",value:Be,onChange:q=>_e(q.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-xl text-sm font-bold bg-white dark:bg-slate-800 dark:text-white"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:st,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition flex items-center gap-2 text-sm shadow-lg shadow-emerald-200 dark:shadow-none",children:[l.jsx(ve,{name:"Image",size:18}),"  PNG"]}),l.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition flex items-center gap-2 text-sm shadow-lg shadow-red-200 dark:shadow-none",children:[l.jsx(ve,{name:"FileSpreadsheet",size:18}),"  PDF"]}),l.jsxs("button",{onClick:be,className:"px-4 py-2 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition flex items-center gap-2 text-sm shadow-lg shadow-green-200 dark:shadow-none",children:[l.jsx(ve,{name:"Table",size:18}),"  Excel"]})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-200 dark:bg-slate-900/50 p-6 rounded-2xl border border-slate-300 dark:border-slate-700 flex justify-center",children:l.jsx("div",{ref:se,dangerouslySetInnerHTML:{__html:Me()}})})]})})]})},WY=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:i}=Pi(),{schedule1:a,schedule2:o,substitutions:A,saveScheduleData:c}=CA(),{addToast:u}=w1(),d=Yl(),[p,g]=G.useState(iA()),v=G.useRef(null),[y,S]=G.useState("pending"),[x,I]=G.useState("teacher"),[N,U]=G.useState(!1),[D,P]=G.useState(!1),[E,_]=G.useState(null),[B,Q]=G.useState(!1),[k,L]=G.useState(!1),[T,Y]=G.useState(!1),[xe,Be]=G.useState(!1),[_e,se]=G.useState(null),[me,Pe]=G.useState(null),[Se,M]=G.useState(""),[H,K]=G.useState(""),[Z,ne]=G.useState(""),[de,Ae]=G.useState(""),[pe,Ee]=G.useState("all"),[Oe,rt]=G.useState(""),[ke,ce]=G.useState(""),[R,Ce]=G.useState(""),[Me,st]=G.useState(""),[ge,be]=G.useState(null),[we,ue]=G.useState([]),[je,q]=G.useState(!1),[le,ae]=G.useState(!1),[he,Te]=G.useState(!1),[Re,Ge]=G.useState(null),[Ke,Et]=G.useState(null),pt=mU({maxWidth:767}),[ht,ot]=G.useState("lessons"),Je=G.useMemo(()=>{const oe={schedule:a,schedule2:o,settings:s};return iU(new Date(p),oe)},[p,a,o,s]);G.useEffect(()=>{var oe;(oe=d.state)!=null&&oe.subParams&&(_(d.state.subParams),Ce(""),st(""),ue([]),be(null),q(!1),ae(!1),Te(!1),I("teacher"),P(!0),window.history.replaceState({},document.title))},[d.state]),G.useEffect(()=>{if(D&&E){if(E.isEditing)return;const oe=A.find(Ue=>Ue.scheduleItemId===E.scheduleItemId&&Ue.date===p);oe?(ue(oe.refusals||[]),oe.replacementTeacherId==="cancelled"?I("cancel"):oe.isMerger||oe.replacementClassId?I("advanced"):I("teacher"),oe.replacementTeacherId&&!["conducted","cancelled"].includes(oe.replacementTeacherId)&&be(oe.replacementTeacherId)):(ue([]),I("teacher"),be(null)),q(!1),ae(!1),Te(!1)}},[D,E,A,p]);const qe=G.useMemo(()=>{const oe=new Date(p).getDay();return oe===0||oe===6?null:Ur[oe-1]},[p]),Tt=oe=>{const Ue=new Date(p);Ue.setDate(Ue.getDate()+oe),g(iA(Ue))},_t=()=>{g(iA(new Date))},kt=()=>{v.current&&v.current.showPicker()},Wt=G.useMemo(()=>e.filter(oe=>{const Ue=oe.name.toLowerCase().includes(de.toLowerCase()),tt=pe==="all"?!0:oe.shifts&&oe.shifts.includes(pe);return Ue&&tt}),[e,de,pe]),Ot=G.useMemo(()=>e.filter(oe=>oe.unavailableDates.includes(p)),[e,p]),vt=G.useMemo(()=>{if(!qe)return[];const oe=Ot.map(bt=>bt.id),Ue=Je.filter(bt=>bt.day===qe&&oe.includes(bt.teacherId)),it=A.filter(bt=>bt.date===p).map(bt=>bt.scheduleItemId),ut=Je.filter(bt=>it.includes(bt.id)),Nt=[...Ue];return ut.forEach(bt=>{Nt.find(or=>or.id===bt.id)||Nt.push(bt)}),Nt.sort((bt,or)=>bt.period-or.period)},[Je,qe,Ot,A,p]),{pendingLessons:Ht,resolvedLessons:rn}=G.useMemo(()=>{const oe=[],Ue=[];return vt.forEach(tt=>{A.filter(ut=>ut.scheduleItemId===tt.id&&ut.date===p).length>0?Ue.push(tt):oe.push(tt)}),{pendingLessons:oe,resolvedLessons:Ue}},[vt,A,p]),jr=oe=>{var tt;const Ue=e.find(it=>it.id===oe);Pe(oe),M(((tt=Ue==null?void 0:Ue.absenceReasons)==null?void 0:tt[p])||""),Q(!0)},Vr=G.useCallback(async()=>{let oe=[...e];const Ue=oe.findIndex(it=>it.id===me);if(Ue===-1)return;const tt={...oe[Ue]};tt.unavailableDates.includes(p)||(tt.unavailableDates=[...tt.unavailableDates,p]),tt.absenceReasons||(tt.absenceReasons={}),tt.absenceReasons[p]=Se,oe[Ue]=tt,await i({teachers:oe}),Q(!1)},[e,me,p,Se,i]),tr=G.useCallback(async oe=>{let Ue=[...e];const tt=Ue.findIndex(ut=>ut.id===oe);if(tt===-1)return;const it={...Ue[tt]};it.unavailableDates=it.unavailableDates.filter(ut=>ut!==p),it.absenceReasons&&delete it.absenceReasons[p],Ue[tt]=it,await i({teachers:Ue})},[e,p,i]),Qt=G.useCallback(async(oe,Ue=!1)=>{if(!E){alert(":   .    .");return}const tt=Je.find(Nt=>Nt.id===E.scheduleItemId);if(!tt){alert(":     .");return}const it=A.filter(Nt=>!(Nt.scheduleItemId===E.scheduleItemId&&Nt.date===p)),ut={id:ai(),date:p,scheduleItemId:E.scheduleItemId,originalTeacherId:tt.teacherId,replacementTeacherId:oe,replacementRoomId:R||void 0,isMerger:Ue,lessonAbsenceReason:oe!=="conducted"&&oe!=="cancelled"&&Me?Me:void 0,refusals:we};it.push(ut);try{await c({substitutions:it}),P(!1),rt(""),Ce(""),st(""),ue([]),be(null),_(null)}catch(Nt){console.error("Failed to save substitution:",Nt),alert("   .   .")}},[E,p,R,Je,A,e,Me,we,c]),kr=G.useCallback(async oe=>{if(!E||!qe||!E.period||!E.shift||!E.teacherId){alert(":   .");return}const Ue=Je.filter(it=>it.classId===oe&&it.day===qe&&it.period===E.period&&it.shift===E.shift);if(Ue.length===0){alert("    .");return}const tt=A.filter(it=>!(it.scheduleItemId===E.scheduleItemId&&it.date===p));Ue.forEach(it=>{const ut={id:ai(),date:p,scheduleItemId:E.scheduleItemId,originalTeacherId:E.teacherId,replacementTeacherId:it.teacherId,replacementClassId:it.classId,replacementSubjectId:it.subjectId,isMerger:!0,replacementRoomId:it.roomId,lessonAbsenceReason:Me||void 0};tt.push(ut)}),await c({substitutions:tt}),P(!1),rt(""),Ce(""),st(""),_(null),ae(!1)},[E,p,qe,Je,A,Me,c]),us=G.useCallback(async oe=>{if(!E)return;const Ue=Je.find(Pr=>Pr.id===E.scheduleItemId),tt=Je.find(Pr=>Pr.id===oe);if(!Ue||!tt){alert(":     .");return}const it=[...A];let ut,Nt;R?(ut=R,Nt=he?tt.roomId:Ue.roomId):he?(ut=Ue.roomId,Nt=tt.roomId):(ut=tt.roomId,Nt=Ue.roomId);const bt=it.findIndex(Pr=>Pr.scheduleItemId===Ue.id&&Pr.date===p),or={id:bt>=0?it[bt].id:ai(),date:p,scheduleItemId:Ue.id,originalTeacherId:Ue.teacherId,replacementTeacherId:Ue.teacherId,replacementClassId:tt.classId,replacementSubjectId:tt.subjectId,replacementRoomId:ut!==Ue.roomId?ut:void 0};bt>=0?it[bt]=or:it.push(or);const Zt=it.findIndex(Pr=>Pr.scheduleItemId===tt.id&&Pr.date===p),wr={id:Zt>=0?it[Zt].id:ai(),date:p,scheduleItemId:tt.id,originalTeacherId:tt.teacherId,replacementTeacherId:tt.teacherId,replacementClassId:Ue.classId,replacementSubjectId:Ue.subjectId,replacementRoomId:Nt!==tt.roomId?Nt:void 0};Zt>=0?it[Zt]=wr:it.push(wr),await c({substitutions:it}),P(!1),_(null),Ce(""),q(!1),Te(!1)},[E,Je,A,p,c,R,he]),nn=G.useCallback(async oe=>{const Ue=A.filter(tt=>!(tt.scheduleItemId===oe&&tt.date===p));await c({substitutions:Ue})},[A,p,c]),Rr=(oe,Ue)=>{_({scheduleItemId:oe.id,subjectId:oe.subjectId,period:oe.period,shift:oe.shift,classId:oe.classId,teacherId:oe.teacherId,roomId:oe.roomId,day:oe.day,isEditing:!0}),Ue.replacementRoomId?Ce(Ue.replacementRoomId):Ce(""),Ue.lessonAbsenceReason?st(Ue.lessonAbsenceReason):st(""),Ue.refusals?ue(Ue.refusals):ue([]),Ue.replacementTeacherId==="cancelled"?I("cancel"):Ue.isMerger||Ue.replacementClassId?I("advanced"):(I("teacher"),be(Ue.replacementTeacherId)),P(!0)},pr=()=>{const oe=A.filter(it=>it.date===p&&it.replacementTeacherId!=="conducted"&&it.replacementTeacherId!=="cancelled");if(oe.length===0)return"    .";oe.sort((it,ut)=>{const Nt=Je.find(or=>or.id===it.scheduleItemId),bt=Je.find(or=>or.id===ut.scheduleItemId);return((Nt==null?void 0:Nt.period)||0)-((bt==null?void 0:bt.period)||0)});let Ue="";const tt=new Set;return oe.forEach(it=>{if(tt.has(it.scheduleItemId))return;tt.add(it.scheduleItemId);const ut=Je.find(Xt=>Xt.id===it.scheduleItemId);if(!ut)return;const Nt=r.find(Xt=>Xt.id===ut.classId),bt=t.find(Xt=>Xt.id===ut.subjectId),or=e.find(Xt=>Xt.id===it.originalTeacherId),Zt=e.find(Xt=>Xt.id===it.replacementTeacherId),wr=n.find(Xt=>Xt.id===(it.replacementRoomId||ut.roomId)),Pr=wr?wr.name:it.replacementRoomId||ut.roomId||"";if(Ue+=` **${ut.period} ** | ${Nt==null?void 0:Nt.name} | ${bt==null?void 0:bt.name}
`,Ue+=` ${or==null?void 0:or.name}
`,it.isMerger)Ue+=` : ${Zt==null?void 0:Zt.name}
`;else if(it.replacementClassId){const Xt=r.find(Nn=>Nn.id===it.replacementClassId);Ue+=`  : ${Xt==null?void 0:Xt.name}
`}else Ue+=` ${Zt==null?void 0:Zt.name}
`;Ue+=` . ${Pr}

`}),Ue},Fr=()=>{var it;const oe=pr(),Ue=new Date(p).toLocaleDateString("ru-RU");let tt=(it=s.telegramTemplates)==null?void 0:it.summary;return tt||(tt=` **  {{date}}** 

{{content}}`),tt.replace("{{date}}",Ue).replace("{{content}}",oe)},ie=()=>{const oe=Fr();navigator.clipboard.writeText(oe),u({type:"success",title:"",message:"    "})},$e=async()=>{if(!s.telegramToken||!s.feedbackChatId){u({type:"warning",title:"",message:"Telegram  "});return}const oe=Fr();U(!0);try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:oe,parse_mode:"Markdown"})}),u({type:"success",title:"",message:"   Telegram"})}catch(Ue){console.error(Ue),u({type:"danger",title:"",message:"   "})}finally{U(!1)}},yt=(oe,Ue,tt,it,ut,Nt,bt)=>{se({teacherId:oe,lessonId:Ue,roomName:tt,className:it,subjectName:ut,period:Nt,roomChanged:bt}),Be(!0)},mt=async oe=>{var Xt,Nn;if(!_e)return;const{teacherId:Ue,lessonId:tt,roomName:it,className:ut,subjectName:Nt,period:bt,roomChanged:or}=_e,Zt=e.find(fn=>fn.id===Ue);if(!(Zt!=null&&Zt.telegramChatId)||!s.telegramToken){alert("    Telegram ID    ."),Be(!1);return}const wr=new Date(p).toLocaleDateString("ru-RU");let Pr="";if(oe==="single"){const fn=` *${bt} * | ${ut}
 ${Nt}
 . ${it}`;let ds=(Xt=s.telegramTemplates)==null?void 0:Xt.teacherNotification;ds||(ds=` **  !**
 {{date}}

{{content}}

,   .`),Pr=ds.replace("{{date}}",wr).replace("{{content}}",fn)}else{const fn=A.filter(pn=>pn.date===p&&pn.replacementTeacherId===Ue);if(fn.sort((pn,Jt)=>{const gn=Je.find(di=>di.id===pn.scheduleItemId),ui=Je.find(di=>di.id===Jt.scheduleItemId);return((gn==null?void 0:gn.period)||0)-((ui==null?void 0:ui.period)||0)}),fn.length===0){alert("       ."),Be(!1);return}let ds="";fn.forEach(pn=>{var hi,da,jo;const Jt=Je.find(Hi=>Hi.id===pn.scheduleItemId);if(!Jt)return;const gn=((hi=r.find(Hi=>Hi.id===Jt.classId))==null?void 0:hi.name)||"?",ui=((da=t.find(Hi=>Hi.id===Jt.subjectId))==null?void 0:da.name)||"?",di=Jt.roomId,so=pn.replacementRoomId,fr=so||di,ja=((jo=n.find(Hi=>Hi.id===fr))==null?void 0:jo.name)||fr||"",ua=so&&so!==di?" ( .)":"";ds+=` *${Jt.period} * | ${gn}
 ${ui}
 . ${ja}${ua}

`});let _i=(Nn=s.telegramTemplates)==null?void 0:Nn.teacherSummary;_i||(_i=` **   {{date}}**

{{content}},   .`),Pr=_i.replace("{{date}}",wr).replace("{{content}}",ds)}try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:Zt.telegramChatId,text:Pr,parse_mode:"Markdown"})}),u({type:"success",title:"",message:`  ${Zt.name}`})}catch(fn){console.error(fn),alert("   Telegram")}finally{Be(!1),se(null)}},St=G.useMemo(()=>E?new Set(A.filter(oe=>oe.date===p&&oe.replacementTeacherId!=="conducted"&&oe.replacementTeacherId!=="cancelled").map(oe=>{const Ue=Je.find(tt=>tt.id===oe.scheduleItemId);return Ue&&Ue.period===E.period&&Ue.shift===E.shift?oe.replacementTeacherId:null}).filter(oe=>!!oe)):new Set,[A,Je,p,E]),nt=G.useMemo(()=>{if(!E||!qe)return{recommended:[],others:[]};const oe=p.substring(0,7),Ue=e.filter(ut=>ut.name.toLowerCase().includes(Oe.toLowerCase())).map(ut=>{const Nt=ut.unavailableDates.includes(p),bt=Je.some(Nn=>Nn.teacherId===ut.id&&Nn.day===qe&&Nn.period===E.period&&Nn.shift===E.shift),or=St.has(ut.id),Zt=bt||or,wr=ut.subjectIds.includes(E.subjectId),Pr=A.filter(Nn=>Nn.replacementTeacherId===ut.id&&Nn.date.startsWith(oe)).length;let Xt=0;return Nt&&(Xt-=1e3),Zt&&(Xt-=200),wr&&(Xt+=50),!Zt&&!Nt&&(Xt+=100),Xt-=Pr,{teacher:ut,isAbsent:Nt,isBusy:Zt,isSpecialist:wr,score:Xt,subsCount:Pr}}).sort((ut,Nt)=>Nt.score-ut.score),tt=Ue.filter(ut=>!ut.isBusy&&!ut.isAbsent).slice(0,3),it=Ue.filter(ut=>!tt.includes(ut));return{recommended:tt,others:it}},[e,E,p,Oe,qe,Je,A,St]),xt=G.useMemo(()=>{if(!E||!qe)return[];const oe=Je.filter(tt=>tt.day===qe&&tt.period===E.period&&tt.shift===E.shift&&tt.classId!==E.classId),Ue=new Map;return oe.forEach(tt=>{const it=r.find(bt=>bt.id===tt.classId),ut=e.find(bt=>bt.id===tt.teacherId),Nt=t.find(bt=>bt.id===tt.subjectId);if(it&&ut){Ue.has(it.id)||Ue.set(it.id,{classEntity:it,teachers:[],subjects:[]});const bt=Ue.get(it.id);bt.teachers.includes(ut.name)||bt.teachers.push(ut.name),Nt&&!bt.subjects.includes(Nt.name)&&bt.subjects.push(Nt.name)}}),Array.from(Ue.values())},[Je,E,qe,r,e,t]),gt=G.useMemo(()=>{var Nt;if(!E)return null;const oe=Je.find(bt=>bt.id===E.scheduleItemId);if(!oe)return null;const Ue=r.find(bt=>bt.id===oe.classId),tt=t.find(bt=>bt.id===oe.subjectId),it=e.find(bt=>bt.id===oe.teacherId),ut=((Nt=it==null?void 0:it.unavailableDates)==null?void 0:Nt.includes(p))||!1;return{className:Ue==null?void 0:Ue.name,subjectName:tt==null?void 0:tt.name,teacherName:it==null?void 0:it.name,teacherId:it==null?void 0:it.id,period:oe.period,roomId:oe.roomId,isTeacherAbsent:ut}},[E,Je,r,t,e,p]),ir=G.useMemo(()=>!(gt!=null&&gt.teacherId)||!qe?[]:Je.filter(oe=>oe.teacherId===gt.teacherId&&oe.day===qe&&oe.id!==(E==null?void 0:E.scheduleItemId)).sort((oe,Ue)=>oe.period-Ue.period),[Je,gt,qe,E]),Mr=G.useMemo(()=>{if(!qe||ke.length<2)return[];const oe=ke.toLowerCase(),Ue=e.filter(ut=>ut.name.toLowerCase().includes(oe)),tt=r.filter(ut=>ut.name.toLowerCase().includes(oe)),it=[];return Ue.forEach(ut=>{Je.filter(bt=>bt.teacherId===ut.id&&bt.day===qe).forEach(bt=>{const or=r.find(wr=>wr.id===bt.classId),Zt=t.find(wr=>wr.id===bt.subjectId);it.push({...bt,entityName:ut.name,subInfo:or==null?void 0:or.name,subjectName:Zt==null?void 0:Zt.name})})}),tt.forEach(ut=>{Je.filter(bt=>bt.classId===ut.id&&bt.day===qe).forEach(bt=>{if(it.find(wr=>wr.id===bt.id))return;const or=e.find(wr=>wr.id===bt.teacherId),Zt=t.find(wr=>wr.id===bt.subjectId);it.push({...bt,entityName:ut.name,subInfo:or==null?void 0:or.name,subjectName:Zt==null?void 0:Zt.name})})}),it.sort((ut,Nt)=>ut.period-Nt.period)},[ke,qe,e,r,Je,t]),Cr=(oe,Ue)=>{Ge(Ue),oe.dataTransfer.effectAllowed="copy",oe.dataTransfer.setData("text/plain",Ue)},Ts=(oe,Ue)=>{oe.preventDefault(),Et(Ue)},Mi=()=>{Et(null)},Oi=(oe,Ue)=>{var tt;oe.preventDefault(),Re&&(_({scheduleItemId:Ue.id,subjectId:Ue.subjectId,period:Ue.period,shift:Ue.shift,classId:Ue.classId,teacherId:Ue.teacherId,roomId:Ue.roomId,day:Ue.day}),P(!0),rt(((tt=e.find(it=>it.id===Re))==null?void 0:tt.name)||""),Ge(null),Et(null))},ci=(oe,Ue)=>{let tt=!1;if(Ue){if(!window.confirm("  .   ?"))return;tt=!0}Qt(oe,tt)},ca=(oe,Ue)=>{Ue.stopPropagation(),we.includes(oe)?ue(we.filter(tt=>tt!==oe)):ue([...we,oe])},Qo=(oe,Ue)=>{var _i,pn;const tt=A.filter(Jt=>Jt.scheduleItemId===oe.id&&Jt.date===p),ut=tt.length>0?tt[0]:null,Nt=ut&&!["conducted","cancelled"].includes(ut.replacementTeacherId)?e.find(Jt=>Jt.id===ut.replacementTeacherId):null,bt=e.find(Jt=>Jt.id===oe.teacherId),or=t.find(Jt=>Jt.id===oe.subjectId),Zt=r.find(Jt=>Jt.id===oe.classId),wr=((_i=n.find(Jt=>Jt.id===oe.roomId))==null?void 0:_i.name)||oe.roomId||"",Pr=ut==null?void 0:ut.replacementRoomId,Xt=Pr?((pn=n.find(Jt=>Jt.id===Pr))==null?void 0:pn.name)||Pr:null,Nn=Pr&&Pr!==oe.roomId,fn=(ut==null?void 0:ut.replacementTeacherId)==="cancelled",ds=(ut==null?void 0:ut.replacementTeacherId)==="conducted";return l.jsxs("div",{onDragOver:Jt=>Ts(Jt,oe.id),onDragLeave:Mi,onDrop:Jt=>Oi(Jt,oe),className:`p-5 rounded-2xl border transition-all ${Ke===oe.id?"ring-2 ring-indigo-500 bg-indigo-50 border-indigo-500":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 shadow-sm"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-xl ${Ue?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:oe.period}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg",children:Zt==null?void 0:Zt.name}),l.jsx("div",{className:"text-sm text-slate-500",children:or==null?void 0:or.name})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:oe.shift===Ze.First?"1 ":"2 "}),l.jsx("div",{className:"mt-1",children:Nn?l.jsxs("div",{className:"flex items-center justify-end gap-1.5 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:[l.jsx("span",{className:"text-xs font-mono font-bold text-slate-400 line-through decoration-red-400",children:wr}),l.jsx(ve,{name:"ArrowRight",size:10,className:"text-indigo-400"}),l.jsx("span",{className:"text-xs font-mono font-black text-indigo-700 dark:text-indigo-300",children:Xt})]}):l.jsx("div",{className:"text-xs font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block font-bold",children:wr})})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:`text-base font-medium ${Ue?"text-slate-400 line-through":"text-red-500"}`,children:bt==null?void 0:bt.name}),Ue?l.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[fn?l.jsx("span",{className:"text-red-600 font-black text-sm uppercase",children:" "}):ds?l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:""}):l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-emerald-600 font-bold text-base",children:(Nt==null?void 0:Nt.name)||""}),(ut==null?void 0:ut.isMerger)&&l.jsx("span",{className:"text-[10px] text-purple-500 font-bold",children:""})]}),Nt&&Nt.telegramChatId&&!fn&&!ds&&l.jsx("button",{onClick:()=>{const Jt=Nn?`${wr} -> ${Xt}`:wr;yt(Nt.id,oe.id,Jt,(Zt==null?void 0:Zt.name)||"?",(or==null?void 0:or.name)||"?",oe.period,!!Nn)},className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"   Telegram",children:l.jsx(ve,{name:"Send",size:16})}),ut&&l.jsx("button",{onClick:()=>Rr(oe,ut),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 rounded-lg transition-colors",title:" ",children:l.jsx(ve,{name:"Edit",size:18})}),l.jsx("button",{onClick:()=>nn(oe.id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(ve,{name:"X",size:18})})]}):l.jsx("button",{onClick:()=>{_({scheduleItemId:oe.id,subjectId:oe.subjectId,period:oe.period,shift:oe.shift,classId:oe.classId,teacherId:oe.teacherId,roomId:oe.roomId,day:oe.day}),P(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition",children:""})]})]},oe.id)};return l.jsxs("div",{className:"h-full flex flex-col gap-6",children:[l.jsx("div",{className:"flex flex-col gap-4",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 p-1.5 rounded-xl border border-slate-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>Tt(-1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:l.jsx(ve,{name:"ArrowRight",className:"rotate-180",size:18})}),l.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 font-bold text-slate-700 dark:text-slate-200 cursor-pointer relative group",children:[l.jsx(ve,{name:"Calendar",size:18,className:"text-indigo-500"}),l.jsx("span",{children:new Date(p).toLocaleDateString("ru-RU",{day:"numeric",month:"long",weekday:"short"})}),l.jsx("input",{ref:v,type:"date",value:p,onChange:oe=>g(oe.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]}),l.jsx("button",{onClick:kt,className:"p-2 bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-lg hover:text-indigo-600 shadow-sm border border-slate-200 dark:border-slate-500",title:" ",children:l.jsx(ve,{name:"Calendar",size:16})}),l.jsx("button",{onClick:()=>_t(),className:"px-3 py-1.5 text-xs font-bold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors",children:""}),l.jsx("button",{onClick:()=>Tt(1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:l.jsx(ve,{name:"ArrowRight",size:18})})]})]}),l.jsxs("div",{className:"flex gap-2 mt-auto",children:[l.jsxs("button",{onClick:$e,disabled:N,className:"h-[48px] px-5 rounded-xl bg-blue-600 text-white font-bold text-sm shadow-lg shadow-blue-200 hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50",children:[N?l.jsx(ve,{name:"Loader",className:"animate-spin",size:18}):l.jsx(ve,{name:"Send",size:18})," Telegram"]}),l.jsxs("button",{onClick:ie,className:"h-[48px] px-5 rounded-xl bg-indigo-600 text-white font-bold text-sm shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition flex items-center gap-2",children:[l.jsx(ve,{name:"Copy",size:18})," "]}),l.jsxs("button",{onClick:()=>Y(!0),className:"h-[48px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 transition-colors",children:[l.jsx(ve,{name:"History",size:18})," "]})]})]})})}),l.jsxs("div",{className:"md:hidden flex bg-white dark:bg-dark-800 p-1 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 shrink-0",children:[l.jsxs("button",{onClick:()=>ot("lessons"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${ht==="lessons"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[l.jsx(ve,{name:"List",size:18}),""]}),l.jsxs("button",{onClick:()=>ot("teachers"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${ht==="teachers"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[l.jsx(ve,{name:"Users",size:18}),""]})]}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[l.jsx("div",{className:`w-full md:w-80 flex-col gap-4 ${pt&&ht!=="teachers"?"hidden":"flex"}`,children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>Ee("all"),className:`flex-1 py-2 text-xs font-bold rounded-md ${pe==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>Ee(Ze.First),className:`flex-1 py-2 text-xs font-bold rounded-md ${pe===Ze.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>Ee(Ze.Second),className:`flex-1 py-2 text-xs font-bold rounded-md ${pe===Ze.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(ve,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),l.jsx("input",{placeholder:" ...",value:de,onChange:oe=>Ae(oe.target.value),className:"w-full pl-9 pr-3 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-sm outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:Wt.map(oe=>{const Ue=oe.unavailableDates.includes(p),tt=oe.absenceReasons?oe.absenceReasons[p]:"";return l.jsxs("div",{draggable:!Ue,onDragStart:it=>Cr(it,oe.id),className:`flex flex-col p-4 rounded-xl border transition-all ${Ue?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600 cursor-grab active:cursor-grabbing hover:border-indigo-300"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-base font-bold ${Ue?"text-red-700 dark:text-red-400":"text-slate-700 dark:text-slate-300"}`,children:oe.name}),l.jsxs("div",{className:"flex gap-1",children:[Ue&&l.jsx("button",{onClick:()=>jr(oe.id),className:"p-1.5 bg-white text-slate-500 rounded-lg hover:text-indigo-600 shadow-sm",title:" ",children:l.jsx(ve,{name:"Edit",size:14})}),l.jsx("button",{onClick:()=>Ue?tr(oe.id):jr(oe.id),className:`text-xs px-2.5 py-1.5 rounded-lg font-bold transition-colors ${Ue?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Ue?"":""})]})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:oe.shifts.map(it=>l.jsx("span",{className:"text-[10px] bg-white dark:bg-slate-600 px-1.5 py-0.5 rounded border border-slate-100 dark:border-slate-500 text-slate-500 font-medium",children:it===Ze.First?"1":"2"},it))}),Ue&&tt&&l.jsx("div",{className:"text-xs text-red-500 dark:text-red-400 italic font-medium",children:tt})]})]},oe.id)})})]})}),l.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${pt&&ht!=="lessons"?"hidden":"flex"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsxs("button",{onClick:()=>S("pending"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${y==="pending"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:["  ",Ht.length>0&&l.jsx("span",{className:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded-full text-xs",children:Ht.length})]}),l.jsxs("button",{onClick:()=>S("resolved"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${y==="resolved"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:[" ",rn.length>0&&l.jsx("span",{className:"ml-1 bg-emerald-500 text-white px-2 py-0.5 rounded-full text-xs",children:rn.length})]})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{onClick:()=>{ce(""),L(!0)},className:"p-3 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100",children:l.jsx(ve,{name:"Search",size:20})})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[(y==="pending"?Ht:rn).map(oe=>Qo(oe,y==="resolved")),(y==="pending"?Ht:rn).length===0&&l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(ve,{name:y==="pending"?"CheckCircle":"List",size:64,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{className:"text-lg font-medium",children:y==="pending"?"  !":"  "})]})]})]})]}),l.jsx(cs,{isOpen:D,onClose:()=>P(!1),title:" ",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"flex flex-col h-[90vh] md:h-[850px] -m-6",children:[l.jsxs("div",{className:"p-6 pb-2 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-dark-800 z-10",children:[gt&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-xl",children:gt.className}),l.jsxs("div",{className:"text-slate-500 dark:text-slate-400 font-medium",children:[gt.period,"   ",gt.subjectName]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-slate-400 text-xs uppercase font-bold",children:""}),l.jsx("div",{className:`text-base ${gt.isTeacherAbsent?"line-through decoration-red-400 text-red-400":"font-bold dark:text-white"}`,children:gt.teacherName})]})]}),l.jsxs("div",{className:"flex gap-2 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>I("teacher"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${x==="teacher"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>I("cancel"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${x==="cancel"?"border-red-600 text-red-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>I("advanced"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${x==="advanced"?"border-amber-600 text-amber-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:". "})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-white dark:bg-dark-800",children:[x==="teacher"&&l.jsxs("div",{className:"space-y-6",children:[nt.recommended.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2 flex items-center gap-1",children:[l.jsx(ve,{name:"Star",size:14})," "]}),l.jsx("div",{className:"space-y-2",children:nt.recommended.map(({teacher:oe,isSpecialist:Ue})=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50/50 border border-emerald-100 rounded-xl hover:bg-emerald-100/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-200 text-emerald-700 flex items-center justify-center text-sm font-bold",children:oe.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 text-base",children:oe.name}),l.jsx("div",{className:"text-xs text-emerald-600 font-bold uppercase",children:Ue?"":" "})]})]}),l.jsx("button",{onClick:()=>Qt(oe.id),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:""})]},oe.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" "}),l.jsxs("div",{className:"relative mb-2",children:[l.jsx(ve,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),l.jsx("input",{placeholder:" ...",value:Oe,onChange:oe=>rt(oe.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-indigo-500"})]}),l.jsx("div",{className:"space-y-1",children:nt.others.map(({teacher:oe,isBusy:Ue,isAbsent:tt,subsCount:it})=>{const ut=we.includes(oe.id);return l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg text-sm ${tt?"opacity-50":"hover:bg-slate-50"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${Ue?"bg-orange-400":tt?"bg-red-400":"bg-slate-300"}`}),l.jsx("span",{className:"font-bold text-base text-slate-700",children:oe.name}),ut&&l.jsx("span",{className:"text-[10px] bg-slate-200 px-1.5 py-0.5 rounded font-bold text-slate-500",children:""})]}),l.jsxs("div",{className:"flex gap-2",children:[!tt&&l.jsx("button",{onClick:Nt=>ca(oe.id,Nt),className:"p-1.5 text-slate-300 hover:text-slate-500 hover:bg-slate-100 rounded",children:l.jsx(ve,{name:"X",size:16})}),!tt&&l.jsx("button",{onClick:()=>ci(oe.id,Ue),className:`px-3 py-1.5 rounded-lg text-xs font-bold ${Ue?"text-orange-600 bg-orange-50":"text-indigo-600 bg-indigo-50"}`,children:Ue?"?":""})]})]},oe.id)})})]})]}),x==="cancel"&&l.jsxs("div",{className:"text-center py-12 flex flex-col items-center justify-center h-full",children:[l.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-6",children:l.jsx(ve,{name:"X",size:40})}),l.jsx("h3",{className:"font-black text-2xl mb-2 text-slate-800",children:" ?"}),l.jsx("p",{className:"text-slate-500 text-base mb-8 max-w-sm",children:"          ."}),l.jsx("button",{onClick:()=>Qt("cancelled"),className:"px-8 py-4 bg-red-600 text-white rounded-xl font-bold text-lg hover:bg-red-700 shadow-lg shadow-red-200 hover:shadow-xl transition-all",children:" "})]}),x==="advanced"&&l.jsxs("div",{className:"space-y-6 pt-4",children:[l.jsxs("button",{onClick:()=>Qt("conducted"),className:"w-full p-4 rounded-xl bg-blue-50 text-blue-700 font-bold text-base hover:bg-blue-100 flex items-center justify-center gap-3 border border-blue-100 transition-all hover:shadow-md",children:[l.jsx(ve,{name:"CheckCircle",size:20}),"   ( )"]}),l.jsxs("div",{className:"bg-amber-50 p-5 rounded-2xl border border-amber-100",children:[l.jsxs("h4",{className:"font-bold text-amber-800 text-base mb-2 flex items-center gap-2",children:[l.jsx(ve,{name:"Users",size:18})," "]}),l.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"     ."}),l.jsx("div",{className:"space-y-2",children:xt.length===0?l.jsx("div",{className:"text-sm text-amber-500 italic text-center py-4",children:"  "}):xt.map(oe=>l.jsxs("button",{onClick:()=>kr(oe.classEntity.id),className:"w-full p-3 bg-white rounded-xl border border-amber-200 text-left text-sm hover:border-amber-400 hover:shadow-sm transition-all",children:[l.jsx("span",{className:"font-bold text-base",children:oe.classEntity.name})," ",l.jsx("span",{className:"text-slate-400 mx-2",children:"|"})," ",l.jsx("span",{className:"font-medium",children:oe.subjects.join(", ")})]},oe.classEntity.id))})]}),ir.length>0&&l.jsxs("div",{className:"bg-purple-50 p-5 rounded-2xl border border-purple-100",children:[l.jsxs("h4",{className:"font-bold text-purple-800 text-base mb-2 flex items-center gap-2",children:[l.jsx(ve,{name:"RotateCw",size:18})," "]}),l.jsx("p",{className:"text-sm text-purple-700 mb-4",children:"      ."}),l.jsx("div",{className:"space-y-2",children:ir.map(oe=>{var Ue;return l.jsxs("button",{onClick:()=>us(oe.id),className:"w-full p-3 bg-white rounded-xl border border-purple-200 text-left text-sm hover:border-purple-400 hover:shadow-sm transition-all",children:[l.jsxs("span",{className:"font-bold text-base",children:[oe.period," "]}),": ",l.jsx("span",{className:"font-medium",children:(Ue=r.find(tt=>tt.id===oe.classId))==null?void 0:Ue.name})]},oe.id)})})]})]})]}),x==="teacher"&&l.jsxs("div",{className:"p-6 pt-4 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-dark-800 flex flex-col gap-4 rounded-b-3xl",children:[l.jsx("div",{className:"flex gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" ()"}),l.jsxs("select",{value:R,onChange:oe=>Ce(oe.target.value),className:"w-full border border-slate-200 p-3 rounded-xl text-sm bg-white font-medium outline-none focus:ring-2 ring-indigo-500",children:[l.jsx("option",{value:"",children:" /  "}),n.map(oe=>l.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})}),(ge||(gt==null?void 0:gt.teacherId)&&R)&&l.jsx("button",{onClick:()=>Qt(ge||gt.teacherId),className:"w-full py-3 bg-indigo-600 text-white rounded-xl text-base font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200",children:" "})]})]})}),l.jsx(cs,{isOpen:B,onClose:()=>Q(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:Se,onChange:oe=>M(oe.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:Vr,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})}),l.jsxs(cs,{isOpen:k,onClose:()=>L(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ."}),l.jsxs("div",{className:"relative",children:[l.jsx(ve,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:ke,onChange:oe=>ce(oe.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[Mr.map(oe=>{var Ue;return l.jsxs("button",{onClick:()=>{L(!1),_({scheduleItemId:oe.id,subjectId:oe.subjectId,period:oe.period,shift:oe.shift,classId:oe.classId,teacherId:oe.teacherId,roomId:oe.roomId,day:oe.day}),P(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[oe.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",oe.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[oe.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:oe.subjectName}),oe.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((Ue=n.find(tt=>tt.id===oe.roomId))==null?void 0:Ue.name)||oe.roomId]})]})]},oe.id)}),ke.length>1&&Mr.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",p,")"]})]})]}),l.jsx(cs,{isOpen:T,onClose:()=>Y(!1),title:" ",maxWidth:"max-w-5xl",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-4 p-1 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(ve,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:16}),l.jsx("input",{placeholder:"   (YYYY-MM-DD)  ...",value:H,onChange:oe=>K(oe.target.value),className:"w-full pl-9 pr-3 py-2 bg-white dark:bg-slate-800 border-none rounded-lg text-sm outline-none dark:text-white"})]}),l.jsxs("div",{className:"relative w-64",children:[l.jsxs("select",{value:Z,onChange:oe=>ne(oe.target.value),className:"w-full py-2 px-3 bg-white dark:bg-slate-800 rounded-lg text-sm border-none outline-none cursor-pointer dark:text-white appearance-none",children:[l.jsx("option",{value:"",children:" "}),e.map(oe=>l.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),l.jsx(ve,{name:"Filter",className:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:14})]})]}),l.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar rounded-xl border border-slate-200 dark:border-slate-700",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 sticky top-0 z-10 shadow-sm",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),l.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-dark-800",children:A.filter(oe=>{var Ue,tt;if(Z&&oe.replacementTeacherId!==Z&&oe.originalTeacherId!==Z)return!1;if(H){const it=H.toLowerCase(),ut=oe.date.includes(it),Nt=(Ue=e.find(or=>or.id===oe.originalTeacherId))==null?void 0:Ue.name.toLowerCase().includes(it),bt=(tt=e.find(or=>or.id===oe.replacementTeacherId))==null?void 0:tt.name.toLowerCase().includes(it);return ut||Nt||bt}return!0}).sort((oe,Ue)=>new Date(Ue.date).getTime()-new Date(oe.date).getTime()).map(oe=>{const Ue=e.find(Nt=>Nt.id===oe.originalTeacherId),tt=e.find(Nt=>Nt.id===oe.replacementTeacherId),it=Je.find(Nt=>Nt.id===oe.scheduleItemId)||{period:"?",classId:"?"},ut=r.find(Nt=>Nt.id===it.classId);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[l.jsx("td",{className:"p-4 text-sm font-medium text-slate-600 dark:text-slate-300 whitespace-nowrap",children:new Date(oe.date).toLocaleDateString("ru-RU")}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[it.period," "]}),l.jsx("span",{className:"text-xs text-slate-500",children:(ut==null?void 0:ut.name)||"?"})]})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-500",children:Ue==null?void 0:Ue.name[0]}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:Ue==null?void 0:Ue.name})]})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[oe.replacementTeacherId==="cancelled"?l.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-500",children:l.jsx(ve,{name:"X",size:14})}):oe.replacementTeacherId==="conducted"?l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-500",children:l.jsx(ve,{name:"CheckCircle",size:14})}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 font-bold text-xs",children:tt==null?void 0:tt.name[0]}),l.jsx("span",{className:`text-sm font-bold ${oe.replacementTeacherId==="cancelled"?"text-red-500":"text-slate-800 dark:text-white"}`,children:oe.replacementTeacherId==="cancelled"?" ":oe.replacementTeacherId==="conducted"?"":tt==null?void 0:tt.name})]})}),l.jsx("td",{className:"p-4 text-right",children:oe.isMerger?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:""}):oe.replacementTeacherId==="cancelled"?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:""}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:""})})]},oe.id)})})]})})]})}),l.jsx(cs,{isOpen:xe,onClose:()=>Be(!1),title:" ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-base text-slate-600 dark:text-slate-300",children:"               ?"}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("button",{onClick:()=>mt("single"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:l.jsx(ve,{name:"Bell",size:20})}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>mt("all"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:l.jsx(ve,{name:"List",size:20})}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  ()"}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"     "})]})]})]})]})})]})},JY=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=Pi(),{schedule1:i,schedule2:a}=CA(),[o,A]=G.useState("teachers"),[c,u]=G.useState(iA()),[d,p]=G.useState(Ze.First),[g,v]=G.useState(1),[y,S]=G.useState(Ze.First),[x,I]=G.useState(1),[N,U]=G.useState(""),[D,P]=G.useState(""),[E,_]=G.useState(""),[B,Q]=G.useState(""),[k,L]=G.useState({summary:"",teacherNotification:"",teacherSummary:""}),[T,Y]=G.useState(!1),[xe,Be]=G.useState({message:"",active:!1,lastUpdated:""}),_e=G.useMemo(()=>{const K={schedule:i,schedule2:a,settings:n};return iU(new Date(c),K)},[c,i,a,n]);G.useEffect(()=>{n&&(U(n.telegramToken||""),P(n.feedbackChatId||""),_(n.weatherApiKey||""),Q(n.weatherCity||"Minsk,BY"),L(n.telegramTemplates||{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`}),Be(n.adminAnnouncement||{message:"",active:!1,lastUpdated:""}))},[n]),G.useEffect(()=>{v(d===Ze.First?1:0)},[d]),G.useEffect(()=>{I(y===Ze.First?1:0)},[y]);const se=G.useMemo(()=>{const K=new Date(c).getDay();return K===0||K===6?null:Ur[K-1]},[c]),me=Os[d],Pe=G.useMemo(()=>se?e.filter(K=>K.shifts&&!K.shifts.includes(d)||K.unavailableDates.includes(c)?!1:!_e.some(ne=>ne.teacherId===K.id&&ne.day===se&&ne.period>g&&ne.shift===d)).sort((K,Z)=>K.name.localeCompare(Z.name)):[],[e,c,se,g,d,_e]),Se=G.useMemo(()=>{if(!se)return[];const K=new Set;return _e.forEach(ne=>{ne.day===se&&ne.period===x&&ne.shift===y&&ne.roomId&&K.add(ne.roomId)}),r.filter(ne=>!K.has(ne.id)).map(ne=>ne.name)},[_e,r,se,x,y]),M=async()=>{await s({settings:{...n,telegramToken:N,feedbackChatId:D,weatherApiKey:E,weatherCity:B,telegramTemplates:k,adminAnnouncement:{...xe,lastUpdated:new Date().toISOString()}}}),alert(" !"),Y(!1)},H=()=>{Be(K=>({...K,active:!K.active}))};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(ve,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>A("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>A("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>A("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),o!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:K=>u(K.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),o==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>p(Ze.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===Ze.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>p(Ze.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===Ze.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:me.map(K=>l.jsx("button",{onClick:()=>v(K),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${g===K?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:K},K))})]})]}),o==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>S(Ze.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===Ze.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>S(Ze.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===Ze.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:Os[y].map(K=>l.jsx("button",{onClick:()=>I(K),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${x===K?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:K},K))})]})]}),o==="settings"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 space-y-6",children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(ve,{name:"Zap",size:20}),"  "]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:N,onChange:K=>U(K.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:D,onChange:K=>P(K.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   "})]}),l.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("h4",{className:"font-bold text-sm text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-2",children:[l.jsx(ve,{name:"Cloud",size:16}),"  (OpenWeatherMap)"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"API Key"}),l.jsx("input",{type:"password",value:E,onChange:K=>_(K.target.value),placeholder:"b6907d28...",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),l.jsx("input",{type:"text",value:B,onChange:K=>Q(K.target.value),placeholder:"Minsk,BY",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]})]})]}),l.jsxs("button",{onClick:()=>Y(!0),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-indigo-200 dark:border-slate-600 text-indigo-600 dark:text-indigo-400 rounded-xl font-bold hover:bg-indigo-50 dark:hover:bg-slate-600 transition flex items-center justify-center gap-2",children:[l.jsx(ve,{name:"Edit",size:18}),"   "]})]})]}),l.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-6 rounded-2xl border border-amber-100 dark:border-amber-900 space-y-6",children:[l.jsxs("h3",{className:"font-bold text-lg text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[l.jsx(ve,{name:"Bell",size:20}),"  "]}),l.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:",        ( )."}),l.jsx("div",{children:l.jsx("textarea",{value:xe.message,onChange:K=>Be({...xe,message:K.target.value}),rows:4,className:"w-full border border-amber-200 dark:border-amber-800 rounded-xl p-3 text-sm bg-white dark:bg-slate-800 dark:text-white outline-none focus:border-amber-500 focus:ring-2 ring-amber-500/20 resize-none",placeholder:":     14:00..."})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${xe.active?"bg-amber-500":"bg-slate-300 dark:bg-slate-600"}`,children:l.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${xe.active?"translate-x-6":"translate-x-0"}`})}),l.jsx("input",{type:"checkbox",className:"hidden",checked:xe.active,onChange:H}),l.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:""})]}),l.jsx("div",{className:"text-xs text-slate-400",children:xe.lastUpdated?`: ${new Date(xe.lastUpdated).toLocaleDateString()}`:""})]})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{onClick:M,className:"w-full px-6 py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 text-lg",children:[l.jsx(ve,{name:"Save",size:22}),"   "]})})]})]}),o==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[Pe.map(K=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(ve,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:K.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:K.subjectIds.slice(0,2).map(Z=>{const ne=t.find(de=>de.id===Z);return ne?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:ne.name},Z):null})})]})]},K.id)),Pe.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",g,"   ",d]})]}),o==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[Se.map(K=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(ve,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:K}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},K)),Se.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(ve,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]}),l.jsx(cs,{isOpen:T,onClose:()=>Y(!1),title:" ",maxWidth:"max-w-3xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-900 text-sm text-blue-800 dark:text-blue-300",children:[l.jsx("p",{className:"font-bold mb-1",children:" :"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[l.jsxs("li",{children:[l.jsx("code",{children:"{{date}}"}),'    (. "01.09.2023")']}),l.jsxs("li",{children:[l.jsx("code",{children:"{{content}}"}),"    "]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (/)"}),l.jsx("textarea",{value:k.summary,onChange:K=>L({...k,summary:K.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ( )"}),l.jsx("textarea",{value:k.teacherNotification,onChange:K=>L({...k,teacherNotification:K.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (  )"}),l.jsx("textarea",{value:k.teacherSummary,onChange:K=>L({...k,teacherSummary:K.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:M,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:" "})})]})})]})};var XY=Object.defineProperty,Bw=Object.getOwnPropertySymbols,h6=Object.prototype.hasOwnProperty,f6=Object.prototype.propertyIsEnumerable,nk=(t,e,r)=>e in t?XY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YY=(t,e)=>{for(var r in e||(e={}))h6.call(e,r)&&nk(t,r,e[r]);if(Bw)for(var r of Bw(e))f6.call(e,r)&&nk(t,r,e[r]);return t},ZY=(t,e)=>{var r={};for(var n in t)h6.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Bw)for(var n of Bw(t))e.indexOf(n)<0&&f6.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var su;(t=>{const e=class{constructor(A,c,u,d){if(this.version=A,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],A<e.MIN_VERSION||A>e.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=A*4+17;let p=[];for(let v=0;v<this.size;v++)p.push(!1);for(let v=0;v<this.size;v++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(u);if(this.drawCodewords(g),d==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const S=this.getPenaltyScore();S<v&&(d=y,v=S),this.applyMask(y)}}i(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(A,c){const u=t.QrSegment.makeSegments(A);return e.encodeSegments(u,c)}static encodeBinary(A,c){const u=t.QrSegment.makeBytes(A);return e.encodeSegments([u],c)}static encodeSegments(A,c,u=1,d=40,p=-1,g=!0){if(!(e.MIN_VERSION<=u&&u<=d&&d<=e.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let v,y;for(v=u;;v++){const N=e.getNumDataCodewords(v,c)*8,U=o.getTotalBits(A,v);if(U<=N){y=U;break}if(v>=d)throw new RangeError("Data too long")}for(const N of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])g&&y<=e.getNumDataCodewords(v,N)*8&&(c=N);let S=[];for(const N of A){n(N.mode.modeBits,4,S),n(N.numChars,N.mode.numCharCountBits(v),S);for(const U of N.getData())S.push(U)}i(S.length==y);const x=e.getNumDataCodewords(v,c)*8;i(S.length<=x),n(0,Math.min(4,x-S.length),S),n(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let N=236;S.length<x;N^=253)n(N,8,S);let I=[];for(;I.length*8<S.length;)I.push(0);return S.forEach((N,U)=>I[U>>>3]|=N<<7-(U&7)),new e(v,c,I,p)}getModule(A,c){return 0<=A&&A<this.size&&0<=c&&c<this.size&&this.modules[c][A]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const A=this.getAlignmentPatternPositions(),c=A.length;for(let u=0;u<c;u++)for(let d=0;d<c;d++)u==0&&d==0||u==0&&d==c-1||u==c-1&&d==0||this.drawAlignmentPattern(A[u],A[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(A){const c=this.errorCorrectionLevel.formatBits<<3|A;let u=c;for(let p=0;p<10;p++)u=u<<1^(u>>>9)*1335;const d=(c<<10|u)^21522;i(d>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,s(d,p));this.setFunctionModule(8,7,s(d,6)),this.setFunctionModule(8,8,s(d,7)),this.setFunctionModule(7,8,s(d,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,s(d,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,s(d,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,s(d,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let A=this.version;for(let u=0;u<12;u++)A=A<<1^(A>>>11)*7973;const c=this.version<<12|A;i(c>>>18==0);for(let u=0;u<18;u++){const d=s(c,u),p=this.size-11+u%3,g=Math.floor(u/3);this.setFunctionModule(p,g,d),this.setFunctionModule(g,p,d)}}drawFinderPattern(A,c){for(let u=-4;u<=4;u++)for(let d=-4;d<=4;d++){const p=Math.max(Math.abs(d),Math.abs(u)),g=A+d,v=c+u;0<=g&&g<this.size&&0<=v&&v<this.size&&this.setFunctionModule(g,v,p!=2&&p!=4)}}drawAlignmentPattern(A,c){for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)this.setFunctionModule(A+d,c+u,Math.max(Math.abs(d),Math.abs(u))!=1)}setFunctionModule(A,c,u){this.modules[c][A]=u,this.isFunction[c][A]=!0}addEccAndInterleave(A){const c=this.version,u=this.errorCorrectionLevel;if(A.length!=e.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const d=e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],p=e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],g=Math.floor(e.getNumRawDataModules(c)/8),v=d-g%d,y=Math.floor(g/d);let S=[];const x=e.reedSolomonComputeDivisor(p);for(let N=0,U=0;N<d;N++){let D=A.slice(U,U+y-p+(N<v?0:1));U+=D.length;const P=e.reedSolomonComputeRemainder(D,x);N<v&&D.push(0),S.push(D.concat(P))}let I=[];for(let N=0;N<S[0].length;N++)S.forEach((U,D)=>{(N!=y-p||D>=v)&&I.push(U[N])});return i(I.length==g),I}drawCodewords(A){if(A.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let d=0;d<this.size;d++)for(let p=0;p<2;p++){const g=u-p,y=(u+1&2)==0?this.size-1-d:d;!this.isFunction[y][g]&&c<A.length*8&&(this.modules[y][g]=s(A[c>>>3],7-(c&7)),c++)}}i(c==A.length*8)}applyMask(A){if(A<0||A>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let d;switch(A){case 0:d=(u+c)%2==0;break;case 1:d=c%2==0;break;case 2:d=u%3==0;break;case 3:d=(u+c)%3==0;break;case 4:d=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:d=u*c%2+u*c%3==0;break;case 6:d=(u*c%2+u*c%3)%2==0;break;case 7:d=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&d&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let A=0;for(let p=0;p<this.size;p++){let g=!1,v=0,y=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[p][S]==g?(v++,v==5?A+=e.PENALTY_N1:v>5&&A++):(this.finderPenaltyAddHistory(v,y),g||(A+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),g=this.modules[p][S],v=1);A+=this.finderPenaltyTerminateAndCount(g,v,y)*e.PENALTY_N3}for(let p=0;p<this.size;p++){let g=!1,v=0,y=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][p]==g?(v++,v==5?A+=e.PENALTY_N1:v>5&&A++):(this.finderPenaltyAddHistory(v,y),g||(A+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),g=this.modules[S][p],v=1);A+=this.finderPenaltyTerminateAndCount(g,v,y)*e.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let g=0;g<this.size-1;g++){const v=this.modules[p][g];v==this.modules[p][g+1]&&v==this.modules[p+1][g]&&v==this.modules[p+1][g+1]&&(A+=e.PENALTY_N2)}let c=0;for(const p of this.modules)c=p.reduce((g,v)=>g+(v?1:0),c);const u=this.size*this.size,d=Math.ceil(Math.abs(c*20-u*10)/u)-1;return i(0<=d&&d<=9),A+=d*e.PENALTY_N4,i(0<=A&&A<=2568888),A}getAlignmentPatternPositions(){if(this.version==1)return[];{const A=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(A*2-2))*2;let u=[6];for(let d=this.size-7;u.length<A;d-=c)u.splice(1,0,d);return u}}static getNumRawDataModules(A){if(A<e.MIN_VERSION||A>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*A+128)*A+64;if(A>=2){const u=Math.floor(A/7)+2;c-=(25*u-10)*u-55,A>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(A,c){return Math.floor(e.getNumRawDataModules(A)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][A]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][A]}static reedSolomonComputeDivisor(A){if(A<1||A>255)throw new RangeError("Degree out of range");let c=[];for(let d=0;d<A-1;d++)c.push(0);c.push(1);let u=1;for(let d=0;d<A;d++){for(let p=0;p<c.length;p++)c[p]=e.reedSolomonMultiply(c[p],u),p+1<c.length&&(c[p]^=c[p+1]);u=e.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(A,c){let u=c.map(d=>0);for(const d of A){const p=d^u.shift();u.push(0),c.forEach((g,v)=>u[v]^=e.reedSolomonMultiply(g,p))}return u}static reedSolomonMultiply(A,c){if(A>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let d=7;d>=0;d--)u=u<<1^(u>>>7)*285,u^=(c>>>d&1)*A;return i(u>>>8==0),u}finderPenaltyCountPatterns(A){const c=A[1];i(c<=this.size*3);const u=c>0&&A[2]==c&&A[3]==c*3&&A[4]==c&&A[5]==c;return(u&&A[0]>=c*4&&A[6]>=c?1:0)+(u&&A[6]>=c*4&&A[0]>=c?1:0)}finderPenaltyTerminateAndCount(A,c,u){return A&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(A,c){c[0]==0&&(A+=this.size),c.pop(),c.unshift(A)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(A,c,u){if(c<0||c>31||A>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(A>>>d&1)}function s(A,c){return(A>>>c&1)!=0}function i(A){if(!A)throw new Error("Assertion error")}const a=class{constructor(A,c,u){if(this.mode=A,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(A){let c=[];for(const u of A)n(u,8,c);return new a(a.Mode.BYTE,A.length,c)}static makeNumeric(A){if(!a.isNumeric(A))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<A.length;){const d=Math.min(A.length-u,3);n(parseInt(A.substr(u,d),10),d*3+1,c),u+=d}return new a(a.Mode.NUMERIC,A.length,c)}static makeAlphanumeric(A){if(!a.isAlphanumeric(A))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=A.length;u+=2){let d=a.ALPHANUMERIC_CHARSET.indexOf(A.charAt(u))*45;d+=a.ALPHANUMERIC_CHARSET.indexOf(A.charAt(u+1)),n(d,11,c)}return u<A.length&&n(a.ALPHANUMERIC_CHARSET.indexOf(A.charAt(u)),6,c),new a(a.Mode.ALPHANUMERIC,A.length,c)}static makeSegments(A){return A==""?[]:a.isNumeric(A)?[a.makeNumeric(A)]:a.isAlphanumeric(A)?[a.makeAlphanumeric(A)]:[a.makeBytes(a.toUtf8ByteArray(A))]}static makeEci(A){let c=[];if(A<0)throw new RangeError("ECI assignment value out of range");if(A<128)n(A,8,c);else if(A<16384)n(2,2,c),n(A,14,c);else if(A<1e6)n(6,3,c),n(A,21,c);else throw new RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,c)}static isNumeric(A){return a.NUMERIC_REGEX.test(A)}static isAlphanumeric(A){return a.ALPHANUMERIC_REGEX.test(A)}getData(){return this.bitData.slice()}static getTotalBits(A,c){let u=0;for(const d of A){const p=d.mode.numCharCountBits(c);if(d.numChars>=1<<p)return 1/0;u+=4+p+d.bitData.length}return u}static toUtf8ByteArray(A){A=encodeURI(A);let c=[];for(let u=0;u<A.length;u++)A.charAt(u)!="%"?c.push(A.charCodeAt(u)):(c.push(parseInt(A.substr(u+1,2),16)),u+=2);return c}};let o=a;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(su||(su={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(su||(su={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(su||(su={}));var bf=su;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var eZ={L:bf.QrCode.Ecc.LOW,M:bf.QrCode.Ecc.MEDIUM,Q:bf.QrCode.Ecc.QUARTILE,H:bf.QrCode.Ecc.HIGH},tZ=128,rZ="L",nZ="#FFFFFF",sZ="#000000",iZ=!1,p6=4,aZ=.1;function oZ(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(a,o){if(!a&&i!==null){r.push(`M${i+e} ${s+e}h${o-i}v1H${i+e}z`),i=null;return}if(o===n.length-1){if(!a)return;i===null?r.push(`M${o+e},${s+e} h1v1H${o+e}z`):r.push(`M${i+e},${s+e} h${o+1-i}v1H${i+e}z`);return}a&&i===null&&(i=o)})}),r.join("")}function AZ(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function lZ(t,e,r,n){if(n==null)return null;const s=r?p6:0,i=t.length+s*2,a=Math.floor(e*aZ),o=i/e,A=(n.width||a)*o,c=(n.height||a)*o,u=n.x==null?t.length/2-A/2:n.x*o,d=n.y==null?t.length/2-c/2:n.y*o;let p=null;if(n.excavate){let g=Math.floor(u),v=Math.floor(d),y=Math.ceil(A+u-g),S=Math.ceil(c+d-v);p={x:g,y:v,w:y,h:S}}return{x:u,y:d,h:c,w:A,excavation:p}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function cZ(t){const e=t,{value:r,size:n=tZ,level:s=rZ,bgColor:i=nZ,fgColor:a=sZ,includeMargin:o=iZ,imageSettings:A}=e,c=ZY(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let u=bf.QrCode.encodeText(r,eZ[s]).getModules();const d=o?p6:0,p=u.length+d*2,g=lZ(u,n,o,A);let v=null;A!=null&&g!=null&&(g.excavation!=null&&(u=AZ(u,g.excavation)),v=yo.createElement("image",{xlinkHref:A.src,height:g.h,width:g.w,x:g.x+d,y:g.y+d,preserveAspectRatio:"none"}));const y=oZ(u,d);return yo.createElement("svg",YY({height:n,width:n,viewBox:`0 0 ${p} ${p}`},c),yo.createElement("path",{fill:i,d:`M0,0 h${p}v${p}H0z`,shapeRendering:"crispEdges"}),yo.createElement("path",{fill:a,d:y,shapeRendering:"crispEdges"}),v)}const uZ=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:i,saveStaticData:a,dutyZones:o}=Pi(),{schedule1:A,schedule2:c,substitutions:u,saveScheduleData:d,dutySchedule:p,nutritionRecords:g}=CA(),v=G.useRef(null),y=G.useRef(null),S=G.useRef(null),[x,I]=G.useState(iA()),[N,U]=G.useState(()=>s0(new Date,s)),[D,P]=G.useState(!1),[E,_]=G.useState(!1),[B,Q]=G.useState(""),[k,L]=G.useState(""),[T,Y]=G.useState(!1),[xe,Be]=G.useState(""),_e=G.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:i,schedule:A,schedule2:c,substitutions:u,dutyZones:o,dutySchedule:p,nutritionRecords:g}),[t,e,r,n,s,i,A,c,u,o,p,g]),se=()=>N===2?c:A,me=be=>{const we=new Date(be).getMonth();return we>=0&&we<=4?c:A},Pe=G.useMemo(()=>{const be=new Set;return r.forEach(we=>{const ue=we.name.match(/^(\d+)/);ue&&be.add(ue[1])}),Array.from(be).sort((we,ue)=>parseInt(we)-parseInt(ue))},[r]);G.useEffect(()=>{Pe.length>0&&!xe&&Be(Pe[0])},[Pe]);const Se=be=>{var je;const we=(je=be.target.files)==null?void 0:je[0];if(!we)return;const ue=new FileReader;ue.onload=async q=>{var le;try{const ae=JSON.parse((le=q.target)==null?void 0:le.result);if(ae.teachers&&(ae.schedule||ae.schedule2)){if(window.confirm("    . ?")){const he={...Ni,...ae,rooms:ae.rooms||Ni.rooms,classes:ae.classes||[],schedule:ae.schedule||[],schedule2:ae.schedule2||[],teachers:ae.teachers||[],subjects:ae.subjects||[],substitutions:ae.substitutions||[],settings:{...Ni.settings,...ae.settings}};await a(he),await d(he),alert("  !")}}else alert("  .")}catch{alert("  .")}},ue.readAsText(we)},M=()=>{const be=se();let we=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Ur.forEach(le=>{we+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${le}</td></tr>`,[Ze.First,Ze.Second].forEach(ae=>{const he=r.filter(Te=>Te.shift===ae);he.length!==0&&(we+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${ae}</td></tr>`,we+='<tr><th class="header"></th>',Os[ae].forEach(Te=>we+=`<th class="header">${Te} </th>`),we+="</tr>",he.forEach(Te=>{we+=`<tr><td class="class-cell">${Te.name}</td>`,Os[ae].forEach(Re=>{const Ge=be.filter(Ke=>Ke.classId===Te.id&&Ke.day===le&&Ke.shift===ae&&Ke.period===Re);we+='<td style="height: 60px;">',Ge.forEach(Ke=>{const Et=t.find(Je=>Je.id===Ke.subjectId),pt=e.find(Je=>Je.id===Ke.teacherId),ht=n.find(Je=>Je.id===Ke.roomId),ot=ht?ht.name:Ke.roomId;we+=`<div style="background-color: ${(Et==null?void 0:Et.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(Et==null?void 0:Et.name)||""} ${Ke.direction||""}</div>
                                <div class="meta">${(pt==null?void 0:pt.name)||""} ${ot?`(. ${ot})`:""}</div>
                            </div>`}),we+="</td>"}),we+="</tr>"}))})}),we+="</table></body></html>";const ue=new Blob([we],{type:"application/vnd.ms-excel"}),je=URL.createObjectURL(ue),q=document.createElement("a");q.href=je,q.download=`_22_${N}.xls`,document.body.appendChild(q),q.click(),document.body.removeChild(q)},H=()=>{const be=se(),we={[cr.Monday]:{header:"#fecaca",cell:"#fee2e2"},[cr.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[cr.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[cr.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[cr.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let ue=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ue+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[Ze.First,Ze.Second].forEach(ae=>{const he=Os[ae];ue+="<table>",ue+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${Ur.length*he.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,ue+="<tr>",Ur.forEach(Re=>{var Ke;const Ge=((Ke=we[Re])==null?void 0:Ke.header)||"#f3f4f6";ue+=`<th colspan="${he.length}" class="header" style="border: 2px solid #000; background-color: ${Ge};">${Re}</th>`}),ue+="</tr>",ue+="<tr>",Ur.forEach(Re=>{var Ke;const Ge=((Ke=we[Re])==null?void 0:Ke.header)||"#f3f4f6";he.forEach(Et=>ue+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${Ge};"></th>`)}),ue+="</tr>";const Te="#e5e7eb";ue+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${Te};">${ae}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${Te};"></th>
            `,Ur.forEach(Re=>{var Ke;const Ge=((Ke=we[Re])==null?void 0:Ke.header)||"#f3f4f6";he.forEach(Et=>ue+=`<th class="header" style="width: 40px; background-color: ${Ge};">${Et}</th>`)}),ue+="</tr>",t.forEach(Re=>{const Ge=e.filter(Ke=>Ke.subjectIds.includes(Re.id)&&Ke.shifts.includes(ae));Ge.length!==0&&(Ge.forEach((Ke,Et)=>{ue+="<tr>",Et===0&&(ue+=`<td rowspan="${Ge.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Re.name}</td>`),ue+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${Ke.name}</td>`,Ur.forEach(pt=>{var ot;const ht=((ot=we[pt])==null?void 0:ot.cell)||"#fff";he.forEach(Je=>{const qe=be.find(Tt=>Tt.teacherId===Ke.id&&Tt.subjectId===Re.id&&Tt.day===pt&&Tt.period===Je&&Tt.shift===ae);if(qe){const Tt=r.find(Ht=>Ht.id===qe.classId),_t=n.find(Ht=>Ht.id===qe.roomId),kt=_t?_t.name:qe.roomId,Wt=kt?`<sub>${kt}</sub>`:"",Ot=qe.direction?` <span style="font-size:10px">(${qe.direction})</span>`:"";ue+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ht};">${Tt?Tt.name:""}${Ot}${Wt}</td>`}else ue+=`<td style="border: 1px solid #000; background-color: ${ht};"></td>`})}),ue+="</tr>"}),ue+=`<tr><td colspan="${2+Ur.length*he.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),ue+="</table><br/><br/>"}),ue+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ue+="</body></html>";const je=new Blob([ue],{type:"application/vnd.ms-excel"}),q=URL.createObjectURL(je),le=document.createElement("a");le.href=q,le.download=`__${N}.xls`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},K=()=>{const be=se(),we={[cr.Monday]:{header:"#fecaca",cell:"#fee2e2"},[cr.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[cr.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[cr.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[cr.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let ue=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ue+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[Ze.First,Ze.Second].forEach(ae=>{const he=Os[ae];ue+="<table>",ue+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${Ur.length*he.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,ue+="<tr>",Ur.forEach(Re=>{var Ke;const Ge=((Ke=we[Re])==null?void 0:Ke.header)||"#f3f4f6";ue+=`<th colspan="${he.length}" class="header" style="border: 3px solid #000; background-color: ${Ge}; font-size: 20pt;">${Re}</th>`}),ue+="</tr>",ue+="<tr>",Ur.forEach(Re=>{var Ke;const Ge=((Ke=we[Re])==null?void 0:Ke.header)||"#f3f4f6";ue+=`<th colspan="${he.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${Ge}; font-size: 16pt;"></th>`}),ue+="</tr>";const Te="#e5e7eb";ue+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${Te}; font-size: 24pt;">${ae}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${Te};"></th>
            `,Ur.forEach(Re=>{var Ke;const Ge=((Ke=we[Re])==null?void 0:Ke.header)||"#f3f4f6";he.forEach(Et=>ue+=`<th class="header" style="width: 20px; background-color: ${Ge}; font-size: 16pt;">${Et}</th>`)}),ue+="</tr>",t.forEach(Re=>{const Ge=e.filter(Ke=>Ke.subjectIds.includes(Re.id)&&Ke.shifts.includes(ae));Ge.length!==0&&(Ge.forEach((Ke,Et)=>{ue+="<tr>",Et===0&&(ue+=`<td rowspan="${Ge.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Re.name}</td>`),ue+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${Ke.name}</td>`,Ur.forEach(pt=>{var ot;const ht=((ot=we[pt])==null?void 0:ot.cell)||"#fff";he.forEach(Je=>{const qe=be.find(Tt=>Tt.teacherId===Ke.id&&Tt.subjectId===Re.id&&Tt.day===pt&&Tt.period===Je&&Tt.shift===ae);if(qe){const Tt=r.find(vt=>vt.id===qe.classId),_t=n.find(vt=>vt.id===qe.roomId),kt=_t?_t.name:qe.roomId,Wt=kt?`<sub>${kt}</sub>`:"",Ot=qe.direction?` <span style="font-size:14px">(${qe.direction})</span>`:"";ue+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ht}; height: 60px;">${Tt?Tt.name:""}${Ot}${Wt}</td>`}else ue+=`<td style="border: 1px solid #000; background-color: ${ht};"></td>`})}),ue+="</tr>"}),ue+=`<tr><td colspan="${2+Ur.length*he.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),ue+="</table><br/><br/>"}),ue+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ue+="</body></html>";const je=new Blob([ue],{type:"application/vnd.ms-excel"}),q=URL.createObjectURL(je),le=document.createElement("a");le.href=q,le.download=`__${N}.xls`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},Z=()=>{const be=se(),we=r.filter(Te=>Te.name.startsWith(xe)).sort((Te,Re)=>Te.name.localeCompare(Re.name)),ue=Array.from(new Set(we.map(Te=>Te.shift))).sort(),je={[cr.Monday]:{label:"#fecaca",cell:"#fee2e2"},[cr.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[cr.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[cr.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[cr.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let q=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;ue.forEach(Te=>{const Re=we.filter(Ke=>Ke.shift===Te),Ge=Os[Te];Re.length!==0&&(q+="<table>",q+="<tr>",q+='<td style="border:none"></td>',q+='<td style="border:none"></td>',q+=`<td colspan="${Re.length}" class="shift-header">${Te}</td>`,q+="</tr>",q+="<tr>",q+='<td style="border:none"></td>',q+='<td style="border:none"></td>',Re.forEach(Ke=>{q+=`<td class="class-header">${Ke.name}</td>`}),q+="</tr>",Ur.forEach(Ke=>{const Et=je[Ke]||{label:"#e5e7eb",cell:"#f3f4f6"};Ge.forEach((pt,ht)=>{q+="<tr>",ht===0&&(q+=`<td rowspan="${Ge.length}" class="day-cell" style="background-color: ${Et.label};">${Ke.toUpperCase()}</td>`),q+=`<td class="period-cell" style="background-color: ${Et.label};">${pt}</td>`,Re.forEach(ot=>{const Je=be.filter(qe=>qe.classId===ot.id&&qe.day===Ke&&qe.shift===Te&&qe.period===pt);q+=`<td class="content-cell" style="background-color: ${Et.cell};">`,Je.forEach((qe,Tt)=>{Tt>0&&(q+='<br style="mso-data-placement:same-cell;">');const _t=t.find(Ot=>Ot.id===qe.subjectId),kt=n.find(Ot=>Ot.id===qe.roomId),Wt=kt?kt.name:qe.roomId||"";q+=`<span class="subject">${(_t==null?void 0:_t.name)||""}</span>`,Wt&&(q+=` <span class="room">${Wt}</span>`)}),q+="</td>"}),q+="</tr>"}),q+=`<tr><td colspan="${2+Re.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),q+="</table><br><br>")}),q+="</body></html>";const le=new Blob([q],{type:"application/vnd.ms-excel"}),ae=URL.createObjectURL(le),he=document.createElement("a");he.href=ae,he.download=`__${xe}_.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},ne=()=>{const be=new Date(x),we=be.getUTCMonth(),ue=be.getUTCFullYear(),je=u.filter(ot=>{const Je=new Date(ot.date);return Je.getUTCMonth()===we&&Je.getUTCFullYear()===ue}).sort((ot,Je)=>new Date(ot.date).getTime()-new Date(Je.date).getTime());if(je.length===0){alert("      .");return}const q=new Map;je.forEach(ot=>{const Je=`${ot.scheduleItemId}_${ot.date}`,qe=q.get(Je)||[];qe.push(ot),q.set(Je,qe)});const le=[],ae=[];q.forEach(ot=>{var vt;const Je=ot[0],qe=A.find(Ht=>Ht.id===Je.scheduleItemId)||c.find(Ht=>Ht.id===Je.scheduleItemId);if(!qe)return;const Tt=r.find(Ht=>Ht.id===qe.classId),_t=t.find(Ht=>Ht.id===qe.subjectId),kt=e.find(Ht=>Ht.id===Je.originalTeacherId);let Wt=Je.lessonAbsenceReason||((vt=kt==null?void 0:kt.absenceReasons)==null?void 0:vt[Je.date])||"";Je.replacementTeacherId===Je.originalTeacherId&&Je.replacementRoomId&&!Je.replacementClassId&&(Wt=" "),Je.replacementClassId&&Je.replacementSubjectId&&!Je.isMerger&&(Wt=" ");const Ot={subs:ot,scheduleItem:qe,cls:Tt,subj:_t,origTeacher:kt,reason:Wt};Wt===" "?ae.push(Ot):le.push(Ot)});let he=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${be.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const Te=ot=>ot.map(Je=>{const{subs:qe,scheduleItem:Tt,cls:_t,subj:kt,origTeacher:Wt,reason:Ot}=Je,vt=qe[0],Ht=new Date(vt.date).toLocaleDateString("ru-RU");let rn="";if(vt.replacementTeacherId==="conducted")rn=" ";else if(vt.replacementTeacherId==="cancelled")rn=" ";else if(rn=qe.map(Rr=>{const pr=e.find(Fr=>Fr.id===Rr.replacementTeacherId);return pr?pr.name:""}).join(", "),vt.isMerger){let Rr=" ()";if(vt.replacementClassId){const pr=r.find(Fr=>Fr.id===vt.replacementClassId);pr&&(Rr=` (  ${pr.name})`)}rn+=Rr}else if(vt.replacementClassId&&vt.replacementSubjectId){const Rr=r.find(Fr=>Fr.id===vt.replacementClassId),pr=t.find(Fr=>Fr.id===vt.replacementSubjectId);rn+=` ( ${(Rr==null?void 0:Rr.name)||"?"} ${(pr==null?void 0:pr.name)||"?"})`}const jr=Tt.roomId,Vr=vt.replacementRoomId,tr=Vr||jr,Qt=n.find(nn=>nn.id===tr),kr=Qt?Qt.name:tr||"-",us=Vr?`${kr} ( .)`:kr;return`
                    <tr>
                        <td>${Ht}</td>
                        <td>${Tt.period}</td>
                        <td>${Tt.shift}</td>
                        <td>${(_t==null?void 0:_t.name)||"?"}</td>
                        <td>${(kt==null?void 0:kt.name)||"?"}</td>
                        <td>${(Wt==null?void 0:Wt.name)||"?"}</td>
                        <td>${rn}</td>
                        <td>${us}</td>
                        <td>${Ot}</td>
                    </tr>
                `}).join(""),Re=(ot,Je=!1)=>`
            <table>
            <thead>
                <tr class="${Je?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${Te(ot)}
            </tbody>
            </table>
        `;le.length>0?he+=Re(le):he+="<p>     .</p>",ae.length>0&&(he+="<br/><br/>",he+='<h3 style="color: #b91c1c;">   (  )</h3>',he+=Re(ae,!0));const Ge=new Map;je.forEach(ot=>{var kt;if(ot.replacementTeacherId==="conducted"||ot.replacementTeacherId==="cancelled"||ot.replacementTeacherId===ot.originalTeacherId)return;const Je=e.find(Wt=>Wt.id===ot.replacementTeacherId);if(!Je)return;const qe=Ge.get(Je.id)||{name:Je.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},Tt=e.find(Wt=>Wt.id===ot.originalTeacherId);let _t=ot.lessonAbsenceReason||((kt=Tt==null?void 0:Tt.absenceReasons)==null?void 0:kt[ot.date])||"";ot.replacementClassId&&ot.replacementSubjectId&&!ot.isMerger&&(_t=" "),qe.total++,ot.isMerger?qe.merger++:_t===""?qe.illness++:_t===" "?qe.withoutRecord++:qe.other++,Ge.set(Je.id,qe)});const Ke=Array.from(Ge.values()).sort((ot,Je)=>ot.name.localeCompare(Je.name));Ke.length>0&&(he+="<br/><br/>",he+="<h3>   </h3>",he+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,Ke.forEach(ot=>{he+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${ot.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ot.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ot.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ot.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ot.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ot.other}</td>
                     </tr>
                 `}),he+="</tbody></table>"),he+="</body></html>";const Et=new Blob([he],{type:"application/vnd.ms-excel"}),pt=URL.createObjectURL(Et),ht=document.createElement("a");ht.href=pt,ht.download=`__${be.getMonth()+1}_${be.getFullYear()}.xls`,document.body.appendChild(ht),ht.click(),document.body.removeChild(ht)},de=()=>{const be=new Date(x),we=be.getUTCMonth(),ue=be.getUTCFullYear(),je=u.filter(Te=>{const Re=new Date(Te.date),Ge=Re.getUTCMonth()===we&&Re.getUTCFullYear()===ue,Ke=Te.refusals&&Te.refusals.length>0;return Ge&&Ke}).sort((Te,Re)=>new Date(Te.date).getTime()-new Date(Re.date).getTime());if(je.length===0){alert("      .");return}let q=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${be.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;je.forEach(Te=>{const Re=A.find(Je=>Je.id===Te.scheduleItemId)||c.find(Je=>Je.id===Te.scheduleItemId);if(!Re)return;const Ge=new Date(Te.date).toLocaleDateString("ru-RU"),Ke=r.find(Je=>Je.id===Re.classId),Et=t.find(Je=>Je.id===Re.subjectId),pt=e.find(Je=>Je.id===Te.originalTeacherId);let ht="";if(Te.replacementTeacherId==="conducted")ht=" ";else if(Te.replacementTeacherId==="cancelled")ht=" ";else{const Je=e.find(qe=>qe.id===Te.replacementTeacherId);ht=Je?Je.name:""}const ot=(Te.refusals||[]).map(Je=>{const qe=e.find(Tt=>Tt.id===Je);return qe?qe.name:""}).join(", ");q+=`
                <tr>
                    <td>${Ge}</td>
                    <td>${Re.period}</td>
                    <td>${Re.shift}</td>
                    <td>${(Ke==null?void 0:Ke.name)||"?"}</td>
                    <td>${(Et==null?void 0:Et.name)||"?"}</td>
                    <td>${(pt==null?void 0:pt.name)||"?"}</td>
                    <td>${ht}</td>
                    <td>${ot}</td>
                </tr>
            `}),q+="</tbody></table></body></html>";const le=new Blob([q],{type:"application/vnd.ms-excel"}),ae=URL.createObjectURL(le),he=document.createElement("a");he.href=ae,he.download=`__${be.getMonth()+1}_${be.getFullYear()}.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},Ae=()=>{const be=se();let we=`							
`;Ur.forEach(ue=>{[Ze.First,Ze.Second].forEach(je=>{r.filter(le=>le.shift===je).forEach(le=>{Os[je].forEach(ae=>{be.filter(Te=>Te.classId===le.id&&Te.day===ue&&Te.shift===je&&Te.period===ae).forEach(Te=>{const Re=t.find(pt=>pt.id===Te.subjectId),Ge=e.find(pt=>pt.id===Te.teacherId),Ke=n.find(pt=>pt.id===Te.roomId),Et=Ke?Ke.name:Te.roomId||"";we+=`${ue}	${je}	${le.name}	${ae}	${(Re==null?void 0:Re.name)||""}	${(Ge==null?void 0:Ge.name)||""}	${Et}	${Te.direction||""}
`})})})})}),navigator.clipboard.writeText(we).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},pe=async()=>{P(!0);try{if(!y.current){alert("   1- .");return}const be=await qd(y.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),we=document.createElement("a");we.href=be.toDataURL("image/png"),we.download=`_${x}_1.png`,document.body.appendChild(we),we.click(),document.body.removeChild(we)}catch(be){console.error(be),alert("   ")}finally{P(!1)}},Ee=async()=>{P(!0);try{if(!S.current){alert("   2- .");return}const be=await qd(S.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),we=document.createElement("a");we.href=be.toDataURL("image/png"),we.download=`_${x}_2.png`,document.body.appendChild(we),we.click(),document.body.removeChild(we)}catch(be){console.error(be),alert("   ")}finally{P(!1)}},Oe=G.useMemo(()=>u.filter(be=>be.date===x),[u,x]),rt=G.useMemo(()=>{const be=me(x);return Oe.filter(we=>{const ue=be.find(je=>je.id===we.scheduleItemId);return ue&&ue.shift===Ze.First}).filter(we=>we.replacementTeacherId!=="conducted").length>0},[Oe,me,x]),ke=G.useMemo(()=>{const be=me(x);return Oe.filter(we=>{const ue=be.find(je=>je.id===we.scheduleItemId);return ue&&ue.shift===Ze.Second}).filter(we=>we.replacementTeacherId!=="conducted").length>0},[Oe,me,x]),ce=be=>{const we=me(x),ue=Oe.filter(q=>{const le=we.find(ae=>ae.id===q.scheduleItemId);return le&&le.shift===be}).filter(q=>q.replacementTeacherId!=="conducted");if(ue.length===0)return null;const je=Array.from(new Set(ue.map(q=>q.scheduleItemId))).sort((q,le)=>{const ae=we.find(Te=>Te.id===q),he=we.find(Te=>Te.id===le);return((ae==null?void 0:ae.period)??0)-((he==null?void 0:he.period)??0)});return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:be}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:je.map(q=>{var rn,jr,Vr;const le=ue.filter(tr=>tr.scheduleItemId===q),ae=le[0],he=we.find(tr=>tr.id===q);if(!he)return null;const Te=r.find(tr=>tr.id===he.classId),Re=t.find(tr=>tr.id===he.subjectId),Ge=e.find(tr=>tr.id===ae.originalTeacherId),Ke=ae.replacementRoomId,Et=he.roomId?n.find(tr=>tr.id===he.roomId):null,pt=Et?Et.name:he.roomId||"",ht=Ke?n.find(tr=>tr.id===Ke):null,ot=ht?ht.name:Ke||"",Je=ae.replacementTeacherId==="cancelled",qe=(rn=Ge==null?void 0:Ge.absenceReasons)==null?void 0:rn[x],Tt=ae.lessonAbsenceReason,_t=Tt===" "?Tt:qe===" "?qe:"",kt=ae.replacementClassId?r.find(tr=>tr.id===ae.replacementClassId):null,Wt=ae.replacementSubjectId?t.find(tr=>tr.id===ae.replacementSubjectId):null,Ot=ae.replacementTeacherId===ae.originalTeacherId&&Ke&&!kt,vt=kt&&Wt&&!ae.isMerger,Ht=ae.replacementTeacherId===ae.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:he.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:Te==null?void 0:Te.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Re==null?void 0:Re.name}),he.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:he.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!Ht&&!Ot&&!vt&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[Ge==null?void 0:Ge.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),_t&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:_t})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${Je?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Ot?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:Ge==null?void 0:Ge.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):vt?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:Ge==null?void 0:Ge.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",kt==null?void 0:kt.name]})]}):Je?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:le.length>1||ae.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:le.map(tr=>{const Qt=e.find(kr=>kr.id===tr.replacementTeacherId);return Qt?Qt.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",ae.replacementClassId?`(${(jr=r.find(tr=>tr.id===ae.replacementClassId))==null?void 0:jr.name})`:""]})]}):l.jsx("span",{children:(Vr=e.find(tr=>tr.id===ae.replacementTeacherId))==null?void 0:Vr.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Ke?"text-indigo-600":"text-slate-700"}`,children:Ke&&Ke!==he.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:pt}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:ot})]}):l.jsx("span",{className:"text-xl",children:pt})})]},String(q))})})]})]})},R=async()=>{const be=ai();await os.setPublicData(be,_e),await a({settings:{...s,publicScheduleId:be}});const we=`${window.location.origin}${window.location.pathname}#/public?id=${be}`;Q(we),L(be),_(!0)},Ce=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await os.deletePublicData(s.publicScheduleId),await a({settings:{...s,publicScheduleId:null}}),alert("  ."),Q(""),L(""))},Me=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(x).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),st=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]}),ge=()=>{const be=se(),we=r.filter(q=>q.name.startsWith(xe)).sort((q,le)=>q.name.localeCompare(le.name)),ue=Array.from(new Set(we.map(q=>q.shift))).sort(),je={[cr.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[cr.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[cr.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[cr.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[cr.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return we.length===0?l.jsx("div",{className:"text-center p-10",children:"    "}):l.jsx("div",{className:"font-sans text-black",children:ue.map(q=>{const le=we.filter(he=>he.shift===q),ae=Os[q];return le.length===0?null:l.jsx("div",{className:"mb-10 page-break-inside-avoid",children:l.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{colSpan:le.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:q})]}),l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),le.map(he=>l.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:he.name},String(he.id)))]})]}),l.jsx("tbody",{children:Ur.map(he=>{const Te=je[he]||{label:"bg-gray-200",cell:"bg-gray-100"};return l.jsxs(yo.Fragment,{children:[ae.map((Re,Ge)=>l.jsxs("tr",{children:[Ge===0&&l.jsx("td",{rowSpan:ae.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${Te.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:he===cr.Monday?"":he===cr.Tuesday?"":he===cr.Wednesday?"":he===cr.Thursday?"":he===cr.Friday?"":he}),l.jsx("td",{className:`border-2 border-black font-bold text-base ${Te.label}`,children:Re}),le.map(Ke=>{const Et=be.filter(pt=>pt.classId===Ke.id&&pt.day===he&&pt.shift===q&&pt.period===Re);return l.jsx("td",{className:`border-2 border-black p-1 h-12 ${Te.cell}`,children:Et.map(pt=>{const ht=t.find(qe=>qe.id===pt.subjectId),ot=n.find(qe=>qe.id===pt.roomId),Je=ot?ot.name:pt.roomId||"";return l.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[l.jsx("span",{children:ht==null?void 0:ht.name}),Je&&l.jsx("span",{className:"font-black",children:Je})]},String(pt.id))})},String(Ke.id))})]},`${String(he)}-${Re}`)),l.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:l.jsx("td",{colSpan:2+le.length})})]},String(he))})})]})},String(q))})})};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>os.exportJson(_e),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(ve,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:v,onChange:Se,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var be;return(be=v.current)==null?void 0:be.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(ve,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(ve,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:x,onChange:be=>I(be.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:pe,disabled:D||!rt,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:D?l.jsxs(l.Fragment,{children:[l.jsx(ve,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ve,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:Ee,disabled:D||!ke,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:D?l.jsxs(l.Fragment,{children:[l.jsx(ve,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ve,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:Oe.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Me,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(st,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[rt&&l.jsxs("div",{ref:y,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Me,{}),ce(Ze.First),l.jsx(st,{})]}),ke&&l.jsxs("div",{ref:S,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Me,{}),ce(Ze.Second),l.jsx(st,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsx("select",{value:xe,onChange:be=>Be(be.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:Pe.map(be=>l.jsxs("option",{value:be,children:[be,"- "]},be))})]}),l.jsxs("button",{onClick:()=>Y(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(ve,{name:"Printer",size:20}),"    "]}),l.jsxs("button",{onClick:Z,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(ve,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:N,onChange:be=>U(Number(be.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:M,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(ve,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:H,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(ve,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:K,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(ve,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Ae,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(ve,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:ne,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(ve,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:de,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(ve,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>_(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(ve,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Ce,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(ve,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:R,disabled:D,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(ve,{name:"Share2",size:20}),"  "]})]}),l.jsx(cs,{isOpen:E,onClose:()=>_(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),B&&l.jsxs(l.Fragment,{children:[l.jsx(cZ,{value:B,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:B}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(B),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(ve,{name:"Copy",size:16}),"  "]})]})]})}),T&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",xe,"- )"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(ve,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:l.jsx(ge,{})})]})]})},dZ=()=>{var D;const{subjects:t,teachers:e,classes:r}=Pi(),{schedule1:n,schedule2:s,substitutions:i}=CA(),[a,o]=G.useState("load"),[A,c]=G.useState(((D=r[0])==null?void 0:D.id)||""),[u,d]=G.useState(()=>{const P=new Date().getMonth();return P>=0&&P<=4?2:1}),[p,g]=G.useState(["name","weeklyHours","actualHours"]),v=G.useMemo(()=>u===2?s:n,[u,n,s]),y=G.useMemo(()=>e.map(E=>{const _=v.filter(Be=>Be.teacherId===E.id),B=_.length,Q=B*4,k=i.filter(Be=>Be.replacementTeacherId===E.id).length,L=i.filter(Be=>Be.originalTeacherId===E.id).length,T=Q+k-L,Y={};_.forEach(Be=>{const _e=t.find(se=>se.id===Be.subjectId);_e&&(Y[_e.name]=(Y[_e.name]||0)+1)});const xe=Object.keys(Y).join(", ");return{id:E.id,name:E.name,weeklyHours:B,monthlyPlan:Q,subsTaken:k,subsMissed:L,actualHours:T,subjectBreakdown:Y,subjectsList:xe}}).sort((E,_)=>_.actualHours-E.actualHours),[e,v,i,t]),S=[{key:"name",label:" "},{key:"weeklyHours",label:" ()"},{key:"monthlyPlan",label:" ()"},{key:"subsTaken",label:" (+)"},{key:"subsMissed",label:" (-)"},{key:"actualHours",label:" ()"},{key:"subjectsList",label:""}],x=G.useMemo(()=>A?Ur.map(P=>{const _=v.filter(B=>B.classId===A&&B.day===P).reduce((B,Q)=>{const k=t.find(L=>L.id===Q.subjectId);return B+((k==null?void 0:k.difficulty)||5)},0);return{label:P,value:_}}):[],[v,t,A]),I=G.useMemo(()=>{const P=e.map(_=>({name:_.name,count:i.filter(B=>B.replacementTeacherId===_.id).length})).sort((_,B)=>B.count-_.count).slice(0,5),E=e.map(_=>({name:_.name,count:_.unavailableDates.length})).sort((_,B)=>B.count-_.count).slice(0,5);return{heroes:P,absentees:E}},[e,i]),N=P=>{g(E=>E.includes(P)?E.filter(_=>_!==P):[...E,P])},U=()=>{let P="";if(a==="load")P=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+y.map(B=>`"${B.name}",${B.weeklyHours},${B.subsTaken},${B.subsMissed},${B.actualHours},"${Object.entries(B.subjectBreakdown).map(([Q,k])=>Q+": "+k).join(", ")}"`).join(`
`);else if(a==="sanpin")P=`Day,Score
`+x.map(B=>`${B.label},${B.value}`).join(`
`);else if(a==="builder"){const B=p.map(k=>{var L;return(L=S.find(T=>T.key===k))==null?void 0:L.label}).join(","),Q=y.map(k=>p.map(L=>{const T=k[L];return typeof T=="string"&&T.includes(",")?`"${T}"`:T}).join(",")).join(`
`);P=B+`
`+Q}const E=new Blob([`\uFEFF${P}`],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(E),_.download=`report_${a}_${u}sem.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(ve,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:u,onChange:P=>d(Number(P.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:U,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(ve,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>o("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>o("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>o("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>o("builder"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${a==="builder"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]})]}),a==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:y.map(P=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:P.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:P.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",P.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",P.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:P.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(P.subjectBreakdown).map(([E,_])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[E,": ",_]},E))})})]},P.id))})]})}),a==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:A,onChange:P=>c(P.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))})]}),l.jsx(Lx,{items:x,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),a==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Lx,{items:I.heroes.map(P=>({label:P.name,value:P.count})),max:Math.max(...I.heroes.map(P=>P.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Lx,{items:I.absentees.map(P=>({label:P.name,value:P.count})),max:Math.max(...I.absentees.map(P=>P.count),1),barClassName:"bg-red-500"})]})]}),a==="builder"&&l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2",children:" "}),l.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(P=>l.jsx("button",{onClick:()=>N(P.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${p.includes(P.key)?"bg-indigo-50 border-indigo-200 text-indigo-700 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-300":"bg-white border-slate-200 text-slate-500 hover:border-indigo-300 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-400"}`,children:P.label},P.key))})]}),l.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-600",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsx("tr",{children:p.map(P=>{var E;return l.jsx("th",{className:"p-3 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-600",children:(E=S.find(_=>_.key===P))==null?void 0:E.label},P)})})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:y.map(P=>l.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:p.map(E=>{const _=P[E];return l.jsx("td",{className:"p-3 text-sm text-slate-700 dark:text-slate-300",children:typeof _=="object"?"":_},`${P.id}-${E}`)})},P.id))})]})})]})]})},hZ=()=>{var rt;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=Pi(),{dutySchedule:s,saveScheduleData:i,schedule1:a,schedule2:o}=CA(),A={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,u]=G.useState(()=>{const ke=new Date().getMonth();return ke>=0&&ke<=4?2:1}),[d,p]=G.useState(Ze.First),g=c===1?a:o,v=G.useRef(null),[y,S]=G.useState(!1),[x,I]=G.useState(!1),[N,U]=G.useState(null),[D,P]=G.useState({}),[E,_]=G.useState(""),[B,Q]=G.useState(null),k=(ke,ce,R)=>{const Ce=s.find(Me=>Me.zoneId===ke&&Me.day===ce&&Me.shift===R);return Ce?t.find(Me=>Me.id===Ce.teacherId):null},L=(ke,ce,R,Ce)=>Ce?!!s.find(st=>st.teacherId===Ce&&st.day===ce&&st.shift===R&&st.zoneId!==ke):!1,T=(ke,ce)=>{U({zoneId:ke,day:ce});const R=k(ke,ce,d);Q((R==null?void 0:R.id)||null),S(!0)},Y=async()=>{if(!N)return;let ke=[...s];ke=ke.filter(ce=>!(ce.zoneId===N.zoneId&&ce.day===N.day&&ce.shift===d)),B&&ke.push({id:ai(),zoneId:N.zoneId,day:N.day,shift:d,teacherId:B}),await i({dutySchedule:ke}),S(!1),Q(null)},xe=async()=>{if(!N)return;let ke=[...s];ke=ke.filter(ce=>!(ce.zoneId===N.zoneId&&ce.day===N.day&&ce.shift===d)),await i({dutySchedule:ke}),S(!1),Q(null)},Be=(ke,ce)=>{if(!ke||!ce.includedRooms)return!1;const R=ke.replace(/\D/g,"");return R&&ce.includedRooms.includes(R)?!0:ce.includedRooms.includes(ke)},_e=async()=>{if(!window.confirm("    . ?"))return;let ke=[];const ce=[Ze.First,Ze.Second],R={};Ur.forEach(Ce=>R[Ce]=new Set);for(const Ce of Ur)for(const Me of ce){const st=t.filter(ge=>g.filter(we=>we.teacherId===ge.id&&we.day===Ce&&we.shift===Me).length>=1);for(const ge of e){const be=st.map(ue=>{let je=0;R[Ce].has(ue.id)&&(je-=2e3);const q=g.filter(ae=>{var he;return ae.teacherId===ue.id&&ae.day===Ce&&ae.shift===Me&&ae.roomId&&Be(((he=r.find(Te=>Te.id===ae.roomId))==null?void 0:he.name)||ae.roomId,ge)}).length;return q===0?{teacher:ue,score:-9999}:(je+=q*10,g.filter(ae=>ae.teacherId===ue.id&&ae.day===Ce&&ae.shift===Me).length>=4&&(je+=5),{teacher:ue,score:je})});be.sort((ue,je)=>je.score-ue.score);const we=be[0];we&&we.score>-500&&(ke.push({id:ai(),zoneId:ge.id,day:Ce,shift:Me,teacherId:we.teacher.id}),R[Ce].add(we.teacher.id))}}await i({dutySchedule:ke})},se=async()=>{window.confirm("   (  )?")&&await i({dutySchedule:[]})},me=async()=>{if(!v.current)return;const ke=await qd(v.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),ce=document.createElement("a");ce.href=ke.toDataURL("image/png"),ce.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},Pe={[cr.Monday]:{label:"#fecaca",cell:"#fee2e2"},[cr.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[cr.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[cr.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[cr.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}},Se=()=>{let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 6px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 18pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 12pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #312e81; color: white; border: 2px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #e5e7eb; border: 2px solid #000; text-align: left; padding-left: 10px; }
                    .zone-cell { font-size: 11pt; font-weight: bold; background-color: #fff; text-align: left; width: 250px; mso-number-format: "\\@"; }
                    .day-header { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 10pt; font-weight: bold; height: 35px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 11pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 11pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 15px; }
                </style>
            </head>
            <body>
        `;ce+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,3)}" style="border:none"></td>
                    <td colspan="3" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        __________ ..<br>
                        "__" ______ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,ce+=`
            <table>
                <tr><td colspan="6" class="title-main"> </td></tr>
                <tr><td colspan="6" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,[Ze.First,Ze.Second].forEach(st=>{ce+="<table>",ce+=`<tr><th colspan="6" class="shift-header">${st}</th></tr>`,ce+="<tr>",ce+='<th class="day-header" style="background-color: #f3f4f6;"> </th>',Ur.forEach(ge=>{const be=Pe[ge]||{label:"#ffffff"};ce+=`<th class="day-header" style="background-color: ${be.label};">${ge}</th>`}),ce+="</tr>",Ee.forEach(ge=>{ce+=`<tr><td colspan="6" class="floor-header">${ge.floor}</td></tr>`,ge.zones.forEach(be=>{ce+="<tr>",ce+=`<td class="zone-cell">${be.name}</td>`,Ur.forEach(we=>{const ue=Pe[we]||{cell:"#ffffff"},je=k(be.id,we,st);ce+=`<td class="content-cell" style="background-color: ${ue.cell};">${je?je.name:""}</td>`}),ce+="</tr>"})}),ce+="</table><br/><br/>"}),ce+=`
            <table>
                <tr>
                    <td colspan="3" class="footer-block">  </td>
                    <td colspan="1" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="2" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,ce+="</body></html>";const R=new Blob([ce],{type:"application/vnd.ms-excel"}),Ce=URL.createObjectURL(R),Me=document.createElement("a");Me.href=Ce,Me.download=`__${c}__.xls`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me)},M=()=>{const ce=Oe.length+1;let Me=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 5px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 20pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 14pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #e5e7eb; border: 3px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #d1d5db; border: 2px solid #000; text-transform: uppercase; }
                    .zone-header { font-size: 10pt; font-weight: bold; background-color: #f3f4f6; border: 2px solid #000; mso-number-format: "\\@"; }
                    .day-label { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 11pt; font-weight: bold; height: 40px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 12pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 12pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 20px; }
                </style>
            </head>
            <body>
        `;Me+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,ce-4)}" style="border:none"></td>
                    <td colspan="4" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="${ce}" style="border:none"></td></tr>
            </table>
        `,Me+=`
            <table>
                <tr><td colspan="${ce}" class="title-main"> </td></tr>
                <tr><td colspan="${ce}" class="title-sub">       22 . </td></tr>
                <tr><td colspan="${ce}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="${ce}" style="border:none"></td></tr>
            </table>
        `,[Ze.First,Ze.Second].forEach(q=>{Me+="<table>",Me+=`<tr><th colspan="${ce}" class="shift-header">${q}</th></tr>`,Me+="<tr>",Me+='<th rowspan="2" class="floor-header" style="width: 100px;"> </th>',Ee.forEach(le=>{Me+=`<th colspan="${le.zones.length}" class="floor-header">${le.floor}</th>`}),Me+="</tr>",Me+="<tr>",Oe.forEach(le=>{Me+=`<th class="zone-header">${le.name}</th>`}),Me+="</tr>",Ur.forEach(le=>{const ae=Pe[le]||{label:"#ffffff",cell:"#ffffff"};Me+="<tr>",Me+=`<td class="day-label" style="background-color: ${ae.label};">${le}</td>`,Oe.forEach(he=>{const Te=k(he.id,le,q);Me+=`<td class="content-cell" style="background-color: ${ae.cell};">${Te?Te.name:""}</td>`}),Me+="</tr>"}),Me+=`<tr><td colspan="${ce}" style="height: 4px; background-color: #000; border:none;"></td></tr>`,Me+="</table><br>"});const st=Math.floor(ce*.4),ge=Math.floor(ce*.3),be=ce-st-ge;Me+=`
            <table>
                 <tr class="empty-row"><td colspan="${ce}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${st}" class="footer-block">    22 .</td>
                    <td colspan="${be}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${ge}" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,Me+="</body></html>";const we=new Blob([Me],{type:"application/vnd.ms-excel"}),ue=URL.createObjectURL(we),je=document.createElement("a");je.href=ue,je.download=`__${c}_.xls`,document.body.appendChild(je),je.click(),document.body.removeChild(je)},H=async()=>{if(!D.name)return;const ke=E.split(",").map(Ce=>Ce.trim()).filter(Boolean),ce={...D,includedRooms:ke};let R=[...e];D.id?R=R.map(Ce=>Ce.id===D.id?{...Ce,...ce}:Ce):R.push({...ce,id:ai()}),await n({dutyZones:R}),I(!1)},K=async ke=>{if(!window.confirm(" ?"))return;const ce=e.filter(R=>R.id!==ke);await n({dutyZones:ce})},Z=ke=>{var ce;ke?(P(ke),_(((ce=ke.includedRooms)==null?void 0:ce.join(", "))||"")):(P({}),_("")),I(!0)},ne=()=>{if(!N)return{recommended:[],others:[],allTeachers:[]};const ke=N.day,ce=e.find(ge=>ge.id===N.zoneId),R=t.map(ge=>{const be=g.filter(je=>je.teacherId===ge.id&&je.day===ke&&je.shift===d).length,we=s.some(je=>je.day===ke&&je.teacherId===ge.id&&je.zoneId!==N.zoneId&&je.shift===d),ue=ce&&ce.includedRooms?g.filter(je=>{var q;return je.teacherId===ge.id&&je.day===ke&&je.shift===d&&je.roomId&&Be(((q=r.find(le=>le.id===je.roomId))==null?void 0:q.name)||je.roomId,ce)}).length:0;return{t:ge,lessonsCount:be,isBusy:we,lessonsInZone:ue}}),Ce=R.filter(ge=>ge.lessonsInZone>0&&!ge.isBusy).sort((ge,be)=>be.lessonsInZone-ge.lessonsInZone).map(ge=>({value:ge.t.id,label:`${ge.t.name} (${ge.lessonsInZone} .  )`})),Me=R.filter(ge=>(ge.lessonsInZone===0||ge.isBusy)&&ge.lessonsCount>0).map(ge=>({value:ge.t.id,label:ge.t.name+(ge.isBusy?" ()":"")+(ge.lessonsInZone===0?" (   )":"")})),st=R.filter(ge=>ge.lessonsCount===0).map(ge=>({value:ge.t.id,label:`${ge.t.name} ( )`}));return{recommended:Ce,others:Me,allTeachers:st}},{recommended:de,others:Ae,allTeachers:pe}=ne(),Ee=G.useMemo(()=>{const ke={};return e.forEach(R=>{const Ce=R.floor||" ";ke[Ce]||(ke[Ce]=[]),ke[Ce].push(R)}),Object.keys(ke).sort().map(R=>({floor:R,zones:ke[R].sort((Ce,Me)=>(Ce.order||0)-(Me.order||0))}))},[e]),Oe=G.useMemo(()=>Ee.flatMap(ke=>ke.zones),[Ee]);return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(ve,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>p(Ze.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${d===Ze.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>p(Ze.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${d===Ze.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:c,onChange:ke=>u(Number(ke.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1-"}),l.jsx("option",{value:2,children:"2-"})]})]}),l.jsxs("button",{onClick:_e,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(ve,{name:"Zap",size:16})," "]}),l.jsx("button",{onClick:se,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:l.jsx(ve,{name:"Trash2",size:16})}),l.jsxs("button",{onClick:me,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(ve,{name:"Image",size:16})," PNG"]}),l.jsxs("button",{onClick:Se,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(ve,{name:"Table",size:16}),"  (XLS)"]}),l.jsxs("button",{onClick:M,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(ve,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),l.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(ke=>l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[ke.name," ",l.jsxs("span",{className:"text-slate-400 text-xs",children:["(",ke.floor||"?",")"]})]}),l.jsx("button",{onClick:()=>Z(ke),className:"text-slate-400 hover:text-indigo-600",children:l.jsx(ve,{name:"Edit2",size:12})})]},ke.id)),l.jsxs("button",{onClick:()=>Z(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[l.jsx(ve,{name:"Plus",size:14})," "]})]}),l.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),Ur.map(ke=>l.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:ke},ke))]})}),l.jsx("tbody",{children:e.map(ke=>{var ce;return l.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[l.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[l.jsx("div",{children:ke.name}),l.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:ke.floor}),l.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(ce=ke.includedRooms)==null?void 0:ce.join(", ")})]}),Ur.map(R=>{const Ce=k(ke.id,R,d),Me=Ce?L(ke.id,R,d,Ce.id):!1;return l.jsx("td",{onClick:()=>T(ke.id,R),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${Ce?Me?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:Ce?l.jsxs("div",{className:`font-bold text-sm ${Me?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[Ce.name,Me&&l.jsx("div",{className:"text-[9px] uppercase",children:""})]}):l.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${ke.id}-${R}`)})]},ke.id)})})]})})]}),l.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[l.jsx(ve,{name:"Image",size:16}),"  "]}),l.jsx("div",{className:"overflow-auto custom-scrollbar",children:l.jsxs("div",{ref:v,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[l.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:A.approvalBlock},children:l.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[l.jsx("div",{className:"font-bold mb-1",children:""}),l.jsx("div",{children:" "}),l.jsx("div",{children:" "}),l.jsx("div",{children:"  22 . "}),l.jsxs("div",{className:"mt-8 flex items-end",children:[l.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:A.signatureLine}}),l.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),l.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:A.mainTitle},children:[l.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),l.jsx("h2",{className:"text-lg",children:"       22 . "}),l.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[Ze.First,Ze.Second].map((ke,ce)=>l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:ke}),l.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:A.tableHeaders},children:" "}),Ee.map(R=>l.jsx("th",{colSpan:R.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:A.tableHeaders},children:R.floor},R.floor))]}),l.jsx("tr",{children:Oe.map(R=>l.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:A.tableHeaders},children:R.name},R.id))})]}),l.jsx("tbody",{children:Ur.map(R=>l.jsxs("tr",{children:[l.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:R}),Oe.map(Ce=>{const Me=k(Ce.id,R,ke);return l.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:Me?Me.name:"-"},Ce.id)})]},R))})]})]},ke)),l.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:A.footerBlock},children:[l.jsx("div",{children:"    22 ."}),l.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:A.signatureLine}}),l.jsx("div",{children:".."})]})]})})]}),l.jsx(cs,{isOpen:y,onClose:()=>S(!1),title:" ",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[N&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(rt=e.find(ke=>ke.id===N.zoneId))==null?void 0:rt.name}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[l.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:N.day}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:d})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("p",{className:"text-[10px] text-slate-400 mb-2",children:"        "}),l.jsx(Df,{options:[{label:" (   )",options:de},{label:" (    )",options:Ae},{label:"  (  )",options:pe}],value:B,onChange:ke=>Q(String(ke)),placeholder:"   ",groupBy:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[l.jsx("button",{onClick:xe,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),l.jsx("button",{onClick:Y,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),l.jsx(cs,{isOpen:x,onClose:()=>I(!1),title:D.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:D.name||"",onChange:ke=>P({...D,name:ke.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:D.floor||"",onChange:ke=>P({...D,floor:ke.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:E,onChange:ke=>_(ke.target.value)}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[D.id&&l.jsx("button",{onClick:()=>{K(D.id),I(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:H,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},fZ=()=>{const{classes:t}=Pi(),{nutritionRecords:e,saveScheduleData:r}=CA(),{role:n,user:s}=_A(),{addToast:i}=w1(),a=n==="admin",o=n==="teacher",A=n==="canteen",[c,u]=G.useState(iA()),[d,p]=G.useState("day"),[g,v]=G.useState(()=>{const H=new Date;return`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}`}),[y,S]=G.useState(!1),[x,I]=G.useState(null),[N,U]=G.useState(""),[D,P]=G.useState(0),[E,_]=G.useState(0),B=G.useRef(null),Q=G.useMemo(()=>e.filter(H=>H.date===c),[e,c]),k=G.useMemo(()=>{const[H,K]=g.split("-").map(Number);return e.filter(Z=>{const ne=new Date(Z.date);return ne.getFullYear()===H&&ne.getMonth()+1===K})},[e,g]),L=G.useMemo(()=>{const H={totalStudents:0,totalBenefit:0,totalRegular:0,classCount:Q.length,records:Q};return Q.forEach(K=>{H.totalStudents+=K.totalCount,H.totalBenefit+=K.benefitCount,H.totalRegular+=K.regularCount}),H},[Q]),T=G.useMemo(()=>{const H=new Map;k.forEach(ne=>{const de=H.get(ne.date)||{total:0,benefit:0,regular:0,classCount:0};de.total+=ne.totalCount,de.benefit+=ne.benefitCount,de.regular+=ne.regularCount,de.classCount+=1,H.set(ne.date,de)});const K=Array.from(H.values()).reduce((ne,de)=>({total:ne.total+de.total,benefit:ne.benefit+de.benefit,regular:ne.regular+de.regular,classCount:Math.max(ne.classCount,de.classCount)}),{total:0,benefit:0,regular:0,classCount:0}),Z=H.size>0?{total:Math.round(K.total/H.size),benefit:Math.round(K.benefit/H.size),regular:Math.round(K.regular/H.size)}:{total:0,benefit:0,regular:0};return{total:K,avgPerDay:Z,daysCount:H.size,statsByDate:Array.from(H.entries()).sort((ne,de)=>ne[0].localeCompare(de[0]))}},[k]),Y=H=>{var K;return((K=t.find(Z=>Z.id===H))==null?void 0:K.name)||H},xe=H=>{const K=t.find(Z=>Z.id===H);return K&&typeof K.order=="number"?K.order:Number.MAX_SAFE_INTEGER},Be=(H,K)=>{K?(I(K),U(K.classId),P(K.totalCount),_(K.benefitCount)):(I(null),U(H||""),P(0),_(0)),S(!0)},_e=()=>{S(!1),I(null),U(""),P(0),_(0)},se=G.useCallback(async()=>{if(!N){i({type:"warning",title:" "});return}if(D<0||E<0){i({type:"warning",title:"    "});return}if(E>D){i({type:"warning",title:"      "});return}const H=D-E,K=new Date().toISOString();let Z;if(x)Z=e.map(ne=>ne.id===x.id?{...ne,classId:N,totalCount:D,benefitCount:E,regularCount:H,enteredBy:(s==null?void 0:s.uid)||ne.enteredBy,enteredAt:K}:ne);else{const ne=e.find(de=>de.date===c&&de.classId===N);if(ne)Z=e.map(de=>de.id===ne.id?{...de,totalCount:D,benefitCount:E,regularCount:H,enteredBy:(s==null?void 0:s.uid)||de.enteredBy,enteredAt:K}:de);else{const de={id:ai(),date:c,classId:N,totalCount:D,benefitCount:E,regularCount:H,enteredBy:s==null?void 0:s.uid,enteredAt:K};Z=[...e,de]}}await r({nutritionRecords:Z}),i({type:"success",title:" "}),_e()},[N,D,E,x,c,e,r,s,i]),me=G.useCallback(async H=>{const K=e.find(ne=>ne.id===H);if(!K)return;if(!a&&K.enteredBy!==(s==null?void 0:s.uid)){i({type:"warning",title:"     "});return}if(!window.confirm(" ?"))return;const Z=e.filter(ne=>ne.id!==H);await r({nutritionRecords:Z}),i({type:"success",title:" "})},[e,r,a,s,i]),Pe=()=>{if(!B.current)return;const H=window.open("","_blank");if(!H){i({type:"warning",title:"    "});return}const K=B.current.innerHTML;H.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${K}
            </body>
            </html>
        `),H.document.close(),H.focus(),setTimeout(()=>{H.print(),H.close()},250)},Se=G.useMemo(()=>a||s?t:[],[t,a,s]),M=G.useMemo(()=>{if(d!=="day")return[];const H=Q.map(K=>K.classId);return t.filter(K=>!H.includes(K.id)).sort((K,Z)=>{const ne=typeof K.order=="number"?K.order:Number.MAX_SAFE_INTEGER,de=typeof Z.order=="number"?Z.order:Number.MAX_SAFE_INTEGER;return ne!==de?ne-de:K.name.localeCompare(Z.name)})},[t,Q,d]);return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2",children:""}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a?"   ":A?"   ":"   "})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>p(d==="day"?"month":"day"),className:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-semibold",children:d==="day"?" ":" "}),(a||A)&&l.jsxs("button",{onClick:Pe,className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[l.jsx(ve,{name:"Download",size:18})," PDF"]})]})]}),l.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:d==="day"?l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),l.jsx("input",{type:"date",value:c,onChange:H=>u(H.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}):l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),l.jsx("input",{type:"month",value:g,onChange:H=>v(H.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})}),d==="day"&&M.length>0&&l.jsxs("div",{className:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-500 text-white p-2.5 rounded-xl",children:l.jsx(ve,{name:"AlertTriangle",size:20})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"    "}),l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[M.length," ",M.length===1?"":M.length<5?"":"","   "]})]})]}),o||a?l.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(H=>l.jsx("button",{onClick:()=>{u(iA()),Be(H.id)},className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-700 dark:text-slate-300 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:H.name},H.id))}):l.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(H=>l.jsx("span",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-500 dark:text-slate-400",children:H.name},H.id))})]}),d==="day"?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" "}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.totalStudents})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-indigo-600",children:L.totalBenefit})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-green-600",children:L.totalRegular})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.classCount})]})]}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:T.total.total}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",T.avgPerDay.total,"/"]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-indigo-600",children:T.total.benefit}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",T.avgPerDay.benefit,"/"]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("div",{className:"text-3xl font-black text-green-600",children:T.total.regular}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",T.avgPerDay.regular,"/"]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),l.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:T.daysCount})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:d==="day"?`  ${new Date(c).toLocaleDateString("ru-RU")}`:`  ${new Date(g+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}`}),(o||a)&&d==="day"&&l.jsxs("button",{onClick:()=>Be(),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[l.jsx(ve,{name:"Plus",size:18}),""]})]}),d==="day"?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a&&l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o&&l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:Q.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:a?5:4,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):Q.slice().sort((H,K)=>{const Z=xe(H.classId),ne=xe(K.classId);return Z!==ne?Z-ne:Y(H.classId).localeCompare(Y(K.classId))}).map(H=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:Y(H.classId)}),l.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:H.totalCount}),l.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:H.benefitCount}),l.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:H.regularCount}),!A&&l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(o||a)&&l.jsx("button",{onClick:()=>Be(void 0,H),className:"p-2 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 rounded-lg transition-colors",title:"",children:l.jsx(ve,{name:"Edit",size:18})}),l.jsx("button",{onClick:()=>me(H.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 rounded-lg transition-colors",title:"",children:l.jsx(ve,{name:"Trash2",size:18})})]})})]},H.id))})]})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:T.statsByDate.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):T.statsByDate.map(([H,K])=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:new Date(H).toLocaleDateString("ru-RU",{weekday:"short",day:"numeric",month:"short"})}),l.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:K.total}),l.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:K.benefit}),l.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:K.regular}),l.jsx("td",{className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:K.classCount})]},H))})]})})]}),l.jsx("div",{ref:B,className:"hidden print:block",children:l.jsxs("div",{className:"p-8",children:[l.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:"  "}),d==="day"?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]}),l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100",children:[l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),l.jsx("tbody",{children:Q.slice().sort((H,K)=>{const Z=xe(H.classId),ne=xe(K.classId);return Z!==ne?Z-ne:Y(H.classId).localeCompare(Y(K.classId))}).map(H=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:Y(H.classId)}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:H.totalCount}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:H.benefitCount}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:H.regularCount})]},H.id))}),l.jsx("tfoot",{className:"bg-slate-100 font-bold",children:l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalStudents}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalBenefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalRegular})]})})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(g+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100",children:[l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),l.jsx("tbody",{children:T.statsByDate.map(([H,K])=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:new Date(H).toLocaleDateString("ru-RU")}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.benefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.regular}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:K.classCount})]},H))}),l.jsxs("tfoot",{className:"bg-slate-100 font-bold",children:[l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.total.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.total.benefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.total.regular}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:"  "}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.avgPerDay.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.avgPerDay.benefit}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:T.avgPerDay.regular}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]})]})]})]})]})}),l.jsx(cs,{isOpen:y,onClose:_e,title:x?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:""}),l.jsx(Df,{options:Se.slice().sort((H,K)=>H.name.localeCompare(K.name)).map(H=>({value:H.id,label:H.name})),value:N||null,onChange:H=>U(String(H)),placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),l.jsx("input",{type:"number",inputMode:"numeric",min:"0",value:D,onChange:H=>{const K=parseInt(H.target.value)||0;P(K),K<E&&_(K)},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),l.jsx("input",{type:"number",inputMode:"numeric",min:"0",max:D,value:E,onChange:H=>{const K=parseInt(H.target.value)||0;_(Math.min(K,D))},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:" ()"}),l.jsx("div",{className:"text-2xl font-bold text-green-600",children:D-E})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{onClick:se,className:"flex-1 px-4 py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold",children:""}),l.jsx("button",{onClick:_e,className:"px-4 py-3 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-semibold",children:""})]})]})})]})},pZ=()=>{const{classes:t}=Pi(),{absenteeismRecords:e,saveScheduleData:r}=CA(),{role:n,user:s}=_A(),{addToast:i}=w1(),a=n==="admin",o=n==="teacher",[A,c]=G.useState(iA()),[u,d]=G.useState("day"),[p,g]=G.useState(()=>{const Ae=new Date;return`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,"0")}`}),[v,y]=G.useState(!1),[S,x]=G.useState(null),[I,N]=G.useState(""),[U,D]=G.useState([]),[P,E]=G.useState(""),[_,B]=G.useState("illness"),[Q,k]=G.useState(""),L=G.useRef(null),T=G.useMemo(()=>e.filter(Ae=>Ae.date===A),[e,A]),Y=G.useMemo(()=>{const[Ae,pe]=p.split("-").map(Number);return e.filter(Ee=>{const Oe=new Date(Ee.date);return Oe.getFullYear()===Ae&&Oe.getMonth()+1===pe})},[e,p]),xe=G.useMemo(()=>{const Ae=T.map(pe=>pe.classId);return t.filter(pe=>!Ae.includes(pe.id)).sort((pe,Ee)=>{const Oe=typeof pe.order=="number"?pe.order:999999,rt=typeof Ee.order=="number"?Ee.order:999999;return Oe!==rt?Oe-rt:pe.name.localeCompare(Ee.name,"ru",{numeric:!0})})},[t,T]),Be=G.useMemo(()=>T.sort((Ae,pe)=>{const Ee=t.find(ce=>ce.id===Ae.classId),Oe=t.find(ce=>ce.id===pe.classId),rt=typeof(Ee==null?void 0:Ee.order)=="number"?Ee.order:999999,ke=typeof(Oe==null?void 0:Oe.order)=="number"?Oe.order:999999;return rt!==ke?rt-ke:((Ee==null?void 0:Ee.name)||"").localeCompare((Oe==null?void 0:Oe.name)||"","ru",{numeric:!0})}),[T,t]),_e=Ae=>{var pe;return((pe=t.find(Ee=>Ee.id===Ae))==null?void 0:pe.name)||Ae},se=(Ae,pe)=>{switch(Ae){case"statement":return"";case"illness":return"";case"abroad":return"  ";case"disrespectful":return"";case"other":return pe||"";default:return Ae}},me=G.useMemo(()=>{const Ae={};return t.forEach(pe=>{Ae[pe.id]={total:0,reasons:{}}}),Y.forEach(pe=>{Ae[pe.classId]||(Ae[pe.classId]={total:0,reasons:{}}),pe.absences.forEach(Ee=>{Ae[pe.classId].total++;const Oe=Ee.reason==="other"?"":se(Ee.reason);Ae[pe.classId].reasons[Oe]=(Ae[pe.classId].reasons[Oe]||0)+1})}),Object.entries(Ae).map(([pe,Ee])=>({classId:pe,...Ee})).sort((pe,Ee)=>{const Oe=t.find(R=>R.id===pe.classId),rt=t.find(R=>R.id===Ee.classId),ke=typeof(Oe==null?void 0:Oe.order)=="number"?Oe.order:999999,ce=typeof(rt==null?void 0:rt.order)=="number"?rt.order:999999;return ke!==ce?ke-ce:((Oe==null?void 0:Oe.name)||"").localeCompare((rt==null?void 0:rt.name)||"","ru",{numeric:!0})})},[Y,t]),Pe=G.useMemo(()=>{const Ae={};return t.forEach(pe=>{Ae[pe.id]={total:0,reasons:{}}}),T.forEach(pe=>{Ae[pe.classId]||(Ae[pe.classId]={total:0,reasons:{}}),pe.absences.forEach(Ee=>{Ae[pe.classId].total++;const Oe=Ee.reason==="other"?"":se(Ee.reason);Ae[pe.classId].reasons[Oe]=(Ae[pe.classId].reasons[Oe]||0)+1})}),Object.entries(Ae).map(([pe,Ee])=>({classId:pe,...Ee})).sort((pe,Ee)=>{const Oe=t.find(R=>R.id===pe.classId),rt=t.find(R=>R.id===Ee.classId),ke=typeof(Oe==null?void 0:Oe.order)=="number"?Oe.order:999999,ce=typeof(rt==null?void 0:rt.order)=="number"?rt.order:999999;return ke!==ce?ke-ce:((Oe==null?void 0:Oe.name)||"").localeCompare((rt==null?void 0:rt.name)||"","ru",{numeric:!0})})},[T,t]),Se=(Ae,pe)=>{pe?(x(pe),N(pe.classId),D([...pe.absences])):(x(null),N(Ae||""),D([])),E(""),B("illness"),k(""),y(!0)},M=()=>{y(!1),x(null),N(""),D([])},H=()=>{if(!P.trim()){i({type:"warning",title:"  "});return}if(U.length>=25){i({type:"warning",title:" 25 "});return}if(_==="other"&&!Q.trim()){i({type:"warning",title:" "});return}D([...U,{studentName:P.trim(),reason:_,otherReason:_==="other"?Q.trim():void 0}]),E(""),B("illness"),k("")},K=Ae=>{const pe=[...U];pe.splice(Ae,1),D(pe)},Z=G.useCallback(async()=>{if(!I){i({type:"warning",title:" "});return}const Ae=new Date().toISOString();let pe;if(S)pe=e.map(Ee=>Ee.id===S.id?{...Ee,classId:I,absences:U,enteredBy:(s==null?void 0:s.uid)||Ee.enteredBy,enteredAt:Ae}:Ee);else{const Ee={id:ai(),date:A,classId:I,absences:U,enteredBy:s==null?void 0:s.uid,enteredAt:Ae};pe=[...e,Ee]}await r({absenteeismRecords:pe}),i({type:"success",title:" "}),M()},[I,U,S,e,r,A,s,i]),ne=async()=>{if(S&&window.confirm(' ,    ?     " ".')){const Ae=e.filter(pe=>pe.id!==S.id);await r({absenteeismRecords:Ae}),i({type:"success",title:" "}),M()}},de=()=>{if(!L.current)return;const Ae=window.open("","_blank");if(!Ae){i({type:"warning",title:"    "});return}const pe=L.current.innerHTML;Ae.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${pe}
            </body>
            </html>
        `),Ae.document.close(),Ae.focus(),setTimeout(()=>{Ae.print(),Ae.close()},250)};return!a&&!o?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[l.jsx(ve,{name:"Shield",size:48,className:"mb-4"}),l.jsx("p",{className:"text-lg font-medium",children:" "})]}):l.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-rose-100 dark:bg-rose-900/30 rounded-lg text-rose-600 dark:text-rose-400",children:l.jsx(ve,{name:"UserX",size:24})})," "]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"  "})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-dark-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>d("day"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${u==="day"?"bg-white dark:bg-dark-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:""}),l.jsx("button",{onClick:()=>d("month"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${u==="month"?"bg-white dark:bg-dark-600 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:""})]}),u==="day"?l.jsx("input",{type:"date",value:A,onChange:Ae=>c(Ae.target.value),className:"px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"}):l.jsx("input",{type:"month",value:p,onChange:Ae=>g(Ae.target.value),className:"px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),l.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl transition-colors shadow-lg shadow-indigo-200 dark:shadow-none",children:[l.jsx(ve,{name:"Printer",size:18}),l.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),u==="day"?l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[l.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(ve,{name:"AlertCircle",className:"text-amber-500",size:20}),"  (",xe.length,")"]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 gap-3",children:[xe.map(Ae=>l.jsxs("button",{onClick:()=>Se(Ae.id),className:"p-3 bg-white dark:bg-dark-800 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition-all text-left group",children:[l.jsx("div",{className:"font-bold text-lg text-slate-700 dark:text-slate-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400",children:Ae.name}),l.jsx("div",{className:"text-xs text-slate-400",children:"  "})]},Ae.id)),xe.length===0&&l.jsx("div",{className:"col-span-full p-6 text-center text-slate-400 bg-slate-50 dark:bg-dark-800/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:"   "})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[l.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(ve,{name:"CheckCircle",className:"text-green-500",size:20})," (",Be.length,")"]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-dark-700/30 flex justify-between items-center",children:l.jsxs("h3",{className:"font-medium text-slate-700 dark:text-slate-200",children:["   ",new Date(A).toLocaleDateString("ru-RU")]})}),l.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[Be.map(Ae=>l.jsx("div",{onClick:()=>Se(void 0,Ae),className:"p-4 hover:bg-slate-50 dark:hover:bg-dark-700/50 transition-colors cursor-pointer group",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xl border border-indigo-100 dark:border-indigo-900/50",children:_e(Ae.classId)}),l.jsx("div",{children:l.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:Ae.absences.length>0?`: ${Ae.absences.length} .`:" "})})]}),Ae.absences.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ae.absences.slice(0,3).map((pe,Ee)=>l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 border border-rose-100 dark:border-rose-900/30",children:pe.studentName},Ee)),Ae.absences.length>3&&l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:["+",Ae.absences.length-3," "]})]})]})},Ae.id)),Be.length===0&&l.jsx("div",{className:"p-8 text-center text-slate-400",children:"    "})]})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[l.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:["  ",new Date(p).toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),l.jsx("p",{className:"text-slate-500 mt-1",children:"    "})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 dark:bg-dark-700/50 text-left",children:[l.jsx("th",{className:"px-6 py-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:""}),l.jsx("th",{className:"px-6 py-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:" "}),l.jsx("th",{className:"px-6 py-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:" "})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[me.map(Ae=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-dark-700/50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 font-medium text-slate-800 dark:text-white",children:_e(Ae.classId)}),l.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ae.total>0?"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:Ae.total})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:Ae.total>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Ae.reasons).map(([pe,Ee])=>l.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 dark:bg-dark-700 px-2 py-1 rounded text-xs",children:[l.jsxs("span",{children:[pe,":"]}),l.jsx("span",{className:"font-semibold",children:Ee})]},pe))}):l.jsx("span",{className:"text-slate-400",children:""})})]},Ae.classId)),me.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-8 text-center text-slate-400",children:"    "})})]})]})})]}),l.jsx(cs,{isOpen:v,onClose:M,title:`: ${_e(I)}`,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:P,onChange:Ae=>E(Ae.target.value),placeholder:" ",className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),l.jsxs("select",{value:_,onChange:Ae=>B(Ae.target.value),className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[l.jsx("option",{value:"illness",children:""}),l.jsx("option",{value:"statement",children:""}),l.jsx("option",{value:"abroad",children:" "}),l.jsx("option",{value:"disrespectful",children:""}),l.jsx("option",{value:"other",children:""})]}),l.jsx("button",{onClick:H,className:"p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:l.jsx(ve,{name:"Plus",size:20})})]}),_==="other"&&l.jsx("input",{type:"text",value:Q,onChange:Ae=>k(Ae.target.value),placeholder:" ",className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-dark-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),l.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[l.jsxs("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["  (",U.length,")"]}),U.length===0?l.jsx("div",{className:"text-center py-4 text-slate-400 bg-slate-50 dark:bg-dark-800/50 rounded-lg",children:" "}):l.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:U.map((Ae,pe)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-dark-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:Ae.studentName}),l.jsx("div",{className:"text-xs text-slate-500",children:se(Ae.reason,Ae.otherReason)})]}),l.jsx("button",{onClick:()=>K(pe),className:"text-slate-400 hover:text-red-500 transition-colors",children:l.jsx(ve,{name:"Trash2",size:16})})]},pe))})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100 dark:border-slate-700",children:[S&&l.jsxs("button",{onClick:ne,className:"px-4 py-2 text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(ve,{name:"Trash2",size:18}),l.jsx("span",{className:"hidden sm:inline",children:""})]}),l.jsxs("div",{className:"flex gap-3 ml-auto",children:[l.jsx("button",{onClick:M,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-dark-700 rounded-lg transition-colors",children:""}),l.jsx("button",{onClick:Z,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})]})]})]})}),l.jsx("div",{ref:L,className:"hidden print:block",children:l.jsxs("div",{className:"p-8",children:[l.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:u==="day"?`    ${new Date(A).toLocaleDateString("ru-RU")}`:`    ${new Date(p).toLocaleString("ru-RU",{month:"long",year:"numeric"})}`}),l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100",children:[l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:"."}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:" ."}),l.jsx("th",{className:"border border-slate-300 px-4 py-2 text-center",children:""})]})}),l.jsx("tbody",{children:(u==="day"?Pe:me).map(Ae=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 px-4 py-2",children:_e(Ae.classId)}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center font-bold",children:Ae.total}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons["  "]||0}),l.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Ae.reasons.||0})]},Ae.classId))})]})]})})]})},gZ=()=>{const{setGuestRole:t,role:e,loading:r}=_A(),n=jp(),[s,i]=G.useState("select"),[a,o]=G.useState(""),[A,c]=G.useState(""),[u,d]=G.useState(""),[p,g]=G.useState(!1);G.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher"||e==="canteen")&&n("/dashboard")},[e,r,n]);const v=async S=>{if(S.preventDefault(),d(""),g(!0),!Ea){d("Firebase .  ."),g(!1);return}try{let x=a;s==="teacher"?x="teacher@gymnasium22.com":s==="canteen"&&(x="canteen@gymnasium22.com"),await zV(Ea,x,A)}catch(x){console.error("Firebase Auth Error:",x);const I=x==null?void 0:x.code;let N="   .";switch(I){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":N="   .";break;case"auth/invalid-email":N="  email.";break;case"auth/too-many-requests":N="  . .";break;default:N=" .  ."}d(N)}finally{g(!1)}},y=()=>{t(),n("/schedule")};return l.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),l.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),l.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10 bg-white/60 dark:bg-slate-800/60 border border-white/20 dark:border-slate-700 backdrop-blur-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:l.jsx(ve,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:y,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(ve,{name:"Users",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(ve,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>i("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(ve,{name:"BookOpen",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx(ve,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>i("canteen"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-xl text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:l.jsx(ve,{name:"Coffee",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx(ve,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-green-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>i("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(ve,{name:"Settings",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"    "})]}),l.jsx(ve,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:v,className:"space-y-5 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>{i("select"),d("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(ve,{name:"ArrowRight",className:"rotate-180",size:24})}),l.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":s==="canteen"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(ve,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"email",inputMode:"email",autoComplete:"email",value:a,onChange:S=>o(S.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(ve,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",inputMode:"text",autoComplete:"current-password",value:A,onChange:S=>c(S.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),u&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:u}),l.jsxs("button",{type:"submit",disabled:p||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[p||r?l.jsx(ve,{name:"Loader",className:"animate-spin",size:20}):l.jsx(ve,{name:"LogOut",className:"rotate-180",size:20}),p?"...":"  "]})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},sk=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},ik=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},po=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=_A();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(ve,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(Pm,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Pm,{to:"/login",replace:!0})},mZ=()=>{const{role:t,loading:e}=_A();return e?null:t==="guest"?l.jsx(Pm,{to:"/schedule",replace:!0}):l.jsx(Pm,{to:"/dashboard",replace:!0})},wZ=()=>{const[t,e]=G.useState(!1),[r,n]=G.useState(sk("theme")||"light"),[s,i]=G.useState(sk("new_year_mode")==="true"),{isLoading:a}=Pi(),{logout:o,role:A,user:c}=_A();if(G.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),G.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),ik("theme",r)},[r]),G.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),ik("new_year_mode",String(s))},[s]),a)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(ve,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const d=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher","canteen"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin"]},{to:"/nutrition",label:"",icon:"Coffee",roles:["admin","teacher","canteen"]},{to:"/absenteeism",label:"",icon:"UserX",roles:["admin","teacher"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(p=>p.roles.includes(A||""));return l.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&l.jsx("div",{className:"snow-overlay no-print"}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 lg:w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none overflow-hidden`,children:l.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&l.jsx("div",{className:"bg-garland"}),l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[l.jsx(ve,{name:"GraduationCap",size:24}),s&&l.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:d.map(p=>l.jsxs(vo,{to:p.to,onClick:()=>e(!1),className:({isActive:g})=>`
                                    group flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-semibold transition-all relative
                                    ${g?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-slate-700 dark:hover:text-slate-300"}
                                `,children:[l.jsx(ve,{name:p.icon,size:18,className:"flex-shrink-0"}),l.jsx("span",{className:"flex-1 truncate",children:p.label})]},p.to))}),l.jsx("div",{className:"hidden lg:block mb-2",children:l.jsx(BK,{})}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between px-2",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),l.jsx("button",{onClick:o,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(ve,{name:"LogOut",size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?l.jsx(ve,{name:"Moon",size:18}):l.jsx(ve,{name:"Sun",size:18})}),l.jsx("button",{onClick:()=>i(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:l.jsx(ve,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&l.jsx("div",{className:"ml-auto text-xl",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:l.jsx(xP,{})}),l.jsx(_K,{onMenuClick:()=>e(!0),role:A})]})]})},xZ=()=>{const[t,e]=G.useState(null),[r,n]=G.useState(!0),[s]=NN(),i=s.get("id");return G.useEffect(()=>{i?(n(!0),os.getPublicData(i).then(a=>{const o={...Ni,...a,settings:{...Ni.settings,...a==null?void 0:a.settings}};e(o),n(!1)}).catch(a=>{console.error("Failed to load public data:",a),e(null),n(!1)})):(n(!1),e(null))},[i]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(ve,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(AU,{initialData:t,children:l.jsx(uU,{children:l.jsx(dU,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(ve,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(wU,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(ve,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function vZ(){return l.jsx(xK,{children:l.jsx(mK,{children:l.jsx(AU,{children:l.jsx(uU,{children:l.jsx(dU,{children:l.jsx(NP,{children:l.jsxs(yP,{children:[l.jsx(ti,{path:"/login",element:l.jsx(gZ,{})}),l.jsxs(ti,{path:"/",element:l.jsx(po,{children:l.jsx(wZ,{})}),children:[l.jsx(ti,{index:!0,element:l.jsx(mZ,{})}),l.jsx(ti,{path:"dashboard",element:l.jsx(po,{allowedRoles:["admin","teacher","canteen"],children:l.jsx(EK,{})})}),l.jsx(ti,{path:"schedule",element:l.jsx(ak,{semester:1})}),l.jsx(ti,{path:"schedule2",element:l.jsx(ak,{semester:2})}),l.jsx(ti,{path:"substitutions",element:l.jsx(po,{allowedRoles:["admin"],children:l.jsx(WY,{})})}),l.jsx(ti,{path:"duty",element:l.jsx(po,{allowedRoles:["admin"],children:l.jsx(hZ,{})})}),l.jsx(ti,{path:"nutrition",element:l.jsx(po,{allowedRoles:["admin","teacher","canteen"],children:l.jsx(fZ,{})})}),l.jsx(ti,{path:"absenteeism",element:l.jsx(po,{allowedRoles:["admin","teacher"],children:l.jsx(pZ,{})})}),l.jsx(ti,{path:"directory",element:l.jsx(po,{allowedRoles:["admin"],children:l.jsx(qY,{})})}),l.jsx(ti,{path:"admin",element:l.jsx(po,{allowedRoles:["admin"],children:l.jsx(JY,{})})}),l.jsx(ti,{path:"reports",element:l.jsx(po,{allowedRoles:["admin"],children:l.jsx(dZ,{})})}),l.jsx(ti,{path:"export",element:l.jsx(po,{allowedRoles:["admin"],children:l.jsx(uZ,{})})})]}),l.jsx(ti,{path:"/public",element:l.jsx(xZ,{})})]})})})})})})})}const ak=({semester:t=1})=>{const{role:e}=_A();return l.jsx(wU,{readOnly:e!=="admin",semester:t})};Bv.createRoot(document.getElementById("root")).render(l.jsx(yo.StrictMode,{children:l.jsx(vZ,{})}));export{Wr as _,bZ as c,ok as g};
