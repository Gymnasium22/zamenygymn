function CS(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(n,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=r(s);fetch(s.href,A)}})();function KC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var GC={exports:{}},ff={},zC={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),_S=Symbol.for("react.portal"),IS=Symbol.for("react.fragment"),ES=Symbol.for("react.strict_mode"),TS=Symbol.for("react.profiler"),FS=Symbol.for("react.provider"),kS=Symbol.for("react.context"),SS=Symbol.for("react.forward_ref"),US=Symbol.for("react.suspense"),QS=Symbol.for("react.memo"),NS=Symbol.for("react.lazy"),Ux=Symbol.iterator;function RS(t){return t===null||typeof t!="object"?null:(t=Ux&&t[Ux]||t["@@iterator"],typeof t=="function"?t:null)}var $C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WC=Object.assign,qC={};function Ua(t,e,r){this.props=t,this.context=e,this.refs=qC,this.updater=r||$C}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XC(){}XC.prototype=Ua.prototype;function N0(t,e,r){this.props=t,this.context=e,this.refs=qC,this.updater=r||$C}var R0=N0.prototype=new XC;R0.constructor=N0;WC(R0,Ua.prototype);R0.isPureReactComponent=!0;var Qx=Array.isArray,JC=Object.prototype.hasOwnProperty,D0={current:null},YC={key:!0,ref:!0,__self:!0,__source:!0};function ZC(t,e,r){var n,s={},A=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)JC.call(e,n)&&!YC.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];s.children=o}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Wc,type:t,key:A,ref:i,props:s,_owner:D0.current}}function DS(t,e){return{$$typeof:Wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wc}function PS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Nx=/\/+/g;function Tg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PS(""+t.key):e.toString(36)}function Fd(t,e,r,n,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Wc:case _S:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Tg(i,0):n,Qx(s)?(r="",t!=null&&(r=t.replace(Nx,"$&/")+"/"),Fd(s,e,r,"",function(c){return c})):s!=null&&(P0(s)&&(s=DS(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Nx,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Qx(t))for(var a=0;a<t.length;a++){A=t[a];var o=n+Tg(A,a);i+=Fd(A,e,r,o,s)}else if(o=RS(t),typeof o=="function")for(t=o.call(t),a=0;!(A=t.next()).done;)A=A.value,o=n+Tg(A,a++),i+=Fd(A,e,r,o,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Qu(t,e,r){if(t==null)return t;var n=[],s=0;return Fd(t,n,"","",function(A){return e.call(r,A,s++)}),n}function LS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},kd={transition:null},jS={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:kd,ReactCurrentOwner:D0};function e_(){throw Error("act(...) is not supported in production builds of React.")}ht.Children={map:Qu,forEach:function(t,e,r){Qu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Qu(t,function(){e++}),e},toArray:function(t){return Qu(t,function(e){return e})||[]},only:function(t){if(!P0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ht.Component=Ua;ht.Fragment=IS;ht.Profiler=TS;ht.PureComponent=N0;ht.StrictMode=ES;ht.Suspense=US;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jS;ht.act=e_;ht.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=WC({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=D0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)JC.call(e,o)&&!YC.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Wc,type:t.type,key:s,ref:A,props:n,_owner:i}};ht.createContext=function(t){return t={$$typeof:kS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FS,_context:t},t.Consumer=t};ht.createElement=ZC;ht.createFactory=function(t){var e=ZC.bind(null,t);return e.type=t,e};ht.createRef=function(){return{current:null}};ht.forwardRef=function(t){return{$$typeof:SS,render:t}};ht.isValidElement=P0;ht.lazy=function(t){return{$$typeof:NS,_payload:{_status:-1,_result:t},_init:LS}};ht.memo=function(t,e){return{$$typeof:QS,type:t,compare:e===void 0?null:e}};ht.startTransition=function(t){var e=kd.transition;kd.transition={};try{t()}finally{kd.transition=e}};ht.unstable_act=e_;ht.useCallback=function(t,e){return rn.current.useCallback(t,e)};ht.useContext=function(t){return rn.current.useContext(t)};ht.useDebugValue=function(){};ht.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ht.useEffect=function(t,e){return rn.current.useEffect(t,e)};ht.useId=function(){return rn.current.useId()};ht.useImperativeHandle=function(t,e,r){return rn.current.useImperativeHandle(t,e,r)};ht.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ht.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ht.useMemo=function(t,e){return rn.current.useMemo(t,e)};ht.useReducer=function(t,e,r){return rn.current.useReducer(t,e,r)};ht.useRef=function(t){return rn.current.useRef(t)};ht.useState=function(t){return rn.current.useState(t)};ht.useSyncExternalStore=function(t,e,r){return rn.current.useSyncExternalStore(t,e,r)};ht.useTransition=function(){return rn.current.useTransition()};ht.version="18.3.1";zC.exports=ht;var k=zC.exports;const bs=KC(k),MS=CS({__proto__:null,default:bs},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS=k,HS=Symbol.for("react.element"),VS=Symbol.for("react.fragment"),KS=Object.prototype.hasOwnProperty,GS=OS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zS={key:!0,ref:!0,__self:!0,__source:!0};function t_(t,e,r){var n,s={},A=null,i=null;r!==void 0&&(A=""+r),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)KS.call(e,n)&&!zS.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:HS,type:t,key:A,ref:i,props:s,_owner:GS.current}}ff.Fragment=VS;ff.jsx=t_;ff.jsxs=t_;GC.exports=ff;var l=GC.exports,Pp={},r_={exports:{}},En={},n_={exports:{}},s_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ce,Ee){var Ne=ce.length;ce.push(Ee);e:for(;0<Ne;){var Je=Ne-1>>>1,Xe=ce[Je];if(0<s(Xe,Ee))ce[Je]=Ee,ce[Ne]=Xe,Ne=Je;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var Ee=ce[0],Ne=ce.pop();if(Ne!==Ee){ce[0]=Ne;e:for(var Je=0,Xe=ce.length,Ye=Xe>>>1;Je<Ye;){var wt=2*(Je+1)-1,te=ce[wt],Ke=wt+1,Ge=ce[Ke];if(0>s(te,Ne))Ke<Xe&&0>s(Ge,te)?(ce[Je]=Ge,ce[Ke]=Ne,Je=Ke):(ce[Je]=te,ce[wt]=Ne,Je=wt);else if(Ke<Xe&&0>s(Ge,Ne))ce[Je]=Ge,ce[Ke]=Ne,Je=Ke;else break e}}return Ee}function s(ce,Ee){var Ne=ce.sortIndex-Ee.sortIndex;return Ne!==0?Ne:ce.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var o=[],c=[],d=1,h=null,f=3,m=!1,v=!1,y=!1,I=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ce){for(var Ee=r(c);Ee!==null;){if(Ee.callback===null)n(c);else if(Ee.startTime<=ce)n(c),Ee.sortIndex=Ee.expirationTime,e(o,Ee);else break;Ee=r(c)}}function F(ce){if(y=!1,C(ce),!v)if(r(o)!==null)v=!0,at(U);else{var Ee=r(c);Ee!==null&&Le(F,Ee.startTime-ce)}}function U(ce,Ee){v=!1,y&&(y=!1,b(B),B=-1),m=!0;var Ne=f;try{for(C(Ee),h=r(o);h!==null&&(!(h.expirationTime>Ee)||ce&&!R());){var Je=h.callback;if(typeof Je=="function"){h.callback=null,f=h.priorityLevel;var Xe=Je(h.expirationTime<=Ee);Ee=t.unstable_now(),typeof Xe=="function"?h.callback=Xe:h===r(o)&&n(o),C(Ee)}else n(o);h=r(o)}if(h!==null)var Ye=!0;else{var wt=r(c);wt!==null&&Le(F,wt.startTime-Ee),Ye=!1}return Ye}finally{h=null,f=Ne,m=!1}}var N=!1,x=null,B=-1,_=5,S=-1;function R(){return!(t.unstable_now()-S<_)}function P(){if(x!==null){var ce=t.unstable_now();S=ce;var Ee=!0;try{Ee=x(!0,ce)}finally{Ee?E():(N=!1,x=null)}}else N=!1}var E;if(typeof w=="function")E=function(){w(P)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,qe=We.port2;We.port1.onmessage=P,E=function(){qe.postMessage(null)}}else E=function(){I(P,0)};function at(ce){x=ce,N||(N=!0,E())}function Le(ce,Ee){B=I(function(){ce(t.unstable_now())},Ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,at(U))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(ce){switch(f){case 1:case 2:case 3:var Ee=3;break;default:Ee=f}var Ne=f;f=Ee;try{return ce()}finally{f=Ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,Ee){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Ne=f;f=ce;try{return Ee()}finally{f=Ne}},t.unstable_scheduleCallback=function(ce,Ee,Ne){var Je=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Je+Ne:Je):Ne=Je,ce){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Ne+Xe,ce={id:d++,callback:Ee,priorityLevel:ce,startTime:Ne,expirationTime:Xe,sortIndex:-1},Ne>Je?(ce.sortIndex=Ne,e(c,ce),r(o)===null&&ce===r(c)&&(y?(b(B),B=-1):y=!0,Le(F,Ne-Je))):(ce.sortIndex=Xe,e(o,ce),v||m||(v=!0,at(U))),ce},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(ce){var Ee=f;return function(){var Ne=f;f=Ee;try{return ce.apply(this,arguments)}finally{f=Ne}}}})(s_);n_.exports=s_;var $S=n_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WS=k,Cn=$S;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A_=new Set,dc={};function no(t,e){ia(t,e),ia(t+"Capture",e)}function ia(t,e){for(dc[t]=e,t=0;t<e.length;t++)A_.add(e[t])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lp=Object.prototype.hasOwnProperty,qS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rx={},Dx={};function XS(t){return Lp.call(Dx,t)?!0:Lp.call(Rx,t)?!1:qS.test(t)?Dx[t]=!0:(Rx[t]=!0,!1)}function JS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YS(t,e,r,n){if(e===null||typeof e>"u"||JS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,r,n,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lr[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lr[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lr[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lr[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lr[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lr[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lr[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lr[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lr[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var L0=/[\-:]([a-z])/g;function j0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(L0,j0);Lr[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(L0,j0);Lr[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(L0,j0);Lr[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lr[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lr[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function M0(t,e,r,n){var s=Lr.hasOwnProperty(e)?Lr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YS(e,r,s,n)&&(r=null),n||s===null?XS(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Hs=WS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nu=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),O0=Symbol.for("react.strict_mode"),jp=Symbol.for("react.profiler"),i_=Symbol.for("react.provider"),o_=Symbol.for("react.context"),H0=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Op=Symbol.for("react.suspense_list"),V0=Symbol.for("react.memo"),aA=Symbol.for("react.lazy"),a_=Symbol.for("react.offscreen"),Px=Symbol.iterator;function ol(t){return t===null||typeof t!="object"?null:(t=Px&&t[Px]||t["@@iterator"],typeof t=="function"?t:null)}var nr=Object.assign,Fg;function El(t){if(Fg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Fg=e&&e[1]||""}return`
`+Fg+t}var kg=!1;function Sg(t,e){if(!t||kg)return"";kg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=n.stack.split(`
`),i=s.length-1,a=A.length-1;1<=i&&0<=a&&s[i]!==A[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==A[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==A[a]){var o=`
`+s[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=a);break}}}finally{kg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?El(t):""}function ZS(t){switch(t.tag){case 5:return El(t.type);case 16:return El("Lazy");case 13:return El("Suspense");case 19:return El("SuspenseList");case 0:case 2:case 15:return t=Sg(t.type,!1),t;case 11:return t=Sg(t.type.render,!1),t;case 1:return t=Sg(t.type,!0),t;default:return""}}function Hp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Qo:return"Portal";case jp:return"Profiler";case O0:return"StrictMode";case Mp:return"Suspense";case Op:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o_:return(t.displayName||"Context")+".Consumer";case i_:return(t._context.displayName||"Context")+".Provider";case H0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V0:return e=t.displayName||null,e!==null?e:Hp(t.type)||"Memo";case aA:e=t._payload,t=t._init;try{return Hp(t(e))}catch{}}return null}function eU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hp(e);case 8:return e===O0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function KA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tU(t){var e=l_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,A=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ru(t){t._valueTracker||(t._valueTracker=tU(t))}function c_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=l_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vp(t,e){var r=e.checked;return nr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Lx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=KA(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function u_(t,e){e=e.checked,e!=null&&M0(t,"checked",e,!1)}function Kp(t,e){u_(t,e);var r=KA(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Gp(t,e.type,KA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Gp(t,e,r){(e!=="number"||ih(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Tl=Array.isArray;function Wo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+KA(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return nr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ge(92));if(Tl(r)){if(1<r.length)throw Error(ge(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:KA(r)}}function d_(t,e){var r=KA(e.value),n=KA(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ox(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function h_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $p(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?h_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Du,f_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Du=Du||document.createElement("div"),Du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rU=["Webkit","ms","Moz","O"];Object.keys(Gl).forEach(function(t){rU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gl[e]=Gl[t]})});function g_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Gl.hasOwnProperty(t)&&Gl[t]?(""+e).trim():e+"px"}function p_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=g_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var nU=nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wp(t,e){if(e){if(nU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function qp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=null;function K0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jp=null,qo=null,Xo=null;function Hx(t){if(t=Jc(t)){if(typeof Jp!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=yf(e),Jp(t.stateNode,t.type,e))}}function m_(t){qo?Xo?Xo.push(t):Xo=[t]:qo=t}function w_(){if(qo){var t=qo,e=Xo;if(Xo=qo=null,Hx(t),e)for(t=0;t<e.length;t++)Hx(e[t])}}function y_(t,e){return t(e)}function x_(){}var Ug=!1;function v_(t,e,r){if(Ug)return t(e,r);Ug=!0;try{return y_(t,e,r)}finally{Ug=!1,(qo!==null||Xo!==null)&&(x_(),w_())}}function fc(t,e){var r=t.stateNode;if(r===null)return null;var n=yf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ge(231,e,typeof r));return r}var Yp=!1;if(Qs)try{var al={};Object.defineProperty(al,"passive",{get:function(){Yp=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Yp=!1}function sU(t,e,r,n,s,A,i,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var zl=!1,oh=null,ah=!1,Zp=null,AU={onError:function(t){zl=!0,oh=t}};function iU(t,e,r,n,s,A,i,a,o){zl=!1,oh=null,sU.apply(AU,arguments)}function oU(t,e,r,n,s,A,i,a,o){if(iU.apply(this,arguments),zl){if(zl){var c=oh;zl=!1,oh=null}else throw Error(ge(198));ah||(ah=!0,Zp=c)}}function so(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function B_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vx(t){if(so(t)!==t)throw Error(ge(188))}function aU(t){var e=t.alternate;if(!e){if(e=so(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var A=s.alternate;if(A===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===r)return Vx(s),t;if(A===n)return Vx(s),e;A=A.sibling}throw Error(ge(188))}if(r.return!==n.return)r=s,n=A;else{for(var i=!1,a=s.child;a;){if(a===r){i=!0,r=s,n=A;break}if(a===n){i=!0,n=s,r=A;break}a=a.sibling}if(!i){for(a=A.child;a;){if(a===r){i=!0,r=A,n=s;break}if(a===n){i=!0,n=A,r=s;break}a=a.sibling}if(!i)throw Error(ge(189))}}if(r.alternate!==n)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?t:e}function b_(t){return t=aU(t),t!==null?C_(t):null}function C_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C_(t);if(e!==null)return e;t=t.sibling}return null}var __=Cn.unstable_scheduleCallback,Kx=Cn.unstable_cancelCallback,lU=Cn.unstable_shouldYield,cU=Cn.unstable_requestPaint,cr=Cn.unstable_now,uU=Cn.unstable_getCurrentPriorityLevel,G0=Cn.unstable_ImmediatePriority,I_=Cn.unstable_UserBlockingPriority,lh=Cn.unstable_NormalPriority,dU=Cn.unstable_LowPriority,E_=Cn.unstable_IdlePriority,gf=null,os=null;function hU(t){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:pU,fU=Math.log,gU=Math.LN2;function pU(t){return t>>>=0,t===0?32:31-(fU(t)/gU|0)|0}var Pu=64,Lu=4194304;function Fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ch(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,A=t.pingedLanes,i=r&268435455;if(i!==0){var a=i&~s;a!==0?n=Fl(a):(A&=i,A!==0&&(n=Fl(A)))}else i=r&~s,i!==0?n=Fl(i):A!==0&&(n=Fl(A));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-$n(e),s=1<<r,n|=t[r],e&=~s;return n}function mU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wU(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-$n(A),a=1<<i,o=s[i];o===-1?(!(a&r)||a&n)&&(s[i]=mU(a,e)):o<=e&&(t.expiredLanes|=a),A&=~a}}function em(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T_(){var t=Pu;return Pu<<=1,!(Pu&4194240)&&(Pu=64),t}function Qg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function qc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=r}function yU(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-$n(r),A=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~A}}function z0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-$n(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var kt=0;function F_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k_,$0,S_,U_,Q_,tm=!1,ju=[],FA=null,kA=null,SA=null,gc=new Map,pc=new Map,uA=[],xU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gx(t,e){switch(t){case"focusin":case"focusout":FA=null;break;case"dragenter":case"dragleave":kA=null;break;case"mouseover":case"mouseout":SA=null;break;case"pointerover":case"pointerout":gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(e.pointerId)}}function ll(t,e,r,n,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:A,targetContainers:[s]},e!==null&&(e=Jc(e),e!==null&&$0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vU(t,e,r,n,s){switch(e){case"focusin":return FA=ll(FA,t,e,r,n,s),!0;case"dragenter":return kA=ll(kA,t,e,r,n,s),!0;case"mouseover":return SA=ll(SA,t,e,r,n,s),!0;case"pointerover":var A=s.pointerId;return gc.set(A,ll(gc.get(A)||null,t,e,r,n,s)),!0;case"gotpointercapture":return A=s.pointerId,pc.set(A,ll(pc.get(A)||null,t,e,r,n,s)),!0}return!1}function N_(t){var e=ki(t.target);if(e!==null){var r=so(e);if(r!==null){if(e=r.tag,e===13){if(e=B_(r),e!==null){t.blockedOn=e,Q_(t.priority,function(){S_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=rm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Xp=n,r.target.dispatchEvent(n),Xp=null}else return e=Jc(r),e!==null&&$0(e),t.blockedOn=r,!1;e.shift()}return!0}function zx(t,e,r){Sd(t)&&r.delete(e)}function BU(){tm=!1,FA!==null&&Sd(FA)&&(FA=null),kA!==null&&Sd(kA)&&(kA=null),SA!==null&&Sd(SA)&&(SA=null),gc.forEach(zx),pc.forEach(zx)}function cl(t,e){t.blockedOn===e&&(t.blockedOn=null,tm||(tm=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,BU)))}function mc(t){function e(s){return cl(s,t)}if(0<ju.length){cl(ju[0],t);for(var r=1;r<ju.length;r++){var n=ju[r];n.blockedOn===t&&(n.blockedOn=null)}}for(FA!==null&&cl(FA,t),kA!==null&&cl(kA,t),SA!==null&&cl(SA,t),gc.forEach(e),pc.forEach(e),r=0;r<uA.length;r++)n=uA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<uA.length&&(r=uA[0],r.blockedOn===null);)N_(r),r.blockedOn===null&&uA.shift()}var Jo=Hs.ReactCurrentBatchConfig,uh=!0;function bU(t,e,r,n){var s=kt,A=Jo.transition;Jo.transition=null;try{kt=1,W0(t,e,r,n)}finally{kt=s,Jo.transition=A}}function CU(t,e,r,n){var s=kt,A=Jo.transition;Jo.transition=null;try{kt=4,W0(t,e,r,n)}finally{kt=s,Jo.transition=A}}function W0(t,e,r,n){if(uh){var s=rm(t,e,r,n);if(s===null)Vg(t,e,n,dh,r),Gx(t,n);else if(vU(s,t,e,r,n))n.stopPropagation();else if(Gx(t,n),e&4&&-1<xU.indexOf(t)){for(;s!==null;){var A=Jc(s);if(A!==null&&k_(A),A=rm(t,e,r,n),A===null&&Vg(t,e,n,dh,r),A===s)break;s=A}s!==null&&n.stopPropagation()}else Vg(t,e,n,null,r)}}var dh=null;function rm(t,e,r,n){if(dh=null,t=K0(n),t=ki(t),t!==null)if(e=so(t),e===null)t=null;else if(r=e.tag,r===13){if(t=B_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dh=t,null}function R_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uU()){case G0:return 1;case I_:return 4;case lh:case dU:return 16;case E_:return 536870912;default:return 16}default:return 16}}var xA=null,q0=null,Ud=null;function D_(){if(Ud)return Ud;var t,e=q0,r=e.length,n,s="value"in xA?xA.value:xA.textContent,A=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[A-n];n++);return Ud=s.slice(t,1<n?1-n:void 0)}function Qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mu(){return!0}function $x(){return!1}function Tn(t){function e(r,n,s,A,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(A):A[a]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Mu:$x,this.isPropagationStopped=$x,this}return nr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X0=Tn(Qa),Xc=nr({},Qa,{view:0,detail:0}),_U=Tn(Xc),Ng,Rg,ul,pf=nr({},Xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:J0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(Ng=t.screenX-ul.screenX,Rg=t.screenY-ul.screenY):Rg=Ng=0,ul=t),Ng)},movementY:function(t){return"movementY"in t?t.movementY:Rg}}),Wx=Tn(pf),IU=nr({},pf,{dataTransfer:0}),EU=Tn(IU),TU=nr({},Xc,{relatedTarget:0}),Dg=Tn(TU),FU=nr({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),kU=Tn(FU),SU=nr({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UU=Tn(SU),QU=nr({},Qa,{data:0}),qx=Tn(QU),NU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DU[t])?!!e[t]:!1}function J0(){return PU}var LU=nr({},Xc,{key:function(t){if(t.key){var e=NU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:J0,charCode:function(t){return t.type==="keypress"?Qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jU=Tn(LU),MU=nr({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=Tn(MU),OU=nr({},Xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:J0}),HU=Tn(OU),VU=nr({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),KU=Tn(VU),GU=nr({},pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zU=Tn(GU),$U=[9,13,27,32],Y0=Qs&&"CompositionEvent"in window,$l=null;Qs&&"documentMode"in document&&($l=document.documentMode);var WU=Qs&&"TextEvent"in window&&!$l,P_=Qs&&(!Y0||$l&&8<$l&&11>=$l),Jx=" ",Yx=!1;function L_(t,e){switch(t){case"keyup":return $U.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ro=!1;function qU(t,e){switch(t){case"compositionend":return j_(e);case"keypress":return e.which!==32?null:(Yx=!0,Jx);case"textInput":return t=e.data,t===Jx&&Yx?null:t;default:return null}}function XU(t,e){if(Ro)return t==="compositionend"||!Y0&&L_(t,e)?(t=D_(),Ud=q0=xA=null,Ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P_&&e.locale!=="ko"?null:e.data;default:return null}}var JU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JU[t.type]:e==="textarea"}function M_(t,e,r,n){m_(n),e=hh(e,"onChange"),0<e.length&&(r=new X0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Wl=null,wc=null;function YU(t){J_(t,0)}function mf(t){var e=Lo(t);if(c_(e))return t}function ZU(t,e){if(t==="change")return e}var O_=!1;if(Qs){var Pg;if(Qs){var Lg="oninput"in document;if(!Lg){var ev=document.createElement("div");ev.setAttribute("oninput","return;"),Lg=typeof ev.oninput=="function"}Pg=Lg}else Pg=!1;O_=Pg&&(!document.documentMode||9<document.documentMode)}function tv(){Wl&&(Wl.detachEvent("onpropertychange",H_),wc=Wl=null)}function H_(t){if(t.propertyName==="value"&&mf(wc)){var e=[];M_(e,wc,t,K0(t)),v_(YU,e)}}function eQ(t,e,r){t==="focusin"?(tv(),Wl=e,wc=r,Wl.attachEvent("onpropertychange",H_)):t==="focusout"&&tv()}function tQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mf(wc)}function rQ(t,e){if(t==="click")return mf(e)}function nQ(t,e){if(t==="input"||t==="change")return mf(e)}function sQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:sQ;function yc(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Lp.call(e,s)||!Xn(t[s],e[s]))return!1}return!0}function rv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nv(t,e){var r=rv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rv(r)}}function V_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K_(){for(var t=window,e=ih();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ih(t.document)}return e}function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AQ(t){var e=K_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&V_(r.ownerDocument.documentElement,r)){if(n!==null&&Z0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,A=Math.min(n.start,s);n=n.end===void 0?A:Math.min(n.end,s),!t.extend&&A>n&&(s=n,n=A,A=s),s=nv(r,A);var i=nv(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iQ=Qs&&"documentMode"in document&&11>=document.documentMode,Do=null,nm=null,ql=null,sm=!1;function sv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sm||Do==null||Do!==ih(n)||(n=Do,"selectionStart"in n&&Z0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ql&&yc(ql,n)||(ql=n,n=hh(nm,"onSelect"),0<n.length&&(e=new X0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Do)))}function Ou(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Po={animationend:Ou("Animation","AnimationEnd"),animationiteration:Ou("Animation","AnimationIteration"),animationstart:Ou("Animation","AnimationStart"),transitionend:Ou("Transition","TransitionEnd")},jg={},G_={};Qs&&(G_=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function wf(t){if(jg[t])return jg[t];if(!Po[t])return t;var e=Po[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in G_)return jg[t]=e[r];return t}var z_=wf("animationend"),$_=wf("animationiteration"),W_=wf("animationstart"),q_=wf("transitionend"),X_=new Map,Av="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){X_.set(t,e),no(e,[t])}for(var Mg=0;Mg<Av.length;Mg++){var Og=Av[Mg],oQ=Og.toLowerCase(),aQ=Og[0].toUpperCase()+Og.slice(1);ni(oQ,"on"+aQ)}ni(z_,"onAnimationEnd");ni($_,"onAnimationIteration");ni(W_,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(q_,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(kl));function iv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,oU(n,e,void 0,t),t.currentTarget=null}function J_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var A=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==A&&s.isPropagationStopped())break e;iv(s,a,c),A=o}else for(i=0;i<n.length;i++){if(a=n[i],o=a.instance,c=a.currentTarget,a=a.listener,o!==A&&s.isPropagationStopped())break e;iv(s,a,c),A=o}}}if(ah)throw t=Zp,ah=!1,Zp=null,t}function Ht(t,e){var r=e[lm];r===void 0&&(r=e[lm]=new Set);var n=t+"__bubble";r.has(n)||(Y_(e,t,2,!1),r.add(n))}function Hg(t,e,r){var n=0;e&&(n|=4),Y_(r,t,n,e)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function xc(t){if(!t[Hu]){t[Hu]=!0,A_.forEach(function(r){r!=="selectionchange"&&(lQ.has(r)||Hg(r,!1,t),Hg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hu]||(e[Hu]=!0,Hg("selectionchange",!1,e))}}function Y_(t,e,r,n){switch(R_(e)){case 1:var s=bU;break;case 4:s=CU;break;default:s=W0}r=s.bind(null,e,r,t),s=void 0,!Yp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Vg(t,e,r,n,s){var A=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;i=i.return}for(;a!==null;){if(i=ki(a),i===null)return;if(o=i.tag,o===5||o===6){n=A=i;continue e}a=a.parentNode}}n=n.return}v_(function(){var c=A,d=K0(r),h=[];e:{var f=X_.get(t);if(f!==void 0){var m=X0,v=t;switch(t){case"keypress":if(Qd(r)===0)break e;case"keydown":case"keyup":m=jU;break;case"focusin":v="focus",m=Dg;break;case"focusout":v="blur",m=Dg;break;case"beforeblur":case"afterblur":m=Dg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=EU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=HU;break;case z_:case $_:case W_:m=kU;break;case q_:m=KU;break;case"scroll":m=_U;break;case"wheel":m=zU;break;case"copy":case"cut":case"paste":m=UU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Xx}var y=(e&4)!==0,I=!y&&t==="scroll",b=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,C;w!==null;){C=w;var F=C.stateNode;if(C.tag===5&&F!==null&&(C=F,b!==null&&(F=fc(w,b),F!=null&&y.push(vc(w,F,C)))),I)break;w=w.return}0<y.length&&(f=new m(f,v,null,r,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==Xp&&(v=r.relatedTarget||r.fromElement)&&(ki(v)||v[Ns]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=c,v=v?ki(v):null,v!==null&&(I=so(v),v!==I||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=Wx,F="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=Xx,F="onPointerLeave",b="onPointerEnter",w="pointer"),I=m==null?f:Lo(m),C=v==null?f:Lo(v),f=new y(F,w+"leave",m,r,d),f.target=I,f.relatedTarget=C,F=null,ki(d)===c&&(y=new y(b,w+"enter",v,r,d),y.target=C,y.relatedTarget=I,F=y),I=F,m&&v)t:{for(y=m,b=v,w=0,C=y;C;C=po(C))w++;for(C=0,F=b;F;F=po(F))C++;for(;0<w-C;)y=po(y),w--;for(;0<C-w;)b=po(b),C--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=po(y),b=po(b)}y=null}else y=null;m!==null&&ov(h,f,m,y,!1),v!==null&&I!==null&&ov(h,I,v,y,!0)}}e:{if(f=c?Lo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var U=ZU;else if(Zx(f))if(O_)U=nQ;else{U=tQ;var N=eQ}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=rQ);if(U&&(U=U(t,c))){M_(h,U,r,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Gp(f,"number",f.value)}switch(N=c?Lo(c):window,t){case"focusin":(Zx(N)||N.contentEditable==="true")&&(Do=N,nm=c,ql=null);break;case"focusout":ql=nm=Do=null;break;case"mousedown":sm=!0;break;case"contextmenu":case"mouseup":case"dragend":sm=!1,sv(h,r,d);break;case"selectionchange":if(iQ)break;case"keydown":case"keyup":sv(h,r,d)}var x;if(Y0)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Ro?L_(t,r)&&(B="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(P_&&r.locale!=="ko"&&(Ro||B!=="onCompositionStart"?B==="onCompositionEnd"&&Ro&&(x=D_()):(xA=d,q0="value"in xA?xA.value:xA.textContent,Ro=!0)),N=hh(c,B),0<N.length&&(B=new qx(B,t,null,r,d),h.push({event:B,listeners:N}),x?B.data=x:(x=j_(r),x!==null&&(B.data=x)))),(x=WU?qU(t,r):XU(t,r))&&(c=hh(c,"onBeforeInput"),0<c.length&&(d=new qx("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=x))}J_(h,e)})}function vc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function hh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=fc(t,r),A!=null&&n.unshift(vc(t,A,s)),A=fc(t,e),A!=null&&n.push(vc(t,A,s))),t=t.return}return n}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ov(t,e,r,n,s){for(var A=e._reactName,i=[];r!==null&&r!==n;){var a=r,o=a.alternate,c=a.stateNode;if(o!==null&&o===n)break;a.tag===5&&c!==null&&(a=c,s?(o=fc(r,A),o!=null&&i.unshift(vc(r,o,a))):s||(o=fc(r,A),o!=null&&i.push(vc(r,o,a)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var cQ=/\r\n?/g,uQ=/\u0000|\uFFFD/g;function av(t){return(typeof t=="string"?t:""+t).replace(cQ,`
`).replace(uQ,"")}function Vu(t,e,r){if(e=av(e),av(t)!==e&&r)throw Error(ge(425))}function fh(){}var Am=null,im=null;function om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var am=typeof setTimeout=="function"?setTimeout:void 0,dQ=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,hQ=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(t){return lv.resolve(null).then(t).catch(fQ)}:am;function fQ(t){setTimeout(function(){throw t})}function Kg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),mc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);mc(e)}function UA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Na=Math.random().toString(36).slice(2),ss="__reactFiber$"+Na,Bc="__reactProps$"+Na,Ns="__reactContainer$"+Na,lm="__reactEvents$"+Na,gQ="__reactListeners$"+Na,pQ="__reactHandles$"+Na;function ki(t){var e=t[ss];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ns]||r[ss]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=cv(t);t!==null;){if(r=t[ss])return r;t=cv(t)}return e}t=r,r=t.parentNode}return null}function Jc(t){return t=t[ss]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function yf(t){return t[Bc]||null}var cm=[],jo=-1;function si(t){return{current:t}}function Gt(t){0>jo||(t.current=cm[jo],cm[jo]=null,jo--)}function jt(t,e){jo++,cm[jo]=t.current,t.current=e}var GA={},Jr=si(GA),fn=si(!1),Mi=GA;function oa(t,e){var r=t.type.contextTypes;if(!r)return GA;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in r)s[A]=e[A];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gn(t){return t=t.childContextTypes,t!=null}function gh(){Gt(fn),Gt(Jr)}function uv(t,e,r){if(Jr.current!==GA)throw Error(ge(168));jt(Jr,e),jt(fn,r)}function Z_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ge(108,eU(t)||"Unknown",s));return nr({},r,n)}function ph(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||GA,Mi=Jr.current,jt(Jr,t),jt(fn,fn.current),!0}function dv(t,e,r){var n=t.stateNode;if(!n)throw Error(ge(169));r?(t=Z_(t,e,Mi),n.__reactInternalMemoizedMergedChildContext=t,Gt(fn),Gt(Jr),jt(Jr,t)):Gt(fn),jt(fn,r)}var Bs=null,xf=!1,Gg=!1;function eI(t){Bs===null?Bs=[t]:Bs.push(t)}function mQ(t){xf=!0,eI(t)}function Ai(){if(!Gg&&Bs!==null){Gg=!0;var t=0,e=kt;try{var r=Bs;for(kt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Bs=null,xf=!1}catch(s){throw Bs!==null&&(Bs=Bs.slice(t+1)),__(G0,Ai),s}finally{kt=e,Gg=!1}}return null}var Mo=[],Oo=0,mh=null,wh=0,Sn=[],Un=0,Oi=null,Cs=1,_s="";function vi(t,e){Mo[Oo++]=wh,Mo[Oo++]=mh,mh=t,wh=e}function tI(t,e,r){Sn[Un++]=Cs,Sn[Un++]=_s,Sn[Un++]=Oi,Oi=t;var n=Cs;t=_s;var s=32-$n(n)-1;n&=~(1<<s),r+=1;var A=32-$n(e)+s;if(30<A){var i=s-s%5;A=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Cs=1<<32-$n(e)+s|r<<s|n,_s=A+t}else Cs=1<<A|r<<s|n,_s=t}function ew(t){t.return!==null&&(vi(t,1),tI(t,1,0))}function tw(t){for(;t===mh;)mh=Mo[--Oo],Mo[Oo]=null,wh=Mo[--Oo],Mo[Oo]=null;for(;t===Oi;)Oi=Sn[--Un],Sn[Un]=null,_s=Sn[--Un],Sn[Un]=null,Cs=Sn[--Un],Sn[Un]=null}var bn=null,vn=null,Wt=!1,zn=null;function rI(t,e){var r=Nn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,vn=UA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Oi!==null?{id:Cs,overflow:_s}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Nn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,bn=t,vn=null,!0):!1;default:return!1}}function um(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dm(t){if(Wt){var e=vn;if(e){var r=e;if(!hv(t,e)){if(um(t))throw Error(ge(418));e=UA(r.nextSibling);var n=bn;e&&hv(t,e)?rI(n,r):(t.flags=t.flags&-4097|2,Wt=!1,bn=t)}}else{if(um(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Wt=!1,bn=t}}}function fv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Ku(t){if(t!==bn)return!1;if(!Wt)return fv(t),Wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!om(t.type,t.memoizedProps)),e&&(e=vn)){if(um(t))throw nI(),Error(ge(418));for(;e;)rI(t,e),e=UA(e.nextSibling)}if(fv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){vn=UA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=bn?UA(t.stateNode.nextSibling):null;return!0}function nI(){for(var t=vn;t;)t=UA(t.nextSibling)}function aa(){vn=bn=null,Wt=!1}function rw(t){zn===null?zn=[t]:zn.push(t)}var wQ=Hs.ReactCurrentBatchConfig;function dl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var n=r.stateNode}if(!n)throw Error(ge(147,t));var s=n,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var a=s.refs;i===null?delete a[A]:a[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,t))}return t}function Gu(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gv(t){var e=t._init;return e(t._payload)}function sI(t){function e(b,w){if(t){var C=b.deletions;C===null?(b.deletions=[w],b.flags|=16):C.push(w)}}function r(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function n(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=DA(b,w),b.index=0,b.sibling=null,b}function A(b,w,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<w?(b.flags|=2,w):C):(b.flags|=2,w)):(b.flags|=1048576,w)}function i(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,w,C,F){return w===null||w.tag!==6?(w=Yg(C,b.mode,F),w.return=b,w):(w=s(w,C),w.return=b,w)}function o(b,w,C,F){var U=C.type;return U===No?d(b,w,C.props.children,F,C.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===aA&&gv(U)===w.type)?(F=s(w,C.props),F.ref=dl(b,w,C),F.return=b,F):(F=Md(C.type,C.key,C.props,null,b.mode,F),F.ref=dl(b,w,C),F.return=b,F)}function c(b,w,C,F){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Zg(C,b.mode,F),w.return=b,w):(w=s(w,C.children||[]),w.return=b,w)}function d(b,w,C,F,U){return w===null||w.tag!==7?(w=Ri(C,b.mode,F,U),w.return=b,w):(w=s(w,C),w.return=b,w)}function h(b,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Yg(""+w,b.mode,C),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nu:return C=Md(w.type,w.key,w.props,null,b.mode,C),C.ref=dl(b,null,w),C.return=b,C;case Qo:return w=Zg(w,b.mode,C),w.return=b,w;case aA:var F=w._init;return h(b,F(w._payload),C)}if(Tl(w)||ol(w))return w=Ri(w,b.mode,C,null),w.return=b,w;Gu(b,w)}return null}function f(b,w,C,F){var U=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return U!==null?null:a(b,w,""+C,F);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Nu:return C.key===U?o(b,w,C,F):null;case Qo:return C.key===U?c(b,w,C,F):null;case aA:return U=C._init,f(b,w,U(C._payload),F)}if(Tl(C)||ol(C))return U!==null?null:d(b,w,C,F,null);Gu(b,C)}return null}function m(b,w,C,F,U){if(typeof F=="string"&&F!==""||typeof F=="number")return b=b.get(C)||null,a(w,b,""+F,U);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Nu:return b=b.get(F.key===null?C:F.key)||null,o(w,b,F,U);case Qo:return b=b.get(F.key===null?C:F.key)||null,c(w,b,F,U);case aA:var N=F._init;return m(b,w,C,N(F._payload),U)}if(Tl(F)||ol(F))return b=b.get(C)||null,d(w,b,F,U,null);Gu(w,F)}return null}function v(b,w,C,F){for(var U=null,N=null,x=w,B=w=0,_=null;x!==null&&B<C.length;B++){x.index>B?(_=x,x=null):_=x.sibling;var S=f(b,x,C[B],F);if(S===null){x===null&&(x=_);break}t&&x&&S.alternate===null&&e(b,x),w=A(S,w,B),N===null?U=S:N.sibling=S,N=S,x=_}if(B===C.length)return r(b,x),Wt&&vi(b,B),U;if(x===null){for(;B<C.length;B++)x=h(b,C[B],F),x!==null&&(w=A(x,w,B),N===null?U=x:N.sibling=x,N=x);return Wt&&vi(b,B),U}for(x=n(b,x);B<C.length;B++)_=m(x,b,B,C[B],F),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?B:_.key),w=A(_,w,B),N===null?U=_:N.sibling=_,N=_);return t&&x.forEach(function(R){return e(b,R)}),Wt&&vi(b,B),U}function y(b,w,C,F){var U=ol(C);if(typeof U!="function")throw Error(ge(150));if(C=U.call(C),C==null)throw Error(ge(151));for(var N=U=null,x=w,B=w=0,_=null,S=C.next();x!==null&&!S.done;B++,S=C.next()){x.index>B?(_=x,x=null):_=x.sibling;var R=f(b,x,S.value,F);if(R===null){x===null&&(x=_);break}t&&x&&R.alternate===null&&e(b,x),w=A(R,w,B),N===null?U=R:N.sibling=R,N=R,x=_}if(S.done)return r(b,x),Wt&&vi(b,B),U;if(x===null){for(;!S.done;B++,S=C.next())S=h(b,S.value,F),S!==null&&(w=A(S,w,B),N===null?U=S:N.sibling=S,N=S);return Wt&&vi(b,B),U}for(x=n(b,x);!S.done;B++,S=C.next())S=m(x,b,B,S.value,F),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?B:S.key),w=A(S,w,B),N===null?U=S:N.sibling=S,N=S);return t&&x.forEach(function(P){return e(b,P)}),Wt&&vi(b,B),U}function I(b,w,C,F){if(typeof C=="object"&&C!==null&&C.type===No&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Nu:e:{for(var U=C.key,N=w;N!==null;){if(N.key===U){if(U=C.type,U===No){if(N.tag===7){r(b,N.sibling),w=s(N,C.props.children),w.return=b,b=w;break e}}else if(N.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===aA&&gv(U)===N.type){r(b,N.sibling),w=s(N,C.props),w.ref=dl(b,N,C),w.return=b,b=w;break e}r(b,N);break}else e(b,N);N=N.sibling}C.type===No?(w=Ri(C.props.children,b.mode,F,C.key),w.return=b,b=w):(F=Md(C.type,C.key,C.props,null,b.mode,F),F.ref=dl(b,w,C),F.return=b,b=F)}return i(b);case Qo:e:{for(N=C.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){r(b,w.sibling),w=s(w,C.children||[]),w.return=b,b=w;break e}else{r(b,w);break}else e(b,w);w=w.sibling}w=Zg(C,b.mode,F),w.return=b,b=w}return i(b);case aA:return N=C._init,I(b,w,N(C._payload),F)}if(Tl(C))return v(b,w,C,F);if(ol(C))return y(b,w,C,F);Gu(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(r(b,w.sibling),w=s(w,C),w.return=b,b=w):(r(b,w),w=Yg(C,b.mode,F),w.return=b,b=w),i(b)):r(b,w)}return I}var la=sI(!0),AI=sI(!1),yh=si(null),xh=null,Ho=null,nw=null;function sw(){nw=Ho=xh=null}function Aw(t){var e=yh.current;Gt(yh),t._currentValue=e}function hm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yo(t,e){xh=t,nw=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(nw!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(xh===null)throw Error(ge(308));Ho=t,xh.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var Si=null;function iw(t){Si===null?Si=[t]:Si.push(t)}function iI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,iw(e)):(r.next=s.next,s.next=r),e.interleaved=r,Rs(t,n)}function Rs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var lA=!1;function ow(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function QA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,bt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Rs(t,r)}return s=n.interleaved,s===null?(e.next=e,iw(n)):(e.next=s.next,s.next=e),n.interleaved=e,Rs(t,r)}function Nd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,z0(t,r)}}function pv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};A===null?s=A=i:A=A.next=i,r=r.next}while(r!==null);A===null?s=A=e:A=A.next=e}else s=A=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function vh(t,e,r,n){var s=t.updateQueue;lA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var o=a,c=o.next;o.next=null,i===null?A=c:i.next=c,i=o;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=o))}if(A!==null){var h=s.baseState;i=0,d=c=o=null,a=A;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(f=e,m=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=nr({},h,f);break e;case 2:lA=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,o=h):d=d.next=m,i|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(o=h),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Vi|=i,t.lanes=i,t.memoizedState=h}}function mv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ge(191,s));s.call(n)}}}var Yc={},as=si(Yc),bc=si(Yc),Cc=si(Yc);function Ui(t){if(t===Yc)throw Error(ge(174));return t}function aw(t,e){switch(jt(Cc,e),jt(bc,t),jt(as,Yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$p(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$p(e,t)}Gt(as),jt(as,e)}function ca(){Gt(as),Gt(bc),Gt(Cc)}function aI(t){Ui(Cc.current);var e=Ui(as.current),r=$p(e,t.type);e!==r&&(jt(bc,t),jt(as,r))}function lw(t){bc.current===t&&(Gt(as),Gt(bc))}var er=si(0);function Bh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zg=[];function cw(){for(var t=0;t<zg.length;t++)zg[t]._workInProgressVersionPrimary=null;zg.length=0}var Rd=Hs.ReactCurrentDispatcher,$g=Hs.ReactCurrentBatchConfig,Hi=0,tr=null,pr=null,_r=null,bh=!1,Xl=!1,_c=0,yQ=0;function Hr(){throw Error(ge(321))}function uw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Xn(t[r],e[r]))return!1;return!0}function dw(t,e,r,n,s,A){if(Hi=A,tr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rd.current=t===null||t.memoizedState===null?bQ:CQ,t=r(n,s),Xl){A=0;do{if(Xl=!1,_c=0,25<=A)throw Error(ge(301));A+=1,_r=pr=null,e.updateQueue=null,Rd.current=_Q,t=r(n,s)}while(Xl)}if(Rd.current=Ch,e=pr!==null&&pr.next!==null,Hi=0,_r=pr=tr=null,bh=!1,e)throw Error(ge(300));return t}function hw(){var t=_c!==0;return _c=0,t}function rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?tr.memoizedState=_r=t:_r=_r.next=t,_r}function Mn(){if(pr===null){var t=tr.alternate;t=t!==null?t.memoizedState:null}else t=pr.next;var e=_r===null?tr.memoizedState:_r.next;if(e!==null)_r=e,pr=t;else{if(t===null)throw Error(ge(310));pr=t,t={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},_r===null?tr.memoizedState=_r=t:_r=_r.next=t}return _r}function Ic(t,e){return typeof e=="function"?e(t):e}function Wg(t){var e=Mn(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=pr,s=n.baseQueue,A=r.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}n.baseQueue=s=A,r.pending=null}if(s!==null){A=s.next,n=n.baseState;var a=i=null,o=null,c=A;do{var d=c.lane;if((Hi&d)===d)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=h,i=n):o=o.next=h,tr.lanes|=d,Vi|=d}c=c.next}while(c!==null&&c!==A);o===null?i=n:o.next=a,Xn(n,e.memoizedState)||(cn=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=o,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do A=s.lane,tr.lanes|=A,Vi|=A,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function qg(t){var e=Mn(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,A=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);Xn(A,e.memoizedState)||(cn=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),r.lastRenderedState=A}return[A,n]}function lI(){}function cI(t,e){var r=tr,n=Mn(),s=e(),A=!Xn(n.memoizedState,s);if(A&&(n.memoizedState=s,cn=!0),n=n.queue,fw(hI.bind(null,r,n,t),[t]),n.getSnapshot!==e||A||_r!==null&&_r.memoizedState.tag&1){if(r.flags|=2048,Ec(9,dI.bind(null,r,n,s,e),void 0,null),Er===null)throw Error(ge(349));Hi&30||uI(r,e,s)}return s}function uI(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function dI(t,e,r,n){e.value=r,e.getSnapshot=n,fI(e)&&gI(t)}function hI(t,e,r){return r(function(){fI(e)&&gI(t)})}function fI(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xn(t,r)}catch{return!0}}function gI(t){var e=Rs(t,1);e!==null&&Wn(e,t,1,-1)}function wv(t){var e=rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ic,lastRenderedState:t},e.queue=t,t=t.dispatch=BQ.bind(null,tr,t),[e.memoizedState,t]}function Ec(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function pI(){return Mn().memoizedState}function Dd(t,e,r,n){var s=rs();tr.flags|=t,s.memoizedState=Ec(1|e,r,void 0,n===void 0?null:n)}function vf(t,e,r,n){var s=Mn();n=n===void 0?null:n;var A=void 0;if(pr!==null){var i=pr.memoizedState;if(A=i.destroy,n!==null&&uw(n,i.deps)){s.memoizedState=Ec(e,r,A,n);return}}tr.flags|=t,s.memoizedState=Ec(1|e,r,A,n)}function yv(t,e){return Dd(8390656,8,t,e)}function fw(t,e){return vf(2048,8,t,e)}function mI(t,e){return vf(4,2,t,e)}function wI(t,e){return vf(4,4,t,e)}function yI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xI(t,e,r){return r=r!=null?r.concat([t]):null,vf(4,4,yI.bind(null,e,t),r)}function gw(){}function vI(t,e){var r=Mn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&uw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function BI(t,e){var r=Mn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&uw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function bI(t,e,r){return Hi&21?(Xn(r,e)||(r=T_(),tr.lanes|=r,Vi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=r)}function xQ(t,e){var r=kt;kt=r!==0&&4>r?r:4,t(!0);var n=$g.transition;$g.transition={};try{t(!1),e()}finally{kt=r,$g.transition=n}}function CI(){return Mn().memoizedState}function vQ(t,e,r){var n=RA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_I(t))II(e,r);else if(r=iI(t,e,r,n),r!==null){var s=tn();Wn(r,t,n,s),EI(r,e,n)}}function BQ(t,e,r){var n=RA(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_I(t))II(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,a=A(i,r);if(s.hasEagerState=!0,s.eagerState=a,Xn(a,i)){var o=e.interleaved;o===null?(s.next=s,iw(e)):(s.next=o.next,o.next=s),e.interleaved=s;return}}catch{}finally{}r=iI(t,e,s,n),r!==null&&(s=tn(),Wn(r,t,n,s),EI(r,e,n))}}function _I(t){var e=t.alternate;return t===tr||e!==null&&e===tr}function II(t,e){Xl=bh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function EI(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,z0(t,r)}}var Ch={readContext:jn,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},bQ={readContext:jn,useCallback:function(t,e){return rs().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:yv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Dd(4194308,4,yI.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Dd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dd(4,2,t,e)},useMemo:function(t,e){var r=rs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=rs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=vQ.bind(null,tr,t),[n.memoizedState,t]},useRef:function(t){var e=rs();return t={current:t},e.memoizedState=t},useState:wv,useDebugValue:gw,useDeferredValue:function(t){return rs().memoizedState=t},useTransition:function(){var t=wv(!1),e=t[0];return t=xQ.bind(null,t[1]),rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=tr,s=rs();if(Wt){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=e(),Er===null)throw Error(ge(349));Hi&30||uI(n,e,r)}s.memoizedState=r;var A={value:r,getSnapshot:e};return s.queue=A,yv(hI.bind(null,n,A,t),[t]),n.flags|=2048,Ec(9,dI.bind(null,n,A,r,e),void 0,null),r},useId:function(){var t=rs(),e=Er.identifierPrefix;if(Wt){var r=_s,n=Cs;r=(n&~(1<<32-$n(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=_c++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=yQ++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CQ={readContext:jn,useCallback:vI,useContext:jn,useEffect:fw,useImperativeHandle:xI,useInsertionEffect:mI,useLayoutEffect:wI,useMemo:BI,useReducer:Wg,useRef:pI,useState:function(){return Wg(Ic)},useDebugValue:gw,useDeferredValue:function(t){var e=Mn();return bI(e,pr.memoizedState,t)},useTransition:function(){var t=Wg(Ic)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:lI,useSyncExternalStore:cI,useId:CI,unstable_isNewReconciler:!1},_Q={readContext:jn,useCallback:vI,useContext:jn,useEffect:fw,useImperativeHandle:xI,useInsertionEffect:mI,useLayoutEffect:wI,useMemo:BI,useReducer:qg,useRef:pI,useState:function(){return qg(Ic)},useDebugValue:gw,useDeferredValue:function(t){var e=Mn();return pr===null?e.memoizedState=t:bI(e,pr.memoizedState,t)},useTransition:function(){var t=qg(Ic)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:lI,useSyncExternalStore:cI,useId:CI,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=nr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function fm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:nr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Bf={isMounted:function(t){return(t=t._reactInternals)?so(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=tn(),s=RA(t),A=Ss(n,s);A.payload=e,r!=null&&(A.callback=r),e=QA(t,A,s),e!==null&&(Wn(e,t,s,n),Nd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=tn(),s=RA(t),A=Ss(n,s);A.tag=1,A.payload=e,r!=null&&(A.callback=r),e=QA(t,A,s),e!==null&&(Wn(e,t,s,n),Nd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=tn(),n=RA(t),s=Ss(r,n);s.tag=2,e!=null&&(s.callback=e),e=QA(t,s,n),e!==null&&(Wn(e,t,n,r),Nd(e,t,n))}};function xv(t,e,r,n,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,A,i):e.prototype&&e.prototype.isPureReactComponent?!yc(r,n)||!yc(s,A):!0}function TI(t,e,r){var n=!1,s=GA,A=e.contextType;return typeof A=="object"&&A!==null?A=jn(A):(s=gn(e)?Mi:Jr.current,n=e.contextTypes,A=(n=n!=null)?oa(t,s):GA),e=new e(r,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function vv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Bf.enqueueReplaceState(e,e.state,null)}function gm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ow(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=jn(A):(A=gn(e)?Mi:Jr.current,s.context=oa(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(fm(t,e,A,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Bf.enqueueReplaceState(s,s.state,null),vh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ua(t,e){try{var r="",n=e;do r+=ZS(n),n=n.return;while(n);var s=r}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function Xg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var IQ=typeof WeakMap=="function"?WeakMap:Map;function FI(t,e,r){r=Ss(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ih||(Ih=!0,Im=n),pm(t,e)},r}function kI(t,e,r){r=Ss(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){pm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){pm(t,e),typeof n!="function"&&(NA===null?NA=new Set([this]):NA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function Bv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new IQ;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=MQ.bind(null,t,e,r),e.then(t,t))}function bv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ss(-1,1),e.tag=2,QA(r,e,1))),r.lanes|=1),t)}var EQ=Hs.ReactCurrentOwner,cn=!1;function Zr(t,e,r,n){e.child=t===null?AI(e,null,r,n):la(e,t.child,r,n)}function _v(t,e,r,n,s){r=r.render;var A=e.ref;return Yo(e,s),n=dw(t,e,r,n,A,s),r=hw(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ds(t,e,s)):(Wt&&r&&ew(e),e.flags|=1,Zr(t,e,n,s),e.child)}function Iv(t,e,r,n,s){if(t===null){var A=r.type;return typeof A=="function"&&!bw(A)&&A.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=A,SI(t,e,A,n,s)):(t=Md(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(r=r.compare,r=r!==null?r:yc,r(i,n)&&t.ref===e.ref)return Ds(t,e,s)}return e.flags|=1,t=DA(A,n),t.ref=e.ref,t.return=e,e.child=t}function SI(t,e,r,n,s){if(t!==null){var A=t.memoizedProps;if(yc(A,n)&&t.ref===e.ref)if(cn=!1,e.pendingProps=n=A,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,Ds(t,e,s)}return mm(t,e,r,n,s)}function UI(t,e,r){var n=e.pendingProps,s=n.children,A=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Ko,yn),yn|=r;else{if(!(r&1073741824))return t=A!==null?A.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jt(Ko,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=A!==null?A.baseLanes:r,jt(Ko,yn),yn|=n}else A!==null?(n=A.baseLanes|r,e.memoizedState=null):n=r,jt(Ko,yn),yn|=n;return Zr(t,e,s,r),e.child}function QI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mm(t,e,r,n,s){var A=gn(r)?Mi:Jr.current;return A=oa(e,A),Yo(e,s),r=dw(t,e,r,n,A,s),n=hw(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ds(t,e,s)):(Wt&&n&&ew(e),e.flags|=1,Zr(t,e,r,s),e.child)}function Ev(t,e,r,n,s){if(gn(r)){var A=!0;ph(e)}else A=!1;if(Yo(e,s),e.stateNode===null)Pd(t,e),TI(e,r,n),gm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=gn(r)?Mi:Jr.current,c=oa(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||o!==c)&&vv(e,i,n,c),lA=!1;var f=e.memoizedState;i.state=f,vh(e,n,i,s),o=e.memoizedState,a!==n||f!==o||fn.current||lA?(typeof d=="function"&&(fm(e,r,d,n),o=e.memoizedState),(a=lA||xv(e,r,a,n,f,o,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),i.props=n,i.state=o,i.context=c,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,oI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Kn(e.type,a),i.props=c,h=e.pendingProps,f=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=jn(o):(o=gn(r)?Mi:Jr.current,o=oa(e,o));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||f!==o)&&vv(e,i,n,o),lA=!1,f=e.memoizedState,i.state=f,vh(e,n,i,s);var v=e.memoizedState;a!==h||f!==v||fn.current||lA?(typeof m=="function"&&(fm(e,r,m,n),v=e.memoizedState),(c=lA||xv(e,r,c,n,f,v,o)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=o,n=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return wm(t,e,r,n,A,s)}function wm(t,e,r,n,s,A){QI(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&dv(e,r,!1),Ds(t,e,A);n=e.stateNode,EQ.current=e;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=la(e,t.child,null,A),e.child=la(e,null,a,A)):Zr(t,e,a,A),e.memoizedState=n.state,s&&dv(e,r,!0),e.child}function NI(t){var e=t.stateNode;e.pendingContext?uv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uv(t,e.context,!1),aw(t,e.containerInfo)}function Tv(t,e,r,n,s){return aa(),rw(s),e.flags|=256,Zr(t,e,r,n),e.child}var ym={dehydrated:null,treeContext:null,retryLane:0};function xm(t){return{baseLanes:t,cachePool:null,transitions:null}}function RI(t,e,r){var n=e.pendingProps,s=er.current,A=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),jt(er,s&1),t===null)return dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,A?(n=e.mode,A=e.child,i={mode:"hidden",children:i},!(n&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=_f(i,n,0,null),t=Ri(t,n,r,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=xm(r),e.memoizedState=ym,t):pw(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return TQ(t,e,i,n,a,s,r);if(A){A=n.fallback,i=e.mode,s=t.child,a=s.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=DA(s,o),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?A=DA(a,A):(A=Ri(A,i,r,null),A.flags|=2),A.return=e,n.return=e,n.sibling=A,e.child=n,n=A,A=e.child,i=t.child.memoizedState,i=i===null?xm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~r,e.memoizedState=ym,n}return A=t.child,t=A.sibling,n=DA(A,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function pw(t,e){return e=_f({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zu(t,e,r,n){return n!==null&&rw(n),la(e,t.child,null,r),t=pw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TQ(t,e,r,n,s,A,i){if(r)return e.flags&256?(e.flags&=-257,n=Xg(Error(ge(422))),zu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=n.fallback,s=e.mode,n=_f({mode:"visible",children:n.children},s,0,null),A=Ri(A,s,i,null),A.flags|=2,n.return=e,A.return=e,n.sibling=A,e.child=n,e.mode&1&&la(e,t.child,null,i),e.child.memoizedState=xm(i),e.memoizedState=ym,A);if(!(e.mode&1))return zu(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,A=Error(ge(419)),n=Xg(A,n,void 0),zu(t,e,i,n)}if(a=(i&t.childLanes)!==0,cn||a){if(n=Er,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Rs(t,s),Wn(n,t,s,-1))}return Bw(),n=Xg(Error(ge(421))),zu(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=OQ.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,vn=UA(s.nextSibling),bn=e,Wt=!0,zn=null,t!==null&&(Sn[Un++]=Cs,Sn[Un++]=_s,Sn[Un++]=Oi,Cs=t.id,_s=t.overflow,Oi=e),e=pw(e,n.children),e.flags|=4096,e)}function Fv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),hm(t.return,e,r)}function Jg(t,e,r,n,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=n,A.tail=r,A.tailMode=s)}function DI(t,e,r){var n=e.pendingProps,s=n.revealOrder,A=n.tail;if(Zr(t,e,n.children,r),n=er.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fv(t,r,e);else if(t.tag===19)Fv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(jt(er,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Bh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Jg(e,!1,s,r,A);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Jg(e,!0,r,null,A);break;case"together":Jg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ds(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,r=DA(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=DA(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function FQ(t,e,r){switch(e.tag){case 3:NI(e),aa();break;case 5:aI(e);break;case 1:gn(e.type)&&ph(e);break;case 4:aw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;jt(yh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(jt(er,er.current&1),e.flags|=128,null):r&e.child.childLanes?RI(t,e,r):(jt(er,er.current&1),t=Ds(t,e,r),t!==null?t.sibling:null);jt(er,er.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return DI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jt(er,er.current),n)break;return null;case 22:case 23:return e.lanes=0,UI(t,e,r)}return Ds(t,e,r)}var PI,vm,LI,jI;PI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vm=function(){};LI=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Ui(as.current);var A=null;switch(r){case"input":s=Vp(t,s),n=Vp(t,n),A=[];break;case"select":s=nr({},s,{value:void 0}),n=nr({},n,{value:void 0}),A=[];break;case"textarea":s=zp(t,s),n=zp(t,n),A=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fh)}Wp(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(dc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in n){var o=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&a[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(A||(A=[]),A.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(A=A||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(A=A||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(dc.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Ht("scroll",t),A||a===o||(A=[])):(A=A||[]).push(c,o))}r&&(A=A||[]).push("style",r);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};jI=function(t,e,r,n){r!==n&&(e.flags|=4)};function hl(t,e){if(!Wt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Vr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function kQ(t,e,r){var n=e.pendingProps;switch(tw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(e),null;case 1:return gn(e.type)&&gh(),Vr(e),null;case 3:return n=e.stateNode,ca(),Gt(fn),Gt(Jr),cw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(Fm(zn),zn=null))),vm(t,e),Vr(e),null;case 5:lw(e);var s=Ui(Cc.current);if(r=e.type,t!==null&&e.stateNode!=null)LI(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ge(166));return Vr(e),null}if(t=Ui(as.current),Ku(e)){n=e.stateNode,r=e.type;var A=e.memoizedProps;switch(n[ss]=e,n[Bc]=A,t=(e.mode&1)!==0,r){case"dialog":Ht("cancel",n),Ht("close",n);break;case"iframe":case"object":case"embed":Ht("load",n);break;case"video":case"audio":for(s=0;s<kl.length;s++)Ht(kl[s],n);break;case"source":Ht("error",n);break;case"img":case"image":case"link":Ht("error",n),Ht("load",n);break;case"details":Ht("toggle",n);break;case"input":Lx(n,A),Ht("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!A.multiple},Ht("invalid",n);break;case"textarea":Mx(n,A),Ht("invalid",n)}Wp(r,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var a=A[i];i==="children"?typeof a=="string"?n.textContent!==a&&(A.suppressHydrationWarning!==!0&&Vu(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(A.suppressHydrationWarning!==!0&&Vu(n.textContent,a,t),s=["children",""+a]):dc.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Ht("scroll",n)}switch(r){case"input":Ru(n),jx(n,A,!0);break;case"textarea":Ru(n),Ox(n);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(n.onclick=fh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=h_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[ss]=e,t[Bc]=n,PI(t,e,!1,!1),e.stateNode=t;e:{switch(i=qp(r,n),r){case"dialog":Ht("cancel",t),Ht("close",t),s=n;break;case"iframe":case"object":case"embed":Ht("load",t),s=n;break;case"video":case"audio":for(s=0;s<kl.length;s++)Ht(kl[s],t);s=n;break;case"source":Ht("error",t),s=n;break;case"img":case"image":case"link":Ht("error",t),Ht("load",t),s=n;break;case"details":Ht("toggle",t),s=n;break;case"input":Lx(t,n),s=Vp(t,n),Ht("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=nr({},n,{value:void 0}),Ht("invalid",t);break;case"textarea":Mx(t,n),s=zp(t,n),Ht("invalid",t);break;default:s=n}Wp(r,s),a=s;for(A in a)if(a.hasOwnProperty(A)){var o=a[A];A==="style"?p_(t,o):A==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&f_(t,o)):A==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&hc(t,o):typeof o=="number"&&hc(t,""+o):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(dc.hasOwnProperty(A)?o!=null&&A==="onScroll"&&Ht("scroll",t):o!=null&&M0(t,A,o,i))}switch(r){case"input":Ru(t),jx(t,n,!1);break;case"textarea":Ru(t),Ox(t);break;case"option":n.value!=null&&t.setAttribute("value",""+KA(n.value));break;case"select":t.multiple=!!n.multiple,A=n.value,A!=null?Wo(t,!!n.multiple,A,!1):n.defaultValue!=null&&Wo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vr(e),null;case 6:if(t&&e.stateNode!=null)jI(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ge(166));if(r=Ui(Cc.current),Ui(as.current),Ku(e)){if(n=e.stateNode,r=e.memoizedProps,n[ss]=e,(A=n.nodeValue!==r)&&(t=bn,t!==null))switch(t.tag){case 3:Vu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vu(n.nodeValue,r,(t.mode&1)!==0)}A&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ss]=e,e.stateNode=n}return Vr(e),null;case 13:if(Gt(er),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wt&&vn!==null&&e.mode&1&&!(e.flags&128))nI(),aa(),e.flags|=98560,A=!1;else if(A=Ku(e),n!==null&&n.dehydrated!==null){if(t===null){if(!A)throw Error(ge(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(ge(317));A[ss]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vr(e),A=!1}else zn!==null&&(Fm(zn),zn=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||er.current&1?wr===0&&(wr=3):Bw())),e.updateQueue!==null&&(e.flags|=4),Vr(e),null);case 4:return ca(),vm(t,e),t===null&&xc(e.stateNode.containerInfo),Vr(e),null;case 10:return Aw(e.type._context),Vr(e),null;case 17:return gn(e.type)&&gh(),Vr(e),null;case 19:if(Gt(er),A=e.memoizedState,A===null)return Vr(e),null;if(n=(e.flags&128)!==0,i=A.rendering,i===null)if(n)hl(A,!1);else{if(wr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Bh(t),i!==null){for(e.flags|=128,hl(A,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)A=r,t=n,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return jt(er,er.current&1|2),e.child}t=t.sibling}A.tail!==null&&cr()>da&&(e.flags|=128,n=!0,hl(A,!1),e.lanes=4194304)}else{if(!n)if(t=Bh(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),hl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!Wt)return Vr(e),null}else 2*cr()-A.renderingStartTime>da&&r!==1073741824&&(e.flags|=128,n=!0,hl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(r=A.last,r!==null?r.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=cr(),e.sibling=null,r=er.current,jt(er,n?r&1|2:r&1),e):(Vr(e),null);case 22:case 23:return vw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?yn&1073741824&&(Vr(e),e.subtreeFlags&6&&(e.flags|=8192)):Vr(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function SQ(t,e){switch(tw(e),e.tag){case 1:return gn(e.type)&&gh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ca(),Gt(fn),Gt(Jr),cw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lw(e),null;case 13:if(Gt(er),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gt(er),null;case 4:return ca(),null;case 10:return Aw(e.type._context),null;case 22:case 23:return vw(),null;case 24:return null;default:return null}}var $u=!1,Wr=!1,UQ=typeof WeakSet=="function"?WeakSet:Set,je=null;function Vo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ir(t,e,n)}else r.current=null}function Bm(t,e,r){try{r()}catch(n){ir(t,e,n)}}var kv=!1;function QQ(t,e){if(Am=uh,t=K_(),Z0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,A=n.focusNode;n=n.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var i=0,a=-1,o=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(a=i+s),h!==A||n!==0&&h.nodeType!==3||(o=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===s&&(a=i),f===A&&++d===n&&(o=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=a===-1||o===-1?null:{start:a,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(im={focusedElem:t,selectionRange:r},uh=!1,je=e;je!==null;)if(e=je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,je=t;else for(;je!==null;){e=je;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,I=v.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Kn(e.type,y),I);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(F){ir(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}return v=kv,kv=!1,v}function Jl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&Bm(e,r,A)}s=s.next}while(s!==n)}}function bf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function bm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function MI(t){var e=t.alternate;e!==null&&(t.alternate=null,MI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ss],delete e[Bc],delete e[lm],delete e[gQ],delete e[pQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OI(t){return t.tag===5||t.tag===3||t.tag===4}function Sv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fh));else if(n!==4&&(t=t.child,t!==null))for(Cm(t,e,r),t=t.sibling;t!==null;)Cm(t,e,r),t=t.sibling}function _m(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_m(t,e,r),t=t.sibling;t!==null;)_m(t,e,r),t=t.sibling}var Ur=null,Gn=!1;function eA(t,e,r){for(r=r.child;r!==null;)HI(t,e,r),r=r.sibling}function HI(t,e,r){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(gf,r)}catch{}switch(r.tag){case 5:Wr||Vo(r,e);case 6:var n=Ur,s=Gn;Ur=null,eA(t,e,r),Ur=n,Gn=s,Ur!==null&&(Gn?(t=Ur,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ur.removeChild(r.stateNode));break;case 18:Ur!==null&&(Gn?(t=Ur,r=r.stateNode,t.nodeType===8?Kg(t.parentNode,r):t.nodeType===1&&Kg(t,r),mc(t)):Kg(Ur,r.stateNode));break;case 4:n=Ur,s=Gn,Ur=r.stateNode.containerInfo,Gn=!0,eA(t,e,r),Ur=n,Gn=s;break;case 0:case 11:case 14:case 15:if(!Wr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&Bm(r,e,i),s=s.next}while(s!==n)}eA(t,e,r);break;case 1:if(!Wr&&(Vo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ir(r,e,a)}eA(t,e,r);break;case 21:eA(t,e,r);break;case 22:r.mode&1?(Wr=(n=Wr)||r.memoizedState!==null,eA(t,e,r),Wr=n):eA(t,e,r);break;default:eA(t,e,r)}}function Uv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new UQ),e.forEach(function(n){var s=HQ.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Hn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var A=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Ur=a.stateNode,Gn=!1;break e;case 3:Ur=a.stateNode.containerInfo,Gn=!0;break e;case 4:Ur=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(Ur===null)throw Error(ge(160));HI(A,i,s),Ur=null,Gn=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(c){ir(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VI(e,t),e=e.sibling}function VI(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),es(t),n&4){try{Jl(3,t,t.return),bf(3,t)}catch(y){ir(t,t.return,y)}try{Jl(5,t,t.return)}catch(y){ir(t,t.return,y)}}break;case 1:Hn(e,t),es(t),n&512&&r!==null&&Vo(r,r.return);break;case 5:if(Hn(e,t),es(t),n&512&&r!==null&&Vo(r,r.return),t.flags&32){var s=t.stateNode;try{hc(s,"")}catch(y){ir(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=r!==null?r.memoizedProps:A,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&A.type==="radio"&&A.name!=null&&u_(s,A),qp(a,i);var c=qp(a,A);for(i=0;i<o.length;i+=2){var d=o[i],h=o[i+1];d==="style"?p_(s,h):d==="dangerouslySetInnerHTML"?f_(s,h):d==="children"?hc(s,h):M0(s,d,h,c)}switch(a){case"input":Kp(s,A);break;case"textarea":d_(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var m=A.value;m!=null?Wo(s,!!A.multiple,m,!1):f!==!!A.multiple&&(A.defaultValue!=null?Wo(s,!!A.multiple,A.defaultValue,!0):Wo(s,!!A.multiple,A.multiple?[]:"",!1))}s[Bc]=A}catch(y){ir(t,t.return,y)}}break;case 6:if(Hn(e,t),es(t),n&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(y){ir(t,t.return,y)}}break;case 3:if(Hn(e,t),es(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mc(e.containerInfo)}catch(y){ir(t,t.return,y)}break;case 4:Hn(e,t),es(t);break;case 13:Hn(e,t),es(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(yw=cr())),n&4&&Uv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Wr=(c=Wr)||d,Hn(e,t),Wr=c):Hn(e,t),es(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(je=t,d=t.child;d!==null;){for(h=je=d;je!==null;){switch(f=je,m=f.child,f.tag){case 0:case 11:case 14:case 15:Jl(4,f,f.return);break;case 1:Vo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){ir(n,r,y)}}break;case 5:Vo(f,f.return);break;case 22:if(f.memoizedState!==null){Nv(h);continue}}m!==null?(m.return=f,je=m):Nv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(a=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=g_("display",i))}catch(y){ir(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){ir(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hn(e,t),es(t),n&4&&Uv(t);break;case 21:break;default:Hn(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(OI(r)){var n=r;break e}r=r.return}throw Error(ge(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(hc(s,""),n.flags&=-33);var A=Sv(t);_m(t,A,s);break;case 3:case 4:var i=n.stateNode.containerInfo,a=Sv(t);Cm(t,a,i);break;default:throw Error(ge(161))}}catch(o){ir(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NQ(t,e,r){je=t,KI(t)}function KI(t,e,r){for(var n=(t.mode&1)!==0;je!==null;){var s=je,A=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||$u;if(!i){var a=s.alternate,o=a!==null&&a.memoizedState!==null||Wr;a=$u;var c=Wr;if($u=i,(Wr=o)&&!c)for(je=s;je!==null;)i=je,o=i.child,i.tag===22&&i.memoizedState!==null?Rv(s):o!==null?(o.return=i,je=o):Rv(s);for(;A!==null;)je=A,KI(A),A=A.sibling;je=s,$u=a,Wr=c}Qv(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,je=A):Qv(t)}}function Qv(t){for(;je!==null;){var e=je;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wr||bf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Wr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Kn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&mv(e,A,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}mv(e,i,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&mc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}Wr||e.flags&512&&bm(e)}catch(f){ir(e,e.return,f)}}if(e===t){je=null;break}if(r=e.sibling,r!==null){r.return=e.return,je=r;break}je=e.return}}function Nv(t){for(;je!==null;){var e=je;if(e===t){je=null;break}var r=e.sibling;if(r!==null){r.return=e.return,je=r;break}je=e.return}}function Rv(t){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{bf(4,e)}catch(o){ir(e,r,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(o){ir(e,s,o)}}var A=e.return;try{bm(e)}catch(o){ir(e,A,o)}break;case 5:var i=e.return;try{bm(e)}catch(o){ir(e,i,o)}}}catch(o){ir(e,e.return,o)}if(e===t){je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,je=a;break}je=e.return}}var RQ=Math.ceil,_h=Hs.ReactCurrentDispatcher,mw=Hs.ReactCurrentOwner,Pn=Hs.ReactCurrentBatchConfig,bt=0,Er=null,gr=null,Pr=0,yn=0,Ko=si(0),wr=0,Tc=null,Vi=0,Cf=0,ww=0,Yl=null,ln=null,yw=0,da=1/0,vs=null,Ih=!1,Im=null,NA=null,Wu=!1,vA=null,Eh=0,Zl=0,Em=null,Ld=-1,jd=0;function tn(){return bt&6?cr():Ld!==-1?Ld:Ld=cr()}function RA(t){return t.mode&1?bt&2&&Pr!==0?Pr&-Pr:wQ.transition!==null?(jd===0&&(jd=T_()),jd):(t=kt,t!==0||(t=window.event,t=t===void 0?16:R_(t.type)),t):1}function Wn(t,e,r,n){if(50<Zl)throw Zl=0,Em=null,Error(ge(185));qc(t,r,n),(!(bt&2)||t!==Er)&&(t===Er&&(!(bt&2)&&(Cf|=r),wr===4&&dA(t,Pr)),pn(t,n),r===1&&bt===0&&!(e.mode&1)&&(da=cr()+500,xf&&Ai()))}function pn(t,e){var r=t.callbackNode;wU(t,e);var n=ch(t,t===Er?Pr:0);if(n===0)r!==null&&Kx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Kx(r),e===1)t.tag===0?mQ(Dv.bind(null,t)):eI(Dv.bind(null,t)),hQ(function(){!(bt&6)&&Ai()}),r=null;else{switch(F_(n)){case 1:r=G0;break;case 4:r=I_;break;case 16:r=lh;break;case 536870912:r=E_;break;default:r=lh}r=YI(r,GI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function GI(t,e){if(Ld=-1,jd=0,bt&6)throw Error(ge(327));var r=t.callbackNode;if(Zo()&&t.callbackNode!==r)return null;var n=ch(t,t===Er?Pr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Th(t,n);else{e=n;var s=bt;bt|=2;var A=$I();(Er!==t||Pr!==e)&&(vs=null,da=cr()+500,Ni(t,e));do try{LQ();break}catch(a){zI(t,a)}while(!0);sw(),_h.current=A,bt=s,gr!==null?e=0:(Er=null,Pr=0,e=wr)}if(e!==0){if(e===2&&(s=em(t),s!==0&&(n=s,e=Tm(t,s))),e===1)throw r=Tc,Ni(t,0),dA(t,n),pn(t,cr()),r;if(e===6)dA(t,n);else{if(s=t.current.alternate,!(n&30)&&!DQ(s)&&(e=Th(t,n),e===2&&(A=em(t),A!==0&&(n=A,e=Tm(t,A))),e===1))throw r=Tc,Ni(t,0),dA(t,n),pn(t,cr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ge(345));case 2:Bi(t,ln,vs);break;case 3:if(dA(t,n),(n&130023424)===n&&(e=yw+500-cr(),10<e)){if(ch(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=am(Bi.bind(null,t,ln,vs),e);break}Bi(t,ln,vs);break;case 4:if(dA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-$n(n);A=1<<i,i=e[i],i>s&&(s=i),n&=~A}if(n=s,n=cr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*RQ(n/1960))-n,10<n){t.timeoutHandle=am(Bi.bind(null,t,ln,vs),n);break}Bi(t,ln,vs);break;case 5:Bi(t,ln,vs);break;default:throw Error(ge(329))}}}return pn(t,cr()),t.callbackNode===r?GI.bind(null,t):null}function Tm(t,e){var r=Yl;return t.current.memoizedState.isDehydrated&&(Ni(t,e).flags|=256),t=Th(t,e),t!==2&&(e=ln,ln=r,e!==null&&Fm(e)),t}function Fm(t){ln===null?ln=t:ln.push.apply(ln,t)}function DQ(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],A=s.getSnapshot;s=s.value;try{if(!Xn(A(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dA(t,e){for(e&=~ww,e&=~Cf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-$n(e),n=1<<r;t[r]=-1,e&=~n}}function Dv(t){if(bt&6)throw Error(ge(327));Zo();var e=ch(t,0);if(!(e&1))return pn(t,cr()),null;var r=Th(t,e);if(t.tag!==0&&r===2){var n=em(t);n!==0&&(e=n,r=Tm(t,n))}if(r===1)throw r=Tc,Ni(t,0),dA(t,e),pn(t,cr()),r;if(r===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bi(t,ln,vs),pn(t,cr()),null}function xw(t,e){var r=bt;bt|=1;try{return t(e)}finally{bt=r,bt===0&&(da=cr()+500,xf&&Ai())}}function Ki(t){vA!==null&&vA.tag===0&&!(bt&6)&&Zo();var e=bt;bt|=1;var r=Pn.transition,n=kt;try{if(Pn.transition=null,kt=1,t)return t()}finally{kt=n,Pn.transition=r,bt=e,!(bt&6)&&Ai()}}function vw(){yn=Ko.current,Gt(Ko)}function Ni(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,dQ(r)),gr!==null)for(r=gr.return;r!==null;){var n=r;switch(tw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gh();break;case 3:ca(),Gt(fn),Gt(Jr),cw();break;case 5:lw(n);break;case 4:ca();break;case 13:Gt(er);break;case 19:Gt(er);break;case 10:Aw(n.type._context);break;case 22:case 23:vw()}r=r.return}if(Er=t,gr=t=DA(t.current,null),Pr=yn=e,wr=0,Tc=null,ww=Cf=Vi=0,ln=Yl=null,Si!==null){for(e=0;e<Si.length;e++)if(r=Si[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,A=r.pending;if(A!==null){var i=A.next;A.next=s,n.next=i}r.pending=n}Si=null}return t}function zI(t,e){do{var r=gr;try{if(sw(),Rd.current=Ch,bh){for(var n=tr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}bh=!1}if(Hi=0,_r=pr=tr=null,Xl=!1,_c=0,mw.current=null,r===null||r.return===null){wr=1,Tc=e,gr=null;break}e:{var A=t,i=r.return,a=r,o=e;if(e=Pr,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=bv(i);if(m!==null){m.flags&=-257,Cv(m,i,a,A,e),m.mode&1&&Bv(A,c,e),e=m,o=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(o),e.updateQueue=y}else v.add(o);break e}else{if(!(e&1)){Bv(A,c,e),Bw();break e}o=Error(ge(426))}}else if(Wt&&a.mode&1){var I=bv(i);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Cv(I,i,a,A,e),rw(ua(o,a));break e}}A=o=ua(o,a),wr!==4&&(wr=2),Yl===null?Yl=[A]:Yl.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var b=FI(A,o,e);pv(A,b);break e;case 1:a=o;var w=A.type,C=A.stateNode;if(!(A.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(NA===null||!NA.has(C)))){A.flags|=65536,e&=-e,A.lanes|=e;var F=kI(A,a,e);pv(A,F);break e}}A=A.return}while(A!==null)}qI(r)}catch(U){e=U,gr===r&&r!==null&&(gr=r=r.return);continue}break}while(!0)}function $I(){var t=_h.current;return _h.current=Ch,t===null?Ch:t}function Bw(){(wr===0||wr===3||wr===2)&&(wr=4),Er===null||!(Vi&268435455)&&!(Cf&268435455)||dA(Er,Pr)}function Th(t,e){var r=bt;bt|=2;var n=$I();(Er!==t||Pr!==e)&&(vs=null,Ni(t,e));do try{PQ();break}catch(s){zI(t,s)}while(!0);if(sw(),bt=r,_h.current=n,gr!==null)throw Error(ge(261));return Er=null,Pr=0,wr}function PQ(){for(;gr!==null;)WI(gr)}function LQ(){for(;gr!==null&&!lU();)WI(gr)}function WI(t){var e=JI(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?qI(t):gr=e,mw.current=null}function qI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=SQ(r,e),r!==null){r.flags&=32767,gr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wr=6,gr=null;return}}else if(r=kQ(r,e,yn),r!==null){gr=r;return}if(e=e.sibling,e!==null){gr=e;return}gr=e=t}while(e!==null);wr===0&&(wr=5)}function Bi(t,e,r){var n=kt,s=Pn.transition;try{Pn.transition=null,kt=1,jQ(t,e,r,n)}finally{Pn.transition=s,kt=n}return null}function jQ(t,e,r,n){do Zo();while(vA!==null);if(bt&6)throw Error(ge(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var A=r.lanes|r.childLanes;if(yU(t,A),t===Er&&(gr=Er=null,Pr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Wu||(Wu=!0,YI(lh,function(){return Zo(),null})),A=(r.flags&15990)!==0,r.subtreeFlags&15990||A){A=Pn.transition,Pn.transition=null;var i=kt;kt=1;var a=bt;bt|=4,mw.current=null,QQ(t,r),VI(r,t),AQ(im),uh=!!Am,im=Am=null,t.current=r,NQ(r),cU(),bt=a,kt=i,Pn.transition=A}else t.current=r;if(Wu&&(Wu=!1,vA=t,Eh=s),A=t.pendingLanes,A===0&&(NA=null),hU(r.stateNode),pn(t,cr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ih)throw Ih=!1,t=Im,Im=null,t;return Eh&1&&t.tag!==0&&Zo(),A=t.pendingLanes,A&1?t===Em?Zl++:(Zl=0,Em=t):Zl=0,Ai(),null}function Zo(){if(vA!==null){var t=F_(Eh),e=Pn.transition,r=kt;try{if(Pn.transition=null,kt=16>t?16:t,vA===null)var n=!1;else{if(t=vA,vA=null,Eh=0,bt&6)throw Error(ge(331));var s=bt;for(bt|=4,je=t.current;je!==null;){var A=je,i=A.child;if(je.flags&16){var a=A.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(je=c;je!==null;){var d=je;switch(d.tag){case 0:case 11:case 15:Jl(8,d,A)}var h=d.child;if(h!==null)h.return=d,je=h;else for(;je!==null;){d=je;var f=d.sibling,m=d.return;if(MI(d),d===c){je=null;break}if(f!==null){f.return=m,je=f;break}je=m}}}var v=A.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var I=y.sibling;y.sibling=null,y=I}while(y!==null)}}je=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,je=i;else e:for(;je!==null;){if(A=je,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Jl(9,A,A.return)}var b=A.sibling;if(b!==null){b.return=A.return,je=b;break e}je=A.return}}var w=t.current;for(je=w;je!==null;){i=je;var C=i.child;if(i.subtreeFlags&2064&&C!==null)C.return=i,je=C;else e:for(i=w;je!==null;){if(a=je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bf(9,a)}}catch(U){ir(a,a.return,U)}if(a===i){je=null;break e}var F=a.sibling;if(F!==null){F.return=a.return,je=F;break e}je=a.return}}if(bt=s,Ai(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(gf,t)}catch{}n=!0}return n}finally{kt=r,Pn.transition=e}}return!1}function Pv(t,e,r){e=ua(r,e),e=FI(t,e,1),t=QA(t,e,1),e=tn(),t!==null&&(qc(t,1,e),pn(t,e))}function ir(t,e,r){if(t.tag===3)Pv(t,t,r);else for(;e!==null;){if(e.tag===3){Pv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(NA===null||!NA.has(n))){t=ua(r,t),t=kI(e,t,1),e=QA(e,t,1),t=tn(),e!==null&&(qc(e,1,t),pn(e,t));break}}e=e.return}}function MQ(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&r,Er===t&&(Pr&r)===r&&(wr===4||wr===3&&(Pr&130023424)===Pr&&500>cr()-yw?Ni(t,0):ww|=r),pn(t,e)}function XI(t,e){e===0&&(t.mode&1?(e=Lu,Lu<<=1,!(Lu&130023424)&&(Lu=4194304)):e=1);var r=tn();t=Rs(t,e),t!==null&&(qc(t,e,r),pn(t,r))}function OQ(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),XI(t,r)}function HQ(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ge(314))}n!==null&&n.delete(e),XI(t,r)}var JI;JI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)cn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return cn=!1,FQ(t,e,r);cn=!!(t.flags&131072)}else cn=!1,Wt&&e.flags&1048576&&tI(e,wh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Pd(t,e),t=e.pendingProps;var s=oa(e,Jr.current);Yo(e,r),s=dw(null,e,n,t,s,r);var A=hw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(n)?(A=!0,ph(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ow(e),s.updater=Bf,e.stateNode=s,s._reactInternals=e,gm(e,n,t,r),e=wm(null,e,n,!0,A,r)):(e.tag=0,Wt&&A&&ew(e),Zr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Pd(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=KQ(n),t=Kn(n,t),s){case 0:e=mm(null,e,n,t,r);break e;case 1:e=Ev(null,e,n,t,r);break e;case 11:e=_v(null,e,n,t,r);break e;case 14:e=Iv(null,e,n,Kn(n.type,t),r);break e}throw Error(ge(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),mm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),Ev(t,e,n,s,r);case 3:e:{if(NI(e),t===null)throw Error(ge(387));n=e.pendingProps,A=e.memoizedState,s=A.element,oI(t,e),vh(e,n,null,r);var i=e.memoizedState;if(n=i.element,A.isDehydrated)if(A={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=ua(Error(ge(423)),e),e=Tv(t,e,n,r,s);break e}else if(n!==s){s=ua(Error(ge(424)),e),e=Tv(t,e,n,r,s);break e}else for(vn=UA(e.stateNode.containerInfo.firstChild),bn=e,Wt=!0,zn=null,r=AI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(aa(),n===s){e=Ds(t,e,r);break e}Zr(t,e,n,r)}e=e.child}return e;case 5:return aI(e),t===null&&dm(e),n=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,om(n,s)?i=null:A!==null&&om(n,A)&&(e.flags|=32),QI(t,e),Zr(t,e,i,r),e.child;case 6:return t===null&&dm(e),null;case 13:return RI(t,e,r);case 4:return aw(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=la(e,null,n,r):Zr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),_v(t,e,n,s,r);case 7:return Zr(t,e,e.pendingProps,r),e.child;case 8:return Zr(t,e,e.pendingProps.children,r),e.child;case 12:return Zr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,jt(yh,n._currentValue),n._currentValue=i,A!==null)if(Xn(A.value,i)){if(A.children===s.children&&!fn.current){e=Ds(t,e,r);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var a=A.dependencies;if(a!==null){i=A.child;for(var o=a.firstContext;o!==null;){if(o.context===n){if(A.tag===1){o=Ss(-1,r&-r),o.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o}}A.lanes|=r,o=A.alternate,o!==null&&(o.lanes|=r),hm(A.return,r,e),a.lanes|=r;break}o=o.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(ge(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),hm(i,r,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}Zr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Yo(e,r),s=jn(s),n=n(s),e.flags|=1,Zr(t,e,n,r),e.child;case 14:return n=e.type,s=Kn(n,e.pendingProps),s=Kn(n.type,s),Iv(t,e,n,s,r);case 15:return SI(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),Pd(t,e),e.tag=1,gn(n)?(t=!0,ph(e)):t=!1,Yo(e,r),TI(e,n,s),gm(e,n,s,r),wm(null,e,n,!0,t,r);case 19:return DI(t,e,r);case 22:return UI(t,e,r)}throw Error(ge(156,e.tag))};function YI(t,e){return __(t,e)}function VQ(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,r,n){return new VQ(t,e,r,n)}function bw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KQ(t){if(typeof t=="function")return bw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H0)return 11;if(t===V0)return 14}return 2}function DA(t,e){var r=t.alternate;return r===null?(r=Nn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Md(t,e,r,n,s,A){var i=2;if(n=t,typeof t=="function")bw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case No:return Ri(r.children,s,A,e);case O0:i=8,s|=8;break;case jp:return t=Nn(12,r,e,s|2),t.elementType=jp,t.lanes=A,t;case Mp:return t=Nn(13,r,e,s),t.elementType=Mp,t.lanes=A,t;case Op:return t=Nn(19,r,e,s),t.elementType=Op,t.lanes=A,t;case a_:return _f(r,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i_:i=10;break e;case o_:i=9;break e;case H0:i=11;break e;case V0:i=14;break e;case aA:i=16,n=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=Nn(i,r,e,s),e.elementType=t,e.type=n,e.lanes=A,e}function Ri(t,e,r,n){return t=Nn(7,t,n,e),t.lanes=r,t}function _f(t,e,r,n){return t=Nn(22,t,n,e),t.elementType=a_,t.lanes=r,t.stateNode={isHidden:!1},t}function Yg(t,e,r){return t=Nn(6,t,null,e),t.lanes=r,t}function Zg(t,e,r){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GQ(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qg(0),this.expirationTimes=Qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cw(t,e,r,n,s,A,i,a,o){return t=new GQ(t,e,r,a,o),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Nn(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ow(A),t}function zQ(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ZI(t){if(!t)return GA;t=t._reactInternals;e:{if(so(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var r=t.type;if(gn(r))return Z_(t,r,e)}return e}function eE(t,e,r,n,s,A,i,a,o){return t=Cw(r,n,!0,t,s,A,i,a,o),t.context=ZI(null),r=t.current,n=tn(),s=RA(r),A=Ss(n,s),A.callback=e??null,QA(r,A,s),t.current.lanes=s,qc(t,s,n),pn(t,n),t}function If(t,e,r,n){var s=e.current,A=tn(),i=RA(s);return r=ZI(r),e.context===null?e.context=r:e.pendingContext=r,e=Ss(A,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=QA(s,e,i),t!==null&&(Wn(t,s,i,A),Nd(t,s,i)),i}function Fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function _w(t,e){Lv(t,e),(t=t.alternate)&&Lv(t,e)}function $Q(){return null}var tE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Iw(t){this._internalRoot=t}Ef.prototype.render=Iw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));If(t,e,null,null)};Ef.prototype.unmount=Iw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ki(function(){If(null,t,null,null)}),e[Ns]=null}};function Ef(t){this._internalRoot=t}Ef.prototype.unstable_scheduleHydration=function(t){if(t){var e=U_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<uA.length&&e!==0&&e<uA[r].priority;r++);uA.splice(r,0,t),r===0&&N_(t)}};function Ew(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jv(){}function WQ(t,e,r,n,s){if(s){if(typeof n=="function"){var A=n;n=function(){var c=Fh(i);A.call(c)}}var i=eE(e,n,t,0,null,!1,!1,"",jv);return t._reactRootContainer=i,t[Ns]=i.current,xc(t.nodeType===8?t.parentNode:t),Ki(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=Fh(o);a.call(c)}}var o=Cw(t,0,!1,null,null,!1,!1,"",jv);return t._reactRootContainer=o,t[Ns]=o.current,xc(t.nodeType===8?t.parentNode:t),Ki(function(){If(e,o,r,n)}),o}function Ff(t,e,r,n,s){var A=r._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var a=s;s=function(){var o=Fh(i);a.call(o)}}If(e,i,t,s)}else i=WQ(r,e,t,s,n);return Fh(i)}k_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Fl(e.pendingLanes);r!==0&&(z0(e,r|1),pn(e,cr()),!(bt&6)&&(da=cr()+500,Ai()))}break;case 13:Ki(function(){var n=Rs(t,1);if(n!==null){var s=tn();Wn(n,t,1,s)}}),_w(t,1)}};$0=function(t){if(t.tag===13){var e=Rs(t,134217728);if(e!==null){var r=tn();Wn(e,t,134217728,r)}_w(t,134217728)}};S_=function(t){if(t.tag===13){var e=RA(t),r=Rs(t,e);if(r!==null){var n=tn();Wn(r,t,e,n)}_w(t,e)}};U_=function(){return kt};Q_=function(t,e){var r=kt;try{return kt=t,e()}finally{kt=r}};Jp=function(t,e,r){switch(e){case"input":if(Kp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=yf(n);if(!s)throw Error(ge(90));c_(n),Kp(n,s)}}}break;case"textarea":d_(t,r);break;case"select":e=r.value,e!=null&&Wo(t,!!r.multiple,e,!1)}};y_=xw;x_=Ki;var qQ={usingClientEntryPoint:!1,Events:[Jc,Lo,yf,m_,w_,xw]},fl={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XQ={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b_(t),t===null?null:t.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||$Q,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{gf=qu.inject(XQ),os=qu}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qQ;En.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ew(e))throw Error(ge(200));return zQ(t,e,null,r)};En.createRoot=function(t,e){if(!Ew(t))throw Error(ge(299));var r=!1,n="",s=tE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cw(t,1,!1,null,null,r,!1,n,s),t[Ns]=e.current,xc(t.nodeType===8?t.parentNode:t),new Iw(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=b_(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return Ki(t)};En.hydrate=function(t,e,r){if(!Tf(e))throw Error(ge(200));return Ff(null,t,e,!0,r)};En.hydrateRoot=function(t,e,r){if(!Ew(t))throw Error(ge(405));var n=r!=null&&r.hydratedSources||null,s=!1,A="",i=tE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(A=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=eE(e,null,t,1,r??null,s,!1,A,i),t[Ns]=e.current,xc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ef(e)};En.render=function(t,e,r){if(!Tf(e))throw Error(ge(200));return Ff(null,t,e,!1,r)};En.unmountComponentAtNode=function(t){if(!Tf(t))throw Error(ge(40));return t._reactRootContainer?(Ki(function(){Ff(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};En.unstable_batchedUpdates=xw;En.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Tf(r))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return Ff(t,e,r,!1,n)};En.version="18.3.1-next-f1338f8080-20240426";function rE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rE)}catch(t){console.error(t)}}rE(),r_.exports=En;var JQ=r_.exports,Mv=JQ;Pp.createRoot=Mv.createRoot,Pp.hydrateRoot=Mv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fc.apply(this,arguments)}var BA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(BA||(BA={}));const Ov="popstate";function YQ(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:a="",hash:o=""}=Ao(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),km("",{pathname:i,search:a,hash:o},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(s,A){let i=s.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let o=s.location.href,c=o.indexOf("#");a=c===-1?o:o.slice(0,c)}return a+"#"+(typeof A=="string"?A:kh(A))}function n(s,A){kf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return e2(e,r,n,t)}function rr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZQ(){return Math.random().toString(36).substr(2,8)}function Hv(t,e){return{usr:t.state,key:t.key,idx:e}}function km(t,e,r,n){return r===void 0&&(r=null),Fc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ao(e):e,{state:r,key:e&&e.key||n||ZQ()})}function kh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ao(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function e2(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:A=!1}=n,i=s.history,a=BA.Pop,o=null,c=d();c==null&&(c=0,i.replaceState(Fc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){a=BA.Pop;let I=d(),b=I==null?null:I-c;c=I,o&&o({action:a,location:y.location,delta:b})}function f(I,b){a=BA.Push;let w=km(y.location,I,b);r&&r(w,I),c=d()+1;let C=Hv(w,c),F=y.createHref(w);try{i.pushState(C,"",F)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(F)}A&&o&&o({action:a,location:y.location,delta:1})}function m(I,b){a=BA.Replace;let w=km(y.location,I,b);r&&r(w,I),c=d();let C=Hv(w,c),F=y.createHref(w);i.replaceState(C,"",F),A&&o&&o({action:a,location:y.location,delta:0})}function v(I){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof I=="string"?I:kh(I);return w=w.replace(/ $/,"%20"),rr(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return a},get location(){return t(s,i)},listen(I){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(Ov,h),o=I,()=>{s.removeEventListener(Ov,h),o=null}},createHref(I){return e(s,I)},createURL:v,encodeLocation(I){let b=v(I);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(I){return i.go(I)}};return y}var Vv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vv||(Vv={}));function t2(t,e,r){return r===void 0&&(r="/"),r2(t,e,r)}function r2(t,e,r,n){let s=typeof e=="string"?Ao(e):e,A=ha(s.pathname||"/",r);if(A==null)return null;let i=nE(t);n2(i);let a=null;for(let o=0;a==null&&o<i.length;++o){let c=f2(A);a=d2(i[o],c)}return a}function nE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(A,i,a)=>{let o={relativePath:a===void 0?A.path||"":a,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};o.relativePath.startsWith("/")&&(rr(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=PA([n,o.relativePath]),d=r.concat(o);A.children&&A.children.length>0&&(rr(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),nE(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:c2(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var a;if(A.path===""||!((a=A.path)!=null&&a.includes("?")))s(A,i);else for(let o of sE(A.path))s(A,i,o)}),e}function sE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return s?[A,""]:[A];let i=sE(n.join("/")),a=[];return a.push(...i.map(o=>o===""?A:[A,o].join("/"))),s&&a.push(...i),a.map(o=>t.startsWith("/")&&o===""?"/":o)}function n2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:u2(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const s2=/^:[\w-]+$/,A2=3,i2=2,o2=1,a2=10,l2=-2,Kv=t=>t==="*";function c2(t,e){let r=t.split("/"),n=r.length;return r.some(Kv)&&(n+=l2),e&&(n+=i2),r.filter(s=>!Kv(s)).reduce((s,A)=>s+(s2.test(A)?A2:A===""?o2:a2),n)}function u2(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function d2(t,e,r){let{routesMeta:n}=t,s={},A="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],c=a===n.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=Sm({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d),f=o.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:PA([A,h.pathname]),pathnameBase:y2(PA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=PA([A,h.pathnameBase]))}return i}function Sm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=h2(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let y=a[h]||"";i=A.slice(0,A.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function h2(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),kf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(n.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function f2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ha(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const g2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,p2=t=>g2.test(t);function m2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Ao(t):t,A;if(r)if(p2(r))A=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),kf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?A=Gv(r.substring(1),"/"):A=Gv(r,e)}else A=e;return{pathname:A,search:x2(n),hash:v2(s)}}function Gv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ep(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Tw(t,e){let r=w2(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Fw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Ao(t):(s=Fc({},t),rr(!s.pathname||!s.pathname.includes("?"),ep("?","pathname","search",s)),rr(!s.pathname||!s.pathname.includes("#"),ep("#","pathname","hash",s)),rr(!s.search||!s.search.includes("#"),ep("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,a;if(i==null)a=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let o=m2(s,a),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||d)&&(o.pathname+="/"),o}const PA=t=>t.join("/").replace(/\/\/+/g,"/"),y2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function B2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AE=["post","put","patch","delete"];new Set(AE);const b2=["get",...AE];new Set(b2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kc.apply(this,arguments)}const Sf=k.createContext(null),iE=k.createContext(null),Vs=k.createContext(null),Uf=k.createContext(null),Ks=k.createContext({outlet:null,matches:[],isDataRoute:!1}),oE=k.createContext(null);function C2(t,e){let{relative:r}=e===void 0?{}:e;Ra()||rr(!1);let{basename:n,navigator:s}=k.useContext(Vs),{hash:A,pathname:i,search:a}=Qf(t,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:PA([n,i])),s.createHref({pathname:o,search:a,hash:A})}function Ra(){return k.useContext(Uf)!=null}function ii(){return Ra()||rr(!1),k.useContext(Uf).location}function aE(t){k.useContext(Vs).static||k.useLayoutEffect(t)}function Da(){let{isDataRoute:t}=k.useContext(Ks);return t?j2():_2()}function _2(){Ra()||rr(!1);let t=k.useContext(Sf),{basename:e,future:r,navigator:n}=k.useContext(Vs),{matches:s}=k.useContext(Ks),{pathname:A}=ii(),i=JSON.stringify(Tw(s,r.v7_relativeSplatPath)),a=k.useRef(!1);return aE(()=>{a.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=Fw(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:PA([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,A,t])}const I2=k.createContext(null);function E2(t){let e=k.useContext(Ks).outlet;return e&&k.createElement(I2.Provider,{value:t},e)}function Qf(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext(Vs),{matches:s}=k.useContext(Ks),{pathname:A}=ii(),i=JSON.stringify(Tw(s,n.v7_relativeSplatPath));return k.useMemo(()=>Fw(t,JSON.parse(i),A,r==="path"),[t,i,A,r])}function T2(t,e){return F2(t,e)}function F2(t,e,r,n){Ra()||rr(!1);let{navigator:s}=k.useContext(Vs),{matches:A}=k.useContext(Ks),i=A[A.length-1],a=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c=ii(),d;if(e){var h;let I=typeof e=="string"?Ao(e):e;o==="/"||(h=I.pathname)!=null&&h.startsWith(o)||rr(!1),d=I}else d=c;let f=d.pathname||"/",m=f;if(o!=="/"){let I=o.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let v=t2(t,{pathname:m}),y=N2(v&&v.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:PA([o,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?o:PA([o,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),A,r,n);return e&&y?k.createElement(Uf.Provider,{value:{location:kc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:BA.Pop}},y):y}function k2(){let t=L2(),e=B2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:s},r):null,null)}const S2=k.createElement(k2,null);class U2 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement(Ks.Provider,{value:this.props.routeContext},k.createElement(oE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q2(t){let{routeContext:e,match:r,children:n}=t,s=k.useContext(Sf);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(Ks.Provider,{value:e},n)}function N2(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var A;if(!r)return null;if(r.errors)t=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||rr(!1),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,v=!1,y=null,I=null;r&&(m=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||S2,o&&(c<0&&f===0?(M2("route-fallback"),v=!0,I=null):c===f&&(v=!0,I=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,f+1)),w=()=>{let C;return m?C=y:v?C=I:h.route.Component?C=k.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=d,k.createElement(Q2,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:C})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(U2,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var lE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lE||{}),cE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cE||{});function R2(t){let e=k.useContext(Sf);return e||rr(!1),e}function D2(t){let e=k.useContext(iE);return e||rr(!1),e}function P2(t){let e=k.useContext(Ks);return e||rr(!1),e}function uE(t){let e=P2(),r=e.matches[e.matches.length-1];return r.route.id||rr(!1),r.route.id}function L2(){var t;let e=k.useContext(oE),r=D2(),n=uE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function j2(){let{router:t}=R2(lE.UseNavigateStable),e=uE(cE.UseNavigateStable),r=k.useRef(!1);return aE(()=>{r.current=!0}),k.useCallback(function(s,A){A===void 0&&(A={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,kc({fromRouteId:e},A)))},[t,e])}const zv={};function M2(t,e,r){zv[t]||(zv[t]=!0)}function O2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Sh(t){let{to:e,replace:r,state:n,relative:s}=t;Ra()||rr(!1);let{future:A,static:i}=k.useContext(Vs),{matches:a}=k.useContext(Ks),{pathname:o}=ii(),c=Da(),d=Fw(e,Tw(a,A.v7_relativeSplatPath),o,s==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function H2(t){return E2(t.context)}function An(t){rr(!1)}function V2(t){let{basename:e="/",children:r=null,location:n,navigationType:s=BA.Pop,navigator:A,static:i=!1,future:a}=t;Ra()&&rr(!1);let o=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:o,navigator:A,static:i,future:kc({v7_relativeSplatPath:!1},a)}),[o,a,A,i]);typeof n=="string"&&(n=Ao(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=n,y=k.useMemo(()=>{let I=ha(d,o);return I==null?null:{location:{pathname:I,search:h,hash:f,state:m,key:v},navigationType:s}},[o,d,h,f,m,v,s]);return y==null?null:k.createElement(Vs.Provider,{value:c},k.createElement(Uf.Provider,{children:r,value:y}))}function K2(t){let{children:e,location:r}=t;return T2(Um(e),r)}new Promise(()=>{});function Um(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,s)=>{if(!k.isValidElement(n))return;let A=[...e,s];if(n.type===k.Fragment){r.push.apply(r,Um(n.props.children,A));return}n.type!==An&&rr(!1),!n.props.index||!n.props.children||rr(!1);let i={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Um(n.props.children,A)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uh(){return Uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uh.apply(this,arguments)}function dE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,A;for(A=0;A<n.length;A++)s=n[A],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function G2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function z2(t,e){return t.button===0&&(!e||e==="_self")&&!G2(t)}function Qm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function $2(t,e){let r=Qm(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(A=>{r.append(s,A)})}),r}const W2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],q2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],X2="6";try{window.__reactRouterVersion=X2}catch{}const J2=k.createContext({isTransitioning:!1}),Y2="startTransition",$v=MS[Y2];function Z2(t){let{basename:e,children:r,future:n,window:s}=t,A=k.useRef();A.current==null&&(A.current=YQ({window:s,v5Compat:!0}));let i=A.current,[a,o]=k.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=k.useCallback(h=>{c&&$v?$v(()=>o(h)):o(h)},[o,c]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.useEffect(()=>O2(n),[n]),k.createElement(V2,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const eN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rN=k.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:A,replace:i,state:a,target:o,to:c,preventScrollReset:d,viewTransition:h}=e,f=dE(e,W2),{basename:m}=k.useContext(Vs),v,y=!1;if(typeof c=="string"&&tN.test(c)&&(v=c,eN))try{let C=new URL(window.location.href),F=c.startsWith("//")?new URL(C.protocol+c):new URL(c),U=ha(F.pathname,m);F.origin===C.origin&&U!=null?c=U+F.search+F.hash:y=!0}catch{}let I=C2(c,{relative:s}),b=sN(c,{replace:i,state:a,target:o,preventScrollReset:d,relative:s,viewTransition:h});function w(C){n&&n(C),C.defaultPrevented||b(C)}return k.createElement("a",Uh({},f,{href:v||I,onClick:y||A?n:w,ref:r,target:o}))}),bA=k.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:A="",end:i=!1,style:a,to:o,viewTransition:c,children:d}=e,h=dE(e,q2),f=Qf(o,{relative:h.relative}),m=ii(),v=k.useContext(iE),{navigator:y,basename:I}=k.useContext(Vs),b=v!=null&&iN(f)&&c===!0,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,C=m.pathname,F=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(C=C.toLowerCase(),F=F?F.toLowerCase():null,w=w.toLowerCase()),F&&I&&(F=ha(F,I)||F);const U=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=C===w||!i&&C.startsWith(w)&&C.charAt(U)==="/",x=F!=null&&(F===w||!i&&F.startsWith(w)&&F.charAt(w.length)==="/"),B={isActive:N,isPending:x,isTransitioning:b},_=N?n:void 0,S;typeof A=="function"?S=A(B):S=[A,N?"active":null,x?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(B):a;return k.createElement(rN,Uh({},h,{"aria-current":_,className:S,ref:r,style:R,to:o,viewTransition:c}),typeof d=="function"?d(B):d)});var Nm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Nm||(Nm={}));var Wv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Wv||(Wv={}));function nN(t){let e=k.useContext(Sf);return e||rr(!1),e}function sN(t,e){let{target:r,replace:n,state:s,preventScrollReset:A,relative:i,viewTransition:a}=e===void 0?{}:e,o=Da(),c=ii(),d=Qf(t,{relative:i});return k.useCallback(h=>{if(z2(h,r)){h.preventDefault();let f=n!==void 0?n:kh(c)===kh(d);o(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:a})}},[c,o,d,n,s,r,t,A,i,a])}function AN(t){let e=k.useRef(Qm(t)),r=k.useRef(!1),n=ii(),s=k.useMemo(()=>$2(n.search,r.current?null:e.current),[n.search]),A=Da(),i=k.useCallback((a,o)=>{const c=Qm(typeof a=="function"?a(s):a);r.current=!0,A("?"+c,o)},[A,s]);return[s,i]}function iN(t,e){e===void 0&&(e={});let r=k.useContext(J2);r==null&&rr(!1);let{basename:n}=nN(Nm.useViewTransitionState),s=Qf(t,{relative:e.relative});if(!r.isTransitioning)return!1;let A=ha(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=ha(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Sm(s.pathname,i)!=null||Sm(s.pathname,A)!=null}var Ae=(t=>(t.First="1 ",t.Second="2 ",t))(Ae||{}),ut=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ut||{});const Et=["","","","",""],on={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},qv=["","","/","","","",""," "],Qh=[{shift:Ae.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:Ae.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:Ae.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:Ae.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:Ae.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:Ae.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:Ae.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:Ae.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:Ae.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:Ae.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:Ae.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:Ae.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:Ae.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:Ae.Second,period:6,start:"18:50",end:"19:35",day:"default"}],oN=[{shift:Ae.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:Ae.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:Ae.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:Ae.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:Ae.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:Ae.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:Ae.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:Ae.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:Ae.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:Ae.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:Ae.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:Ae.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:Ae.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:Ae.Second,period:6,start:"17:00",end:"17:35",day:"default"}],gl=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),hE=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:gl(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:gl(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:gl(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:gl(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:gl(78,86),order:5}],en={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:Ae.First,studentsCount:25},{id:"c2",name:"6",shift:Ae.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:Qh,dutyZones:hE,dutySchedule:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",bellPresets:[{id:"preset_normal",name:" (45 )",bells:Qh},{id:"preset_short",name:" (35 )",bells:oN}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]}}},aN="modulepreload",lN=function(t){return"/zamenygymn/"+t},Xv={},cN=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(o=>{if(o=lN(o),o in Xv)return;Xv[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":aN,c||(h.as="script"),h.crossOrigin="",h.href=o,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function A(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&A(a.reason);return e().catch(A)})};var Jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},uN=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[r++];e[n++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[r++],i=t[r++],a=t[r++],o=((s&7)<<18|(A&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const A=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},gE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,a=i?t[s+1]:0,o=s+2<t.length,c=o?t[s+2]:0,d=A>>2,h=(A&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;o||(m=64,i||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const A=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,A==null||a==null||c==null||h==null)throw new dN;const f=A<<2|a>>4;if(n.push(f),c!==64){const m=a<<4&240|c>>2;if(n.push(m),h!==64){const v=c<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hN=function(t){const e=fE(t);return gE.encodeByteArray(e,!0)},Nh=function(t){return hN(t).replace(/\./g,"")},pE=function(t){try{return gE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=()=>fN().__FIREBASE_DEFAULTS__,pN=()=>{if(typeof process>"u"||typeof Jv>"u")return;const t=Jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pE(t[1]);return e&&JSON.parse(e)},Nf=()=>{try{return gN()||pN()||mN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mE=t=>{var e,r;return(r=(e=Nf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},wN=t=>{const e=mE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},wE=()=>{var t;return(t=Nf())===null||t===void 0?void 0:t.config},yE=t=>{var e;return(e=Nf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nh(JSON.stringify(r)),Nh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yr())}function BN(){var t;const e=(t=Nf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _N(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IN(){const t=yr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xE(){return!BN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vE(){try{return typeof indexedDB=="object"}catch{return!1}}function EN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="FirebaseError";class Gs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=TN,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?FN(A,n):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Gs(s,a,n)}}function FN(t,e){return t.replace(kN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const kN=/\{\$([^}]+)}/g;function SN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zA(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const A=t[s],i=e[s];if(Yv(A)&&Yv(i)){if(!zA(A,i))return!1}else if(A!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Yv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,A]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Ul(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function UN(t,e){const r=new QN(t,e);return r.subscribe.bind(r)}class QN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");NN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=tp),s.error===void 0&&(s.error=tp),s.complete===void 0&&(s.complete=tp);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Gi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new yN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PN(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const A=this.getOrInitializeService({instanceIdentifier:s});n.resolve(A)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[A,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(A);n===a&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),A=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:DN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DN(t){return t===bi?void 0:t}function PN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new RN(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const jN={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},MN=gt.INFO,ON={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},HN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=ON[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let kw=class{constructor(e){this.name=e,this._logLevel=MN,this._logHandler=HN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}};const VN=(t,e)=>e.some(r=>t instanceof r);let Zv,eB;function KN(){return Zv||(Zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GN(){return eB||(eB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BE=new WeakMap,Rm=new WeakMap,bE=new WeakMap,rp=new WeakMap,Sw=new WeakMap;function zN(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{r(LA(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&BE.set(r,t)}).catch(()=>{}),Sw.set(e,t),e}function $N(t){if(Rm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});Rm.set(t,e)}let Dm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Rm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return LA(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WN(t){Dm=t(Dm)}function qN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(np(this),e,...r);return bE.set(n,e.sort?e.sort():[e]),LA(n)}:GN().includes(t)?function(...e){return t.apply(np(this),e),LA(BE.get(this))}:function(...e){return LA(t.apply(np(this),e))}}function XN(t){return typeof t=="function"?qN(t):(t instanceof IDBTransaction&&$N(t),VN(t,KN())?new Proxy(t,Dm):t)}function LA(t){if(t instanceof IDBRequest)return zN(t);if(rp.has(t))return rp.get(t);const e=XN(t);return e!==t&&(rp.set(t,e),Sw.set(e,t)),e}const np=t=>Sw.get(t);function JN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),a=LA(i);return n&&i.addEventListener("upgradeneeded",o=>{n(LA(i.result),o.oldVersion,o.newVersion,LA(i.transaction),o)}),r&&i.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{A&&o.addEventListener("close",()=>A()),s&&o.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const YN=["get","getKey","getAll","getAllKeys","count"],ZN=["put","add","delete","clear"],sp=new Map;function tB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sp.get(e))return sp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=ZN.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||YN.includes(r)))return;const A=async function(i,...a){const o=this.transaction(i,s?"readwrite":"readonly");let c=o.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),s&&o.done]))[0]};return sp.set(e,A),A}WN(t=>({...t,get:(e,r,n)=>tB(e,r)||t.get(e,r,n),has:(e,r)=>!!tB(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(tR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function tR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",rB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new kw("@firebase/app"),rR="@firebase/app-compat",nR="@firebase/analytics-compat",sR="@firebase/analytics",AR="@firebase/app-check-compat",iR="@firebase/app-check",oR="@firebase/auth",aR="@firebase/auth-compat",lR="@firebase/database",cR="@firebase/data-connect",uR="@firebase/database-compat",dR="@firebase/functions",hR="@firebase/functions-compat",fR="@firebase/installations",gR="@firebase/installations-compat",pR="@firebase/messaging",mR="@firebase/messaging-compat",wR="@firebase/performance",yR="@firebase/performance-compat",xR="@firebase/remote-config",vR="@firebase/remote-config-compat",BR="@firebase/storage",bR="@firebase/storage-compat",CR="@firebase/firestore",_R="@firebase/vertexai-preview",IR="@firebase/firestore-compat",ER="firebase",TR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="[DEFAULT]",FR={[Pm]:"fire-core",[rR]:"fire-core-compat",[sR]:"fire-analytics",[nR]:"fire-analytics-compat",[iR]:"fire-app-check",[AR]:"fire-app-check-compat",[oR]:"fire-auth",[aR]:"fire-auth-compat",[lR]:"fire-rtdb",[cR]:"fire-data-connect",[uR]:"fire-rtdb-compat",[dR]:"fire-fn",[hR]:"fire-fn-compat",[fR]:"fire-iid",[gR]:"fire-iid-compat",[pR]:"fire-fcm",[mR]:"fire-fcm-compat",[wR]:"fire-perf",[yR]:"fire-perf-compat",[xR]:"fire-rc",[vR]:"fire-rc-compat",[BR]:"fire-gcs",[bR]:"fire-gcs-compat",[CR]:"fire-fst",[IR]:"fire-fst-compat",[_R]:"fire-vertex","fire-js":"fire-js",[ER]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Map,kR=new Map,Lm=new Map;function nB(t,e){try{t.container.addComponent(e)}catch(r){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function fa(t){const e=t.name;if(Lm.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,t);for(const r of Sc.values())nB(r,t);for(const r of kR.values())nB(r,t);return!0}function tu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function SR(t,e,r=Rh){tu(t,e).clearInstance(r)}function Is(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jA=new Zc("app","Firebase",UR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=TR;function CE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Rh,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw jA.create("bad-app-name",{appName:String(s)});if(r||(r=wE()),!r)throw jA.create("no-options");const A=Sc.get(s);if(A){if(zA(r,A.options)&&zA(n,A.config))return A;throw jA.create("duplicate-app",{appName:s})}const i=new LN(s);for(const o of Lm.values())i.addComponent(o);const a=new QR(r,n,i);return Sc.set(s,a),a}function Uw(t=Rh){const e=Sc.get(t);if(!e&&t===Rh&&wE())return CE();if(!e)throw jA.create("no-app",{appName:t});return e}function NR(){return Array.from(Sc.values())}function MA(t,e,r){var n;let s=(n=FR[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const a=[`Unable to register library "${s}" with version "${e}":`];A&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(a.join(" "));return}fa(new Gi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebase-heartbeat-database",DR=1,Uc="firebase-heartbeat-store";let Ap=null;function _E(){return Ap||(Ap=JN(RR,DR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uc)}catch(r){console.warn(r)}}}}).catch(t=>{throw jA.create("idb-open",{originalErrorMessage:t.message})})),Ap}async function PR(t){try{const r=(await _E()).transaction(Uc),n=await r.objectStore(Uc).get(IE(t));return await r.done,n}catch(e){if(e instanceof Gs)Ps.warn(e.message);else{const r=jA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(r.message)}}}async function sB(t,e){try{const n=(await _E()).transaction(Uc,"readwrite");await n.objectStore(Uc).put(e,IE(t)),await n.done}catch(r){if(r instanceof Gs)Ps.warn(r.message);else{const n=jA.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ps.warn(n.message)}}}function IE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=1024,jR=30*24*60*60*1e3;class MR{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HR(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=AB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=jR}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ps.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=AB(),{heartbeatsToSend:n,unsentEntries:s}=OR(this._heartbeatsCache.heartbeats),A=Nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(r){return Ps.warn(r),""}}}function AB(){return new Date().toISOString().substring(0,10)}function OR(t,e=LR){const r=[];let n=t.slice();for(const s of t){const A=r.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),iB(r)>e){A.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),iB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class HR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vE()?EN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await PR(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return sB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return sB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function iB(t){return Nh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){fa(new Gi("platform-logger",e=>new eR(e),"PRIVATE")),fa(new Gi("heartbeat",e=>new MR(e),"PRIVATE")),MA(Pm,rB,t),MA(Pm,rB,"esm2017"),MA("fire-js","")}VR("");var KR="firebase",GR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */MA(KR,GR,"app");var oB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Di,EE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,B){function _(){}_.prototype=B.prototype,x.D=B.prototype,x.prototype=new _,x.prototype.constructor=x,x.C=function(S,R,P){for(var E=Array(arguments.length-2),We=2;We<arguments.length;We++)E[We-2]=arguments[We];return B.prototype[R].apply(S,E)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,B,_){_||(_=0);var S=Array(16);if(typeof B=="string")for(var R=0;16>R;++R)S[R]=B.charCodeAt(_++)|B.charCodeAt(_++)<<8|B.charCodeAt(_++)<<16|B.charCodeAt(_++)<<24;else for(R=0;16>R;++R)S[R]=B[_++]|B[_++]<<8|B[_++]<<16|B[_++]<<24;B=x.g[0],_=x.g[1],R=x.g[2];var P=x.g[3],E=B+(P^_&(R^P))+S[0]+3614090360&4294967295;B=_+(E<<7&4294967295|E>>>25),E=P+(R^B&(_^R))+S[1]+3905402710&4294967295,P=B+(E<<12&4294967295|E>>>20),E=R+(_^P&(B^_))+S[2]+606105819&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(B^R&(P^B))+S[3]+3250441966&4294967295,_=R+(E<<22&4294967295|E>>>10),E=B+(P^_&(R^P))+S[4]+4118548399&4294967295,B=_+(E<<7&4294967295|E>>>25),E=P+(R^B&(_^R))+S[5]+1200080426&4294967295,P=B+(E<<12&4294967295|E>>>20),E=R+(_^P&(B^_))+S[6]+2821735955&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(B^R&(P^B))+S[7]+4249261313&4294967295,_=R+(E<<22&4294967295|E>>>10),E=B+(P^_&(R^P))+S[8]+1770035416&4294967295,B=_+(E<<7&4294967295|E>>>25),E=P+(R^B&(_^R))+S[9]+2336552879&4294967295,P=B+(E<<12&4294967295|E>>>20),E=R+(_^P&(B^_))+S[10]+4294925233&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(B^R&(P^B))+S[11]+2304563134&4294967295,_=R+(E<<22&4294967295|E>>>10),E=B+(P^_&(R^P))+S[12]+1804603682&4294967295,B=_+(E<<7&4294967295|E>>>25),E=P+(R^B&(_^R))+S[13]+4254626195&4294967295,P=B+(E<<12&4294967295|E>>>20),E=R+(_^P&(B^_))+S[14]+2792965006&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(B^R&(P^B))+S[15]+1236535329&4294967295,_=R+(E<<22&4294967295|E>>>10),E=B+(R^P&(_^R))+S[1]+4129170786&4294967295,B=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(B^_))+S[6]+3225465664&4294967295,P=B+(E<<9&4294967295|E>>>23),E=R+(B^_&(P^B))+S[11]+643717713&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^B&(R^P))+S[0]+3921069994&4294967295,_=R+(E<<20&4294967295|E>>>12),E=B+(R^P&(_^R))+S[5]+3593408605&4294967295,B=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(B^_))+S[10]+38016083&4294967295,P=B+(E<<9&4294967295|E>>>23),E=R+(B^_&(P^B))+S[15]+3634488961&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^B&(R^P))+S[4]+3889429448&4294967295,_=R+(E<<20&4294967295|E>>>12),E=B+(R^P&(_^R))+S[9]+568446438&4294967295,B=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(B^_))+S[14]+3275163606&4294967295,P=B+(E<<9&4294967295|E>>>23),E=R+(B^_&(P^B))+S[3]+4107603335&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^B&(R^P))+S[8]+1163531501&4294967295,_=R+(E<<20&4294967295|E>>>12),E=B+(R^P&(_^R))+S[13]+2850285829&4294967295,B=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(B^_))+S[2]+4243563512&4294967295,P=B+(E<<9&4294967295|E>>>23),E=R+(B^_&(P^B))+S[7]+1735328473&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^B&(R^P))+S[12]+2368359562&4294967295,_=R+(E<<20&4294967295|E>>>12),E=B+(_^R^P)+S[5]+4294588738&4294967295,B=_+(E<<4&4294967295|E>>>28),E=P+(B^_^R)+S[8]+2272392833&4294967295,P=B+(E<<11&4294967295|E>>>21),E=R+(P^B^_)+S[11]+1839030562&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^B)+S[14]+4259657740&4294967295,_=R+(E<<23&4294967295|E>>>9),E=B+(_^R^P)+S[1]+2763975236&4294967295,B=_+(E<<4&4294967295|E>>>28),E=P+(B^_^R)+S[4]+1272893353&4294967295,P=B+(E<<11&4294967295|E>>>21),E=R+(P^B^_)+S[7]+4139469664&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^B)+S[10]+3200236656&4294967295,_=R+(E<<23&4294967295|E>>>9),E=B+(_^R^P)+S[13]+681279174&4294967295,B=_+(E<<4&4294967295|E>>>28),E=P+(B^_^R)+S[0]+3936430074&4294967295,P=B+(E<<11&4294967295|E>>>21),E=R+(P^B^_)+S[3]+3572445317&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^B)+S[6]+76029189&4294967295,_=R+(E<<23&4294967295|E>>>9),E=B+(_^R^P)+S[9]+3654602809&4294967295,B=_+(E<<4&4294967295|E>>>28),E=P+(B^_^R)+S[12]+3873151461&4294967295,P=B+(E<<11&4294967295|E>>>21),E=R+(P^B^_)+S[15]+530742520&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^B)+S[2]+3299628645&4294967295,_=R+(E<<23&4294967295|E>>>9),E=B+(R^(_|~P))+S[0]+4096336452&4294967295,B=_+(E<<6&4294967295|E>>>26),E=P+(_^(B|~R))+S[7]+1126891415&4294967295,P=B+(E<<10&4294967295|E>>>22),E=R+(B^(P|~_))+S[14]+2878612391&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~B))+S[5]+4237533241&4294967295,_=R+(E<<21&4294967295|E>>>11),E=B+(R^(_|~P))+S[12]+1700485571&4294967295,B=_+(E<<6&4294967295|E>>>26),E=P+(_^(B|~R))+S[3]+2399980690&4294967295,P=B+(E<<10&4294967295|E>>>22),E=R+(B^(P|~_))+S[10]+4293915773&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~B))+S[1]+2240044497&4294967295,_=R+(E<<21&4294967295|E>>>11),E=B+(R^(_|~P))+S[8]+1873313359&4294967295,B=_+(E<<6&4294967295|E>>>26),E=P+(_^(B|~R))+S[15]+4264355552&4294967295,P=B+(E<<10&4294967295|E>>>22),E=R+(B^(P|~_))+S[6]+2734768916&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~B))+S[13]+1309151649&4294967295,_=R+(E<<21&4294967295|E>>>11),E=B+(R^(_|~P))+S[4]+4149444226&4294967295,B=_+(E<<6&4294967295|E>>>26),E=P+(_^(B|~R))+S[11]+3174756917&4294967295,P=B+(E<<10&4294967295|E>>>22),E=R+(B^(P|~_))+S[2]+718787259&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~B))+S[9]+3951481745&4294967295,x.g[0]=x.g[0]+B&4294967295,x.g[1]=x.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+P&4294967295}n.prototype.u=function(x,B){B===void 0&&(B=x.length);for(var _=B-this.blockSize,S=this.B,R=this.h,P=0;P<B;){if(R==0)for(;P<=_;)s(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<B;)if(S[R++]=x.charCodeAt(P++),R==this.blockSize){s(this,S),R=0;break}}else for(;P<B;)if(S[R++]=x[P++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=B},n.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var B=1;B<x.length-8;++B)x[B]=0;var _=8*this.o;for(B=x.length-8;B<x.length;++B)x[B]=_&255,_/=256;for(this.u(x),x=Array(16),B=_=0;4>B;++B)for(var S=0;32>S;S+=8)x[_++]=this.g[B]>>>S&255;return x};function A(x,B){var _=a;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=B(x)}function i(x,B){this.h=B;for(var _=[],S=!0,R=x.length-1;0<=R;R--){var P=x[R]|0;S&&P==B||(_[R]=P,S=!1)}this.g=_}var a={};function o(x){return-128<=x&&128>x?A(x,function(B){return new i([B|0],0>B?-1:0)}):new i([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return I(c(-x));for(var B=[],_=1,S=0;x>=_;S++)B[S]=x/_|0,_*=4294967296;return new i(B,0)}function d(x,B){if(x.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(x.charAt(0)=="-")return I(d(x.substring(1),B));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(B,8)),S=h,R=0;R<x.length;R+=8){var P=Math.min(8,x.length-R),E=parseInt(x.substring(R,R+P),B);8>P?(P=c(Math.pow(B,P)),S=S.j(P).add(c(E))):(S=S.j(_),S=S.add(c(E)))}return S}var h=o(0),f=o(1),m=o(16777216);t=i.prototype,t.m=function(){if(y(this))return-I(this).m();for(var x=0,B=1,_=0;_<this.g.length;_++){var S=this.i(_);x+=(0<=S?S:4294967296+S)*B,B*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(y(this))return"-"+I(this).toString(x);for(var B=c(Math.pow(x,6)),_=this,S="";;){var R=F(_,B).g;_=b(_,R.j(B));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(x);if(_=R,v(_))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var B=0;B<x.g.length;B++)if(x.g[B]!=0)return!1;return!0}function y(x){return x.h==-1}t.l=function(x){return x=b(this,x),y(x)?-1:v(x)?0:1};function I(x){for(var B=x.g.length,_=[],S=0;S<B;S++)_[S]=~x.g[S];return new i(_,~x.h).add(f)}t.abs=function(){return y(this)?I(this):this},t.add=function(x){for(var B=Math.max(this.g.length,x.g.length),_=[],S=0,R=0;R<=B;R++){var P=S+(this.i(R)&65535)+(x.i(R)&65535),E=(P>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);S=E>>>16,P&=65535,E&=65535,_[R]=E<<16|P}return new i(_,_[_.length-1]&-2147483648?-1:0)};function b(x,B){return x.add(I(B))}t.j=function(x){if(v(this)||v(x))return h;if(y(this))return y(x)?I(this).j(I(x)):I(I(this).j(x));if(y(x))return I(this.j(I(x)));if(0>this.l(m)&&0>x.l(m))return c(this.m()*x.m());for(var B=this.g.length+x.g.length,_=[],S=0;S<2*B;S++)_[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<x.g.length;R++){var P=this.i(S)>>>16,E=this.i(S)&65535,We=x.i(R)>>>16,qe=x.i(R)&65535;_[2*S+2*R]+=E*qe,w(_,2*S+2*R),_[2*S+2*R+1]+=P*qe,w(_,2*S+2*R+1),_[2*S+2*R+1]+=E*We,w(_,2*S+2*R+1),_[2*S+2*R+2]+=P*We,w(_,2*S+2*R+2)}for(S=0;S<B;S++)_[S]=_[2*S+1]<<16|_[2*S];for(S=B;S<2*B;S++)_[S]=0;return new i(_,0)};function w(x,B){for(;(x[B]&65535)!=x[B];)x[B+1]+=x[B]>>>16,x[B]&=65535,B++}function C(x,B){this.g=x,this.h=B}function F(x,B){if(v(B))throw Error("division by zero");if(v(x))return new C(h,h);if(y(x))return B=F(I(x),B),new C(I(B.g),I(B.h));if(y(B))return B=F(x,I(B)),new C(I(B.g),B.h);if(30<x.g.length){if(y(x)||y(B))throw Error("slowDivide_ only works with positive integers.");for(var _=f,S=B;0>=S.l(x);)_=U(_),S=U(S);var R=N(_,1),P=N(S,1);for(S=N(S,2),_=N(_,2);!v(S);){var E=P.add(S);0>=E.l(x)&&(R=R.add(_),P=E),S=N(S,1),_=N(_,1)}return B=b(x,R.j(B)),new C(R,B)}for(R=h;0<=x.l(B);){for(_=Math.max(1,Math.floor(x.m()/B.m())),S=Math.ceil(Math.log(_)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=c(_),E=P.j(B);y(E)||0<E.l(x);)_-=S,P=c(_),E=P.j(B);v(P)&&(P=f),R=R.add(P),x=b(x,E)}return new C(R,x)}t.A=function(x){return F(this,x).h},t.and=function(x){for(var B=Math.max(this.g.length,x.g.length),_=[],S=0;S<B;S++)_[S]=this.i(S)&x.i(S);return new i(_,this.h&x.h)},t.or=function(x){for(var B=Math.max(this.g.length,x.g.length),_=[],S=0;S<B;S++)_[S]=this.i(S)|x.i(S);return new i(_,this.h|x.h)},t.xor=function(x){for(var B=Math.max(this.g.length,x.g.length),_=[],S=0;S<B;S++)_[S]=this.i(S)^x.i(S);return new i(_,this.h^x.h)};function U(x){for(var B=x.g.length+1,_=[],S=0;S<B;S++)_[S]=x.i(S)<<1|x.i(S-1)>>>31;return new i(_,x.h)}function N(x,B){var _=B>>5;B%=32;for(var S=x.g.length-_,R=[],P=0;P<S;P++)R[P]=0<B?x.i(P+_)>>>B|x.i(P+_+1)<<32-B:x.i(P+_);return new i(R,x.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,EE=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Di=i}).apply(typeof oB<"u"?oB:typeof self<"u"?self:typeof window<"u"?window:{});var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TE,Ql,FE,Od,jm,kE,SE,UE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xu=="object"&&Xu];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function s(u,g){if(g)e:{var p=n;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in p))break e;p=p[M]}u=u[u.length-1],T=p[u],g=g(T),g!=T&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var p=0,T=!1,M={next:function(){if(!T&&p<u.length){var q=p++;return{value:g(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(g,M)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function v(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,M,q){for(var Ie=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)Ie[Rt-2]=arguments[Rt];return g.prototype[M].apply(T,Ie)}}function y(u){const g=u.length;if(0<g){const p=Array(g);for(let T=0;T<g;T++)p[T]=u[T];return p}return[]}function I(u,g){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(o(T)){const M=u.length||0,q=T.length||0;u.length=M+q;for(let Ie=0;Ie<q;Ie++)u[M+Ie]=T[Ie]}else u.push(T)}}class b{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function C(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var U=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function N(u,g,p){for(const T in u)g.call(p,u[T],T,u)}function x(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function B(u){const g={};for(const p in u)g[p]=u[p];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,g){let p,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(p in T)u[p]=T[p];for(let q=0;q<_.length;q++)p=_[q],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function R(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function P(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Ee;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class We{constructor(){this.h=this.g=null}add(g,p){const T=qe.get();T.set(g,p),this.h?this.h.next=T:this.g=T,this.h=T}}var qe=new b(()=>new at,u=>u.reset());class at{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ce=!1,Ee=new We,Ne=()=>{const u=a.Promise.resolve(void 0);Le=()=>{u.then(Je)}};var Je=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){P(p)}var g=qe;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ce=!1};function Xe(){this.s=this.s,this.C=this.C}Xe.prototype.s=!1,Xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var wt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,g),a.removeEventListener("test",p,g)}catch{}return u}();function te(u,g){if(Ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{F(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ke[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&te.aa.h.call(this)}}v(te,Ye);var Ke={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),nt=0;function ct(u,g,p,T,M){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!T,this.ha=M,this.key=++nt,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,g,p,T,M){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var Ie=ue(u,g,T,M);return-1<Ie?(g=u[Ie],p||(g.fa=!1)):(g=new ct(g,this.src,q,!!T,M),g.fa=p,u.push(g)),g};function de(u,g){var p=g.type;if(p in u.g){var T=u.g[p],M=Array.prototype.indexOf.call(T,g,void 0),q;(q=0<=M)&&Array.prototype.splice.call(T,M,1),q&&(Z(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function ue(u,g,p,T){for(var M=0;M<u.length;++M){var q=u[M];if(!q.da&&q.listener==g&&q.capture==!!p&&q.ha==T)return M}return-1}var L="closure_lm_"+(1e6*Math.random()|0),X={};function Y(u,g,p,T,M){if(Array.isArray(g)){for(var q=0;q<g.length;q++)Y(u,g[q],p,T,M);return null}return p=ve(p),u&&u[Ge]?u.K(g,p,c(T)?!!T.capture:!1,M):pe(u,g,p,!1,T,M)}function pe(u,g,p,T,M,q){if(!g)throw Error("Invalid event type");var Ie=c(M)?!!M.capture:!!M,Rt=he(u);if(Rt||(u[L]=Rt=new le(u)),p=Rt.add(g,p,T,Ie,q),p.proxy)return p;if(T=ze(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)wt||(M=Ie),M===void 0&&(M=!1),u.addEventListener(g.toString(),T,M);else if(u.attachEvent)u.attachEvent(ee(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ze(){function u(p){return g.call(u.src,u.listener,p)}const g=et;return u}function V(u,g,p,T,M){if(Array.isArray(g))for(var q=0;q<g.length;q++)V(u,g[q],p,T,M);else T=c(T)?!!T.capture:!!T,p=ve(p),u&&u[Ge]?(u=u.i,g=String(g).toString(),g in u.g&&(q=u.g[g],p=ue(q,p,T,M),-1<p&&(Z(q[p]),Array.prototype.splice.call(q,p,1),q.length==0&&(delete u.g[g],u.h--)))):u&&(u=he(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ue(g,p,T,M)),(p=-1<u?g[u]:null)&&G(p))}function G(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ge])de(g.i,u);else{var p=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(p,T,u.capture):g.detachEvent?g.detachEvent(ee(p),T):g.addListener&&g.removeListener&&g.removeListener(T),(p=he(g))?(de(p,u),p.h==0&&(p.src=null,g[L]=null)):Z(u)}}}function ee(u){return u in X?X[u]:X[u]="on"+u}function et(u,g){if(u.da)u=!0;else{g=new te(g,this);var p=u.listener,T=u.ha||u.src;u.fa&&G(u),u=p.call(T,g)}return u}function he(u){return u=u[L],u instanceof le?u:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(u){return typeof u=="function"?u:(u[Se]||(u[Se]=function(g){return u.handleEvent(g)}),u[Se])}function oe(){Xe.call(this),this.i=new le(this),this.M=this,this.F=null}v(oe,Xe),oe.prototype[Ge]=!0,oe.prototype.removeEventListener=function(u,g,p,T){V(this,u,g,p,T)};function fe(u,g){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new Ye(g,u);else if(g instanceof Ye)g.target=g.target||u;else{var M=g;g=new Ye(T,u),S(g,M)}if(M=!0,p)for(var q=p.length-1;0<=q;q--){var Ie=g.g=p[q];M=Te(Ie,T,!0,g)&&M}if(Ie=g.g=u,M=Te(Ie,T,!0,g)&&M,M=Te(Ie,T,!1,g)&&M,p)for(q=0;q<p.length;q++)Ie=g.g=p[q],M=Te(Ie,T,!1,g)&&M}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],T=0;T<p.length;T++)Z(p[T]);delete u.g[g],u.h--}}this.F=null},oe.prototype.K=function(u,g,p,T){return this.i.add(String(u),g,!1,p,T)},oe.prototype.L=function(u,g,p,T){return this.i.add(String(u),g,!0,p,T)};function Te(u,g,p,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,q=0;q<g.length;++q){var Ie=g[q];if(Ie&&!Ie.da&&Ie.capture==p){var Rt=Ie.listener,Sr=Ie.ha||Ie.src;Ie.fa&&de(u.i,Ie),M=Rt.call(Sr,T)!==!1&&M}}return M&&!T.defaultPrevented}function He(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Ce(u){u.g=He(()=>{u.g=null,u.i&&(u.i=!1,Ce(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class it extends Xe{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ze(u){Xe.call(this),this.h=u,this.g={}}v(Ze,Xe);var lt=[];function ke(u){N(u.g,function(g,p){this.g.hasOwnProperty(p)&&G(g)},u),u.g={}}Ze.prototype.N=function(){Ze.aa.N.call(this),ke(this)},Ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var me=a.JSON.stringify,Ve=a.JSON.parse,ot=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function _t(){}_t.prototype.h=null;function Bt(u){return u.h||(u.h=u.i())}function D(){}var W={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $(){Ye.call(this,"d")}v($,Ye);function O(){Ye.call(this,"c")}v(O,Ye);var Ue={},be=null;function we(){return be=be||new oe}Ue.La="serverreachability";function Be(u){Ye.call(this,Ue.La,u)}v(Be,Ye);function Pe(u){const g=we();fe(g,new Be(g))}Ue.STAT_EVENT="statevent";function Q(u,g){Ye.call(this,Ue.STAT_EVENT,u),this.stat=g}v(Q,Ye);function H(u){const g=we();fe(g,new Q(g,u))}Ue.Ma="timingevent";function re(u,g){Ye.call(this,Ue.Ma,u),this.size=g}v(re,Ye);function J(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function se(){this.g=!0}se.prototype.xa=function(){this.g=!1};function ne(u,g,p,T,M,q){u.info(function(){if(u.g)if(q)for(var Ie="",Rt=q.split("&"),Sr=0;Sr<Rt.length;Sr++){var Ct=Rt[Sr].split("=");if(1<Ct.length){var Mr=Ct[0];Ct=Ct[1];var Or=Mr.split("_");Ie=2<=Or.length&&Or[1]=="type"?Ie+(Mr+"="+Ct+"&"):Ie+(Mr+"=redacted&")}}else Ie=null;else Ie=q;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+g+`
`+p+`
`+Ie})}function xe(u,g,p,T,M,q,Ie){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+g+`
`+p+`
`+q+" "+Ie})}function ye(u,g,p,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+yt(u,p)+(T?" "+T:"")})}function Me(u,g){u.info(function(){return"TIMEOUT: "+g})}se.prototype.info=function(){};function yt(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var q=M[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Ie=1;Ie<M.length;Ie++)M[Ie]=""}}}}return me(p)}catch{return g}}var st={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yt;function kr(){}v(kr,_t),kr.prototype.g=function(){return new XMLHttpRequest},kr.prototype.i=function(){return{}},Yt=new kr;function Tt(u,g,p,T){this.j=u,this.i=g,this.l=p,this.R=T||1,this.U=new Ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jr}function jr(){this.i=null,this.g="",this.h=!1}var Fn={},Zn={};function Xs(u,g,p){u.L=1,u.v=Cu(ms(g)),u.m=p,u.P=!0,sn(u,null)}function sn(u,g){u.F=Date.now(),gi(u),u.A=ms(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),cx(p.i,"t",T),u.C=0,p=u.j.J,u.h=new jr,u.g=Tx(u.j,p?g:null,!u.m),0<u.O&&(u.M=new it(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(lt[0]=M.toString()),M=lt);for(var q=0;q<M.length;q++){var Ie=Y(p,M[q],T||g.handleEvent,!1,g.h||g);if(!Ie)break;g.g[Ie.key]=Ie}g=u.H?B(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Pe(),ne(u.i,u.u,u.A,u.l,u.R,u.m)}Tt.prototype.ca=function(u){u=u.target;const g=this.M;g&&ws(u)==3?g.j():this.Y(u)},Tt.prototype.Y=function(u){try{if(u==this.g)e:{const Or=ws(this.g);var g=this.g.Ba();const go=this.g.Z();if(!(3>Or)&&(Or!=3||this.g&&(this.h.h||this.g.oa()||mx(this.g)))){this.J||Or!=4||g==7||(g==8||0>=go?Pe(3):Pe(2)),yg(this);var p=this.g.Z();this.X=p;t:if(Js(this)){var T=mx(this.g);u="";var M=T.length,q=ws(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),Za(this);var Ie="";break t}this.h.i=new a.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,u+=this.h.i.decode(T[g],{stream:!(q&&g==M-1)});T.length=0,this.h.g+=u,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=p==200,xe(this.i,this.u,this.A,this.l,this.R,Or,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Rt,Sr=this.g;if((Rt=Sr.g?Sr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Rt)){var Ct=Rt;break t}}Ct=null}if(p=Ct)ye(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xg(this,p);else{this.o=!1,this.s=3,H(12),pi(this),Za(this);break e}}if(this.P){p=!0;let On;for(;!this.J&&this.C<Ie.length;)if(On=Zt(this,Ie),On==Zn){Or==4&&(this.s=4,H(14),p=!1),ye(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Fn){this.s=4,H(15),ye(this.i,this.l,Ie,"[Invalid Chunk]"),p=!1;break}else ye(this.i,this.l,On,null),xg(this,On);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Or!=4||Ie.length!=0||this.h.h||(this.s=1,H(16),p=!1),this.o=this.o&&p,!p)ye(this.i,this.l,Ie,"[Invalid Chunked Response]"),pi(this),Za(this);else if(0<Ie.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),Ig(Mr),Mr.M=!0,H(11))}}else ye(this.i,this.l,Ie,null),xg(this,Ie);Or==4&&pi(this),this.o&&!this.J&&(Or==4?Cx(this.j,this):(this.o=!1,gi(this)))}else BS(this.g),p==400&&0<Ie.indexOf("Unknown SID")?(this.s=3,H(12)):(this.s=0,H(13)),pi(this),Za(this)}}}catch{}finally{}};function Js(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Zt(u,g){var p=u.C,T=g.indexOf(`
`,p);return T==-1?Zn:(p=Number(g.substring(p,T)),isNaN(p)?Fn:(T+=1,T+p>g.length?Zn:(g=g.slice(T,T+p),u.C=T+p,g)))}Tt.prototype.cancel=function(){this.J=!0,pi(this)};function gi(u){u.S=Date.now()+u.I,vr(u,u.I)}function vr(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=J(f(u.ba,u),g)}function yg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Tt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Me(this.i,this.A),this.L!=2&&(Pe(),H(17)),pi(this),this.s=2,Za(this)):vr(this,this.S-u)};function Za(u){u.j.G==0||u.J||Cx(u.j,u)}function pi(u){yg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,ke(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function xg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||vg(p.h,u))){if(!u.K&&vg(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ku(p),Tu(p);else break e;_g(p),H(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=J(f(p.Za,p),6e3));if(1>=tx(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else wi(p,11)}else if((u.K||p.g==u)&&ku(p),!w(g))for(M=p.Da.g.parse(g),g=0;g<M.length;g++){let Ct=M[g];if(p.T=Ct[0],Ct=Ct[1],p.G==2)if(Ct[0]=="c"){p.K=Ct[1],p.ia=Ct[2];const Mr=Ct[3];Mr!=null&&(p.la=Mr,p.j.info("VER="+p.la));const Or=Ct[4];Or!=null&&(p.Aa=Or,p.j.info("SVER="+p.Aa));const go=Ct[5];go!=null&&typeof go=="number"&&0<go&&(T=1.5*go,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const On=u.g;if(On){const Uu=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uu){var q=T.h;q.g||Uu.indexOf("spdy")==-1&&Uu.indexOf("quic")==-1&&Uu.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Bg(q,q.h),q.h=null))}if(T.D){const Eg=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Eg&&(T.ya=Eg,Ot(T.I,T.D,Eg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var Ie=u;if(T.qa=Ex(T,T.J?T.ia:null,T.W),Ie.K){rx(T.h,Ie);var Rt=Ie,Sr=T.L;Sr&&(Rt.I=Sr),Rt.B&&(yg(Rt),gi(Rt)),T.g=Ie}else Bx(T);0<p.i.length&&Fu(p)}else Ct[0]!="stop"&&Ct[0]!="close"||wi(p,7);else p.G==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?wi(p,7):Cg(p):Ct[0]!="noop"&&p.l&&p.l.ta(Ct),p.v=0)}}Pe(4)}catch{}}var iS=class{constructor(u,g){this.g=u,this.map=g}};function Zy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ex(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function tx(u){return u.h?1:u.g?u.g.size:0}function vg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Bg(u,g){u.g?u.g.add(g):u.h=g}function rx(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Zy.prototype.cancel=function(){if(this.i=nx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nx(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return y(u.i)}function oS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(o(u)){for(var g=[],p=u.length,T=0;T<p;T++)g.push(u[T]);return g}g=[],p=0;for(T in u)g[p++]=u[T];return g}function aS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(o(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const T in u)g[p++]=T;return g}}}function sx(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(o(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=aS(u),T=oS(u),M=T.length,q=0;q<M;q++)g.call(void 0,T[q],p&&p[q],u)}var Ax=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lS(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),M=null;if(0<=T){var q=u[p].substring(0,T);M=u[p].substring(T+1)}else q=u[p];g(q,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function mi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof mi){this.h=u.h,Bu(this,u.j),this.o=u.o,this.g=u.g,bu(this,u.s),this.l=u.l;var g=u.i,p=new rl;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),ix(this,p),this.m=u.m}else u&&(g=String(u).match(Ax))?(this.h=!1,Bu(this,g[1]||"",!0),this.o=el(g[2]||""),this.g=el(g[3]||"",!0),bu(this,g[4]),this.l=el(g[5]||"",!0),ix(this,g[6]||"",!0),this.m=el(g[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}mi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(tl(g,ox,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(tl(g,ox,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(tl(p,p.charAt(0)=="/"?dS:uS,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",tl(p,fS)),u.join("")};function ms(u){return new mi(u)}function Bu(u,g,p){u.j=p?el(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function bu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function ix(u,g,p){g instanceof rl?(u.i=g,gS(u.i,u.h)):(p||(g=tl(g,hS)),u.i=new rl(g,u.h))}function Ot(u,g,p){u.i.set(g,p)}function Cu(u){return Ot(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function el(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function tl(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,cS),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function cS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ox=/[#\/\?@]/g,uS=/[#\?:]/g,dS=/[#\?]/g,hS=/[#\?@]/g,fS=/#/g;function rl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Ys(u){u.g||(u.g=new Map,u.h=0,u.i&&lS(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=rl.prototype,t.add=function(u,g){Ys(this),this.i=null,u=ho(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function ax(u,g){Ys(u),g=ho(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function lx(u,g){return Ys(u),g=ho(u,g),u.g.has(g)}t.forEach=function(u,g){Ys(this),this.g.forEach(function(p,T){p.forEach(function(M){u.call(g,M,T,this)},this)},this)},t.na=function(){Ys(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let T=0;T<g.length;T++){const M=u[T];for(let q=0;q<M.length;q++)p.push(g[T])}return p},t.V=function(u){Ys(this);let g=[];if(typeof u=="string")lx(this,u)&&(g=g.concat(this.g.get(ho(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return Ys(this),this.i=null,u=ho(this,u),lx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function cx(u,g,p){ax(u,g),0<p.length&&(u.i=null,u.g.set(ho(u,g),y(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var T=g[p];const q=encodeURIComponent(String(T)),Ie=this.V(T);for(T=0;T<Ie.length;T++){var M=q;Ie[T]!==""&&(M+="="+encodeURIComponent(String(Ie[T]))),u.push(M)}}return this.i=u.join("&")};function ho(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function gS(u,g){g&&!u.j&&(Ys(u),u.i=null,u.g.forEach(function(p,T){var M=T.toLowerCase();T!=M&&(ax(this,T),cx(this,M,p))},u)),u.j=g}function pS(u,g){const p=new se;if(a.Image){const T=new Image;T.onload=m(Zs,p,"TestLoadImage: loaded",!0,g,T),T.onerror=m(Zs,p,"TestLoadImage: error",!1,g,T),T.onabort=m(Zs,p,"TestLoadImage: abort",!1,g,T),T.ontimeout=m(Zs,p,"TestLoadImage: timeout",!1,g,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function mS(u,g){const p=new se,T=new AbortController,M=setTimeout(()=>{T.abort(),Zs(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(M),q.ok?Zs(p,"TestPingServer: ok",!0,g):Zs(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Zs(p,"TestPingServer: error",!1,g)})}function Zs(u,g,p,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(p)}catch{}}function wS(){this.g=new ot}function yS(u,g,p){const T=p||"";try{sx(u,function(M,q){let Ie=M;c(M)&&(Ie=me(M)),g.push(T+q+"="+encodeURIComponent(Ie))})}catch(M){throw g.push(T+"type="+encodeURIComponent("_badmap")),M}}function _u(u){this.l=u.Ub||null,this.j=u.eb||!1}v(_u,_t),_u.prototype.g=function(){return new Iu(this.l,this.j)},_u.prototype.i=function(u){return function(){return u}}({});function Iu(u,g){oe.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Iu,oe),t=Iu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,sl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ux(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ux(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?nl(this):sl(this),this.readyState==3&&ux(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,nl(this))},t.Qa=function(u){this.g&&(this.response=u,nl(this))},t.ga=function(){this.g&&nl(this)};function nl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function sl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function dx(u){let g="";return N(u,function(p,T){g+=T,g+=":",g+=p,g+=`\r
`}),g}function bg(u,g,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=dx(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ot(u,g,p))}function Ar(u){oe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ar,oe);var xS=/^https?$/i,vS=["POST","PUT"];t=Ar.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yt.g(),this.v=this.o?Bt(this.o):Bt(Yt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(q){hx(this,q);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)p.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())p.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(q=>q.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vS,g,void 0))||T||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Ie]of p)this.g.setRequestHeader(q,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{px(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){hx(this,q)}};function hx(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,fx(u),Eu(u)}function fx(u){u.A||(u.A=!0,fe(u,"complete"),fe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,fe(this,"complete"),fe(this,"abort"),Eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eu(this,!0)),Ar.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gx(this):this.bb())},t.bb=function(){gx(this)};function gx(u){if(u.h&&typeof i<"u"&&(!u.v[1]||ws(u)!=4||u.Z()!=2)){if(u.u&&ws(u)==4)He(u.Ea,0,u);else if(fe(u,"readystatechange"),ws(u)==4){u.h=!1;try{const Ie=u.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var T;if(T=Ie===0){var M=String(u.D).match(Ax)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),T=!xS.test(M?M.toLowerCase():"")}p=T}if(p)fe(u,"complete"),fe(u,"success");else{u.m=6;try{var q=2<ws(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",fx(u)}}finally{Eu(u)}}}}function Eu(u,g){if(u.g){px(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||fe(u,"ready");try{p.onreadystatechange=T}catch{}}}function px(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ws(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ws(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Ve(g)}};function mx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function BS(u){const g={};u=(u.g&&2<=ws(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(w(u[T]))continue;var p=R(u[T]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const q=g[M]||[];g[M]=q,q.push(p)}x(g,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Al(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function wx(u){this.Aa=0,this.i=[],this.j=new se,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Al("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Al("baseRetryDelayMs",5e3,u),this.cb=Al("retryDelaySeedMs",1e4,u),this.Wa=Al("forwardChannelMaxRetries",2,u),this.wa=Al("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Zy(u&&u.concurrentRequestLimit),this.Da=new wS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wx.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,T){H(0),this.W=u,this.H=g||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=Ex(this,null,this.W),Fu(this)};function Cg(u){if(yx(u),u.G==3){var g=u.U++,p=ms(u.I);if(Ot(p,"SID",u.K),Ot(p,"RID",g),Ot(p,"TYPE","terminate"),il(u,p),g=new Tt(u,u.j,g),g.L=2,g.v=Cu(ms(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=g.v,p=!0),p||(g.g=Tx(g.j,null),g.g.ea(g.v)),g.F=Date.now(),gi(g)}Ix(u)}function Tu(u){u.g&&(Ig(u),u.g.cancel(),u.g=null)}function yx(u){Tu(u),u.u&&(a.clearTimeout(u.u),u.u=null),ku(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Fu(u){if(!ex(u.h)&&!u.s){u.s=!0;var g=u.Ga;Le||Ne(),ce||(Le(),ce=!0),Ee.add(g,u),u.B=0}}function bS(u,g){return tx(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=J(f(u.Ga,u,g),_x(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Tt(this,this.j,u);let q=this.o;if(this.S&&(q?(q=B(q),S(q,this.S)):q=this.S),this.m!==null||this.O||(M.H=q,q=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=vx(this,M,g),p=ms(this.I),Ot(p,"RID",u),Ot(p,"CVER",22),this.D&&Ot(p,"X-HTTP-Session-Id",this.D),il(this,p),q&&(this.O?g="headers="+encodeURIComponent(String(dx(q)))+"&"+g:this.m&&bg(p,this.m,q)),Bg(this.h,M),this.Ua&&Ot(p,"TYPE","init"),this.P?(Ot(p,"$req",g),Ot(p,"SID","null"),M.T=!0,Xs(M,p,null)):Xs(M,p,g),this.G=2}}else this.G==3&&(u?xx(this,u):this.i.length==0||ex(this.h)||xx(this))};function xx(u,g){var p;g?p=g.l:p=u.U++;const T=ms(u.I);Ot(T,"SID",u.K),Ot(T,"RID",p),Ot(T,"AID",u.T),il(u,T),u.m&&u.o&&bg(T,u.m,u.o),p=new Tt(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=vx(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Bg(u.h,p),Xs(p,T,g)}function il(u,g){u.H&&N(u.H,function(p,T){Ot(g,T,p)}),u.l&&sx({},function(p,T){Ot(g,T,p)})}function vx(u,g,p){p=Math.min(u.i.length,p);var T=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let q=-1;for(;;){const Ie=["count="+p];q==-1?0<p?(q=M[0].g,Ie.push("ofs="+q)):q=0:Ie.push("ofs="+q);let Rt=!0;for(let Sr=0;Sr<p;Sr++){let Ct=M[Sr].g;const Mr=M[Sr].map;if(Ct-=q,0>Ct)q=Math.max(0,M[Sr].g-100),Rt=!1;else try{yS(Mr,Ie,"req"+Ct+"_")}catch{T&&T(Mr)}}if(Rt){T=Ie.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,T}function Bx(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Le||Ne(),ce||(Le(),ce=!0),Ee.add(g,u),u.v=0}}function _g(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=J(f(u.Fa,u),_x(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,bx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=J(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,H(10),Tu(this),bx(this))};function Ig(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function bx(u){u.g=new Tt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ms(u.qa);Ot(g,"RID","rpc"),Ot(g,"SID",u.K),Ot(g,"AID",u.T),Ot(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ot(g,"TO",u.ja),Ot(g,"TYPE","xmlhttp"),il(u,g),u.m&&u.o&&bg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Cu(ms(g)),p.m=null,p.P=!0,sn(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Tu(this),_g(this),H(19))};function ku(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Cx(u,g){var p=null;if(u.g==g){ku(u),Ig(u),u.g=null;var T=2}else if(vg(u.h,g))p=g.D,rx(u.h,g),T=1;else return;if(u.G!=0){if(g.o)if(T==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var M=u.B;T=we(),fe(T,new re(T,p)),Fu(u)}else Bx(u);else if(M=g.s,M==3||M==0&&0<g.X||!(T==1&&bS(u,g)||T==2&&_g(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),M){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function _x(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function wi(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),T=u.Xa;const M=!T;T=new mi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bu(T,"https"),Cu(T),M?pS(T.toString(),p):mS(T.toString(),p)}else H(2);u.G=0,u.l&&u.l.sa(g),Ix(u),yx(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),H(2)):(this.j.info("Failed to ping google.com"),H(1))};function Ix(u){if(u.G=0,u.ka=[],u.l){const g=nx(u.h);(g.length!=0||u.i.length!=0)&&(I(u.ka,g),I(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function Ex(u,g,p){var T=p instanceof mi?ms(p):new mi(p);if(T.g!="")g&&(T.g=g+"."+T.g),bu(T,T.s);else{var M=a.location;T=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var q=new mi(null);T&&Bu(q,T),g&&(q.g=g),M&&bu(q,M),p&&(q.l=p),T=q}return p=u.D,g=u.ya,p&&g&&Ot(T,p,g),Ot(T,"VER",u.la),il(u,T),T}function Tx(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ar(new _u({eb:p})):new Ar(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fx(){}t=Fx.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Su(){}Su.prototype.g=function(u,g){return new mn(u,g)};function mn(u,g){oe.call(this),this.g=new wx(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new fo(this)}v(mn,oe),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Cg(this.g)},mn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=me(u),u=p);g.i.push(new iS(g.Ya++,u)),g.G==3&&Fu(g)},mn.prototype.N=function(){this.g.l=null,delete this.j,Cg(this.g),delete this.g,mn.aa.N.call(this)};function kx(u){$.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}v(kx,$);function Sx(){O.call(this),this.status=1}v(Sx,O);function fo(u){this.g=u}v(fo,Fx),fo.prototype.ua=function(){fe(this.g,"a")},fo.prototype.ta=function(u){fe(this.g,new kx(u))},fo.prototype.sa=function(u){fe(this.g,new Sx)},fo.prototype.ra=function(){fe(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,UE=function(){return new Su},SE=function(){return we()},kE=Ue,jm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,Od=st,Nt.COMPLETE="complete",FE=Nt,D.EventType=W,W.OPEN="a",W.CLOSE="b",W.ERROR="c",W.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Ql=D,Ar.prototype.listenOnce=Ar.prototype.L,Ar.prototype.getLastError=Ar.prototype.Ka,Ar.prototype.getLastErrorCode=Ar.prototype.Ba,Ar.prototype.getStatus=Ar.prototype.Z,Ar.prototype.getResponseJson=Ar.prototype.Oa,Ar.prototype.getResponseText=Ar.prototype.oa,Ar.prototype.send=Ar.prototype.ea,Ar.prototype.setWithCredentials=Ar.prototype.Ha,TE=Ar}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});const aB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new kw("@firebase/firestore");function Eo(){return $A.logLevel}function zR(t){$A.setLogLevel(t)}function ae(t,...e){if($A.logLevel<=gt.DEBUG){const r=e.map(Qw);$A.debug(`Firestore (${La}): ${t}`,...r)}}function ur(t,...e){if($A.logLevel<=gt.ERROR){const r=e.map(Qw);$A.error(`Firestore (${La}): ${t}`,...r)}}function _n(t,...e){if($A.logLevel<=gt.WARN){const r=e.map(Qw);$A.warn(`Firestore (${La}): ${t}`,...r)}}function Qw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: `+t;throw ur(e),new Error(e)}function Oe(t,e){t||De()}function $R(t,e){t||De()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Gs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ir.UNAUTHENTICATED))}shutdown(){}}class WR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class qR{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Oe(this.o===void 0);let n=this.i;const s=o=>this.i!==n?(n=this.i,r(o)):Promise.resolve();let A=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const o=A;e.enqueueRetryable(async()=>{await o.promise,await s(this.currentUser)})},a=o=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Tr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Oe(typeof n.accessToken=="string"),new QE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Ir(e)}}class XR{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JR{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new XR(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Oe(this.o===void 0);const n=A=>{A.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,ae("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>n(A))};const s=A=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Oe(typeof r.token=="string"),this.R=r.token,new RE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class ZR{getToken(){return Promise.resolve(new RE(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=e4(40);for(let A=0;A<s.length;++A)n.length<20&&s[A]<r&&(n+=e.charAt(s[A]%e.length))}return n}}function rt(t,e){return t<e?-1:t>e?1:0}function ga(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function DE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Xt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Xt(0,0))}static max(){return new $e(new Xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,r,n){r===void 0?r=0:r>e.length&&De(),n===void 0?n=e.length-r:n>e.length-r&&De(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Qc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Qc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const A=e.get(s),i=r.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class pt extends Qc{construct(e,r,n){return new pt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ie(z.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new pt(r)}static emptyPath(){return new pt([])}}const t4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Qc{construct(e,r,n){return new Kt(e,r,n)}static isValidIdentifier(e){return t4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const A=()=>{if(n.length===0)throw new ie(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ie(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[s+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new ie(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=o,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(n+=a,s++):(A(),s++)}if(A(),i)throw new ie(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(r)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(pt.fromString(e))}static fromName(e){return new Fe(pt.fromString(e).popFirst(5))}static empty(){return new Fe(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function Mm(t){return t.fields.find(e=>e.kind===2)}function Ci(t){return t.fields.filter(e=>e.kind!==2)}function r4(t,e){let r=rt(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=n4(t.fields[n],e.fields[n]),r!==0)return r;return rt(t.fields.length,e.fields.length)}pa.UNKNOWN_ID=-1;class Pi{constructor(e,r){this.fieldPath=e,this.kind=r}}function n4(t,e){const r=Kt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:rt(t.kind,e.kind)}class ma{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ma(0,In.min())}}function PE(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(n===1e9?new Xt(r+1,0):new Xt(r,n));return new In(s,Fe.empty(),e)}function LE(t){return new In(t.readTime,t.key,-1)}class In{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new In($e.min(),Fe.empty(),-1)}static max(){return new In($e.max(),Fe.empty(),-1)}}function Rw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Fe.comparator(t.documentKey,e.documentKey),r!==0?r:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ME{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==jE)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new j((n,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(n,s)},this.catchCallback=A=>{this.wrapFailure(r,A).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof j?r:j.resolve(r)}catch(r){return j.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):j.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):j.reject(r)}static resolve(e){return new j((r,n)=>{r(e)})}static reject(e){return new j((r,n)=>{n(e)})}static waitFor(e){return new j((r,n)=>{let s=0,A=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++A,i&&A===s&&r()},o=>n(o))}),i=!0,A===s&&r()})}static or(e){let r=j.resolve(!1);for(const n of e)r=r.next(s=>s?j.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,A)=>{n.push(r.call(this,s,A))}),this.waitFor(n)}static mapArray(e,r){return new j((n,s)=>{const A=e.length,i=new Array(A);let a=0;for(let o=0;o<A;o++){const c=o;r(e[c]).next(d=>{i[c]=d,++a,a===A&&n(i)},d=>s(d))}})}static doWhile(e,r){return new j((n,s)=>{const A=()=>{e()===!0?r().next(()=>{A()},s):n()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Tr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new ec(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Dw(n.target.error);this.V.reject(new ec(e,s))}}static open(e,r,n,s){try{return new Rf(r,e.transaction(s,n))}catch(A){throw new ec(r,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new A4(r)}}class ls{constructor(e,r,n){this.name=e,this.version=r,this.p=n,ls.S(yr())===12.2&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ae("SimpleDb","Removing database:",e),_i(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vE())return!1;if(ls.v())return!0;const e=yr(),r=ls.S(e),n=0<r&&r<10,s=OE(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ae("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;r(i)},s.onblocked=()=>{n(new ec(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?n(new ie(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new ie(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new ec(e,i))},s.onupgradeneeded=A=>{ae("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{ae("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const A=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const a=Rf.open(this.db,e,A?"readonly":"readwrite",n),o=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),j.reject(c))).toPromise();return o.catch(()=>{}),await a.m,o}catch(a){const o=a,c=o.name!=="FirebaseError"&&i<3;if(ae("SimpleDb","Transaction failed with error:",o.message,"Retrying:",c),this.close(),!c)return Promise.reject(o)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OE(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class s4{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return _i(this.B.delete())}}class ec extends ie{constructor(e,r){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ai(t){return t.name==="IndexedDbTransactionError"}class A4{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ae("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_i(n)}add(e){return ae("SimpleDb","ADD",this.store.name,e,e),_i(this.store.add(e))}get(e){return _i(this.store.get(e)).next(r=>(r===void 0&&(r=null),ae("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ae("SimpleDb","DELETE",this.store.name,e),_i(this.store.delete(e))}count(){return ae("SimpleDb","COUNT",this.store.name),_i(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(n.range);return new j((i,a)=>{A.onerror=o=>{a(o.target.error)},A.onsuccess=o=>{i(o.target.result)}})}{const A=this.cursor(n),i=[];return this.W(A,(a,o)=>{i.push(o)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new j((s,A)=>{n.onerror=i=>{A(i.target.error)},n.onsuccess=i=>{s(i.target.result)}})}j(e,r){ae("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(A,i,a)=>a.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new j((n,s)=>{r.onerror=A=>{const i=Dw(A.target.error);s(i)},r.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():n()}):n()}})}W(e,r){const n=[];return new j((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const o=new s4(a),c=r(a.primaryKey,a.value,o);if(c instanceof j){const d=c.catch(h=>(o.done(),j.reject(h)));n.push(d)}o.isDone?s():o.K===null?a.continue():a.continue(o.K)}}).next(()=>j.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function _i(t){return new j((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Dw(n.target.error);r(s)}})}let lB=!1;function Dw(t){const e=ls.S(yr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lB||(lB=!0,setTimeout(()=>{throw n},0)),n}}return t}class i4{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ae("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ai(r)?ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await oi(r)}await this.X(6e4)})}}class o4{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,A=!0;return j.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return ae("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(a=>{s-=a,n.add(i)});A=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(a=>(ae("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,r,a))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((s,A)=>{const i=LE(A);Rw(i,n)>0&&(n=i)}),new In(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}un.oe=-1;function ru(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function HE(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=cB(e)),e=a4(t.get(r),e);return cB(e)}function a4(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const A=t.charAt(s);switch(A){case"\0":r+="";break;case"":r+="";break;default:r+=A}}return r}function cB(t){return t+""}function As(t){const e=t.length;if(Oe(e>=2),e===2)return Oe(t.charAt(0)===""&&t.charAt(1)===""),pt.emptyPath();const r=e-2,n=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>r)&&De(),t.charAt(i+1)){case"":const a=t.substring(A,i);let o;s.length===0?o=a:(s+=a,o=s,s=""),n.push(o);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:De()}A=i+2}return new pt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e){return[t,qr(e)]}function VE(t,e,r){return[t,qr(e),r]}const l4={},c4=["prefixPath","collectionGroup","readTime","documentId"],u4=["prefixPath","collectionGroup","documentId"],d4=["collectionGroup","readTime","prefixPath","documentId"],h4=["canonicalId","targetId"],f4=["targetId","path"],g4=["path","targetId"],p4=["collectionId","parent"],m4=["indexId","uid"],w4=["uid","sequenceNumber"],y4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x4=["indexId","uid","orderedDocumentKey"],v4=["userId","collectionPath","documentId"],B4=["userId","collectionPath","largestBatchId"],b4=["userId","collectionGroup","largestBatchId"],KE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],C4=[...KE,"documentOverlays"],GE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zE=GE,Pw=[...zE,"indexConfiguration","indexState","indexEntries"],_4=Pw,I4=[...Pw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends ME{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function xr(t,e){const r=_e(t);return ls.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function li(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function $E(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function WE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,r){this.comparator=e,this.root=r||Nr.EMPTY}insert(e,r){return new Mt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=r?n(e.key,r):1,r&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,r,n,s,A){this.key=e,this.value=r,this.color=n??Nr.RED,this.left=s??Nr.EMPTY,this.right=A??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,A){return new Nr(e??this.key,r??this.value,n??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const A=n(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,r,n),null):A===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Nr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,r,n,s,A){return this}insert(e,r,n){return new Nr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new hB(this.data.getIterator())}getIteratorFrom(e){return new hB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ut(this.comparator);return r.data=e,r}}class hB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new dn([])}unionWith(e){let r=new Ut(Kt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new dn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new qE("Invalid base64 string: "+A):A}}(e);return new sr(r)}static fromUint8Array(e){const r=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new sr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const T4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(t){if(Oe(!!t),typeof t=="string"){let e=0;const r=T4.exec(t);if(Oe(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?sr.fromBase64String(t):sr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Pf(t){const e=t.mapValue.fields.__previous_value__;return Df(e)?Pf(e):e}function Rc(t){const e=Ls(t.mapValue.fields.__local_write_time__.timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,r,n,s,A,i,a,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class WA{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new WA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof WA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vd={nullValue:"NULL_VALUE"};function qA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Df(t)?4:XE(t)?9007199254740991:Lf(t)?10:11:De()}function hs(t,e){if(t===e)return!0;const r=qA(t);if(r!==qA(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rc(t).isEqual(Rc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=Ls(s.timestampValue),a=Ls(A.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return js(s.bytesValue).isEqual(js(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return $t(s.geoPointValue.latitude)===$t(A.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return $t(s.integerValue)===$t(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=$t(s.doubleValue),a=$t(A.doubleValue);return i===a?Nc(i)===Nc(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},a=A.mapValue.fields||{};if(dB(i)!==dB(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!hs(i[o],a[o])))return!1;return!0}(t,e);default:return De()}}function Dc(t,e){return(t.values||[]).find(r=>hs(r,e))!==void 0}function XA(t,e){if(t===e)return 0;const r=qA(t),n=qA(e);if(r!==n)return rt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(A,i){const a=$t(A.integerValue||A.doubleValue),o=$t(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return fB(t.timestampValue,e.timestampValue);case 4:return fB(Rc(t),Rc(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(A,i){const a=js(A),o=js(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const a=A.split("/"),o=i.split("/");for(let c=0;c<a.length&&c<o.length;c++){const d=rt(a[c],o[c]);if(d!==0)return d}return rt(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const a=rt($t(A.latitude),$t(i.latitude));return a!==0?a:rt($t(A.longitude),$t(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gB(t.arrayValue,e.arrayValue);case 10:return function(A,i){var a,o,c,d;const h=A.fields||{},f=i.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=(o=f.value)===null||o===void 0?void 0:o.arrayValue,y=rt(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:gB(m,v)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===CA.mapValue&&i===CA.mapValue)return 0;if(A===CA.mapValue)return 1;if(i===CA.mapValue)return-1;const a=A.fields||{},o=Object.keys(a),c=i.fields||{},d=Object.keys(c);o.sort(),d.sort();for(let h=0;h<o.length&&h<d.length;++h){const f=rt(o[h],d[h]);if(f!==0)return f;const m=XA(a[o[h]],c[d[h]]);if(m!==0)return m}return rt(o.length,d.length)}(t.mapValue,e.mapValue);default:throw De()}}function fB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const r=Ls(t),n=Ls(e),s=rt(r.seconds,n.seconds);return s!==0?s:rt(r.nanos,n.nanos)}function gB(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const A=XA(r[s],n[s]);if(A)return A}return rt(r.length,n.length)}function wa(t){return Hm(t)}function Hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ls(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return js(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Fe.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const A of r.values||[])s?s=!1:n+=",",n+=Hm(A);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",A=!0;for(const i of n)A?A=!1:s+=",",s+=`${i}:${Hm(r.fields[i])}`;return s+"}"}(t.mapValue):De()}function Kd(t){switch(qA(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(t);return e?16+Kd(e):16;case 5:return 2*t.stringValue.length;case 6:return js(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,A)=>s+Kd(A),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return li(n.fields,(A,i)=>{s+=A.length+Kd(i)}),s}(t.mapValue);default:throw De()}}function zi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vm(t){return!!t&&"integerValue"in t}function Pc(t){return!!t&&"arrayValue"in t}function pB(t){return!!t&&"nullValue"in t}function mB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gd(t){return!!t&&"mapValue"in t}function Lf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function tc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return li(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=tc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=tc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function XE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const JE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function k4(t){return"nullValue"in t?Vd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zi(WA.empty(),Fe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Lf(t)?JE:{mapValue:{}}:De()}function S4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zi(WA.empty(),Fe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?JE:"mapValue"in t?Lf(t)?{mapValue:{}}:CA:De()}function wB(t,e){const r=XA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yB(t,e){const r=XA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Gd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(r)}setAll(e){let r=Kt.emptyPath(),n={},s=[];e.forEach((i,a)=>{if(!r.isImmediateParentOf(a)){const o=this.getFieldsMap(r);this.applyChanges(o,n,s),n={},s=[],r=a.popLast()}i?n[a.lastSegment()]=tc(i):s.push(a.lastSegment())});const A=this.getFieldsMap(r);this.applyChanges(A,n,s)}delete(e){const r=this.field(e.popLast());Gd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Gd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){li(r,(s,A)=>e[s]=A);for(const s of n)delete e[s]}clone(){return new Rr(tc(this.value))}}function YE(t){const e=[];return li(t.fields,(r,n)=>{const s=new Kt([r]);if(Gd(n)){const A=YE(n.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r,n,s,A,i,a){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=A,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Vt(e,0,$e.min(),$e.min(),$e.min(),Rr.empty(),0)}static newFoundDocument(e,r,n,s){return new Vt(e,1,r,$e.min(),n,s,0)}static newNoDocument(e,r){return new Vt(e,2,r,$e.min(),$e.min(),Rr.empty(),0)}static newUnknownDocument(e,r){return new Vt(e,3,r,$e.min(),$e.min(),Rr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,r){this.position=e,this.inclusive=r}}function xB(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?n=Fe.comparator(Fe.fromName(i.referenceValue),r.key):n=XA(i,r.data.field(A.field)),A.dir==="desc"&&(n*=-1),n!==0)break}return n}function vB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!hs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,r="asc"){this.field=e,this.dir=r}}function U4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class mt extends ZE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Q4(e,r,n):r==="array-contains"?new D4(e,n):r==="in"?new A1(e,n):r==="not-in"?new P4(e,n):r==="array-contains-any"?new L4(e,n):new mt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new N4(e,n):new R4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(XA(r,this.value)):r!==null&&qA(this.value)===qA(r)&&this.matchesComparison(XA(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ft extends ZE{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Ft(e,r)}matches(e){return ya(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ya(t){return t.op==="and"}function Km(t){return t.op==="or"}function Lw(t){return e1(t)&&ya(t)}function e1(t){for(const e of t.filters)if(e instanceof Ft)return!1;return!0}function Gm(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(Lw(t))return t.filters.map(e=>Gm(e)).join(",");{const e=t.filters.map(r=>Gm(r)).join(",");return`${t.op}(${e})`}}function t1(t,e){return t instanceof mt?function(n,s){return s instanceof mt&&n.op===s.op&&n.field.isEqual(s.field)&&hs(n.value,s.value)}(t,e):t instanceof Ft?function(n,s){return s instanceof Ft&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((A,i,a)=>A&&t1(i,s.filters[a]),!0):!1}(t,e):void De()}function r1(t,e){const r=t.filters.concat(e);return Ft.create(r,t.op)}function n1(t){return t instanceof mt?function(r){return`${r.field.canonicalString()} ${r.op} ${wa(r.value)}`}(t):t instanceof Ft?function(r){return r.op.toString()+" {"+r.getFilters().map(n1).join(" ,")+"}"}(t):"Filter"}class Q4 extends mt{constructor(e,r,n){super(e,r,n),this.key=Fe.fromName(n.referenceValue)}matches(e){const r=Fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class N4 extends mt{constructor(e,r){super(e,"in",r),this.keys=s1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class R4 extends mt{constructor(e,r){super(e,"not-in",r),this.keys=s1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function s1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Fe.fromName(n.referenceValue))}class D4 extends mt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Pc(r)&&Dc(r.arrayValue,this.value)}}class A1 extends mt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Dc(this.value.arrayValue,r)}}class P4 extends mt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Dc(this.value.arrayValue,r)}}class L4 extends mt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Pc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Dc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,r=null,n=[],s=[],A=null,i=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=A,this.startAt=i,this.endAt=a,this.ue=null}}function zm(t,e=null,r=[],n=[],s=null,A=null,i=null){return new j4(t,e,r,n,s,A,i)}function $i(t){const e=_e(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Gm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(A){return A.field.canonicalString()+A.dir}(n)).join(","),ru(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>wa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>wa(n)).join(",")),e.ue=r}return e.ue}function nu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!U4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!t1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vB(t.startAt,e.startAt)&&vB(t.endAt,e.endAt)}function Dh(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ph(t,e){return t.filters.filter(r=>r instanceof mt&&r.field.isEqual(e))}function BB(t,e,r){let n=Vd,s=!0;for(const A of Ph(t,e)){let i=Vd,a=!0;switch(A.op){case"<":case"<=":i=k4(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,a=!1;break;case"!=":case"not-in":i=Vd}wB({value:n,inclusive:s},{value:i,inclusive:a})<0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];wB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function bB(t,e,r){let n=CA,s=!0;for(const A of Ph(t,e)){let i=CA,a=!0;switch(A.op){case">=":case">":i=S4(A.value),a=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,a=!1;break;case"!=":case"not-in":i=CA}yB({value:n,inclusive:s},{value:i,inclusive:a})>0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];yB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,r=null,n=[],s=[],A=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=A,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function i1(t,e,r,n,s,A,i,a){return new zs(t,e,r,n,s,A,i,a)}function ja(t){return new zs(t)}function CB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jw(t){return t.collectionGroup!==null}function ea(t){const e=_e(t);if(e.ce===null){e.ce=[];const r=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),r.add(A.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new Ut(Kt.comparator);return i.filters.forEach(o=>{o.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(A=>{r.has(A.canonicalString())||A.isKeyField()||e.ce.push(new Lc(A,n))}),r.has(Kt.keyField().canonicalString())||e.ce.push(new Lc(Kt.keyField(),n))}return e.ce}function Xr(t){const e=_e(t);return e.le||(e.le=a1(e,ea(t))),e.le}function o1(t){const e=_e(t);return e.he||(e.he=a1(e,t.explicitOrderBy)),e.he}function a1(t,e){if(t.limitType==="F")return zm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new Lc(s.field,A)});const r=t.endAt?new JA(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new JA(t.startAt.position,t.startAt.inclusive):null;return zm(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function $m(t,e){const r=t.filters.concat([e]);return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Lh(t,e,r){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function su(t,e){return nu(Xr(t),Xr(e))&&t.limitType===e.limitType}function l1(t){return`${$i(Xr(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>n1(s)).join(", ")}]`),ru(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>wa(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>wa(s)).join(",")),`Target(${n})`}(Xr(t))}; limitType=${t.limitType})`}function Au(t,e){return e.isFoundDocument()&&function(n,s){const A=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(A):Fe.isDocumentKey(n.path)?n.path.isEqual(A):n.path.isImmediateParentOf(A)}(t,e)&&function(n,s){for(const A of ea(n))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const A of n.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,a,o){const c=xB(i,a,o);return i.inclusive?c<=0:c<0}(n.startAt,ea(n),s)||n.endAt&&!function(i,a,o){const c=xB(i,a,o);return i.inclusive?c>=0:c>0}(n.endAt,ea(n),s))}(t,e)}function c1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u1(t){return(e,r)=>{let n=!1;for(const s of ea(t)){const A=M4(s,e,r);if(A!==0)return A;n=n||s.field.isKeyField()}return 0}}function M4(t,e,r){const n=t.field.isKeyField()?Fe.comparator(e.key,r.key):function(A,i,a){const o=i.data.field(A),c=a.data.field(A);return o!==null&&c!==null?XA(o,c):De()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,A]of n)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){li(this.inner,(r,n)=>{for(const[s,A]of n)e(s,A)})}isEmpty(){return WE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new Mt(Fe.comparator);function hn(){return O4}const d1=new Mt(Fe.comparator);function Nl(...t){let e=d1;for(const r of t)e=e.insert(r.key,r);return e}function h1(t){let e=d1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function is(){return rc()}function f1(){return rc()}function rc(){return new $s(t=>t.toString(),(t,e)=>t.isEqual(e))}const H4=new Mt(Fe.comparator),V4=new Ut(Fe.comparator);function At(...t){let e=V4;for(const r of t)e=e.add(r);return e}const K4=new Ut(rt);function Mw(){return K4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function g1(t){return{integerValue:""+t}}function p1(t,e){return HE(e)?g1(e):Ow(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function G4(t,e,r){return t instanceof xa?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&Df(A)&&(A=Pf(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(r,e):t instanceof Wi?w1(t,e):t instanceof qi?y1(t,e):function(s,A){const i=m1(s,A),a=_B(i)+_B(s.Pe);return Vm(i)&&Vm(s.Pe)?g1(a):Ow(s.serializer,a)}(t,e)}function z4(t,e,r){return t instanceof Wi?w1(t,e):t instanceof qi?y1(t,e):r}function m1(t,e){return t instanceof va?function(n){return Vm(n)||function(A){return!!A&&"doubleValue"in A}(n)}(e)?e:{integerValue:0}:null}class xa extends jf{}class Wi extends jf{constructor(e){super(),this.elements=e}}function w1(t,e){const r=x1(e);for(const n of t.elements)r.some(s=>hs(s,n))||r.push(n);return{arrayValue:{values:r}}}class qi extends jf{constructor(e){super(),this.elements=e}}function y1(t,e){let r=x1(e);for(const n of t.elements)r=r.filter(s=>!hs(s,n));return{arrayValue:{values:r}}}class va extends jf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function _B(t){return $t(t.integerValue||t.doubleValue)}function x1(t){return Pc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,r){this.field=e,this.transform=r}}function $4(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Wi&&s instanceof Wi||n instanceof qi&&s instanceof qi?ga(n.elements,s.elements,hs):n instanceof va&&s instanceof va?hs(n.Pe,s.Pe):n instanceof xa&&s instanceof xa}(t.transform,e.transform)}class W4{constructor(e,r){this.version=e,this.transformResults=r}}class qt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new qt}static exists(e){return new qt(void 0,e)}static updateTime(e){return new qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function v1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oa(t.key,qt.none()):new Ma(t.key,t.data,qt.none());{const r=t.data,n=Rr.empty();let s=new Ut(Kt.comparator);for(let A of e.fields)if(!s.has(A)){let i=r.field(A);i===null&&A.length>1&&(A=A.popLast(),i=r.field(A)),i===null?n.delete(A):n.set(A,i),s=s.add(A)}return new Ws(t.key,n,new dn(s.toArray()),qt.none())}}function q4(t,e,r){t instanceof Ma?function(s,A,i){const a=s.value.clone(),o=EB(s.fieldTransforms,A,i.transformResults);a.setAll(o),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Ws?function(s,A,i){if(!zd(s.precondition,A))return void A.convertToUnknownDocument(i.version);const a=EB(s.fieldTransforms,A,i.transformResults),o=A.data;o.setAll(B1(s)),o.setAll(a),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function nc(t,e,r,n){return t instanceof Ma?function(A,i,a,o){if(!zd(A.precondition,i))return a;const c=A.value.clone(),d=TB(A.fieldTransforms,o,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ws?function(A,i,a,o){if(!zd(A.precondition,i))return a;const c=TB(A.fieldTransforms,o,i),d=i.data;return d.setAll(B1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(A,i,a){return zd(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,r)}function X4(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),A=m1(n.transform,s||null);A!=null&&(r===null&&(r=Rr.empty()),r.set(n.field,A))}return r||null}function IB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ga(n,s,(A,i)=>$4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ma extends Mf{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ws extends Mf{constructor(e,r,n,s,A=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function B1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function EB(t,e,r){const n=new Map;Oe(t.length===r.length);for(let s=0;s<r.length;s++){const A=t[s],i=A.transform,a=e.data.field(A.field);n.set(A.field,z4(i,a,r[s]))}return n}function TB(t,e,r){const n=new Map;for(const s of t){const A=s.transform,i=r.data.field(s.field);n.set(s.field,G4(A,i,e))}return n}class Oa extends Mf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw extends Mf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&q4(A,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=nc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=nc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=f1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let a=this.applyToLocalView(i,A.mutatedFields);a=r.has(s.key)?null:a;const o=v1(i,a);o!==null&&n.set(s.key,o),i.isValidDocument()||i.convertToNoDocument($e.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),At())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(r,n)=>IB(r,n))&&ga(this.baseMutations,e.baseMutations,(r,n)=>IB(r,n))}}class Kw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Oe(e.mutations.length===n.length);let s=function(){return H4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,n[i].version);return new Kw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr,xt;function C1(t){switch(t){default:return De();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function _1(t){if(t===void 0)return ur("GRPC error has no .code"),z.UNKNOWN;switch(t){case hr.OK:return z.OK;case hr.CANCELLED:return z.CANCELLED;case hr.UNKNOWN:return z.UNKNOWN;case hr.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case hr.INTERNAL:return z.INTERNAL;case hr.UNAVAILABLE:return z.UNAVAILABLE;case hr.UNAUTHENTICATED:return z.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case hr.NOT_FOUND:return z.NOT_FOUND;case hr.ALREADY_EXISTS:return z.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return z.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case hr.ABORTED:return z.ABORTED;case hr.OUT_OF_RANGE:return z.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return z.UNIMPLEMENTED;case hr.DATA_LOSS:return z.DATA_LOSS;default:return De()}}(xt=hr||(hr={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new Di([4294967295,4294967295],0);function FB(t){const e=I1().encode(t),r=new EE;return r.update(e),new Uint8Array(r.digest())}function kB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new Di([r,n],0),new Di([s,A],0)]}class zw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Rl(`Invalid padding: ${r}`);if(n<0)throw new Rl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Di.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Di.fromNumber(n)));return s.compare(Y4)===1&&(s=new Di([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=FB(e),[n,s]=kB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new zw(A,s,r);return n.forEach(a=>i.insert(a)),i}insert(e){if(this.Ie===0)return;const r=FB(e),[n,s]=kB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,r,n,s,A){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new ou($e.min(),s,new Mt(rt),hn(),At())}}class au{constructor(e,r,n,s,A){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new au(n,r,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class E1{constructor(e,r){this.targetId=e,this.me=r}}class T1{constructor(e,r,n=sr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class SB{constructor(){this.fe=0,this.ge=QB(),this.pe=sr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=At(),r=At(),n=At();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:De()}}),new au(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=QB()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Z4{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=UB(),this.Qe=new Mt(rt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:De()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const A=s.target;if(Dh(A))if(n===0){const i=new Fe(A.path);this.Ue(r,i,Vt.newNoDocument(i,$e.min()))}else Oe(n===1);else{const i=this.Ye(r);if(i!==n){const a=this.Ze(e),o=a?this.Xe(a,e,i):1;if(o!==0){this.je(r);const c=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}jh==null||jh.et(function(d,h,f,m,v){var y,I,b,w,C,F;const U={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},N=h.unchangedNames;return N&&(U.bloomFilter={applied:v===0,hashCount:(y=N==null?void 0:N.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(w=(b=(I=N==null?void 0:N.bits)===null||I===void 0?void 0:I.bitmap)===null||b===void 0?void 0:b.length)!==null&&w!==void 0?w:0,padding:(F=(C=N==null?void 0:N.bits)===null||C===void 0?void 0:C.padding)!==null&&F!==void 0?F:0,mightContain:x=>{var B;return(B=m==null?void 0:m.mightContain(x))!==null&&B!==void 0&&B}}),U}(i,e.me,this.Le.tt(),a,o))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:A=0}=r;let i,a;try{i=js(n).toUint8Array()}catch(o){if(o instanceof qE)return _n("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new zw(i,s,A)}catch(o){return _n(o instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(A=>{const i=this.Le.tt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,A,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((A,i)=>{const a=this.Je(i);if(a){if(A.current&&Dh(a.target)){const o=new Fe(a.target.path);this.ke.get(o)!==null||this.it(i,o)||this.Ue(i,o,Vt.newNoDocument(o,e))}A.be&&(r.set(i,A.ve()),A.Ce())}});let n=At();this.qe.forEach((A,i)=>{let a=!0;i.forEachWhile(o=>{const c=this.Je(o);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new ou(e,r,this.Qe,this.ke,n);return this.ke=hn(),this.qe=UB(),this.Qe=new Mt(rt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new SB,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ut(rt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ae("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new SB),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function UB(){return new Mt(Fe.comparator)}function QB(){return new Mt(Fe.comparator)}const eD={asc:"ASCENDING",desc:"DESCENDING"},tD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rD={and:"AND",or:"OR"};class nD{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Wm(t,e){return t.useProto3Json||ru(e)?e:{value:e}}function Ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sD(t,e){return Ba(t,e.toTimestamp())}function dr(t){return Oe(!!t),$e.fromTimestamp(function(r){const n=Ls(r);return new Xt(n.seconds,n.nanos)}(t))}function $w(t,e){return qm(t,e).canonicalString()}function qm(t,e){const r=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function k1(t){const e=pt.fromString(t);return Oe(M1(e)),e}function jc(t,e){return $w(t.databaseId,e.path)}function cs(t,e){const r=k1(e);if(r.get(1)!==t.databaseId.projectId)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Fe(Q1(r))}function S1(t,e){return $w(t.databaseId,e)}function U1(t){const e=k1(t);return e.length===4?pt.emptyPath():Q1(e)}function Xm(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q1(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function NB(t,e,r){return{name:jc(t,e),fields:r.value.mapValue.fields}}function N1(t,e,r){const n=cs(t,e.name),s=dr(e.updateTime),A=e.createTime?dr(e.createTime):$e.min(),i=new Rr({mapValue:{fields:e.fields}}),a=Vt.newFoundDocument(n,s,A,i);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function AD(t,e){return"found"in e?function(n,s){Oe(!!s.found),s.found.name,s.found.updateTime;const A=cs(n,s.found.name),i=dr(s.found.updateTime),a=s.found.createTime?dr(s.found.createTime):$e.min(),o=new Rr({mapValue:{fields:s.found.fields}});return Vt.newFoundDocument(A,i,a,o)}(t,e):"missing"in e?function(n,s){Oe(!!s.missing),Oe(!!s.readTime);const A=cs(n,s.missing),i=dr(s.readTime);return Vt.newNoDocument(A,i)}(t,e):De()}function iD(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(Oe(d===void 0||typeof d=="string"),sr.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),sr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const d=c.code===void 0?z.UNKNOWN:_1(c.code);return new ie(d,c.message||"")}(i);r=new T1(n,s,A,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=cs(t,n.document.name),A=dr(n.document.updateTime),i=n.document.createTime?dr(n.document.createTime):$e.min(),a=new Rr({mapValue:{fields:n.document.fields}}),o=Vt.newFoundDocument(s,A,i,a),c=n.targetIds||[],d=n.removedTargetIds||[];r=new $d(c,d,o.key,o)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=cs(t,n.document),A=n.readTime?dr(n.readTime):$e.min(),i=Vt.newNoDocument(s,A),a=n.removedTargetIds||[];r=new $d([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=cs(t,n.document),A=n.removedTargetIds||[];r=new $d([],A,s,null)}else{if(!("filter"in e))return De();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:A}=n,i=new J4(s,A),a=n.targetId;r=new E1(a,i)}}return r}function Mc(t,e){let r;if(e instanceof Ma)r={update:NB(t,e.key,e.value)};else if(e instanceof Oa)r={delete:jc(t,e.key)};else if(e instanceof Ws)r={update:NB(t,e.key,e.data),updateMask:dD(e.fieldMask)};else{if(!(e instanceof Hw))return De();r={verify:jc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(A,i){const a=i.transform;if(a instanceof xa)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof va)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw De()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:sD(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:De()}(t,e.precondition)),r}function Jm(t,e){const r=e.currentDocument?function(A){return A.updateTime!==void 0?qt.updateTime(dr(A.updateTime)):A.exists!==void 0?qt.exists(A.exists):qt.none()}(e.currentDocument):qt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(i,a){let o=null;if("setToServerValue"in a)Oe(a.setToServerValue==="REQUEST_TIME"),o=new xa;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];o=new Wi(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];o=new qi(d)}else"increment"in a?o=new va(i,a.increment):De();const c=Kt.fromServerFormat(a.fieldPath);return new iu(c,o)}(t,s)):[];if(e.update){e.update.name;const s=cs(t,e.update.name),A=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(o){const c=o.fieldPaths||[];return new dn(c.map(d=>Kt.fromServerFormat(d)))}(e.updateMask);return new Ws(s,A,i,r,n)}return new Ma(s,A,r,n)}if(e.delete){const s=cs(t,e.delete);return new Oa(s,r)}if(e.verify){const s=cs(t,e.verify);return new Hw(s,r)}return De()}function oD(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(r=>function(s,A){let i=s.updateTime?dr(s.updateTime):dr(A);return i.isEqual($e.min())&&(i=dr(A)),new W4(i,s.transformResults||[])}(r,e))):[]}function R1(t,e){return{documents:[S1(t,e.path)]}}function Of(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=S1(t,s);const A=function(c){if(c.length!==0)return j1(Ft.create(c,"and"))}(e.filters);A&&(r.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:hA(f.field),direction:lD(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const a=Wm(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function D1(t,e,r,n){const{_t:s,parent:A}=Of(t,e),i={},a=[];let o=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+o++;i[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:hA(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:hA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:A}}function P1(t){let e=U1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Oe(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];r.where&&(A=function(h){const f=L1(h);return f instanceof Ft&&Lw(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(v){return new Lc(Fo(v.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,ru(f)?null:f}(r.limit));let o=null;r.startAt&&(o=function(h){const f=!!h.before,m=h.values||[];return new JA(m,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new JA(m,f)}(r.endAt)),i1(e,s,i,A,a,"F",o,c)}function aD(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function L1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Fo(r.unaryFilter.field);return mt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Fo(r.unaryFilter.field);return mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=Fo(r.unaryFilter.field);return mt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fo(r.unaryFilter.field);return mt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(r){return mt.create(Fo(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ft.create(r.compositeFilter.filters.map(n=>L1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De()}}(r.compositeFilter.op))}(t):De()}function lD(t){return eD[t]}function cD(t){return tD[t]}function uD(t){return rD[t]}function hA(t){return{fieldPath:t.canonicalString()}}function Fo(t){return Kt.fromServerFormat(t.fieldPath)}function j1(t){return t instanceof mt?function(r){if(r.op==="=="){if(mB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NAN"}};if(pB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(mB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NOT_NAN"}};if(pB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hA(r.field),op:cD(r.op),value:r.value}}}(t):t instanceof Ft?function(r){const n=r.getFilters().map(s=>j1(s));return n.length===1?n[0]:{compositeFilter:{op:uD(r.op),filters:n}}}(t):De()}function dD(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function M1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,r,n,s,A=$e.min(),i=$e.min(),a=sr.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.ct=e}}function hD(t,e){let r;if(e.document)r=N1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Fe.fromSegments(e.noDocument.path),s=Ji(e.noDocument.readTime);r=Vt.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const n=Fe.fromSegments(e.unknownDocument.path),s=Ji(e.unknownDocument.version);r=Vt.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const A=new Xt(s[0],s[1]);return $e.fromTimestamp(A)}(e.readTime)),r}function RB(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Mh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(A,i){return{name:jc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:Ba(A,i.version.toTimestamp()),createTime:Ba(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Xi(e.version)};else{if(!e.isUnknownDocument())return De();n.unknownDocument={path:r.path.toArray(),version:Xi(e.version)}}return n}function Mh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ji(t){const e=new Xt(t.seconds,t.nanoseconds);return $e.fromTimestamp(e)}function Ii(t,e){const r=(e.baseMutations||[]).map(A=>Jm(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const a=e.mutations[A+1];i.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const n=e.mutations.map(A=>Jm(t.ct,A)),s=Xt.fromMillis(e.localWriteTimeMs);return new Vw(e.batchId,s,r,n)}function Dl(t){const e=Ji(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Ji(t.lastLimboFreeSnapshotVersion):$e.min();let n;return n=function(A){return A.documents!==void 0}(t.query)?function(A){return Oe(A.documents.length===1),Xr(ja(U1(A.documents[0])))}(t.query):function(A){return Xr(P1(A))}(t.query),new Es(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,sr.fromBase64String(t.resumeToken))}function H1(t,e){const r=Xi(e.snapshotVersion),n=Xi(e.lastLimboFreeSnapshotVersion);let s;s=Dh(e.target)?R1(t.ct,e.target):Of(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$i(e.target),readTime:r,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function Ww(t){const e=P1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lh(e,e.limit,"L"):e}function ip(t,e){return new Gw(e.largestBatchId,Jm(t.ct,e.overlayMutation))}function DB(t,e){const r=e.path.lastSegment();return[t,qr(e.path.popLast()),r]}function PB(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Xi(n.readTime),documentKey:qr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{getBundleMetadata(e,r){return LB(e).get(r).next(n=>{if(n)return function(A){return{id:A.bundleId,createTime:Ji(A.createTime),version:A.version}}(n)})}saveBundleMetadata(e,r){return LB(e).put(function(s){return{bundleId:s.id,createTime:Xi(dr(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return jB(e).get(r).next(n=>{if(n)return function(A){return{name:A.name,query:Ww(A.bundledQuery),readTime:Ji(A.readTime)}}(n)})}saveNamedQuery(e,r){return jB(e).put(function(s){return{name:s.name,readTime:Xi(dr(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function LB(t){return xr(t,"bundles")}function jB(t){return xr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Hf(e,n)}getOverlay(e,r){return pl(e).get(DB(this.userId,r)).next(n=>n?ip(this.serializer,n):null)}getOverlays(e,r){const n=is();return j.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((A,i)=>{const a=new Gw(r,i);s.push(this.ht(e,a))}),j.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(i=>s.add(qr(i.getCollectionPath())));const A=[];return s.forEach(i=>{const a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);A.push(pl(e).j("collectionPathOverlayIndex",a))}),j.waitFor(A)}getOverlaysForCollection(e,r,n){const s=is(),A=qr(r),i=IDBKeyRange.bound([this.userId,A,n],[this.userId,A,Number.POSITIVE_INFINITY],!0);return pl(e).U("collectionPathOverlayIndex",i).next(a=>{for(const o of a){const c=ip(this.serializer,o);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const A=is();let i;const a=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return pl(e).J({index:"collectionGroupOverlayIndex",range:a},(o,c,d)=>{const h=ip(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,r){return pl(e).put(function(s,A,i){const[a,o,c]=DB(A,i.mutation.key);return{userId:A,collectionPath:o,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Mc(s.ct,i.mutation)}}(this.serializer,this.userId,r))}}function pl(t){return xr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{Pt(e){return xr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?sr.fromUint8Array(n):sr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At($t(e.integerValue));else if("doubleValue"in e){const n=$t(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Nc(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ls(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(js(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?XE(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Lf(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):De()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const A=e.fields||{};this.dt(r,53);const i="value",a=((s=(n=A[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At($t(a)),this.Vt(i,r),this.Tt(A[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),Fe.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Ei.vt=new Ei;function pD(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function MB(t){const e=64-function(n){let s=0;for(let A=0;A<8;++A){const i=pD(255&n[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class mD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=MB(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=MB(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class wD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class yD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ml{constructor(){this.jt=new mD,this.Ht=new wD(this.jt),this.Jt=new yD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ti(this.indexId,this.documentKey,this.arrayValue,n)}}function tA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=OB(t.arrayValue,e.arrayValue),r!==0?r:(r=OB(t.directionalValue,e.directionalValue),r!==0?r:Fe.comparator(t.documentKey,e.documentKey)))}function OB(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.Xt=new Ut((r,n)=>Kt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Oe(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Mm(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ci(e);let s=new Set,A=0,i=0;for(;A<n.length&&this.sn(n[A]);++A)s=s.add(n[A].fieldPath.canonicalString());if(A===n.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const o=n[A];if(!this.on(a,o)||!this._n(this.en[i++],o))return!1}++A}for(;A<n.length;++A){const a=n[A];if(i>=this.en.length||!this._n(this.en[i++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ut(Kt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Pi(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Pi(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Pi(n.field,n.dir==="asc"?0:1)));return new pa(pa.UNKNOWN_ID,this.collectionId,r,ma.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){var e,r;if(Oe(t instanceof mt||t instanceof Ft),t instanceof mt){if(t instanceof A1){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(A=>mt.create(t.field,"==",A)))||[];return Ft.create(s,"or")}return t}const n=t.filters.map(s=>V1(s));return Ft.create(n,t.op)}function xD(t){if(t.getFilters().length===0)return[];const e=e0(V1(t));return Oe(K1(e)),Ym(e)||Zm(e)?[e]:e.getFilters()}function Ym(t){return t instanceof mt}function Zm(t){return t instanceof Ft&&Lw(t)}function K1(t){return Ym(t)||Zm(t)||function(r){if(r instanceof Ft&&Km(r)){for(const n of r.getFilters())if(!Ym(n)&&!Zm(n))return!1;return!0}return!1}(t)}function e0(t){if(Oe(t instanceof mt||t instanceof Ft),t instanceof mt)return t;if(t.filters.length===1)return e0(t.filters[0]);const e=t.filters.map(n=>e0(n));let r=Ft.create(e,t.op);return r=Oh(r),K1(r)?r:(Oe(r instanceof Ft),Oe(ya(r)),Oe(r.filters.length>1),r.filters.reduce((n,s)=>qw(n,s)))}function qw(t,e){let r;return Oe(t instanceof mt||t instanceof Ft),Oe(e instanceof mt||e instanceof Ft),r=t instanceof mt?e instanceof mt?function(s,A){return Ft.create([s,A],"and")}(t,e):VB(t,e):e instanceof mt?VB(e,t):function(s,A){if(Oe(s.filters.length>0&&A.filters.length>0),ya(s)&&ya(A))return r1(s,A.getFilters());const i=Km(s)?s:A,a=Km(s)?A:s,o=i.filters.map(c=>qw(c,a));return Ft.create(o,"or")}(t,e),Oh(r)}function VB(t,e){if(ya(e))return r1(e,t.getFilters());{const r=e.filters.map(n=>qw(t,n));return Ft.create(r,"or")}}function Oh(t){if(Oe(t instanceof mt||t instanceof Ft),t instanceof mt)return t;const e=t.getFilters();if(e.length===1)return Oh(e[0]);if(e1(t))return t;const r=e.map(s=>Oh(s)),n=[];return r.forEach(s=>{s instanceof mt?n.push(s):s instanceof Ft&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Ft.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.un=new Xw}addToCollectionParentIndex(e,r){return this.un.add(r),j.resolve()}getCollectionParents(e,r){return j.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return j.resolve()}deleteFieldIndex(e,r){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,r){return j.resolve()}getDocumentsMatchingTarget(e,r){return j.resolve(null)}getIndexType(e,r){return j.resolve(0)}getFieldIndexes(e,r){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,r){return j.resolve(In.min())}getMinOffsetFromCollectionGroup(e,r){return j.resolve(In.min())}updateCollectionGroup(e,r,n){return j.resolve()}updateIndexEntries(e,r){return j.resolve()}}class Xw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ut(pt.comparator),A=!s.has(n);return this.index[r]=s.add(n),A}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ut(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Uint8Array(0);class BD{constructor(e,r){this.databaseId=r,this.cn=new Xw,this.ln=new $s(n=>$i(n),(n,s)=>nu(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const A={collectionId:n,parent:qr(s)};return KB(e).put(A)}return j.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[DE(r),""],!1,!0);return KB(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==r)break;n.push(As(i.parent))}return n})}addFieldIndex(e,r){const n=wl(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(r);delete s.indexId;const A=n.add(s);if(r.indexState){const i=yo(e);return A.next(a=>{i.put(PB(a,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return A.next()}deleteFieldIndex(e,r){const n=wl(e),s=yo(e),A=wo(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=wl(e),n=wo(e),s=yo(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return j.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const A=new HB(n).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,r){const n=wo(e);let s=!0;const A=new Map;return j.forEach(this.hn(r),i=>this.Pn(e,i).next(a=>{s&&(s=!!a),A.set(i,a)})).next(()=>{if(s){let i=At();const a=[];return j.forEach(A,(o,c)=>{ae("IndexedDbIndexManager",`Using index ${function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(o)} to execute ${$i(r)}`);const d=function(C,F){const U=Mm(F);if(U===void 0)return null;for(const N of Ph(C,U.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,o),h=function(C,F){const U=new Map;for(const N of Ci(F))for(const x of Ph(C,N.fieldPath))switch(x.op){case"==":case"in":U.set(N.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return U.set(N.fieldPath.canonicalString(),x.value),Array.from(U.values())}return null}(c,o),f=function(C,F){const U=[];let N=!0;for(const x of Ci(F)){const B=x.kind===0?BB(C,x.fieldPath,C.startAt):bB(C,x.fieldPath,C.startAt);U.push(B.value),N&&(N=B.inclusive)}return new JA(U,N)}(c,o),m=function(C,F){const U=[];let N=!0;for(const x of Ci(F)){const B=x.kind===0?bB(C,x.fieldPath,C.endAt):BB(C,x.fieldPath,C.endAt);U.push(B.value),N&&(N=B.inclusive)}return new JA(U,N)}(c,o),v=this.In(o,c,f),y=this.In(o,c,m),I=this.Tn(o,c,h),b=this.En(o.indexId,d,v,f.inclusive,y,m.inclusive,I);return j.forEach(b,w=>n.G(w,r.limit).next(C=>{C.forEach(F=>{const U=Fe.fromSegments(F.documentKey);i.has(U)||(i=i.add(U),a.push(U))})}))}).next(()=>a)}return j.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=xD(Ft.create(e.filters,"and")).map(n=>zm(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,A,i,a){const o=(r!=null?r.length:1)*Math.max(n.length,A.length),c=o/(r!=null?r.length:1),d=[];for(let h=0;h<o;++h){const f=r?this.dn(r[h/c]):Yu,m=this.An(e,f,n[h%c],s),v=this.Rn(e,f,A[h%c],i),y=a.map(I=>this.An(e,f,I,!0));d.push(...this.createRange(m,v,y))}return d}An(e,r,n,s){const A=new Ti(e,Fe.empty(),r,n);return s?A:A.Zt()}Rn(e,r,n,s){const A=new Ti(e,Fe.empty(),r,n);return s?A.Zt():A}Pn(e,r){const n=new HB(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const a of A)n.rn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a);return i})}getIndexType(e,r){let n=2;const s=this.hn(r);return j.forEach(s,A=>this.Pn(e,A).next(i=>{i?n!==0&&i.fields.length<function(o){let c=new Ut(Kt.comparator),d=!1;for(const h of o.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of o.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new ml;for(const s of Ci(e)){const A=r.data.field(s.fieldPath);if(A==null)return null;const i=n.Yt(s.kind);Ei.vt.It(A,i)}return n.zt()}dn(e){const r=new ml;return Ei.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new ml;return Ei.vt.It(zi(this.databaseId,r),n.Yt(function(A){const i=Ci(A);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new ml);let A=0;for(const i of Ci(e)){const a=n[A++];for(const o of s)if(this.fn(r,i.fieldPath)&&Pc(a))s=this.gn(s,i,a);else{const c=o.Yt(i.kind);Ei.vt.It(a,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],A=[];for(const i of n.arrayValue.values||[])for(const a of s){const o=new ml;o.seed(a.zt()),Ei.vt.It(i,o.Yt(r.kind)),A.push(o)}return A}fn(e,r){return!!e.filters.find(n=>n instanceof mt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=wl(e),s=yo(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(A=>{const i=[];return j.forEach(A,a=>s.get([a.indexId,this.uid]).next(o=>{i.push(function(d,h){const f=h?new ma(h.sequenceNumber,new In(Ji(h.readTime),new Fe(As(h.documentKey)),h.largestBatchId)):ma.empty(),m=d.fields.map(([v,y])=>new Pi(Kt.fromServerFormat(v),y));return new pa(d.indexId,d.collectionGroup,m,f)}(a,o))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const A=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:rt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=wl(e),A=yo(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(a=>j.forEach(a,o=>A.put(PB(o.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return j.forEach(r,(s,A)=>{const i=n.get(s.collectionGroup);return(i?j.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(n.set(s.collectionGroup,a),j.forEach(a,o=>this.wn(e,s,o).next(c=>{const d=this.Sn(A,o);return c.isEqual(d)?j.resolve():this.bn(e,A,o,c,d)}))))})}Dn(e,r,n,s){return wo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return wo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=wo(e);let A=new Ut(tA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,a)=>{A=A.add(new Ti(n.indexId,r,a.arrayValue,a.directionalValue))}).next(()=>A)}Sn(e,r){let n=new Ut(tA);const s=this.Vn(r,e);if(s==null)return n;const A=Mm(r);if(A!=null){const i=e.data.field(A.fieldPath);if(Pc(i))for(const a of i.arrayValue.values||[])n=n.add(new Ti(r.indexId,e.key,this.dn(a),s))}else n=n.add(new Ti(r.indexId,e.key,Yu,s));return n}bn(e,r,n,s,A){ae("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(o,c,d,h,f){const m=o.getIterator(),v=c.getIterator();let y=mo(m),I=mo(v);for(;y||I;){let b=!1,w=!1;if(y&&I){const C=d(y,I);C<0?w=!0:C>0&&(b=!0)}else y!=null?w=!0:b=!0;b?(h(I),I=mo(v)):w?(f(y),y=mo(m)):(y=mo(m),I=mo(v))}}(s,A,tA,a=>{i.push(this.Dn(e,r,n,a))},a=>{i.push(this.vn(e,r,n,a))}),j.waitFor(i)}yn(e){let r=1;return yo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,A)=>{A.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,a)=>tA(i,a)).filter((i,a,o)=>!a||tA(i,o[a-1])!==0);const s=[];s.push(e);for(const i of n){const a=tA(i,e),o=tA(i,r);if(a===0)s[0]=e.Zt();else if(a>0&&o<0)s.push(i),s.push(i.Zt());else if(o>0)break}s.push(r);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const a=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,Yu,[]],o=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,Yu,[]];A.push(IDBKeyRange.bound(a,o))}return A}Cn(e,r){return tA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(GB)}getMinOffset(e,r){return j.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||De())).next(GB)}}function KB(t){return xr(t,"collectionParents")}function wo(t){return xr(t,"indexEntries")}function wl(t){return xr(t,"indexConfiguration")}function yo(t){return xr(t,"indexState")}function GB(t){Oe(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Rw(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new In(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(r.batchId);let a=0;const o=n.J({range:i},(d,h,f)=>(a++,f.delete()));A.push(o.next(()=>{Oe(a===1)}));const c=[];for(const d of r.mutations){const h=VE(e,d.key.path,r.batchId);A.push(s.delete(h)),c.push(d.key)}return j.waitFor(A).next(()=>c)}function Hh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw De();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);class Vf{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Oe(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new Vf(A,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rA(e).J({index:"userMutationsIndex",range:n},(s,A,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const A=ko(e),i=rA(e);return i.add({}).next(a=>{Oe(typeof a=="number");const o=new Vw(a,r,n,s),c=function(m,v,y){const I=y.baseMutations.map(w=>Mc(m.ct,w)),b=y.mutations.map(w=>Mc(m.ct,w));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:I,mutations:b}}(this.serializer,this.userId,o),d=[];let h=new Ut((f,m)=>rt(f.canonicalString(),m.canonicalString()));for(const f of s){const m=VE(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(m,l4))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),j.waitFor(d).next(()=>o)})}lookupMutationBatch(e,r){return rA(e).get(r).next(n=>n?(Oe(n.userId===this.userId),Ii(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?j.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let A=null;return rA(e).J({index:"userMutationsIndex",range:s},(i,a,o)=>{a.userId===this.userId&&(Oe(a.batchId>=n),A=Ii(this.serializer,a)),o.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return rA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,A,i)=>{n=A.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Ii(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Hd(this.userId,r.path),s=IDBKeyRange.lowerBound(n),A=[];return ko(e).J({range:s},(i,a,o)=>{const[c,d,h]=i,f=As(d);if(c===this.userId&&r.path.isEqual(f))return rA(e).get(h).next(m=>{if(!m)throw De();Oe(m.userId===this.userId),A.push(Ii(this.serializer,m))});o.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ut(rt);const s=[];return r.forEach(A=>{const i=Hd(this.userId,A.path),a=IDBKeyRange.lowerBound(i),o=ko(e).J({range:a},(c,d,h)=>{const[f,m,v]=c,y=As(m);f===this.userId&&A.path.isEqual(y)?n=n.add(v):h.done()});s.push(o)}),j.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,A=Hd(this.userId,n),i=IDBKeyRange.lowerBound(A);let a=new Ut(rt);return ko(e).J({range:i},(o,c,d)=>{const[h,f,m]=o,v=As(f);h===this.userId&&n.isPrefixOf(v)?v.length===s&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,r){const n=[],s=[];return r.forEach(A=>{s.push(rA(e).get(A).next(i=>{if(i===null)throw De();Oe(i.userId===this.userId),n.push(Ii(this.serializer,i))}))}),j.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return G1(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),j.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return j.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return ko(e).J({range:n},(A,i,a)=>{if(A[0]===this.userId){const o=As(A[1]);s.push(o)}else a.done()}).next(()=>{Oe(s.length===0)})})}containsKey(e,r){return z1(e,this.userId,r)}Nn(e){return $1(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function z1(t,e,r){const n=Hd(e,r.path),s=n[1],A=IDBKeyRange.lowerBound(n);let i=!1;return ko(t).J({range:A,H:!0},(a,o,c)=>{const[d,h,f]=a;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function rA(t){return xr(t,"mutations")}function ko(t){return xr(t,"documentMutations")}function $1(t){return xr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yi(0)}static kn(){return new Yi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Yi(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>$e.fromTimestamp(new Xt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>xo(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Oe(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const A=[];return xo(e).J((i,a)=>{const o=Dl(a);o.sequenceNumber<=r&&n.get(o.targetId)===null&&(s++,A.push(this.removeTargetData(e,o)))}).next(()=>j.waitFor(A)).next(()=>s)}forEachTarget(e,r){return xo(e).J((n,s)=>{const A=Dl(s);r(A)})}qn(e){return $B(e).get("targetGlobalKey").next(r=>(Oe(r!==null),r))}Qn(e,r){return $B(e).put("targetGlobalKey",r)}Kn(e,r){return xo(e).put(H1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=$i(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let A=null;return xo(e).J({range:s,index:"queryTargetsIndex"},(i,a,o)=>{const c=Dl(a);nu(r,c.target)&&(A=c,o.done())}).next(()=>A)}addMatchingKeys(e,r,n){const s=[],A=fA(e);return r.forEach(i=>{const a=qr(i.path);s.push(A.put({targetId:n,path:a})),s.push(this.referenceDelegate.addReference(e,n,i))}),j.waitFor(s)}removeMatchingKeys(e,r,n){const s=fA(e);return j.forEach(r,A=>{const i=qr(A.path);return j.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,A)])})}removeMatchingKeysForTargetId(e,r){const n=fA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=fA(e);let A=At();return s.J({range:n,H:!0},(i,a,o)=>{const c=As(i[1]),d=new Fe(c);A=A.add(d)}).next(()=>A)}containsKey(e,r){const n=qr(r.path),s=IDBKeyRange.bound([n],[DE(n)],!1,!0);let A=0;return fA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,a],o,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,r){return xo(e).get(r).next(n=>n?Dl(n):null)}}function xo(t){return xr(t,"targets")}function $B(t){return xr(t,"targetGlobal")}function fA(t){return xr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB([t,e],[r,n]){const s=rt(t,r);return s===0?rt(e,n):s}class CD{constructor(e){this.Un=e,this.buffer=new Ut(WB),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();WB(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class W1{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ai(r)?ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await oi(r)}await this.Hn(3e5)})}}class _D{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return j.resolve(un.oe);const n=new CD(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(zB)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zB):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,A,i,a,o,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(A=h,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),Eo()<=gt.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(a-i)+`ms
	Removed ${A} targets in `+(o-a)+`ms
	Removed ${h} documents in `+(c-o)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function q1(t,e){return new _D(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,r){this.db=e,this.garbageCollector=q1(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Zu(e,n)}removeReference(e,r,n){return Zu(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Zu(e,r)}nr(e,r){return function(s,A){let i=!1;return $1(s).Y(a=>z1(s,a,A).next(o=>(o&&(i=!0),j.resolve(!o)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,a)=>{if(a<=r){const o=this.nr(e,i).next(c=>{if(!c)return A++,n.getEntry(e,i).next(()=>(n.removeEntry(i,$e.min()),fA(e).delete(function(h){return[0,qr(h.path)]}(i))))});s.push(o)}}).next(()=>j.waitFor(s)).next(()=>n.apply(e)).next(()=>A)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Zu(e,r)}tr(e,r){const n=fA(e);let s,A=un.oe;return n.J({index:"documentTargetsIndex"},([i,a],{path:o,sequenceNumber:c})=>{i===0?(A!==un.oe&&r(new Fe(As(s)),A),A=c,s=o):A=un.oe}).next(()=>{A!==un.oe&&r(new Fe(As(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zu(t,e){return fA(t).put(function(n,s){return{targetId:0,path:qr(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.changes=new $s(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?j.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return yi(e).put(n)}removeEntry(e,r,n){return yi(e).delete(function(A,i){const a=A.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Mh(i),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Vt.newInvalidDocument(r);return yi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yl(r))},(s,A)=>{n=this.ir(r,A)}).next(()=>n)}sr(e,r){let n={size:0,document:Vt.newInvalidDocument(r)};return yi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yl(r))},(s,A)=>{n={document:this.ir(r,A),size:Hh(A)}}).next(()=>n)}getEntries(e,r){let n=hn();return this._r(e,r,(s,A)=>{const i=this.ir(s,A);n=n.insert(s,i)}).next(()=>n)}ar(e,r){let n=hn(),s=new Mt(Fe.comparator);return this._r(e,r,(A,i)=>{const a=this.ir(A,i);n=n.insert(A,a),s=s.insert(A,Hh(i))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return j.resolve();let s=new Ut(JB);r.forEach(o=>s=s.add(o));const A=IDBKeyRange.bound(yl(s.first()),yl(s.last())),i=s.getIterator();let a=i.getNext();return yi(e).J({index:"documentKeyIndex",range:A},(o,c,d)=>{const h=Fe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&JB(a,h)<0;)n(a,null),a=i.getNext();a&&a.isEqual(h)&&(n(a,c),a=i.hasNext()?i.getNext():null),a?d.$(yl(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,A){const i=r.path,a=[i.popLast().toArray(),i.lastSegment(),Mh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yi(e).U(IDBKeyRange.bound(a,o,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=hn();for(const h of c){const f=this.ir(Fe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Au(r,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,s){let A=hn();const i=XB(r,n),a=XB(r,In.max());return yi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(o,c,d)=>{const h=this.ir(Fe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new TD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return qB(e).get("remoteDocumentGlobalKey").next(r=>(Oe(!!r),r))}rr(e,r){return qB(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=hD(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual($e.min())))return n}return Vt.newInvalidDocument(e)}}function J1(t){return new ED(t)}class TD extends X1{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new $s(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Ut((A,i)=>rt(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const a=this.lr.get(A);if(r.push(this.cr.removeEntry(e,A,a.readTime)),i.isValidDocument()){const o=RB(this.cr.serializer,i);s=s.add(A.path.popLast());const c=Hh(o);n+=c-a.size,r.push(this.cr.addEntry(e,A,o))}else if(n-=a.size,this.trackRemovals){const o=RB(this.cr.serializer,i.convertToNoDocument($e.min()));r.push(this.cr.addEntry(e,A,o))}}),s.forEach(A=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),r.push(this.cr.updateMetadata(e,n)),j.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:n.get(A).readTime})}),n))}}function qB(t){return xr(t,"remoteDocumentGlobal")}function yi(t){return xr(t,"remoteDocumentsV14")}function yl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XB(t,e){const r=e.documentKey.path.toArray();return[t,Mh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function JB(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let A=0;A<r.length-2&&A<n.length-2;++A)if(s=rt(r[A],n[A]),s)return s;return s=rt(r.length,n.length),s||(s=rt(r[r.length-2],n[n.length-2]),s||rt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&nc(n.mutation,s,dn.empty(),Xt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,At()).next(()=>n))}getLocalViewOfDocuments(e,r,n=At()){const s=is();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(A=>{let i=Nl();return A.forEach((a,o)=>{i=i.insert(a,o.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=is();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,At()))}populateOverlays(e,r,n){const s=[];return n.forEach(A=>{r.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,a)=>{r.set(i,a)})})}computeViews(e,r,n,s){let A=hn();const i=rc(),a=function(){return rc()}();return r.forEach((o,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ws)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),nc(d.mutation,c,d.mutation.getFieldMask(),Xt.now())):i.set(c.key,dn.empty())}),this.recalculateAndSaveOverlays(e,A).next(o=>(o.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return a.set(c,new FD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=rc();let s=new Mt((i,a)=>i-a),A=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const a of i)a.keys().forEach(o=>{const c=r.get(o);if(c===null)return;let d=n.get(o)||dn.empty();d=a.applyToLocalView(c,d),n.set(o,d);const h=(s.get(a.batchId)||At()).add(o);s=s.insert(a.batchId,h)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),c=o.key,d=o.value,h=f1();d.forEach(f=>{if(!A.has(f)){const m=v1(r.get(f),n.get(f));m!==null&&h.set(f,m),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return j.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return Fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):jw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-A.size):j.resolve(is());let a=-1,o=A;return i.next(c=>j.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),A.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{o=o.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,o,c,At())).next(d=>({batchId:a,changes:h1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Fe(r)).next(n=>{let s=Nl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const A=r.collectionGroup;let i=Nl();return this.indexManager.getCollectionParents(e,A).next(a=>j.forEach(a,o=>{const c=function(h,f){return new zs(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,o.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,A,s))).next(i=>{A.forEach((o,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Vt.newInvalidDocument(d)))});let a=Nl();return i.forEach((o,c)=>{const d=A.get(o);d!==void 0&&nc(d.mutation,c,dn.empty(),Xt.now()),Au(r,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return j.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:dr(s.createTime)}}(r)),j.resolve()}getNamedQuery(e,r){return j.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:Ww(s.bundledQuery),readTime:dr(s.readTime)}}(r)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.overlays=new Mt(Fe.comparator),this.Ir=new Map}getOverlay(e,r){return j.resolve(this.overlays.get(r))}getOverlays(e,r){const n=is();return j.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,A)=>{this.ht(e,r,A)}),j.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(n)),j.resolve()}getOverlaysForCollection(e,r,n){const s=is(),A=r.length+1,i=new Fe(r.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const o=a.getNext().value,c=o.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===A&&o.largestBatchId>n&&s.set(o.getKey(),o)}return j.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let A=new Mt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=A.get(c.largestBatchId);d===null&&(d=is(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=is(),o=A.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return j.resolve(a)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Gw(r,n));let A=this.Ir.get(r);A===void 0&&(A=At(),this.Ir.set(r,A)),this.Ir.set(r,A.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.Tr=new Ut(Cr.Er),this.dr=new Ut(Cr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Cr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Cr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Fe(new pt([])),n=new Cr(r,e),s=new Cr(r,e+1),A=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Fe(new pt([])),n=new Cr(r,e),s=new Cr(r,e+1);let A=At();return this.dr.forEachInRange([n,s],i=>{A=A.add(i.key)}),A}containsKey(e){const r=new Cr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Cr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Fe.comparator(e.key,r.key)||rt(e.wr,r.wr)}static Ar(e,r){return rt(e.wr,r.wr)||Fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ut(Cr.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Vw(A,r,n,s);this.mutationQueue.push(i);for(const a of s)this.br=this.br.add(new Cr(a.key,A)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(i)}lookupMutationBatch(e,r){return j.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),A=s<0?0:s;return j.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Cr(r,0),s=new Cr(r,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([n,s],i=>{const a=this.Dr(i.wr);A.push(a)}),j.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ut(rt);return r.forEach(s=>{const A=new Cr(s,0),i=new Cr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],a=>{n=n.add(a.wr)})}),j.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let A=n;Fe.isDocumentKey(A)||(A=A.child(""));const i=new Cr(new Fe(A),0);let a=new Ut(rt);return this.br.forEachWhile(o=>{const c=o.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(a=a.add(o.wr)),!0)},i),j.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Oe(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return j.forEach(r.mutations,s=>{const A=new Cr(s.key,r.batchId);return n=n.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Cr(r,0),s=this.br.firstAfterOrEqual(n);return j.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.Mr=e,this.docs=function(){return new Mt(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),A=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return j.resolve(n?n.document.mutableCopy():Vt.newInvalidDocument(r))}getEntries(e,r){let n=hn();return r.forEach(s=>{const A=this.docs.get(s);n=n.insert(s,A?A.document.mutableCopy():Vt.newInvalidDocument(s))}),j.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let A=hn();const i=r.path,a=new Fe(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:c,value:{document:d}}=o.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Rw(LE(d),n)<=0||(s.has(d.key)||Au(r,d))&&(A=A.insert(d.key,d.mutableCopy()))}return j.resolve(A)}getAllFromCollectionGroup(e,r,n,s){De()}Or(e,r){return j.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new RD(this)}getSize(e){return j.resolve(this.size)}}class RD extends X1{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),j.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.persistence=e,this.Nr=new $s(r=>$i(r),nu),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jw,this.targetCount=0,this.kr=Yi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),j.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Yi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,j.resolve()}updateTargetData(e,r){return this.Kn(r),j.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,r,n){let s=0;const A=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),j.waitFor(A).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return j.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),j.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,A=[];return s&&r.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),j.waitFor(A)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),j.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return j.resolve(n)}containsKey(e,r){return j.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new un(0),this.Kr=!1,this.Kr=!0,this.$r=new UD,this.referenceDelegate=e(this),this.Ur=new DD(this),this.indexManager=new vD,this.remoteDocumentCache=function(s){return new ND(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new O1(r),this.Gr=new kD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new SD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new QD(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ae("MemoryPersistence","Starting transaction:",e);const s=new PD(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,r){return j.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class PD extends ME{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Jr=new Jw,this.Yr=null}static Zr(e){return new Kf(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),j.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),j.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),j.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,n=>{const s=Fe.fromPath(n);return this.ei(e,s).next(A=>{A||r.removeEntry(s,$e.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return j.or([()=>j.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Vh{constructor(e,r){this.persistence=e,this.ti=new $s(n=>qr(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=q1(this,r)}static Zr(e,r){return new Vh(e,r)}zr(){}jr(e){return j.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return j.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(A=>A?j.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),A=s.newChangeBuffer();return s.Or(e,i=>this.nr(e,i,r).next(a=>{a||(n++,A.removeEntry(i,$e.min()))})).next(()=>A.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Kd(e.data.value)),r}nr(e,r,n){return j.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return j.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.serializer=e}O(e,r,n,s){const A=new Rf("createOrUpgrade",r);n<1&&s>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uB,{unique:!0}),o.createObjectStore("documentMutations")}(e),YB(e),function(o){o.createObjectStore("remoteDocuments")}(e));let i=j.resolve();return n<3&&s>=3&&(n!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),YB(e)),i=i.next(()=>function(o){const c=o.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$e.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),n<4&&s>=4&&(n!==0&&(i=i.next(()=>function(o,c){return c.store("mutations").U().next(d=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uB,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return j.waitFor(f)})}(e,A))),i=i.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(i=i.next(()=>this.ni(A))),n<6&&s>=6&&(i=i.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),n<7&&s>=7&&(i=i.next(()=>this.ii(A))),n<8&&s>=8&&(i=i.next(()=>this.si(e,A))),n<9&&s>=9&&(i=i.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(i=i.next(()=>this.oi(A))),n<11&&s>=11&&(i=i.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:v4});c.createIndex("collectionPathOverlayIndex",B4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",b4,{unique:!1})})(e)})),n<13&&s>=13&&(i=i.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:c4});c.createIndex("documentKeyIndex",u4),c.createIndex("collectionGroupIndex",d4)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),n<15&&s>=15&&(i=i.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:m4}).createIndex("sequenceNumberIndex",w4,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:y4}).createIndex("documentKeyIndex",x4,{unique:!1})}(e))),n<16&&s>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(i=i.next(()=>{(function(o){o.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Hh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>j.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(a=>j.forEach(a,o=>{Oe(o.userId===A.userId);const c=Ii(this.serializer,o);return G1(e,A.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return n.J((i,a)=>{const o=new pt(i),c=function(h){return[0,qr(h)]}(o);A.push(r.get(c).next(d=>d?j.resolve():(h=>r.put({targetId:0,path:qr(h),sequenceNumber:s.highestListenSequenceNumber}))(o)))}).next(()=>j.waitFor(A))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:p4});const n=r.store("collectionParents"),s=new Xw,A=i=>{if(s.add(i)){const a=i.lastSegment(),o=i.popLast();return n.put({collectionId:a,parent:qr(o)})}};return r.store("remoteDocuments").J({H:!0},(i,a)=>{const o=new pt(i);return A(o.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,a,o],c)=>{const d=As(a);return A(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const A=Dl(s),i=H1(this.serializer,A);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((A,i)=>{const a=r.store("remoteDocumentsV14"),o=function(h){return h.document?new Fe(pt.fromString(h.document.name).popFirst(5)):h.noDocument?Fe.fromSegments(h.noDocument.path):h.unknownDocument?Fe.fromSegments(h.unknownDocument.path):De()}(i).path.toArray(),c={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(a.put(c))}).next(()=>j.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=J1(this.serializer),A=new Yw(Kf.Zr,this.serializer.ct);return n.U().next(i=>{const a=new Map;return i.forEach(o=>{var c;let d=(c=a.get(o.userId))!==null&&c!==void 0?c:At();Ii(this.serializer,o).keys().forEach(h=>d=d.add(h)),a.set(o.userId,d)}),j.forEach(a,(o,c)=>{const d=new Ir(c),h=Hf.lt(this.serializer,d),f=A.getIndexManager(d),m=Vf.lt(d,this.serializer,f,A.referenceDelegate);return new Y1(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Om(r,un.oe),o).next()})})}}function YB(t){t.createObjectStore("targetDocuments",{keyPath:f4}).createIndex("documentTargetsIndex",g4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",h4,{unique:!0}),t.createObjectStore("targetGlobal")}const op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zw{constructor(e,r,n,s,A,i,a,o,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=A,this.window=i,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Zw.D())throw new ie(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ID(this,s),this.Ai=r+"main",this.serializer=new O1(o),this.Ri=new ls(this.Ai,this.hi,new LD(this.serializer)),this.$r=new gD,this.Ur=new bD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=J1(this.serializer),this.Gr=new fD,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(z.FAILED_PRECONDITION,op);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new un(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ed(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ai(e))return ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return xl(e).get("owner").next(r=>j.resolve(this.vi(r)))}Ci(e){return ed(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=xr(r,"clientMetadata");return n.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(a=>A.indexOf(a)===-1);return j.forEach(i,a=>n.delete(a.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?j.resolve(!0):xl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ie(z.FAILED_PRECONDITION,op);return!1}}return!(!this.networkEnabled||!this.inForeground)||ed(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(A||i&&a)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&ae("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Om(e,un.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ed(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Vf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Hf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ae("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",A=function(o){return o===17?I4:o===16?_4:o===15?Pw:o===14?zE:o===13?GE:o===12?C4:o===11?KE:void De()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,a=>(i=new Om(a,this.Qr?this.Qr.next():un.oe),r==="readwrite-primary"?this.wi(i).next(o=>!!o||this.Si(i)).next(o=>{if(!o)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ie(z.FAILED_PRECONDITION,jE);return n(i)}).next(o=>this.Di(i).next(()=>o)):this.Ki(i).next(()=>n(i)))).then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e){return xl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ie(z.FAILED_PRECONDITION,op)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xl(e).put("owner",r)}static D(){return ls.D()}bi(e){const r=xl(e);return r.get("owner").next(n=>this.vi(n)?(ae("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):j.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ur(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;xE()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ae("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ur("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xl(t){return xr(t,"owner")}function ed(t){return xr(t,"clientMetadata")}function ey(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=At(),s=At();for(const A of r.docChanges)switch(A.type){case 0:n=n.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new ty(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xE()?8:OE(yr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const A={result:null};return this.Yi(e,r).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,r,s,n).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new jD;return this.Xi(e,r,i).next(a=>{if(A.result=a,this.zi)return this.es(e,r,i,a.size)})}).next(()=>A.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Eo()<=gt.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",To(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Eo()<=gt.DEBUG&&ae("QueryEngine","Query:",To(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Eo()<=gt.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",To(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(r))):j.resolve())}Yi(e,r){if(CB(r))return j.resolve(null);let n=Xr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Lh(r,null,"F"),n=Xr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(A=>{const i=At(...A);return this.Ji.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,n).next(o=>{const c=this.ts(r,a);return this.ns(r,c,i,o.readTime)?this.Yi(e,Lh(r,null,"F")):this.rs(e,c,r,o)}))})))}Zi(e,r,n,s){return CB(r)||s.isEqual($e.min())?j.resolve(null):this.Ji.getDocuments(e,n).next(A=>{const i=this.ts(r,A);return this.ns(r,i,n,s)?j.resolve(null):(Eo()<=gt.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),To(r)),this.rs(e,i,r,PE(s,-1)).next(a=>a))})}ts(e,r){let n=new Ut(u1(e));return r.forEach((s,A)=>{Au(e,A)&&(n=n.add(A))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const A=e.limitType==="F"?r.last():r.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,r,n){return Eo()<=gt.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",To(r)),this.Ji.getDocumentsMatchingQuery(e,r,In.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(A=>(r.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Mt(rt),this._s=new $s(A=>$i(A),nu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function eT(t,e,r,n){return new MD(t,e,r,n)}async function tT(t,e){const r=_e(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(A=>(s=A,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(A=>{const i=[],a=[];let o=At();for(const c of s){i.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}for(const c of A){a.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}return r.localDocuments.getDocuments(n,o).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:a}))})})}function OD(t,e){const r=_e(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),A=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,o,c,d){const h=c.batch,f=h.keys();let m=j.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(o,v)).next(y=>{const I=c.docVersions.get(v);Oe(I!==null),y.version.compareTo(I)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(o,h))}(r,n,e,A).next(()=>A.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let o=At();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function rT(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function HD(t,e){const r=_e(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(r.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(A,d.addedDocuments,h)));let m=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(sr.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(h,m),function(y,I,b){return y.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,m,d)&&a.push(r.Ur.updateTargetData(A,m))});let o=hn(),c=At();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(A,d))}),a.push(nT(A,i,e.documentUpdates).next(d=>{o=d.Ps,c=d.Is})),!n.isEqual($e.min())){const d=r.Ur.getLastRemoteSnapshotVersion(A).next(h=>r.Ur.setTargetsMetadata(A,A.currentSequenceNumber,n));a.push(d)}return j.waitFor(a).next(()=>i.apply(A)).next(()=>r.localDocuments.getLocalViewOfDocuments(A,o,c)).next(()=>o)}).then(A=>(r.os=s,A))}function nT(t,e,r){let n=At(),s=At();return r.forEach(A=>n=n.add(A)),e.getEntries(t,n).next(A=>{let i=hn();return r.forEach((a,o)=>{const c=A.get(a);o.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),o.isNoDocument()&&o.version.isEqual($e.min())?(e.removeEntry(a,o.readTime),i=i.insert(a,o)):!c.isValidDocument()||o.version.compareTo(c.version)>0||o.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(o),i=i.insert(a,o)):ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",o.version)}),{Ps:i,Is:s}})}function VD(t,e){const r=_e(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ba(t,e){const r=_e(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(A=>A?(s=A,j.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Es(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ca(t,e,r){const n=_e(t),s=n.os.get(e),A=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",A,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!ai(i))throw i;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Kh(t,e,r){const n=_e(t);let s=$e.min(),A=At();return n.persistence.runTransaction("Execute query","readwrite",i=>function(o,c,d){const h=_e(o),f=h._s.get(d);return f!==void 0?j.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,Xr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,a.targetId).next(o=>{A=o})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:$e.min(),r?A:At())).next(a=>(iT(n,c1(e),a),{documents:a,Ts:A})))}function sT(t,e){const r=_e(t),n=_e(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",A=>n.ot(A,e).next(i=>i?i.target:null))}function AT(t,e){const r=_e(t),n=r.us.get(e)||$e.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,PE(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(iT(r,e,s),s))}function iT(t,e,r){let n=t.us.get(e)||$e.min();r.forEach((s,A)=>{A.readTime.compareTo(n)>0&&(n=A.readTime)}),t.us.set(e,n)}async function KD(t,e,r,n){const s=_e(t);let A=At(),i=hn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),o=await ba(s,function(d){return Xr(ja(pt.fromString(`__bundle__/docs/${d}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>nT(c,a,i).next(d=>(a.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,o.targetId).next(()=>s.Ur.addMatchingKeys(c,A,o.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function GD(t,e,r=At()){const n=await ba(t,Xr(Ww(e.bundledQuery))),s=_e(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=dr(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const a=n.withResumeToken(sr.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(A,a).next(()=>s.Ur.removeMatchingKeysForTargetId(A,n.targetId)).next(()=>s.Ur.addMatchingKeys(A,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function ZB(t,e){return`firestore_clients_${t}_${e}`}function eb(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function ap(t,e){return`firestore_targets_${t}_${e}`}class Gh{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new ie(s.error.code,s.error.message))),i?new Gh(e,r,s.state,A):(ur("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sc{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,A=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return A&&n.error&&(A=typeof n.error.message=="string"&&typeof n.error.code=="string",A&&(s=new ie(n.error.code,n.error.message))),A?new sc(e,n.state,s):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,A=Mw();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=HE(n.activeTargetIds[i]),A=A.add(n.activeTargetIds[i]);return s?new zh(e,A):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class ry{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new ry(r.clientId,r.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class t0{constructor(){this.activeTargetIds=Mw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lp{constructor(e,r,n,s,A){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Mt(rt),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=ZB(this.persistenceKey,this.ps),this.vs=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new t0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Os=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(ZB(this.persistenceKey,n));if(s){const A=zh.Rs(n,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(ap(this.persistenceKey,e));if(s){const A=sc.Rs(e,s);A&&(n=A.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ap(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ae("SharedClientState","READ",e,r),r}setItem(e,r){ae("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(A){let i=un.oe;if(A!=null)try{const a=JSON.parse(A);Oe(typeof a=="number"),i=a}catch(a){ur("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(r.newValue);n!==un.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new Gh(this.currentUser,e,r,n),A=eb(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const r=eb(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=ap(this.persistenceKey,e),A=new sc(e,r,n);this.setItem(s,A.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return zh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),A=n[2]!==void 0?n[2]:null;return Gh.Rs(new Ir(A),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return sc.Rs(s,r)}Ls(e){return ry.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(n),i=[],a=[];return A.forEach(o=>{s.has(o)||i.push(o)}),s.forEach(o=>{A.has(o)||a.push(o)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Mw();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class oT{constructor(){this.so=new t0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new t0,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td=null;function cp(){return td===null?td=function(){return 268435456+Math.round(2147483648*Math.random())}():td++,"0x"+td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="WebChannelConnection";class qD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(r,n,s,A,i){const a=cp(),o=this.xo(r,n.toUriEncodedString());ae("RestConnection",`Sending RPC '${r}' ${a}:`,o,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(r,o,c,s).then(d=>(ae("RestConnection",`Received RPC '${r}' ${a}: `,d),d),d=>{throw _n("RestConnection",`RPC '${r}' ${a} failed with error: `,d,"url: ",o,"request:",s),d})}Lo(r,n,s,A,i,a){return this.Mo(r,n,s,A,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+La}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((A,i)=>r[i]=A),s&&s.headers.forEach((A,i)=>r[i]=A)}xo(r,n){const s=$D[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const A=cp();return new Promise((i,a)=>{const o=new TE;o.setWithCredentials(!0),o.listenOnce(FE.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Od.NO_ERROR:const d=o.getResponseJson();ae(Kr,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case Od.TIMEOUT:ae(Kr,`RPC '${e}' ${A} timed out`),a(new ie(z.DEADLINE_EXCEEDED,"Request time out"));break;case Od.HTTP_ERROR:const h=o.getStatus();if(ae(Kr,`RPC '${e}' ${A} failed with status:`,h,"response text:",o.getResponseText()),h>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(I){const b=I.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(b)>=0?b:z.UNKNOWN}(m.status);a(new ie(v,m.message))}else a(new ie(z.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ie(z.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ae(Kr,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);ae(Kr,`RPC '${e}' ${A} sending request:`,s),o.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=cp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=UE(),a=SE(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const d=A.join("");ae(Kr,`Creating RPC '${e}' stream ${s}: ${d}`,o);const h=i.createWebChannel(d,o);let f=!1,m=!1;const v=new WD({Io:I=>{m?ae(Kr,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(f||(ae(Kr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ae(Kr,`RPC '${e}' stream ${s} sending:`,I),h.send(I))},To:()=>h.close()}),y=(I,b,w)=>{I.listen(b,C=>{try{w(C)}catch(F){setTimeout(()=>{throw F},0)}})};return y(h,Ql.EventType.OPEN,()=>{m||(ae(Kr,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),y(h,Ql.EventType.CLOSE,()=>{m||(m=!0,ae(Kr,`RPC '${e}' stream ${s} transport closed`),v.So())}),y(h,Ql.EventType.ERROR,I=>{m||(m=!0,_n(Kr,`RPC '${e}' stream ${s} transport errored:`,I),v.So(new ie(z.UNAVAILABLE,"The operation could not be completed")))}),y(h,Ql.EventType.MESSAGE,I=>{var b;if(!m){const w=I.data[0];Oe(!!w);const C=w,F=C.error||((b=C[0])===null||b===void 0?void 0:b.error);if(F){ae(Kr,`RPC '${e}' stream ${s} received error:`,F);const U=F.status;let N=function(_){const S=hr[_];if(S!==void 0)return _1(S)}(U),x=F.message;N===void 0&&(N=z.INTERNAL,x="Unknown error status: "+U+" with message "+F.message),m=!0,v.So(new ie(N,x)),h.close()}else ae(Kr,`RPC '${e}' stream ${s} received:`,w),v.bo(w)}}),y(a,kE.STAT_EVENT,I=>{I.stat===jm.PROXY?ae(Kr,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===jm.NOPROXY&&ae(Kr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof window<"u"?window:null}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){return new nD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,r,n=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,r,n,s,A,i,a,o){this.ui=e,this.Ho=n,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ny(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===z.RESOURCE_EXHAUSTED?(ur(r.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ie(z.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XD extends lT{constructor(e,r,n,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=iD(this.serializer,e),n=function(A){if(!("targetChange"in A))return $e.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?$e.min():i.readTime?dr(i.readTime):$e.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Xm(this.serializer),r.addTarget=function(A,i){let a;const o=i.target;if(a=Dh(o)?{documents:R1(A,o)}:{query:Of(A,o)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=F1(A,i.resumeToken);const c=Wm(A,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo($e.min())>0){a.readTime=Ba(A,i.snapshotVersion.toTimestamp());const c=Wm(A,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=aD(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Xm(this.serializer),r.removeTarget=e,this.a_(r)}}class JD extends lT{constructor(e,r,n,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=oD(e.writeResults,e.commitTime),n=dr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Xm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Mc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,qm(r,n),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new ie(z.UNKNOWN,A.toString())})}Lo(e,r,n,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Lo(e,qm(r,n),s,i,a,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(z.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ZD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ur(r),this.D_=!1):ae("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,r,n,s,A){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{n.enqueueAndForget(async()=>{ci(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=_e(o);c.L_.add(4),await Ha(c),c.q_.set("Unknown"),c.L_.delete(4),await cu(c)}(this))})}),this.q_=new ZD(n,s)}}async function cu(t){if(ci(t))for(const e of t.B_)await e(!0)}async function Ha(t){for(const e of t.B_)await e(!1)}function Gf(t,e){const r=_e(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),iy(r)?Ay(r):Ka(r).r_()&&sy(r,e))}function _a(t,e){const r=_e(t),n=Ka(r);r.N_.delete(e),n.r_()&&cT(r,e),r.N_.size===0&&(n.r_()?n.o_():ci(r)&&r.q_.set("Unknown"))}function sy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ka(t).A_(e)}function cT(t,e){t.Q_.xe(e),Ka(t).R_(e)}function Ay(t){t.Q_=new Z4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ka(t).start(),t.q_.v_()}function iy(t){return ci(t)&&!Ka(t).n_()&&t.N_.size>0}function ci(t){return _e(t).L_.size===0}function uT(t){t.Q_=void 0}async function tP(t){t.q_.set("Online")}async function rP(t){t.N_.forEach((e,r)=>{sy(t,e)})}async function nP(t,e){uT(t),iy(t)?(t.q_.M_(e),Ay(t)):t.q_.set("Unknown")}async function sP(t,e,r){if(t.q_.set("Online"),e instanceof T1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const a of A.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(n){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await $h(t,n)}else if(e instanceof $d?t.Q_.Ke(e):e instanceof E1?t.Q_.He(e):t.Q_.We(e),!r.isEqual($e.min()))try{const n=await rT(t.localStore);r.compareTo(n)>=0&&await function(A,i){const a=A.Q_.rt(i);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,c)=>{const d=A.N_.get(o);if(!d)return;A.N_.set(o,d.withResumeToken(sr.EMPTY_BYTE_STRING,d.snapshotVersion)),cT(A,o);const h=new Es(d.target,o,c,d.sequenceNumber);sy(A,h)}),A.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ae("RemoteStore","Failed to raise snapshot:",n),await $h(t,n)}}async function $h(t,e,r){if(!ai(e))throw e;t.L_.add(1),await Ha(t),t.q_.set("Offline"),r||(r=()=>rT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await cu(t)})}function dT(t,e){return e().catch(r=>$h(t,r,e))}async function Va(t){const e=_e(t),r=YA(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;AP(e);)try{const s=await VD(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,iP(e,s)}catch(s){await $h(e,s)}hT(e)&&fT(e)}function AP(t){return ci(t)&&t.O_.length<10}function iP(t,e){t.O_.push(e);const r=YA(t);r.r_()&&r.V_&&r.m_(e.mutations)}function hT(t){return ci(t)&&!YA(t).n_()&&t.O_.length>0}function fT(t){YA(t).start()}async function oP(t){YA(t).p_()}async function aP(t){const e=YA(t);for(const r of t.O_)e.m_(r.mutations)}async function lP(t,e,r){const n=t.O_.shift(),s=Kw.from(n,e,r);await dT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Va(t)}async function cP(t,e){e&&YA(t).V_&&await async function(n,s){if(function(i){return C1(i)&&i!==z.ABORTED}(s.code)){const A=n.O_.shift();YA(n).s_(),await dT(n,()=>n.remoteSyncer.rejectFailedWrite(A.batchId,s)),await Va(n)}}(t,e),hT(t)&&fT(t)}async function rb(t,e){const r=_e(t);r.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const n=ci(r);r.L_.add(3),await Ha(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await cu(r)}async function r0(t,e){const r=_e(t);e?(r.L_.delete(2),await cu(r)):e||(r.L_.add(2),await Ha(r),r.q_.set("Unknown"))}function Ka(t){return t.K_||(t.K_=function(r,n,s){const A=_e(r);return A.w_(),new XD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:tP.bind(null,t),Ro:rP.bind(null,t),mo:nP.bind(null,t),d_:sP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),iy(t)?Ay(t):t.q_.set("Unknown")):(await t.K_.stop(),uT(t))})),t.K_}function YA(t){return t.U_||(t.U_=function(r,n,s){const A=_e(r);return A.w_(),new JD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oP.bind(null,t),mo:cP.bind(null,t),f_:aP.bind(null,t),g_:lP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Va(t)):(await t.U_.stop(),t.O_.length>0&&(ae("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,r,n,s,A){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=A,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,A){const i=Date.now()+n,a=new oy(e,r,i,s,A);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ga(t,e){if(ur("AsyncQueue",`${e}: ${t}`),ai(t))return new ie(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Fe.comparator(r.key,n.key):(r,n)=>Fe.comparator(r.key,n.key),this.keyedMap=Nl(),this.sortedSet=new Mt(this.comparator)}static emptySet(e){return new ta(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ta;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.W_=new Mt(Fe.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ia{constructor(e,r,n,s,A,i,a,o,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,A){const i=[];return r.forEach(a=>{i.push({type:0,doc:a})}),new Ia(e,r,ta.emptySet(r),i,n,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class dP{constructor(){this.queries=sb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=_e(r),A=s.queries;s.queries=sb(),A.forEach((i,a)=>{for(const o of a.j_)o.onError(n)})})(this,new ie(z.ABORTED,"Firestore shutting down"))}}function sb(){return new $s(t=>l1(t),su)}async function ay(t,e){const r=_e(t);let n=3;const s=e.query;let A=r.queries.get(s);A?!A.H_()&&e.J_()&&(n=2):(A=new uP,n=e.J_()?0:1);try{switch(n){case 0:A.z_=await r.onListen(s,!0);break;case 1:A.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const a=Ga(i,`Initialization of query '${To(e.query)}' failed`);return void e.onError(a)}r.queries.set(s,A),A.j_.push(e),e.Z_(r.onlineState),A.z_&&e.X_(A.z_)&&cy(r)}async function ly(t,e){const r=_e(t),n=e.query;let s=3;const A=r.queries.get(n);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function hP(t,e){const r=_e(t);let n=!1;for(const s of e){const A=s.query,i=r.queries.get(A);if(i){for(const a of i.j_)a.X_(s)&&(n=!0);i.z_=s}}n&&cy(r)}function fP(t,e,r){const n=_e(t),s=n.queries.get(e);if(s)for(const A of s.j_)A.onError(r);n.queries.delete(e)}function cy(t){t.Y_.forEach(e=>{e.next()})}var n0,Ab;(Ab=n0||(n0={})).ea="default",Ab.Cache="cache";class uy{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ia(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==n0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.serializer=e}Es(e){return cs(this.serializer,e)}ds(e){return e.metadata.exists?N1(this.serializer,e.document,!1):Vt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dr(e)}}class pP{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=pt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new ib(this.serializer);for(const s of e)if(s.metadata.queries){const A=n.Es(s.metadata.name);for(const i of s.metadata.queries){const a=(r.get(i)||At()).add(A);r.set(i,a)}}return r}async complete(){const e=await KD(this.localStore,new ib(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await GD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function gT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.key=e}}class mT{constructor(e){this.key=e}}class wT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=At(),this.mutatedKeys=At(),this.Aa=u1(e),this.Ra=new ta(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new nb,s=r?r.Ra:this.Ra;let A=r?r.mutatedKeys:this.mutatedKeys,i=s,a=!1;const o=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Au(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?v!==y&&(n.track({type:3,doc:m}),I=!0):this.ga(f,m)||(n.track({type:2,doc:m}),I=!0,(o&&this.Aa(m,o)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(n.track({type:0,doc:m}),I=!0):f&&!m&&(n.track({type:1,doc:f}),I=!0,(o||c)&&(a=!0)),I&&(m?(i=i.add(m),A=y?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:a,mutatedKeys:A}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,v){const y=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return y(m)-y(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const a=r&&!s?this.ya():[],o=this.da.size===0&&this.current&&!s?1:0,c=o!==this.Ea;return this.Ea=o,i.length!==0||c?{snapshot:new Ia(this.query,e.Ra,A,i,e.mutatedKeys,o===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=At(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new mT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new pT(n))}),r}ba(e){this.Ta=e.Ts,this.da=At();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class wP{constructor(e){this.key=e,this.va=!1}}class yP{constructor(e,r,n,s,A,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new $s(a=>l1(a),su),this.Ma=new Map,this.xa=new Set,this.Oa=new Mt(Fe.comparator),this.Na=new Map,this.La=new Jw,this.Ba={},this.ka=new Map,this.qa=Yi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function xP(t,e,r=!0){const n=zf(t);let s;const A=n.Fa.get(e);return A?(n.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await yT(n,e,r,!0),s}async function vP(t,e){const r=zf(t);await yT(r,e,!0,!1)}async function yT(t,e,r,n){const s=await ba(t.localStore,Xr(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,r);let a;return n&&(a=await dy(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&Gf(t.remoteStore,s),a}async function dy(t,e,r,n,s){t.Ka=(h,f,m)=>async function(y,I,b,w){let C=I.view.ma(b);C.ns&&(C=await Kh(y.localStore,I.query,!1).then(({documents:x})=>I.view.ma(x,C)));const F=w&&w.targetChanges.get(I.targetId),U=w&&w.targetMismatches.get(I.targetId)!=null,N=I.view.applyChanges(C,y.isPrimaryClient,F,U);return s0(y,I.targetId,N.wa),N.snapshot}(t,h,f,m);const A=await Kh(t.localStore,e,!0),i=new wT(e,A.Ts),a=i.ma(A.documents),o=au.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(a,t.isPrimaryClient,o);s0(t,r,c.wa);const d=new mP(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function BP(t,e,r){const n=_e(t),s=n.Fa.get(e),A=n.Ma.get(s.targetId);if(A.length>1)return n.Ma.set(s.targetId,A.filter(i=>!su(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ca(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&_a(n.remoteStore,s.targetId),Ea(n,s.targetId)}).catch(oi)):(Ea(n,s.targetId),await Ca(n.localStore,s.targetId,!0))}async function bP(t,e){const r=_e(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),_a(r.remoteStore,n.targetId))}async function CP(t,e,r){const n=py(t);try{const s=await function(i,a){const o=_e(i),c=Xt.now(),d=a.reduce((m,v)=>m.add(v.key),At());let h,f;return o.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=hn(),y=At();return o.cs.getEntries(m,d).next(I=>{v=I,v.forEach((b,w)=>{w.isValidDocument()||(y=y.add(b))})}).next(()=>o.localDocuments.getOverlayedDocuments(m,v)).next(I=>{h=I;const b=[];for(const w of a){const C=X4(w,h.get(w.key).overlayedDocument);C!=null&&b.push(new Ws(w.key,C,YE(C.value.mapValue),qt.exists(!0)))}return o.mutationQueue.addMutationBatch(m,c,b,a)}).next(I=>{f=I;const b=I.applyToLocalDocumentSet(h,y);return o.documentOverlayCache.saveOverlays(m,I.batchId,b)})}).then(()=>({batchId:f.batchId,changes:h1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,a,o){let c=i.Ba[i.currentUser.toKey()];c||(c=new Mt(rt)),c=c.insert(a,o),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await qs(n,s.changes),await Va(n.remoteStore)}catch(s){const A=Ga(s,"Failed to persist write");r.reject(A)}}async function xT(t,e){const r=_e(t);try{const n=await HD(r.localStore,e);e.targetChanges.forEach((s,A)=>{const i=r.Na.get(A);i&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Oe(i.va):s.removedDocuments.size>0&&(Oe(i.va),i.va=!1))}),await qs(r,n,e)}catch(n){await oi(n)}}function ob(t,e,r){const n=_e(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((A,i)=>{const a=i.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const o=_e(i);o.onlineState=a;let c=!1;o.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&cy(o)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function _P(t,e,r){const n=_e(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),A=s&&s.key;if(A){let i=new Mt(Fe.comparator);i=i.insert(A,Vt.newNoDocument(A,$e.min()));const a=At().add(A),o=new ou($e.min(),new Map,new Mt(rt),i,a);await xT(n,o),n.Oa=n.Oa.remove(A),n.Na.delete(e),gy(n)}else await Ca(n.localStore,e,!1).then(()=>Ea(n,e,r)).catch(oi)}async function IP(t,e){const r=_e(t),n=e.batch.batchId;try{const s=await OD(r.localStore,e);fy(r,n,null),hy(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await qs(r,s)}catch(s){await oi(s)}}async function EP(t,e,r){const n=_e(t);try{const s=await function(i,a){const o=_e(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return o.mutationQueue.lookupMutationBatch(c,a).next(h=>(Oe(h!==null),d=h.keys(),o.mutationQueue.removeMutationBatch(c,h))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>o.localDocuments.getDocuments(c,d))})}(n.localStore,e);fy(n,e,r),hy(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await qs(n,s)}catch(s){await oi(s)}}async function TP(t,e){const r=_e(t);ci(r.remoteStore)||ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const a=_e(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=Ga(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function hy(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function fy(t,e,r){const n=_e(t);let s=n.Ba[n.currentUser.toKey()];if(s){const A=s.get(e);A&&(r?A.reject(r):A.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Ea(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||vT(t,n)})}function vT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(_a(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),gy(t))}function s0(t,e,r){for(const n of r)n instanceof pT?(t.La.addReference(n.key,e),FP(t,n)):n instanceof mT?(ae("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||vT(t,n.key)):De()}function FP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ae("SyncEngine","New document in limbo: "+r),t.xa.add(n),gy(t))}function gy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Fe(pt.fromString(e)),n=t.qa.next();t.Na.set(n,new wP(r)),t.Oa=t.Oa.insert(r,n),Gf(t.remoteStore,new Es(Xr(ja(r.path)),n,"TargetPurposeLimboResolution",un.oe))}}async function qs(t,e,r){const n=_e(t),s=[],A=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((a,o)=>{i.push(n.Ka(o,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(o.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(o.targetId,h?"current":"not-current")}if(c){s.push(c);const h=ty.Wi(o.targetId,c);A.push(h)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(o,c){const d=_e(o);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(c,f=>j.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>j.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!ai(h))throw h;ae("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(f,y)}}}(n.localStore,A))}async function kP(t,e){const r=_e(t);if(!r.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const n=await tT(r.localStore,e);r.currentUser=e,function(A,i){A.ka.forEach(a=>{a.forEach(o=>{o.reject(new ie(z.CANCELLED,i))})}),A.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qs(r,n.hs)}}function SP(t,e){const r=_e(t),n=r.Na.get(e);if(n&&n.va)return At().add(n.key);{let s=At();const A=r.Ma.get(e);if(!A)return s;for(const i of A){const a=r.Fa.get(i);s=s.unionWith(a.view.Va)}return s}}async function UP(t,e){const r=_e(t),n=await Kh(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&s0(r,e.targetId,s.wa),s}async function QP(t,e){const r=_e(t);return AT(r.localStore,e).then(n=>qs(r,n))}async function NP(t,e,r,n){const s=_e(t),A=await function(a,o){const c=_e(a),d=_e(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,o).next(f=>f?c.localDocuments.getDocuments(h,f):j.resolve(null)))}(s.localStore,e);A!==null?(r==="pending"?await Va(s.remoteStore):r==="acknowledged"||r==="rejected"?(fy(s,e,n||null),hy(s,e),function(a,o){_e(_e(a).mutationQueue).On(o)}(s.localStore,e)):De(),await qs(s,A)):ae("SyncEngine","Cannot apply mutation batch with id: "+e)}async function RP(t,e){const r=_e(t);if(zf(r),py(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await ab(r,n.toArray());r.Qa=!0,await r0(r.remoteStore,!0);for(const A of s)Gf(r.remoteStore,A)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((A,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then(()=>(Ea(r,i),Ca(r.localStore,i,!0))),_a(r.remoteStore,i)}),await s,await ab(r,n),function(i){const a=_e(i);a.Na.forEach((o,c)=>{_a(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Mt(Fe.comparator)}(r),r.Qa=!1,await r0(r.remoteStore,!1)}}async function ab(t,e,r){const n=_e(t),s=[],A=[];for(const i of e){let a;const o=n.Ma.get(i);if(o&&o.length!==0){a=await ba(n.localStore,Xr(o[0]));for(const c of o){const d=n.Fa.get(c),h=await UP(n,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await sT(n.localStore,i);a=await ba(n.localStore,c),await dy(n,BT(c),i,!1,a.resumeToken)}s.push(a)}return n.Ca.d_(A),s}function BT(t){return i1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function DP(t){return function(r){return _e(_e(r).persistence).Qi()}(_e(t).localStore)}async function PP(t,e,r,n){const s=_e(t);if(s.Qa)return void ae("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(r){case"current":case"not-current":{const i=await AT(s.localStore,c1(A[0])),a=ou.createSynthesizedRemoteEventForCurrentChange(e,r==="current",sr.EMPTY_BYTE_STRING);await qs(s,i,a);break}case"rejected":await Ca(s.localStore,e,!0),Ea(s,e,n);break;default:De()}}async function LP(t,e,r){const n=zf(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){ae("SyncEngine","Adding an already active target "+s);continue}const A=await sT(n.localStore,s),i=await ba(n.localStore,A);await dy(n,BT(A),i.targetId,!1,i.resumeToken),Gf(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await Ca(n.localStore,s,!1).then(()=>{_a(n.remoteStore,s),Ea(n,s)}).catch(oi)}}function zf(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_P.bind(null,e),e.Ca.d_=hP.bind(null,e.eventManager),e.Ca.$a=fP.bind(null,e.eventManager),e}function py(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EP.bind(null,e),e}function jP(t,e,r){const n=_e(t);(async function(A,i,a){try{const o=await i.getMetadata();if(await function(m,v){const y=_e(m),I=dr(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",b=>y.Gr.getBundleMetadata(b,v.id)).then(b=>!!b&&b.createTime.compareTo(I)>=0)}(A.localStore,o))return await i.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(gT(o));const c=new pP(o,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&a._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await qs(A,h.Ia,void 0),await function(m,v){const y=_e(m);return y.persistence.runTransaction("Save bundle","readwrite",I=>y.Gr.saveBundleMetadata(I,v))}(A.localStore,o),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(o){return _n("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class ZA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return eT(this.persistence,new Z1,e.initialUser,this.serializer)}Ga(e){return new Yw(Kf.Zr,this.serializer)}Wa(e){return new oT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ZA.provider={build:()=>new ZA};class MP extends ZA{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Oe(this.persistence.referenceDelegate instanceof Vh);const n=this.persistence.referenceDelegate.garbageCollector;return new W1(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new Yw(n=>Vh.Zr(n,r),this.serializer)}}class my extends ZA{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await py(this.Ja.syncEngine),await Va(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return eT(this.persistence,new Z1,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new W1(n,e.asyncQueue,r)}Ha(e,r){const n=new o4(r,this.persistence);return new i4(e.asyncQueue,n)}Ga(e){const r=ey(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new Zw(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,aT(),Wd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new oT}}class bT extends my{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof lp&&(this.sharedClientState.syncEngine={no:NP.bind(null,r),ro:PP.bind(null,r),io:LP.bind(null,r),Qi:DP.bind(null,r),eo:QP.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await RP(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=aT();if(!lp.D(r))throw new ie(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ey(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lp(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class ei{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ob(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=kP.bind(null,this.syncEngine),await r0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dP}()}createDatastore(e){const r=lu(e.databaseInfo.databaseId),n=function(A){return new qD(A)}(e.databaseInfo);return function(A,i,a,o){return new YD(A,i,a,o)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,A,i,a){return new eP(n,s,A,i,a)}(this.localStore,this.datastore,e.asyncQueue,r=>ob(this.syncEngine,r,0),function(){return tb.D()?new tb:new zD}())}createSyncEngine(e,r){return function(s,A,i,a,o,c,d){const h=new yP(s,A,i,a,o,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const A=_e(s);ae("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Ha(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}ei.provider={build:()=>new ei};function lb(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Tr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new gP(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,A){const i=_e(s),a={documents:A.map(h=>jc(i.serializer,h))},o=await i.Lo("BatchGetDocuments",i.serializer.databaseId,pt.emptyPath(),a,A.length),c=new Map;o.forEach(h=>{const f=AD(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());Oe(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=Fe.fromPath(n);this.mutations.push(new Hw(s,this.precondition(s)))}),await async function(n,s){const A=_e(n),i={writes:s.map(a=>Mc(A.serializer,a))};await A.Mo("Commit",A.serializer.databaseId,pt.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw De();r=$e.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ie(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual($e.min())?qt.exists(!1):qt.updateTime(r):qt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($e.min()))throw new ie(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qt.updateTime(r)}return qt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,r,n,s,A){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=A,this._u=n.maxAttempts,this.t_=new ny(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new HP(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!ru(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!C1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,r,n,s,A){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Ir.UNAUTHENTICATED,this.clientId=Nw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(n,async i=>{ae("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ae("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Ga(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function up(t,e){t.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await tT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cb(t,e){t.asyncQueue.verifyOperationInProgress();const r=await wy(t);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>rb(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>rb(e.remoteStore,s)),t._onlineComponents=e}async function wy(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await up(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;_n("Error using user provided cache. Falling back to memory cache: "+r),await up(t,new ZA)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await up(t,new ZA);return t._offlineComponents}async function Wf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await cb(t,t._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await cb(t,new ei))),t._onlineComponents}function CT(t){return wy(t).then(e=>e.persistence)}function za(t){return wy(t).then(e=>e.localStore)}function _T(t){return Wf(t).then(e=>e.remoteStore)}function yy(t){return Wf(t).then(e=>e.syncEngine)}function IT(t){return Wf(t).then(e=>e.datastore)}async function Ta(t){const e=await Wf(t),r=e.eventManager;return r.onListen=xP.bind(null,e.syncEngine),r.onUnlisten=BP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=vP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=bP.bind(null,e.syncEngine),r}function GP(t){return t.asyncQueue.enqueue(async()=>{const e=await CT(t),r=await _T(t);return e.setNetworkEnabled(!0),function(s){const A=_e(s);return A.L_.delete(0),cu(A)}(r)})}function zP(t){return t.asyncQueue.enqueue(async()=>{const e=await CT(t),r=await _T(t);return e.setNetworkEnabled(!1),async function(s){const A=_e(s);A.L_.add(0),await Ha(A),A.q_.set("Offline")}(r)})}function $P(t,e){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await function(c,d){const h=_e(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new ie(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=Ga(a,`Failed to get document '${A} from cache`);i.reject(o)}}(await za(t),e,r)),r.promise}function ET(t,e,r={}){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,o,c){const d=new $f({next:f=>{d.Za(),i.enqueueAndForget(()=>ly(A,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new ie(z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&o&&o.source==="server"?c.reject(new ie(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new uy(ja(a.path),d,{includeMetadataChanges:!0,_a:!0});return ay(A,h)}(await Ta(t),t.asyncQueue,e,r,n)),n.promise}function WP(t,e){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await Kh(s,A,!0),o=new wT(A,a.Ts),c=o.ma(a.documents),d=o.applyChanges(c,!1);i.resolve(d.snapshot)}catch(a){const o=Ga(a,`Failed to execute query '${A} against cache`);i.reject(o)}}(await za(t),e,r)),r.promise}function TT(t,e,r={}){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,o,c){const d=new $f({next:f=>{d.Za(),i.enqueueAndForget(()=>ly(A,h)),f.fromCache&&o.source==="server"?c.reject(new ie(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new uy(a,d,{includeMetadataChanges:!0,_a:!0});return ay(A,h)}(await Ta(t),t.asyncQueue,e,r,n)),n.promise}function qP(t,e,r){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await IT(t);n.resolve(async function(i,a,o){var c;const d=_e(i),{request:h,ut:f,parent:m}=D1(d.serializer,o1(a),o);d.connection.Fo||delete h.parent;const v=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(I=>!!I.result);Oe(v.length===1);const y=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(y).reduce((I,b)=>(I[f[b]]=y[b],I),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function XP(t,e){const r=new $f(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){_e(s).Y_.add(A),A.next()}(await Ta(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){_e(s).Y_.delete(A)}(await Ta(t),r))}}function JP(t,e,r,n){const s=function(i,a){let o;return o=typeof i=="string"?I1().encode(i):i,function(d,h){return new OP(d,h)}(function(d,h){if(d instanceof Uint8Array)return lb(d,h);if(d instanceof ArrayBuffer)return lb(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(r,lu(e));t.asyncQueue.enqueueAndForget(async()=>{jP(await yy(t),s,n)})}function YP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const A=_e(n);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await za(t),e))}function ZP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const A=_e(n),i=A.indexManager,a=[];return A.persistence.runTransaction("Configure indexes","readwrite",o=>i.getFieldIndexes(o).next(c=>function(h,f,m,v,y){h=[...h],f=[...f],h.sort(m),f.sort(m);const I=h.length,b=f.length;let w=0,C=0;for(;w<b&&C<I;){const F=m(h[C],f[w]);F<0?y(h[C++]):F>0?v(f[w++]):(w++,C++)}for(;w<b;)v(f[w++]);for(;C<I;)y(h[C++])}(c,s,r4,d=>{a.push(i.addFieldIndex(o,d))},d=>{a.push(i.deleteFieldIndex(o,d))})).next(()=>j.waitFor(a)))}(await za(t),e))}function eL(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){_e(n).ss.zi=s}(await za(t),e))}function tL(t){return t.asyncQueue.enqueue(async()=>function(r){const n=_e(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",A=>s.deleteAllFieldIndexes(A))}(await za(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t,e,r){if(!r)throw new ie(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kT(t,e,r,n){if(e===!0&&n===!0)throw new ie(z.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function db(t){if(!Fe.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hb(t){if(Fe.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qf(t);throw new ie(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function ST(t,e){if(e<=0)throw new ie(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uu{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new NE;switch(n.type){case"firstParty":return new JR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ie(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=ub.get(r);n&&(ae("ComponentProvider","Removing Datastore"),ub.delete(r),n.terminate())}(this),Promise.resolve()}}function UT(t,e,r,n={}){var s;const A=(t=dt(t,uu))._getSettings(),i=`${e}:${r}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&_n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),n.mockUserToken){let a,o;if(typeof n.mockUserToken=="string")a=n.mockUserToken,o=Ir.MOCK_USER;else{a=xN(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new ie(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new Ir(c)}t._authCredentials=new WR(new QE(a,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class or{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class qn extends Fr{constructor(e,r,n){super(e,r,ja(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Fe(e))}withConverter(e){return new qn(this.firestore,e,this._path)}}function A0(t,e,...r){if(t=Dt(t),xy("collection","path",e),t instanceof uu){const n=pt.fromString(e,...r);return hb(n),new qn(t,null,n)}{if(!(t instanceof or||t instanceof qn))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pt.fromString(e,...r));return hb(n),new qn(t.firestore,null,n)}}function rL(t,e){if(t=dt(t,uu),xy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fr(t,null,function(n){return new zs(pt.emptyPath(),n)}(e))}function ns(t,e,...r){if(t=Dt(t),arguments.length===1&&(e=Nw.newId()),xy("doc","path",e),t instanceof uu){const n=pt.fromString(e,...r);return db(n),new or(t,null,new Fe(n))}{if(!(t instanceof or||t instanceof qn))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pt.fromString(e,...r));return db(n),new or(t.firestore,t instanceof qn?t.converter:null,new Fe(n))}}function nL(t,e){return t=Dt(t),e=Dt(e),(t instanceof or||t instanceof qn)&&(e instanceof or||e instanceof qn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function vy(t,e){return t=Dt(t),e=Dt(e),t instanceof Fr&&e instanceof Fr&&t.firestore===e.firestore&&su(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ny(this,"async_queue_retry"),this.Vu=()=>{const n=Wd();n&&ae("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Wd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Wd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ai(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(n);throw ur("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=oy.createAndSchedule(this,e,r,n,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function i0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const A of n)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class QT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=-1;class Qt extends uu{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new gb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gb(e),this._firestoreClient=void 0,await e}}}function AL(t,e,r){r||(r="(default)");const n=tu(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),A=n.getOptions(r);if(zA(A,e))return s;throw new ie(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function NT(t,e){const r=typeof t=="object"?t:Uw(),n=typeof t=="string"?t:e||"(default)",s=tu(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const A=wN("firestore");A&&UT(s,...A)}return s}function Jt(t){if(t._terminated)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RT(t),t._firestoreClient}function RT(t){var e,r,n;const s=t._freezeSettings(),A=function(a,o,c,d){return new F4(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,FT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new KP(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}function iL(t,e){_n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return DT(t,ei.provider,{build:n=>new my(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function oL(t){_n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();DT(t,ei.provider,{build:r=>new bT(r,e.cacheSizeBytes)})}function DT(t,e,r){if((t=dt(t,Qt))._firestoreClient||t._terminated)throw new ie(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ie(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},RT(t)}function aL(t){if(t._initialized&&!t._terminated)throw new ie(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!ls.D())return Promise.resolve();const s=n+"main";await ls.delete(s)}(ey(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function lL(t){return function(r){const n=new Tr;return r.asyncQueue.enqueueAndForget(async()=>TP(await yy(r),n)),n.promise}(Jt(t=dt(t,Qt)))}function cL(t){return GP(Jt(t=dt(t,Qt)))}function uL(t){return zP(Jt(t=dt(t,Qt)))}function dL(t){return SR(t.app,"firestore",t._databaseId.database),t._delete()}function hL(t,e){const r=Jt(t=dt(t,Qt)),n=new QT;return JP(r,t._databaseId,e,n),n}function fL(t,e){return YP(Jt(t=dt(t,Qt)),e).then(r=>r?new Fr(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class PT{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(sr.fromBase64String(e))}catch(r){throw new ie(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ti(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ie(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function gL(){return new ui("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ie(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ie(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let A=0;A<n.length;++A)if(n[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=/^__.*__$/;class mL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ma(e,this.data,r,this.fieldTransforms)}}class LT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ws(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function jT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class Jf{constructor(e,r,n,s,A,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jT(this.Cu)&&pL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||lu(e)}Qu(e,r,n,s=!1){return new Jf({Cu:e,methodName:r,qu:n,path:Kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function io(t){const e=t._freezeSettings(),r=lu(t._databaseId);return new wL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Yf(t,e,r,n,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,r,s);Ty("Data must be an object, but it was:",i,n);const a=HT(n,i);let o,c;if(A.merge)o=new dn(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=Oc(e,h,r);if(!i.contains(f))throw new ie(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);KT(d,f)||d.push(f)}o=new dn(d),c=i.fieldTransforms.filter(h=>o.covers(h.field))}else o=null,c=i.fieldTransforms;return new mL(new Rr(a),o,c)}class hu extends di{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hu}}function MT(t,e,r){return new Jf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class By extends di{_toFieldTransform(e){return new iu(e.path,new xa)}isEqual(e){return e instanceof By}}class by extends di{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=MT(this,e,!0),n=this.Ku.map(A=>oo(A,r)),s=new Wi(n);return new iu(e.path,s)}isEqual(e){return e instanceof by&&zA(this.Ku,e.Ku)}}class Cy extends di{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=MT(this,e,!0),n=this.Ku.map(A=>oo(A,r)),s=new qi(n);return new iu(e.path,s)}isEqual(e){return e instanceof Cy&&zA(this.Ku,e.Ku)}}class _y extends di{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new va(e.serializer,p1(e.serializer,this.$u));return new iu(e.path,r)}isEqual(e){return e instanceof _y&&this.$u===e.$u}}function Iy(t,e,r,n){const s=t.Qu(1,e,r);Ty("Data must be an object, but it was:",s,n);const A=[],i=Rr.empty();li(n,(o,c)=>{const d=Zf(e,o,r);c=Dt(c);const h=s.Nu(d);if(c instanceof hu)A.push(d);else{const f=oo(c,h);f!=null&&(A.push(d),i.set(d,f))}});const a=new dn(A);return new LT(i,a,s.fieldTransforms)}function Ey(t,e,r,n,s,A){const i=t.Qu(1,e,r),a=[Oc(e,n,r)],o=[s];if(A.length%2!=0)throw new ie(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)a.push(Oc(e,A[f])),o.push(A[f+1]);const c=[],d=Rr.empty();for(let f=a.length-1;f>=0;--f)if(!KT(c,a[f])){const m=a[f];let v=o[f];v=Dt(v);const y=i.Nu(m);if(v instanceof hu)c.push(m);else{const I=oo(v,y);I!=null&&(c.push(m),d.set(m,I))}}const h=new dn(c);return new LT(d,h,i.fieldTransforms)}function OT(t,e,r,n=!1){return oo(r,t.Qu(n?4:3,e))}function oo(t,e){if(VT(t=Dt(t)))return Ty("Unsupported field value:",e,t),HT(t,e);if(t instanceof di)return function(n,s){if(!jT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const A=n._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const A=[];let i=0;for(const a of n){let o=oo(a,s.Lu(i));o==null&&(o={nullValue:"NULL_VALUE"}),A.push(o),i++}return{arrayValue:{values:A}}}(t,e)}return function(n,s){if((n=Dt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return p1(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const A=Xt.fromDate(n);return{timestampValue:Ba(s.serializer,A)}}if(n instanceof Xt){const A=new Xt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ba(s.serializer,A)}}if(n instanceof Xf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ti)return{bytesValue:F1(s.serializer,n._byteString)};if(n instanceof or){const A=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:$w(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof du)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(o=>{if(typeof o!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ow(a.serializer,o)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${qf(n)}`)}(t,e)}function HT(t,e){const r={};return WE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):li(t,(n,s)=>{const A=oo(s,e.Mu(n));A!=null&&(r[n]=A)}),{mapValue:{fields:r}}}function VT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof Xf||t instanceof ti||t instanceof or||t instanceof di||t instanceof du)}function Ty(t,e,r){if(!VT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=qf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Oc(t,e,r){if((e=Dt(e))instanceof ui)return e._internalPath;if(typeof e=="string")return Zf(t,e);throw Wh("Field path arguments must be of type string or ",t,!1,void 0,r)}const yL=new RegExp("[~\\*/\\[\\]]");function Zf(t,e,r){if(e.search(yL)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ui(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Wh(t,e,r,n,s){const A=n&&!n.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(A||i)&&(o+=" (found",A&&(o+=` in field ${n}`),i&&(o+=` in document ${s}`),o+=")"),new ie(z.INVALID_ARGUMENT,a+t+o)}function KT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,r,n,s,A){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class xL extends Hc{data(){return super.data()}}function eg(t,e){return typeof e=="string"?Zf(t,e):e instanceof ui?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fy{}class $a extends Fy{}function o0(t,e,...r){let n=[];e instanceof Fy&&n.push(e),n=n.concat(r),function(A){const i=A.filter(o=>o instanceof ao).length,a=A.filter(o=>o instanceof Wa).length;if(i>1||i>0&&a>0)throw new ie(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Wa extends $a{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Wa(e,r,n)}_apply(e){const r=this._parse(e);return $T(e._query,r),new Fr(e.firestore,e.converter,$m(e._query,r))}_parse(e){const r=io(e.firestore);return function(A,i,a,o,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ie(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){mb(h,d);const m=[];for(const v of h)m.push(pb(o,A,v));f={arrayValue:{values:m}}}else f=pb(o,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||mb(h,d),f=OT(a,i,h,d==="in"||d==="not-in");return mt.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function vL(t,e,r){const n=e,s=eg("where",t);return Wa._create(s,n,r)}class ao extends Fy{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ao(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ft.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,A){let i=s;const a=A.getFlattenedFilters();for(const o of a)$T(i,o),i=$m(i,o)}(e._query,r),new Fr(e.firestore,e.converter,$m(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function BL(...t){return t.forEach(e=>WT("or",e)),ao._create("or",t)}function bL(...t){return t.forEach(e=>WT("and",e)),ao._create("and",t)}class tg extends $a{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new tg(e,r)}_apply(e){const r=function(s,A,i){if(s.startAt!==null)throw new ie(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(A,i)}(e._query,this._field,this._direction);return new Fr(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new zs(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function CL(t,e="asc"){const r=e,n=eg("orderBy",t);return tg._create(n,r)}class fu extends $a{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new fu(e,r,n)}_apply(e){return new Fr(e.firestore,e.converter,Lh(e._query,this._limit,this._limitType))}}function _L(t){return ST("limit",t),fu._create("limit",t,"F")}function IL(t){return ST("limitToLast",t),fu._create("limitToLast",t,"L")}class gu extends $a{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new gu(e,r,n)}_apply(e){const r=zT(e,this.type,this._docOrFields,this._inclusive);return new Fr(e.firestore,e.converter,function(s,A){return new zs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,r))}}function EL(...t){return gu._create("startAt",t,!0)}function TL(...t){return gu._create("startAfter",t,!1)}class pu extends $a{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new pu(e,r,n)}_apply(e){const r=zT(e,this.type,this._docOrFields,this._inclusive);return new Fr(e.firestore,e.converter,function(s,A){return new zs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,r))}}function FL(...t){return pu._create("endBefore",t,!1)}function kL(...t){return pu._create("endAt",t,!0)}function zT(t,e,r,n){if(r[0]=Dt(r[0]),r[0]instanceof Hc)return function(A,i,a,o,c){if(!o)throw new ie(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of ea(A))if(h.field.isKeyField())d.push(zi(i,o.key));else{const f=o.data.field(h.field);if(Df(f))throw new ie(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new ie(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new JA(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=io(t.firestore);return function(i,a,o,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new ie(z.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let v=0;v<d.length;v++){const y=d[v];if(f[v].field.isKeyField()){if(typeof y!="string")throw new ie(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!jw(i)&&y.indexOf("/")!==-1)throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const I=i.path.child(pt.fromString(y));if(!Fe.isDocumentKey(I))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const b=new Fe(I);m.push(zi(a,b))}else{const I=OT(o,c,y);m.push(I)}}return new JA(m,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function pb(t,e,r){if(typeof(r=Dt(r))=="string"){if(r==="")throw new ie(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(e)&&r.indexOf("/")!==-1)throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(pt.fromString(r));if(!Fe.isDocumentKey(n))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return zi(t,new Fe(n))}if(r instanceof or)return zi(t,r._key);throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(r)}.`)}function mb(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $T(t,e){const r=function(s,A){for(const i of s)for(const a of i.getFlattenedFilters())if(A.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ie(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function WT(t,e){if(!(e instanceof Wa||e instanceof ao))throw new ie(z.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class ky{convertValue(e,r="none"){switch(qA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return li(e,(s,A)=>{n[s]=this.convertValue(A,r)}),n}convertVectorValue(e){var r,n,s;const A=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>$t(i.doubleValue));return new du(A)}convertGeoPoint(e){return new Xf($t(e.latitude),$t(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Pf(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Rc(e));default:return null}}convertTimestamp(e){const r=Ls(e);return new Xt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=pt.fromString(e);Oe(M1(n));const s=new WA(n.get(1),n.get(3)),A=new Fe(n.popFirst(5));return s.isEqual(r)||ur(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class SL extends ky{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t){return new Fa("sum",Oc("sum",t))}function QL(t){return new Fa("avg",Oc("average",t))}function qT(){return new Fa("count")}function NL(t,e){var r,n;return t instanceof Fa&&e instanceof Fa&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function RL(t,e){return vy(t.query,e.query)&&zA(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zi extends Hc{constructor(e,r,n,s,A,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ac extends Zi{data(e={}){return super.data(e)}}class eo{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new _A(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ac(this._firestore,this._userDataWriter,n.key,n,new _A(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ie(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const o=new Ac(s._firestore,s._userDataWriter,a.doc.key,a.doc,new _A(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>A||a.type!==3).map(a=>{const o=new Ac(s._firestore,s._userDataWriter,a.doc.key,a.doc,new _A(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:DL(a.type),doc:o,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function DL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function PL(t,e){return t instanceof Zi&&e instanceof Zi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof eo&&e instanceof eo&&t._firestore===e._firestore&&vy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t){t=dt(t,or);const e=dt(t.firestore,Qt);return ET(Jt(e),t._key).then(r=>Sy(e,t,r))}class hi extends ky{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,r)}}function jL(t){t=dt(t,or);const e=dt(t.firestore,Qt),r=Jt(e),n=new hi(e);return $P(r,t._key).then(s=>new Zi(e,n,t._key,s,new _A(s!==null&&s.hasLocalMutations,!0),t.converter))}function ML(t){t=dt(t,or);const e=dt(t.firestore,Qt);return ET(Jt(e),t._key,{source:"server"}).then(r=>Sy(e,t,r))}function XT(t){t=dt(t,Fr);const e=dt(t.firestore,Qt),r=Jt(e),n=new hi(e);return GT(t._query),TT(r,t._query).then(s=>new eo(e,n,t,s))}function OL(t){t=dt(t,Fr);const e=dt(t.firestore,Qt),r=Jt(e),n=new hi(e);return WP(r,t._query).then(s=>new eo(e,n,t,s))}function HL(t){t=dt(t,Fr);const e=dt(t.firestore,Qt),r=Jt(e),n=new hi(e);return TT(r,t._query,{source:"server"}).then(s=>new eo(e,n,t,s))}function qd(t,e,r){t=dt(t,or);const n=dt(t.firestore,Qt),s=rg(t.converter,e,r);return qa(n,[Yf(io(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,qt.none())])}function VL(t,e,r,...n){t=dt(t,or);const s=dt(t.firestore,Qt),A=io(s);let i;return i=typeof(e=Dt(e))=="string"||e instanceof ui?Ey(A,"updateDoc",t._key,e,r,n):Iy(A,"updateDoc",t._key,e),qa(s,[i.toMutation(t._key,qt.exists(!0))])}function JT(t){return qa(dt(t.firestore,Qt),[new Oa(t._key,qt.none())])}function KL(t,e){const r=dt(t.firestore,Qt),n=ns(t),s=rg(t.converter,e);return qa(r,[Yf(io(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,qt.exists(!1))]).then(()=>n)}function Xd(t,...e){var r,n,s;t=Dt(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||i0(e[i])||(A=e[i],i++);const a={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(i0(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let o,c,d;if(t instanceof or)c=dt(t.firestore,Qt),d=ja(t._key.path),o={next:h=>{e[i]&&e[i](Sy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=dt(t,Fr);c=dt(h.firestore,Qt),d=h._query;const f=new hi(c);o={next:m=>{e[i]&&e[i](new eo(c,f,h,m))},error:e[i+1],complete:e[i+2]},GT(t._query)}return function(f,m,v,y){const I=new $f(y),b=new uy(m,I,v);return f.asyncQueue.enqueueAndForget(async()=>ay(await Ta(f),b)),()=>{I.Za(),f.asyncQueue.enqueueAndForget(async()=>ly(await Ta(f),b))}}(Jt(c),d,a,o)}function GL(t,e){return XP(Jt(t=dt(t,Qt)),i0(e)?e:{next:e})}function qa(t,e){return function(n,s){const A=new Tr;return n.asyncQueue.enqueueAndForget(async()=>CP(await yy(n),s,A)),A.promise}(Jt(t),e)}function Sy(t,e,r){const n=r.docs.get(e._key),s=new hi(t);return new Zi(t,s,e._key,n,new _A(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){return YT(t,{count:qT()})}function YT(t,e){const r=dt(t.firestore,Qt),n=Jt(r),s=$E(e,(A,i)=>new b1(i,A.aggregateType,A._internalFieldPath));return qP(n,t._query,s).then(A=>function(a,o,c){const d=new hi(a);return new PT(o,d,c)}(r,t,A))}class $L{constructor(e){this.kind="memory",this._onlineComponentProvider=ei.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=ZA.provider}toJSON(){return{kind:this.kind}}}class WL{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=ZT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class qL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=ZA.provider}toJSON(){return{kind:this.kind}}}class XL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new MP(e)}}toJSON(){return{kind:this.kind}}}function JL(){return new qL}function YL(t){return new XL(t==null?void 0:t.cacheSizeBytes)}function ZL(t){return new $L(t)}function ej(t){return new WL(t)}class tj{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ei.provider,this._offlineComponentProvider={build:r=>new my(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class rj{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ei.provider,this._offlineComponentProvider={build:r=>new bT(r,e==null?void 0:e.cacheSizeBytes)}}}function ZT(t){return new tj(t==null?void 0:t.forceOwnership)}function nj(){return new rj}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=io(e)}set(e,r,n){this._verifyNotCommitted();const s=gA(e,this._firestore),A=rg(s.converter,r,n),i=Yf(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,qt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const A=gA(e,this._firestore);let i;return i=typeof(r=Dt(r))=="string"||r instanceof ui?Ey(this._dataReader,"WriteBatch.update",A._key,r,n,s):Iy(this._dataReader,"WriteBatch.update",A._key,r),this._mutations.push(i.toMutation(A._key,qt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=gA(e,this._firestore);return this._mutations=this._mutations.concat(new Oa(r._key,qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gA(t,e){if((t=Dt(t)).firestore!==e)throw new ie(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=io(r)}get(r){const n=gA(r,this._firestore),s=new SL(this._firestore);return this._transaction.lookup([n._key]).then(A=>{if(!A||A.length!==1)return De();const i=A[0];if(i.isFoundDocument())return new Hc(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new Hc(this._firestore,s,n._key,null,n.converter);throw De()})}set(r,n,s){const A=gA(r,this._firestore),i=rg(A.converter,n,s),a=Yf(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,a),this}update(r,n,s,...A){const i=gA(r,this._firestore);let a;return a=typeof(n=Dt(n))=="string"||n instanceof ui?Ey(this._dataReader,"Transaction.update",i._key,n,s,A):Iy(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(r){const n=gA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=gA(e,this._firestore),n=new hi(this._firestore);return super.get(e).then(s=>new Zi(this._firestore,n,r._key,s._document,new _A(!1,!1),r.converter))}}function Aj(t,e,r){t=dt(t,Qt);const n=Object.assign(Object.assign({},sj),r);return function(A){if(A.maxAttempts<1)throw new ie(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(A,i,a){const o=new Tr;return A.asyncQueue.enqueueAndForget(async()=>{const c=await IT(A);new VP(A.asyncQueue,c,a,i,o).au()}),o.promise}(Jt(t),s=>e(new tF(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(){return new hu("deleteField")}function oj(){return new By("serverTimestamp")}function aj(...t){return new by("arrayUnion",t)}function lj(...t){return new Cy("arrayRemove",t)}function cj(t){return new _y("increment",t)}function uj(t){return new du(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){return Jt(t=dt(t,Qt)),new eF(t,e=>qa(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t,e){const r=Jt(t=dt(t,Qt));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return _n("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(A){const i=typeof A=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new ie(z.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(A):A,a=[];if(Array.isArray(i.indexes))for(const o of i.indexes){const c=wb(o,"collectionGroup"),d=[];if(Array.isArray(o.fields))for(const h of o.fields){const f=Zf("setIndexConfiguration",wb(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Pi(f,2)):h.order==="ASCENDING"?d.push(new Pi(f,0)):h.order==="DESCENDING"&&d.push(new Pi(f,1))}a.push(new pa(pa.UNKNOWN_ID,c,d,ma.empty()))}return a}(e);return ZP(r,n)}function wb(t,e){if(typeof t[e]!="string")throw new ie(z.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function hj(t){var e;t=dt(t,Qt);const r=yb.get(t);if(r)return r;if(((e=Jt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new nF(t);return yb.set(t,n),n}function fj(t){sF(t,!0)}function gj(t){sF(t,!1)}function pj(t){tL(Jt(t._firestore)).then(e=>ae("deleting all persistent cache indexes succeeded")).catch(e=>_n("deleting all persistent cache indexes failed",e))}function sF(t,e){eL(Jt(t._firestore),e).then(r=>ae(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>_n(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const yb=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){var e;const r=(e=Jt(dt(t.firestore,Qt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Of(r,Xr(t._query))._t}function wj(t,e){var r;const n=$E(e,(A,i)=>new b1(i,A.aggregateType,A._internalFieldPath)),s=(r=Jt(dt(t.firestore,Qt))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:D1(s,o1(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Uy.instance.onExistenceFilterMismatch(e)}}class Uy{constructor(){this.Uu=new Map}static get instance(){return rd||(rd=new Uy,function(r){if(jh)throw new Error("a TestingHooksSpi instance is already set");jh=r}(rd)),rd}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let rd=null;(function(e,r=!0){(function(s){La=s})(Pa),fa(new Gi("firestore",(n,{instanceIdentifier:s,options:A})=>{const i=n.getProvider("app").getImmediate(),a=new Qt(new qR(n.getProvider("auth-internal")),new YR(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new WA(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:r},A),a._setSettings(A),a},"PUBLIC").setMultipleInstances(!0)),MA(aB,"4.7.3",e),MA(aB,"4.7.3","esm2017")})();const xj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:ky,AggregateField:Fa,AggregateQuerySnapshot:PT,Bytes:ti,CACHE_SIZE_UNLIMITED:sL,CollectionReference:qn,DocumentReference:or,DocumentSnapshot:Zi,FieldPath:ui,FieldValue:di,Firestore:Qt,FirestoreError:ie,GeoPoint:Xf,LoadBundleTask:QT,PersistentCacheIndexManager:nF,Query:Fr,QueryCompositeFilterConstraint:ao,QueryConstraint:$a,QueryDocumentSnapshot:Ac,QueryEndAtConstraint:pu,QueryFieldFilterConstraint:Wa,QueryLimitConstraint:fu,QueryOrderByConstraint:tg,QuerySnapshot:eo,QueryStartAtConstraint:gu,SnapshotMetadata:_A,Timestamp:Xt,Transaction:tF,VectorValue:du,WriteBatch:eF,_AutoId:Nw,_ByteString:sr,_DatabaseId:WA,_DocumentKey:Fe,_EmptyAppCheckTokenProvider:ZR,_EmptyAuthCredentialsProvider:NE,_FieldPath:Kt,_TestingHooks:yj,_cast:dt,_debugAssert:$R,_internalAggregationQueryToProtoRunAggregationQueryRequest:wj,_internalQueryToProtoQueryTarget:mj,_isBase64Available:E4,_logWarn:_n,_validateIsNotUsedTogether:kT,addDoc:KL,aggregateFieldEqual:NL,aggregateQuerySnapshotEqual:RL,and:bL,arrayRemove:lj,arrayUnion:aj,average:QL,clearIndexedDbPersistence:aL,collection:A0,collectionGroup:rL,connectFirestoreEmulator:UT,count:qT,deleteAllPersistentCacheIndexes:pj,deleteDoc:JT,deleteField:ij,disableNetwork:uL,disablePersistentCacheIndexAutoCreation:gj,doc:ns,documentId:gL,enableIndexedDbPersistence:iL,enableMultiTabIndexedDbPersistence:oL,enableNetwork:cL,enablePersistentCacheIndexAutoCreation:fj,endAt:kL,endBefore:FL,ensureFirestoreConfigured:Jt,executeWrite:qa,getAggregateFromServer:YT,getCountFromServer:zL,getDoc:LL,getDocFromCache:jL,getDocFromServer:ML,getDocs:XT,getDocsFromCache:OL,getDocsFromServer:HL,getFirestore:NT,getPersistentCacheIndexManager:hj,increment:cj,initializeFirestore:AL,limit:_L,limitToLast:IL,loadBundle:hL,memoryEagerGarbageCollector:JL,memoryLocalCache:ZL,memoryLruGarbageCollector:YL,namedQuery:fL,onSnapshot:Xd,onSnapshotsInSync:GL,or:BL,orderBy:CL,persistentLocalCache:ej,persistentMultipleTabManager:nj,persistentSingleTabManager:ZT,query:o0,queryEqual:vy,refEqual:nL,runTransaction:Aj,serverTimestamp:oj,setDoc:qd,setIndexConfiguration:dj,setLogLevel:zR,snapshotEqual:PL,startAfter:TL,startAt:EL,sum:UL,terminate:dL,updateDoc:VL,vector:uj,waitForPendingWrites:lL,where:vL,writeBatch:rF},Symbol.toStringTag,{value:"Module"}));function Qy(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function AF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vj=AF,iF=new Zc("auth","Firebase",AF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new kw("@firebase/auth");function Bj(t,...e){qh.logLevel<=gt.WARN&&qh.warn(`Auth (${Pa}): ${t}`,...e)}function Jd(t,...e){qh.logLevel<=gt.ERROR&&qh.error(`Auth (${Pa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,...e){throw Ny(t,...e)}function us(t,...e){return Ny(t,...e)}function oF(t,e,r){const n=Object.assign(Object.assign({},vj()),{[e]:r});return new Zc("auth","Firebase",n).create(e,{appName:t.name})}function OA(t){return oF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ny(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return iF.create(t,...e)}function tt(t,e,...r){if(!t)throw Ny(e,...r)}function Ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jd(e),new Error(e)}function Ms(t,e){t||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bj(){return xb()==="http:"||xb()==="https:"}function xb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bj()||CN()||"connection"in navigator)?navigator.onLine:!0}function _j(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ms(r>e,"Short delay should be less than long delay!"),this.isMobile=vN()||_N()}get(){return Cj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t,e){Ms(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=new mu(3e4,6e4);function lo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fi(t,e,r,n,s={}){return lF(t,s,async()=>{let A={},i={};n&&(e==="GET"?i=n:A={body:JSON.stringify(n)});const a=eu(Object.assign({key:t.config.apiKey},i)).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:o},A);return bN()||(c.referrerPolicy="no-referrer"),aF.fetch()(cF(t,t.config.apiHost,r,a),c)})}async function lF(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Ij),e);try{const s=new Fj(t),A=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw nd(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const a=A.ok?i.errorMessage:i.error.message,[o,c]=a.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",i);if(o==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",i);if(o==="USER_DISABLED")throw nd(t,"user-disabled",i);const d=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw oF(t,d,c);Jn(t,d)}}catch(s){if(s instanceof Gs)throw s;Jn(t,"network-request-failed",{message:String(s)})}}async function ng(t,e,r,n,s={}){const A=await fi(t,e,r,n,s);return"mfaPendingCredential"in A&&Jn(t,"multi-factor-auth-required",{_serverResponse:A}),A}function cF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Ry(t.config,s):`${t.config.apiScheme}://${s}`}function Tj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(us(this.auth,"network-request-failed")),Ej.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nd(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=us(t,e,n);return s.customData._tokenResponse=r,s}function vb(t){return t!==void 0&&t.enterprise!==void 0}class kj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Tj(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Sj(t,e){return fi(t,"GET","/v2/recaptchaConfig",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e){return fi(t,"POST","/v1/accounts:delete",e)}async function uF(t,e){return fi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qj(t,e=!1){const r=Dt(t),n=await r.getIdToken(e),s=Dy(n);tt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:n,authTime:ic(dp(s.auth_time)),issuedAtTime:ic(dp(s.iat)),expirationTime:ic(dp(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function dp(t){return Number(t)*1e3}function Dy(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=pE(r);return s?JSON.parse(s):(Jd("Failed to decode base64 JWT payload"),null)}catch(s){return Jd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bb(t){const e=Dy(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Gs&&Nj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Nj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Vc(t,uF(r,{idToken:n}));tt(s==null?void 0:s.users.length,r,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?dF(A.providerUserInfo):[],a=Pj(t.providerData,i),o=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(a!=null&&a.length),d=o?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:a,metadata:new l0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Dj(t){const e=Dt(t);await Xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Pj(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function dF(t){return t.map(e=>{var{providerId:r}=e,n=Qy(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){const r=await lF(t,{},async()=>{const n=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=cF(t,s,"/v1/token",`key=${A}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aF.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function jj(t,e){return fi(t,"POST","/v2/accounts:revokeToken",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const r=Bb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:A}=await Lj(e,r);this.updateTokensAndExpiration(n,s,Number(A))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:A}=r,i=new ra;return n&&(tt(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(tt(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(tt(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fs{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,A=Qy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new l0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const r=await Vc(this,this.stsTokenManager.getToken(this.auth,e));return tt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Qj(this,e)}reload(){return Dj(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Xh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Is(this.auth.app))return Promise.reject(OA(this.auth));const e=await this.getIdToken();return await Vc(this,Uj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,A,i,a,o,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,m=(A=r.phoneNumber)!==null&&A!==void 0?A:void 0,v=(i=r.photoURL)!==null&&i!==void 0?i:void 0,y=(a=r.tenantId)!==null&&a!==void 0?a:void 0,I=(o=r._redirectEventId)!==null&&o!==void 0?o:void 0,b=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:F,isAnonymous:U,providerData:N,stsTokenManager:x}=r;tt(C&&x,e,"internal-error");const B=ra.fromJSON(this.name,x);tt(typeof C=="string",e,"internal-error"),nA(h,e.name),nA(f,e.name),tt(typeof F=="boolean",e,"internal-error"),tt(typeof U=="boolean",e,"internal-error"),nA(m,e.name),nA(v,e.name),nA(y,e.name),nA(I,e.name),nA(b,e.name),nA(w,e.name);const _=new Fs({uid:C,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:U,photoURL:v,phoneNumber:m,tenantId:y,stsTokenManager:B,createdAt:b,lastLoginAt:w});return N&&Array.isArray(N)&&(_.providerData=N.map(S=>Object.assign({},S))),I&&(_._redirectEventId=I),_}static async _fromIdTokenResponse(e,r,n=!1){const s=new ra;s.updateFromServerResponse(r);const A=new Fs({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Xh(A),A}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];tt(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?dF(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),a=new ra;a.updateFromIdToken(n);const o=new Fs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new l0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;function ks(t){Ms(t instanceof Function,"Expected a class definition");let e=bb.get(t);return e?(Ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}hF.type="NONE";const Cb=hF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,r){return`firebase:${t}:${e}:${r}`}class na{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:A}=this.auth;this.fullUserKey=Yd(this.userKey,s.apiKey,A),this.fullPersistenceKey=Yd("persistence",s.apiKey,A),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new na(ks(Cb),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||ks(Cb);const i=Yd(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const d=await c._get(i);if(d){const h=Fs._fromJSON(e,d);c!==A&&(a=h),A=c;break}}catch{}const o=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!o.length?new na(A,e,n):(A=o[0],a&&await A._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new na(A,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yF(e))return"Blackberry";if(xF(e))return"Webos";if(gF(e))return"Safari";if((e.includes("chrome/")||pF(e))&&!e.includes("edge/"))return"Chrome";if(wF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function fF(t=yr()){return/firefox\//i.test(t)}function gF(t=yr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pF(t=yr()){return/crios\//i.test(t)}function mF(t=yr()){return/iemobile/i.test(t)}function wF(t=yr()){return/android/i.test(t)}function yF(t=yr()){return/blackberry/i.test(t)}function xF(t=yr()){return/webos/i.test(t)}function Py(t=yr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Mj(t=yr()){var e;return Py(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Oj(){return IN()&&document.documentMode===10}function vF(t=yr()){return Py(t)||wF(t)||xF(t)||yF(t)||/windows phone/i.test(t)||mF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e=[]){let r;switch(t){case"Browser":r=_b(yr());break;case"Worker":r=`${_b(yr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Pa}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=A=>new Promise((i,a)=>{try{const o=e(A);i(o)}catch(o){a(o)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(t,e={}){return fi(t,"GET","/v2/passwordPolicy",lo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=6;class Gj{constructor(e){var r,n,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:Kj,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,A,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(r=o.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(n=o.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),o.isValid&&(o.isValid=(s=o.containsLowercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(A=o.containsUppercaseLetter)!==null&&A!==void 0?A:!0),o.isValid&&(o.isValid=(i=o.containsNumericCharacter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(a=o.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),o}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ib(this),this.idTokenSubscription=new Ib(this),this.beforeStateQueue=new Hj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ks(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await na.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await uF(this,{idToken:e}),n=await Fs._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Is(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=s==null?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&(o!=null&&o.user)&&(s=o.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Xh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_j()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Is(this.app))return Promise.reject(OA(this));const r=e?Dt(e):null;return r&&tt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Is(this.app)?Promise.reject(OA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Is(this.app)?Promise.reject(OA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vj(this),r=new Gj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await jj(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ks(e)||this._popupRedirectResolver;tt(r,this,"argument-error"),this.redirectPersistenceManager=await na.create(this,[ks(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const A=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(a,this,"internal-error"),a.then(()=>{i||A(this.currentUser)}),typeof r=="function"){const o=e.addObserver(r,n,s);return()=>{i=!0,o()}}else{const o=e.addObserver(r);return()=>{i=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Bj(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Xa(t){return Dt(t)}class Ib{constructor(e){this.auth=e,this.observer=null,this.addObserver=UN(r=>this.observer=r)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $j(t){sg=t}function bF(t){return sg.loadJS(t)}function Wj(){return sg.recaptchaEnterpriseScript}function qj(){return sg.gapiScript}function Xj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Jj="recaptcha-enterprise",Yj="NO_RECAPTCHA";class Zj{constructor(e){this.type=Jj,this.auth=Xa(e)}async verify(e="verify",r=!1){async function n(A){if(!r){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,a)=>{Sj(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new kj(o);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(o=>{a(o)})})}function s(A,i,a){const o=window.grecaptcha;vb(o)?o.enterprise.ready(()=>{o.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(Yj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{n(this.auth).then(a=>{if(!r&&vb(window.grecaptcha))s(a,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let o=Wj();o.length!==0&&(o+=a),bF(o).then(()=>{s(a,A,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function Eb(t,e,r,n=!1){const s=new Zj(t);let A;try{A=await s.verify(r)}catch{A=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Tb(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await Eb(t,e,r,r==="getOobCode");return n(t,A)}else return n(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Eb(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(A)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e){const r=tu(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),A=r.getOptions();if(zA(A,e??{}))return s;Jn(s,"already-initialized")}return r.initialize({options:e})}function tM(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ks);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function rM(t,e,r){const n=Xa(t);tt(n._canInitEmulator,n,"emulator-config-failed"),tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,A=CF(e),{host:i,port:a}=nM(e),o=a===null?"":`:${a}`;n.config.emulator={url:`${A}//${i}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:a,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),sM()}function CF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nM(t){const e=CF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const A=s[1];return{host:A,port:Fb(n.substr(A.length+1))}}else{const[A,i]=n.split(":");return{host:A,port:Fb(i)}}}function Fb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sM(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,r){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function AM(t,e){return fi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t,e){return ng(t,"POST","/v1/accounts:signInWithPassword",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return ng(t,"POST","/v1/accounts:signInWithEmailLink",lo(t,e))}async function aM(t,e){return ng(t,"POST","/v1/accounts:signInWithEmailLink",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Ly{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Kc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Kc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tb(e,r,"signInWithPassword",iM);case"emailLink":return oM(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tb(e,n,"signUpPassword",AM);case"emailLink":return aM(e,{idToken:r,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(t,e){return ng(t,"POST","/v1/accounts:signInWithIdp",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="http://localhost";class to extends Ly{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Jn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,A=Qy(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new to(n,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return sa(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,sa(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,sa(e,r)}buildRequest(){const e={requestUri:lM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=eu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uM(t){const e=Sl(Ul(t)).link,r=e?Sl(Ul(e)).deep_link_id:null,n=Sl(Ul(t)).deep_link_id;return(n?Sl(Ul(n)).link:null)||n||r||e||t}class jy{constructor(e){var r,n,s,A,i,a;const o=Sl(Ul(e)),c=(r=o.apiKey)!==null&&r!==void 0?r:null,d=(n=o.oobCode)!==null&&n!==void 0?n:null,h=cM((s=o.mode)!==null&&s!==void 0?s:null);tt(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=o.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=o.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=o.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=uM(e);try{return new jy(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.providerId=Ja.PROVIDER_ID}static credential(e,r){return Kc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=jy.parseLink(r);return tt(n,"argument-error"),Kc._fromEmailAndCode(e,n.code,n.tenantId)}}Ja.PROVIDER_ID="password";Ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends _F{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends wu{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:pA.PROVIDER_ID,signInMethod:pA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pA.credentialFromTaggedObject(e)}static credentialFromError(e){return pA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pA.credential(e.oauthAccessToken)}catch{return null}}}pA.FACEBOOK_SIGN_IN_METHOD="facebook.com";pA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return to._fromParams({providerId:mA.PROVIDER_ID,signInMethod:mA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return mA.credentialFromTaggedObject(e)}static credentialFromError(e){return mA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return mA.credential(r,n)}catch{return null}}}mA.GOOGLE_SIGN_IN_METHOD="google.com";mA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends wu{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:wA.PROVIDER_ID,signInMethod:wA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wA.credentialFromTaggedObject(e)}static credentialFromError(e){return wA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wA.credential(e.oauthAccessToken)}catch{return null}}}wA.GITHUB_SIGN_IN_METHOD="github.com";wA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends wu{constructor(){super("twitter.com")}static credential(e,r){return to._fromParams({providerId:yA.PROVIDER_ID,signInMethod:yA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return yA.credentialFromTaggedObject(e)}static credentialFromError(e){return yA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return yA.credential(r,n)}catch{return null}}}yA.TWITTER_SIGN_IN_METHOD="twitter.com";yA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const A=await Fs._fromIdTokenResponse(e,n,s),i=kb(n);return new ka({user:A,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=kb(n);return new ka({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function kb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends Gs{constructor(e,r,n,s){var A;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Jh(e,r,n,s)}}function IF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(t,A,e,n):A})}async function dM(t,e,r=!1){const n=await Vc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ka._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e,r=!1){const{auth:n}=t;if(Is(n.app))return Promise.reject(OA(n));const s="reauthenticate";try{const A=await Vc(t,IF(n,s,e,t),r);tt(A.idToken,n,"internal-error");const i=Dy(A.idToken);tt(i,n,"internal-error");const{sub:a}=i;return tt(t.uid===a,n,"user-mismatch"),ka._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&Jn(n,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(t,e,r=!1){if(Is(t.app))return Promise.reject(OA(t));const n="signIn",s=await IF(t,n,e),A=await ka._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(A.user),A}async function fM(t,e){return EF(Xa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t){const e=Xa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function pM(t,e,r){return Is(t.app)?Promise.reject(OA(t)):fM(Dt(t),Ja.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&gM(t),n})}function mM(t,e,r,n){return Dt(t).onIdTokenChanged(e,r,n)}function wM(t,e,r){return Dt(t).beforeAuthStateChanged(e,r)}function yM(t,e,r,n){return Dt(t).onAuthStateChanged(e,r,n)}function Sb(t){return Dt(t).signOut()}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=1e3,vM=10;class FF extends TF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,o)=>{this.notifyListeners(i,o)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},A=this.storage.getItem(n);Oj()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vM):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},xM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}FF.type="LOCAL";const BM=FF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF extends TF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}kF.type="SESSION";const SF=kF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Ag(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:A}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(i).map(async c=>c(r.origin,A)),o=await bM(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:o})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ag.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((a,o)=>{const c=My("",20);s.port1.start();const d=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),a(f.data.response);break;default:clearTimeout(d),clearTimeout(A),o(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return window}function _M(t){ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return typeof ds().WorkerGlobalScope<"u"&&typeof ds().importScripts=="function"}async function IM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TM(){return UF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF="firebaseLocalStorageDb",FM=1,Zh="firebaseLocalStorage",NF="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ig(t,e){return t.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function kM(){const t=indexedDB.deleteDatabase(QF);return new yu(t).toPromise()}function c0(){const t=indexedDB.open(QF,FM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Zh,{keyPath:NF})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Zh)?e(n):(n.close(),await kM(),e(await c0()))})})}async function Ub(t,e,r){const n=ig(t,!0).put({[NF]:e,value:r});return new yu(n).toPromise()}async function SM(t,e){const r=ig(t,!1).get(e),n=await new yu(r).toPromise();return n===void 0?null:n.value}function Qb(t,e){const r=ig(t,!0).delete(e);return new yu(r).toPromise()}const UM=800,QM=3;class RF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await c0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>QM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ag._getInstance(TM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await IM(),!this.activeServiceWorker)return;this.sender=new CM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await c0();return await Ub(e,Yh,"1"),await Qb(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ub(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>SM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=ig(s,!1).getAll();return new yu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RF.type="LOCAL";const NM=RF;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t,e){return e?ks(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends Ly{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,r){return sa(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function DM(t){return EF(t.auth,new Oy(t),t.bypassAuthState)}function PM(t){const{auth:e,user:r}=t;return tt(r,e,"internal-error"),hM(r,new Oy(t),t.bypassAuthState)}async function LM(t){const{auth:e,user:r}=t;return tt(r,e,"internal-error"),dM(r,new Oy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,r,n,s,A=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:A,error:i,type:a}=e;if(i){this.reject(i);return}const o={auth:this.auth,requestUri:r,sessionId:n,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DM;case"linkViaPopup":case"linkViaRedirect":return LM;case"reauthViaPopup":case"reauthViaRedirect":return PM;default:Jn(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new mu(2e3,1e4);class Go extends DF{constructor(e,r,n,s,A){super(e,r,s,A),this.provider=n,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=My();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jM.get())};e()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="pendingRedirect",Zd=new Map;class OM extends DF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const n=await HM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HM(t,e){const r=GM(e),n=KM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function VM(t,e){Zd.set(t._key(),e)}function KM(t){return ks(t._redirectPersistence)}function GM(t){return Yd(MM,t.config.apiKey,t.name)}async function zM(t,e,r=!1){if(Is(t.app))return Promise.reject(OA(t));const n=Xa(t),s=RM(n,e),i=await new OM(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=10*60*1e3;class WM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!PF(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(us(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$M&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nb(e))}saveEventToCache(e){this.cachedEventUids.add(Nb(e)),this.lastProcessedEventTime=Date.now()}}function Nb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e={}){return fi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YM=/^https?/;async function ZM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XM(t);for(const r of e)try{if(eO(r))return}catch{}Jn(t,"unauthorized-domain")}function eO(t){const e=a0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!YM.test(r))return!1;if(JM.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new mu(3e4,6e4);function Rb(){const t=ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function rO(t){return new Promise((e,r)=>{var n,s,A;function i(){Rb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rb(),r(us(t,"network-request-failed"))},timeout:tO.get()})}if(!((s=(n=ds().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=ds().gapi)===null||A===void 0)&&A.load)i();else{const a=Xj("iframefcb");return ds()[a]=()=>{gapi.load?i():r(us(t,"network-request-failed"))},bF(`${qj()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw eh=null,e})}let eh=null;function nO(t){return eh=eh||rO(t),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new mu(5e3,15e3),AO="__/auth/iframe",iO="emulator/auth/iframe",oO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lO(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ry(e,iO):`https://${t.config.authDomain}/${AO}`,n={apiKey:e.apiKey,appName:t.name,v:Pa},s=aO.get(t.config.apiHost);s&&(n.eid=s);const A=t._getFrameworks();return A.length&&(n.fw=A.join(",")),`${r}?${eu(n).slice(1)}`}async function cO(t){const e=await nO(t),r=ds().gapi;return tt(r,t,"internal-error"),e.open({where:document.body,url:lO(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oO,dontclear:!0},n=>new Promise(async(s,A)=>{await n.restyle({setHideOnLeave:!1});const i=us(t,"network-request-failed"),a=ds().setTimeout(()=>{A(i)},sO.get());function o(){ds().clearTimeout(a),s(n)}n.ping(o).then(o,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dO=500,hO=600,fO="_blank",gO="http://localhost";class Db{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pO(t,e,r,n=dO,s=hO){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const o=Object.assign(Object.assign({},uO),{width:n.toString(),height:s.toString(),top:A,left:i}),c=yr().toLowerCase();r&&(a=pF(c)?fO:r),fF(c)&&(e=e||gO,o.scrollbars="yes");const d=Object.entries(o).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(Mj(c)&&a!=="_self")return mO(e||"",a),new Db(null);const h=window.open(e||"",a,d);tt(h,t,"popup-blocked");try{h.focus()}catch{}return new Db(h)}function mO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="__/auth/handler",yO="emulator/auth/handler",xO=encodeURIComponent("fac");async function Pb(t,e,r,n,s,A){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Pa,eventId:s};if(e instanceof _F){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",SN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof wu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const o=await t._getAppCheckToken(),c=o?`#${xO}=${encodeURIComponent(o)}`:"";return`${vO(t)}?${eu(a).slice(1)}${c}`}function vO({config:t}){return t.emulator?Ry(t,yO):`https://${t.authDomain}/${wO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class BO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SF,this._completeRedirectFn=zM,this._overrideRedirectResult=VM}async _openPopup(e,r,n,s){var A;Ms((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await Pb(e,r,n,a0(),s);return pO(e,i,My())}async _openRedirect(e,r,n,s){await this._originValidation(e);const A=await Pb(e,r,n,a0(),s);return _M(A),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:A}=this.eventManagers[r];return s?Promise.resolve(s):(Ms(A,"If manager is not set, promise should be"),A)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await cO(e),n=new WM(e);return r.register("authEvent",s=>(tt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(hp,{type:hp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[hp];i!==void 0&&r(!!i),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=ZM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return vF()||gF()||Py()}}const bO=BO;var Lb="@firebase/auth",jb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IO(t){fa(new Gi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;tt(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BF(t)},c=new zj(n,s,A,o);return tM(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),fa(new Gi("auth-internal",e=>{const r=Xa(e.getProvider("auth").getImmediate());return(n=>new CO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),MA(Lb,jb,_O(t)),MA(Lb,jb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=5*60,TO=yE("authIdTokenMaxAge")||EO;let Mb=null;const FO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>TO)return;const s=r==null?void 0:r.token;Mb!==s&&(Mb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kO(t=Uw()){const e=tu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=eM(t,{popupRedirectResolver:bO,persistence:[NM,BM,SF]}),n=yE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const A=new URL(n,location.origin);if(location.origin===A.origin){const i=FO(A.toString());wM(r,i,()=>i(r.currentUser)),mM(r,a=>i(a))}}const s=mE("auth");return s&&rM(r,`http://${s}`),r}function SO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$j({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const A=us("internal-error");A.customData=s,r(A)},n.type="text/javascript",n.charset="UTF-8",SO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IO("Browser");const UO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",QO="zameny-b6c3f.firebaseapp.com",NO="zameny-b6c3f",RO="zameny-b6c3f.firebasestorage.app",DO="323355347910",PO="1:323355347910:web:c81f2813dce5ee9373c0c7",LF={apiKey:UO,authDomain:QO,projectId:NO,storageBucket:RO,messagingSenderId:DO,appId:PO};let ef;NR().length?ef=Uw():ef=CE(LF);const Br=NT(ef),xn=kO(ef);LF.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const vt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule"},fp=new Map,LO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},zo=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>zo(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=zo(n);s!==void 0&&(e[r]=s)}return e}return t},jF=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!jF(t[s],e[s]))return!1;return!0}return!1};async function jO(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const Pt={syncCollection:async(t,e)=>{if(!Br)return;let r=fp.get(t);r||(r=new Map,fp.set(t,r));const n=new Map;e.forEach(A=>{A&&A.id&&n.set(A.id,zo(A))});const s=[];if(r.forEach((A,i)=>{n.has(i)||s.push({type:"delete",id:i})}),n.forEach((A,i)=>{const a=r.get(i);(!a||!jF(a,A))&&s.push({type:a?"update":"create",item:A,id:i})}),s.length!==0)try{const A=LO(s,450);for(const i of A){const a=rF(Br);i.forEach(o=>{const c=ns(Br,t,o.id);o.type==="delete"?(a.delete(c),r.delete(o.id)):(a.set(c,o.item,{merge:!0}),r.set(o.id,o.item))}),await a.commit()}}catch(A){throw console.error(`Failed to sync ${t}:`,A),A}},syncCacheWithDatabase:async t=>{if(!Br)return;const e=o0(A0(Br,t)),r=await jO(async()=>await XT(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),fp.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)},save:async t=>{if(!Br)return;const e=xn==null?void 0:xn.currentUser;if(!e||e.email!=="admin@gymnasium22.com")return;const r=[];t.teachers&&r.push(Pt.syncCollection(vt.TEACHERS,t.teachers)),t.subjects&&r.push(Pt.syncCollection(vt.SUBJECTS,t.subjects)),t.classes&&r.push(Pt.syncCollection(vt.CLASSES,t.classes)),t.rooms&&r.push(Pt.syncCollection(vt.ROOMS,t.rooms)),t.schedule&&r.push(Pt.syncCollection(vt.SCHEDULE_1,t.schedule)),t.schedule2&&r.push(Pt.syncCollection(vt.SCHEDULE_2,t.schedule2)),t.substitutions&&r.push(Pt.syncCollection(vt.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&r.push(Pt.syncCollection(vt.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&r.push(Pt.syncCollection(vt.DUTY_SCHEDULE,t.dutySchedule)),t.settings&&r.push(qd(ns(Br,vt.CONFIG,"settings"),zo(t.settings),{merge:!0})),t.bellSchedule&&r.push(qd(ns(Br,vt.CONFIG,"bells"),zo({items:t.bellSchedule}))),await Promise.all(r)},subscribe:(t,e)=>{if(!Br)return()=>{};let r={...en},n=!0,s;const A=()=>{clearTimeout(s),s=setTimeout(async()=>{const o={...r};if(n){n=!1;const c=[Pt.syncCacheWithDatabase(vt.TEACHERS),Pt.syncCacheWithDatabase(vt.SUBJECTS),Pt.syncCacheWithDatabase(vt.CLASSES),Pt.syncCacheWithDatabase(vt.ROOMS),Pt.syncCacheWithDatabase(vt.SCHEDULE_1),Pt.syncCacheWithDatabase(vt.SCHEDULE_2),Pt.syncCacheWithDatabase(vt.SUBSTITUTIONS),Pt.syncCacheWithDatabase(vt.DUTY_ZONES),Pt.syncCacheWithDatabase(vt.DUTY_SCHEDULE)];try{await Promise.all(c),console.log("Initial cache synchronization completed")}catch(d){console.error("Failed to sync initial cache (likely quota exceeded):",d);const h=d;h!=null&&h.message&&h.message.includes("quota")||(h==null?void 0:h.code)==="resource-exhausted"||(h==null?void 0:h.code)==="quota-exceeded"?e(new Error("     .      .")):e(h)}}t(o)},50)},i=[],a=(o,c)=>{const d=o0(A0(Br,o));return Xd(d,h=>{const f=h.docs.map(m=>m.data());f.sort((m,v)=>{const y=typeof m.order=="number"?m.order:999999,I=typeof v.order=="number"?v.order:999999;return y-I}),r[c]=f,A()},h=>{console.warn(`Error reading ${o}:`,h)})};return i.push(a(vt.TEACHERS,"teachers")),i.push(a(vt.SUBJECTS,"subjects")),i.push(a(vt.CLASSES,"classes")),i.push(a(vt.ROOMS,"rooms")),i.push(a(vt.SCHEDULE_1,"schedule")),i.push(a(vt.SCHEDULE_2,"schedule2")),i.push(a(vt.SUBSTITUTIONS,"substitutions")),i.push(a(vt.DUTY_ZONES,"dutyZones")),i.push(a(vt.DUTY_SCHEDULE,"dutySchedule")),i.push(Xd(ns(Br,vt.CONFIG,"settings"),o=>{o.exists()&&(r.settings={...en.settings,...o.data()},A())})),i.push(Xd(ns(Br,vt.CONFIG,"bells"),o=>{if(o.exists()){const c=o.data();r.bellSchedule=c.items||en.bellSchedule,A()}})),()=>{i.forEach(o=>o()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(A=new Date)=>{const i=A.getFullYear(),a=String(A.getMonth()+1).padStart(2,"0"),o=String(A.getDate()).padStart(2,"0");return`${i}-${a}-${o}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Br)throw new Error("Database not initialized");const r=xn==null?void 0:xn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(A=>({id:A.id,name:A.name,color:A.color,difficulty:A.difficulty,requiredRoomType:A.requiredRoomType,order:A.order})),teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:A.order})),classes:e.classes.map(A=>({id:A.id,name:A.name,shift:A.shift,studentsCount:A.studentsCount,order:A.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=zo(n);await qd(ns(Br,vt.PUBLIC,t),s)},getPublicData:async t=>{if(!Br)return null;try{const e=await cN(()=>Promise.resolve().then(()=>xj),void 0).then(r=>r.getDoc(ns(Br,vt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Br&&await JT(ns(Br,vt.PUBLIC,t))}},MF=k.createContext(void 0),MO="admin@gymnasium22.com",OO="teacher@gymnasium22.com",HO=({children:t})=>{const[e,r]=k.useState(null),[n,s]=k.useState(null),[A,i]=k.useState(!0);k.useEffect(()=>{if(!xn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=yM(xn,d=>{r(d),d?d.email===MO?s("admin"):d.email===OO?s("teacher"):(s(null),Sb(xn)):s(null),i(!1)});return()=>c()},[]);const a=async()=>{xn&&await Sb(xn),s(null)},o=()=>{s("guest"),i(!1)};return l.jsx(MF.Provider,{value:{user:e,role:n,loading:A,logout:a,setGuestRole:o},children:t})},co=()=>{const t=k.useContext(MF);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Bn=()=>crypto.randomUUID(),Hy=(t,e)=>{const r=t.getMonth(),n=e==null?void 0:e.semesterConfig;if(n){if(n.secondSemesterMonths.includes(r))return 2;if(n.firstSemesterMonths.includes(r))return 1}return r>=0&&r<=4?2:1},OF=(t,e)=>Hy(t,e.settings)===2?e.schedule2||[]:e.schedule||[],Vy=(t=new Date)=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},HF=k.createContext(void 0),vl="gym_data_local_backup_v2",Bl=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},sd=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},VO=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},sA={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)}},VF=({children:t,initialData:e})=>{const[r,n]=k.useState(en),[s,A]=k.useState(!0),[i,a]=k.useState(!1),[o,c]=k.useState([]),[d,h]=k.useState(-1),{user:f,role:m,loading:v}=co();k.useEffect(()=>{if(e){n(e),c([e]),h(0),A(!1);return}if(v)return;let F=null;if(Bl()&&(F=VO(vl),F))try{const x=JSON.parse(F);x&&x.teachers&&(n(B=>({...B,...x})),console.log("Loaded from local storage backup"))}catch(x){sA.log("Error parsing local backup",x)}if(!(f||m==="guest")){F||n(en),A(!1);return}A(!0);let N;try{N=Pt.subscribe(x=>{const B={...en,...x};B.teachers||(B.teachers=[]),B.teachers=B.teachers.map(_=>({telegramChatId:"",..._,shifts:_.shifts||[Ae.First,Ae.Second]})),B.schedule||(B.schedule=[]),B.schedule2||(B.schedule2=[]),B.substitutions||(B.substitutions=[]),B.bellSchedule||(B.bellSchedule=Qh),(!B.dutyZones||B.dutyZones.length===0)&&(B.dutyZones=hE),B.dutySchedule||(B.dutySchedule=[]),B.settings?B.settings={...en.settings,...B.settings}:B.settings=en.settings,n(B),Bl()&&sd(vl,JSON.stringify(B)),c(_=>_.length===0?[B]:_),h(_=>_===-1?0:_),A(!1)},x=>{sA.log("Failed to subscribe to data:",x),A(!1)})}catch(x){sA.log("Failed to initialize subscription:",x),A(!1),N=void 0}return()=>{N&&N()}},[e,f,m,v]);const y=k.useCallback(async(F,U=!0)=>{const N=m==="guest";a(!0);try{const x={...r,...F};if(n(x),Bl()&&sd(vl,JSON.stringify(x)),!e&&f&&!N)try{await Pt.save(F)}catch(B){throw n(r),B}else N&&console.warn("       .");if(U){const B=o.slice(0,d+1);B.push(x);const _=50;if(B.length>_){const S=B.length-_;B.splice(0,S),h(_-1)}else h(B.length-1);c(B)}}catch(x){sA.firebase(x," ")}finally{a(!1)}},[r,o,d,f,m,e]),I=k.useCallback(async()=>{h(F=>{if(F>0){const U=o[F-1];if(n(U),Bl()&&sd(vl,JSON.stringify(U)),!e&&f)try{Pt.save(U).catch(N=>sA.firebase(N," "))}catch(N){sA.firebase(N," ")}return F-1}return F})},[o,e,f]),b=k.useCallback(async()=>{h(F=>{if(F<o.length-1){const U=o[F+1];if(n(U),Bl()&&sd(vl,JSON.stringify(U)),!e&&f)try{Pt.save(U).catch(N=>sA.firebase(N," "))}catch(N){sA.firebase(N," ")}return F+1}return F})},[o,e,f]),w=k.useCallback(async()=>{await y(en)},[y]),C=k.useMemo(()=>({data:r,isLoading:s,isSaving:i,saveData:y,resetData:w,undo:I,redo:b,canUndo:d>0,canRedo:d<o.length-1}),[r,s,i,y,w,I,b,d]);return l.jsx(HF.Provider,{value:C,children:t})},og=()=>{const t=k.useContext(HF);if(!t)throw new Error("useFullData must be used within DataProvider");return t},KF=k.createContext(void 0),GF=k.createContext(void 0),zF=({children:t})=>{const{data:e,saveData:r}=og(),n=k.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=k.useCallback(async(i,a)=>{await r(i,a)},[r]),A=k.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return l.jsx(KF.Provider,{value:A,children:t})},$F=({children:t})=>{const{data:e,saveData:r}=og(),A=Hy(new Date,e.settings)===2?e.schedule2||[]:e.schedule||[],i=k.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2:h})},[r]),a=k.useCallback(async(d,h)=>{await r(d,h)},[r]),o=k.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,saveSemesterSchedule:i,saveScheduleData:a}),[A,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,i,a]),c=k.useMemo(()=>({...o,saveScheduleData:a}),[o,a]);return l.jsx(GF.Provider,{value:c,children:t})},fs=()=>{const t=k.useContext(KF);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=og();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||en.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},uo=()=>{const t=k.useContext(GF);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=og();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},KO={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),l.jsx("path",{d:"m20 16-4-4 4-4"}),l.jsx("path",{d:"m4 8 4 4-4 4"}),l.jsx("path",{d:"m16 4-4 4-4-4"}),l.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})},K=({name:t,size:e=24,className:r="",...n})=>{const s=KO[t];return s?l.jsx(s,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},WF=k.createContext(void 0),GO=({children:t})=>{const[e,r]=k.useState([]),n=A=>{const i=Bn();r(a=>[...a,{...A,id:i}])},s=A=>{r(i=>i.filter(a=>a.id!==A))};return l.jsxs(WF.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,l.jsx($O,{toasts:e,onRemoveToast:s})]})},zO=()=>{const t=k.useContext(WF);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},$O=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:l.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&l.jsx("div",{className:"flex justify-end mb-2",children:l.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>l.jsx(WO,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},Ln=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(k.useEffect(()=>{if(!t)return;const A=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:A=>A.target===A.currentTarget&&e(),children:l.jsxs("div",{className:`bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx(K,{name:"X",size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),WO=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:A})=>{const[i,a]=k.useState(!0),[o,c]=k.useState(!1),d=k.useRef(null);k.useEffect(()=>(d.current=setTimeout(()=>{h()},s),()=>{d.current&&clearTimeout(d.current)}),[]);const h=()=>{d.current&&(clearTimeout(d.current),d.current=null),c(!0),setTimeout(()=>{a(!1),A(t)},300)};if(!i)return null;const m=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),v=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return l.jsx("div",{className:`max-w-sm w-full animate-slide-in ${o?"animate-fade-out":""}`,children:l.jsx("div",{className:`modern-card border p-4 ${m.bg}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`flex-shrink-0 ${m.icon}`,children:l.jsx(K,{name:v,size:20})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`text-sm font-semibold ${m.title}`,children:r}),n&&l.jsx("p",{className:`text-sm mt-1 ${m.message}`,children:n})]}),l.jsx("button",{onClick:h,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:l.jsx(K,{name:"X",size:16})})]})})})},qO=({x:t,y:e,onClose:r,actions:n})=>{const s=k.useRef(null);if(k.useEffect(()=>{if(t===null||e===null)return;const a=c=>{s.current&&!s.current.contains(c.target)&&r()},o=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",a,!0),document.addEventListener("keydown",o),()=>{window.removeEventListener("click",a,!0),document.removeEventListener("keydown",o)}},[t,e,r]),t===null||e===null)return null;const A=window.innerWidth-t<200?t-200:t,i={top:e,left:A};return l.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:i,children:n.map(a=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),a.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${a.color||"text-slate-700 dark:text-slate-200"}`,children:[a.icon&&l.jsx(K,{name:a.icon,size:16}),a.label]},a.id||a.label))})},XO=()=>{const{bellSchedule:t,isSaving:e}=fs(),[r,n]=k.useState("..."),[s,A]=k.useState(""),[i,a]=k.useState(0),[o,c]=k.useState("bg-slate-500"),[d,h]=k.useState("");return k.useEffect(()=>{const f=()=>{const v=new Date,y=v.getDay(),b=[null,ut.Monday,ut.Tuesday,ut.Wednesday,ut.Thursday,ut.Friday,null][y];if(h(b||""),!b){n(" "),A(" "),c("bg-slate-400"),a(0);return}const w=x=>{const[B,_]=x.split(":").map(Number);return B*60+_},C=v.getHours()*60+v.getMinutes();let F=t.filter(x=>x.day===b);F.length===0&&(F=t.filter(x=>x.day==="default")),F.sort((x,B)=>w(x.start)-w(B.start));let U=null,N=null;for(let x=0;x<F.length;x++){const B=F[x],_=w(B.start),S=w(B.end);if(C>=_&&C<S){U={...B,duration:S-_,passed:C-_};break}if(x<F.length-1){const R=F[x+1],P=w(R.start);if(C>=S&&C<P){const E=P-S;if(E>0&&E<60){const We=C-S,qe=P-C;N={nextLesson:R,duration:E,passed:We,remaining:qe};break}}}}if(U){n(`${U.period} `);const x=Math.max(0,U.duration-U.passed);A(`${U.shift===Ae.First?"1 ":"2 "}  . ${x} `);const B=U.duration>0?U.passed/U.duration*100:0;a(Math.min(100,Math.max(0,B))),c("bg-indigo-600")}else if(N){n(""),A(` ${N.remaining}  ${N.nextLesson.period} `),c("bg-amber-500");const x=N.duration>0?N.passed/N.duration*100:0;a(Math.min(100,Math.max(0,x)))}else n(" "),A(" "),c("bg-slate-400"),a(0)};f();const m=setInterval(f,6e4);return()=>clearInterval(m)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:d}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),l.jsxs("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(K,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),l.jsx(K,{name:e?"Loader":"Clock",size:16,className:e?"text-indigo-600 animate-spin":o==="bg-indigo-600"?"text-indigo-600":o==="bg-amber-500"?"text-amber-500":"text-slate-400"})]})]}),i>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${i}%`}})})]})},th=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var v;const[A,i]=k.useState(!1),[a,o]=k.useState(""),c=k.useRef(null);k.useEffect(()=>{const y=b=>{c.current&&!c.current.contains(b.target)&&i(!1)},I=b=>{b.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",y),document.addEventListener("keydown",I),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("keydown",I)}},[]);const h=((v=(s?t.flatMap(y=>y.options):t).find(y=>y.value===e))==null?void 0:v.label)||n,f=s?t.map(y=>({...y,options:y.options.filter(I=>I.label.toLowerCase().includes(a.toLowerCase()))})).filter(y=>y.options.length>0):null,m=s?null:t.filter(y=>y.label.toLowerCase().includes(a.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(K,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:l.jsx("input",{autoFocus:!0,value:a,onChange:y=>o(y.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&f?f.map(y=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:y.label}),y.options.map(I=>l.jsx("div",{onClick:()=>{r(I.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===I.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:I.label},I.value))]},y.id||y.label)):m?m.map(y=>l.jsx("div",{onClick:()=>{r(y.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===y.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:y.label},y.value)):null]})]})},Ad=({children:t,className:e=""})=>{const r=bs.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,s)=>{const A=bs.isValidElement(n)&&n.key?n.key:s;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},A)})})},gp=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(s=>{const A=s.id??s.label,i=Math.min(100,Math.max(0,s.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},A)})})},JO=({onMenuClick:t,role:e})=>{const r=e==="admin"||e==="teacher",n=e==="admin";return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:l.jsxs("div",{className:"flex justify-around items-center h-20",children:[r&&l.jsxs(bA,{to:"/dashboard",className:({isActive:s})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${s?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(K,{name:"Home",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]}),l.jsxs(bA,{to:"/schedule",className:({isActive:s})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${s?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(K,{name:"Calendar",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]}),n&&l.jsxs(bA,{to:"/substitutions",className:({isActive:s})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${s?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[l.jsx(K,{name:"Repeat",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]}),l.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 active:bg-indigo-50/50 dark:active:bg-indigo-900/20 transition-all duration-300 flex-1 h-full hover:bg-slate-100/50 dark:hover:bg-slate-700/30",children:[l.jsx(K,{name:"Menu",size:26,strokeWidth:2.5}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]})]})})},YO=(t={})=>{const{enabled:e=!0,threshold:r=50}=t,n=Da(),s=k.useRef(null),A=k.useRef(null);k.useEffect(()=>{if(!e)return;const i=o=>{s.current=o.touches[0].clientX,A.current=o.touches[0].clientY},a=o=>{if(!s.current||!A.current)return;const c=o.changedTouches[0].clientX,d=o.changedTouches[0].clientY,h=c-s.current,f=d-A.current;Math.abs(h)>Math.abs(f)&&Math.abs(h)>r&&h>0&&n(-1),s.current=null,A.current=null};return document.addEventListener("touchstart",i,!1),document.addEventListener("touchend",a,!1),()=>{document.removeEventListener("touchstart",i),document.removeEventListener("touchend",a)}},[e,n,r])},ZO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:A}=fs(),{schedule:i,substitutions:a}=uo(),{role:o}=co(),c=Da(),{addToast:d}=zO(),[h,f]=k.useState(localStorage.getItem("gym_notes")||""),[m]=k.useState(new Date),[v,y]=k.useState(""),[I,b]=k.useState(null),[w,C]=k.useState(!1),[F,U]=k.useState(!1),N=(te=new Date)=>{const Ke=te.getFullYear(),Ge=String(te.getMonth()+1).padStart(2,"0"),nt=String(te.getDate()).padStart(2,"0");return`${Ke}-${Ge}-${nt}`},[x,B]=k.useState(!1),[_,S]=k.useState(""),[R,P]=k.useState(!1),E=te=>te.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),We=te=>{const Ke=E(te);f(Ke),U(!0)},qe=()=>{localStorage.setItem("gym_notes",h),U(!1),d({type:"success",title:" ",message:"     ",duration:3e3})};k.useEffect(()=>{if(!F)return;const te=setTimeout(()=>{localStorage.setItem("gym_notes",h),U(!1)},3e3);return()=>clearTimeout(te)},[h,F]);const at=k.useMemo(()=>{const te=m.getHours();return te<5?" ":te<12?" ":te<18?" ":" "},[m]),Le=k.useMemo(()=>N(m),[m]),ce=k.useMemo(()=>{const te=m.getDay();return te===0||te===6?null:Et[te-1]},[m]),Ee=k.useMemo(()=>{const te=new Date;return te.setHours(0,0,0,0),e.filter(Ke=>Ke.birthDate).map(Ke=>{const Ge=new Date(Ke.birthDate);let nt=new Date(te.getFullYear(),Ge.getMonth(),Ge.getDate());nt<te&&nt.setFullYear(te.getFullYear()+1);const ct=Math.ceil((nt.getTime()-te.getTime())/(1e3*60*60*24));return{...Ke,diff:ct,age:te.getFullYear()-Ge.getFullYear()}}).filter(Ke=>Ke.diff<=30).sort((Ke,Ge)=>Ke.diff-Ge.diff)},[e]),Ne=k.useMemo(()=>{const te=e.length,Ke=new Map;e.filter(ue=>ue.unavailableDates.includes(Le)).forEach(ue=>{var Y;const X=((Y=ue.absenceReasons)==null?void 0:Y[Le])===" "?" ":"";Ke.set(ue.id,{id:ue.id,name:ue.name,displayReason:X})});const Ge=a.filter(ue=>ue.date===Le&&ue.replacementTeacherId!=="conducted"&&ue.replacementTeacherId!==ue.originalTeacherId),nt=new Map;Ge.forEach(ue=>{if(Ke.has(ue.originalTeacherId))return;const L=e.find(pe=>pe.id===ue.originalTeacherId);if(!L)return;const X=i.find(pe=>pe.id===ue.scheduleItemId);if(!X)return;nt.has(ue.originalTeacherId)||nt.set(ue.originalTeacherId,{teacher:L,lessons:[]}),nt.get(ue.originalTeacherId).lessons.push({period:X.period,reason:ue.lessonAbsenceReason})});const ct=Array.from(Ke.values());nt.forEach((ue,L)=>{const X=ue.lessons.sort((V,G)=>V.period-G.period),Y=X.map(V=>V.period).join(", "),ze=X.some(V=>V.reason===" ")?" ":"";ct.push({id:L,name:ue.teacher.name,displayReason:`${Y} : ${ze}`})}),ct.sort((ue,L)=>ue.name.localeCompare(L.name));const Z=ct.length,le=te-Z;return{presentPercent:te>0?Math.round(le/te*100):0,absentCount:Z,totalTeachers:te,absentTeachersList:ct}},[e,Le,a,i]),Je=k.useMemo(()=>{const te=new Date(m);for(te.setDate(m.getDate()+1);te.getDay()===0||te.getDay()===6;)te.setDate(te.getDate()+1);const Ge=[null,"","","","","",null][te.getDay()];if(!Ge)return[];const nt=[];return r.forEach(ct=>{const Z=i.filter(le=>le.classId===ct.id&&le.day===Ge);Z.length===0?nt.push({class:ct.name,issue:`   ${Ge}`}):Z.length<4&&nt.push({class:ct.name,issue:`  (${Z.length})`}),Z.forEach(le=>{if(i.some(ue=>ue.id!==le.id&&ue.day===Ge&&ue.period===le.period&&ue.shift===le.shift&&ue.teacherId===le.teacherId)&&nt.push({class:ct.name,issue:`  (${le.period} )`}),le.roomId){const ue=n.find(L=>L.id===le.roomId);ue&&ue.capacity<ct.studentsCount&&nt.push({class:ct.name,issue:`: ${ue.name} (${le.period} )`})}})}),nt.filter((ct,Z,le)=>le.findIndex(de=>de.class===ct.class&&de.issue===ct.issue)===Z).slice(0,10)},[i,r,e,n,m]),Xe=k.useMemo(()=>{if(!ce)return 0;let te=0;const Ke=i.filter(Ge=>Ge.day===ce);for(const Ge of Ke){const nt=e.find(ct=>ct.id===Ge.teacherId);nt&&nt.unavailableDates.includes(Le)&&(a.find(Z=>Z.scheduleItemId===Ge.id&&Z.date===Le)||te++)}return te},[i,e,a,Le,ce]),Ye=()=>{var X;if(!v){b(null);return}const te=new Date,Ge=[null,ut.Monday,ut.Tuesday,ut.Wednesday,ut.Thursday,ut.Friday,null][te.getDay()];if(!Ge){b({status:"",detail:"  ",color:"text-slate-500"});return}const nt=Y=>{const[pe,ze]=Y.split(":").map(Number);return pe*60+ze},ct=te.getHours()*60+te.getMinutes();let Z=s.filter(Y=>Y.day===Ge);Z.length===0&&(Z=s.filter(Y=>Y.day==="default"));const le=Z.find(Y=>{const pe=nt(Y.start),ze=nt(Y.end);return ct>=pe&&ct<=ze}),de=v.toLowerCase(),ue=e.find(Y=>Y.name.toLowerCase().includes(de)),L=r.find(Y=>Y.name.toLowerCase().includes(de));if(!ue&&!L){b({status:" ",detail:" ",color:"text-red-500"});return}if(ue){if(ue.unavailableDates.includes(Le)){const G=((X=ue.absenceReasons)==null?void 0:X[Le])===" "?" ":"";b({status:"",detail:G,color:"text-red-500",icon:"UserX",items:[]});return}if(!le){b({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Y=i.filter(V=>V.teacherId===ue.id&&V.day===Ge&&V.period===le.period&&V.shift===le.shift),pe=a.filter(V=>V.date===Le&&V.replacementTeacherId===ue.id).map(V=>i.find(G=>G.id===V.scheduleItemId)).filter(V=>!!V&&V.day===Ge&&V.period===le.period&&V.shift===le.shift);let ze=[];Y.forEach(V=>{var ee,et,he;const G=a.find(Se=>Se.date===Le&&Se.scheduleItemId===V.id);if(!G||G.replacementTeacherId===ue.id){const Se=((ee=n.find(fe=>fe.id===((G==null?void 0:G.replacementRoomId)||V.roomId)))==null?void 0:ee.name)||(G==null?void 0:G.replacementRoomId)||V.roomId||" .",ve=(et=t.find(fe=>fe.id===V.subjectId))==null?void 0:et.name,oe=(he=r.find(fe=>fe.id===V.classId))==null?void 0:he.name;ze.push({room:Se,subject:ve,entityName:oe,direction:V.direction,isSubstitution:!!(G&&G.replacementTeacherId===ue.id),originalTeacherName:null})}}),pe.forEach(V=>{var ve,oe,fe;const G=a.find(Te=>Te.date===Le&&Te.scheduleItemId===V.id&&Te.replacementTeacherId===ue.id);if(!G)return;const ee=((ve=n.find(Te=>Te.id===(G.replacementRoomId||V.roomId)))==null?void 0:ve.name)||G.replacementRoomId||V.roomId||" .",et=(oe=t.find(Te=>Te.id===V.subjectId))==null?void 0:oe.name,he=(fe=r.find(Te=>Te.id===V.classId))==null?void 0:fe.name,Se=e.find(Te=>Te.id===G.originalTeacherId);ze.push({room:ee,subject:et,entityName:he,direction:V.direction,isSubstitution:!0,originalTeacherName:Se==null?void 0:Se.name})}),ze.length>0?b({status:` ${le.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ze}):b({status:"",detail:` ( ${le.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(L){if(!le){b({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Y=i.filter(pe=>pe.classId===L.id&&pe.day===Ge&&pe.period===le.period&&pe.shift===le.shift);if(Y.length>0){const pe=Y.map(G=>{var He,Ce,it,Ze,lt;const ee=a.find(ke=>ke.scheduleItemId===G.id&&ke.date===Le);if(ee&&ee.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(He=t.find(ke=>ke.id===G.subjectId))==null?void 0:He.name};const et=!!(ee&&ee.replacementTeacherId!=="conducted"&&ee.replacementTeacherId!=="cancelled"),he=et?ee.replacementTeacherId:G.teacherId,Se=(ee==null?void 0:ee.replacementRoomId)||G.roomId,ve=(Ce=e.find(ke=>ke.id===he))==null?void 0:Ce.name,oe=((it=n.find(ke=>ke.id===Se))==null?void 0:it.name)||Se||" .",fe=(Ze=t.find(ke=>ke.id===G.subjectId))==null?void 0:Ze.name,Te=et?(lt=e.find(ke=>ke.id===ee.originalTeacherId))==null?void 0:lt.name:null;return{room:oe,subject:fe,entityName:ve,direction:G.direction,isSubstitution:et,originalTeacherName:Te}}),ze=pe.filter(G=>!G.cancelled),V=pe.filter(G=>!!G.cancelled);ze.length>0?b({status:` ${le.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ze}):V.length>0?b({status:" ",detail:V.map(G=>G.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):b({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else b({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},wt=async()=>{if(!_.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}P(!0);const te=` *   :*

${_}`;try{const Ge=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:te,parse_mode:"Markdown"})})).json();if(Ge.ok)alert("!   ."),B(!1),S("");else throw new Error(Ge.description)}catch(Ke){console.error("   Telegram:",Ke),alert(`   . : ${Ke}`)}finally{P(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[l.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 animate-fade-in",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[at,", ",o==="admin"?"":"","!"]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:[" ",m.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[l.jsx(K,{name:"Send",size:18}),"  "]})})]}),l.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3 animate-fade-in",children:[l.jsxs(bA,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-xl",children:l.jsx(K,{name:"Calendar",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),o==="admin"&&l.jsxs(bA,{to:"/substitutions",className:"p-4 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-orange-500 text-white p-3 rounded-xl",children:l.jsx(K,{name:"Repeat",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),o==="admin"&&l.jsxs(bA,{to:"/duty",className:"p-4 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-xl",children:l.jsx(K,{name:"Shield",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),o==="guest"&&l.jsxs(bA,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30 border border-emerald-200 dark:border-emerald-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[l.jsx("div",{className:"bg-emerald-500 text-white p-3 rounded-xl",children:l.jsx(K,{name:"Users",size:20})}),l.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:l.jsx(K,{name:"Search",size:22})}),l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{type:"text",inputMode:"search",placeholder:"  ...",value:v,onChange:te=>y(te.target.value),onKeyDown:te=>te.key==="Enter"&&Ye(),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl p-3.5 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),l.jsx("button",{onClick:Ye,className:"btn-primary btn-ripple btn-touch p-3.5 mobile-optimized",children:l.jsx(K,{name:"Search",size:20})})]}),I&&l.jsxs("div",{className:"mt-auto p-4 bg-slate-50/80 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 animate-fade-in backdrop-blur-sm",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-3 flex items-center gap-2 ${I.color}`,children:[l.jsx(K,{name:I.icon||"Info",size:16})," ",I.status]}),I.items&&I.items.length>0?l.jsx("div",{className:"space-y-2.5",children:I.items.map((te,Ke)=>l.jsxs("div",{className:"bg-white dark:bg-dark-900/80 p-3 rounded-xl border border-slate-100 dark:border-slate-600 text-sm shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:te.subject}),te.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-md",children:te.direction})]}),te.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500 mt-1",children:te.originalTeacherName?` (${te.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-slate-500 dark:text-slate-400 text-xs",children:[l.jsx("span",{children:te.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg font-mono font-bold text-slate-600 dark:text-slate-300",children:te.room})]})]},`${te.room}-${te.subject}-${te.entityName}-${Ke}`))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-base leading-snug",children:I.detail})]})]}),l.jsxs("div",{className:`p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 ${Xe>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[Xe>0&&l.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[l.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${Xe>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:l.jsx(K,{name:Xe>0?"AlertTriangle":"CheckCircle",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:Xe>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:Xe}),l.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),l.jsxs("button",{onClick:()=>c("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",l.jsx(K,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:l.jsx(K,{name:"CheckCircle",size:64})}),l.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]}),l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:l.jsx(K,{name:"PieChart",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>C(!w),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:w?" ":" ",children:l.jsx(K,{name:w?"PieChart":"List",size:20})})]}),w?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:Ne.absentTeachersList.length>0?l.jsx("div",{className:"space-y-3",children:Ne.absentTeachersList.map(te=>l.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:te.name}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:te.displayReason})]},te.id))}):l.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:l.jsx("p",{className:"text-sm font-medium",children:"   "})})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[l.jsxs("div",{className:"relative w-28 h-28",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${Ne.presentPercent}, 100`,strokeLinecap:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),l.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),l.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[Ne.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:Ne.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full group card-hover relative bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:l.jsx(K,{name:"Edit2",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:qe,disabled:!F,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${F?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:F?" ":" ",children:l.jsx(K,{name:"Save",size:16})}),l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(h),d({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(K,{name:"Copy",size:16})}),l.jsx("button",{onClick:()=>{confirm(" ?")&&(f(""),U(!1))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx(K,{name:"Trash2",size:16})})]})]}),l.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[l.jsx("textarea",{inputMode:"text",className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:h,onChange:te=>We(te.target.value),maxLength:1e4}),F&&l.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[l.jsx(K,{name:"Clock",size:10}),"  "]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:l.jsx(K,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:Je.length?Je.map(te=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:te.class}),l.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:te.issue})]},`${te.class}-${te.issue}`)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]}),l.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:l.jsx(K,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:Ee.length?Ee.map(te=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:te.name}),l.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${te.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:te.diff===0?"!":` ${te.diff} .`})]},te.id)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]})]}),l.jsx(Ln,{isOpen:x,onClose:()=>B(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),l.jsx("textarea",{inputMode:"text",value:_,onChange:te=>S(te.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:wt,disabled:R,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[R?l.jsx(K,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(K,{name:"Send",size:16}),R?"...":""]})})]})})]})};var qF={},XF={},JF={},ag={};Object.defineProperty(ag,"__esModule",{value:!0});function eH(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}ag.default=eH;var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});var tH=ag,rH=" and ";function nH(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=tH.default(r),A=n;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(rH)}Ky.default=nH;var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});function sH(){}Gy.default=sH;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=ag;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=Ky;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=Gy;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(JF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=k,r=JF;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(A,i){i===void 0&&(i=!1);var a=e.useState(i),o=a[0],c=a[1],d=r.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),o}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(XF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=XF;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(qF);const YF=KC(qF),ZF=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:A}=fs(),{schedule1:i,schedule2:a,saveSemesterSchedule:o,canUndo:c,canRedo:d,undo:h,redo:f}=uo(),m=e===2?a:i,v=async Q=>{await o(e,Q)},[y,I]=k.useState(Ae.First),[b,w]=k.useState(ut.Monday),[C,F]=k.useState(!1),[U,N]=k.useState({}),[x,B]=k.useState("class"),[_,S]=k.useState(""),[R,P]=k.useState(""),[E,We]=k.useState(""),[qe,at]=k.useState(!1),[Le,ce]=k.useState({visible:!1,x:0,y:0,item:null,cell:null}),[Ee,Ne]=k.useState(null),[Je,Xe]=k.useState([]),[Ye,wt]=k.useState(null),[te,Ke]=k.useState(null),Ge=YF({maxWidth:767}),[nt,ct]=k.useState(!0),[Z,le]=k.useState(!1),[de,ue]=k.useState({isOpen:!1,type:"",day:"",classId:""}),[L,X]=k.useState(ut.Monday),[Y,pe]=k.useState(""),ze=on[y],V=k.useMemo(()=>x==="week"?on[y].map(Q=>({id:Q.toString(),name:`${Q} `})):x==="class"?_?s.filter(Q=>Q.id===_&&Q.shift===y):s.filter(Q=>Q.shift===y):x==="teacher"?_?n.filter(Q=>Q.id===_):n:x==="subject"?_?r.filter(Q=>Q.id===_):r:[],[x,_,s,n,r,y]),G=()=>V,[ee]=k.useState(()=>new Map);k.useEffect(()=>{ee.clear()},[m,ee]),k.useEffect(()=>{ee.size>500&&(ee.clear(),console.warn("Schedule cache cleared to prevent memory leak"))},[ee]);const et=k.useCallback((Q,H)=>{const re=`${x}-${Q}-${H}-${y}-${b}-${_}-${R}-${E}`;if(ee.has(re))return ee.get(re);let J=[];if(x==="week"){const se=parseInt(Q);if(isNaN(se))return[];const ne=String(H);J=m.filter(xe=>xe.shift===y&&xe.period===se&&xe.day===ne),_&&(J=J.filter(xe=>xe.classId===_))}else{const se=typeof H=="string"?parseInt(H):H;if(isNaN(se))return[];x==="class"&&(J=m.filter(ne=>ne.classId===Q&&ne.period===se&&ne.day===b&&ne.shift===y)),x==="teacher"&&(J=m.filter(ne=>ne.teacherId===Q&&ne.period===se&&ne.day===b&&ne.shift===y)),x==="subject"&&(J=m.filter(ne=>ne.subjectId===Q&&ne.period===se&&ne.day===b&&ne.shift===y))}return R&&(J=J.filter(se=>{if(!se.roomId)return!1;const ne=A.find(ye=>ye.id===se.roomId);return((ne?ne.name:se.roomId)||"").toLowerCase().includes(R.toLowerCase())})),E&&(J=J.filter(se=>{var ne;return(ne=se.direction)==null?void 0:ne.toLowerCase().includes(E.toLowerCase())})),ee.set(re,J),J},[x,m,y,b,_,R,E,A]),he=Q=>{const H=[],re=m.filter(ne=>ne.id!==Q.id&&ne.day===Q.day&&ne.period===Q.period&&ne.shift===Q.shift);return re.find(ne=>ne.teacherId===Q.teacherId)&&H.push("teacher"),re.find(ne=>!(ne.classId!==Q.classId||ne.direction&&Q.direction&&ne.direction!==Q.direction))&&H.push("class"),Q.roomId&&re.find(xe=>xe.roomId===Q.roomId)&&H.push("room"),H},Se=(Q,H,re)=>{const J=[],se=s.find(ye=>ye.id===Q),ne=r.find(ye=>ye.id===H),xe=A.find(ye=>ye.id===re);return xe&&(se&&xe.capacity<se.studentsCount&&J.push(`  !   ${se.studentsCount} .,     ${xe.capacity}.`),ne&&ne.requiredRoomType&&ne.requiredRoomType!==""&&xe.type!==ne.requiredRoomType&&J.push(`   !   "${ne.requiredRoomType}",   "${xe.type}".`)),J},ve=Q=>{if(!Q.classId||!Q.subjectId||!Q.roomId){Xe([]);return}const H=Se(Q.classId,Q.subjectId,Q.roomId);Xe(H)},oe=Q=>{t||(N(Q),ve(Q),F(!0))},fe=(Q,H,re=b)=>{if(t)return;const J={period:H,day:re,shift:y,id:Bn()};x==="class"&&(J.classId=Q),x==="teacher"&&(J.teacherId=Q),x==="subject"&&(J.subjectId=Q),x==="week"&&(J.period=parseInt(Q),J.day=re,_&&s.find(se=>se.id===_)&&(J.classId=_)),N(J),Xe([]),F(!0)},Te=async()=>{if(!U.subjectId||!U.teacherId||!U.classId)return;const Q=[];if(U.period!==void 0){const ye=U.shift||y;(on[ye]||[]).includes(U.period)||Q.push(` ${U.period}    "${ye}"`)}if(n.find(ye=>ye.id===U.teacherId)||Q.push("   "),r.find(ye=>ye.id===U.subjectId)||Q.push("   "),s.find(ye=>ye.id===U.classId)||Q.push("   "),U.roomId&&(A.find(Me=>Me.id===U.roomId)||Q.push("   ")),Q.length>0){alert(`  :

${Q.join(`
`)}`);return}const se=he(U);if(se.length>0){const ye={teacher:"",class:"",room:""},Me=se.map(yt=>ye[yt]).join(", ");if(!confirm(`  : ${Me}     .

   ?`))return}let ne=[...m];const xe=ne.findIndex(ye=>ye.id===U.id);xe>=0?ne[xe]=U:ne.push(U),await v(ne),F(!1)},He=async Q=>{const H=m.filter(re=>re.id!==(Q||U.id));await v(H),F(!1)},Ce=(Q,H,re)=>{t||(Q.preventDefault(),Q.stopPropagation(),ce({visible:!0,x:Q.clientX,y:Q.clientY,item:H,cell:re}))},it=(Q,H)=>{if(t)return;wt(H),Q.dataTransfer.effectAllowed="move";const re=Q.currentTarget;setTimeout(()=>re.classList.add("dragging"),0)},Ze=Q=>{Q.currentTarget.classList.remove("dragging"),wt(null),Ke(null)},lt=(Q,H)=>{Q.preventDefault(),!t&&Ke(`${H.rowId}-${H.colKey}`)},ke=async(Q,H)=>{if(Q.preventDefault(),!Ye||t)return;const re={...Ye};x==="week"?(re.period=parseInt(H.rowId),re.day=H.colKey):(re.period=H.colKey,re.day=b,x==="class"&&(re.classId=H.rowId),x==="teacher"&&(re.teacherId=H.rowId),x==="subject"&&(re.subjectId=H.rowId));const J=m.map(xe=>xe.id===re.id?re:xe),se=me(J,re);if(se.length>0){const xe=se.map(ye=>{switch(ye.type){case"teacher":return` ${ye.entityName}     `;case"room":return` ${ye.entityName}     `;case"class":return` ${ye.entityName}      `;default:return"  "}});alert(`  :
${xe.join(`
`)}`),wt(null),Ke(null);return}await v(J),wt(null),Ke(null)},me=(Q,H)=>{const re=[],J=Q.filter(xe=>xe.id!==H.id&&xe.day===H.day&&xe.period===H.period&&xe.shift===H.shift);if(J.find(xe=>xe.teacherId===H.teacherId)){const xe=n.find(ye=>ye.id===H.teacherId);re.push({type:"teacher",entityName:(xe==null?void 0:xe.name)||H.teacherId})}if(H.roomId&&J.find(ye=>ye.roomId===H.roomId)){const ye=A.find(Me=>Me.id===H.roomId);re.push({type:"room",entityName:(ye==null?void 0:ye.name)||H.roomId})}if(J.find(xe=>xe.classId===H.classId)){const xe=s.find(ye=>ye.id===H.classId);re.push({type:"class",entityName:(xe==null?void 0:xe.name)||H.classId})}return re},Ve=[];if(Le.item)Ve.push({label:"",icon:"Copy",onClick:()=>Ne(Le.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>He(Le.item.id)});else if(Le.cell){const Q=Le.cell;Ee&&Ve.push({label:"",icon:"Clipboard",onClick:async()=>{const H={...Ee,id:Bn(),day:b,shift:y,period:Q.colKey};x==="week"&&(H.day=Q.colKey,H.period=parseInt(Q.rowId)),x==="class"?H.classId=Q.rowId:x==="teacher"?H.teacherId=Q.rowId:x==="subject"&&(H.subjectId=Q.rowId);let re=[...m,H];await v(re),Ne(null)}}),Ve.push({label:" ",icon:"Plus",onClick:()=>fe(Q.rowId||"",typeof Q.colKey=="number"?Q.colKey:parseInt(Q.rowId||"0"),x==="week"?Q.colKey:b)})}const ot=U.subjectId?n.filter(Q=>Q.subjectIds&&Q.subjectIds.includes(U.subjectId)):[],_t=U.subjectId?n.filter(Q=>!Q.subjectIds||!Q.subjectIds.includes(U.subjectId)):n,Bt=k.useMemo(()=>{const Q=e===2?" (2- )":"";if(_){if(x==="teacher"){const H=n.find(re=>re.id===_);return H?H.name+Q:""+Q}if(x==="class"){const H=s.find(re=>re.id===_);return H?H.name+Q:""+Q}if(x==="subject"){const H=r.find(re=>re.id===_);return H?H.name+Q:""+Q}if(x==="week"){const H=s.find(re=>re.id===_);return H?H.name+Q:""+Q}}return`  ${b}`+Q},[_,x,n,s,r,b,e]),D=!!_,W=k.useMemo(()=>D?Et:ze,[D,ze]),$=k.useMemo(()=>D?on[y].map(Q=>({id:Q.toString(),name:`${Q} `})):G(),[D,y,G]),O=(Q,H)=>{if(D){const re=parseInt(Q),J=H;let se=m.filter(ne=>ne.shift===y&&ne.period===re&&ne.day===J);return x==="class"||x==="week"?se=se.filter(ne=>ne.classId===_):x==="teacher"?se=se.filter(ne=>ne.teacherId===_):x==="subject"&&(se=se.filter(ne=>ne.subjectId===_)),se}else return et(Q,H)},Ue=x==="week"?Et:ze,be=(Q,H,re)=>{ue({isOpen:!0,type:Q,day:H||"",classId:re||""})},we=async()=>{let Q=[...m];de.type==="clearAll"?Q=[]:de.type==="clearDay"&&de.day?Q=Q.filter(H=>H.day!==de.day):de.type==="clearClass"&&de.classId&&(Q=Q.filter(H=>H.classId!==de.classId)),await v(Q),ue({isOpen:!1,type:"",day:"",classId:""}),le(!1)},Be=(Q,H,re)=>t&&Q.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[Q.map(J=>{const se=r.find(st=>st.id===J.subjectId),ne=n.find(st=>st.id===J.teacherId),xe=s.find(st=>st.id===J.classId),ye=he(J),Me=A.find(st=>st.id===J.roomId),yt=Me?Me.name:J.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:st=>it(st,J),onDragEnd:t?void 0:Ze,onClick:t?void 0:()=>oe(J),onContextMenu:t?void 0:st=>Ce(st,J,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${ye.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:ye.length===0&&(se!=null&&se.color)?{backgroundColor:`${se.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:x==="subject"||x==="week"?xe==null?void 0:xe.name:se==null?void 0:se.name}),J.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:J.direction})]}),x==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:se==null?void 0:se.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:ne==null?void 0:ne.name,children:[l.jsx(K,{name:x==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:x==="teacher"?xe==null?void 0:xe.name:ne==null?void 0:ne.name})]}),yt&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Me?`: ${Me.capacity}, : ${Me.type}`:"",children:yt})]}),ye.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${ye.join(", ")}`,children:"!"})]},J.id)}),!t&&Q.length<3&&l.jsx("button",{onClick:()=>fe(re,typeof H=="number"?H:parseInt(re),x==="week"?H:b),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(K,{name:"Plus",size:16})})]}),Pe=()=>{if(!_)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const Q=m.filter(H=>H.day===b&&H.shift===y&&(x==="class"&&H.classId===_||x==="teacher"&&H.teacherId===_||x==="subject"&&H.subjectId===_)).sort((H,re)=>H.period-re.period);return Q.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",b,"  ",y,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:Q.map(H=>{const re=r.find(Me=>Me.id===H.subjectId),J=n.find(Me=>Me.id===H.teacherId),se=s.find(Me=>Me.id===H.classId),ne=A.find(Me=>Me.id===H.roomId),xe=ne?ne.name:H.roomId,ye=he(H);return l.jsxs("div",{onClick:t?void 0:()=>oe(H),className:`rounded-xl p-4 shadow-sm border ${ye.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[H.period," "]}),ye.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${ye.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[re==null?void 0:re.name," ",H.direction&&`(${H.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[se==null?void 0:se.name,"  ",J==null?void 0:J.name]}),xe&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",xe]})]},H.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Le.visible&&l.jsx(qO,{x:Le.x,y:Le.y,onClose:()=>ce({...Le,visible:!1}),actions:Ve}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>I(Ae.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===Ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>I(Ae.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===Ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),x!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Et.map(Q=>l.jsx("button",{onClick:()=>w(Q),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${b===Q?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Q},Q))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(K,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(K,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{B("class"),S("")},className:`p-2 rounded-md ${x==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(K,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{B("teacher"),S("")},className:`p-2 rounded-md ${x==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(K,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{B("subject"),S("")},className:`p-2 rounded-md ${x==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(K,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var Q;B("week"),S(((Q=s[0])==null?void 0:Q.id)||"")},className:`p-2 rounded-md ${x==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(K,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(K,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:_,onChange:Q=>S(Q.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",x==="class"?"":x==="teacher"?"":x==="week"?" ()":""]}),(x==="class"||x==="week")&&s.filter(Q=>Q.shift===y).map(Q=>l.jsx("option",{value:Q.id,children:Q.name},Q.id)),x==="teacher"&&n.map(Q=>l.jsx("option",{value:Q.id,children:Q.name},Q.id)),x==="subject"&&r.map(Q=>l.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),l.jsx("input",{placeholder:"...",value:R,onChange:Q=>P(Q.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:E,onChange:Q=>We(Q.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>le(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(K,{name:"List",size:16})," . ."]}),(_||x==="week")&&l.jsx("button",{onClick:()=>at(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:l.jsx(K,{name:"Printer",size:16})})]})]}),Ge&&!t&&_&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>ct(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${nt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(K,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>ct(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${nt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(K,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Ge&&nt&&!t&&_?Pe():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:x==="week"?"":x==="class"?"":x==="teacher"?"":""}),Ue.map(Q=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:x==="week"?Q:`${Q} `},Q))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:V.length>0?V.map(Q=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:Q.name}),Ue.map(H=>{const re=et(Q.id,H),J=`${Q.id}-${H}`,se={rowId:Q.id,colKey:H};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${te===J?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:ne=>Ce(ne,null,se),onDragOver:t?void 0:ne=>lt(ne,se),onDrop:t?void 0:ne=>ke(ne,se),children:Be(re,H,Q.id)},H)})]},Q.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(Ln,{isOpen:C,onClose:()=>F(!1),title:U.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",U.day]}),l.jsxs("span",{children:[": ",U.period]}),l.jsxs("span",{children:[": ",U.shift===Ae.First?"1 ":"2 "]})]}),Je.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Je.map(Q=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(K,{name:"AlertTriangle",size:14}),Q]},Q))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(th,{options:s.filter(Q=>Q.shift===y).map(Q=>({value:Q.id,label:Q.name})),value:U.classId||null,onChange:Q=>{N({...U,classId:Q}),ve({...U,classId:Q})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(th,{options:r.map(Q=>({value:Q.id,label:Q.name})),value:U.subjectId||null,onChange:Q=>{N({...U,subjectId:Q}),ve({...U,subjectId:Q})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(th,{options:[{label:"",options:ot.map(Q=>({value:Q.id,label:Q.name}))},{label:"",options:_t.map(Q=>({value:Q.id,label:Q.name}))}],value:U.teacherId||null,onChange:Q=>N({...U,teacherId:Q}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:U.direction||"",onChange:Q=>N({...U,direction:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:U.roomId||"",onChange:Q=>{N({...U,roomId:Q.target.value}),ve({...U,roomId:Q.target.value})},children:[l.jsx("option",{value:"",children:" "}),A.map(Q=>l.jsxs("option",{value:Q.id,children:[Q.name," (",Q.capacity," )"]},Q.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[U.id&&l.jsx("button",{onClick:()=>He(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:Te,className:"btn-primary btn-ripple",children:""})]})]})}),l.jsx(Ln,{isOpen:Z,onClose:()=>le(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>be("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:L,onChange:Q=>X(Q.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Et.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})}),l.jsxs("button",{onClick:()=>be("clearDay",L),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",L]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:Y,onChange:Q=>pe(Q.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),s.map(Q=>l.jsx("option",{value:Q.id,children:Q.name},Q.id))]})}),l.jsx("button",{onClick:()=>{Y&&be("clearClass",void 0,Y)},disabled:!Y,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(Ln,{isOpen:de.isOpen,onClose:()=>ue({...de,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>ue({...de,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:we,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),qe&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(K,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>at(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:Bt}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:D||x==="week"?"":x==="class"?"":x==="teacher"?"":""}),W.map(Q=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:D||x==="week"?Q:`${Q} `},Q))]})}),l.jsx("tbody",{children:$.map(Q=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:Q.name}),W.map(H=>{const re=O(Q.id,H);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:re.map(J=>{const se=r.find(Tt=>Tt.id===J.subjectId),ne=n.find(Tt=>Tt.id===J.teacherId),xe=s.find(Tt=>Tt.id===J.classId),ye=A.find(Tt=>Tt.id===J.roomId),Me=ye?ye.name:J.roomId,yt=x==="teacher",Yt=x==="subject"||x==="week"||D&&yt?xe==null?void 0:xe.name:se==null?void 0:se.name,kr=yt?xe==null?void 0:xe.name:ne==null?void 0:ne.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Yt,J.direction&&` (${J.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:kr}),Me&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Me})]})]},J.id)})},H)})]},Q.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u0=function(t,e){return u0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},u0(t,e)};function Yn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");u0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var d0=function(){return d0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},d0.apply(this,arguments)};function Yr(t,e,r,n){function s(A){return A instanceof r?A:new r(function(i){i(A)})}return new(r||(r=Promise))(function(A,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function o(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(a,o)}c((n=n.apply(t,[])).next())})}function Gr(t,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,s,A,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return o([c,d])}}function o(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){r.label=c[1];break}if(c[0]===6&&r.label<A[1]){r.label=A[1],A=c;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(c);break}A[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function id(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,A;n<s;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||e)}var Os=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),lg=function(t,e){return Os.fromClientRect(t,e.getBoundingClientRect())},AH=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Os(0,0,n,s)},cg=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},lr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},Ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var od=0;od<Ob.length;od++)iH[Ob.charCodeAt(od)]=od;var Hb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ad=0;ad<Hb.length;ad++)Pl[Hb.charCodeAt(ad)]=ad;var oH=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Pl[t.charCodeAt(n)],i=Pl[t.charCodeAt(n+1)],a=Pl[t.charCodeAt(n+2)],o=Pl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|o&63;return c},aH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},lH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Li=5,zy=11,pp=2,cH=zy-Li,ek=65536>>Li,uH=1<<Li,mp=uH-1,dH=1024>>Li,hH=ek+dH,fH=hH,gH=32,pH=fH+gH,mH=65536>>zy,wH=1<<cH,yH=wH-1,Vb=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},xH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},vH=function(t,e){var r=oH(t),n=Array.isArray(r)?lH(r):new Uint32Array(r),s=Array.isArray(r)?aH(r):new Uint16Array(r),A=24,i=Vb(s,A/2,n[4]/2),a=n[5]===2?Vb(s,(A+n[4])/2):xH(n,Math.ceil((A+n[4])/4));return new BH(n[0],n[1],n[2],n[3],i,a)},BH=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Li],r=(r<<pp)+(e&mp),this.data[r];if(e<=65535)return r=this.index[ek+(e-55296>>Li)],r=(r<<pp)+(e&mp),this.data[r];if(e<this.highStart)return r=pH-mH+(e>>zy),r=this.index[r],r+=e>>Li&yH,r=this.index[r],r=(r<<pp)+(e&mp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Kb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ld=0;ld<Kb.length;ld++)bH[Kb.charCodeAt(ld)]=ld;var CH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Gb=50,_H=1,tk=2,rk=3,IH=4,EH=5,zb=7,nk=8,$b=9,IA=10,h0=11,Wb=12,f0=13,TH=14,Ll=15,g0=16,cd=17,bl=18,FH=19,qb=20,p0=21,Cl=22,wp=23,vo=24,wn=25,jl=26,Ml=27,Bo=28,kH=29,Fi=30,SH=31,ud=32,dd=33,m0=34,w0=35,y0=36,Gc=37,x0=38,rh=39,nh=40,yp=41,sk=42,UH=43,QH=[9001,65288],Ak="!",ft="",hd="",v0=vH(CH),ys=[Fi,y0],B0=[_H,tk,rk,EH],ik=[IA,nk],Xb=[Ml,jl],NH=B0.concat(ik),Jb=[x0,rh,nh,m0,w0],RH=[Ll,f0],DH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(A,i){var a=v0.get(A);if(a>Gb?(s.push(!0),a-=Gb):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(i),r.push(g0);if(a===IH||a===h0){if(i===0)return n.push(i),r.push(Fi);var o=r[i-1];return NH.indexOf(o)===-1?(n.push(n[i-1]),r.push(o)):(n.push(i),r.push(Fi))}if(n.push(i),a===SH)return r.push(e==="strict"?p0:Gc);if(a===sk||a===kH)return r.push(Fi);if(a===UH)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(Gc):r.push(Fi);r.push(a)}),[n,r,s]},xp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=r;A<=n.length;){A++;var i=n[A];if(i===e)return!0;if(i!==IA)break}if(s===IA)for(var A=r;A>0;){A--;var a=n[A];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var o=r;o<=n.length;){o++;var i=n[o];if(i===e)return!0;if(i!==IA)break}if(a!==IA)break}return!1},Yb=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===IA)r--;else return n}return 0},PH=function(t,e,r,n,s){if(r[n]===0)return ft;var A=n-1;if(Array.isArray(s)&&s[A]===!0)return ft;var i=A-1,a=A+1,o=e[A],c=i>=0?e[i]:0,d=e[a];if(o===tk&&d===rk)return ft;if(B0.indexOf(o)!==-1)return Ak;if(B0.indexOf(d)!==-1||ik.indexOf(d)!==-1)return ft;if(Yb(A,e)===nk)return hd;if(v0.get(t[A])===h0||(o===ud||o===dd)&&v0.get(t[a])===h0||o===zb||d===zb||o===$b||[IA,f0,Ll].indexOf(o)===-1&&d===$b||[cd,bl,FH,vo,Bo].indexOf(d)!==-1||Yb(A,e)===Cl||xp(wp,Cl,A,e)||xp([cd,bl],p0,A,e)||xp(Wb,Wb,A,e))return ft;if(o===IA)return hd;if(o===wp||d===wp)return ft;if(d===g0||o===g0)return hd;if([f0,Ll,p0].indexOf(d)!==-1||o===TH||c===y0&&RH.indexOf(o)!==-1||o===Bo&&d===y0||d===qb||ys.indexOf(d)!==-1&&o===wn||ys.indexOf(o)!==-1&&d===wn||o===Ml&&[Gc,ud,dd].indexOf(d)!==-1||[Gc,ud,dd].indexOf(o)!==-1&&d===jl||ys.indexOf(o)!==-1&&Xb.indexOf(d)!==-1||Xb.indexOf(o)!==-1&&ys.indexOf(d)!==-1||[Ml,jl].indexOf(o)!==-1&&(d===wn||[Cl,Ll].indexOf(d)!==-1&&e[a+1]===wn)||[Cl,Ll].indexOf(o)!==-1&&d===wn||o===wn&&[wn,Bo,vo].indexOf(d)!==-1)return ft;if([wn,Bo,vo,cd,bl].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===wn)return ft;if([Bo,vo].indexOf(f)!==-1)h--;else break}if([Ml,jl].indexOf(d)!==-1)for(var h=[cd,bl].indexOf(o)!==-1?i:A;h>=0;){var f=e[h];if(f===wn)return ft;if([Bo,vo].indexOf(f)!==-1)h--;else break}if(x0===o&&[x0,rh,m0,w0].indexOf(d)!==-1||[rh,m0].indexOf(o)!==-1&&[rh,nh].indexOf(d)!==-1||[nh,w0].indexOf(o)!==-1&&d===nh||Jb.indexOf(o)!==-1&&[qb,jl].indexOf(d)!==-1||Jb.indexOf(d)!==-1&&o===Ml||ys.indexOf(o)!==-1&&ys.indexOf(d)!==-1||o===vo&&ys.indexOf(d)!==-1||ys.concat(wn).indexOf(o)!==-1&&d===Cl&&QH.indexOf(t[a])===-1||ys.concat(wn).indexOf(d)!==-1&&o===bl)return ft;if(o===yp&&d===yp){for(var m=r[A],v=1;m>0&&(m--,e[m]===yp);)v++;if(v%2!==0)return ft}return o===ud&&d===dd?ft:hd},LH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=DH(t,e.lineBreak),n=r[0],s=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(a){return[wn,Fi,sk].indexOf(a)!==-1?Gc:a}));var i=e.wordBreak==="keep-all"?A.map(function(a,o){return a&&t[o]>=19968&&t[o]<=40959}):void 0;return[n,s,i]},jH=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===Ak,this.start=n,this.end=s}return t.prototype.slice=function(){return lr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),MH=function(t,e){var r=cg(t),n=LH(r,e),s=n[0],A=n[1],i=n[2],a=r.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var d=ft;c<a&&(d=PH(r,A,s,++c,i))===ft;);if(d!==ft||c===a){var h=new jH(r,d,o,c);return o=c,{value:h,done:!1}}return{done:!0,value:null}}}},OH=1,HH=2,xu=4,Zb=8,tf=10,eC=47,oc=92,VH=9,KH=32,fd=34,_l=61,GH=35,zH=36,$H=37,gd=39,pd=40,Il=41,WH=95,an=45,qH=33,XH=60,JH=62,YH=64,ZH=91,eV=93,tV=61,rV=123,md=63,nV=125,tC=124,sV=126,AV=128,rC=65533,vp=42,Qi=43,iV=44,oV=58,aV=59,zc=46,lV=0,cV=8,uV=11,dV=14,hV=31,fV=127,ts=-1,ok=48,ak=97,lk=101,gV=102,pV=117,mV=122,ck=65,uk=69,dk=70,wV=85,yV=90,$r=function(t){return t>=ok&&t<=57},xV=function(t){return t>=55296&&t<=57343},bo=function(t){return $r(t)||t>=ck&&t<=dk||t>=ak&&t<=gV},vV=function(t){return t>=ak&&t<=mV},BV=function(t){return t>=ck&&t<=yV},bV=function(t){return vV(t)||BV(t)},CV=function(t){return t>=AV},wd=function(t){return t===tf||t===VH||t===KH},rf=function(t){return bV(t)||CV(t)||t===WH},nC=function(t){return rf(t)||$r(t)||t===an},_V=function(t){return t>=lV&&t<=cV||t===uV||t>=dV&&t<=hV||t===fV},cA=function(t,e){return t!==oc?!1:e!==tf},yd=function(t,e,r){return t===an?rf(e)||cA(e,r):rf(t)?!0:!!(t===oc&&cA(t,e))},Bp=function(t,e,r){return t===Qi||t===an?$r(e)?!0:e===zc&&$r(r):$r(t===zc?e:t)},IV=function(t){var e=0,r=1;(t[e]===Qi||t[e]===an)&&(t[e]===an&&(r=-1),e++);for(var n=[];$r(t[e]);)n.push(t[e++]);var s=n.length?parseInt(lr.apply(void 0,n),10):0;t[e]===zc&&e++;for(var A=[];$r(t[e]);)A.push(t[e++]);var i=A.length,a=i?parseInt(lr.apply(void 0,A),10):0;(t[e]===uk||t[e]===lk)&&e++;var o=1;(t[e]===Qi||t[e]===an)&&(t[e]===an&&(o=-1),e++);for(var c=[];$r(t[e]);)c.push(t[e++]);var d=c.length?parseInt(lr.apply(void 0,c),10):0;return r*(s+a*Math.pow(10,-i))*Math.pow(10,o*d)},EV={type:2},TV={type:3},FV={type:4},kV={type:13},SV={type:8},UV={type:21},QV={type:9},NV={type:10},RV={type:11},DV={type:12},PV={type:14},xd={type:23},LV={type:1},jV={type:25},MV={type:24},OV={type:26},HV={type:27},VV={type:28},KV={type:29},GV={type:31},b0={type:32},hk=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(cg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==b0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case fd:return this.consumeStringToken(fd);case GH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(nC(r)||cA(n,s)){var A=yd(r,n,s)?HH:OH,i=this.consumeName();return{type:5,value:i,flags:A}}break;case zH:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),kV;break;case gd:return this.consumeStringToken(gd);case pd:return EV;case Il:return TV;case vp:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),PV;break;case Qi:if(Bp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case iV:return FV;case an:var a=e,o=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Bp(a,o,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(yd(a,o,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===an&&c===JH)return this.consumeCodePoint(),this.consumeCodePoint(),MV;break;case zc:if(Bp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case eC:if(this.peekCodePoint(0)===vp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===vp&&(d=this.consumeCodePoint(),d===eC))return this.consumeToken();if(d===ts)return this.consumeToken()}break;case oV:return OV;case aV:return HV;case XH:if(this.peekCodePoint(0)===qH&&this.peekCodePoint(1)===an&&this.peekCodePoint(2)===an)return this.consumeCodePoint(),this.consumeCodePoint(),jV;break;case YH:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(yd(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case ZH:return VV;case oc:if(cA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case eV:return KV;case tV:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),SV;break;case rV:return RV;case nV:return DV;case pV:case wV:var v=this.peekCodePoint(0),y=this.peekCodePoint(1);return v===Qi&&(bo(y)||y===md)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case tC:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),QV;if(this.peekCodePoint(0)===tC)return this.consumeCodePoint(),UV;break;case sV:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),NV;break;case ts:return b0}return wd(e)?(this.consumeWhiteSpace(),GV):$r(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):rf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:lr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();bo(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===md&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(lr.apply(void 0,e.map(function(o){return o===md?ok:o})),16),A=parseInt(lr.apply(void 0,e.map(function(o){return o===md?dk:o})),16);return{type:30,start:s,end:A}}var i=parseInt(lr.apply(void 0,e),16);if(this.peekCodePoint(0)===an&&bo(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var a=[];bo(r)&&a.length<6;)a.push(r),r=this.consumeCodePoint();var A=parseInt(lr.apply(void 0,a),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===pd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===pd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ts)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===gd||r===fd){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ts||this.peekCodePoint(0)===Il)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),xd)}for(;;){var s=this.consumeCodePoint();if(s===ts||s===Il)return{type:22,value:lr.apply(void 0,e)};if(wd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ts||this.peekCodePoint(0)===Il?(this.consumeCodePoint(),{type:22,value:lr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),xd);if(s===fd||s===gd||s===pd||_V(s))return this.consumeBadUrlRemnants(),xd;if(s===oc)if(cA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),xd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;wd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Il||e===ts)return;cA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=lr.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===ts||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===tf)return this._value.splice(0,n),LV;if(s===oc){var A=this._value[n+1];A!==ts&&A!==void 0&&(A===tf?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):cA(s,A)&&(r+=this.consumeStringSlice(n),r+=lr(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=xu,n=this.peekCodePoint(0);for((n===Qi||n===an)&&e.push(this.consumeCodePoint());$r(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===zc&&$r(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Zb;$r(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===uk||n===lk)&&((s===Qi||s===an)&&$r(A)||$r(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Zb;$r(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[IV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(yd(s,A,i)){var a=this.consumeName();return{type:15,number:r,flags:n,unit:a}}return s===$H?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(bo(e)){for(var r=lr(e);bo(this.peekCodePoint(0))&&r.length<6;)r+=lr(this.consumeCodePoint());wd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||xV(n)||n>1114111?rC:n}return e===ts?rC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(nC(r))e+=lr(r);else if(cA(r,this.peekCodePoint(0)))e+=lr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),fk=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new hk;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||$V(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?b0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),vu=function(t){return t.type===15},Ya=function(t){return t.type===17},St=function(t){return t.type===20},zV=function(t){return t.type===0},C0=function(t,e){return St(t)&&t.value===e},gk=function(t){return t.type!==31},Sa=function(t){return t.type!==31&&t.type!==4},gs=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},$V=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ri=function(t){return t.type===17||t.type===15},fr=function(t){return t.type===16||ri(t)},pk=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Dr={type:17,number:0,flags:xu},$y={type:16,number:50,flags:xu},EA={type:16,number:100,flags:xu},Ol=function(t,e,r){var n=t[0],s=t[1];return[Lt(n,e),Lt(typeof s<"u"?s:n,r)]},Lt=function(t,e){if(t.type===16)return t.number/100*e;if(vu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},mk="deg",wk="grad",yk="rad",xk="turn",ug={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case mk:return Math.PI*e.number/180;case wk:return Math.PI/200*e.number;case yk:return e.number;case xk:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},vk=function(t){return t.type===15&&(t.unit===mk||t.unit===wk||t.unit===yk||t.unit===xk)},Bk=function(t){var e=t.filter(St).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Dr,Dr];case"to top":case"bottom":return Rn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Dr,EA];case"to right":case"left":return Rn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[EA,EA];case"to bottom":case"top":return Rn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[EA,Dr];case"to left":case"right":return Rn(270)}return 0},Rn=function(t){return Math.PI*t/180},HA={name:"color",parse:function(t,e){if(e.type===18){var r=WV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return TA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return TA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return TA(parseInt(n,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return TA(parseInt(n,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var a=Us[e.value.toUpperCase()];if(typeof a<"u")return a}return Us.TRANSPARENT}},VA=function(t){return(255&t)===0},br=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},TA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},sC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},AC=function(t,e){var r=e.filter(Sa);if(r.length===3){var n=r.map(sC),s=n[0],A=n[1],i=n[2];return TA(s,A,i,1)}if(r.length===4){var a=r.map(sC),s=a[0],A=a[1],i=a[2],o=a[3];return TA(s,A,i,o)}return 0};function bp(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var iC=function(t,e){var r=e.filter(Sa),n=r[0],s=r[1],A=r[2],i=r[3],a=(n.type===17?Rn(n.number):ug.parse(t,n))/(Math.PI*2),o=fr(s)?s.number/100:0,c=fr(A)?A.number/100:0,d=typeof i<"u"&&fr(i)?Lt(i,1):1;if(o===0)return TA(c*255,c*255,c*255,1);var h=c<=.5?c*(o+1):c+o-c*o,f=c*2-h,m=bp(f,h,a+1/3),v=bp(f,h,a),y=bp(f,h,a-1/3);return TA(m*255,v*255,y*255,d)},WV={hsl:iC,hsla:iC,rgb:AC,rgba:AC},ac=function(t,e){return HA.parse(t,fk.create(e).parseComponentValue())},Us={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},qV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(St(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},XV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dg=function(t,e){var r=HA.parse(t,e[0]),n=e[1];return n&&fr(n)?{color:r,stop:n}:{color:r,stop:null}},oC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Dr),n.stop===null&&(n.stop=EA);for(var s=[],A=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var o=Lt(a,e);o>A?s.push(o):s.push(A),A=o}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],m=(d-f)/(h+1),v=1;v<=h;v++)s[c+v-1]=m*v;c=null}}return t.map(function(y,I){var b=y.color;return{color:b,stop:Math.max(Math.min(1,s[I]/e),0)}})},JV=function(t,e,r){var n=e/2,s=r/2,A=Lt(t[0],e)-n,i=s-Lt(t[1],r);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},YV=function(t,e,r){var n=typeof t=="number"?t:JV(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,i=r/2,a=s/2,o=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[s,A-c,A+c,i-o,i+o]},Vn=function(t,e){return Math.sqrt(t*t+e*e)},aC=function(t,e,r,n,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,a){var o=a[0],c=a[1],d=Vn(r-o,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:a,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},ZV=function(t,e,r,n,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)A=i=Math.min(Vn(e,r),Vn(e,r-s),Vn(e-n,r),Vn(e-n,r-s));else if(t.shape===1){var a=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),o=aC(n,s,e,r,!0),c=o[0],d=o[1];A=Vn(c-e,(d-r)/a),i=a*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)A=i=Math.max(Vn(e,r),Vn(e,r-s),Vn(e-n,r),Vn(e-n,r-s));else if(t.shape===1){var a=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=aC(n,s,e,r,!1),c=h[0],d=h[1];A=Vn(c-e,(d-r)/a),i=a*A}break}return Array.isArray(t.size)&&(A=Lt(t.size[0],n),i=t.size.length===2?Lt(t.size[1],s):A),[A,i]},e3=function(t,e){var r=Rn(180),n=[];return gs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){r=Bk(s);return}else if(vk(i)){r=ug.parse(t,i);return}}var a=dg(t,s);n.push(a)}),{angle:r,stops:n,type:1}},vd=function(t,e){var r=Rn(180),n=[];return gs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=Bk(s);return}else if(vk(i)){r=(ug.parse(t,i)+Rn(270))%Rn(360);return}}var a=dg(t,s);n.push(a)}),{angle:r,stops:n,type:1}},t3=function(t,e){var r=Rn(180),n=[],s=1,A=0,i=3,a=[];return gs(e).forEach(function(o,c){var d=o[0];if(c===0){if(St(d)&&d.value==="linear"){s=1;return}else if(St(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=HA.parse(t,d.values[0]);n.push({stop:Dr,color:h})}else if(d.name==="to"){var h=HA.parse(t,d.values[0]);n.push({stop:EA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Sa);if(f.length===2){var h=HA.parse(t,f[1]),m=f[0];Ya(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),s===1?{angle:(r+Rn(180))%Rn(360),stops:n,type:s}:{size:i,shape:A,stops:n,position:a,type:s}},bk="closest-side",Ck="farthest-side",_k="closest-corner",Ik="farthest-corner",Ek="circle",Tk="ellipse",Fk="cover",kk="contain",r3=function(t,e){var r=0,n=3,s=[],A=[];return gs(e).forEach(function(i,a){var o=!0;if(a===0){var c=!1;o=i.reduce(function(h,f){if(c)if(St(f))switch(f.value){case"center":return A.push($y),h;case"top":case"left":return A.push(Dr),h;case"right":case"bottom":return A.push(EA),h}else(fr(f)||ri(f))&&A.push(f);else if(St(f))switch(f.value){case Ek:return r=0,!1;case Tk:return r=1,!1;case"at":return c=!0,!1;case bk:return n=0,!1;case Fk:case Ck:return n=1,!1;case kk:case _k:return n=2,!1;case Ik:return n=3,!1}else if(ri(f)||fr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},o)}if(o){var d=dg(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:A,type:2}},Bd=function(t,e){var r=0,n=3,s=[],A=[];return gs(e).forEach(function(i,a){var o=!0;if(a===0?o=i.reduce(function(d,h){if(St(h))switch(h.value){case"center":return A.push($y),!1;case"top":case"left":return A.push(Dr),!1;case"right":case"bottom":return A.push(EA),!1}else if(fr(h)||ri(h))return A.push(h),!1;return d},o):a===1&&(o=i.reduce(function(d,h){if(St(h))switch(h.value){case Ek:return r=0,!1;case Tk:return r=1,!1;case kk:case bk:return n=0,!1;case Ck:return n=1,!1;case _k:return n=2,!1;case Fk:case Ik:return n=3,!1}else if(ri(h)||fr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},o)),o){var c=dg(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:A,type:2}},n3=function(t){return t.type===1},s3=function(t){return t.type===2},Wy={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=Sk[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function A3(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Sk[t.name])}var Sk={"linear-gradient":e3,"-moz-linear-gradient":vd,"-ms-linear-gradient":vd,"-o-linear-gradient":vd,"-webkit-linear-gradient":vd,"radial-gradient":r3,"-moz-radial-gradient":Bd,"-ms-radial-gradient":Bd,"-o-radial-gradient":Bd,"-webkit-radial-gradient":Bd,"-webkit-gradient":t3},i3={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Sa(n)&&A3(n)}).map(function(n){return Wy.parse(t,n)})}},o3={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(St(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},a3={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return gs(e).map(function(r){return r.filter(fr)}).map(pk)}},l3={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return gs(e).map(function(r){return r.filter(St).map(function(n){return n.value}).join(" ")}).map(c3)}},c3=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Aa;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Aa||(Aa={}));var u3={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return gs(e).map(function(r){return r.filter(d3)})}},d3=function(t){return St(t)||fr(t)},hg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},h3=hg("top"),f3=hg("right"),g3=hg("bottom"),p3=hg("left"),fg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return pk(r.filter(fr))}}},m3=fg("top-left"),w3=fg("top-right"),y3=fg("bottom-right"),x3=fg("bottom-left"),gg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},v3=gg("top"),B3=gg("right"),b3=gg("bottom"),C3=gg("left"),pg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return vu(r)?r.number:0}}},_3=pg("top"),I3=pg("right"),E3=pg("bottom"),T3=pg("left"),F3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},S3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(St).reduce(function(r,n){return r|U3(n.value)},0)}},U3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Q3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},N3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},nf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(nf||(nf={}));var R3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return nf.STRICT;case"normal":default:return nf.NORMAL}}},D3={name:"line-height",initialValue:"normal",prefix:!1,type:4},lC=function(t,e){return St(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:fr(t)?Lt(t,e):e},P3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Wy.parse(t,e)}},L3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},_0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},mg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},j3=mg("top"),M3=mg("right"),O3=mg("bottom"),H3=mg("left"),V3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(St).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},K3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},wg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},G3=wg("top"),z3=wg("right"),$3=wg("bottom"),W3=wg("left"),q3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},X3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},J3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&C0(e[0],"none")?[]:gs(e).map(function(r){for(var n={color:Us.TRANSPARENT,offsetX:Dr,offsetY:Dr,blur:Dr},s=0,A=0;A<r.length;A++){var i=r[A];ri(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=HA.parse(t,i)}return n})}},Y3={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Z3={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=r5[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},e5=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},t5=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[r,n,s,A,i,a]:null},r5={matrix:e5,matrix3d:t5},cC={type:16,number:50,flags:xu},n5=[cC,cC],s5={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(fr);return r.length!==2?n5:[r[0],r[1]]}},A5={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},lc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(lc||(lc={}));var i5={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return lc.BREAK_ALL;case"keep-all":return lc.KEEP_ALL;case"normal":default:return lc.NORMAL}}},o5={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Ya(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Uk={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},a5={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Ya(e)?e.number:1}},l5={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},c5={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(St).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},u5={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},d5={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},h5={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Ya(e))return e.number;if(St(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},f5={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(St).map(function(r){return r.value})}},g5={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mr=function(t,e){return(t&e)!==0},p5={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},m5={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(gk),A=0;A<s.length;A++){var i=s[A],a=s[A+1];if(i.type===20){var o=a&&Ya(a)?a.number:1;n.push({counter:i.value,increment:o})}}return n}},w5={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(gk),s=0;s<n.length;s++){var A=n[s],i=n[s+1];if(St(A)&&A.value!=="none"){var a=i&&Ya(i)?i.number:0;r.push({counter:A.value,reset:a})}}return r}},y5={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(vu).map(function(r){return Uk.parse(t,r)})}},x5={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(zV);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,a=s[A+1].value;n.push({open:i,close:a})}return n}},uC=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},v5={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&C0(e[0],"none")?[]:gs(e).map(function(r){for(var n={color:255,offsetX:Dr,offsetY:Dr,blur:Dr,spread:Dr,inset:!1},s=0,A=0;A<r.length;A++){var i=r[A];C0(i,"inset")?n.inset=!0:ri(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=HA.parse(t,i)}return n})}},B5={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(St).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},b5={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},C5={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return vu(e)?e.number:0}},_5=function(){function t(e,r){var n,s;this.animationDuration=Re(e,y5,r.animationDuration),this.backgroundClip=Re(e,qV,r.backgroundClip),this.backgroundColor=Re(e,XV,r.backgroundColor),this.backgroundImage=Re(e,i3,r.backgroundImage),this.backgroundOrigin=Re(e,o3,r.backgroundOrigin),this.backgroundPosition=Re(e,a3,r.backgroundPosition),this.backgroundRepeat=Re(e,l3,r.backgroundRepeat),this.backgroundSize=Re(e,u3,r.backgroundSize),this.borderTopColor=Re(e,h3,r.borderTopColor),this.borderRightColor=Re(e,f3,r.borderRightColor),this.borderBottomColor=Re(e,g3,r.borderBottomColor),this.borderLeftColor=Re(e,p3,r.borderLeftColor),this.borderTopLeftRadius=Re(e,m3,r.borderTopLeftRadius),this.borderTopRightRadius=Re(e,w3,r.borderTopRightRadius),this.borderBottomRightRadius=Re(e,y3,r.borderBottomRightRadius),this.borderBottomLeftRadius=Re(e,x3,r.borderBottomLeftRadius),this.borderTopStyle=Re(e,v3,r.borderTopStyle),this.borderRightStyle=Re(e,B3,r.borderRightStyle),this.borderBottomStyle=Re(e,b3,r.borderBottomStyle),this.borderLeftStyle=Re(e,C3,r.borderLeftStyle),this.borderTopWidth=Re(e,_3,r.borderTopWidth),this.borderRightWidth=Re(e,I3,r.borderRightWidth),this.borderBottomWidth=Re(e,E3,r.borderBottomWidth),this.borderLeftWidth=Re(e,T3,r.borderLeftWidth),this.boxShadow=Re(e,v5,r.boxShadow),this.color=Re(e,F3,r.color),this.direction=Re(e,k3,r.direction),this.display=Re(e,S3,r.display),this.float=Re(e,Q3,r.cssFloat),this.fontFamily=Re(e,u5,r.fontFamily),this.fontSize=Re(e,d5,r.fontSize),this.fontStyle=Re(e,g5,r.fontStyle),this.fontVariant=Re(e,f5,r.fontVariant),this.fontWeight=Re(e,h5,r.fontWeight),this.letterSpacing=Re(e,N3,r.letterSpacing),this.lineBreak=Re(e,R3,r.lineBreak),this.lineHeight=Re(e,D3,r.lineHeight),this.listStyleImage=Re(e,P3,r.listStyleImage),this.listStylePosition=Re(e,L3,r.listStylePosition),this.listStyleType=Re(e,_0,r.listStyleType),this.marginTop=Re(e,j3,r.marginTop),this.marginRight=Re(e,M3,r.marginRight),this.marginBottom=Re(e,O3,r.marginBottom),this.marginLeft=Re(e,H3,r.marginLeft),this.opacity=Re(e,a5,r.opacity);var A=Re(e,V3,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=Re(e,K3,r.overflowWrap),this.paddingTop=Re(e,G3,r.paddingTop),this.paddingRight=Re(e,z3,r.paddingRight),this.paddingBottom=Re(e,$3,r.paddingBottom),this.paddingLeft=Re(e,W3,r.paddingLeft),this.paintOrder=Re(e,B5,r.paintOrder),this.position=Re(e,X3,r.position),this.textAlign=Re(e,q3,r.textAlign),this.textDecorationColor=Re(e,l5,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Re(e,c5,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Re(e,J3,r.textShadow),this.textTransform=Re(e,Y3,r.textTransform),this.transform=Re(e,Z3,r.transform),this.transformOrigin=Re(e,s5,r.transformOrigin),this.visibility=Re(e,A5,r.visibility),this.webkitTextStrokeColor=Re(e,b5,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Re(e,C5,r.webkitTextStrokeWidth),this.wordBreak=Re(e,i5,r.wordBreak),this.zIndex=Re(e,o5,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return VA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return mr(this.display,4)||mr(this.display,33554432)||mr(this.display,268435456)||mr(this.display,536870912)||mr(this.display,67108864)||mr(this.display,134217728)},t}(),I5=function(){function t(e,r){this.content=Re(e,p5,r.content),this.quotes=Re(e,x5,r.quotes)}return t}(),dC=function(){function t(e,r){this.counterIncrement=Re(e,m5,r.counterIncrement),this.counterReset=Re(e,w5,r.counterReset)}return t}(),Re=function(t,e,r){var n=new hk,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var A=new fk(n.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,St(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return ug.parse(t,A.parseComponentValue());case"color":return HA.parse(t,A.parseComponentValue());case"image":return Wy.parse(t,A.parseComponentValue());case"length":var a=A.parseComponentValue();return ri(a)?a:Dr;case"length-percentage":var o=A.parseComponentValue();return fr(o)?o:Dr;case"time":return Uk.parse(t,A.parseComponentValue())}break}},E5="data-html2canvas-debug",T5=function(t){var e=t.getAttribute(E5);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},I0=function(t,e){var r=T5(t);return r===1||e===r},ps=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,I0(r,3))debugger;this.styles=new _5(e,window.getComputedStyle(r,null)),F0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=lg(this.context,r),I0(r,4)&&(this.flags|=16)}return t}(),F5="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",hC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bd=0;bd<hC.length;bd++)Hl[hC.charCodeAt(bd)]=bd;var k5=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Hl[t.charCodeAt(n)],i=Hl[t.charCodeAt(n+1)],a=Hl[t.charCodeAt(n+2)],o=Hl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|o&63;return c},S5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},U5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},ji=5,qy=11,Cp=2,Q5=qy-ji,Qk=65536>>ji,N5=1<<ji,_p=N5-1,R5=1024>>ji,D5=Qk+R5,P5=D5,L5=32,j5=P5+L5,M5=65536>>qy,O5=1<<Q5,H5=O5-1,fC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},V5=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},K5=function(t,e){var r=k5(t),n=Array.isArray(r)?U5(r):new Uint32Array(r),s=Array.isArray(r)?S5(r):new Uint16Array(r),A=24,i=fC(s,A/2,n[4]/2),a=n[5]===2?fC(s,(A+n[4])/2):V5(n,Math.ceil((A+n[4])/4));return new G5(n[0],n[1],n[2],n[3],i,a)},G5=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>ji],r=(r<<Cp)+(e&_p),this.data[r];if(e<=65535)return r=this.index[Qk+(e-55296>>ji)],r=(r<<Cp)+(e&_p),this.data[r];if(e<this.highStart)return r=j5-M5+(e>>qy),r=this.index[r],r+=e>>ji&H5,r=this.index[r],r=(r<<Cp)+(e&_p),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),gC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cd=0;Cd<gC.length;Cd++)z5[gC.charCodeAt(Cd)]=Cd;var $5=1,Ip=2,Ep=3,pC=4,mC=5,W5=7,wC=8,Tp=9,Fp=10,yC=11,xC=12,vC=13,BC=14,kp=15,q5=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},X5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},J5=K5(F5),kn="",Sp="",Y5=function(t){return J5.get(t)},Z5=function(t,e,r){var n=r-2,s=e[n],A=e[r-1],i=e[r];if(A===Ip&&i===Ep)return kn;if(A===Ip||A===Ep||A===pC||i===Ip||i===Ep||i===pC)return Sp;if(A===wC&&[wC,Tp,yC,xC].indexOf(i)!==-1||(A===yC||A===Tp)&&(i===Tp||i===Fp)||(A===xC||A===Fp)&&i===Fp||i===vC||i===mC||i===W5||A===$5)return kn;if(A===vC&&i===BC){for(;s===mC;)s=e[--n];if(s===BC)return kn}if(A===kp&&i===kp){for(var a=0;s===kp;)a++,s=e[--n];if(a%2===0)return kn}return Sp},eK=function(t){var e=q5(t),r=e.length,n=0,s=0,A=e.map(Y5);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=kn;n<r&&(i=Z5(e,A,++n))===kn;);if(i!==kn||n===r){var a=X5.apply(null,e.slice(s,n));return s=n,{value:a,done:!1}}return{done:!0,value:null}}}},tK=function(t){for(var e=eK(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},rK=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(n),A===e)return!0}}return!1},nK=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=cg(n.data).map(function(o){return lr(o)}),A=0,i={},a=s.every(function(o,c){r.setStart(n,A),r.setEnd(n,A+o.length);var d=r.getBoundingClientRect();A+=o.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),a},sK=function(){return typeof new Image().crossOrigin<"u"},AK=function(){return typeof new XMLHttpRequest().responseType=="string"},iK=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},bC=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},oK=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,A=e.toDataURL();s.src=A;var i=E0(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),CC(i).then(function(a){n.drawImage(a,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=r+"px",bC(o)?CC(E0(r,r,0,0,c)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),bC(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},E0=function(t,e,r,n,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),a=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(s),i},CC=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Qr={get SUPPORT_RANGE_BOUNDS(){var t=rK(document);return Object.defineProperty(Qr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Qr.SUPPORT_RANGE_BOUNDS&&nK(document);return Object.defineProperty(Qr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=iK(document);return Object.defineProperty(Qr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?oK(document):Promise.resolve(!1);return Object.defineProperty(Qr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=sK();return Object.defineProperty(Qr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=AK();return Object.defineProperty(Qr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},cc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),aK=function(t,e,r,n){var s=uK(e,r),A=[],i=0;return s.forEach(function(a){if(r.textDecorationLine.length||a.trim().length>0)if(Qr.SUPPORT_RANGE_BOUNDS){var o=_C(n,i,a.length).getClientRects();if(o.length>1){var c=Xy(a),d=0;c.forEach(function(f){A.push(new cc(f,Os.fromDOMRectList(t,_C(n,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new cc(a,Os.fromDOMRectList(t,o)))}else{var h=n.splitText(a.length);A.push(new cc(a,lK(t,n))),n=h}else Qr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),A},lK=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var A=lg(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),A}}return Os.EMPTY},_C=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},Xy=function(t){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return tK(t)},cK=function(t,e){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return hK(t,e)},uK=function(t,e){return e.letterSpacing!==0?Xy(t):cK(t,e)},dK=[32,160,4961,65792,65793,4153,4241],hK=function(t,e){for(var r=MH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,A=function(){if(s.value){var i=s.value.slice(),a=cg(i),o="";a.forEach(function(c){dK.indexOf(c)===-1?o+=lr(c):(o.length&&n.push(o),n.push(lr(c)),o="")}),o.length&&n.push(o)}};!(s=r.next()).done;)A();return n},fK=function(){function t(e,r,n){this.text=gK(r.data,n.textTransform),this.textBounds=aK(e,this.text,n,r)}return t}(),gK=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(pK,mK);case 2:return t.toUpperCase();default:return t}},pK=/(^|\s|:|-|\(|\))([a-z])/g,mK=function(t,e,r){return t.length>0?e+r.toUpperCase():t},Nk=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(ps),Rk=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(ps),Dk=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=new XMLSerializer,i=lg(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(ps),Pk=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ps),T0=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(ps),wK=[{type:15,flags:0,unit:"px",number:3}],yK=[{type:16,flags:0,number:50}],xK=function(t){return t.width>t.height?new Os(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Os(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},vK=function(t){var e=t.type===BK?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},sf="checkbox",Af="radio",BK="password",IC=707406591,Jy=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=vK(n),(s.type===sf||s.type===Af)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=xK(s.bounds)),s.type){case sf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=wK;break;case Af:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=yK;break}return s}return e}(ps),Lk=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(ps),jk=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ps),Mk=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=Hk(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?ac(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Us.TRANSPARENT,i=n.contentWindow.document.body?ac(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Us.TRANSPARENT;s.backgroundColor=VA(A)?VA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(ps),bK=["OL","UL","MENU"],sh=function(t,e,r,n){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,Vk(s)&&s.data.trim().length>0)r.textNodes.push(new fK(t,s,r.styles));else if($o(s))if($k(s)&&s.assignedNodes)s.assignedNodes().forEach(function(a){return sh(t,a,r,n)});else{var i=Ok(t,s);i.styles.isVisible()&&(CK(s,i,n)?i.flags|=4:_K(i.styles)&&(i.flags|=2),bK.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?sh(t,s.shadowRoot,i,n):!of(s)&&!Kk(s)&&!af(s)&&sh(t,s,i,n))}},Ok=function(t,e){return k0(e)?new Nk(t,e):Gk(e)?new Rk(t,e):Kk(e)?new Dk(t,e):IK(e)?new Pk(t,e):EK(e)?new T0(t,e):TK(e)?new Jy(t,e):af(e)?new Lk(t,e):of(e)?new jk(t,e):zk(e)?new Mk(t,e):new ps(t,e)},Hk=function(t,e){var r=Ok(t,e);return r.flags|=4,sh(t,e,r,r),r},CK=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Yy(t)&&r.styles.isTransparent()},_K=function(t){return t.isPositioned()||t.isFloating()},Vk=function(t){return t.nodeType===Node.TEXT_NODE},$o=function(t){return t.nodeType===Node.ELEMENT_NODE},F0=function(t){return $o(t)&&typeof t.style<"u"&&!Ah(t)},Ah=function(t){return typeof t.className=="object"},IK=function(t){return t.tagName==="LI"},EK=function(t){return t.tagName==="OL"},TK=function(t){return t.tagName==="INPUT"},FK=function(t){return t.tagName==="HTML"},Kk=function(t){return t.tagName==="svg"},Yy=function(t){return t.tagName==="BODY"},Gk=function(t){return t.tagName==="CANVAS"},EC=function(t){return t.tagName==="VIDEO"},k0=function(t){return t.tagName==="IMG"},zk=function(t){return t.tagName==="IFRAME"},TC=function(t){return t.tagName==="STYLE"},kK=function(t){return t.tagName==="SCRIPT"},of=function(t){return t.tagName==="TEXTAREA"},af=function(t){return t.tagName==="SELECT"},$k=function(t){return t.tagName==="SLOT"},FC=function(t){return t.tagName.indexOf("-")>0},SK=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,A=!0;n!==null&&n.forEach(function(a){var o=r.counters[a.counter];o&&a.increment!==0&&(A=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=a.increment)});var i=[];return A&&s.forEach(function(a){var o=r.counters[a.counter];i.push(a.counter),o||(o=r.counters[a.counter]=[]),o.push(a.reset)}),i},t}(),kC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},SC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},UK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},QK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Co=function(t,e,r,n,s,A){return t<e||t>r?$c(t,s,A.length>0):n.integers.reduce(function(i,a,o){for(;t>=a;)t-=a,i+=n.values[o];return i},"")+A},Wk=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},ar=function(t,e,r,n,s){var A=r-e+1;return(t<0?"-":"")+(Wk(Math.abs(t),A,n,function(i){return lr(Math.floor(i%A)+e)})+s)},xi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return Wk(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},So=1,iA=2,oA=4,Vl=8,xs=function(t,e,r,n,s,A){if(t<-9999||t>9999)return $c(t,4,s.length>0);var i=Math.abs(t),a=s;if(i===0)return e[0]+a;for(var o=0;i>0&&o<=4;o++){var c=i%10;c===0&&mr(A,So)&&a!==""?a=e[c]+a:c>1||c===1&&o===0||c===1&&o===1&&mr(A,iA)||c===1&&o===1&&mr(A,oA)&&t>100||c===1&&o>1&&mr(A,Vl)?a=e[c]+(o>0?r[o-1]:"")+a:c===1&&o>0&&(a=r[o-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},UC="",QC="",NC="",Up="",$c=function(t,e,r){var n=r?". ":"",s=r?"":"",A=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=ar(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return xi(t,"",s);case 6:return Co(t,1,3999,kC,3,n).toLowerCase();case 7:return Co(t,1,3999,kC,3,n);case 8:return ar(t,945,969,!1,n);case 9:return ar(t,97,122,!1,n);case 10:return ar(t,65,90,!1,n);case 11:return ar(t,1632,1641,!0,n);case 12:case 49:return Co(t,1,9999,SC,3,n);case 35:return Co(t,1,9999,SC,3,n).toLowerCase();case 13:return ar(t,2534,2543,!0,n);case 14:case 30:return ar(t,6112,6121,!0,n);case 15:return xi(t,"",s);case 16:return xi(t,"",s);case 17:case 48:return xs(t,"",UC,"",s,iA|oA|Vl);case 47:return xs(t,"",QC,"",s,So|iA|oA|Vl);case 42:return xs(t,"",UC,"",s,iA|oA|Vl);case 41:return xs(t,"",QC,"",s,So|iA|oA|Vl);case 26:return xs(t,"","",NC,s,0);case 25:return xs(t,"","",NC,s,So|iA|oA);case 31:return xs(t,"","",Up,A,So|iA|oA);case 33:return xs(t,"","",Up,A,0);case 32:return xs(t,"","",Up,A,So|iA|oA);case 18:return ar(t,2406,2415,!0,n);case 20:return Co(t,1,19999,QK,3,n);case 21:return ar(t,2790,2799,!0,n);case 22:return ar(t,2662,2671,!0,n);case 22:return Co(t,1,10999,UK,3,n);case 23:return xi(t,"");case 24:return xi(t,"");case 27:return ar(t,3302,3311,!0,n);case 28:return xi(t,"",s);case 29:return xi(t,"",s);case 34:return ar(t,3792,3801,!0,n);case 37:return ar(t,6160,6169,!0,n);case 38:return ar(t,4160,4169,!0,n);case 39:return ar(t,2918,2927,!0,n);case 40:return ar(t,1776,1785,!0,n);case 43:return ar(t,3046,3055,!0,n);case 44:return ar(t,3174,3183,!0,n);case 45:return ar(t,3664,3673,!0,n);case 46:return ar(t,3872,3881,!0,n);case 3:default:return ar(t,48,57,!0,n)}},qk="data-html2canvas-ignore",RC=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new SK,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=NK(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=s.contentWindow,o=a.document,c=PK(s).then(function(){return Yr(n,void 0,void 0,function(){var d,h;return Gr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(OK),a&&(a.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-r.left,a.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,DK(o)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(o,h)}).then(function(){return s})]:[2,s]}})})});return o.open(),o.write(jK(document.doctype)+"<html></html>"),MK(this.referenceElement.ownerDocument,A,i),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),c},t.prototype.createElementClone=function(e){if(I0(e,2))debugger;if(Gk(e))return this.createCanvasClone(e);if(EC(e))return this.createVideoClone(e);if(TC(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return k0(r)&&(k0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),FC(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Qp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var a=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(a){var o=a.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!$o(r)||!kK(r)&&!r.hasAttribute(qk)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!$o(r)||!TC(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if($o(A)&&$k(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(a){return s.appendChildNode(r,a,n)})}else this.appendChildNode(r,A,n)},t.prototype.cloneNode=function(e,r){if(Vk(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&$o(e)&&(F0(e)||Ah(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&F0(s)&&(this.clonedReferenceElement=s),Yy(s)&&KK(s);var o=this.counters.parse(new dC(this.context,A)),c=this.resolvePseudoContent(e,s,i,uc.BEFORE);FC(e)&&(r=!0),EC(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,a,uc.AFTER);return d&&s.appendChild(d),this.counters.pop(o),(A&&(this.options.copyStyles||Ah(e))&&!zk(e)||r)&&Qp(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(of(e)||af(e))&&(of(s)||af(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var A=this;if(n){var i=n.content,a=r.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new dC(this.context,n));var o=new I5(this.context,n),c=a.createElement("html2canvaspseudoelement");Qp(n,c),o.content.forEach(function(h){if(h.type===0)c.appendChild(a.createTextNode(h.value));else if(h.type===22){var f=a.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(St);m.length&&c.appendChild(a.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var v=h.values.filter(Sa),y=v[0],I=v[1];if(y&&St(y)){var b=A.counters.getCounterValue(y.value),w=I&&St(I)?_0.parse(A.context,I.value):3;c.appendChild(a.createTextNode($c(b,w,!1)))}}else if(h.name==="counters"){var C=h.values.filter(Sa),y=C[0],F=C[1],I=C[2];if(y&&St(y)){var U=A.counters.getCounterValues(y.value),N=I&&St(I)?_0.parse(A.context,I.value):3,x=F&&F.type===0?F.value:"",B=U.map(function(R){return $c(R,N,!1)}).join(x);c.appendChild(a.createTextNode(B))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(a.createTextNode(uC(o.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(uC(o.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(h.value))}}),c.className=S0+" "+U0;var d=s===uc.BEFORE?" "+S0:" "+U0;return Ah(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),uc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(uc||(uc={}));var NK=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(qk,"true"),t.body.appendChild(r),r},RK=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},DK=function(t){return Promise.all([].slice.call(t.images,0).map(RK))},PK=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},LK=["all","d","content"],Qp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);LK.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},jK=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},MK=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},OK=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},HK=":before",VK=":after",S0="___html2canvas___pseudoelement_before",U0="___html2canvas___pseudoelement_after",DC=`{
    content: "" !important;
    display: none !important;
}`,KK=function(t){GK(t,"."+S0+HK+DC+`
         .`+U0+VK+DC)},GK=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},Xk=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),zK=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Rp(e)||XK(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Yr(this,void 0,void 0,function(){var r,n,s,A,i=this;return Gr(this,function(a){switch(a.label){case 0:return r=Xk.isSameOrigin(e),n=!Np(e)&&this._options.useCORS===!0&&Qr.SUPPORT_CORS_IMAGES&&!r,s=!Np(e)&&!r&&!Rp(e)&&typeof this._options.proxy=="string"&&Qr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Np(e)&&!Rp(e)&&!s&&!n?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,c){var d=new Image;d.onload=function(){return o(d)},d.onerror=c,(JK(A)||n)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return o(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var a=Qr.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(a==="text")A(o.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(o.response)}else i("Failed to proxy resource "+s+" with status code "+o.status)},o.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=a),r._options.imageTimeout){var d=r._options.imageTimeout;o.timeout=d,o.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}o.send()})},t}(),$K=/^data:image\/svg\+xml/i,WK=/^data:image\/.*;base64,/i,qK=/^data:image\/.*/i,XK=function(t){return Qr.SUPPORT_SVG_DRAWING||!YK(t)},Np=function(t){return qK.test(t)},JK=function(t){return WK.test(t)},Rp=function(t){return t.substr(0,4)==="blob"},YK=function(t){return t.substr(-3).toLowerCase()==="svg"||$K.test(t)},Qe=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),_o=function(t,e,r){return new Qe(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},_d=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=_o(this.start,this.startControl,e),s=_o(this.startControl,this.endControl,e),A=_o(this.endControl,this.end,e),i=_o(n,s,e),a=_o(s,A,e),o=_o(i,a,e);return r?new t(this.start,n,i,o):new t(o,a,A,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Qn=function(t){return t.type===1},ZK=function(){function t(e){var r=e.styles,n=e.bounds,s=Ol(r.borderTopLeftRadius,n.width,n.height),A=s[0],i=s[1],a=Ol(r.borderTopRightRadius,n.width,n.height),o=a[0],c=a[1],d=Ol(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],m=Ol(r.borderBottomLeftRadius,n.width,n.height),v=m[0],y=m[1],I=[];I.push((A+o)/n.width),I.push((v+h)/n.width),I.push((i+y)/n.height),I.push((c+f)/n.height);var b=Math.max.apply(Math,I);b>1&&(A/=b,i/=b,o/=b,c/=b,h/=b,f/=b,v/=b,y/=b);var w=n.width-o,C=n.height-f,F=n.width-h,U=n.height-y,N=r.borderTopWidth,x=r.borderRightWidth,B=r.borderBottomWidth,_=r.borderLeftWidth,S=Lt(r.paddingTop,e.bounds.width),R=Lt(r.paddingRight,e.bounds.width),P=Lt(r.paddingBottom,e.bounds.width),E=Lt(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?zt(n.left+_/3,n.top+N/3,A-_/3,i-N/3,It.TOP_LEFT):new Qe(n.left+_/3,n.top+N/3),this.topRightBorderDoubleOuterBox=A>0||i>0?zt(n.left+w,n.top+N/3,o-x/3,c-N/3,It.TOP_RIGHT):new Qe(n.left+n.width-x/3,n.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?zt(n.left+F,n.top+C,h-x/3,f-B/3,It.BOTTOM_RIGHT):new Qe(n.left+n.width-x/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=v>0||y>0?zt(n.left+_/3,n.top+U,v-_/3,y-B/3,It.BOTTOM_LEFT):new Qe(n.left+_/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?zt(n.left+_*2/3,n.top+N*2/3,A-_*2/3,i-N*2/3,It.TOP_LEFT):new Qe(n.left+_*2/3,n.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?zt(n.left+w,n.top+N*2/3,o-x*2/3,c-N*2/3,It.TOP_RIGHT):new Qe(n.left+n.width-x*2/3,n.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?zt(n.left+F,n.top+C,h-x*2/3,f-B*2/3,It.BOTTOM_RIGHT):new Qe(n.left+n.width-x*2/3,n.top+n.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||y>0?zt(n.left+_*2/3,n.top+U,v-_*2/3,y-B*2/3,It.BOTTOM_LEFT):new Qe(n.left+_*2/3,n.top+n.height-B*2/3),this.topLeftBorderStroke=A>0||i>0?zt(n.left+_/2,n.top+N/2,A-_/2,i-N/2,It.TOP_LEFT):new Qe(n.left+_/2,n.top+N/2),this.topRightBorderStroke=A>0||i>0?zt(n.left+w,n.top+N/2,o-x/2,c-N/2,It.TOP_RIGHT):new Qe(n.left+n.width-x/2,n.top+N/2),this.bottomRightBorderStroke=h>0||f>0?zt(n.left+F,n.top+C,h-x/2,f-B/2,It.BOTTOM_RIGHT):new Qe(n.left+n.width-x/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=v>0||y>0?zt(n.left+_/2,n.top+U,v-_/2,y-B/2,It.BOTTOM_LEFT):new Qe(n.left+_/2,n.top+n.height-B/2),this.topLeftBorderBox=A>0||i>0?zt(n.left,n.top,A,i,It.TOP_LEFT):new Qe(n.left,n.top),this.topRightBorderBox=o>0||c>0?zt(n.left+w,n.top,o,c,It.TOP_RIGHT):new Qe(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?zt(n.left+F,n.top+C,h,f,It.BOTTOM_RIGHT):new Qe(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||y>0?zt(n.left,n.top+U,v,y,It.BOTTOM_LEFT):new Qe(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||i>0?zt(n.left+_,n.top+N,Math.max(0,A-_),Math.max(0,i-N),It.TOP_LEFT):new Qe(n.left+_,n.top+N),this.topRightPaddingBox=o>0||c>0?zt(n.left+Math.min(w,n.width-x),n.top+N,w>n.width+x?0:Math.max(0,o-x),Math.max(0,c-N),It.TOP_RIGHT):new Qe(n.left+n.width-x,n.top+N),this.bottomRightPaddingBox=h>0||f>0?zt(n.left+Math.min(F,n.width-_),n.top+Math.min(C,n.height-B),Math.max(0,h-x),Math.max(0,f-B),It.BOTTOM_RIGHT):new Qe(n.left+n.width-x,n.top+n.height-B),this.bottomLeftPaddingBox=v>0||y>0?zt(n.left+_,n.top+Math.min(U,n.height-B),Math.max(0,v-_),Math.max(0,y-B),It.BOTTOM_LEFT):new Qe(n.left+_,n.top+n.height-B),this.topLeftContentBox=A>0||i>0?zt(n.left+_+E,n.top+N+S,Math.max(0,A-(_+E)),Math.max(0,i-(N+S)),It.TOP_LEFT):new Qe(n.left+_+E,n.top+N+S),this.topRightContentBox=o>0||c>0?zt(n.left+Math.min(w,n.width+_+E),n.top+N+S,w>n.width+_+E?0:o-_+E,c-(N+S),It.TOP_RIGHT):new Qe(n.left+n.width-(x+R),n.top+N+S),this.bottomRightContentBox=h>0||f>0?zt(n.left+Math.min(F,n.width-(_+E)),n.top+Math.min(C,n.height+N+S),Math.max(0,h-(x+R)),f-(B+P),It.BOTTOM_RIGHT):new Qe(n.left+n.width-(x+R),n.top+n.height-(B+P)),this.bottomLeftContentBox=v>0||y>0?zt(n.left+_+E,n.top+U,Math.max(0,v-(_+E)),y-(B+P),It.BOTTOM_LEFT):new Qe(n.left+_+E,n.top+n.height-(B+P))}return t}(),It;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(It||(It={}));var zt=function(t,e,r,n,s){var A=4*((Math.sqrt(2)-1)/3),i=r*A,a=n*A,o=t+r,c=e+n;switch(s){case It.TOP_LEFT:return new _d(new Qe(t,c),new Qe(t,c-a),new Qe(o-i,e),new Qe(o,e));case It.TOP_RIGHT:return new _d(new Qe(t,e),new Qe(t+i,e),new Qe(o,c-a),new Qe(o,c));case It.BOTTOM_RIGHT:return new _d(new Qe(o,e),new Qe(o,e+a),new Qe(t+i,c),new Qe(t,c));case It.BOTTOM_LEFT:default:return new _d(new Qe(o,c),new Qe(o-i,c),new Qe(t,e+a),new Qe(t,e))}},lf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},e6=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},cf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},t6=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Id=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),r6=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),n6=function(t){return t.type===0},Jk=function(t){return t.type===1},s6=function(t){return t.type===2},PC=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},A6=function(t,e,r,n,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+s);case 3:return A.add(e,r+s)}return A})},Yk=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Zk=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new ZK(this.container),this.container.styles.opacity<1&&this.effects.push(new r6(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new t6(n,s,A))}if(this.container.styles.overflowX!==0){var i=lf(this.curves),a=cf(this.curves);PC(i,a)?this.effects.push(new Id(i,6)):(this.effects.push(new Id(i,2)),this.effects.push(new Id(a,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var A=n.effects.filter(function(o){return!Jk(o)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=lf(n.curves),a=cf(n.curves);PC(i,a)||s.unshift(new Id(a,6))}}else s.unshift.apply(s,A);n=n.parent}return s.filter(function(o){return mr(o.target,e)})},t}(),Q0=function(t,e,r,n){t.container.elements.forEach(function(s){var A=mr(s.flags,4),i=mr(s.flags,2),a=new Zk(s,t);mr(s.styles.display,2048)&&n.push(a);var o=mr(s.flags,8)?[]:n;if(A||i){var c=A||s.styles.isPositioned()?r:e,d=new Yk(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(v,y){return h>v.element.container.styles.zIndex.order?(f=y,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(v,y){return h>=v.element.container.styles.zIndex.order?(m=y+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);Q0(a,d,A?d:r,o)}else s.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),Q0(a,e,r,o);mr(s.flags,8)&&eS(s,o)})},eS=function(t,e){for(var r=t instanceof T0?t.start:1,n=t instanceof T0?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof Pk&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=$c(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},i6=function(t){var e=new Zk(t,null),r=new Yk(e),n=[];return Q0(e,r,r,n),eS(e.container,n),r},LC=function(t,e){switch(e){case 0:return Dn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Dn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Dn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Dn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},o6=function(t,e){switch(e){case 0:return Dn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Dn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Dn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Dn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},a6=function(t,e){switch(e){case 0:return Dn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Dn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Dn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Dn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},l6=function(t,e){switch(e){case 0:return Ed(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Ed(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Ed(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Ed(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Ed=function(t,e){var r=[];return Qn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Qn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Dn=function(t,e,r,n){var s=[];return Qn(t)?s.push(t.subdivide(.5,!1)):s.push(t),Qn(r)?s.push(r.subdivide(.5,!0)):s.push(r),Qn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Qn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},tS=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},uf=function(t){var e=t.styles,r=t.bounds,n=Lt(e.paddingLeft,r.width),s=Lt(e.paddingRight,r.width),A=Lt(e.paddingTop,r.width),i=Lt(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},c6=function(t,e){return t===0?e.bounds:t===2?uf(e):tS(e)},u6=function(t,e){return t===0?e.bounds:t===2?uf(e):tS(e)},Dp=function(t,e,r){var n=c6(Uo(t.styles.backgroundOrigin,e),t),s=u6(Uo(t.styles.backgroundClip,e),t),A=d6(Uo(t.styles.backgroundSize,e),r,n),i=A[0],a=A[1],o=Ol(Uo(t.styles.backgroundPosition,e),n.width-i,n.height-a),c=h6(Uo(t.styles.backgroundRepeat,e),o,A,n,s),d=Math.round(n.left+o[0]),h=Math.round(n.top+o[1]);return[c,d,h,i,a]},Io=function(t){return St(t)&&t.value===Aa.AUTO},Td=function(t){return typeof t=="number"},d6=function(t,e,r){var n=e[0],s=e[1],A=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(fr(i)&&a&&fr(a))return[Lt(i,r.width),Lt(a,r.height)];var o=Td(A);if(St(i)&&(i.value===Aa.CONTAIN||i.value===Aa.COVER)){if(Td(A)){var c=r.width/r.height;return c<A!=(i.value===Aa.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var d=Td(n),h=Td(s),f=d||h;if(Io(i)&&(!a||Io(a))){if(d&&h)return[n,s];if(!o&&!f)return[r.width,r.height];if(f&&o){var m=d?n:s*A,v=h?s:n/A;return[m,v]}var y=d?n:r.width,I=h?s:r.height;return[y,I]}if(o){var b=0,w=0;return fr(i)?b=Lt(i,r.width):fr(a)&&(w=Lt(a,r.height)),Io(i)?b=w*A:(!a||Io(a))&&(w=b/A),[b,w]}var C=null,F=null;if(fr(i)?C=Lt(i,r.width):a&&fr(a)&&(F=Lt(a,r.height)),C!==null&&(!a||Io(a))&&(F=d&&h?C/n*s:r.height),F!==null&&Io(i)&&(C=d&&h?F/s*n:r.width),C!==null&&F!==null)return[C,F];throw new Error("Unable to calculate background-size for element")},Uo=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},h6=function(t,e,r,n,s){var A=e[0],i=e[1],a=r[0],o=r[1];switch(t){case 2:return[new Qe(Math.round(n.left),Math.round(n.top+i)),new Qe(Math.round(n.left+n.width),Math.round(n.top+i)),new Qe(Math.round(n.left+n.width),Math.round(o+n.top+i)),new Qe(Math.round(n.left),Math.round(o+n.top+i))];case 3:return[new Qe(Math.round(n.left+A),Math.round(n.top)),new Qe(Math.round(n.left+A+a),Math.round(n.top)),new Qe(Math.round(n.left+A+a),Math.round(n.height+n.top)),new Qe(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new Qe(Math.round(n.left+A),Math.round(n.top+i)),new Qe(Math.round(n.left+A+a),Math.round(n.top+i)),new Qe(Math.round(n.left+A+a),Math.round(n.top+i+o)),new Qe(Math.round(n.left+A),Math.round(n.top+i+o))];default:return[new Qe(Math.round(s.left),Math.round(s.top)),new Qe(Math.round(s.left+s.width),Math.round(s.top)),new Qe(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Qe(Math.round(s.left),Math.round(s.height+s.top))]}},f6="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",jC="Hidden Text",g6=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=f6,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(jC)),n.appendChild(A),n.appendChild(s);var a=s.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode(jC)),n.style.lineHeight="normal",s.style.verticalAlign="super";var o=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),rS=function(){function t(e,r){this.context=e,this.options=r}return t}(),p6=1e4,m6=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new g6(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),s6(r)&&(this.ctx.globalAlpha=r.opacity),n6(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Jk(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Yr(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Yr(this,void 0,void 0,function(){return Gr(this,function(n){switch(n.label){case 0:if(mr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=Xy(r.text);i.reduce(function(a,o){return A.ctx.fillText(o,a,r.bounds.top+s),a+A.ctx.measureText(o).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=B6(r.fontFamily).join(", "),A=vu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(r,n){return Yr(this,void 0,void 0,function(){var s,A,i,a,o,c,d,h,f=this;return Gr(this,function(m){return s=this.createFontStyle(n),A=s[0],i=s[1],a=s[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),c=o.baseline,d=o.middle,h=n.paintOrder,r.textBounds.forEach(function(v){h.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=br(n.color),f.renderTextWithLetterSpacing(v,n.letterSpacing,c);var I=n.textShadow;I.length&&v.text.trim().length&&(I.slice(0).reverse().forEach(function(b){f.ctx.shadowColor=br(b.color),f.ctx.shadowOffsetX=b.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=b.offsetY.number*f.options.scale,f.ctx.shadowBlur=b.blur.number,f.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=br(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(b){switch(b){case 1:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:f.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+d),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(f.ctx.strokeStyle=br(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=uf(r),i=cf(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Yr(this,void 0,void 0,function(){var n,s,A,i,a,o,w,w,c,d,h,f,F,m,v,U,y,I,b,w,C,F,U;return Gr(this,function(N){switch(N.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,A=n.styles,i=0,a=n.textNodes,N.label=1;case 1:return i<a.length?(o=a[i],[4,this.renderTextNode(o,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Nk))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=N.sent(),this.renderReplacedElement(n,s,w),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Rk&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof Dk))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=N.sent(),this.renderReplacedElement(n,s,w),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Mk&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=N.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),N.label=14;case 14:if(n instanceof Jy&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===sf?n.checked&&(this.ctx.save(),this.path([new Qe(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Qe(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Qe(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Qe(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Qe(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Qe(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Qe(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=br(IC),this.ctx.fill(),this.ctx.restore()):n.type===Af&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=br(IC),this.ctx.fill(),this.ctx.restore())),w6(n)&&n.value.length){switch(f=this.createFontStyle(A),F=f[0],m=f[1],v=this.fontMetrics.getMetrics(F,m).baseline,this.ctx.font=F,this.ctx.fillStyle=br(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=x6(n.styles.textAlign),U=uf(n),y=0,n.styles.textAlign){case 1:y+=U.width/2;break;case 2:y+=U.width;break}I=U.add(y,0,0,-U.height/2+1),this.ctx.save(),this.path([new Qe(U.left,U.top),new Qe(U.left+U.width,U.top),new Qe(U.left+U.width,U.top+U.height),new Qe(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new cc(n.value,I),A.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(b=n.styles.listStyleImage,b.type!==0)return[3,18];w=void 0,C=b.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(C)];case 16:return w=N.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+C),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(A)[0],this.ctx.font=F,this.ctx.fillStyle=br(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new Os(n.bounds.left,n.bounds.top+Lt(n.styles.paddingTop,n.bounds.width),n.bounds.width,lC(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new cc(r.listValue,U),A.letterSpacing,lC(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Yr(this,void 0,void 0,function(){var n,s,b,A,i,b,a,o,b,c,d,b,h,f,b,m,v,b,y,I,b;return Gr(this,function(w){switch(w.label){case 0:if(mr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,s=r.negativeZIndex,w.label=2;case 2:return n<s.length?(b=s[n],[4,this.renderStack(b)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),A=0,i=r.nonInlineLevel,w.label=7;case 7:return A<i.length?(b=i[A],[4,this.renderNode(b)]):[3,10];case 8:w.sent(),w.label=9;case 9:return A++,[3,7];case 10:a=0,o=r.nonPositionedFloats,w.label=11;case 11:return a<o.length?(b=o[a],[4,this.renderStack(b)]):[3,14];case 12:w.sent(),w.label=13;case 13:return a++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(b=d[c],[4,this.renderStack(b)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,w.label=19;case 19:return h<f.length?(b=f[h],[4,this.renderNode(b)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:m=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<v.length?(b=v[m],[4,this.renderStack(b)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:y=0,I=r.positiveZIndex,w.label=27;case 27:return y<I.length?(b=I[y],[4,this.renderStack(b)]):[3,30];case 28:w.sent(),w.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,A){var i=Qn(s)?s.start:s;A===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Qn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(r,n,s){var A;if(r.width===n&&r.height===s)return r;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,s);var o=a.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,s),a},e.prototype.renderBackgroundImage=function(r){return Yr(this,void 0,void 0,function(){var n,s,A,i,a,o;return Gr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,f,m,S,at,Le,E,We,B,v,S,at,Le,E,We,y,I,b,w,C,F,U,N,x,B,_,S,R,P,E,We,qe,at,Le,ce,Ee,Ne,Je,Xe,Ye,wt,te;return Gr(this,function(Ke){switch(Ke.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ke.label=1;case 1:return Ke.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=Ke.sent(),[3,4];case 3:return Ke.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=Dp(r,n,[h.width,h.height,h.width/h.height]),S=m[0],at=m[1],Le=m[2],E=m[3],We=m[4],B=A.ctx.createPattern(A.resizeImage(h,E,We),"repeat"),A.renderRepeat(S,B,at,Le)),[3,6];case 5:n3(d)?(v=Dp(r,n,[null,null,null]),S=v[0],at=v[1],Le=v[2],E=v[3],We=v[4],y=YV(d.angle,E,We),I=y[0],b=y[1],w=y[2],C=y[3],F=y[4],U=document.createElement("canvas"),U.width=E,U.height=We,N=U.getContext("2d"),x=N.createLinearGradient(b,C,w,F),oC(d.stops,I).forEach(function(Ge){return x.addColorStop(Ge.stop,br(Ge.color))}),N.fillStyle=x,N.fillRect(0,0,E,We),E>0&&We>0&&(B=A.ctx.createPattern(U,"repeat"),A.renderRepeat(S,B,at,Le))):s3(d)&&(_=Dp(r,n,[null,null,null]),S=_[0],R=_[1],P=_[2],E=_[3],We=_[4],qe=d.position.length===0?[$y]:d.position,at=Lt(qe[0],E),Le=Lt(qe[qe.length-1],We),ce=ZV(d,at,Le,E,We),Ee=ce[0],Ne=ce[1],Ee>0&&Ne>0&&(Je=A.ctx.createRadialGradient(R+at,P+Le,0,R+at,P+Le,Ee),oC(d.stops,Ee*2).forEach(function(Ge){return Je.addColorStop(Ge.stop,br(Ge.color))}),A.path(S),A.ctx.fillStyle=Je,Ee!==Ne?(Xe=r.bounds.left+.5*r.bounds.width,Ye=r.bounds.top+.5*r.bounds.height,wt=Ne/Ee,te=1/wt,A.ctx.save(),A.ctx.translate(Xe,Ye),A.ctx.transform(1,0,0,wt,0,0),A.ctx.translate(-Xe,-Ye),A.ctx.fillRect(R,te*(P-Ye)+Ye,E,We*te),A.ctx.restore()):A.ctx.fill())),Ke.label=6;case 6:return n--,[2]}})},A=this,i=0,a=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<a.length?(o=a[i],[5,s(o)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Yr(this,void 0,void 0,function(){return Gr(this,function(A){return this.path(LC(s,n)),this.ctx.fillStyle=br(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,A){return Yr(this,void 0,void 0,function(){var i,a;return Gr(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,A)]:[3,2];case 1:return o.sent(),[2];case 2:return i=o6(A,s),this.path(i),this.ctx.fillStyle=br(r),this.ctx.fill(),a=a6(A,s),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Yr(this,void 0,void 0,function(){var n,s,A,i,a,o,c,d,h=this;return Gr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!VA(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=y6(Uo(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),VA(n.backgroundColor)||(this.ctx.fillStyle=br(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var v=lf(r.curves),y=m.inset?0:p6,I=A6(v,-y+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(v),h.ctx.clip(),h.mask(I)):(h.mask(v),h.ctx.clip(),h.path(I)),h.ctx.shadowOffsetX=m.offsetX.number+y,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=br(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?br(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:a=0,o=0,c=A,f.label=3;case 3:return o<c.length?(d=c[o],d.style!==0&&!VA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,a,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,a,r.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,A,i){return Yr(this,void 0,void 0,function(){var a,o,c,d,h,f,m,v,y,I,b,w,C,F,U,N,U,N;return Gr(this,function(x){return this.ctx.save(),a=l6(A,s),o=LC(A,s),i===2&&(this.path(o),this.ctx.clip()),Qn(o[0])?(c=o[0].start.x,d=o[0].start.y):(c=o[0].x,d=o[0].y),Qn(o[1])?(h=o[1].end.x,f=o[1].end.y):(h=o[1].x,f=o[1].y),s===0||s===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(o.slice(0,2)),v=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(v=n,y=n),I=!0,m<=v*2?I=!1:m<=v*2+y?(b=m/(2*v+y),v*=b,y*=b):(w=Math.floor((m+y)/(v+y)),C=(m-w*v)/(w-1),F=(m-(w+1)*v)/w,y=F<=0||Math.abs(y-C)<Math.abs(y-F)?C:F),I&&(i===3?this.ctx.setLineDash([0,v+y]):this.ctx.setLineDash([v,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=br(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Qn(o[0])&&(U=o[3],N=o[0],this.ctx.beginPath(),this.formatPath([new Qe(U.end.x,U.end.y),new Qe(N.start.x,N.start.y)]),this.ctx.stroke()),Qn(o[1])&&(U=o[1],N=o[2],this.ctx.beginPath(),this.formatPath([new Qe(U.end.x,U.end.y),new Qe(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Yr(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=i6(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(rS),w6=function(t){return t instanceof jk||t instanceof Lk?!0:t instanceof Jy&&t.type!==Af&&t.type!==sf},y6=function(t,e){switch(t){case 0:return lf(e);case 2:return e6(e);case 1:default:return cf(e)}},x6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},v6=["-apple-system","system-ui"],B6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return v6.indexOf(e)===-1}):t},b6=function(t){Yn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Yr(this,void 0,void 0,function(){var n,s;return Gr(this,function(A){switch(A.label){case 0:return n=E0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,C6(n)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(rS),C6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},_6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,id([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,id([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,id([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,id([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),I6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new _6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new zK(this,e)}return t.instanceCount=1,t}(),df=function(t,e){return e===void 0&&(e={}),E6(t,e)};typeof window<"u"&&Xk.setContext(window);var E6=function(t,e){return Yr(void 0,void 0,void 0,function(){var r,n,s,A,i,a,o,c,d,h,f,m,v,y,I,b,w,C,F,U,x,N,x,B,_,S,R,P,E,We,qe,at,Le,ce,Ee,Ne,Je,Xe,Ye,wt;return Gr(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(B=e.allowTaint)!==null&&B!==void 0?B:!1,imageTimeout:(_=e.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:e.proxy,useCORS:(S=e.useCORS)!==null&&S!==void 0?S:!1},A=d0({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(E=e.windowHeight)!==null&&E!==void 0?E:n.innerHeight,scrollX:(We=e.scrollX)!==null&&We!==void 0?We:n.pageXOffset,scrollY:(qe=e.scrollY)!==null&&qe!==void 0?qe:n.pageYOffset},a=new Os(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),o=new I6(A,a),c=(at=e.foreignObjectRendering)!==null&&at!==void 0?at:!1,d={allowTaint:(Le=e.allowTaint)!==null&&Le!==void 0?Le:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},o.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new RC(o,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=te.sent(),v=Yy(f)||FK(f)?AH(f.ownerDocument):lg(o,f),y=v.width,I=v.height,b=v.left,w=v.top,C=T6(o,f,e.backgroundColor),F={canvas:e.canvas,backgroundColor:C,scale:(Ee=(ce=e.scale)!==null&&ce!==void 0?ce:n.devicePixelRatio)!==null&&Ee!==void 0?Ee:1,x:((Ne=e.x)!==null&&Ne!==void 0?Ne:0)+b,y:((Je=e.y)!==null&&Je!==void 0?Je:0)+w,width:(Xe=e.width)!==null&&Xe!==void 0?Xe:Math.ceil(y),height:(Ye=e.height)!==null&&Ye!==void 0?Ye:Math.ceil(I)},c?(o.logger.debug("Document cloned, using foreign object rendering"),x=new b6(o,F),[4,x.render(f)]):[3,3];case 2:return U=te.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+b+","+w+" with size "+y+"x"+I+" using computed rendering"),o.logger.debug("Starting DOM parsing"),N=Hk(o,f),C===N.styles.backgroundColor&&(N.styles.backgroundColor=Us.TRANSPARENT),o.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),x=new m6(o,F),[4,x.render(N)];case 4:U=te.sent(),te.label=5;case 5:return(!((wt=e.removeContainer)!==null&&wt!==void 0)||wt)&&(RC.destroy(m)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,U]}})})},T6=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?ac(t,getComputedStyle(n.documentElement).backgroundColor):Us.TRANSPARENT,A=n.body?ac(t,getComputedStyle(n.body).backgroundColor):Us.TRANSPARENT,i=typeof r=="string"?ac(t,r):r===null?Us.TRANSPARENT:4294967295;return e===n.documentElement?VA(s)?VA(A)?i:A:s:i};const F6=()=>{var Z,le,de,ue;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=fs(),[i,a]=k.useState("teachers"),[o,c]=k.useState(!1),[d,h]=k.useState(null),[f,m]=k.useState({}),[v,y]=k.useState({}),[I,b]=k.useState({}),[w,C]=k.useState({}),[F,U]=k.useState("preset_normal"),[N,x]=k.useState([]),[B,_]=k.useState(!1),[S,R]=k.useState(""),P=k.useRef(null),[E,We]=k.useState(null);k.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const L=s.bellPresets.find(X=>X.id===F);if(L){x(L.bells);return}}x(Qh)},[F,s.bellPresets]);const qe=L=>{h(L||null),i==="teachers"?m(L?e.find(X=>X.id===L)??{}:{subjectIds:[],unavailableDates:[],shifts:[Ae.First,Ae.Second],telegramChatId:""}):i==="subjects"?y(L?t.find(X=>X.id===L)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?b(L?r.find(X=>X.id===L)??{}:{shift:Ae.First,studentsCount:25}):i==="rooms"&&C(L?n.find(X=>X.id===L)??{}:{capacity:30,type:""}),c(!0)},at=async()=>{const L={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:v,key:"subjects"},classes:{list:r,form:I,key:"classes"},rooms:{list:n,form:w,key:"rooms"}};if(i==="bells"||!(i in L))return;const X=L[i],{list:Y,form:pe,key:ze}=X;if(!pe.name)return;let V=[...Y];if(d)V=V.map(G=>G.id===d?{...G,...pe}:G);else{const G=Y.reduce((et,he)=>Math.max(et,he.order||0),0),ee={...pe,id:Bn(),order:G+1};V.push(ee)}await A({[ze]:V}),c(!1)},Le=async L=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(X=>X.id!==L)});break;case"subjects":await A({subjects:t.filter(X=>X.id!==L)});break;case"classes":await A({classes:r.filter(X=>X.id!==L)});break;case"rooms":await A({rooms:n.filter(X=>X.id!==L)});break}},ce=(L,X)=>{We(X),L.dataTransfer.effectAllowed="move"},Ee=L=>{L.preventDefault()},Ne=async(L,X)=>{if(E===null||E===X)return;const Y=pe=>{const ze=[...pe],[V]=ze.splice(E,1);return ze.splice(X,0,V),ze.map((G,ee)=>({...G,order:ee}))};switch(i){case"teachers":{await A({teachers:Y(e)});break}case"subjects":{await A({subjects:Y(t)});break}case"classes":{await A({classes:Y(r)});break}case"rooms":{await A({rooms:Y(n)});break}}We(null)},Je=(L,X,Y,pe)=>{const ze=[...N],V=ze.findIndex(G=>G.shift===L&&G.period===X&&G.day==="default");V>=0?ze[V]={...ze[V],[Y]:pe}:ze.push({shift:L,period:X,[Y]:pe,start:"00:00",end:"00:00",day:"default"}),x(ze)},Xe=(L,X)=>{const Y=[...N],pe=Y.findIndex(ze=>ze.shift===L&&ze.period===X&&ze.day==="default");pe>=0?Y[pe]={...Y[pe],cancelled:!Y[pe].cancelled}:Y.push({shift:L,period:X,start:"00:00",end:"00:00",day:"default",cancelled:!0}),x(Y)},Ye=async()=>{let L=[...s.bellPresets||[]];const X=L.findIndex(Y=>Y.id===F);X>=0?L[X]={...L[X],bells:N}:L.push({id:F,name:S||" ",bells:N}),await A({settings:{...s,bellPresets:L}}),alert(" !")},wt=()=>{R(""),_(!0)},te=async()=>{if(!S)return;const L=`preset_${Bn()}`,X=[...s.bellPresets||[]];X.push({id:L,name:S,bells:JSON.parse(JSON.stringify(N))}),await A({settings:{...s,bellPresets:X}}),U(L),_(!1)},Ke=async()=>{if(F==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const L=(s.bellPresets||[]).filter(X=>X.id!==F);await A({settings:{...s,bellPresets:L}}),U("preset_normal")},Ge=async()=>{var L,X;window.confirm(`   "${(X=(L=s.bellPresets)==null?void 0:L.find(Y=>Y.id===F))==null?void 0:X.name}"   ?`)&&(await A({bellSchedule:N}),alert("  !"))},nt=async()=>{var Y,pe;if(!P.current)return;const L=await df(P.current,{scale:2,backgroundColor:"#ffffff"}),X=document.createElement("a");X.href=L.toDataURL("image/png"),X.download=`_${(pe=(Y=s.bellPresets)==null?void 0:Y.find(ze=>ze.id===F))==null?void 0:pe.name}.png`,document.body.appendChild(X),X.click(),document.body.removeChild(X)},ct=L=>{const X=f.shifts||[];X.includes(L)?m({...f,shifts:X.filter(Y=>Y!==L)}):m({...f,shifts:[...X,L]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(L=>l.jsxs("button",{onClick:()=>a(L.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===L.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(K,{name:L.icon,size:18})," ",L.label]},L.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>qe(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(K,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(Ad,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((L,X)=>l.jsxs("div",{draggable:!0,onDragStart:Y=>ce(Y,X),onDragOver:Ee,onDrop:Y=>Ne(Y,X),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(K,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:L.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>qe(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(K,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Le(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(K,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:L.birthDate?`: ${new Date(L.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[L.shifts.includes(Ae.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),L.shifts.includes(Ae.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:L.subjectIds.map(Y=>{const pe=t.find(ze=>ze.id===Y);return pe?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:pe.color,color:"#334155"},children:pe.name},Y):null})})]},L.id))}),i==="subjects"&&l.jsx(Ad,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((L,X)=>l.jsxs("div",{draggable:!0,onDragStart:Y=>ce(Y,X),onDragOver:Ee,onDrop:Y=>Ne(Y,X),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:L.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(K,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",L.difficulty,"  ",L.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>qe(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Le(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(K,{name:"Trash2",size:16})})]})]},L.id))}),i==="classes"&&l.jsx(Ad,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((L,X)=>l.jsxs("div",{draggable:!0,onDragStart:Y=>ce(Y,X),onDragOver:Ee,onDrop:Y=>Ne(Y,X),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(K,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[L.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${L.shift===Ae.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[L.shift===Ae.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>qe(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>Le(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(K,{name:"Trash2",size:14})})]})]},L.id))}),i==="rooms"&&l.jsx(Ad,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((L,X)=>l.jsxs("div",{draggable:!0,onDragStart:Y=>ce(Y,X),onDragOver:Ee,onDrop:Y=>Ne(Y,X),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(K,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(K,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",L.capacity,"  ",L.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>qe(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Le(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(K,{name:"Trash2",size:16})})]})]},L.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-wrap items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:F,onChange:L=>U(L.target.value),className:"appearance-none bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500 cursor-pointer",children:(s.bellPresets||[]).map(L=>l.jsx("option",{value:L.id,children:L.name},L.id))}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:l.jsx(K,{name:"Filter",size:14})})]}),l.jsx("button",{onClick:wt,className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition",title:"  ",children:l.jsx(K,{name:"Plus",size:18})}),l.jsx("button",{onClick:Ke,className:"p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",title:" ",children:l.jsx(K,{name:"Trash2",size:18})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:Ye,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Save",size:18}),"  "]}),l.jsxs("button",{onClick:Ge,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(K,{name:"CheckCircle",size:18}),"  "]}),l.jsxs("button",{onClick:nt,className:"px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Image",size:18})," PNG"]})]})]}),l.jsxs("div",{ref:P,className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 text-slate-900",children:[l.jsxs("h3",{className:"text-2xl font-black text-center mb-6 uppercase text-slate-800",children:[" : ",(le=(Z=s.bellPresets)==null?void 0:Z.find(L=>L.id===F))==null?void 0:le.name]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[Ae.First,Ae.Second].map(L=>l.jsxs("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white text-center ${L===Ae.First?"bg-indigo-600":"bg-purple-600"}`,children:L}),l.jsx("div",{className:"p-4 space-y-2 bg-white",children:on[L].map(X=>{const Y=N.find(pe=>pe.shift===L&&pe.period===X&&pe.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-lg border ${Y.cancelled?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded bg-white flex items-center justify-center font-black text-slate-500 shadow-sm border border-slate-200",children:X}),Y.cancelled?l.jsx("div",{className:"flex-1 flex justify-center items-center",children:l.jsx("span",{className:"text-red-500 font-bold uppercase tracking-wider text-sm",children:" "})}):l.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[l.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:Y.start,onChange:pe=>Je(L,X,"start",pe.target.value)}),l.jsx("span",{className:"text-slate-400 font-bold",children:""}),l.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:Y.end,onChange:pe=>Je(L,X,"end",pe.target.value)})]}),l.jsx("button",{onClick:()=>Xe(L,X),className:`w-8 h-8 rounded flex items-center justify-center transition-colors ${Y.cancelled?"bg-white text-emerald-500 hover:text-emerald-700":"text-slate-400 hover:text-red-500 hover:bg-red-50"}`,title:Y.cancelled?" ":" ","data-html2canvas-ignore":"true",children:l.jsx(K,{name:Y.cancelled?"RotateCcw":"X",size:16})})]},X)})})]},L))}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 flex justify-between items-end text-sm font-bold text-slate-500",children:[l.jsxs("div",{children:["",l.jsx("br",{})," "]}),l.jsx("div",{children:"____________"})]})]})]})]}),l.jsx(Ln,{isOpen:o,onClose:()=>c(!1),title:d?"":"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:L=>m({...f,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:L=>m({...f,birthDate:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:L=>m({...f,telegramChatId:L.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(de=f.shifts)==null?void 0:de.includes(Ae.First),onChange:()=>ct(Ae.First)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(ue=f.shifts)==null?void 0:ue.includes(Ae.Second),onChange:()=>ct(Ae.Second)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(L=>{var X;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(X=f.subjectIds)==null?void 0:X.includes(L.id),onChange:Y=>{const pe=f.subjectIds||[];m({...f,subjectIds:Y.target.checked?[...pe,L.id]:pe.filter(ze=>ze!==L.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:L.name})]},L.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:v.name||"",onChange:L=>y({...v,name:L.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:v.color||"#ffffff",onChange:L=>y({...v,color:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.difficulty||5,onChange:L=>y({...v,difficulty:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.requiredRoomType,onChange:L=>y({...v,requiredRoomType:L.target.value}),children:qv.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:I.name||"",onChange:L=>b({...I,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.studentsCount||25,onChange:L=>b({...I,studentsCount:parseInt(L.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>b({...I,shift:Ae.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===Ae.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>b({...I,shift:Ae.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===Ae.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:w.name||"",onChange:L=>C({...w,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.capacity||30,onChange:L=>C({...w,capacity:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.type,onChange:L=>C({...w,type:L.target.value}),children:qv.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:at,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),l.jsx(Ln,{isOpen:B,onClose:()=>_(!1),title:"  ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:S,onChange:L=>R(L.target.value),autoFocus:!0})]}),l.jsx("div",{className:"flex justify-end pt-2",children:l.jsx("button",{onClick:te,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})})]})},k6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=fs(),{schedule1:i,schedule2:a,substitutions:o,saveScheduleData:c}=uo(),d=ii(),[h,f]=k.useState(Vy()),[m,v]=k.useState(!1),[y,I]=k.useState(null),[b,w]=k.useState(!1),[C,F]=k.useState(!1),[U,N]=k.useState(null),[x,B]=k.useState(""),[_,S]=k.useState(!1),[R,P]=k.useState(""),[E,We]=k.useState(""),[qe,at]=k.useState("all"),[Le,ce]=k.useState(""),[Ee,Ne]=k.useState(""),[Je,Xe]=k.useState(""),[Ye,wt]=k.useState(""),[te,Ke]=k.useState([]),[Ge,nt]=k.useState(!1),[ct,Z]=k.useState(!1),[le,de]=k.useState(!1),ue=YF({maxWidth:767}),[L,X]=k.useState("lessons"),Y=k.useMemo(()=>{const D={schedule:i,schedule2:a,settings:s};return OF(new Date(h),D)},[h,i,a,s]);k.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(I(d.state.subParams),Xe(""),wt(""),Ke([]),nt(!1),Z(!1),de(!1),v(!0),window.history.replaceState({},document.title))},[d.state]),k.useEffect(()=>{if(m&&y){const D=o.find(W=>W.scheduleItemId===y.scheduleItemId&&W.date===h);Ke(D?D.refusals||[]:[]),nt(!1),Z(!1),de(!1)}},[m,y,o,h]);const pe=k.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:Et[D-1]},[h]),ze=k.useMemo(()=>e.filter(D=>{const W=D.name.toLowerCase().includes(E.toLowerCase()),$=qe==="all"?!0:D.shifts&&D.shifts.includes(qe);return W&&$}),[e,E,qe]),V=k.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),G=k.useMemo(()=>{if(!pe)return[];const D=V.map(we=>we.id),W=Y.filter(we=>we.day===pe&&D.includes(we.teacherId)),O=o.filter(we=>we.date===h).map(we=>we.scheduleItemId),Ue=Y.filter(we=>O.includes(we.id)),be=[...W];return Ue.forEach(we=>{be.find(Be=>Be.id===we.id)||be.push(we)}),be.sort((we,Be)=>we.period-Be.period)},[Y,pe,V,o,h]),ee=D=>{var $;const W=e.find(O=>O.id===D);N(D),B((($=W==null?void 0:W.absenceReasons)==null?void 0:$[h])||""),w(!0)},et=k.useCallback(async()=>{let D=[...e];const W=D.findIndex(O=>O.id===U);if(W===-1)return;const $={...D[W]};$.unavailableDates.includes(h)||($.unavailableDates=[...$.unavailableDates,h]),$.absenceReasons||($.absenceReasons={}),$.absenceReasons[h]=x,D[W]=$,await A({teachers:D}),w(!1)},[e,U,h,x,A]),he=k.useCallback(async D=>{let W=[...e];const $=W.findIndex(Ue=>Ue.id===D);if($===-1)return;const O={...W[$]};O.unavailableDates=O.unavailableDates.filter(Ue=>Ue!==h),O.absenceReasons&&delete O.absenceReasons[h],W[$]=O,await A({teachers:W})},[e,h,A]),Se=k.useCallback(async(D,W=!1)=>{if(!y){alert(":   .    .");return}const $=Y.find(be=>be.id===y.scheduleItemId);if(!$){alert(":     .");return}const O=o.filter(be=>!(be.scheduleItemId===y.scheduleItemId&&be.date===h)),Ue={id:Bn(),date:h,scheduleItemId:y.scheduleItemId,originalTeacherId:$.teacherId,replacementTeacherId:D,replacementRoomId:Je||void 0,isMerger:W,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&Ye?Ye:void 0,refusals:te};O.push(Ue);try{await c({substitutions:O}),v(!1),ce(""),Xe(""),wt(""),Ke([]),I(null)}catch(be){console.error("Failed to save substitution:",be),alert("   .   .")}},[y,h,Je,Y,o,e,Ye,te,c]),ve=k.useCallback(async D=>{if(!y||!pe||!y.period||!y.shift||!y.teacherId){alert(":   .");return}const W=Y.filter(O=>O.classId===D&&O.day===pe&&O.period===y.period&&O.shift===y.shift);if(W.length===0){alert("    .");return}const $=o.filter(O=>!(O.scheduleItemId===y.scheduleItemId&&O.date===h));W.forEach(O=>{const Ue={id:Bn(),date:h,scheduleItemId:y.scheduleItemId,originalTeacherId:y.teacherId,replacementTeacherId:O.teacherId,replacementClassId:O.classId,replacementSubjectId:O.subjectId,isMerger:!0,replacementRoomId:O.roomId,lessonAbsenceReason:Ye||void 0};$.push(Ue)}),await c({substitutions:$}),v(!1),ce(""),Xe(""),wt(""),I(null),Z(!1)},[y,h,pe,Y,o,Ye,c]),oe=k.useCallback(async D=>{if(!y)return;const W=Y.find(H=>H.id===y.scheduleItemId),$=Y.find(H=>H.id===D);if(!W||!$){alert(":     .");return}const O=[...o];let Ue,be;Je?(Ue=Je,be=le?$.roomId:W.roomId):le?(Ue=W.roomId,be=$.roomId):(Ue=$.roomId,be=W.roomId);const we=O.findIndex(H=>H.scheduleItemId===W.id&&H.date===h),Be={id:we>=0?O[we].id:Bn(),date:h,scheduleItemId:W.id,originalTeacherId:W.teacherId,replacementTeacherId:W.teacherId,replacementClassId:$.classId,replacementSubjectId:$.subjectId,replacementRoomId:Ue!==W.roomId?Ue:void 0};we>=0?O[we]=Be:O.push(Be);const Pe=O.findIndex(H=>H.scheduleItemId===$.id&&H.date===h),Q={id:Pe>=0?O[Pe].id:Bn(),date:h,scheduleItemId:$.id,originalTeacherId:$.teacherId,replacementTeacherId:$.teacherId,replacementClassId:W.classId,replacementSubjectId:W.subjectId,replacementRoomId:be!==$.roomId?be:void 0};Pe>=0?O[Pe]=Q:O.push(Q),await c({substitutions:O}),v(!1),I(null),Xe(""),nt(!1),de(!1)},[y,Y,o,h,c,Je,le]),fe=k.useCallback(async D=>{const W=o.filter($=>!($.scheduleItemId===D&&$.date===h));await c({substitutions:W})},[o,h,c]),Te=k.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const W=o.some(O=>O.date===h&&O.replacementTeacherId!=="conducted"),$=(O,Ue)=>{const we=G.filter(Be=>Be.shift===Ue).filter(Be=>{const Pe=o.filter(Q=>Q.scheduleItemId===Be.id&&Q.date===h);return Pe.length>0&&Pe.some(Q=>Q.replacementTeacherId!=="conducted")});we.length>0&&(D+=`
 *${O.toUpperCase()}*
`,we.forEach(Be=>{var H;const Pe=o.filter(re=>re.scheduleItemId===Be.id&&re.date===h);if(Pe.some(re=>re.isMerger)){const re=r.find(Nt=>Nt.id===Be.classId),J=t.find(Nt=>Nt.id===Be.subjectId),se=e.find(Nt=>Nt.id===Be.teacherId),ne=(se==null?void 0:se.name)||"?",xe=Pe.map(Nt=>{var Yt;return(Yt=e.find(kr=>kr.id===Nt.replacementTeacherId))==null?void 0:Yt.name}).filter(Boolean).join(", "),ye=Pe[0],Me=ye!=null&&ye.replacementClassId?r.find(Nt=>Nt.id===ye.replacementClassId):null;let yt=` ${re==null?void 0:re.name} (${Be.period} ): ${J==null?void 0:J.name} -> ${xe} (${Me?`  ${Me.name}`:""}) ( ${ne})`;const st=ye==null?void 0:ye.replacementRoomId;if(st){const Nt=((H=n.find(Yt=>Yt.id===st))==null?void 0:H.name)||st;yt+=`  . ${Nt}`}D+=yt+`
`}else Pe.forEach(re=>{var Xs,sn,Js;if(re.replacementTeacherId==="conducted")return;const J=r.find(Zt=>Zt.id===Be.classId),se=t.find(Zt=>Zt.id===Be.subjectId),ne=e.find(Zt=>Zt.id===re.replacementTeacherId),xe=e.find(Zt=>Zt.id===Be.teacherId),ye=((Xs=n.find(Zt=>Zt.id===Be.roomId))==null?void 0:Xs.name)||Be.roomId||"?",Me=(sn=xe==null?void 0:xe.absenceReasons)==null?void 0:sn[h],yt=re==null?void 0:re.lessonAbsenceReason,Yt=(yt===" "?yt:null)||(Me===" "?Me:null),kr=(xe==null?void 0:xe.name)+(Yt?` (${Yt})`:""),Tt=re!=null&&re.replacementRoomId?((Js=n.find(Zt=>Zt.id===re.replacementRoomId))==null?void 0:Js.name)||re.replacementRoomId:null,jr=re!=null&&re.replacementClassId?r.find(Zt=>Zt.id===re.replacementClassId):null,Fn=re!=null&&re.replacementSubjectId?t.find(Zt=>Zt.id===re.replacementSubjectId):null,Zn=jr&&Fn&&!re.isMerger;if(re.replacementTeacherId==="cancelled")D+=` ${J==null?void 0:J.name} (${Be.period} ): ${se==null?void 0:se.name} (${kr}) ->  
`;else if(re.replacementTeacherId===re.originalTeacherId&&Tt&&!jr)D+=` ${J==null?void 0:J.name} (${Be.period} ): ${se==null?void 0:se.name} (${xe==null?void 0:xe.name}) ->  ${ye}  ${Tt}
`;else if(Zn)D+=` ${J==null?void 0:J.name} (${Be.period} ): ${se==null?void 0:se.name} ->  ${jr==null?void 0:jr.name} ${Fn==null?void 0:Fn.name} ( )${Tt?`  . ${Tt}`:""}
`;else{let Zt=` ${J==null?void 0:J.name} (${Be.period} ): ${se==null?void 0:se.name} -> ${ne==null?void 0:ne.name} ( ${kr})`;Tt&&(Zt+=`  . ${Tt}`),D+=Zt+`
`}})}),D+=`
`)};W?($(Ae.First,Ae.First),$(Ae.Second,Ae.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,o,G,r,t,e,n]),He=k.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(be=>be.date===h).forEach(be=>{var Me;const we=Y.find(yt=>yt.id===be.scheduleItemId);if(!we)return;let Be="Unknown";if(be.replacementTeacherId==="cancelled")Be=" ";else if(be.replacementTeacherId==="conducted")Be=" ";else{const yt=e.find(st=>st.id===be.replacementTeacherId);yt&&(Be=yt.name)}const Pe=t.find(yt=>yt.id===we.subjectId),Q=r.find(yt=>yt.id===we.classId),H=be.date.replace(/-/g,""),re=e.find(yt=>yt.id===be.originalTeacherId),J=(Me=re==null?void 0:re.absenceReasons)==null?void 0:Me[h],se=be.lessonAbsenceReason,ye=(se===" "?se:null)||(J===" "?J:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${H}
SUMMARY:: ${Q==null?void 0:Q.name} - ${Pe==null?void 0:Pe.name}
DESCRIPTION:: ${Be}${be.isMerger?" ()":""}${ye?` (: ${ye})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const $=new Blob([D],{type:"text/calendar"}),O=URL.createObjectURL($),Ue=document.createElement("a");Ue.href=O,Ue.download="substitutions.ics",document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue)},[h,o,Y,e,t,r]),Ce=k.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,W=!1;const $=new Set,O=[Ae.First,Ae.Second];for(const be of O){const Be=G.filter(Pe=>Pe.shift===be).filter(Pe=>o.some(Q=>Q.scheduleItemId===Pe.id&&Q.date===h&&Q.replacementTeacherId!=="conducted"));Be.length>0&&(W=!0,D+=` *${be.toUpperCase()}*
`,Be.forEach(Pe=>{var re;const Q=o.filter(J=>J.scheduleItemId===Pe.id&&J.date===h);if(Q.some(J=>J.isMerger)){const J=r.find(st=>st.id===Pe.classId),se=t.find(st=>st.id===Pe.subjectId),ne=e.find(st=>st.id===Pe.teacherId),xe=Q.map(st=>{var Nt;return(Nt=e.find(Yt=>Yt.id===st.replacementTeacherId))==null?void 0:Nt.name}).filter(Boolean).join(", "),ye=Q[0],Me=ye!=null&&ye.replacementClassId?r.find(st=>st.id===ye.replacementClassId):null;ne!=null&&ne.telegramChatId&&$.add(ne.telegramChatId),Q.forEach(st=>{const Nt=e.find(Yt=>Yt.id===st.replacementTeacherId);Nt!=null&&Nt.telegramChatId&&$.add(Nt.telegramChatId)});const yt=ye!=null&&ye.replacementRoomId?((re=n.find(st=>st.id===ye.replacementRoomId))==null?void 0:re.name)||ye.replacementRoomId:"";D+=`${Pe.period}  (${J==null?void 0:J.name} ${se==null?void 0:se.name}): *${xe}* (${Me?`  ${Me.name}`:""}). : ${yt}
`}else Q.forEach(J=>{var Js,Zt,gi;if(!J)return;const se=r.find(vr=>vr.id===Pe.classId),ne=t.find(vr=>vr.id===Pe.subjectId),xe=e.find(vr=>vr.id===J.originalTeacherId),ye=e.find(vr=>vr.id===J.replacementTeacherId),Me=(Js=xe==null?void 0:xe.absenceReasons)==null?void 0:Js[h],yt=J.lessonAbsenceReason,Yt=(yt===" "?yt:null)||(Me===" "?Me:null),kr=(xe==null?void 0:xe.name)+(Yt?` (${Yt})`:""),Tt=((Zt=n.find(vr=>vr.id===Pe.roomId))==null?void 0:Zt.name)||Pe.roomId||"",jr=J.replacementRoomId?((gi=n.find(vr=>vr.id===J.replacementRoomId))==null?void 0:gi.name)||J.replacementRoomId:Tt,Fn=J.replacementClassId?r.find(vr=>vr.id===J.replacementClassId):null,Zn=J.replacementSubjectId?t.find(vr=>vr.id===J.replacementSubjectId):null,Xs=Fn&&Zn&&!J.isMerger;let sn=`${Pe.period}  (${se==null?void 0:se.name} ${ne==null?void 0:ne.name}${Pe.direction?` ${Pe.direction}`:""}): `;J.replacementTeacherId==="cancelled"?sn+=`* * ( ${kr})`:Xs?(sn+=`  : ${Fn==null?void 0:Fn.name} ${Zn==null?void 0:Zn.name} ( ${se==null?void 0:se.name} ${ne==null?void 0:ne.name})`,jr!==Tt&&(sn+=`  . ${jr}`)):J.replacementTeacherId===J.originalTeacherId?sn+=`: ${kr}.  : ${Tt}  ${jr}`:(sn+=`*${ye==null?void 0:ye.name}* ( *${kr}*)`,Tt!==jr?sn+=`. : ${Tt}  ${jr}`:jr!==""&&(sn+=`. : ${jr}`)),D+=`${sn}
`,xe!=null&&xe.telegramChatId&&$.add(xe.telegramChatId),ye!=null&&ye.telegramChatId&&$.add(ye.telegramChatId)})}),D+=`
`)}if(W||(D+=` .
`),V.forEach(be=>{var Q;const we=o.some(H=>H.date===h&&H.originalTeacherId===be.id&&H.replacementTeacherId!=="cancelled"&&H.replacementTeacherId!=="conducted"),Be=(Q=be.absenceReasons)==null?void 0:Q[h],Pe=Be===" "?Be:"";be.telegramChatId&&!we&&be.unavailableDates.includes(h)&&($.add(be.telegramChatId),W?D+=`_:  ${be.name} ${Pe},        /._
`:D+=`_:  ${be.name} ${Pe},      ._
`)}),$.size===0){alert("    Telegram Chat ID   .");return}const Ue=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const be=Array.from($).map(we=>fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:we,text:D,parse_mode:"Markdown"})}));await Promise.all(be),alert(`   ${$.size} !`)}catch(be){console.error("    Telegram:",be),alert("     Telegram.     .")}},[h,G,o,r,t,e,n,V,s==null?void 0:s.telegramToken]),it=k.useCallback(async(D,W,$,O,Ue,be)=>{const Be=new Date(be).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),Pe=W.shift===Ae.First?"1 ":"2 ",Q=` *  *
${D.name}

 : ${Be}
 : ${Pe}
 : ${$==null?void 0:$.name}
1 : ${W.period}
 : ${O==null?void 0:O.name}
 : ${Ue||" "}`;if(s!=null&&s.telegramToken&&D.telegramChatId)try{const re=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:Q,parse_mode:"Markdown"})})).json();re.ok?alert(`   Telegram  ${D.name}!`):re.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${re.description}`)}catch(H){alert("   Telegram (/)."),console.error(H)}else navigator.share?navigator.share({title:"",text:Q}).catch(()=>{}):(navigator.clipboard.writeText(Q),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),Ze=k.useMemo(()=>y?new Set(o.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const W=Y.find($=>$.id===D.scheduleItemId);return W&&W.period===y.period&&W.shift===y.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[o,Y,h,y]),lt=k.useMemo(()=>{if(!y||!pe)return[];const D=h.substring(0,7);return e.filter(W=>W.name.toLowerCase().includes(Le.toLowerCase())).map(W=>{const $=W.unavailableDates.includes(h),O=Y.some(Q=>Q.teacherId===W.id&&Q.day===pe&&Q.period===y.period&&Q.shift===y.shift),Ue=Ze.has(W.id),be=O||Ue,we=W.subjectIds.includes(y.subjectId),Be=o.filter(Q=>Q.replacementTeacherId===W.id&&Q.date.startsWith(D)).length;let Pe=0;return $&&(Pe-=1e3),be&&(Pe-=100),we&&(Pe+=50),{teacher:W,isAbsent:$,isBusy:be,isSpecialist:we,score:Pe,subsCount:Be}}).sort((W,$)=>$.score-W.score)},[e,y,h,Le,pe,Y,o,Ze]),ke=k.useMemo(()=>{if(!y||!pe)return[];const D=Y.filter($=>$.day===pe&&$.period===y.period&&$.shift===y.shift&&$.classId!==y.classId),W=new Map;return D.forEach($=>{const O=r.find(we=>we.id===$.classId),Ue=e.find(we=>we.id===$.teacherId),be=t.find(we=>we.id===$.subjectId);if(O&&Ue){W.has(O.id)||W.set(O.id,{classEntity:O,teachers:[],subjects:[]});const we=W.get(O.id);we.teachers.includes(Ue.name)||we.teachers.push(Ue.name),be&&!we.subjects.includes(be.name)&&we.subjects.push(be.name)}}),Array.from(W.values())},[Y,y,pe,r,e,t]),me=k.useMemo(()=>{var be;if(!y)return null;const D=Y.find(we=>we.id===y.scheduleItemId);if(!D)return null;const W=r.find(we=>we.id===D.classId),$=t.find(we=>we.id===D.subjectId),O=e.find(we=>we.id===D.teacherId),Ue=((be=O==null?void 0:O.unavailableDates)==null?void 0:be.includes(h))||!1;return{className:W==null?void 0:W.name,subjectName:$==null?void 0:$.name,teacherName:O==null?void 0:O.name,teacherId:O==null?void 0:O.id,period:D.period,roomId:D.roomId,isTeacherAbsent:Ue}},[y,Y,r,t,e,h]),Ve=k.useMemo(()=>!(me!=null&&me.teacherId)||!pe?[]:Y.filter(D=>D.teacherId===me.teacherId&&D.day===pe&&D.id!==(y==null?void 0:y.scheduleItemId)).sort((D,W)=>D.period-W.period),[Y,me,pe,y]),ot=k.useMemo(()=>{if(!pe||Ee.length<2)return[];const D=Ee.toLowerCase(),W=e.filter(Ue=>Ue.name.toLowerCase().includes(D)),$=r.filter(Ue=>Ue.name.toLowerCase().includes(D)),O=[];return W.forEach(Ue=>{Y.filter(we=>we.teacherId===Ue.id&&we.day===pe).forEach(we=>{const Be=r.find(Q=>Q.id===we.classId),Pe=t.find(Q=>Q.id===we.subjectId);O.push({...we,entityName:Ue.name,subInfo:Be==null?void 0:Be.name,subjectName:Pe==null?void 0:Pe.name})})}),$.forEach(Ue=>{Y.filter(we=>we.classId===Ue.id&&we.day===pe).forEach(we=>{if(O.find(Q=>Q.id===we.id))return;const Be=e.find(Q=>Q.id===we.teacherId),Pe=t.find(Q=>Q.id===we.subjectId);O.push({...we,entityName:Ue.name,subInfo:Be==null?void 0:Be.name,subjectName:Pe==null?void 0:Pe.name})})}),O.sort((Ue,be)=>Ue.period-be.period)},[Ee,pe,e,r,Y,t]),_t=(D,W)=>{let $=!1;if(W){if(!window.confirm("     .     ?"))return;$=!0}Se(D,$)},Bt=(D,W)=>{W.stopPropagation(),te.includes(D)?Ke(te.filter($=>$!==D)):Ke([...te,D])};return l.jsxs("div",{className:"h-full flex flex-col gap-6",children:[l.jsx("div",{className:"flex flex-col gap-4",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]})]}),l.jsxs("div",{className:"flex md:hidden bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-full",children:[l.jsxs("button",{onClick:()=>X("lessons"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${L==="lessons"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:["  ",G.length>0&&`(${G.length})`]}),l.jsx("button",{onClick:()=>X("teachers"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${L==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]}),l.jsx("div",{className:"hidden md:block",children:l.jsxs("button",{onClick:()=>S(!_),className:`h-[50px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all mt-6 ${_?"bg-indigo-600 text-white border-indigo-600":"bg-slate-50 dark:bg-slate-700 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-600"}`,children:[l.jsx(K,{name:"History",size:18})," ",_?" ":""]})})]})})}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[l.jsxs("div",{className:`w-full md:w-80 flex-col gap-4 ${ue&&L!=="teachers"?"hidden":"flex"}`,children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("button",{onClick:()=>S(!_),className:`w-full py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all ${_?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-dark-800 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-700"}`,children:[l.jsx(K,{name:"History",size:18})," ",_?" ":"  "]})}),_?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:R,onChange:D=>P(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(D=>{var W;return D.date.includes(R)||((W=e.find($=>$.id===D.replacementTeacherId))==null?void 0:W.name.toLowerCase().includes(R.toLowerCase()))}).map(D=>{const W=e.find(O=>O.id===D.replacementTeacherId),$=n.find(O=>O.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[(W==null?void 0:W.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),$&&l.jsxs("div",{className:"text-indigo-500",children:[". ",$.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>at("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${qe==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>at(Ae.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${qe===Ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>at(Ae.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${qe===Ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:E,onChange:D=>We(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[ze.map(D=>{const W=D.unavailableDates.includes(h),$=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${W?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${W?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>W?he(D.id):ee(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${W?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:W?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(O=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:O===Ae.First?"1":"2"},O))}),W&&l.jsxs("div",{className:"flex items-center gap-1",children:[$&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:$}),l.jsx("button",{onClick:()=>ee(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(K,{name:"Edit2",size:14})})]})]})]},D.id)}),ze.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${ue&&L!=="lessons"?"hidden":"flex"}`,children:[l.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["   (",G.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 w-full xl:w-auto",children:[l.jsxs("button",{onClick:He,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-xs font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(K,{name:"Calendar",size:16})," iCal"]}),G.length>0&&l.jsxs("button",{onClick:Te,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-xs font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(K,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Ce,className:"px-3 py-2 bg-blue-500 text-white rounded-xl text-xs font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{Ne(""),F(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-xs font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(K,{name:"Search",size:16})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:G.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(K,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):G.map(D=>{var ye;const W=o.filter(Me=>Me.scheduleItemId===D.id&&Me.date===h),$=W.length>0,O=$?W[0]:null,Ue=O&&O.replacementTeacherId!=="cancelled"&&O.replacementTeacherId!=="conducted"?e.find(Me=>Me.id===O.replacementTeacherId):null,be=e.find(Me=>Me.id===D.teacherId),we=t.find(Me=>Me.id===D.subjectId),Be=r.find(Me=>Me.id===D.classId),Pe=n.find(Me=>Me.id===D.roomId),Q=Pe?Pe.name:D.roomId,H=O==null?void 0:O.replacementRoomId,re=H?((ye=n.find(Me=>Me.id===H))==null?void 0:ye.name)||H:void 0,J=O!=null&&O.replacementClassId?r.find(Me=>Me.id===O.replacementClassId):null,se=O!=null&&O.replacementSubjectId?t.find(Me=>Me.id===O.replacementSubjectId):null;let ne=null;if((O==null?void 0:O.replacementTeacherId)==="conducted")ne=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>fe(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(K,{name:"X",size:16})})]});else if((O==null?void 0:O.replacementTeacherId)==="cancelled")ne=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>fe(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(K,{name:"X",size:16})})]});else if($){const Me=(O==null?void 0:O.replacementTeacherId)===(O==null?void 0:O.originalTeacherId)&&H&&!J,yt=J&&se&&!(O!=null&&O.isMerger),st=W.map(Nt=>{var Yt;return(Yt=e.find(kr=>kr.id===Nt.replacementTeacherId))==null?void 0:Yt.name}).filter(Boolean).join(", ");ne=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl flex-1 justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Me?" ":yt?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm truncate",title:st,children:Me?"  ":yt?` ${J==null?void 0:J.name}`:st}),(O==null?void 0:O.isMerger)&&l.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",J?`(  ${J.name})`:""]}),(O==null?void 0:O.lessonAbsenceReason)&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",O.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1 shrink-0",children:[l.jsx("button",{onClick:()=>{(Ue||be)&&it(Ue||be,D,Be,we,re||Q||void 0,h)},className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(K,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>fe(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(K,{name:"UserX",size:18})})]})]})}else ne=l.jsxs("button",{onClick:()=>{I({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(K,{name:"ArrowRight",size:16})]});const xe=!V.find(Me=>Me.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:Be==null?void 0:Be.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===Ae.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:we==null?void 0:we.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:xe?"font-semibold":"line-through decoration-red-400 decoration-2",children:be==null?void 0:be.name}),Q&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Q," ",re&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",re]})]}),(O==null?void 0:O.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",O.lessonAbsenceReason,")"]}),J&&se&&!(O!=null&&O.isMerger)&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",J.name]})]})]})]}),l.jsx("div",{className:"w-full xl:w-auto mt-2 xl:mt-0",children:ne})]},D.id)})})]})]}),l.jsxs(Ln,{isOpen:m,onClose:()=>v(!1),title:" ",children:[me&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[me.className,"  ",me.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:me.subjectName}),l.jsx("span",{className:me.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:me.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:Je,onChange:D=>Xe(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),n.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),me&&!me.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:Ye,onChange:D=>wt(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Se("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Se("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>Z(!ct),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[l.jsx(K,{name:"Users",size:16})," :    (  )"]}),ct&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),ke.length===0?l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):ke.map(D=>l.jsxs("button",{onClick:()=>ve(D.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.classEntity.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D.subjects.join(", ")," ",l.jsx("span",{className:"text-slate-400",children:"|"})," ",D.teachers.join(", ")]})]},D.classEntity.id))]})]}),(me==null?void 0:me.teacherId)&&!me.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>me.teacherId&&Se(me.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),Ve.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>nt(!Ge),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx(K,{name:"RotateCw",size:16}),"     "]}),Ge&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:le,onChange:D=>de(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),Ve.map(D=>{const W=r.find(O=>O.id===D.classId),$=t.find(O=>O.id===D.subjectId);return l.jsxs("button",{onClick:()=>oe(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",W==null?void 0:W.name," - ",$==null?void 0:$.name]},D.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(K,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Le,onChange:D=>ce(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[lt.map(({teacher:D,isAbsent:W,isBusy:$,isSpecialist:O,subsCount:Ue})=>{const be=te.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${W?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":be?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":$?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${O?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:O?l.jsx(K,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[O&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),$&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),W&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),be&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${Ue>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Ue]})]})]})]}),!W&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:we=>Bt(D.id,we),className:`px-3 py-1 text-xs font-bold rounded border ${be?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:be?"":""}),!be&&!$&&l.jsx("button",{onClick:()=>_t(D.id,$),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!be&&$&&l.jsx("button",{onClick:()=>_t(D.id,$),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),lt.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(Ln,{isOpen:C,onClose:()=>F(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:Ee,onChange:D=>Ne(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[ot.map(D=>{var W;return l.jsxs("button",{onClick:()=>{F(!1),I({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((W=n.find($=>$.id===D.roomId))==null?void 0:W.name)||D.roomId]})]})]},D.id)}),Ee.length>1&&ot.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(Ln,{isOpen:b,onClose:()=>w(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:x,onChange:D=>B(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:et,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},S6=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=fs(),{schedule1:A,schedule2:i}=uo(),[a,o]=k.useState("teachers"),[c,d]=k.useState(Vy()),[h,f]=k.useState(Ae.First),[m,v]=k.useState(1),[y,I]=k.useState(Ae.First),[b,w]=k.useState(1),[C,F]=k.useState(""),[U,N]=k.useState(""),x=k.useMemo(()=>{const E={schedule:A,schedule2:i,settings:n};return OF(new Date(c),E)},[c,A,i,n]);k.useEffect(()=>{n&&(F(n.telegramToken||""),N(n.feedbackChatId||""))},[n]),k.useEffect(()=>{v(h===Ae.First?1:0)},[h]),k.useEffect(()=>{w(y===Ae.First?1:0)},[y]);const B=k.useMemo(()=>{const E=new Date(c).getDay();return E===0||E===6?null:Et[E-1]},[c]),_=on[h],S=k.useMemo(()=>B?e.filter(E=>E.shifts&&!E.shifts.includes(h)||E.unavailableDates.includes(c)?!1:!x.some(qe=>qe.teacherId===E.id&&qe.day===B&&qe.period>m&&qe.shift===h)).sort((E,We)=>E.name.localeCompare(We.name)):[],[e,c,B,m,h,x]),R=k.useMemo(()=>{if(!B)return[];const E=new Set;return x.forEach(qe=>{qe.day===B&&qe.period===b&&qe.shift===y&&qe.roomId&&E.add(qe.roomId)}),r.filter(qe=>!E.has(qe.id)).map(qe=>qe.name)},[x,r,B,b,y]),P=async()=>{await s({settings:{...n,telegramToken:C,feedbackChatId:U}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(K,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),a!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:E=>d(E.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),a==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(Ae.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===Ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(Ae.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===Ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:_.map(E=>l.jsx("button",{onClick:()=>v(E),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${m===E?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:E},E))})]})]}),a==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>I(Ae.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===Ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>I(Ae.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===Ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:on[y].map(E=>l.jsx("button",{onClick:()=>w(E),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${b===E?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:E},E))})]})]}),a==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:C,onChange:E=>F(E.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:U,onChange:E=>N(E.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:P,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Save",size:20}),"  "]})]})]}),a==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[S.map(E=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(K,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:E.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:E.subjectIds.slice(0,2).map(We=>{const qe=t.find(at=>at.id===We);return qe?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:qe.name},We):null})})]})]},E.id)),S.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",m,"   ",h]})]}),a==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[R.map(E=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(K,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:E}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},E)),R.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(K,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};var U6=Object.defineProperty,hf=Object.getOwnPropertySymbols,nS=Object.prototype.hasOwnProperty,sS=Object.prototype.propertyIsEnumerable,MC=(t,e,r)=>e in t?U6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q6=(t,e)=>{for(var r in e||(e={}))nS.call(e,r)&&MC(t,r,e[r]);if(hf)for(var r of hf(e))sS.call(e,r)&&MC(t,r,e[r]);return t},N6=(t,e)=>{var r={};for(var n in t)nS.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&hf)for(var n of hf(t))e.indexOf(n)<0&&sS.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ro;(t=>{const e=class{constructor(o,c,d,h){if(this.version=o,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const I=this.getPenaltyScore();I<v&&(h=y,v=I),this.applyMask(y)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(o,c){const d=t.QrSegment.makeSegments(o);return e.encodeSegments(d,c)}static encodeBinary(o,c){const d=t.QrSegment.makeBytes(o);return e.encodeSegments([d],c)}static encodeSegments(o,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,y;for(v=d;;v++){const C=e.getNumDataCodewords(v,c)*8,F=a.getTotalBits(o,v);if(F<=C){y=F;break}if(v>=h)throw new RangeError("Data too long")}for(const C of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&y<=e.getNumDataCodewords(v,C)*8&&(c=C);let I=[];for(const C of o){n(C.mode.modeBits,4,I),n(C.numChars,C.mode.numCharCountBits(v),I);for(const F of C.getData())I.push(F)}A(I.length==y);const b=e.getNumDataCodewords(v,c)*8;A(I.length<=b),n(0,Math.min(4,b-I.length),I),n(0,(8-I.length%8)%8,I),A(I.length%8==0);for(let C=236;I.length<b;C^=253)n(C,8,I);let w=[];for(;w.length*8<I.length;)w.push(0);return I.forEach((C,F)=>w[F>>>3]|=C<<7-(F&7)),new e(v,c,w,f)}getModule(o,c){return 0<=o&&o<this.size&&0<=c&&c<this.size&&this.modules[c][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),c=o.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(o[d],o[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const c=this.errorCorrectionLevel.formatBits<<3|o;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let d=0;d<12;d++)o=o<<1^(o>>>11)*7973;const c=this.version<<12|o;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(o,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=o+h,v=c+d;0<=m&&m<this.size&&0<=v&&v<this.size&&this.setFunctionModule(m,v,f!=2&&f!=4)}}drawAlignmentPattern(o,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(o+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(o,c,d){this.modules[c][o]=d,this.isFunction[c][o]=!0}addEccAndInterleave(o){const c=this.version,d=this.errorCorrectionLevel;if(o.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),v=h-m%h,y=Math.floor(m/h);let I=[];const b=e.reedSolomonComputeDivisor(f);for(let C=0,F=0;C<h;C++){let U=o.slice(F,F+y-f+(C<v?0:1));F+=U.length;const N=e.reedSolomonComputeRemainder(U,b);C<v&&U.push(0),I.push(U.concat(N))}let w=[];for(let C=0;C<I[0].length;C++)I.forEach((F,U)=>{(C!=y-f||U>=v)&&w.push(F[C])});return A(w.length==m),w}drawCodewords(o){if(o.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,y=(d+1&2)==0?this.size-1-h:h;!this.isFunction[y][m]&&c<o.length*8&&(this.modules[y][m]=s(o[c>>>3],7-(c&7)),c++)}}A(c==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(o){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let o=0;for(let f=0;f<this.size;f++){let m=!1,v=0,y=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[f][I]==m?(v++,v==5?o+=e.PENALTY_N1:v>5&&o++):(this.finderPenaltyAddHistory(v,y),m||(o+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[f][I],v=1);o+=this.finderPenaltyTerminateAndCount(m,v,y)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,v=0,y=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][f]==m?(v++,v==5?o+=e.PENALTY_N1:v>5&&o++):(this.finderPenaltyAddHistory(v,y),m||(o+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[I][f],v=1);o+=this.finderPenaltyTerminateAndCount(m,v,y)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const v=this.modules[f][m];v==this.modules[f][m+1]&&v==this.modules[f+1][m]&&v==this.modules[f+1][m+1]&&(o+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,v)=>m+(v?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),o+=h*e.PENALTY_N4,A(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let d=[6];for(let h=this.size-7;d.length<o;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(o){if(o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*o+128)*o+64;if(o>=2){const d=Math.floor(o/7)+2;c-=(25*d-10)*d-55,o>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(o,c){return Math.floor(e.getNumRawDataModules(o)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][o]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<o-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<o;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(o,c){let d=c.map(h=>0);for(const h of o){const f=h^d.shift();d.push(0),c.forEach((m,v)=>d[v]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(o,c){if(o>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*o;return A(d>>>8==0),d}finderPenaltyCountPatterns(o){const c=o[1];A(c<=this.size*3);const d=c>0&&o[2]==c&&o[3]==c*3&&o[4]==c&&o[5]==c;return(d&&o[0]>=c*4&&o[6]>=c?1:0)+(d&&o[6]>=c*4&&o[0]>=c?1:0)}finderPenaltyTerminateAndCount(o,c,d){return o&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(o,c){c[0]==0&&(o+=this.size),c.pop(),c.unshift(o)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(o,c,d){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(o>>>h&1)}function s(o,c){return(o>>>c&1)!=0}function A(o){if(!o)throw new Error("Assertion error")}const i=class{constructor(o,c,d){if(this.mode=o,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(o){let c=[];for(const d of o)n(d,8,c);return new i(i.Mode.BYTE,o.length,c)}static makeNumeric(o){if(!i.isNumeric(o))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<o.length;){const h=Math.min(o.length-d,3);n(parseInt(o.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,o.length,c)}static makeAlphanumeric(o){if(!i.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=o.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d+1)),n(h,11,c)}return d<o.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,o.length,c)}static makeSegments(o){return o==""?[]:i.isNumeric(o)?[i.makeNumeric(o)]:i.isAlphanumeric(o)?[i.makeAlphanumeric(o)]:[i.makeBytes(i.toUtf8ByteArray(o))]}static makeEci(o){let c=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,c);else if(o<16384)n(2,2,c),n(o,14,c);else if(o<1e6)n(6,3,c),n(o,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(o){return i.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return i.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,c){let d=0;for(const h of o){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(o){o=encodeURI(o);let c=[];for(let d=0;d<o.length;d++)o.charAt(d)!="%"?c.push(o.charCodeAt(d)):(c.push(parseInt(o.substr(d+1,2),16)),d+=2);return c}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(ro||(ro={}));(t=>{(e=>{const r=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(ro||(ro={}));(t=>{(e=>{const r=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(ro||(ro={}));var Kl=ro;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var R6={L:Kl.QrCode.Ecc.LOW,M:Kl.QrCode.Ecc.MEDIUM,Q:Kl.QrCode.Ecc.QUARTILE,H:Kl.QrCode.Ecc.HIGH},D6=128,P6="L",L6="#FFFFFF",j6="#000000",M6=!1,AS=4,O6=.1;function H6(t,e=0){const r=[];return t.forEach(function(n,s){let A=null;n.forEach(function(i,a){if(!i&&A!==null){r.push(`M${A+e} ${s+e}h${a-A}v1H${A+e}z`),A=null;return}if(a===n.length-1){if(!i)return;A===null?r.push(`M${a+e},${s+e} h1v1H${a+e}z`):r.push(`M${A+e},${s+e} h${a+1-A}v1H${A+e}z`);return}i&&A===null&&(A=a)})}),r.join("")}function V6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function K6(t,e,r,n){if(n==null)return null;const s=r?AS:0,A=t.length+s*2,i=Math.floor(e*O6),a=A/e,o=(n.width||i)*a,c=(n.height||i)*a,d=n.x==null?t.length/2-o/2:n.x*a,h=n.y==null?t.length/2-c/2:n.y*a;let f=null;if(n.excavate){let m=Math.floor(d),v=Math.floor(h),y=Math.ceil(o+d-m),I=Math.ceil(c+h-v);f={x:m,y:v,w:y,h:I}}return{x:d,y:h,h:c,w:o,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function G6(t){const e=t,{value:r,size:n=D6,level:s=P6,bgColor:A=L6,fgColor:i=j6,includeMargin:a=M6,imageSettings:o}=e,c=N6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Kl.QrCode.encodeText(r,R6[s]).getModules();const h=a?AS:0,f=d.length+h*2,m=K6(d,n,a,o);let v=null;o!=null&&m!=null&&(m.excavation!=null&&(d=V6(d,m.excavation)),v=bs.createElement("image",{xlinkHref:o.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const y=H6(d,h);return bs.createElement("svg",Q6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),bs.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),bs.createElement("path",{fill:i,d:y,shapeRendering:"crispEdges"}),v)}const z6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,saveStaticData:i,dutyZones:a}=fs(),{schedule1:o,schedule2:c,substitutions:d,saveScheduleData:h,dutySchedule:f}=uo(),m=k.useRef(null),v=k.useRef(null),y=k.useRef(null),[I,b]=k.useState(Vy()),[w,C]=k.useState(()=>Hy(new Date,s)),[F,U]=k.useState(!1),[N,x]=k.useState(!1),[B,_]=k.useState(""),[S,R]=k.useState(""),[P,E]=k.useState(!1),[We,qe]=k.useState(""),at=k.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,schedule:o,schedule2:c,substitutions:d,dutyZones:a,dutySchedule:f}),[t,e,r,n,s,A,o,c,d,a,f]),Le=()=>w===2?c:o,ce=V=>{const G=new Date(V).getMonth();return G>=0&&G<=4?c:o},Ee=k.useMemo(()=>{const V=new Set;return r.forEach(G=>{const ee=G.name.match(/^(\d+)/);ee&&V.add(ee[1])}),Array.from(V).sort((G,ee)=>parseInt(G)-parseInt(ee))},[r]);k.useEffect(()=>{Ee.length>0&&!We&&qe(Ee[0])},[Ee]);const Ne=V=>{var et;const G=(et=V.target.files)==null?void 0:et[0];if(!G)return;const ee=new FileReader;ee.onload=async he=>{var Se;try{const ve=JSON.parse((Se=he.target)==null?void 0:Se.result);if(ve.teachers&&(ve.schedule||ve.schedule2)){if(window.confirm("    . ?")){const oe={...en,...ve,rooms:ve.rooms||en.rooms,classes:ve.classes||[],schedule:ve.schedule||[],schedule2:ve.schedule2||[],teachers:ve.teachers||[],subjects:ve.subjects||[],substitutions:ve.substitutions||[],settings:{...en.settings,...ve.settings}};await i(oe),await h(oe),alert("  !")}}else alert("  .")}catch{alert("  .")}},ee.readAsText(G)},Je=()=>{const V=Le();let G=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Et.forEach(Se=>{G+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${Se}</td></tr>`,[Ae.First,Ae.Second].forEach(ve=>{const oe=r.filter(fe=>fe.shift===ve);oe.length!==0&&(G+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${ve}</td></tr>`,G+='<tr><th class="header"></th>',on[ve].forEach(fe=>G+=`<th class="header">${fe} </th>`),G+="</tr>",oe.forEach(fe=>{G+=`<tr><td class="class-cell">${fe.name}</td>`,on[ve].forEach(Te=>{const He=V.filter(Ce=>Ce.classId===fe.id&&Ce.day===Se&&Ce.shift===ve&&Ce.period===Te);G+='<td style="height: 60px;">',He.forEach(Ce=>{const it=t.find(me=>me.id===Ce.subjectId),Ze=e.find(me=>me.id===Ce.teacherId),lt=n.find(me=>me.id===Ce.roomId),ke=lt?lt.name:Ce.roomId;G+=`<div style="background-color: ${(it==null?void 0:it.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(it==null?void 0:it.name)||""} ${Ce.direction||""}</div>
                                <div class="meta">${(Ze==null?void 0:Ze.name)||""} ${ke?`(. ${ke})`:""}</div>
                            </div>`}),G+="</td>"}),G+="</tr>"}))})}),G+="</table></body></html>";const ee=new Blob([G],{type:"application/vnd.ms-excel"}),et=URL.createObjectURL(ee),he=document.createElement("a");he.href=et,he.download=`_22_${w}.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},Xe=()=>{const V=Le(),G={[ut.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ut.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ut.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ut.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ut.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ee+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[Ae.First,Ae.Second].forEach(ve=>{const oe=on[ve];ee+="<table>",ee+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${Et.length*oe.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,ee+="<tr>",Et.forEach(Te=>{var Ce;const He=((Ce=G[Te])==null?void 0:Ce.header)||"#f3f4f6";ee+=`<th colspan="${oe.length}" class="header" style="border: 2px solid #000; background-color: ${He};">${Te}</th>`}),ee+="</tr>",ee+="<tr>",Et.forEach(Te=>{var Ce;const He=((Ce=G[Te])==null?void 0:Ce.header)||"#f3f4f6";oe.forEach(it=>ee+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${He};"></th>`)}),ee+="</tr>";const fe="#e5e7eb";ee+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${fe};">${ve}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${fe};"></th>
            `,Et.forEach(Te=>{var Ce;const He=((Ce=G[Te])==null?void 0:Ce.header)||"#f3f4f6";oe.forEach(it=>ee+=`<th class="header" style="width: 40px; background-color: ${He};">${it}</th>`)}),ee+="</tr>",t.forEach(Te=>{const He=e.filter(Ce=>Ce.subjectIds.includes(Te.id)&&Ce.shifts.includes(ve));He.length!==0&&(He.forEach((Ce,it)=>{ee+="<tr>",it===0&&(ee+=`<td rowspan="${He.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Te.name}</td>`),ee+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${Ce.name}</td>`,Et.forEach(Ze=>{var ke;const lt=((ke=G[Ze])==null?void 0:ke.cell)||"#fff";oe.forEach(me=>{const Ve=V.find(ot=>ot.teacherId===Ce.id&&ot.subjectId===Te.id&&ot.day===Ze&&ot.period===me&&ot.shift===ve);if(Ve){const ot=r.find(O=>O.id===Ve.classId),_t=n.find(O=>O.id===Ve.roomId),Bt=_t?_t.name:Ve.roomId,D=Bt?`<sub>${Bt}</sub>`:"",W=Ve.direction?` <span style="font-size:10px">(${Ve.direction})</span>`:"";ee+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${lt};">${ot?ot.name:""}${W}${D}</td>`}else ee+=`<td style="border: 1px solid #000; background-color: ${lt};"></td>`})}),ee+="</tr>"}),ee+=`<tr><td colspan="${2+Et.length*oe.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),ee+="</table><br/><br/>"}),ee+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ee+="</body></html>";const et=new Blob([ee],{type:"application/vnd.ms-excel"}),he=URL.createObjectURL(et),Se=document.createElement("a");Se.href=he,Se.download=`__${w}.xls`,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)},Ye=()=>{const V=Le(),G={[ut.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ut.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ut.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ut.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ut.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ee+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[Ae.First,Ae.Second].forEach(ve=>{const oe=on[ve];ee+="<table>",ee+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${Et.length*oe.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,ee+="<tr>",Et.forEach(Te=>{var Ce;const He=((Ce=G[Te])==null?void 0:Ce.header)||"#f3f4f6";ee+=`<th colspan="${oe.length}" class="header" style="border: 3px solid #000; background-color: ${He}; font-size: 20pt;">${Te}</th>`}),ee+="</tr>",ee+="<tr>",Et.forEach(Te=>{var Ce;const He=((Ce=G[Te])==null?void 0:Ce.header)||"#f3f4f6";ee+=`<th colspan="${oe.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${He}; font-size: 16pt;"></th>`}),ee+="</tr>";const fe="#e5e7eb";ee+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${fe}; font-size: 24pt;">${ve}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${fe};"></th>
            `,Et.forEach(Te=>{var Ce;const He=((Ce=G[Te])==null?void 0:Ce.header)||"#f3f4f6";oe.forEach(it=>ee+=`<th class="header" style="width: 20px; background-color: ${He}; font-size: 16pt;">${it}</th>`)}),ee+="</tr>",t.forEach(Te=>{const He=e.filter(Ce=>Ce.subjectIds.includes(Te.id)&&Ce.shifts.includes(ve));He.length!==0&&(He.forEach((Ce,it)=>{ee+="<tr>",it===0&&(ee+=`<td rowspan="${He.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Te.name}</td>`),ee+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${Ce.name}</td>`,Et.forEach(Ze=>{var ke;const lt=((ke=G[Ze])==null?void 0:ke.cell)||"#fff";oe.forEach(me=>{const Ve=V.find(ot=>ot.teacherId===Ce.id&&ot.subjectId===Te.id&&ot.day===Ze&&ot.period===me&&ot.shift===ve);if(Ve){const ot=r.find($=>$.id===Ve.classId),_t=n.find($=>$.id===Ve.roomId),Bt=_t?_t.name:Ve.roomId,D=Bt?`<sub>${Bt}</sub>`:"",W=Ve.direction?` <span style="font-size:14px">(${Ve.direction})</span>`:"";ee+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${lt}; height: 60px;">${ot?ot.name:""}${W}${D}</td>`}else ee+=`<td style="border: 1px solid #000; background-color: ${lt};"></td>`})}),ee+="</tr>"}),ee+=`<tr><td colspan="${2+Et.length*oe.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),ee+="</table><br/><br/>"}),ee+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ee+="</body></html>";const et=new Blob([ee],{type:"application/vnd.ms-excel"}),he=URL.createObjectURL(et),Se=document.createElement("a");Se.href=he,Se.download=`__${w}.xls`,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)},wt=()=>{const V=Le(),G=r.filter(fe=>fe.name.startsWith(We)).sort((fe,Te)=>fe.name.localeCompare(Te.name)),ee=Array.from(new Set(G.map(fe=>fe.shift))).sort(),et={[ut.Monday]:{label:"#fecaca",cell:"#fee2e2"},[ut.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[ut.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[ut.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[ut.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let he=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;ee.forEach(fe=>{const Te=G.filter(Ce=>Ce.shift===fe),He=on[fe];Te.length!==0&&(he+="<table>",he+="<tr>",he+='<td style="border:none"></td>',he+='<td style="border:none"></td>',he+=`<td colspan="${Te.length}" class="shift-header">${fe}</td>`,he+="</tr>",he+="<tr>",he+='<td style="border:none"></td>',he+='<td style="border:none"></td>',Te.forEach(Ce=>{he+=`<td class="class-header">${Ce.name}</td>`}),he+="</tr>",Et.forEach(Ce=>{const it=et[Ce]||{label:"#e5e7eb",cell:"#f3f4f6"};He.forEach((Ze,lt)=>{he+="<tr>",lt===0&&(he+=`<td rowspan="${He.length}" class="day-cell" style="background-color: ${it.label};">${Ce.toUpperCase()}</td>`),he+=`<td class="period-cell" style="background-color: ${it.label};">${Ze}</td>`,Te.forEach(ke=>{const me=V.filter(Ve=>Ve.classId===ke.id&&Ve.day===Ce&&Ve.shift===fe&&Ve.period===Ze);he+=`<td class="content-cell" style="background-color: ${it.cell};">`,me.forEach((Ve,ot)=>{ot>0&&(he+='<br style="mso-data-placement:same-cell;">');const _t=t.find(W=>W.id===Ve.subjectId),Bt=n.find(W=>W.id===Ve.roomId),D=Bt?Bt.name:Ve.roomId||"";he+=`<span class="subject">${(_t==null?void 0:_t.name)||""}</span>`,D&&(he+=` <span class="room">${D}</span>`)}),he+="</td>"}),he+="</tr>"}),he+=`<tr><td colspan="${2+Te.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),he+="</table><br><br>")}),he+="</body></html>";const Se=new Blob([he],{type:"application/vnd.ms-excel"}),ve=URL.createObjectURL(Se),oe=document.createElement("a");oe.href=ve,oe.download=`__${We}_.xls`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},te=()=>{const V=new Date(I),G=V.getUTCMonth(),ee=V.getUTCFullYear(),et=d.filter(ke=>{const me=new Date(ke.date);return me.getUTCMonth()===G&&me.getUTCFullYear()===ee}).sort((ke,me)=>new Date(ke.date).getTime()-new Date(me.date).getTime());if(et.length===0){alert("      .");return}const he=new Map;et.forEach(ke=>{const me=`${ke.scheduleItemId}_${ke.date}`,Ve=he.get(me)||[];Ve.push(ke),he.set(me,Ve)});const Se=[],ve=[];he.forEach(ke=>{var $;const me=ke[0],Ve=o.find(O=>O.id===me.scheduleItemId)||c.find(O=>O.id===me.scheduleItemId);if(!Ve)return;const ot=r.find(O=>O.id===Ve.classId),_t=t.find(O=>O.id===Ve.subjectId),Bt=e.find(O=>O.id===me.originalTeacherId);let D=me.lessonAbsenceReason||(($=Bt==null?void 0:Bt.absenceReasons)==null?void 0:$[me.date])||"";me.replacementTeacherId===me.originalTeacherId&&me.replacementRoomId&&!me.replacementClassId&&(D=" "),me.replacementClassId&&me.replacementSubjectId&&!me.isMerger&&(D=" ");const W={subs:ke,scheduleItem:Ve,cls:ot,subj:_t,origTeacher:Bt,reason:D};D===" "?ve.push(W):Se.push(W)});let oe=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${V.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const fe=ke=>ke.map(me=>{const{subs:Ve,scheduleItem:ot,cls:_t,subj:Bt,origTeacher:D,reason:W}=me,$=Ve[0],O=new Date($.date).toLocaleDateString("ru-RU");let Ue="";if($.replacementTeacherId==="conducted")Ue=" ";else if($.replacementTeacherId==="cancelled")Ue=" ";else if(Ue=Ve.map(J=>{const se=e.find(ne=>ne.id===J.replacementTeacherId);return se?se.name:""}).join(", "),$.isMerger){let J=" ()";if($.replacementClassId){const se=r.find(ne=>ne.id===$.replacementClassId);se&&(J=` (  ${se.name})`)}Ue+=J}else if($.replacementClassId&&$.replacementSubjectId){const J=r.find(ne=>ne.id===$.replacementClassId),se=t.find(ne=>ne.id===$.replacementSubjectId);Ue+=` ( ${(J==null?void 0:J.name)||"?"} ${(se==null?void 0:se.name)||"?"})`}const be=ot.roomId,we=$.replacementRoomId,Be=we||be,Pe=n.find(re=>re.id===Be),Q=Pe?Pe.name:Be||"-",H=we?`${Q} ( .)`:Q;return`
                    <tr>
                        <td>${O}</td>
                        <td>${ot.period}</td>
                        <td>${ot.shift}</td>
                        <td>${(_t==null?void 0:_t.name)||"?"}</td>
                        <td>${(Bt==null?void 0:Bt.name)||"?"}</td>
                        <td>${(D==null?void 0:D.name)||"?"}</td>
                        <td>${Ue}</td>
                        <td>${H}</td>
                        <td>${W}</td>
                    </tr>
                `}).join(""),Te=(ke,me=!1)=>`
            <table>
            <thead>
                <tr class="${me?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${fe(ke)}
            </tbody>
            </table>
        `;Se.length>0?oe+=Te(Se):oe+="<p>     .</p>",ve.length>0&&(oe+="<br/><br/>",oe+='<h3 style="color: #b91c1c;">   (  )</h3>',oe+=Te(ve,!0));const He=new Map;et.forEach(ke=>{var Bt;if(ke.replacementTeacherId==="conducted"||ke.replacementTeacherId==="cancelled"||ke.replacementTeacherId===ke.originalTeacherId)return;const me=e.find(D=>D.id===ke.replacementTeacherId);if(!me)return;const Ve=He.get(me.id)||{name:me.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},ot=e.find(D=>D.id===ke.originalTeacherId);let _t=ke.lessonAbsenceReason||((Bt=ot==null?void 0:ot.absenceReasons)==null?void 0:Bt[ke.date])||"";ke.replacementClassId&&ke.replacementSubjectId&&!ke.isMerger&&(_t=" "),Ve.total++,ke.isMerger?Ve.merger++:_t===""?Ve.illness++:_t===" "?Ve.withoutRecord++:Ve.other++,He.set(me.id,Ve)});const Ce=Array.from(He.values()).sort((ke,me)=>ke.name.localeCompare(me.name));Ce.length>0&&(oe+="<br/><br/>",oe+="<h3>   </h3>",oe+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,Ce.forEach(ke=>{oe+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${ke.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ke.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ke.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ke.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ke.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ke.other}</td>
                     </tr>
                 `}),oe+="</tbody></table>"),oe+="</body></html>";const it=new Blob([oe],{type:"application/vnd.ms-excel"}),Ze=URL.createObjectURL(it),lt=document.createElement("a");lt.href=Ze,lt.download=`__${V.getMonth()+1}_${V.getFullYear()}.xls`,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt)},Ke=()=>{const V=new Date(I),G=V.getUTCMonth(),ee=V.getUTCFullYear(),et=d.filter(fe=>{const Te=new Date(fe.date),He=Te.getUTCMonth()===G&&Te.getUTCFullYear()===ee,Ce=fe.refusals&&fe.refusals.length>0;return He&&Ce}).sort((fe,Te)=>new Date(fe.date).getTime()-new Date(Te.date).getTime());if(et.length===0){alert("      .");return}let he=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${V.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;et.forEach(fe=>{const Te=o.find(me=>me.id===fe.scheduleItemId)||c.find(me=>me.id===fe.scheduleItemId);if(!Te)return;const He=new Date(fe.date).toLocaleDateString("ru-RU"),Ce=r.find(me=>me.id===Te.classId),it=t.find(me=>me.id===Te.subjectId),Ze=e.find(me=>me.id===fe.originalTeacherId);let lt="";if(fe.replacementTeacherId==="conducted")lt=" ";else if(fe.replacementTeacherId==="cancelled")lt=" ";else{const me=e.find(Ve=>Ve.id===fe.replacementTeacherId);lt=me?me.name:""}const ke=(fe.refusals||[]).map(me=>{const Ve=e.find(ot=>ot.id===me);return Ve?Ve.name:""}).join(", ");he+=`
                <tr>
                    <td>${He}</td>
                    <td>${Te.period}</td>
                    <td>${Te.shift}</td>
                    <td>${(Ce==null?void 0:Ce.name)||"?"}</td>
                    <td>${(it==null?void 0:it.name)||"?"}</td>
                    <td>${(Ze==null?void 0:Ze.name)||"?"}</td>
                    <td>${lt}</td>
                    <td>${ke}</td>
                </tr>
            `}),he+="</tbody></table></body></html>";const Se=new Blob([he],{type:"application/vnd.ms-excel"}),ve=URL.createObjectURL(Se),oe=document.createElement("a");oe.href=ve,oe.download=`__${V.getMonth()+1}_${V.getFullYear()}.xls`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},Ge=()=>{const V=Le();let G=`							
`;Et.forEach(ee=>{[Ae.First,Ae.Second].forEach(et=>{r.filter(Se=>Se.shift===et).forEach(Se=>{on[et].forEach(ve=>{V.filter(fe=>fe.classId===Se.id&&fe.day===ee&&fe.shift===et&&fe.period===ve).forEach(fe=>{const Te=t.find(Ze=>Ze.id===fe.subjectId),He=e.find(Ze=>Ze.id===fe.teacherId),Ce=n.find(Ze=>Ze.id===fe.roomId),it=Ce?Ce.name:fe.roomId||"";G+=`${ee}	${et}	${Se.name}	${ve}	${(Te==null?void 0:Te.name)||""}	${(He==null?void 0:He.name)||""}	${it}	${fe.direction||""}
`})})})})}),navigator.clipboard.writeText(G).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},nt=async()=>{U(!0);try{if(!v.current){alert("   1- .");return}const V=await df(v.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),G=document.createElement("a");G.href=V.toDataURL("image/png"),G.download=`_${I}_1.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}catch(V){console.error(V),alert("   ")}finally{U(!1)}},ct=async()=>{U(!0);try{if(!y.current){alert("   2- .");return}const V=await df(y.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),G=document.createElement("a");G.href=V.toDataURL("image/png"),G.download=`_${I}_2.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}catch(V){console.error(V),alert("   ")}finally{U(!1)}},Z=k.useMemo(()=>d.filter(V=>V.date===I),[d,I]),le=k.useMemo(()=>{const V=ce(I);return Z.filter(G=>{const ee=V.find(et=>et.id===G.scheduleItemId);return ee&&ee.shift===Ae.First}).filter(G=>G.replacementTeacherId!=="conducted").length>0},[Z,ce,I]),de=k.useMemo(()=>{const V=ce(I);return Z.filter(G=>{const ee=V.find(et=>et.id===G.scheduleItemId);return ee&&ee.shift===Ae.Second}).filter(G=>G.replacementTeacherId!=="conducted").length>0},[Z,ce,I]),ue=V=>{const G=ce(I),ee=Z.filter(he=>{const Se=G.find(ve=>ve.id===he.scheduleItemId);return Se&&Se.shift===V}).filter(he=>he.replacementTeacherId!=="conducted");if(ee.length===0)return null;const et=Array.from(new Set(ee.map(he=>he.scheduleItemId))).sort((he,Se)=>{const ve=G.find(fe=>fe.id===he),oe=G.find(fe=>fe.id===Se);return((ve==null?void 0:ve.period)??0)-((oe==null?void 0:oe.period)??0)});return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:V}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:et.map(he=>{var Ue,be,we;const Se=ee.filter(Be=>Be.scheduleItemId===he),ve=Se[0],oe=G.find(Be=>Be.id===he);if(!oe)return null;const fe=r.find(Be=>Be.id===oe.classId),Te=t.find(Be=>Be.id===oe.subjectId),He=e.find(Be=>Be.id===ve.originalTeacherId),Ce=ve.replacementRoomId,it=oe.roomId?n.find(Be=>Be.id===oe.roomId):null,Ze=it?it.name:oe.roomId||"",lt=Ce?n.find(Be=>Be.id===Ce):null,ke=lt?lt.name:Ce||"",me=ve.replacementTeacherId==="cancelled",Ve=(Ue=He==null?void 0:He.absenceReasons)==null?void 0:Ue[I],ot=ve.lessonAbsenceReason,_t=ot===" "?ot:Ve===" "?Ve:"",Bt=ve.replacementClassId?r.find(Be=>Be.id===ve.replacementClassId):null,D=ve.replacementSubjectId?t.find(Be=>Be.id===ve.replacementSubjectId):null,W=ve.replacementTeacherId===ve.originalTeacherId&&Ce&&!Bt,$=Bt&&D&&!ve.isMerger,O=ve.replacementTeacherId===ve.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:oe.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:fe==null?void 0:fe.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Te==null?void 0:Te.name}),oe.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:oe.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!O&&!W&&!$&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[He==null?void 0:He.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),_t&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:_t})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${me?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:W?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:He==null?void 0:He.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):$?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:He==null?void 0:He.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",Bt==null?void 0:Bt.name]})]}):me?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:Se.length>1||ve.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:Se.map(Be=>{const Pe=e.find(Q=>Q.id===Be.replacementTeacherId);return Pe?Pe.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",ve.replacementClassId?`(${(be=r.find(Be=>Be.id===ve.replacementClassId))==null?void 0:be.name})`:""]})]}):l.jsx("span",{children:(we=e.find(Be=>Be.id===ve.replacementTeacherId))==null?void 0:we.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Ce?"text-indigo-600":"text-slate-700"}`,children:Ce&&Ce!==oe.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Ze}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:ke})]}):l.jsx("span",{className:"text-xl",children:Ze})})]},String(he))})})]})]})},L=async()=>{const V=Bn();await Pt.setPublicData(V,at),await i({settings:{...s,publicScheduleId:V}});const G=`${window.location.origin}${window.location.pathname}#/public?id=${V}`;_(G),R(V),x(!0)},X=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await Pt.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),_(""),R(""))},Y=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(I).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),pe=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]}),ze=()=>{const V=Le(),G=r.filter(he=>he.name.startsWith(We)).sort((he,Se)=>he.name.localeCompare(Se.name)),ee=Array.from(new Set(G.map(he=>he.shift))).sort(),et={[ut.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[ut.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[ut.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[ut.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[ut.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return G.length===0?l.jsx("div",{className:"text-center p-10",children:"    "}):l.jsx("div",{className:"font-sans text-black",children:ee.map(he=>{const Se=G.filter(oe=>oe.shift===he),ve=on[he];return Se.length===0?null:l.jsx("div",{className:"mb-10 page-break-inside-avoid",children:l.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{colSpan:Se.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:he})]}),l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),Se.map(oe=>l.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:oe.name},String(oe.id)))]})]}),l.jsx("tbody",{children:Et.map(oe=>{const fe=et[oe]||{label:"bg-gray-200",cell:"bg-gray-100"};return l.jsxs(bs.Fragment,{children:[ve.map((Te,He)=>l.jsxs("tr",{children:[He===0&&l.jsx("td",{rowSpan:ve.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${fe.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:oe===ut.Monday?"":oe===ut.Tuesday?"":oe===ut.Wednesday?"":oe===ut.Thursday?"":oe===ut.Friday?"":oe}),l.jsx("td",{className:`border-2 border-black font-bold text-base ${fe.label}`,children:Te}),Se.map(Ce=>{const it=V.filter(Ze=>Ze.classId===Ce.id&&Ze.day===oe&&Ze.shift===he&&Ze.period===Te);return l.jsx("td",{className:`border-2 border-black p-1 h-12 ${fe.cell}`,children:it.map(Ze=>{const lt=t.find(Ve=>Ve.id===Ze.subjectId),ke=n.find(Ve=>Ve.id===Ze.roomId),me=ke?ke.name:Ze.roomId||"";return l.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[l.jsx("span",{children:lt==null?void 0:lt.name}),me&&l.jsx("span",{className:"font-black",children:me})]},String(Ze.id))})},String(Ce.id))})]},`${String(oe)}-${Te}`)),l.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:l.jsx("td",{colSpan:2+Se.length})})]},String(oe))})})]})},String(he))})})};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>Pt.exportJson(at),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(K,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:m,onChange:Ne,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var V;return(V=m.current)==null?void 0:V.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(K,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(K,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:I,onChange:V=>b(V.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:nt,disabled:F||!le,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:F?l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:ct,disabled:F||!de,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:F?l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(K,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:Z.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Y,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(pe,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[le&&l.jsxs("div",{ref:v,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Y,{}),ue(Ae.First),l.jsx(pe,{})]}),de&&l.jsxs("div",{ref:y,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Y,{}),ue(Ae.Second),l.jsx(pe,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsx("select",{value:We,onChange:V=>qe(V.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:Ee.map(V=>l.jsxs("option",{value:V,children:[V,"- "]},V))})]}),l.jsxs("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Printer",size:20}),"    "]}),l.jsxs("button",{onClick:wt,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:w,onChange:V=>C(Number(V.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:Je,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:Xe,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Ye,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Ge,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(K,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:te,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:Ke,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(K,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:X,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:L,disabled:F,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(K,{name:"Share2",size:20}),"  "]})]}),l.jsx(Ln,{isOpen:N,onClose:()=>x(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),B&&l.jsxs(l.Fragment,{children:[l.jsx(G6,{value:B,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:B}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(B),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(K,{name:"Copy",size:16}),"  "]})]})]})}),P&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",We,"- )"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[l.jsx(K,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:l.jsx(ze,{})})]})]})},$6=()=>{var b;const{subjects:t,teachers:e,classes:r}=fs(),{schedule1:n,schedule2:s,substitutions:A}=uo(),[i,a]=k.useState("load"),[o,c]=k.useState(((b=r[0])==null?void 0:b.id)||""),[d,h]=k.useState(()=>{const w=new Date().getMonth();return w>=0&&w<=4?2:1}),f=k.useMemo(()=>d===2?s:n,[d,n,s]),m=k.useMemo(()=>e.map(C=>{const F=f.filter(R=>R.teacherId===C.id),U=F.length,N=U*4,x=A.filter(R=>R.replacementTeacherId===C.id).length,B=A.filter(R=>R.originalTeacherId===C.id).length,_=N+x-B,S={};return F.forEach(R=>{const P=t.find(E=>E.id===R.subjectId);P&&(S[P.name]=(S[P.name]||0)+1)}),{id:C.id,name:C.name,weeklyHours:U,subsTaken:x,subsMissed:B,actualHours:_,subjectBreakdown:S}}).sort((C,F)=>F.actualHours-C.actualHours),[e,f,A,t]),v=k.useMemo(()=>o?Et.map(w=>{const F=f.filter(U=>U.classId===o&&U.day===w).reduce((U,N)=>{const x=t.find(B=>B.id===N.subjectId);return U+((x==null?void 0:x.difficulty)||5)},0);return{label:w,value:F}}):[],[f,t,o]),y=k.useMemo(()=>{const w=e.map(F=>({name:F.name,count:A.filter(U=>U.replacementTeacherId===F.id).length})).sort((F,U)=>U.count-F.count).slice(0,5),C=e.map(F=>({name:F.name,count:F.unavailableDates.length})).sort((F,U)=>U.count-F.count).slice(0,5);return{heroes:w,absentees:C}},[e,A]),I=()=>{let w="";i==="load"?w=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(U=>`"${U.name}",${U.weeklyHours},${U.subsTaken},${U.subsMissed},${U.actualHours},"${Object.entries(U.subjectBreakdown).map(([N,x])=>N+": "+x).join(", ")}"`).join(`
`):i==="sanpin"&&(w=`Day,Score
`+v.map(U=>`${U.label},${U.value}`).join(`
`));const C=new Blob([`\uFEFF${w}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(C),F.download=`report_${i}_${d}sem.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(K,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:w=>h(Number(w.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:I,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(K,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>a("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(w=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:w.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:w.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",w.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",w.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:w.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.subjectBreakdown).map(([C,F])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[C,": ",F]},C))})})]},w.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:w=>c(w.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))})]}),l.jsx(gp,{items:v,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(gp,{items:y.heroes.map(w=>({label:w.name,value:w.count})),max:Math.max(...y.heroes.map(w=>w.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(gp,{items:y.absentees.map(w=>({label:w.name,value:w.count})),max:Math.max(...y.absentees.map(w=>w.count),1),barClassName:"bg-red-500"})]})]})]})},W6=()=>{var ct;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=fs(),{dutySchedule:s,saveScheduleData:A,schedule1:i,schedule2:a}=uo(),o={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,d]=k.useState(()=>{const Z=new Date().getMonth();return Z>=0&&Z<=4?2:1}),[h,f]=k.useState(Ae.First),m=c===1?i:a,v=k.useRef(null),[y,I]=k.useState(!1),[b,w]=k.useState(!1),[C,F]=k.useState(null),[U,N]=k.useState({}),[x,B]=k.useState(""),[_,S]=k.useState(null),R=(Z,le,de)=>{const ue=s.find(L=>L.zoneId===Z&&L.day===le&&L.shift===de);return ue?t.find(L=>L.id===ue.teacherId):null},P=(Z,le,de,ue)=>ue?!!s.find(X=>X.teacherId===ue&&X.day===le&&X.shift===de&&X.zoneId!==Z):!1,E=(Z,le)=>{F({zoneId:Z,day:le});const de=R(Z,le,h);S((de==null?void 0:de.id)||null),I(!0)},We=async()=>{if(!C)return;let Z=[...s];Z=Z.filter(le=>!(le.zoneId===C.zoneId&&le.day===C.day&&le.shift===h)),_&&Z.push({id:Bn(),zoneId:C.zoneId,day:C.day,shift:h,teacherId:_}),await A({dutySchedule:Z}),I(!1),S(null)},qe=async()=>{if(!C)return;let Z=[...s];Z=Z.filter(le=>!(le.zoneId===C.zoneId&&le.day===C.day&&le.shift===h)),await A({dutySchedule:Z}),I(!1),S(null)},at=(Z,le)=>{if(!Z||!le.includedRooms)return!1;const de=Z.replace(/\D/g,"");return de&&le.includedRooms.includes(de)?!0:le.includedRooms.includes(Z)},Le=async()=>{if(!window.confirm("    . ?"))return;let Z=[];const le=[Ae.First,Ae.Second],de={};Et.forEach(ue=>de[ue]=new Set);for(const ue of Et)for(const L of le){const X=t.filter(Y=>m.filter(ze=>ze.teacherId===Y.id&&ze.day===ue&&ze.shift===L).length>=1);for(const Y of e){const pe=X.map(V=>{let G=0;de[ue].has(V.id)&&(G-=2e3);const ee=m.filter(he=>{var Se;return he.teacherId===V.id&&he.day===ue&&he.shift===L&&he.roomId&&at(((Se=r.find(ve=>ve.id===he.roomId))==null?void 0:Se.name)||he.roomId,Y)}).length;return ee===0?{teacher:V,score:-9999}:(G+=ee*10,m.filter(he=>he.teacherId===V.id&&he.day===ue&&he.shift===L).length>=4&&(G+=5),{teacher:V,score:G})});pe.sort((V,G)=>G.score-V.score);const ze=pe[0];ze&&ze.score>-500&&(Z.push({id:Bn(),zoneId:Y.id,day:ue,shift:L,teacherId:ze.teacher.id}),de[ue].add(ze.teacher.id))}}await A({dutySchedule:Z})},ce=async()=>{window.confirm("   (  )?")&&await A({dutySchedule:[]})},Ee=async()=>{if(!v.current)return;const Z=await df(v.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),le=document.createElement("a");le.href=Z.toDataURL("image/png"),le.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},Ne=()=>{const le=nt.length+1;let de=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8">
            <style>
                table { border-collapse: collapse; width: 100%; font-family: 'Times New Roman', serif; }
                td, th { border: 1px solid #000; padding: 6px; vertical-align: middle; text-align: center; font-size: 11pt; }
                .title-row td { border: none !important; font-weight: bold; text-align: center; }
                .title-main { font-size: 14pt; text-transform: uppercase; }
                .title-sub { font-size: 12pt; }
                .approval-cell { text-align: left; border: none !important; font-size: 11pt; line-height: 1.2; }
                .header-cell { background-color: #F3F4F6; font-weight: bold; border: 2px solid #000; }
                .floor-cell { background-color: #E5E7EB; font-weight: bold; text-transform: uppercase; font-size: 10pt; border: 2px solid #000; }
                .shift-header { font-size: 13pt; font-weight: bold; text-decoration: underline; border: none !important; text-align: center; padding: 20px 0 10px 0; }
                .day-label { font-weight: bold; background-color: #FAFAFA; text-align: left; border: 2px solid #000; }
                .footer-cell { border: none !important; font-weight: bold; text-align: left; padding-top: 30px; font-size: 11pt; }
                .empty-spacer { border: none !important; height: 15px; }
            </style>
            </head>
            <body>
        `;de+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,le-3)}" style="border:none"></td>
                    <td colspan="3" class="approval-cell">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-spacer"><td colspan="${le}" style="border:none"></td></tr>
                <tr class="title-row"><td colspan="${le}" class="title-main"> </td></tr>
                <tr class="title-row"><td colspan="${le}" class="title-sub">       22 . </td></tr>
                <tr class="title-row"><td colspan="${le}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-spacer"><td colspan="${le}" style="border:none"></td></tr>
            </table>
        `,[Ae.First,Ae.Second].forEach(Y=>{de+="<table>",de+=`<tr><td colspan="${le}" class="shift-header">${Y.toUpperCase()}</td></tr>`,de+="<tr>",de+='<th rowspan="2" class="header-cell" style="width: 120px;"> </th>',Ge.forEach(pe=>{de+=`<th colspan="${pe.zones.length}" class="floor-cell">${pe.floor}</th>`}),de+="</tr>",de+="<tr>",nt.forEach(pe=>{de+=`<th class="header-cell" style="width: 150px;">${pe.name}</th>`}),de+="</tr>",Et.forEach(pe=>{de+="<tr>",de+=`<td class="day-label">${pe}</td>`,nt.forEach(ze=>{const V=R(ze.id,pe,Y);de+=`<td>${V?V.name:"-"}</td>`}),de+="</tr>"}),de+="</table><br>"}),de+=`
            <table>
                <tr class="empty-spacer"><td colspan="${le}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${Math.floor(le/2)}" class="footer-cell">    22 .</td>
                    <td colspan="${Math.ceil(le/4)}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${Math.ceil(le/4)}" class="footer-cell" style="text-align: right;">..</td>
                </tr>
            </table>
        `,de+="</body></html>";const ue=new Blob([de],{type:"application/vnd.ms-excel"}),L=URL.createObjectURL(ue),X=document.createElement("a");X.href=L,X.download=`__${c}_.xls`,document.body.appendChild(X),X.click(),document.body.removeChild(X)},Je=async()=>{if(!U.name)return;const Z=x.split(",").map(ue=>ue.trim()).filter(Boolean),le={...U,includedRooms:Z};let de=[...e];U.id?de=de.map(ue=>ue.id===U.id?{...ue,...le}:ue):de.push({...le,id:Bn()}),await n({dutyZones:de}),w(!1)},Xe=async Z=>{if(!window.confirm(" ?"))return;const le=e.filter(de=>de.id!==Z);await n({dutyZones:le})},Ye=Z=>{var le;Z?(N(Z),B(((le=Z.includedRooms)==null?void 0:le.join(", "))||"")):(N({}),B("")),w(!0)},wt=()=>{if(!C)return{recommended:[],others:[]};const Z=C.day,le=e.find(X=>X.id===C.zoneId),de=t.map(X=>{const Y=m.filter(V=>V.teacherId===X.id&&V.day===Z&&V.shift===h).length,pe=s.some(V=>V.day===Z&&V.teacherId===X.id&&V.zoneId!==C.zoneId&&V.shift===h),ze=le&&le.includedRooms?m.filter(V=>{var G;return V.teacherId===X.id&&V.day===Z&&V.shift===h&&V.roomId&&at(((G=r.find(ee=>ee.id===V.roomId))==null?void 0:G.name)||V.roomId,le)}).length:0;return{t:X,lessonsCount:Y,isBusy:pe,lessonsInZone:ze}}),ue=de.filter(X=>X.lessonsInZone>0&&!X.isBusy).sort((X,Y)=>Y.lessonsInZone-X.lessonsInZone).map(X=>({value:X.t.id,label:`${X.t.name} (${X.lessonsInZone} .  )`})),L=de.filter(X=>(X.lessonsInZone===0||X.isBusy)&&X.lessonsCount>0).map(X=>({value:X.t.id,label:X.t.name+(X.isBusy?" ()":"")+(X.lessonsInZone===0?" (   )":"")}));return{recommended:ue,others:L}},{recommended:te,others:Ke}=wt(),Ge=k.useMemo(()=>{const Z={};return e.forEach(de=>{const ue=de.floor||" ";Z[ue]||(Z[ue]=[]),Z[ue].push(de)}),Object.keys(Z).sort().map(de=>({floor:de,zones:Z[de].sort((ue,L)=>(ue.order||0)-(L.order||0))}))},[e]),nt=k.useMemo(()=>Ge.flatMap(Z=>Z.zones),[Ge]);return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(K,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(Ae.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===Ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(Ae.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===Ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:c,onChange:Z=>d(Number(Z.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1-"}),l.jsx("option",{value:2,children:"2-"})]})]}),l.jsxs("button",{onClick:Le,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Zap",size:16})," "]}),l.jsx("button",{onClick:ce,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:l.jsx(K,{name:"Trash2",size:16})}),l.jsxs("button",{onClick:Ee,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"Image",size:16})," PNG"]}),l.jsxs("button",{onClick:Ne,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[l.jsx(K,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),l.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(Z=>l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[Z.name," ",l.jsxs("span",{className:"text-slate-400 text-xs",children:["(",Z.floor||"?",")"]})]}),l.jsx("button",{onClick:()=>Ye(Z),className:"text-slate-400 hover:text-indigo-600",children:l.jsx(K,{name:"Edit2",size:12})})]},Z.id)),l.jsxs("button",{onClick:()=>Ye(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[l.jsx(K,{name:"Plus",size:14})," "]})]}),l.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),Et.map(Z=>l.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:Z},Z))]})}),l.jsx("tbody",{children:e.map(Z=>{var le;return l.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[l.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[l.jsx("div",{children:Z.name}),l.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:Z.floor}),l.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(le=Z.includedRooms)==null?void 0:le.join(", ")})]}),Et.map(de=>{const ue=R(Z.id,de,h),L=ue?P(Z.id,de,h,ue.id):!1;return l.jsx("td",{onClick:()=>E(Z.id,de),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${ue?L?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:ue?l.jsxs("div",{className:`font-bold text-sm ${L?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[ue.name,L&&l.jsx("div",{className:"text-[9px] uppercase",children:""})]}):l.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${Z.id}-${de}`)})]},Z.id)})})]})})]}),l.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[l.jsx(K,{name:"Image",size:16}),"  "]}),l.jsx("div",{className:"overflow-auto custom-scrollbar",children:l.jsxs("div",{ref:v,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[l.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:o.approvalBlock},children:l.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[l.jsx("div",{className:"font-bold mb-1",children:""}),l.jsx("div",{children:" "}),l.jsx("div",{children:" "}),l.jsx("div",{children:"  22 . "}),l.jsxs("div",{className:"mt-8 flex items-end",children:[l.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:o.signatureLine}}),l.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),l.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:o.mainTitle},children:[l.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),l.jsx("h2",{className:"text-lg",children:"       22 . "}),l.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[Ae.First,Ae.Second].map((Z,le)=>l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:Z}),l.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:" "}),Ge.map(de=>l.jsx("th",{colSpan:de.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:de.floor},de.floor))]}),l.jsx("tr",{children:nt.map(de=>l.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:o.tableHeaders},children:de.name},de.id))})]}),l.jsx("tbody",{children:Et.map(de=>l.jsxs("tr",{children:[l.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:de}),nt.map(ue=>{const L=R(ue.id,de,Z);return l.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:L?L.name:"-"},ue.id)})]},de))})]})]},Z)),l.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:o.footerBlock},children:[l.jsx("div",{children:"    22 ."}),l.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:o.signatureLine}}),l.jsx("div",{children:".."})]})]})})]}),l.jsx(Ln,{isOpen:y,onClose:()=>I(!1),title:" ",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[C&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(ct=e.find(Z=>Z.id===C.zoneId))==null?void 0:ct.name}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[l.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:C.day}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:h})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx(th,{options:[{label:" (   )",options:te},{label:"",options:Ke}],value:_,onChange:Z=>S(String(Z)),placeholder:"   ",groupBy:!0})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[l.jsx("button",{onClick:qe,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),l.jsx("button",{onClick:We,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),l.jsx(Ln,{isOpen:b,onClose:()=>w(!1),title:U.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:U.name||"",onChange:Z=>N({...U,name:Z.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:U.floor||"",onChange:Z=>N({...U,floor:Z.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:x,onChange:Z=>B(Z.target.value)}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[U.id&&l.jsx("button",{onClick:()=>{Xe(U.id),w(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:Je,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},q6=()=>{const{setGuestRole:t,role:e,loading:r}=co(),n=Da(),[s,A]=k.useState("select"),[i,a]=k.useState(""),[o,c]=k.useState(""),[d,h]=k.useState(""),[f,m]=k.useState(!1);k.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher")&&n("/dashboard")},[e,r,n]);const v=async I=>{if(I.preventDefault(),h(""),m(!0),!xn){h("Firebase .  ."),m(!1);return}try{let b=i;s==="teacher"&&(b="teacher@gymnasium22.com"),await pM(xn,b,o)}catch(b){console.error("Firebase Auth Error:",b);const w=b==null?void 0:b.code;let C="   .";switch(w){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":C="   .";break;case"auth/invalid-email":C="  email.";break;case"auth/too-many-requests":C="  . .";break;default:C=" .  ."}h(C)}finally{m(!1)}},y=()=>{t(),n("/schedule")};return l.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),l.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),l.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10 bg-white/60 dark:bg-slate-800/60 border border-white/20 dark:border-slate-700 backdrop-blur-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:l.jsx(K,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:y,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(K,{name:"Users",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(K,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(K,{name:"BookOpen",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx(K,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(K,{name:"Settings",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx(K,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:v,className:"space-y-5 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(K,{name:"ArrowRight",className:"rotate-180",size:24})}),l.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"email",inputMode:"email",autoComplete:"email",value:i,onChange:I=>a(I.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(K,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",inputMode:"text",autoComplete:"current-password",value:o,onChange:I=>c(I.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),l.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?l.jsx(K,{name:"Loader",className:"animate-spin",size:20}):l.jsx(K,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},OC=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},HC=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},AA=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=co();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(K,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(Sh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Sh,{to:"/login",replace:!0})},X6=()=>{const{role:t,loading:e}=co();return e?null:t==="guest"?l.jsx(Sh,{to:"/schedule",replace:!0}):l.jsx(Sh,{to:"/dashboard",replace:!0})},J6=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(OC("theme")||"light"),[s,A]=k.useState(OC("new_year_mode")==="true"),{isLoading:i}=fs(),{logout:a,role:o,user:c}=co();if(YO({enabled:!0,threshold:50}),k.useEffect(()=>{const f=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),k.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),HC("theme",r)},[r]),k.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),HC("new_year_mode",String(s))},[s]),i)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(K,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(o||""));return l.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&l.jsx("div",{className:"snow-overlay no-print"}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 lg:w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none overflow-hidden`,children:l.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&l.jsx("div",{className:"bg-garland"}),l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[l.jsx(K,{name:"GraduationCap",size:24}),s&&l.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:h.map(f=>l.jsxs(bA,{to:f.to,onClick:()=>e(!1),className:({isActive:m})=>`
                                    group flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-semibold transition-all relative
                                    ${m?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-slate-700 dark:hover:text-slate-300"}
                                `,children:[l.jsx(K,{name:f.icon,size:18,className:"flex-shrink-0"}),l.jsx("span",{className:"flex-1 truncate",children:f.label})]},f.to))}),l.jsx("div",{className:"hidden lg:block mb-2",children:l.jsx(XO,{})}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between px-2",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),l.jsx("button",{onClick:a,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(K,{name:"LogOut",size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?l.jsx(K,{name:"Moon",size:18}):l.jsx(K,{name:"Sun",size:18})}),l.jsx("button",{onClick:()=>A(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:l.jsx(K,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&l.jsx("div",{className:"ml-auto text-xl",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:l.jsx(H2,{})}),l.jsx(JO,{onMenuClick:()=>e(!0),role:o})]})]})},Y6=()=>{const[t,e]=k.useState(null),[r,n]=k.useState(!0),[s]=AN(),A=s.get("id");return k.useEffect(()=>{A?(n(!0),Pt.getPublicData(A).then(i=>{const a={...en,...i,settings:{...en.settings,...i==null?void 0:i.settings}};e(a),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[A]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(K,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(VF,{initialData:t,children:l.jsx(zF,{children:l.jsx($F,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(K,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(ZF,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(K,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function Z6(){return l.jsx(GO,{children:l.jsx(HO,{children:l.jsx(VF,{children:l.jsx(zF,{children:l.jsx($F,{children:l.jsx(Z2,{children:l.jsxs(K2,{children:[l.jsx(An,{path:"/login",element:l.jsx(q6,{})}),l.jsxs(An,{path:"/",element:l.jsx(AA,{children:l.jsx(J6,{})}),children:[l.jsx(An,{index:!0,element:l.jsx(X6,{})}),l.jsx(An,{path:"dashboard",element:l.jsx(AA,{allowedRoles:["admin","teacher"],children:l.jsx(ZO,{})})}),l.jsx(An,{path:"schedule",element:l.jsx(VC,{semester:1})}),l.jsx(An,{path:"schedule2",element:l.jsx(VC,{semester:2})}),l.jsx(An,{path:"substitutions",element:l.jsx(AA,{allowedRoles:["admin"],children:l.jsx(k6,{})})}),l.jsx(An,{path:"duty",element:l.jsx(AA,{allowedRoles:["admin"],children:l.jsx(W6,{})})}),l.jsx(An,{path:"directory",element:l.jsx(AA,{allowedRoles:["admin"],children:l.jsx(F6,{})})}),l.jsx(An,{path:"admin",element:l.jsx(AA,{allowedRoles:["admin"],children:l.jsx(S6,{})})}),l.jsx(An,{path:"reports",element:l.jsx(AA,{allowedRoles:["admin"],children:l.jsx($6,{})})}),l.jsx(An,{path:"export",element:l.jsx(AA,{allowedRoles:["admin"],children:l.jsx(z6,{})})})]}),l.jsx(An,{path:"/public",element:l.jsx(Y6,{})})]})})})})})})})}const VC=({semester:t=1})=>{const{role:e}=co();return l.jsx(ZF,{readOnly:e!=="admin",semester:t})};Pp.createRoot(document.getElementById("root")).render(l.jsx(bs.StrictMode,{children:l.jsx(Z6,{})}));
