function _2(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(n,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=r(s);fetch(s.href,A)}})();function KC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var GC={exports:{}},mf={},zC={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc=Symbol.for("react.element"),I2=Symbol.for("react.portal"),E2=Symbol.for("react.fragment"),T2=Symbol.for("react.strict_mode"),k2=Symbol.for("react.profiler"),F2=Symbol.for("react.provider"),S2=Symbol.for("react.context"),U2=Symbol.for("react.forward_ref"),Q2=Symbol.for("react.suspense"),N2=Symbol.for("react.memo"),R2=Symbol.for("react.lazy"),Qy=Symbol.iterator;function D2(t){return t===null||typeof t!="object"?null:(t=Qy&&t[Qy]||t["@@iterator"],typeof t=="function"?t:null)}var $C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WC=Object.assign,qC={};function Na(t,e,r){this.props=t,this.context=e,this.refs=qC,this.updater=r||$C}Na.prototype.isReactComponent={};Na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XC(){}XC.prototype=Na.prototype;function j0(t,e,r){this.props=t,this.context=e,this.refs=qC,this.updater=r||$C}var P0=j0.prototype=new XC;P0.constructor=j0;WC(P0,Na.prototype);P0.isPureReactComponent=!0;var Ny=Array.isArray,JC=Object.prototype.hasOwnProperty,L0={current:null},YC={key:!0,ref:!0,__self:!0,__source:!0};function ZC(t,e,r){var n,s={},A=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)JC.call(e,n)&&!YC.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Jc,type:t,key:A,ref:i,props:s,_owner:L0.current}}function j2(t,e){return{$$typeof:Jc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function M0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jc}function P2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ry=/\/+/g;function Ug(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P2(""+t.key):e.toString(36)}function Qd(t,e,r,n,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Jc:case I2:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Ug(i,0):n,Ny(s)?(r="",t!=null&&(r=t.replace(Ry,"$&/")+"/"),Qd(s,e,r,"",function(c){return c})):s!=null&&(M0(s)&&(s=j2(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ry,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Ny(t))for(var l=0;l<t.length;l++){A=t[l];var a=n+Ug(A,l);i+=Qd(A,e,r,a,s)}else if(a=D2(t),typeof a=="function")for(t=a.call(t),l=0;!(A=t.next()).done;)A=A.value,a=n+Ug(A,l++),i+=Qd(A,e,r,a,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ju(t,e,r){if(t==null)return t;var n=[],s=0;return Qd(t,n,"","",function(A){return e.call(r,A,s++)}),n}function L2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},Nd={transition:null},M2={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Nd,ReactCurrentOwner:L0};function e_(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:ju,forEach:function(t,e,r){ju(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ju(t,function(){e++}),e},toArray:function(t){return ju(t,function(e){return e})||[]},only:function(t){if(!M0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};gt.Component=Na;gt.Fragment=E2;gt.Profiler=k2;gt.PureComponent=j0;gt.StrictMode=T2;gt.Suspense=Q2;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M2;gt.act=e_;gt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=WC({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=L0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)JC.call(e,a)&&!YC.hasOwnProperty(a)&&(n[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Jc,type:t.type,key:s,ref:A,props:n,_owner:i}};gt.createContext=function(t){return t={$$typeof:S2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:F2,_context:t},t.Consumer=t};gt.createElement=ZC;gt.createFactory=function(t){var e=ZC.bind(null,t);return e.type=t,e};gt.createRef=function(){return{current:null}};gt.forwardRef=function(t){return{$$typeof:U2,render:t}};gt.isValidElement=M0;gt.lazy=function(t){return{$$typeof:R2,_payload:{_status:-1,_result:t},_init:L2}};gt.memo=function(t,e){return{$$typeof:N2,type:t,compare:e===void 0?null:e}};gt.startTransition=function(t){var e=Nd.transition;Nd.transition={};try{t()}finally{Nd.transition=e}};gt.unstable_act=e_;gt.useCallback=function(t,e){return sn.current.useCallback(t,e)};gt.useContext=function(t){return sn.current.useContext(t)};gt.useDebugValue=function(){};gt.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};gt.useEffect=function(t,e){return sn.current.useEffect(t,e)};gt.useId=function(){return sn.current.useId()};gt.useImperativeHandle=function(t,e,r){return sn.current.useImperativeHandle(t,e,r)};gt.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};gt.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};gt.useMemo=function(t,e){return sn.current.useMemo(t,e)};gt.useReducer=function(t,e,r){return sn.current.useReducer(t,e,r)};gt.useRef=function(t){return sn.current.useRef(t)};gt.useState=function(t){return sn.current.useState(t)};gt.useSyncExternalStore=function(t,e,r){return sn.current.useSyncExternalStore(t,e,r)};gt.useTransition=function(){return sn.current.useTransition()};gt.version="18.3.1";zC.exports=gt;var T=zC.exports;const Is=KC(T),O2=_2({__proto__:null,default:Is},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2=T,V2=Symbol.for("react.element"),K2=Symbol.for("react.fragment"),G2=Object.prototype.hasOwnProperty,z2=H2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$2={key:!0,ref:!0,__self:!0,__source:!0};function t_(t,e,r){var n,s={},A=null,i=null;r!==void 0&&(A=""+r),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)G2.call(e,n)&&!$2.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:V2,type:t,key:A,ref:i,props:s,_owner:z2.current}}mf.Fragment=K2;mf.jsx=t_;mf.jsxs=t_;GC.exports=mf;var o=GC.exports,Mp={},r_={exports:{}},Tn={},n_={exports:{}},s_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(se,Ce){var Ne=se.length;se.push(Ce);e:for(;0<Ne;){var Ye=Ne-1>>>1,We=se[Ye];if(0<s(We,Ce))se[Ye]=Ce,se[Ne]=We,Ne=Ye;else break e}}function r(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var Ce=se[0],Ne=se.pop();if(Ne!==Ce){se[0]=Ne;e:for(var Ye=0,We=se.length,G=We>>>1;Ye<G;){var he=2*(Ye+1)-1,$e=se[he],Re=he+1,X=se[Re];if(0>s($e,Ne))Re<We&&0>s(X,$e)?(se[Ye]=X,se[Re]=Ne,Ye=Re):(se[Ye]=$e,se[he]=Ne,Ye=he);else if(Re<We&&0>s(X,Ne))se[Ye]=X,se[Re]=Ne,Ye=Re;else break e}}return Ce}function s(se,Ce){var Ne=se.sortIndex-Ce.sortIndex;return Ne!==0?Ne:se.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var a=[],c=[],d=1,h=null,f=3,m=!1,y=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(se){for(var Ce=r(c);Ce!==null;){if(Ce.callback===null)n(c);else if(Ce.startTime<=se)n(c),Ce.sortIndex=Ce.expirationTime,e(a,Ce);else break;Ce=r(c)}}function S(se){if(w=!1,_(se),!y)if(r(a)!==null)y=!0,At(U);else{var Ce=r(c);Ce!==null&&Je(S,Ce.startTime-se)}}function U(se,Ce){y=!1,w&&(w=!1,C(b),b=-1),m=!0;var Ne=f;try{for(_(Ce),h=r(a);h!==null&&(!(h.expirationTime>Ce)||se&&!D());){var Ye=h.callback;if(typeof Ye=="function"){h.callback=null,f=h.priorityLevel;var We=Ye(h.expirationTime<=Ce);Ce=t.unstable_now(),typeof We=="function"?h.callback=We:h===r(a)&&n(a),_(Ce)}else n(a);h=r(a)}if(h!==null)var G=!0;else{var he=r(c);he!==null&&Je(S,he.startTime-Ce),G=!1}return G}finally{h=null,f=Ne,m=!1}}var N=!1,v=null,b=-1,B=5,F=-1;function D(){return!(t.unstable_now()-F<B)}function P(){if(v!==null){var se=t.unstable_now();F=se;var Ce=!0;try{Ce=v(!0,se)}finally{Ce?I():(N=!1,v=null)}}else N=!1}var I;if(typeof x=="function")I=function(){x(P)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Le=ze.port2;ze.port1.onmessage=P,I=function(){Le.postMessage(null)}}else I=function(){E(P,0)};function At(se){v=se,N||(N=!0,I())}function Je(se,Ce){b=E(function(){se(t.unstable_now())},Ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,At(U))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(a)},t.unstable_next=function(se){switch(f){case 1:case 2:case 3:var Ce=3;break;default:Ce=f}var Ne=f;f=Ce;try{return se()}finally{f=Ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,Ce){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Ne=f;f=se;try{return Ce()}finally{f=Ne}},t.unstable_scheduleCallback=function(se,Ce,Ne){var Ye=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Ye+Ne:Ye):Ne=Ye,se){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=Ne+We,se={id:d++,callback:Ce,priorityLevel:se,startTime:Ne,expirationTime:We,sortIndex:-1},Ne>Ye?(se.sortIndex=Ne,e(c,se),r(a)===null&&se===r(c)&&(w?(C(b),b=-1):w=!0,Je(S,Ne-Ye))):(se.sortIndex=We,e(a,se),y||m||(y=!0,At(U))),se},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(se){var Ce=f;return function(){var Ne=f;f=Ce;try{return se.apply(this,arguments)}finally{f=Ne}}}})(s_);n_.exports=s_;var W2=n_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2=T,_n=W2;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A_=new Set,fc={};function io(t,e){aa(t,e),aa(t+"Capture",e)}function aa(t,e){for(fc[t]=e,t=0;t<e.length;t++)A_.add(e[t])}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Op=Object.prototype.hasOwnProperty,X2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dy={},jy={};function J2(t){return Op.call(jy,t)?!0:Op.call(Dy,t)?!1:X2.test(t)?jy[t]=!0:(Dy[t]=!0,!1)}function Y2(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Z2(t,e,r,n){if(e===null||typeof e>"u"||Y2(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,r,n,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pr[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pr[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pr[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pr[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pr[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pr[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pr[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pr[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pr[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var O0=/[\-:]([a-z])/g;function H0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(O0,H0);Pr[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(O0,H0);Pr[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(O0,H0);Pr[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pr[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pr[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function V0(t,e,r,n){var s=Pr.hasOwnProperty(e)?Pr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Z2(e,r,s,n)&&(r=null),n||s===null?J2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Gs=q2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pu=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),K0=Symbol.for("react.strict_mode"),Hp=Symbol.for("react.profiler"),i_=Symbol.for("react.provider"),o_=Symbol.for("react.context"),G0=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Kp=Symbol.for("react.suspense_list"),z0=Symbol.for("react.memo"),cA=Symbol.for("react.lazy"),a_=Symbol.for("react.offscreen"),Py=Symbol.iterator;function al(t){return t===null||typeof t!="object"?null:(t=Py&&t[Py]||t["@@iterator"],typeof t=="function"?t:null)}var rr=Object.assign,Qg;function Tl(t){if(Qg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Qg=e&&e[1]||""}return`
`+Qg+t}var Ng=!1;function Rg(t,e){if(!t||Ng)return"";Ng=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=n.stack.split(`
`),i=s.length-1,l=A.length-1;1<=i&&0<=l&&s[i]!==A[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==A[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==A[l]){var a=`
`+s[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=l);break}}}finally{Ng=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Tl(t):""}function eS(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=Rg(t.type,!1),t;case 11:return t=Rg(t.type.render,!1),t;case 1:return t=Rg(t.type,!0),t;default:return""}}function Gp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Do:return"Fragment";case Ro:return"Portal";case Hp:return"Profiler";case K0:return"StrictMode";case Vp:return"Suspense";case Kp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o_:return(t.displayName||"Context")+".Consumer";case i_:return(t._context.displayName||"Context")+".Provider";case G0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z0:return e=t.displayName||null,e!==null?e:Gp(t.type)||"Memo";case cA:e=t._payload,t=t._init;try{return Gp(t(e))}catch{}}return null}function tS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gp(e);case 8:return e===K0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function GA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rS(t){var e=l_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,A=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lu(t){t._valueTracker||(t._valueTracker=rS(t))}function c_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=l_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function lh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zp(t,e){var r=e.checked;return rr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ly(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=GA(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function u_(t,e){e=e.checked,e!=null&&V0(t,"checked",e,!1)}function $p(t,e){u_(t,e);var r=GA(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Wp(t,e.type,GA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function My(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Wp(t,e,r){(e!=="number"||lh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var kl=Array.isArray;function Xo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+GA(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return rr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Oy(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(pe(92));if(kl(r)){if(1<r.length)throw Error(pe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:GA(r)}}function d_(t,e){var r=GA(e.value),n=GA(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Hy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function h_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?h_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mu,f_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mu=Mu||document.createElement("div"),Mu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var zl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nS=["Webkit","ms","Moz","O"];Object.keys(zl).forEach(function(t){nS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zl[e]=zl[t]})});function g_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||zl.hasOwnProperty(t)&&zl[t]?(""+e).trim():e+"px"}function p_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=g_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var sS=rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jp(t,e){if(e){if(sS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function Yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zp=null;function $0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var em=null,Jo=null,Yo=null;function Vy(t){if(t=eu(t)){if(typeof em!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=Bf(e),em(t.stateNode,t.type,e))}}function m_(t){Jo?Yo?Yo.push(t):Yo=[t]:Jo=t}function w_(){if(Jo){var t=Jo,e=Yo;if(Yo=Jo=null,Vy(t),e)for(t=0;t<e.length;t++)Vy(e[t])}}function x_(t,e){return t(e)}function y_(){}var Dg=!1;function v_(t,e,r){if(Dg)return t(e,r);Dg=!0;try{return x_(t,e,r)}finally{Dg=!1,(Jo!==null||Yo!==null)&&(y_(),w_())}}function pc(t,e){var r=t.stateNode;if(r===null)return null;var n=Bf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(pe(231,e,typeof r));return r}var tm=!1;if(Ds)try{var ll={};Object.defineProperty(ll,"passive",{get:function(){tm=!0}}),window.addEventListener("test",ll,ll),window.removeEventListener("test",ll,ll)}catch{tm=!1}function AS(t,e,r,n,s,A,i,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var $l=!1,ch=null,uh=!1,rm=null,iS={onError:function(t){$l=!0,ch=t}};function oS(t,e,r,n,s,A,i,l,a){$l=!1,ch=null,AS.apply(iS,arguments)}function aS(t,e,r,n,s,A,i,l,a){if(oS.apply(this,arguments),$l){if($l){var c=ch;$l=!1,ch=null}else throw Error(pe(198));uh||(uh=!0,rm=c)}}function oo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function B_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ky(t){if(oo(t)!==t)throw Error(pe(188))}function lS(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var A=s.alternate;if(A===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===r)return Ky(s),t;if(A===n)return Ky(s),e;A=A.sibling}throw Error(pe(188))}if(r.return!==n.return)r=s,n=A;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=A;break}if(l===n){i=!0,n=s,r=A;break}l=l.sibling}if(!i){for(l=A.child;l;){if(l===r){i=!0,r=A,n=s;break}if(l===n){i=!0,n=A,r=s;break}l=l.sibling}if(!i)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?t:e}function b_(t){return t=lS(t),t!==null?C_(t):null}function C_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C_(t);if(e!==null)return e;t=t.sibling}return null}var __=_n.unstable_scheduleCallback,Gy=_n.unstable_cancelCallback,cS=_n.unstable_shouldYield,uS=_n.unstable_requestPaint,lr=_n.unstable_now,dS=_n.unstable_getCurrentPriorityLevel,W0=_n.unstable_ImmediatePriority,I_=_n.unstable_UserBlockingPriority,dh=_n.unstable_NormalPriority,hS=_n.unstable_LowPriority,E_=_n.unstable_IdlePriority,wf=null,cs=null;function fS(t){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(wf,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:mS,gS=Math.log,pS=Math.LN2;function mS(t){return t>>>=0,t===0?32:31-(gS(t)/pS|0)|0}var Ou=64,Hu=4194304;function Fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,A=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=Fl(l):(A&=i,A!==0&&(n=Fl(A)))}else i=r&~s,i!==0?n=Fl(i):A!==0&&(n=Fl(A));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Xn(e),s=1<<r,n|=t[r],e&=~s;return n}function wS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-Xn(A),l=1<<i,a=s[i];a===-1?(!(l&r)||l&n)&&(s[i]=wS(l,e)):a<=e&&(t.expiredLanes|=l),A&=~l}}function nm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T_(){var t=Ou;return Ou<<=1,!(Ou&4194240)&&(Ou=64),t}function jg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Yc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=r}function yS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Xn(r),A=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~A}}function q0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Xn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var kt=0;function k_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var F_,X0,S_,U_,Q_,sm=!1,Vu=[],FA=null,SA=null,UA=null,mc=new Map,wc=new Map,hA=[],vS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zy(t,e){switch(t){case"focusin":case"focusout":FA=null;break;case"dragenter":case"dragleave":SA=null;break;case"mouseover":case"mouseout":UA=null;break;case"pointerover":case"pointerout":mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(e.pointerId)}}function cl(t,e,r,n,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:A,targetContainers:[s]},e!==null&&(e=eu(e),e!==null&&X0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BS(t,e,r,n,s){switch(e){case"focusin":return FA=cl(FA,t,e,r,n,s),!0;case"dragenter":return SA=cl(SA,t,e,r,n,s),!0;case"mouseover":return UA=cl(UA,t,e,r,n,s),!0;case"pointerover":var A=s.pointerId;return mc.set(A,cl(mc.get(A)||null,t,e,r,n,s)),!0;case"gotpointercapture":return A=s.pointerId,wc.set(A,cl(wc.get(A)||null,t,e,r,n,s)),!0}return!1}function N_(t){var e=Qi(t.target);if(e!==null){var r=oo(e);if(r!==null){if(e=r.tag,e===13){if(e=B_(r),e!==null){t.blockedOn=e,Q_(t.priority,function(){S_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Am(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Zp=n,r.target.dispatchEvent(n),Zp=null}else return e=eu(r),e!==null&&X0(e),t.blockedOn=r,!1;e.shift()}return!0}function $y(t,e,r){Rd(t)&&r.delete(e)}function bS(){sm=!1,FA!==null&&Rd(FA)&&(FA=null),SA!==null&&Rd(SA)&&(SA=null),UA!==null&&Rd(UA)&&(UA=null),mc.forEach($y),wc.forEach($y)}function ul(t,e){t.blockedOn===e&&(t.blockedOn=null,sm||(sm=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,bS)))}function xc(t){function e(s){return ul(s,t)}if(0<Vu.length){ul(Vu[0],t);for(var r=1;r<Vu.length;r++){var n=Vu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(FA!==null&&ul(FA,t),SA!==null&&ul(SA,t),UA!==null&&ul(UA,t),mc.forEach(e),wc.forEach(e),r=0;r<hA.length;r++)n=hA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<hA.length&&(r=hA[0],r.blockedOn===null);)N_(r),r.blockedOn===null&&hA.shift()}var Zo=Gs.ReactCurrentBatchConfig,fh=!0;function CS(t,e,r,n){var s=kt,A=Zo.transition;Zo.transition=null;try{kt=1,J0(t,e,r,n)}finally{kt=s,Zo.transition=A}}function _S(t,e,r,n){var s=kt,A=Zo.transition;Zo.transition=null;try{kt=4,J0(t,e,r,n)}finally{kt=s,Zo.transition=A}}function J0(t,e,r,n){if(fh){var s=Am(t,e,r,n);if(s===null)$g(t,e,n,gh,r),zy(t,n);else if(BS(s,t,e,r,n))n.stopPropagation();else if(zy(t,n),e&4&&-1<vS.indexOf(t)){for(;s!==null;){var A=eu(s);if(A!==null&&F_(A),A=Am(t,e,r,n),A===null&&$g(t,e,n,gh,r),A===s)break;s=A}s!==null&&n.stopPropagation()}else $g(t,e,n,null,r)}}var gh=null;function Am(t,e,r,n){if(gh=null,t=$0(n),t=Qi(t),t!==null)if(e=oo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=B_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gh=t,null}function R_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dS()){case W0:return 1;case I_:return 4;case dh:case hS:return 16;case E_:return 536870912;default:return 16}default:return 16}}var BA=null,Y0=null,Dd=null;function D_(){if(Dd)return Dd;var t,e=Y0,r=e.length,n,s="value"in BA?BA.value:BA.textContent,A=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[A-n];n++);return Dd=s.slice(t,1<n?1-n:void 0)}function jd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ku(){return!0}function Wy(){return!1}function kn(t){function e(r,n,s,A,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(A):A[l]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ku:Wy,this.isPropagationStopped=Wy,this}return rr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ku)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ku)},persist:function(){},isPersistent:Ku}),e}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z0=kn(Ra),Zc=rr({},Ra,{view:0,detail:0}),IS=kn(Zc),Pg,Lg,dl,xf=rr({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ew,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dl&&(dl&&t.type==="mousemove"?(Pg=t.screenX-dl.screenX,Lg=t.screenY-dl.screenY):Lg=Pg=0,dl=t),Pg)},movementY:function(t){return"movementY"in t?t.movementY:Lg}}),qy=kn(xf),ES=rr({},xf,{dataTransfer:0}),TS=kn(ES),kS=rr({},Zc,{relatedTarget:0}),Mg=kn(kS),FS=rr({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),SS=kn(FS),US=rr({},Ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QS=kn(US),NS=rr({},Ra,{data:0}),Xy=kn(NS),RS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jS[t])?!!e[t]:!1}function ew(){return PS}var LS=rr({},Zc,{key:function(t){if(t.key){var e=RS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ew,charCode:function(t){return t.type==="keypress"?jd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MS=kn(LS),OS=rr({},xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=kn(OS),HS=rr({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ew}),VS=kn(HS),KS=rr({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),GS=kn(KS),zS=rr({},xf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$S=kn(zS),WS=[9,13,27,32],tw=Ds&&"CompositionEvent"in window,Wl=null;Ds&&"documentMode"in document&&(Wl=document.documentMode);var qS=Ds&&"TextEvent"in window&&!Wl,j_=Ds&&(!tw||Wl&&8<Wl&&11>=Wl),Yy=" ",Zy=!1;function P_(t,e){switch(t){case"keyup":return WS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jo=!1;function XS(t,e){switch(t){case"compositionend":return L_(e);case"keypress":return e.which!==32?null:(Zy=!0,Yy);case"textInput":return t=e.data,t===Yy&&Zy?null:t;default:return null}}function JS(t,e){if(jo)return t==="compositionend"||!tw&&P_(t,e)?(t=D_(),Dd=Y0=BA=null,jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j_&&e.locale!=="ko"?null:e.data;default:return null}}var YS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YS[t.type]:e==="textarea"}function M_(t,e,r,n){m_(n),e=ph(e,"onChange"),0<e.length&&(r=new Z0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ql=null,yc=null;function ZS(t){J_(t,0)}function yf(t){var e=Mo(t);if(c_(e))return t}function eU(t,e){if(t==="change")return e}var O_=!1;if(Ds){var Og;if(Ds){var Hg="oninput"in document;if(!Hg){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),Hg=typeof tv.oninput=="function"}Og=Hg}else Og=!1;O_=Og&&(!document.documentMode||9<document.documentMode)}function rv(){ql&&(ql.detachEvent("onpropertychange",H_),yc=ql=null)}function H_(t){if(t.propertyName==="value"&&yf(yc)){var e=[];M_(e,yc,t,$0(t)),v_(ZS,e)}}function tU(t,e,r){t==="focusin"?(rv(),ql=e,yc=r,ql.attachEvent("onpropertychange",H_)):t==="focusout"&&rv()}function rU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(yc)}function nU(t,e){if(t==="click")return yf(e)}function sU(t,e){if(t==="input"||t==="change")return yf(e)}function AU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:AU;function vc(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Op.call(e,s)||!Zn(t[s],e[s]))return!1}return!0}function nv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sv(t,e){var r=nv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nv(r)}}function V_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K_(){for(var t=window,e=lh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=lh(t.document)}return e}function rw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iU(t){var e=K_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&V_(r.ownerDocument.documentElement,r)){if(n!==null&&rw(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,A=Math.min(n.start,s);n=n.end===void 0?A:Math.min(n.end,s),!t.extend&&A>n&&(s=n,n=A,A=s),s=sv(r,A);var i=sv(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oU=Ds&&"documentMode"in document&&11>=document.documentMode,Po=null,im=null,Xl=null,om=!1;function Av(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;om||Po==null||Po!==lh(n)||(n=Po,"selectionStart"in n&&rw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xl&&vc(Xl,n)||(Xl=n,n=ph(im,"onSelect"),0<n.length&&(e=new Z0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Po)))}function Gu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Lo={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},Vg={},G_={};Ds&&(G_=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function vf(t){if(Vg[t])return Vg[t];if(!Lo[t])return t;var e=Lo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in G_)return Vg[t]=e[r];return t}var z_=vf("animationend"),$_=vf("animationiteration"),W_=vf("animationstart"),q_=vf("transitionend"),X_=new Map,iv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){X_.set(t,e),io(e,[t])}for(var Kg=0;Kg<iv.length;Kg++){var Gg=iv[Kg],aU=Gg.toLowerCase(),lU=Gg[0].toUpperCase()+Gg.slice(1);si(aU,"on"+lU)}si(z_,"onAnimationEnd");si($_,"onAnimationIteration");si(W_,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(q_,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function ov(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,aS(n,e,void 0,t),t.currentTarget=null}function J_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var A=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==A&&s.isPropagationStopped())break e;ov(s,l,c),A=a}else for(i=0;i<n.length;i++){if(l=n[i],a=l.instance,c=l.currentTarget,l=l.listener,a!==A&&s.isPropagationStopped())break e;ov(s,l,c),A=a}}}if(uh)throw t=rm,uh=!1,rm=null,t}function Ot(t,e){var r=e[dm];r===void 0&&(r=e[dm]=new Set);var n=t+"__bubble";r.has(n)||(Y_(e,t,2,!1),r.add(n))}function zg(t,e,r){var n=0;e&&(n|=4),Y_(r,t,n,e)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Bc(t){if(!t[zu]){t[zu]=!0,A_.forEach(function(r){r!=="selectionchange"&&(cU.has(r)||zg(r,!1,t),zg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zu]||(e[zu]=!0,zg("selectionchange",!1,e))}}function Y_(t,e,r,n){switch(R_(e)){case 1:var s=CS;break;case 4:s=_S;break;default:s=J0}r=s.bind(null,e,r,t),s=void 0,!tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function $g(t,e,r,n,s){var A=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Qi(l),i===null)return;if(a=i.tag,a===5||a===6){n=A=i;continue e}l=l.parentNode}}n=n.return}v_(function(){var c=A,d=$0(r),h=[];e:{var f=X_.get(t);if(f!==void 0){var m=Z0,y=t;switch(t){case"keypress":if(jd(r)===0)break e;case"keydown":case"keyup":m=MS;break;case"focusin":y="focus",m=Mg;break;case"focusout":y="blur",m=Mg;break;case"beforeblur":case"afterblur":m=Mg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=qy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=TS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=VS;break;case z_:case $_:case W_:m=SS;break;case q_:m=GS;break;case"scroll":m=IS;break;case"wheel":m=$S;break;case"copy":case"cut":case"paste":m=QS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Jy}var w=(e&4)!==0,E=!w&&t==="scroll",C=w?f!==null?f+"Capture":null:f;w=[];for(var x=c,_;x!==null;){_=x;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,C!==null&&(S=pc(x,C),S!=null&&w.push(bc(x,S,_)))),E)break;x=x.return}0<w.length&&(f=new m(f,y,null,r,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==Zp&&(y=r.relatedTarget||r.fromElement)&&(Qi(y)||y[js]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=c,y=y?Qi(y):null,y!==null&&(E=oo(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(w=qy,S="onMouseLeave",C="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(w=Jy,S="onPointerLeave",C="onPointerEnter",x="pointer"),E=m==null?f:Mo(m),_=y==null?f:Mo(y),f=new w(S,x+"leave",m,r,d),f.target=E,f.relatedTarget=_,S=null,Qi(d)===c&&(w=new w(C,x+"enter",y,r,d),w.target=_,w.relatedTarget=E,S=w),E=S,m&&y)t:{for(w=m,C=y,x=0,_=w;_;_=mo(_))x++;for(_=0,S=C;S;S=mo(S))_++;for(;0<x-_;)w=mo(w),x--;for(;0<_-x;)C=mo(C),_--;for(;x--;){if(w===C||C!==null&&w===C.alternate)break t;w=mo(w),C=mo(C)}w=null}else w=null;m!==null&&av(h,f,m,w,!1),y!==null&&E!==null&&av(h,E,y,w,!0)}}e:{if(f=c?Mo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var U=eU;else if(ev(f))if(O_)U=sU;else{U=rU;var N=tU}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=nU);if(U&&(U=U(t,c))){M_(h,U,r,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Wp(f,"number",f.value)}switch(N=c?Mo(c):window,t){case"focusin":(ev(N)||N.contentEditable==="true")&&(Po=N,im=c,Xl=null);break;case"focusout":Xl=im=Po=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,Av(h,r,d);break;case"selectionchange":if(oU)break;case"keydown":case"keyup":Av(h,r,d)}var v;if(tw)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jo?P_(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(j_&&r.locale!=="ko"&&(jo||b!=="onCompositionStart"?b==="onCompositionEnd"&&jo&&(v=D_()):(BA=d,Y0="value"in BA?BA.value:BA.textContent,jo=!0)),N=ph(c,b),0<N.length&&(b=new Xy(b,t,null,r,d),h.push({event:b,listeners:N}),v?b.data=v:(v=L_(r),v!==null&&(b.data=v)))),(v=qS?XS(t,r):JS(t,r))&&(c=ph(c,"onBeforeInput"),0<c.length&&(d=new Xy("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=v))}J_(h,e)})}function bc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ph(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=pc(t,r),A!=null&&n.unshift(bc(t,A,s)),A=pc(t,e),A!=null&&n.push(bc(t,A,s))),t=t.return}return n}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function av(t,e,r,n,s){for(var A=e._reactName,i=[];r!==null&&r!==n;){var l=r,a=l.alternate,c=l.stateNode;if(a!==null&&a===n)break;l.tag===5&&c!==null&&(l=c,s?(a=pc(r,A),a!=null&&i.unshift(bc(r,a,l))):s||(a=pc(r,A),a!=null&&i.push(bc(r,a,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var uU=/\r\n?/g,dU=/\u0000|\uFFFD/g;function lv(t){return(typeof t=="string"?t:""+t).replace(uU,`
`).replace(dU,"")}function $u(t,e,r){if(e=lv(e),lv(t)!==e&&r)throw Error(pe(425))}function mh(){}var am=null,lm=null;function cm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var um=typeof setTimeout=="function"?setTimeout:void 0,hU=typeof clearTimeout=="function"?clearTimeout:void 0,cv=typeof Promise=="function"?Promise:void 0,fU=typeof queueMicrotask=="function"?queueMicrotask:typeof cv<"u"?function(t){return cv.resolve(null).then(t).catch(gU)}:um;function gU(t){setTimeout(function(){throw t})}function Wg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),xc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);xc(e)}function QA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Da=Math.random().toString(36).slice(2),os="__reactFiber$"+Da,Cc="__reactProps$"+Da,js="__reactContainer$"+Da,dm="__reactEvents$"+Da,pU="__reactListeners$"+Da,mU="__reactHandles$"+Da;function Qi(t){var e=t[os];if(e)return e;for(var r=t.parentNode;r;){if(e=r[js]||r[os]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uv(t);t!==null;){if(r=t[os])return r;t=uv(t)}return e}t=r,r=t.parentNode}return null}function eu(t){return t=t[os]||t[js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function Bf(t){return t[Cc]||null}var hm=[],Oo=-1;function Ai(t){return{current:t}}function Kt(t){0>Oo||(t.current=hm[Oo],hm[Oo]=null,Oo--)}function Pt(t,e){Oo++,hm[Oo]=t.current,t.current=e}var zA={},Yr=Ai(zA),gn=Ai(!1),Vi=zA;function la(t,e){var r=t.type.contextTypes;if(!r)return zA;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in r)s[A]=e[A];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function wh(){Kt(gn),Kt(Yr)}function dv(t,e,r){if(Yr.current!==zA)throw Error(pe(168));Pt(Yr,e),Pt(gn,r)}function Z_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(pe(108,tS(t)||"Unknown",s));return rr({},r,n)}function xh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zA,Vi=Yr.current,Pt(Yr,t),Pt(gn,gn.current),!0}function hv(t,e,r){var n=t.stateNode;if(!n)throw Error(pe(169));r?(t=Z_(t,e,Vi),n.__reactInternalMemoizedMergedChildContext=t,Kt(gn),Kt(Yr),Pt(Yr,t)):Kt(gn),Pt(gn,r)}var _s=null,bf=!1,qg=!1;function eI(t){_s===null?_s=[t]:_s.push(t)}function wU(t){bf=!0,eI(t)}function ii(){if(!qg&&_s!==null){qg=!0;var t=0,e=kt;try{var r=_s;for(kt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}_s=null,bf=!1}catch(s){throw _s!==null&&(_s=_s.slice(t+1)),__(W0,ii),s}finally{kt=e,qg=!1}}return null}var Ho=[],Vo=0,yh=null,vh=0,Un=[],Qn=0,Ki=null,Es=1,Ts="";function Ci(t,e){Ho[Vo++]=vh,Ho[Vo++]=yh,yh=t,vh=e}function tI(t,e,r){Un[Qn++]=Es,Un[Qn++]=Ts,Un[Qn++]=Ki,Ki=t;var n=Es;t=Ts;var s=32-Xn(n)-1;n&=~(1<<s),r+=1;var A=32-Xn(e)+s;if(30<A){var i=s-s%5;A=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Es=1<<32-Xn(e)+s|r<<s|n,Ts=A+t}else Es=1<<A|r<<s|n,Ts=t}function nw(t){t.return!==null&&(Ci(t,1),tI(t,1,0))}function sw(t){for(;t===yh;)yh=Ho[--Vo],Ho[Vo]=null,vh=Ho[--Vo],Ho[Vo]=null;for(;t===Ki;)Ki=Un[--Qn],Un[Qn]=null,Ts=Un[--Qn],Un[Qn]=null,Es=Un[--Qn],Un[Qn]=null}var bn=null,Bn=null,$t=!1,Wn=null;function rI(t,e){var r=Dn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function fv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,Bn=QA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,Bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ki!==null?{id:Es,overflow:Ts}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Dn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,bn=t,Bn=null,!0):!1;default:return!1}}function fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gm(t){if($t){var e=Bn;if(e){var r=e;if(!fv(t,e)){if(fm(t))throw Error(pe(418));e=QA(r.nextSibling);var n=bn;e&&fv(t,e)?rI(n,r):(t.flags=t.flags&-4097|2,$t=!1,bn=t)}}else{if(fm(t))throw Error(pe(418));t.flags=t.flags&-4097|2,$t=!1,bn=t}}}function gv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Wu(t){if(t!==bn)return!1;if(!$t)return gv(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cm(t.type,t.memoizedProps)),e&&(e=Bn)){if(fm(t))throw nI(),Error(pe(418));for(;e;)rI(t,e),e=QA(e.nextSibling)}if(gv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Bn=QA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Bn=null}}else Bn=bn?QA(t.stateNode.nextSibling):null;return!0}function nI(){for(var t=Bn;t;)t=QA(t.nextSibling)}function ca(){Bn=bn=null,$t=!1}function Aw(t){Wn===null?Wn=[t]:Wn.push(t)}var xU=Gs.ReactCurrentBatchConfig;function hl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,t));var s=n,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var l=s.refs;i===null?delete l[A]:l[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,t))}return t}function qu(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pv(t){var e=t._init;return e(t._payload)}function sI(t){function e(C,x){if(t){var _=C.deletions;_===null?(C.deletions=[x],C.flags|=16):_.push(x)}}function r(C,x){if(!t)return null;for(;x!==null;)e(C,x),x=x.sibling;return null}function n(C,x){for(C=new Map;x!==null;)x.key!==null?C.set(x.key,x):C.set(x.index,x),x=x.sibling;return C}function s(C,x){return C=jA(C,x),C.index=0,C.sibling=null,C}function A(C,x,_){return C.index=_,t?(_=C.alternate,_!==null?(_=_.index,_<x?(C.flags|=2,x):_):(C.flags|=2,x)):(C.flags|=1048576,x)}function i(C){return t&&C.alternate===null&&(C.flags|=2),C}function l(C,x,_,S){return x===null||x.tag!==6?(x=rp(_,C.mode,S),x.return=C,x):(x=s(x,_),x.return=C,x)}function a(C,x,_,S){var U=_.type;return U===Do?d(C,x,_.props.children,S,_.key):x!==null&&(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===cA&&pv(U)===x.type)?(S=s(x,_.props),S.ref=hl(C,x,_),S.return=C,S):(S=Kd(_.type,_.key,_.props,null,C.mode,S),S.ref=hl(C,x,_),S.return=C,S)}function c(C,x,_,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=np(_,C.mode,S),x.return=C,x):(x=s(x,_.children||[]),x.return=C,x)}function d(C,x,_,S,U){return x===null||x.tag!==7?(x=Pi(_,C.mode,S,U),x.return=C,x):(x=s(x,_),x.return=C,x)}function h(C,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=rp(""+x,C.mode,_),x.return=C,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Pu:return _=Kd(x.type,x.key,x.props,null,C.mode,_),_.ref=hl(C,null,x),_.return=C,_;case Ro:return x=np(x,C.mode,_),x.return=C,x;case cA:var S=x._init;return h(C,S(x._payload),_)}if(kl(x)||al(x))return x=Pi(x,C.mode,_,null),x.return=C,x;qu(C,x)}return null}function f(C,x,_,S){var U=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return U!==null?null:l(C,x,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pu:return _.key===U?a(C,x,_,S):null;case Ro:return _.key===U?c(C,x,_,S):null;case cA:return U=_._init,f(C,x,U(_._payload),S)}if(kl(_)||al(_))return U!==null?null:d(C,x,_,S,null);qu(C,_)}return null}function m(C,x,_,S,U){if(typeof S=="string"&&S!==""||typeof S=="number")return C=C.get(_)||null,l(x,C,""+S,U);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pu:return C=C.get(S.key===null?_:S.key)||null,a(x,C,S,U);case Ro:return C=C.get(S.key===null?_:S.key)||null,c(x,C,S,U);case cA:var N=S._init;return m(C,x,_,N(S._payload),U)}if(kl(S)||al(S))return C=C.get(_)||null,d(x,C,S,U,null);qu(x,S)}return null}function y(C,x,_,S){for(var U=null,N=null,v=x,b=x=0,B=null;v!==null&&b<_.length;b++){v.index>b?(B=v,v=null):B=v.sibling;var F=f(C,v,_[b],S);if(F===null){v===null&&(v=B);break}t&&v&&F.alternate===null&&e(C,v),x=A(F,x,b),N===null?U=F:N.sibling=F,N=F,v=B}if(b===_.length)return r(C,v),$t&&Ci(C,b),U;if(v===null){for(;b<_.length;b++)v=h(C,_[b],S),v!==null&&(x=A(v,x,b),N===null?U=v:N.sibling=v,N=v);return $t&&Ci(C,b),U}for(v=n(C,v);b<_.length;b++)B=m(v,C,b,_[b],S),B!==null&&(t&&B.alternate!==null&&v.delete(B.key===null?b:B.key),x=A(B,x,b),N===null?U=B:N.sibling=B,N=B);return t&&v.forEach(function(D){return e(C,D)}),$t&&Ci(C,b),U}function w(C,x,_,S){var U=al(_);if(typeof U!="function")throw Error(pe(150));if(_=U.call(_),_==null)throw Error(pe(151));for(var N=U=null,v=x,b=x=0,B=null,F=_.next();v!==null&&!F.done;b++,F=_.next()){v.index>b?(B=v,v=null):B=v.sibling;var D=f(C,v,F.value,S);if(D===null){v===null&&(v=B);break}t&&v&&D.alternate===null&&e(C,v),x=A(D,x,b),N===null?U=D:N.sibling=D,N=D,v=B}if(F.done)return r(C,v),$t&&Ci(C,b),U;if(v===null){for(;!F.done;b++,F=_.next())F=h(C,F.value,S),F!==null&&(x=A(F,x,b),N===null?U=F:N.sibling=F,N=F);return $t&&Ci(C,b),U}for(v=n(C,v);!F.done;b++,F=_.next())F=m(v,C,b,F.value,S),F!==null&&(t&&F.alternate!==null&&v.delete(F.key===null?b:F.key),x=A(F,x,b),N===null?U=F:N.sibling=F,N=F);return t&&v.forEach(function(P){return e(C,P)}),$t&&Ci(C,b),U}function E(C,x,_,S){if(typeof _=="object"&&_!==null&&_.type===Do&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Pu:e:{for(var U=_.key,N=x;N!==null;){if(N.key===U){if(U=_.type,U===Do){if(N.tag===7){r(C,N.sibling),x=s(N,_.props.children),x.return=C,C=x;break e}}else if(N.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===cA&&pv(U)===N.type){r(C,N.sibling),x=s(N,_.props),x.ref=hl(C,N,_),x.return=C,C=x;break e}r(C,N);break}else e(C,N);N=N.sibling}_.type===Do?(x=Pi(_.props.children,C.mode,S,_.key),x.return=C,C=x):(S=Kd(_.type,_.key,_.props,null,C.mode,S),S.ref=hl(C,x,_),S.return=C,C=S)}return i(C);case Ro:e:{for(N=_.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){r(C,x.sibling),x=s(x,_.children||[]),x.return=C,C=x;break e}else{r(C,x);break}else e(C,x);x=x.sibling}x=np(_,C.mode,S),x.return=C,C=x}return i(C);case cA:return N=_._init,E(C,x,N(_._payload),S)}if(kl(_))return y(C,x,_,S);if(al(_))return w(C,x,_,S);qu(C,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(r(C,x.sibling),x=s(x,_),x.return=C,C=x):(r(C,x),x=rp(_,C.mode,S),x.return=C,C=x),i(C)):r(C,x)}return E}var ua=sI(!0),AI=sI(!1),Bh=Ai(null),bh=null,Ko=null,iw=null;function ow(){iw=Ko=bh=null}function aw(t){var e=Bh.current;Kt(Bh),t._currentValue=e}function pm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ea(t,e){bh=t,iw=Ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(iw!==t)if(t={context:t,memoizedValue:e,next:null},Ko===null){if(bh===null)throw Error(pe(308));Ko=t,bh.dependencies={lanes:0,firstContext:t}}else Ko=Ko.next=t;return e}var Ni=null;function lw(t){Ni===null?Ni=[t]:Ni.push(t)}function iI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,lw(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ps(t,n)}function Ps(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var uA=!1;function cw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ns(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function NA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Bt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ps(t,r)}return s=n.interleaved,s===null?(e.next=e,lw(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ps(t,r)}function Pd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,q0(t,r)}}function mv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};A===null?s=A=i:A=A.next=i,r=r.next}while(r!==null);A===null?s=A=e:A=A.next=e}else s=A=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ch(t,e,r,n){var s=t.updateQueue;uA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,i===null?A=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=a))}if(A!==null){var h=s.baseState;i=0,d=c=a=null,l=A;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,w=l;switch(f=e,m=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=rr({},h,f);break e;case 2:uA=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=m,a=h):d=d.next=m,i|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);zi|=i,t.lanes=i,t.memoizedState=h}}function wv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(pe(191,s));s.call(n)}}}var tu={},us=Ai(tu),_c=Ai(tu),Ic=Ai(tu);function Ri(t){if(t===tu)throw Error(pe(174));return t}function uw(t,e){switch(Pt(Ic,e),Pt(_c,t),Pt(us,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xp(e,t)}Kt(us),Pt(us,e)}function da(){Kt(us),Kt(_c),Kt(Ic)}function aI(t){Ri(Ic.current);var e=Ri(us.current),r=Xp(e,t.type);e!==r&&(Pt(_c,t),Pt(us,r))}function dw(t){_c.current===t&&(Kt(us),Kt(_c))}var Zt=Ai(0);function _h(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xg=[];function hw(){for(var t=0;t<Xg.length;t++)Xg[t]._workInProgressVersionPrimary=null;Xg.length=0}var Ld=Gs.ReactCurrentDispatcher,Jg=Gs.ReactCurrentBatchConfig,Gi=0,er=null,pr=null,_r=null,Ih=!1,Jl=!1,Ec=0,yU=0;function Hr(){throw Error(pe(321))}function fw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Zn(t[r],e[r]))return!1;return!0}function gw(t,e,r,n,s,A){if(Gi=A,er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ld.current=t===null||t.memoizedState===null?CU:_U,t=r(n,s),Jl){A=0;do{if(Jl=!1,Ec=0,25<=A)throw Error(pe(301));A+=1,_r=pr=null,e.updateQueue=null,Ld.current=IU,t=r(n,s)}while(Jl)}if(Ld.current=Eh,e=pr!==null&&pr.next!==null,Gi=0,_r=pr=er=null,Ih=!1,e)throw Error(pe(300));return t}function pw(){var t=Ec!==0;return Ec=0,t}function As(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?er.memoizedState=_r=t:_r=_r.next=t,_r}function On(){if(pr===null){var t=er.alternate;t=t!==null?t.memoizedState:null}else t=pr.next;var e=_r===null?er.memoizedState:_r.next;if(e!==null)_r=e,pr=t;else{if(t===null)throw Error(pe(310));pr=t,t={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},_r===null?er.memoizedState=_r=t:_r=_r.next=t}return _r}function Tc(t,e){return typeof e=="function"?e(t):e}function Yg(t){var e=On(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=pr,s=n.baseQueue,A=r.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}n.baseQueue=s=A,r.pending=null}if(s!==null){A=s.next,n=n.baseState;var l=i=null,a=null,c=A;do{var d=c.lane;if((Gi&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,i=n):a=a.next=h,er.lanes|=d,zi|=d}c=c.next}while(c!==null&&c!==A);a===null?i=n:a.next=l,Zn(n,e.memoizedState)||(un=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=a,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do A=s.lane,er.lanes|=A,zi|=A,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Zg(t){var e=On(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,A=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);Zn(A,e.memoizedState)||(un=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),r.lastRenderedState=A}return[A,n]}function lI(){}function cI(t,e){var r=er,n=On(),s=e(),A=!Zn(n.memoizedState,s);if(A&&(n.memoizedState=s,un=!0),n=n.queue,mw(hI.bind(null,r,n,t),[t]),n.getSnapshot!==e||A||_r!==null&&_r.memoizedState.tag&1){if(r.flags|=2048,kc(9,dI.bind(null,r,n,s,e),void 0,null),Er===null)throw Error(pe(349));Gi&30||uI(r,e,s)}return s}function uI(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function dI(t,e,r,n){e.value=r,e.getSnapshot=n,fI(e)&&gI(t)}function hI(t,e,r){return r(function(){fI(e)&&gI(t)})}function fI(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Zn(t,r)}catch{return!0}}function gI(t){var e=Ps(t,1);e!==null&&Jn(e,t,1,-1)}function xv(t){var e=As();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tc,lastRenderedState:t},e.queue=t,t=t.dispatch=bU.bind(null,er,t),[e.memoizedState,t]}function kc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function pI(){return On().memoizedState}function Md(t,e,r,n){var s=As();er.flags|=t,s.memoizedState=kc(1|e,r,void 0,n===void 0?null:n)}function Cf(t,e,r,n){var s=On();n=n===void 0?null:n;var A=void 0;if(pr!==null){var i=pr.memoizedState;if(A=i.destroy,n!==null&&fw(n,i.deps)){s.memoizedState=kc(e,r,A,n);return}}er.flags|=t,s.memoizedState=kc(1|e,r,A,n)}function yv(t,e){return Md(8390656,8,t,e)}function mw(t,e){return Cf(2048,8,t,e)}function mI(t,e){return Cf(4,2,t,e)}function wI(t,e){return Cf(4,4,t,e)}function xI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yI(t,e,r){return r=r!=null?r.concat([t]):null,Cf(4,4,xI.bind(null,e,t),r)}function ww(){}function vI(t,e){var r=On();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&fw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function BI(t,e){var r=On();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&fw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function bI(t,e,r){return Gi&21?(Zn(r,e)||(r=T_(),er.lanes|=r,zi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=r)}function vU(t,e){var r=kt;kt=r!==0&&4>r?r:4,t(!0);var n=Jg.transition;Jg.transition={};try{t(!1),e()}finally{kt=r,Jg.transition=n}}function CI(){return On().memoizedState}function BU(t,e,r){var n=DA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_I(t))II(e,r);else if(r=iI(t,e,r,n),r!==null){var s=nn();Jn(r,t,n,s),EI(r,e,n)}}function bU(t,e,r){var n=DA(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_I(t))II(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,l=A(i,r);if(s.hasEagerState=!0,s.eagerState=l,Zn(l,i)){var a=e.interleaved;a===null?(s.next=s,lw(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}r=iI(t,e,s,n),r!==null&&(s=nn(),Jn(r,t,n,s),EI(r,e,n))}}function _I(t){var e=t.alternate;return t===er||e!==null&&e===er}function II(t,e){Jl=Ih=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function EI(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,q0(t,r)}}var Eh={readContext:Mn,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},CU={readContext:Mn,useCallback:function(t,e){return As().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:yv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Md(4194308,4,xI.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Md(4194308,4,t,e)},useInsertionEffect:function(t,e){return Md(4,2,t,e)},useMemo:function(t,e){var r=As();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=As();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=BU.bind(null,er,t),[n.memoizedState,t]},useRef:function(t){var e=As();return t={current:t},e.memoizedState=t},useState:xv,useDebugValue:ww,useDeferredValue:function(t){return As().memoizedState=t},useTransition:function(){var t=xv(!1),e=t[0];return t=vU.bind(null,t[1]),As().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=er,s=As();if($t){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=e(),Er===null)throw Error(pe(349));Gi&30||uI(n,e,r)}s.memoizedState=r;var A={value:r,getSnapshot:e};return s.queue=A,yv(hI.bind(null,n,A,t),[t]),n.flags|=2048,kc(9,dI.bind(null,n,A,r,e),void 0,null),r},useId:function(){var t=As(),e=Er.identifierPrefix;if($t){var r=Ts,n=Es;r=(n&~(1<<32-Xn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ec++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=yU++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_U={readContext:Mn,useCallback:vI,useContext:Mn,useEffect:mw,useImperativeHandle:yI,useInsertionEffect:mI,useLayoutEffect:wI,useMemo:BI,useReducer:Yg,useRef:pI,useState:function(){return Yg(Tc)},useDebugValue:ww,useDeferredValue:function(t){var e=On();return bI(e,pr.memoizedState,t)},useTransition:function(){var t=Yg(Tc)[0],e=On().memoizedState;return[t,e]},useMutableSource:lI,useSyncExternalStore:cI,useId:CI,unstable_isNewReconciler:!1},IU={readContext:Mn,useCallback:vI,useContext:Mn,useEffect:mw,useImperativeHandle:yI,useInsertionEffect:mI,useLayoutEffect:wI,useMemo:BI,useReducer:Zg,useRef:pI,useState:function(){return Zg(Tc)},useDebugValue:ww,useDeferredValue:function(t){var e=On();return pr===null?e.memoizedState=t:bI(e,pr.memoizedState,t)},useTransition:function(){var t=Zg(Tc)[0],e=On().memoizedState;return[t,e]},useMutableSource:lI,useSyncExternalStore:cI,useId:CI,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=rr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function mm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:rr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var _f={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=nn(),s=DA(t),A=Ns(n,s);A.payload=e,r!=null&&(A.callback=r),e=NA(t,A,s),e!==null&&(Jn(e,t,s,n),Pd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=nn(),s=DA(t),A=Ns(n,s);A.tag=1,A.payload=e,r!=null&&(A.callback=r),e=NA(t,A,s),e!==null&&(Jn(e,t,s,n),Pd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=nn(),n=DA(t),s=Ns(r,n);s.tag=2,e!=null&&(s.callback=e),e=NA(t,s,n),e!==null&&(Jn(e,t,n,r),Pd(e,t,n))}};function vv(t,e,r,n,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,A,i):e.prototype&&e.prototype.isPureReactComponent?!vc(r,n)||!vc(s,A):!0}function TI(t,e,r){var n=!1,s=zA,A=e.contextType;return typeof A=="object"&&A!==null?A=Mn(A):(s=pn(e)?Vi:Yr.current,n=e.contextTypes,A=(n=n!=null)?la(t,s):zA),e=new e(r,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_f,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function Bv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&_f.enqueueReplaceState(e,e.state,null)}function wm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},cw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Mn(A):(A=pn(e)?Vi:Yr.current,s.context=la(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(mm(t,e,A,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_f.enqueueReplaceState(s,s.state,null),Ch(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,e){try{var r="",n=e;do r+=eS(n),n=n.return;while(n);var s=r}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function ep(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function xm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var EU=typeof WeakMap=="function"?WeakMap:Map;function kI(t,e,r){r=Ns(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){kh||(kh=!0,km=n),xm(t,e)},r}function FI(t,e,r){r=Ns(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){xm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){xm(t,e),typeof n!="function"&&(RA===null?RA=new Set([this]):RA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function bv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new EU;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=OU.bind(null,t,e,r),e.then(t,t))}function Cv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _v(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ns(-1,1),e.tag=2,NA(r,e,1))),r.lanes|=1),t)}var TU=Gs.ReactCurrentOwner,un=!1;function tn(t,e,r,n){e.child=t===null?AI(e,null,r,n):ua(e,t.child,r,n)}function Iv(t,e,r,n,s){r=r.render;var A=e.ref;return ea(e,s),n=gw(t,e,r,n,A,s),r=pw(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ls(t,e,s)):($t&&r&&nw(e),e.flags|=1,tn(t,e,n,s),e.child)}function Ev(t,e,r,n,s){if(t===null){var A=r.type;return typeof A=="function"&&!Iw(A)&&A.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=A,SI(t,e,A,n,s)):(t=Kd(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(r=r.compare,r=r!==null?r:vc,r(i,n)&&t.ref===e.ref)return Ls(t,e,s)}return e.flags|=1,t=jA(A,n),t.ref=e.ref,t.return=e,e.child=t}function SI(t,e,r,n,s){if(t!==null){var A=t.memoizedProps;if(vc(A,n)&&t.ref===e.ref)if(un=!1,e.pendingProps=n=A,(t.lanes&s)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,Ls(t,e,s)}return ym(t,e,r,n,s)}function UI(t,e,r){var n=e.pendingProps,s=n.children,A=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(zo,vn),vn|=r;else{if(!(r&1073741824))return t=A!==null?A.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pt(zo,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=A!==null?A.baseLanes:r,Pt(zo,vn),vn|=n}else A!==null?(n=A.baseLanes|r,e.memoizedState=null):n=r,Pt(zo,vn),vn|=n;return tn(t,e,s,r),e.child}function QI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ym(t,e,r,n,s){var A=pn(r)?Vi:Yr.current;return A=la(e,A),ea(e,s),r=gw(t,e,r,n,A,s),n=pw(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ls(t,e,s)):($t&&n&&nw(e),e.flags|=1,tn(t,e,r,s),e.child)}function Tv(t,e,r,n,s){if(pn(r)){var A=!0;xh(e)}else A=!1;if(ea(e,s),e.stateNode===null)Od(t,e),TI(e,r,n),wm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var a=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Mn(c):(c=pn(r)?Vi:Yr.current,c=la(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||a!==c)&&Bv(e,i,n,c),uA=!1;var f=e.memoizedState;i.state=f,Ch(e,n,i,s),a=e.memoizedState,l!==n||f!==a||gn.current||uA?(typeof d=="function"&&(mm(e,r,d,n),a=e.memoizedState),(l=uA||vv(e,r,l,n,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=a),i.props=n,i.state=a,i.context=c,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,oI(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:zn(e.type,l),i.props=c,h=e.pendingProps,f=i.context,a=r.contextType,typeof a=="object"&&a!==null?a=Mn(a):(a=pn(r)?Vi:Yr.current,a=la(e,a));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Bv(e,i,n,a),uA=!1,f=e.memoizedState,i.state=f,Ch(e,n,i,s);var y=e.memoizedState;l!==h||f!==y||gn.current||uA?(typeof m=="function"&&(mm(e,r,m,n),y=e.memoizedState),(c=uA||vv(e,r,c,n,f,y,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),i.props=n,i.state=y,i.context=a,n=c):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return vm(t,e,r,n,A,s)}function vm(t,e,r,n,s,A){QI(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&hv(e,r,!1),Ls(t,e,A);n=e.stateNode,TU.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=ua(e,t.child,null,A),e.child=ua(e,null,l,A)):tn(t,e,l,A),e.memoizedState=n.state,s&&hv(e,r,!0),e.child}function NI(t){var e=t.stateNode;e.pendingContext?dv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dv(t,e.context,!1),uw(t,e.containerInfo)}function kv(t,e,r,n,s){return ca(),Aw(s),e.flags|=256,tn(t,e,r,n),e.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function RI(t,e,r){var n=e.pendingProps,s=Zt.current,A=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pt(Zt,s&1),t===null)return gm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,A?(n=e.mode,A=e.child,i={mode:"hidden",children:i},!(n&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=Tf(i,n,0,null),t=Pi(t,n,r,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=bm(r),e.memoizedState=Bm,t):xw(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kU(t,e,i,n,l,s,r);if(A){A=n.fallback,i=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=a,e.deletions=null):(n=jA(s,a),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?A=jA(l,A):(A=Pi(A,i,r,null),A.flags|=2),A.return=e,n.return=e,n.sibling=A,e.child=n,n=A,A=e.child,i=t.child.memoizedState,i=i===null?bm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~r,e.memoizedState=Bm,n}return A=t.child,t=A.sibling,n=jA(A,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function xw(t,e){return e=Tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xu(t,e,r,n){return n!==null&&Aw(n),ua(e,t.child,null,r),t=xw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kU(t,e,r,n,s,A,i){if(r)return e.flags&256?(e.flags&=-257,n=ep(Error(pe(422))),Xu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=n.fallback,s=e.mode,n=Tf({mode:"visible",children:n.children},s,0,null),A=Pi(A,s,i,null),A.flags|=2,n.return=e,A.return=e,n.sibling=A,e.child=n,e.mode&1&&ua(e,t.child,null,i),e.child.memoizedState=bm(i),e.memoizedState=Bm,A);if(!(e.mode&1))return Xu(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,A=Error(pe(419)),n=ep(A,n,void 0),Xu(t,e,i,n)}if(l=(i&t.childLanes)!==0,un||l){if(n=Er,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Ps(t,s),Jn(n,t,s,-1))}return _w(),n=ep(Error(pe(421))),Xu(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HU.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,Bn=QA(s.nextSibling),bn=e,$t=!0,Wn=null,t!==null&&(Un[Qn++]=Es,Un[Qn++]=Ts,Un[Qn++]=Ki,Es=t.id,Ts=t.overflow,Ki=e),e=xw(e,n.children),e.flags|=4096,e)}function Fv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),pm(t.return,e,r)}function tp(t,e,r,n,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=n,A.tail=r,A.tailMode=s)}function DI(t,e,r){var n=e.pendingProps,s=n.revealOrder,A=n.tail;if(tn(t,e,n.children,r),n=Zt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fv(t,r,e);else if(t.tag===19)Fv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pt(Zt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&_h(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),tp(e,!1,s,r,A);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&_h(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}tp(e,!0,r,null,A);break;case"together":tp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Od(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ls(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),zi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,r=jA(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=jA(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function FU(t,e,r){switch(e.tag){case 3:NI(e),ca();break;case 5:aI(e);break;case 1:pn(e.type)&&xh(e);break;case 4:uw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Pt(Bh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pt(Zt,Zt.current&1),e.flags|=128,null):r&e.child.childLanes?RI(t,e,r):(Pt(Zt,Zt.current&1),t=Ls(t,e,r),t!==null?t.sibling:null);Pt(Zt,Zt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return DI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pt(Zt,Zt.current),n)break;return null;case 22:case 23:return e.lanes=0,UI(t,e,r)}return Ls(t,e,r)}var jI,Cm,PI,LI;jI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Cm=function(){};PI=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Ri(us.current);var A=null;switch(r){case"input":s=zp(t,s),n=zp(t,n),A=[];break;case"select":s=rr({},s,{value:void 0}),n=rr({},n,{value:void 0}),A=[];break;case"textarea":s=qp(t,s),n=qp(t,n),A=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=mh)}Jp(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in n){var a=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in a)a.hasOwnProperty(i)&&l[i]!==a[i]&&(r||(r={}),r[i]=a[i])}else r||(A||(A=[]),A.push(c,r)),r=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(A=A||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(A=A||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ot("scroll",t),A||l===a||(A=[])):(A=A||[]).push(c,a))}r&&(A=A||[]).push("style",r);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};LI=function(t,e,r,n){r!==n&&(e.flags|=4)};function fl(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Vr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function SU(t,e,r){var n=e.pendingProps;switch(sw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(e),null;case 1:return pn(e.type)&&wh(),Vr(e),null;case 3:return n=e.stateNode,da(),Kt(gn),Kt(Yr),hw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Wu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Um(Wn),Wn=null))),Cm(t,e),Vr(e),null;case 5:dw(e);var s=Ri(Ic.current);if(r=e.type,t!==null&&e.stateNode!=null)PI(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(pe(166));return Vr(e),null}if(t=Ri(us.current),Wu(e)){n=e.stateNode,r=e.type;var A=e.memoizedProps;switch(n[os]=e,n[Cc]=A,t=(e.mode&1)!==0,r){case"dialog":Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":case"embed":Ot("load",n);break;case"video":case"audio":for(s=0;s<Sl.length;s++)Ot(Sl[s],n);break;case"source":Ot("error",n);break;case"img":case"image":case"link":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"input":Ly(n,A),Ot("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!A.multiple},Ot("invalid",n);break;case"textarea":Oy(n,A),Ot("invalid",n)}Jp(r,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var l=A[i];i==="children"?typeof l=="string"?n.textContent!==l&&(A.suppressHydrationWarning!==!0&&$u(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(A.suppressHydrationWarning!==!0&&$u(n.textContent,l,t),s=["children",""+l]):fc.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Ot("scroll",n)}switch(r){case"input":Lu(n),My(n,A,!0);break;case"textarea":Lu(n),Hy(n);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(n.onclick=mh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=h_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[os]=e,t[Cc]=n,jI(t,e,!1,!1),e.stateNode=t;e:{switch(i=Yp(r,n),r){case"dialog":Ot("cancel",t),Ot("close",t),s=n;break;case"iframe":case"object":case"embed":Ot("load",t),s=n;break;case"video":case"audio":for(s=0;s<Sl.length;s++)Ot(Sl[s],t);s=n;break;case"source":Ot("error",t),s=n;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),s=n;break;case"details":Ot("toggle",t),s=n;break;case"input":Ly(t,n),s=zp(t,n),Ot("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=rr({},n,{value:void 0}),Ot("invalid",t);break;case"textarea":Oy(t,n),s=qp(t,n),Ot("invalid",t);break;default:s=n}Jp(r,s),l=s;for(A in l)if(l.hasOwnProperty(A)){var a=l[A];A==="style"?p_(t,a):A==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&f_(t,a)):A==="children"?typeof a=="string"?(r!=="textarea"||a!=="")&&gc(t,a):typeof a=="number"&&gc(t,""+a):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(fc.hasOwnProperty(A)?a!=null&&A==="onScroll"&&Ot("scroll",t):a!=null&&V0(t,A,a,i))}switch(r){case"input":Lu(t),My(t,n,!1);break;case"textarea":Lu(t),Hy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+GA(n.value));break;case"select":t.multiple=!!n.multiple,A=n.value,A!=null?Xo(t,!!n.multiple,A,!1):n.defaultValue!=null&&Xo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vr(e),null;case 6:if(t&&e.stateNode!=null)LI(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pe(166));if(r=Ri(Ic.current),Ri(us.current),Wu(e)){if(n=e.stateNode,r=e.memoizedProps,n[os]=e,(A=n.nodeValue!==r)&&(t=bn,t!==null))switch(t.tag){case 3:$u(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$u(n.nodeValue,r,(t.mode&1)!==0)}A&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[os]=e,e.stateNode=n}return Vr(e),null;case 13:if(Kt(Zt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&Bn!==null&&e.mode&1&&!(e.flags&128))nI(),ca(),e.flags|=98560,A=!1;else if(A=Wu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!A)throw Error(pe(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(pe(317));A[os]=e}else ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vr(e),A=!1}else Wn!==null&&(Um(Wn),Wn=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?wr===0&&(wr=3):_w())),e.updateQueue!==null&&(e.flags|=4),Vr(e),null);case 4:return da(),Cm(t,e),t===null&&Bc(e.stateNode.containerInfo),Vr(e),null;case 10:return aw(e.type._context),Vr(e),null;case 17:return pn(e.type)&&wh(),Vr(e),null;case 19:if(Kt(Zt),A=e.memoizedState,A===null)return Vr(e),null;if(n=(e.flags&128)!==0,i=A.rendering,i===null)if(n)fl(A,!1);else{if(wr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=_h(t),i!==null){for(e.flags|=128,fl(A,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)A=r,t=n,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pt(Zt,Zt.current&1|2),e.child}t=t.sibling}A.tail!==null&&lr()>fa&&(e.flags|=128,n=!0,fl(A,!1),e.lanes=4194304)}else{if(!n)if(t=_h(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),fl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!$t)return Vr(e),null}else 2*lr()-A.renderingStartTime>fa&&r!==1073741824&&(e.flags|=128,n=!0,fl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(r=A.last,r!==null?r.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=lr(),e.sibling=null,r=Zt.current,Pt(Zt,n?r&1|2:r&1),e):(Vr(e),null);case 22:case 23:return Cw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?vn&1073741824&&(Vr(e),e.subtreeFlags&6&&(e.flags|=8192)):Vr(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function UU(t,e){switch(sw(e),e.tag){case 1:return pn(e.type)&&wh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return da(),Kt(gn),Kt(Yr),hw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dw(e),null;case 13:if(Kt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(Zt),null;case 4:return da(),null;case 10:return aw(e.type._context),null;case 22:case 23:return Cw(),null;case 24:return null;default:return null}}var Ju=!1,qr=!1,QU=typeof WeakSet=="function"?WeakSet:Set,He=null;function Go(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ar(t,e,n)}else r.current=null}function _m(t,e,r){try{r()}catch(n){Ar(t,e,n)}}var Sv=!1;function NU(t,e){if(am=fh,t=K_(),rw(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,A=n.focusNode;n=n.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var i=0,l=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==A||n!==0&&h.nodeType!==3||(a=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===s&&(l=i),f===A&&++d===n&&(a=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||a===-1?null:{start:l,end:a}}else r=null}r=r||{start:0,end:0}}else r=null;for(lm={focusedElem:t,selectionRange:r},fh=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,E=y.memoizedState,C=e.stateNode,x=C.getSnapshotBeforeUpdate(e.elementType===e.type?w:zn(e.type,w),E);C.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(S){Ar(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return y=Sv,Sv=!1,y}function Yl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&_m(e,r,A)}s=s.next}while(s!==n)}}function If(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Im(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function MI(t){var e=t.alternate;e!==null&&(t.alternate=null,MI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[os],delete e[Cc],delete e[dm],delete e[pU],delete e[mU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OI(t){return t.tag===5||t.tag===3||t.tag===4}function Uv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Em(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=mh));else if(n!==4&&(t=t.child,t!==null))for(Em(t,e,r),t=t.sibling;t!==null;)Em(t,e,r),t=t.sibling}function Tm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Tm(t,e,r),t=t.sibling;t!==null;)Tm(t,e,r),t=t.sibling}var Ur=null,$n=!1;function nA(t,e,r){for(r=r.child;r!==null;)HI(t,e,r),r=r.sibling}function HI(t,e,r){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(wf,r)}catch{}switch(r.tag){case 5:qr||Go(r,e);case 6:var n=Ur,s=$n;Ur=null,nA(t,e,r),Ur=n,$n=s,Ur!==null&&($n?(t=Ur,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ur.removeChild(r.stateNode));break;case 18:Ur!==null&&($n?(t=Ur,r=r.stateNode,t.nodeType===8?Wg(t.parentNode,r):t.nodeType===1&&Wg(t,r),xc(t)):Wg(Ur,r.stateNode));break;case 4:n=Ur,s=$n,Ur=r.stateNode.containerInfo,$n=!0,nA(t,e,r),Ur=n,$n=s;break;case 0:case 11:case 14:case 15:if(!qr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&_m(r,e,i),s=s.next}while(s!==n)}nA(t,e,r);break;case 1:if(!qr&&(Go(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ar(r,e,l)}nA(t,e,r);break;case 21:nA(t,e,r);break;case 22:r.mode&1?(qr=(n=qr)||r.memoizedState!==null,nA(t,e,r),qr=n):nA(t,e,r);break;default:nA(t,e,r)}}function Qv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new QU),e.forEach(function(n){var s=VU.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Kn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var A=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ur=l.stateNode,$n=!1;break e;case 3:Ur=l.stateNode.containerInfo,$n=!0;break e;case 4:Ur=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(Ur===null)throw Error(pe(160));HI(A,i,s),Ur=null,$n=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Ar(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VI(e,t),e=e.sibling}function VI(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),ns(t),n&4){try{Yl(3,t,t.return),If(3,t)}catch(w){Ar(t,t.return,w)}try{Yl(5,t,t.return)}catch(w){Ar(t,t.return,w)}}break;case 1:Kn(e,t),ns(t),n&512&&r!==null&&Go(r,r.return);break;case 5:if(Kn(e,t),ns(t),n&512&&r!==null&&Go(r,r.return),t.flags&32){var s=t.stateNode;try{gc(s,"")}catch(w){Ar(t,t.return,w)}}if(n&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=r!==null?r.memoizedProps:A,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&A.type==="radio"&&A.name!=null&&u_(s,A),Yp(l,i);var c=Yp(l,A);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?p_(s,h):d==="dangerouslySetInnerHTML"?f_(s,h):d==="children"?gc(s,h):V0(s,d,h,c)}switch(l){case"input":$p(s,A);break;case"textarea":d_(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var m=A.value;m!=null?Xo(s,!!A.multiple,m,!1):f!==!!A.multiple&&(A.defaultValue!=null?Xo(s,!!A.multiple,A.defaultValue,!0):Xo(s,!!A.multiple,A.multiple?[]:"",!1))}s[Cc]=A}catch(w){Ar(t,t.return,w)}}break;case 6:if(Kn(e,t),ns(t),n&4){if(t.stateNode===null)throw Error(pe(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(w){Ar(t,t.return,w)}}break;case 3:if(Kn(e,t),ns(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xc(e.containerInfo)}catch(w){Ar(t,t.return,w)}break;case 4:Kn(e,t),ns(t);break;case 13:Kn(e,t),ns(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(Bw=lr())),n&4&&Qv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(qr=(c=qr)||d,Kn(e,t),qr=c):Kn(e,t),ns(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(He=t,d=t.child;d!==null;){for(h=He=d;He!==null;){switch(f=He,m=f.child,f.tag){case 0:case 11:case 14:case 15:Yl(4,f,f.return);break;case 1:Go(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Ar(n,r,w)}}break;case 5:Go(f,f.return);break;case 22:if(f.memoizedState!==null){Rv(h);continue}}m!==null?(m.return=f,He=m):Rv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(l=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=g_("display",i))}catch(w){Ar(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){Ar(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kn(e,t),ns(t),n&4&&Qv(t);break;case 21:break;default:Kn(e,t),ns(t)}}function ns(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(OI(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(gc(s,""),n.flags&=-33);var A=Uv(t);Tm(t,A,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Uv(t);Em(t,l,i);break;default:throw Error(pe(161))}}catch(a){Ar(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RU(t,e,r){He=t,KI(t)}function KI(t,e,r){for(var n=(t.mode&1)!==0;He!==null;){var s=He,A=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Ju;if(!i){var l=s.alternate,a=l!==null&&l.memoizedState!==null||qr;l=Ju;var c=qr;if(Ju=i,(qr=a)&&!c)for(He=s;He!==null;)i=He,a=i.child,i.tag===22&&i.memoizedState!==null?Dv(s):a!==null?(a.return=i,He=a):Dv(s);for(;A!==null;)He=A,KI(A),A=A.sibling;He=s,Ju=l,qr=c}Nv(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,He=A):Nv(t)}}function Nv(t){for(;He!==null;){var e=He;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qr||If(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!qr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:zn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&wv(e,A,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}wv(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break;case"img":a.src&&(r.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}qr||e.flags&512&&Im(e)}catch(f){Ar(e,e.return,f)}}if(e===t){He=null;break}if(r=e.sibling,r!==null){r.return=e.return,He=r;break}He=e.return}}function Rv(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var r=e.sibling;if(r!==null){r.return=e.return,He=r;break}He=e.return}}function Dv(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{If(4,e)}catch(a){Ar(e,r,a)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(a){Ar(e,s,a)}}var A=e.return;try{Im(e)}catch(a){Ar(e,A,a)}break;case 5:var i=e.return;try{Im(e)}catch(a){Ar(e,i,a)}}}catch(a){Ar(e,e.return,a)}if(e===t){He=null;break}var l=e.sibling;if(l!==null){l.return=e.return,He=l;break}He=e.return}}var DU=Math.ceil,Th=Gs.ReactCurrentDispatcher,yw=Gs.ReactCurrentOwner,Ln=Gs.ReactCurrentBatchConfig,Bt=0,Er=null,fr=null,jr=0,vn=0,zo=Ai(0),wr=0,Fc=null,zi=0,Ef=0,vw=0,Zl=null,cn=null,Bw=0,fa=1/0,Cs=null,kh=!1,km=null,RA=null,Yu=!1,bA=null,Fh=0,ec=0,Fm=null,Hd=-1,Vd=0;function nn(){return Bt&6?lr():Hd!==-1?Hd:Hd=lr()}function DA(t){return t.mode&1?Bt&2&&jr!==0?jr&-jr:xU.transition!==null?(Vd===0&&(Vd=T_()),Vd):(t=kt,t!==0||(t=window.event,t=t===void 0?16:R_(t.type)),t):1}function Jn(t,e,r,n){if(50<ec)throw ec=0,Fm=null,Error(pe(185));Yc(t,r,n),(!(Bt&2)||t!==Er)&&(t===Er&&(!(Bt&2)&&(Ef|=r),wr===4&&fA(t,jr)),mn(t,n),r===1&&Bt===0&&!(e.mode&1)&&(fa=lr()+500,bf&&ii()))}function mn(t,e){var r=t.callbackNode;xS(t,e);var n=hh(t,t===Er?jr:0);if(n===0)r!==null&&Gy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Gy(r),e===1)t.tag===0?wU(jv.bind(null,t)):eI(jv.bind(null,t)),fU(function(){!(Bt&6)&&ii()}),r=null;else{switch(k_(n)){case 1:r=W0;break;case 4:r=I_;break;case 16:r=dh;break;case 536870912:r=E_;break;default:r=dh}r=YI(r,GI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function GI(t,e){if(Hd=-1,Vd=0,Bt&6)throw Error(pe(327));var r=t.callbackNode;if(ta()&&t.callbackNode!==r)return null;var n=hh(t,t===Er?jr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Sh(t,n);else{e=n;var s=Bt;Bt|=2;var A=$I();(Er!==t||jr!==e)&&(Cs=null,fa=lr()+500,ji(t,e));do try{LU();break}catch(l){zI(t,l)}while(!0);ow(),Th.current=A,Bt=s,fr!==null?e=0:(Er=null,jr=0,e=wr)}if(e!==0){if(e===2&&(s=nm(t),s!==0&&(n=s,e=Sm(t,s))),e===1)throw r=Fc,ji(t,0),fA(t,n),mn(t,lr()),r;if(e===6)fA(t,n);else{if(s=t.current.alternate,!(n&30)&&!jU(s)&&(e=Sh(t,n),e===2&&(A=nm(t),A!==0&&(n=A,e=Sm(t,A))),e===1))throw r=Fc,ji(t,0),fA(t,n),mn(t,lr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(pe(345));case 2:_i(t,cn,Cs);break;case 3:if(fA(t,n),(n&130023424)===n&&(e=Bw+500-lr(),10<e)){if(hh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=um(_i.bind(null,t,cn,Cs),e);break}_i(t,cn,Cs);break;case 4:if(fA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-Xn(n);A=1<<i,i=e[i],i>s&&(s=i),n&=~A}if(n=s,n=lr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*DU(n/1960))-n,10<n){t.timeoutHandle=um(_i.bind(null,t,cn,Cs),n);break}_i(t,cn,Cs);break;case 5:_i(t,cn,Cs);break;default:throw Error(pe(329))}}}return mn(t,lr()),t.callbackNode===r?GI.bind(null,t):null}function Sm(t,e){var r=Zl;return t.current.memoizedState.isDehydrated&&(ji(t,e).flags|=256),t=Sh(t,e),t!==2&&(e=cn,cn=r,e!==null&&Um(e)),t}function Um(t){cn===null?cn=t:cn.push.apply(cn,t)}function jU(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],A=s.getSnapshot;s=s.value;try{if(!Zn(A(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fA(t,e){for(e&=~vw,e&=~Ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Xn(e),n=1<<r;t[r]=-1,e&=~n}}function jv(t){if(Bt&6)throw Error(pe(327));ta();var e=hh(t,0);if(!(e&1))return mn(t,lr()),null;var r=Sh(t,e);if(t.tag!==0&&r===2){var n=nm(t);n!==0&&(e=n,r=Sm(t,n))}if(r===1)throw r=Fc,ji(t,0),fA(t,e),mn(t,lr()),r;if(r===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_i(t,cn,Cs),mn(t,lr()),null}function bw(t,e){var r=Bt;Bt|=1;try{return t(e)}finally{Bt=r,Bt===0&&(fa=lr()+500,bf&&ii())}}function $i(t){bA!==null&&bA.tag===0&&!(Bt&6)&&ta();var e=Bt;Bt|=1;var r=Ln.transition,n=kt;try{if(Ln.transition=null,kt=1,t)return t()}finally{kt=n,Ln.transition=r,Bt=e,!(Bt&6)&&ii()}}function Cw(){vn=zo.current,Kt(zo)}function ji(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,hU(r)),fr!==null)for(r=fr.return;r!==null;){var n=r;switch(sw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wh();break;case 3:da(),Kt(gn),Kt(Yr),hw();break;case 5:dw(n);break;case 4:da();break;case 13:Kt(Zt);break;case 19:Kt(Zt);break;case 10:aw(n.type._context);break;case 22:case 23:Cw()}r=r.return}if(Er=t,fr=t=jA(t.current,null),jr=vn=e,wr=0,Fc=null,vw=Ef=zi=0,cn=Zl=null,Ni!==null){for(e=0;e<Ni.length;e++)if(r=Ni[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,A=r.pending;if(A!==null){var i=A.next;A.next=s,n.next=i}r.pending=n}Ni=null}return t}function zI(t,e){do{var r=fr;try{if(ow(),Ld.current=Eh,Ih){for(var n=er.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ih=!1}if(Gi=0,_r=pr=er=null,Jl=!1,Ec=0,yw.current=null,r===null||r.return===null){wr=1,Fc=e,fr=null;break}e:{var A=t,i=r.return,l=r,a=e;if(e=jr,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Cv(i);if(m!==null){m.flags&=-257,_v(m,i,l,A,e),m.mode&1&&bv(A,c,e),e=m,a=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(a),e.updateQueue=w}else y.add(a);break e}else{if(!(e&1)){bv(A,c,e),_w();break e}a=Error(pe(426))}}else if($t&&l.mode&1){var E=Cv(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),_v(E,i,l,A,e),Aw(ha(a,l));break e}}A=a=ha(a,l),wr!==4&&(wr=2),Zl===null?Zl=[A]:Zl.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var C=kI(A,a,e);mv(A,C);break e;case 1:l=a;var x=A.type,_=A.stateNode;if(!(A.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(RA===null||!RA.has(_)))){A.flags|=65536,e&=-e,A.lanes|=e;var S=FI(A,l,e);mv(A,S);break e}}A=A.return}while(A!==null)}qI(r)}catch(U){e=U,fr===r&&r!==null&&(fr=r=r.return);continue}break}while(!0)}function $I(){var t=Th.current;return Th.current=Eh,t===null?Eh:t}function _w(){(wr===0||wr===3||wr===2)&&(wr=4),Er===null||!(zi&268435455)&&!(Ef&268435455)||fA(Er,jr)}function Sh(t,e){var r=Bt;Bt|=2;var n=$I();(Er!==t||jr!==e)&&(Cs=null,ji(t,e));do try{PU();break}catch(s){zI(t,s)}while(!0);if(ow(),Bt=r,Th.current=n,fr!==null)throw Error(pe(261));return Er=null,jr=0,wr}function PU(){for(;fr!==null;)WI(fr)}function LU(){for(;fr!==null&&!cS();)WI(fr)}function WI(t){var e=JI(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?qI(t):fr=e,yw.current=null}function qI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=UU(r,e),r!==null){r.flags&=32767,fr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wr=6,fr=null;return}}else if(r=SU(r,e,vn),r!==null){fr=r;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);wr===0&&(wr=5)}function _i(t,e,r){var n=kt,s=Ln.transition;try{Ln.transition=null,kt=1,MU(t,e,r,n)}finally{Ln.transition=s,kt=n}return null}function MU(t,e,r,n){do ta();while(bA!==null);if(Bt&6)throw Error(pe(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var A=r.lanes|r.childLanes;if(yS(t,A),t===Er&&(fr=Er=null,jr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yu||(Yu=!0,YI(dh,function(){return ta(),null})),A=(r.flags&15990)!==0,r.subtreeFlags&15990||A){A=Ln.transition,Ln.transition=null;var i=kt;kt=1;var l=Bt;Bt|=4,yw.current=null,NU(t,r),VI(r,t),iU(lm),fh=!!am,lm=am=null,t.current=r,RU(r),uS(),Bt=l,kt=i,Ln.transition=A}else t.current=r;if(Yu&&(Yu=!1,bA=t,Fh=s),A=t.pendingLanes,A===0&&(RA=null),fS(r.stateNode),mn(t,lr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(kh)throw kh=!1,t=km,km=null,t;return Fh&1&&t.tag!==0&&ta(),A=t.pendingLanes,A&1?t===Fm?ec++:(ec=0,Fm=t):ec=0,ii(),null}function ta(){if(bA!==null){var t=k_(Fh),e=Ln.transition,r=kt;try{if(Ln.transition=null,kt=16>t?16:t,bA===null)var n=!1;else{if(t=bA,bA=null,Fh=0,Bt&6)throw Error(pe(331));var s=Bt;for(Bt|=4,He=t.current;He!==null;){var A=He,i=A.child;if(He.flags&16){var l=A.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(He=c;He!==null;){var d=He;switch(d.tag){case 0:case 11:case 15:Yl(8,d,A)}var h=d.child;if(h!==null)h.return=d,He=h;else for(;He!==null;){d=He;var f=d.sibling,m=d.return;if(MI(d),d===c){He=null;break}if(f!==null){f.return=m,He=f;break}He=m}}}var y=A.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}He=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,He=i;else e:for(;He!==null;){if(A=He,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Yl(9,A,A.return)}var C=A.sibling;if(C!==null){C.return=A.return,He=C;break e}He=A.return}}var x=t.current;for(He=x;He!==null;){i=He;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,He=_;else e:for(i=x;He!==null;){if(l=He,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:If(9,l)}}catch(U){Ar(l,l.return,U)}if(l===i){He=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,He=S;break e}He=l.return}}if(Bt=s,ii(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(wf,t)}catch{}n=!0}return n}finally{kt=r,Ln.transition=e}}return!1}function Pv(t,e,r){e=ha(r,e),e=kI(t,e,1),t=NA(t,e,1),e=nn(),t!==null&&(Yc(t,1,e),mn(t,e))}function Ar(t,e,r){if(t.tag===3)Pv(t,t,r);else for(;e!==null;){if(e.tag===3){Pv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(RA===null||!RA.has(n))){t=ha(r,t),t=FI(e,t,1),e=NA(e,t,1),t=nn(),e!==null&&(Yc(e,1,t),mn(e,t));break}}e=e.return}}function OU(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&r,Er===t&&(jr&r)===r&&(wr===4||wr===3&&(jr&130023424)===jr&&500>lr()-Bw?ji(t,0):vw|=r),mn(t,e)}function XI(t,e){e===0&&(t.mode&1?(e=Hu,Hu<<=1,!(Hu&130023424)&&(Hu=4194304)):e=1);var r=nn();t=Ps(t,e),t!==null&&(Yc(t,e,r),mn(t,r))}function HU(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),XI(t,r)}function VU(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(e),XI(t,r)}var JI;JI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)un=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return un=!1,FU(t,e,r);un=!!(t.flags&131072)}else un=!1,$t&&e.flags&1048576&&tI(e,vh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Od(t,e),t=e.pendingProps;var s=la(e,Yr.current);ea(e,r),s=gw(null,e,n,t,s,r);var A=pw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(n)?(A=!0,xh(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cw(e),s.updater=_f,e.stateNode=s,s._reactInternals=e,wm(e,n,t,r),e=vm(null,e,n,!0,A,r)):(e.tag=0,$t&&A&&nw(e),tn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Od(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=GU(n),t=zn(n,t),s){case 0:e=ym(null,e,n,t,r);break e;case 1:e=Tv(null,e,n,t,r);break e;case 11:e=Iv(null,e,n,t,r);break e;case 14:e=Ev(null,e,n,zn(n.type,t),r);break e}throw Error(pe(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zn(n,s),ym(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zn(n,s),Tv(t,e,n,s,r);case 3:e:{if(NI(e),t===null)throw Error(pe(387));n=e.pendingProps,A=e.memoizedState,s=A.element,oI(t,e),Ch(e,n,null,r);var i=e.memoizedState;if(n=i.element,A.isDehydrated)if(A={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=ha(Error(pe(423)),e),e=kv(t,e,n,r,s);break e}else if(n!==s){s=ha(Error(pe(424)),e),e=kv(t,e,n,r,s);break e}else for(Bn=QA(e.stateNode.containerInfo.firstChild),bn=e,$t=!0,Wn=null,r=AI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ca(),n===s){e=Ls(t,e,r);break e}tn(t,e,n,r)}e=e.child}return e;case 5:return aI(e),t===null&&gm(e),n=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,cm(n,s)?i=null:A!==null&&cm(n,A)&&(e.flags|=32),QI(t,e),tn(t,e,i,r),e.child;case 6:return t===null&&gm(e),null;case 13:return RI(t,e,r);case 4:return uw(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ua(e,null,n,r):tn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zn(n,s),Iv(t,e,n,s,r);case 7:return tn(t,e,e.pendingProps,r),e.child;case 8:return tn(t,e,e.pendingProps.children,r),e.child;case 12:return tn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,Pt(Bh,n._currentValue),n._currentValue=i,A!==null)if(Zn(A.value,i)){if(A.children===s.children&&!gn.current){e=Ls(t,e,r);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var l=A.dependencies;if(l!==null){i=A.child;for(var a=l.firstContext;a!==null;){if(a.context===n){if(A.tag===1){a=Ns(-1,r&-r),a.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}A.lanes|=r,a=A.alternate,a!==null&&(a.lanes|=r),pm(A.return,r,e),l.lanes|=r;break}a=a.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(pe(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),pm(i,r,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}tn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ea(e,r),s=Mn(s),n=n(s),e.flags|=1,tn(t,e,n,r),e.child;case 14:return n=e.type,s=zn(n,e.pendingProps),s=zn(n.type,s),Ev(t,e,n,s,r);case 15:return SI(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:zn(n,s),Od(t,e),e.tag=1,pn(n)?(t=!0,xh(e)):t=!1,ea(e,r),TI(e,n,s),wm(e,n,s,r),vm(null,e,n,!0,t,r);case 19:return DI(t,e,r);case 22:return UI(t,e,r)}throw Error(pe(156,e.tag))};function YI(t,e){return __(t,e)}function KU(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,r,n){return new KU(t,e,r,n)}function Iw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GU(t){if(typeof t=="function")return Iw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===G0)return 11;if(t===z0)return 14}return 2}function jA(t,e){var r=t.alternate;return r===null?(r=Dn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Kd(t,e,r,n,s,A){var i=2;if(n=t,typeof t=="function")Iw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Do:return Pi(r.children,s,A,e);case K0:i=8,s|=8;break;case Hp:return t=Dn(12,r,e,s|2),t.elementType=Hp,t.lanes=A,t;case Vp:return t=Dn(13,r,e,s),t.elementType=Vp,t.lanes=A,t;case Kp:return t=Dn(19,r,e,s),t.elementType=Kp,t.lanes=A,t;case a_:return Tf(r,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i_:i=10;break e;case o_:i=9;break e;case G0:i=11;break e;case z0:i=14;break e;case cA:i=16,n=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=Dn(i,r,e,s),e.elementType=t,e.type=n,e.lanes=A,e}function Pi(t,e,r,n){return t=Dn(7,t,n,e),t.lanes=r,t}function Tf(t,e,r,n){return t=Dn(22,t,n,e),t.elementType=a_,t.lanes=r,t.stateNode={isHidden:!1},t}function rp(t,e,r){return t=Dn(6,t,null,e),t.lanes=r,t}function np(t,e,r){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zU(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jg(0),this.expirationTimes=jg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ew(t,e,r,n,s,A,i,l,a){return t=new zU(t,e,r,l,a),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Dn(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cw(A),t}function $U(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ZI(t){if(!t)return zA;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var r=t.type;if(pn(r))return Z_(t,r,e)}return e}function eE(t,e,r,n,s,A,i,l,a){return t=Ew(r,n,!0,t,s,A,i,l,a),t.context=ZI(null),r=t.current,n=nn(),s=DA(r),A=Ns(n,s),A.callback=e??null,NA(r,A,s),t.current.lanes=s,Yc(t,s,n),mn(t,n),t}function kf(t,e,r,n){var s=e.current,A=nn(),i=DA(s);return r=ZI(r),e.context===null?e.context=r:e.pendingContext=r,e=Ns(A,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=NA(s,e,i),t!==null&&(Jn(t,s,i,A),Pd(t,s,i)),i}function Uh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Tw(t,e){Lv(t,e),(t=t.alternate)&&Lv(t,e)}function WU(){return null}var tE=typeof reportError=="function"?reportError:function(t){console.error(t)};function kw(t){this._internalRoot=t}Ff.prototype.render=kw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));kf(t,e,null,null)};Ff.prototype.unmount=kw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$i(function(){kf(null,t,null,null)}),e[js]=null}};function Ff(t){this._internalRoot=t}Ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=U_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<hA.length&&e!==0&&e<hA[r].priority;r++);hA.splice(r,0,t),r===0&&N_(t)}};function Fw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mv(){}function qU(t,e,r,n,s){if(s){if(typeof n=="function"){var A=n;n=function(){var c=Uh(i);A.call(c)}}var i=eE(e,n,t,0,null,!1,!1,"",Mv);return t._reactRootContainer=i,t[js]=i.current,Bc(t.nodeType===8?t.parentNode:t),$i(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=Uh(a);l.call(c)}}var a=Ew(t,0,!1,null,null,!1,!1,"",Mv);return t._reactRootContainer=a,t[js]=a.current,Bc(t.nodeType===8?t.parentNode:t),$i(function(){kf(e,a,r,n)}),a}function Uf(t,e,r,n,s){var A=r._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var l=s;s=function(){var a=Uh(i);l.call(a)}}kf(e,i,t,s)}else i=qU(r,e,t,s,n);return Uh(i)}F_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Fl(e.pendingLanes);r!==0&&(q0(e,r|1),mn(e,lr()),!(Bt&6)&&(fa=lr()+500,ii()))}break;case 13:$i(function(){var n=Ps(t,1);if(n!==null){var s=nn();Jn(n,t,1,s)}}),Tw(t,1)}};X0=function(t){if(t.tag===13){var e=Ps(t,134217728);if(e!==null){var r=nn();Jn(e,t,134217728,r)}Tw(t,134217728)}};S_=function(t){if(t.tag===13){var e=DA(t),r=Ps(t,e);if(r!==null){var n=nn();Jn(r,t,e,n)}Tw(t,e)}};U_=function(){return kt};Q_=function(t,e){var r=kt;try{return kt=t,e()}finally{kt=r}};em=function(t,e,r){switch(e){case"input":if($p(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Bf(n);if(!s)throw Error(pe(90));c_(n),$p(n,s)}}}break;case"textarea":d_(t,r);break;case"select":e=r.value,e!=null&&Xo(t,!!r.multiple,e,!1)}};x_=bw;y_=$i;var XU={usingClientEntryPoint:!1,Events:[eu,Mo,Bf,m_,w_,bw]},gl={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JU={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b_(t),t===null?null:t.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||WU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{wf=Zu.inject(JU),cs=Zu}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XU;Tn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fw(e))throw Error(pe(200));return $U(t,e,null,r)};Tn.createRoot=function(t,e){if(!Fw(t))throw Error(pe(299));var r=!1,n="",s=tE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ew(t,1,!1,null,null,r,!1,n,s),t[js]=e.current,Bc(t.nodeType===8?t.parentNode:t),new kw(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=b_(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return $i(t)};Tn.hydrate=function(t,e,r){if(!Sf(e))throw Error(pe(200));return Uf(null,t,e,!0,r)};Tn.hydrateRoot=function(t,e,r){if(!Fw(t))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,s=!1,A="",i=tE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(A=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=eE(e,null,t,1,r??null,s,!1,A,i),t[js]=e.current,Bc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ff(e)};Tn.render=function(t,e,r){if(!Sf(e))throw Error(pe(200));return Uf(null,t,e,!1,r)};Tn.unmountComponentAtNode=function(t){if(!Sf(t))throw Error(pe(40));return t._reactRootContainer?($i(function(){Uf(null,null,t,!1,function(){t._reactRootContainer=null,t[js]=null})}),!0):!1};Tn.unstable_batchedUpdates=bw;Tn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Sf(r))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return Uf(t,e,r,!1,n)};Tn.version="18.3.1-next-f1338f8080-20240426";function rE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rE)}catch(t){console.error(t)}}rE(),r_.exports=Tn;var YU=r_.exports,Ov=YU;Mp.createRoot=Ov.createRoot,Mp.hydrateRoot=Ov.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sc(){return Sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sc.apply(this,arguments)}var CA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(CA||(CA={}));const Hv="popstate";function ZU(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:l="",hash:a=""}=ao(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Qm("",{pathname:i,search:l,hash:a},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(s,A){let i=s.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let a=s.location.href,c=a.indexOf("#");l=c===-1?a:a.slice(0,c)}return l+"#"+(typeof A=="string"?A:Qh(A))}function n(s,A){Qf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return tQ(e,r,n,t)}function tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eQ(){return Math.random().toString(36).substr(2,8)}function Vv(t,e){return{usr:t.state,key:t.key,idx:e}}function Qm(t,e,r,n){return r===void 0&&(r=null),Sc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:r,key:e&&e.key||n||eQ()})}function Qh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ao(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function tQ(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:A=!1}=n,i=s.history,l=CA.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Sc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=CA.Pop;let E=d(),C=E==null?null:E-c;c=E,a&&a({action:l,location:w.location,delta:C})}function f(E,C){l=CA.Push;let x=Qm(w.location,E,C);r&&r(x,E),c=d()+1;let _=Vv(x,c),S=w.createHref(x);try{i.pushState(_,"",S)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(S)}A&&a&&a({action:l,location:w.location,delta:1})}function m(E,C){l=CA.Replace;let x=Qm(w.location,E,C);r&&r(x,E),c=d();let _=Vv(x,c),S=w.createHref(x);i.replaceState(_,"",S),A&&a&&a({action:l,location:w.location,delta:0})}function y(E){let C=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof E=="string"?E:Qh(E);return x=x.replace(/ $/,"%20"),tr(C,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,C)}let w={get action(){return l},get location(){return t(s,i)},listen(E){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Hv,h),a=E,()=>{s.removeEventListener(Hv,h),a=null}},createHref(E){return e(s,E)},createURL:y,encodeLocation(E){let C=y(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:m,go(E){return i.go(E)}};return w}var Kv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kv||(Kv={}));function rQ(t,e,r){return r===void 0&&(r="/"),nQ(t,e,r)}function nQ(t,e,r,n){let s=typeof e=="string"?ao(e):e,A=ga(s.pathname||"/",r);if(A==null)return null;let i=nE(t);sQ(i);let l=null;for(let a=0;l==null&&a<i.length;++a){let c=gQ(A);l=hQ(i[a],c)}return l}function nE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(A,i,l)=>{let a={relativePath:l===void 0?A.path||"":l,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};a.relativePath.startsWith("/")&&(tr(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(n.length));let c=PA([n,a.relativePath]),d=r.concat(a);A.children&&A.children.length>0&&(tr(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),nE(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:uQ(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var l;if(A.path===""||!((l=A.path)!=null&&l.includes("?")))s(A,i);else for(let a of sE(A.path))s(A,i,a)}),e}function sE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return s?[A,""]:[A];let i=sE(n.join("/")),l=[];return l.push(...i.map(a=>a===""?A:[A,a].join("/"))),s&&l.push(...i),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function sQ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:dQ(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const AQ=/^:[\w-]+$/,iQ=3,oQ=2,aQ=1,lQ=10,cQ=-2,Gv=t=>t==="*";function uQ(t,e){let r=t.split("/"),n=r.length;return r.some(Gv)&&(n+=cQ),e&&(n+=oQ),r.filter(s=>!Gv(s)).reduce((s,A)=>s+(AQ.test(A)?iQ:A===""?aQ:lQ),n)}function dQ(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function hQ(t,e,r){let{routesMeta:n}=t,s={},A="/",i=[];for(let l=0;l<n.length;++l){let a=n[l],c=l===n.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=Nm({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:PA([A,h.pathname]),pathnameBase:yQ(PA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=PA([A,h.pathnameBase]))}return i}function Nm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=fQ(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let w=l[h]||"";i=A.slice(0,A.length-w.length).replace(/(.)\/+$/,"$1")}const y=l[h];return m&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function fQ(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Qf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,a)=>(n.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function gQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ga(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const pQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mQ=t=>pQ.test(t);function wQ(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ao(t):t,A;if(r)if(mQ(r))A=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Qf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?A=zv(r.substring(1),"/"):A=zv(r,e)}else A=e;return{pathname:A,search:vQ(n),hash:BQ(s)}}function zv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function sp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xQ(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Sw(t,e){let r=xQ(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Uw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ao(t):(s=Sc({},t),tr(!s.pathname||!s.pathname.includes("?"),sp("?","pathname","search",s)),tr(!s.pathname||!s.pathname.includes("#"),sp("#","pathname","hash",s)),tr(!s.search||!s.search.includes("#"),sp("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,l;if(i==null)l=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let a=wQ(s,l),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&r.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const PA=t=>t.join("/").replace(/\/\/+/g,"/"),yQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AE=["post","put","patch","delete"];new Set(AE);const CQ=["get",...AE];new Set(CQ);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uc.apply(this,arguments)}const Nf=T.createContext(null),iE=T.createContext(null),zs=T.createContext(null),Rf=T.createContext(null),$s=T.createContext({outlet:null,matches:[],isDataRoute:!1}),oE=T.createContext(null);function _Q(t,e){let{relative:r}=e===void 0?{}:e;ja()||tr(!1);let{basename:n,navigator:s}=T.useContext(zs),{hash:A,pathname:i,search:l}=Df(t,{relative:r}),a=i;return n!=="/"&&(a=i==="/"?n:PA([n,i])),s.createHref({pathname:a,search:l,hash:A})}function ja(){return T.useContext(Rf)!=null}function oi(){return ja()||tr(!1),T.useContext(Rf).location}function aE(t){T.useContext(zs).static||T.useLayoutEffect(t)}function ru(){let{isDataRoute:t}=T.useContext($s);return t?MQ():IQ()}function IQ(){ja()||tr(!1);let t=T.useContext(Nf),{basename:e,future:r,navigator:n}=T.useContext(zs),{matches:s}=T.useContext($s),{pathname:A}=oi(),i=JSON.stringify(Sw(s,r.v7_relativeSplatPath)),l=T.useRef(!1);return aE(()=>{l.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let h=Uw(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:PA([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,A,t])}const EQ=T.createContext(null);function TQ(t){let e=T.useContext($s).outlet;return e&&T.createElement(EQ.Provider,{value:t},e)}function Df(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(zs),{matches:s}=T.useContext($s),{pathname:A}=oi(),i=JSON.stringify(Sw(s,n.v7_relativeSplatPath));return T.useMemo(()=>Uw(t,JSON.parse(i),A,r==="path"),[t,i,A,r])}function kQ(t,e){return FQ(t,e)}function FQ(t,e,r,n){ja()||tr(!1);let{navigator:s}=T.useContext(zs),{matches:A}=T.useContext($s),i=A[A.length-1],l=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=oi(),d;if(e){var h;let E=typeof e=="string"?ao(e):e;a==="/"||(h=E.pathname)!=null&&h.startsWith(a)||tr(!1),d=E}else d=c;let f=d.pathname||"/",m=f;if(a!=="/"){let E=a.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=rQ(t,{pathname:m}),w=RQ(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:PA([a,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?a:PA([a,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),A,r,n);return e&&w?T.createElement(Rf.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:CA.Pop}},w):w}function SQ(){let t=LQ(),e=bQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:s},r):null,null)}const UQ=T.createElement(SQ,null);class QQ extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement($s.Provider,{value:this.props.routeContext},T.createElement(oE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NQ(t){let{routeContext:e,match:r,children:n}=t,s=T.useContext(Nf);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement($s.Provider,{value:e},n)}function RQ(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var A;if(!r)return null;if(r.errors)t=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||tr(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,y=!1,w=null,E=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||UQ,a&&(c<0&&f===0?(OQ("route-fallback"),y=!0,E=null):c===f&&(y=!0,E=h.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,f+1)),x=()=>{let _;return m?_=w:y?_=E:h.route.Component?_=T.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,T.createElement(NQ,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(QQ,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:x(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):x()},null)}var lE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lE||{}),cE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cE||{});function DQ(t){let e=T.useContext(Nf);return e||tr(!1),e}function jQ(t){let e=T.useContext(iE);return e||tr(!1),e}function PQ(t){let e=T.useContext($s);return e||tr(!1),e}function uE(t){let e=PQ(),r=e.matches[e.matches.length-1];return r.route.id||tr(!1),r.route.id}function LQ(){var t;let e=T.useContext(oE),r=jQ(),n=uE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function MQ(){let{router:t}=DQ(lE.UseNavigateStable),e=uE(cE.UseNavigateStable),r=T.useRef(!1);return aE(()=>{r.current=!0}),T.useCallback(function(s,A){A===void 0&&(A={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Uc({fromRouteId:e},A)))},[t,e])}const $v={};function OQ(t,e,r){$v[t]||($v[t]=!0)}function HQ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nh(t){let{to:e,replace:r,state:n,relative:s}=t;ja()||tr(!1);let{future:A,static:i}=T.useContext(zs),{matches:l}=T.useContext($s),{pathname:a}=oi(),c=ru(),d=Uw(e,Sw(l,A.v7_relativeSplatPath),a,s==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function VQ(t){return TQ(t.context)}function Zr(t){tr(!1)}function KQ(t){let{basename:e="/",children:r=null,location:n,navigationType:s=CA.Pop,navigator:A,static:i=!1,future:l}=t;ja()&&tr(!1);let a=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:a,navigator:A,static:i,future:Uc({v7_relativeSplatPath:!1},l)}),[a,l,A,i]);typeof n=="string"&&(n=ao(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,w=T.useMemo(()=>{let E=ga(d,a);return E==null?null:{location:{pathname:E,search:h,hash:f,state:m,key:y},navigationType:s}},[a,d,h,f,m,y,s]);return w==null?null:T.createElement(zs.Provider,{value:c},T.createElement(Rf.Provider,{children:r,value:w}))}function GQ(t){let{children:e,location:r}=t;return kQ(Rm(e),r)}new Promise(()=>{});function Rm(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,s)=>{if(!T.isValidElement(n))return;let A=[...e,s];if(n.type===T.Fragment){r.push.apply(r,Rm(n.props.children,A));return}n.type!==Zr&&tr(!1),!n.props.index||!n.props.children||tr(!1);let i={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Rm(n.props.children,A)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rh(){return Rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rh.apply(this,arguments)}function dE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,A;for(A=0;A<n.length;A++)s=n[A],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function zQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $Q(t,e){return t.button===0&&(!e||e==="_self")&&!zQ(t)}function Dm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function WQ(t,e){let r=Dm(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(A=>{r.append(s,A)})}),r}const qQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XQ=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],JQ="6";try{window.__reactRouterVersion=JQ}catch{}const YQ=T.createContext({isTransitioning:!1}),ZQ="startTransition",Wv=O2[ZQ];function eN(t){let{basename:e,children:r,future:n,window:s}=t,A=T.useRef();A.current==null&&(A.current=ZU({window:s,v5Compat:!0}));let i=A.current,[l,a]=T.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&Wv?Wv(()=>a(h)):a(h)},[a,c]);return T.useLayoutEffect(()=>i.listen(d),[i,d]),T.useEffect(()=>HQ(n),[n]),T.createElement(KQ,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const tN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nN=T.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:A,replace:i,state:l,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=dE(e,qQ),{basename:m}=T.useContext(zs),y,w=!1;if(typeof c=="string"&&rN.test(c)&&(y=c,tN))try{let _=new URL(window.location.href),S=c.startsWith("//")?new URL(_.protocol+c):new URL(c),U=ga(S.pathname,m);S.origin===_.origin&&U!=null?c=U+S.search+S.hash:w=!0}catch{}let E=_Q(c,{relative:s}),C=AN(c,{replace:i,state:l,target:a,preventScrollReset:d,relative:s,viewTransition:h});function x(_){n&&n(_),_.defaultPrevented||C(_)}return T.createElement("a",Rh({},f,{href:y||E,onClick:w||A?n:x,ref:r,target:a}))}),qn=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:A="",end:i=!1,style:l,to:a,viewTransition:c,children:d}=e,h=dE(e,XQ),f=Df(a,{relative:h.relative}),m=oi(),y=T.useContext(iE),{navigator:w,basename:E}=T.useContext(zs),C=y!=null&&oN(f)&&c===!0,x=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,_=m.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(_=_.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&E&&(S=ga(S,E)||S);const U=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=_===x||!i&&_.startsWith(x)&&_.charAt(U)==="/",v=S!=null&&(S===x||!i&&S.startsWith(x)&&S.charAt(x.length)==="/"),b={isActive:N,isPending:v,isTransitioning:C},B=N?n:void 0,F;typeof A=="function"?F=A(b):F=[A,N?"active":null,v?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(b):l;return T.createElement(nN,Rh({},h,{"aria-current":B,className:F,ref:r,style:D,to:a,viewTransition:c}),typeof d=="function"?d(b):d)});var jm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jm||(jm={}));var qv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qv||(qv={}));function sN(t){let e=T.useContext(Nf);return e||tr(!1),e}function AN(t,e){let{target:r,replace:n,state:s,preventScrollReset:A,relative:i,viewTransition:l}=e===void 0?{}:e,a=ru(),c=oi(),d=Df(t,{relative:i});return T.useCallback(h=>{if($Q(h,r)){h.preventDefault();let f=n!==void 0?n:Qh(c)===Qh(d);a(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:l})}},[c,a,d,n,s,r,t,A,i,l])}function iN(t){let e=T.useRef(Dm(t)),r=T.useRef(!1),n=oi(),s=T.useMemo(()=>WQ(n.search,r.current?null:e.current),[n.search]),A=ru(),i=T.useCallback((l,a)=>{const c=Dm(typeof l=="function"?l(s):l);r.current=!0,A("?"+c,a)},[A,s]);return[s,i]}function oN(t,e){e===void 0&&(e={});let r=T.useContext(YQ);r==null&&tr(!1);let{basename:n}=sN(jm.useViewTransitionState),s=Df(t,{relative:e.relative});if(!r.isTransitioning)return!1;let A=ga(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=ga(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Nm(s.pathname,i)!=null||Nm(s.pathname,A)!=null}var le=(t=>(t.First="1 ",t.Second="2 ",t))(le||{}),ct=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ct||{});const Ct=["","","","",""],an={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Xv=["","","/","","","",""," "],Dh=[{shift:le.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:le.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:le.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:le.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:le.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:le.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:le.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:le.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:le.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:le.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:le.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:le.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:le.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:le.Second,period:6,start:"18:50",end:"19:35",day:"default"}],aN=[{shift:le.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:le.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:le.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:le.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:le.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:le.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:le.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:le.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:le.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:le.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:le.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:le.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:le.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:le.Second,period:6,start:"17:00",end:"17:35",day:"default"}],pl=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),hE=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:pl(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:pl(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:pl(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:pl(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:pl(78,86),order:5}],$r={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:le.First,studentsCount:25},{id:"c2",name:"6",shift:le.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:Dh,dutyZones:hE,dutySchedule:[],nutritionRecords:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",bellPresets:[{id:"preset_normal",name:" (45 )",bells:Dh},{id:"preset_short",name:" (35 )",bells:aN}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]}}},lN="modulepreload",cN=function(t){return"/zamenygymn/"+t},Jv={},uN=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(a=>{if(a=cN(a),a in Jv)return;Jv[a]=!0;const c=a.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":lN,c||(h.as="script"),h.crossOrigin="",h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}function A(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&A(l.reason);return e().catch(A)})};var Yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},dN=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[r++];e[n++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[r++],i=t[r++],l=t[r++],a=((s&7)<<18|(A&63)<<12|(i&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(a>>10)),e[n++]=String.fromCharCode(56320+(a&1023))}else{const A=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},gE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,l=i?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=A>>2,h=(A&3)<<4|l>>4;let f=(l&15)<<2|c>>6,m=c&63;a||(m=64,i||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const A=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,A==null||l==null||c==null||h==null)throw new hN;const f=A<<2|l>>4;if(n.push(f),c!==64){const m=l<<4&240|c>>2;if(n.push(m),h!==64){const y=c<<6&192|h;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fN=function(t){const e=fE(t);return gE.encodeByteArray(e,!0)},jh=function(t){return fN(t).replace(/\./g,"")},pE=function(t){try{return gE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=()=>gN().__FIREBASE_DEFAULTS__,mN=()=>{if(typeof process>"u"||typeof Yv>"u")return;const t=Yv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pE(t[1]);return e&&JSON.parse(e)},jf=()=>{try{return pN()||mN()||wN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mE=t=>{var e,r;return(r=(e=jf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},xN=t=>{const e=mE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},wE=()=>{var t;return(t=jf())===null||t===void 0?void 0:t.config},xE=t=>{var e;return(e=jf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jh(JSON.stringify(r)),jh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())}function bN(){var t;const e=(t=jf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _N(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EN(){const t=xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yE(){return!bN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vE(){try{return typeof indexedDB=="object"}catch{return!1}}function TN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="FirebaseError";class Ws extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=kN,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?FN(A,n):"Error",l=`${this.serviceName}: ${i} (${s}).`;return new Ws(s,l,n)}}function FN(t,e){return t.replace(SN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const SN=/\{\$([^}]+)}/g;function UN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $A(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const A=t[s],i=e[s];if(Zv(A)&&Zv(i)){if(!$A(A,i))return!1}else if(A!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Zv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,A]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Ql(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function QN(t,e){const r=new NN(t,e);return r.subscribe.bind(r)}class NN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");RN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Ap),s.error===void 0&&(s.error=Ap),s.complete===void 0&&(s.complete=Ap);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Ap(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Wi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new yN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PN(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const A=this.getOrInitializeService({instanceIdentifier:s});n.resolve(A)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[A,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(A);n===l&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),A=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:jN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jN(t){return t===Ii?void 0:t}function PN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new DN(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(mt||(mt={}));const MN={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},ON=mt.INFO,HN={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},VN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=HN[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Qw=class{constructor(e){this.name=e,this._logLevel=ON,this._logHandler=VN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}};const KN=(t,e)=>e.some(r=>t instanceof r);let eB,tB;function GN(){return eB||(eB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zN(){return tB||(tB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BE=new WeakMap,Pm=new WeakMap,bE=new WeakMap,ip=new WeakMap,Nw=new WeakMap;function $N(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{r(LA(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&BE.set(r,t)}).catch(()=>{}),Nw.set(e,t),e}function WN(t){if(Pm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});Pm.set(t,e)}let Lm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Pm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return LA(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qN(t){Lm=t(Lm)}function XN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(op(this),e,...r);return bE.set(n,e.sort?e.sort():[e]),LA(n)}:zN().includes(t)?function(...e){return t.apply(op(this),e),LA(BE.get(this))}:function(...e){return LA(t.apply(op(this),e))}}function JN(t){return typeof t=="function"?XN(t):(t instanceof IDBTransaction&&WN(t),KN(t,GN())?new Proxy(t,Lm):t)}function LA(t){if(t instanceof IDBRequest)return $N(t);if(ip.has(t))return ip.get(t);const e=JN(t);return e!==t&&(ip.set(t,e),Nw.set(e,t)),e}const op=t=>Nw.get(t);function YN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),l=LA(i);return n&&i.addEventListener("upgradeneeded",a=>{n(LA(i.result),a.oldVersion,a.newVersion,LA(i.transaction),a)}),r&&i.addEventListener("blocked",a=>r(a.oldVersion,a.newVersion,a)),l.then(a=>{A&&a.addEventListener("close",()=>A()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const ZN=["get","getKey","getAll","getAllKeys","count"],eR=["put","add","delete","clear"],ap=new Map;function rB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ap.get(e))return ap.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=eR.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||ZN.includes(r)))return;const A=async function(i,...l){const a=this.transaction(i,s?"readwrite":"readonly");let c=a.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&a.done]))[0]};return ap.set(e,A),A}qN(t=>({...t,get:(e,r,n)=>rB(e,r)||t.get(e,r,n),has:(e,r)=>!!rB(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(rR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function rR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mm="@firebase/app",nB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Qw("@firebase/app"),nR="@firebase/app-compat",sR="@firebase/analytics-compat",AR="@firebase/analytics",iR="@firebase/app-check-compat",oR="@firebase/app-check",aR="@firebase/auth",lR="@firebase/auth-compat",cR="@firebase/database",uR="@firebase/data-connect",dR="@firebase/database-compat",hR="@firebase/functions",fR="@firebase/functions-compat",gR="@firebase/installations",pR="@firebase/installations-compat",mR="@firebase/messaging",wR="@firebase/messaging-compat",xR="@firebase/performance",yR="@firebase/performance-compat",vR="@firebase/remote-config",BR="@firebase/remote-config-compat",bR="@firebase/storage",CR="@firebase/storage-compat",_R="@firebase/firestore",IR="@firebase/vertexai-preview",ER="@firebase/firestore-compat",TR="firebase",kR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]",FR={[Mm]:"fire-core",[nR]:"fire-core-compat",[AR]:"fire-analytics",[sR]:"fire-analytics-compat",[oR]:"fire-app-check",[iR]:"fire-app-check-compat",[aR]:"fire-auth",[lR]:"fire-auth-compat",[cR]:"fire-rtdb",[uR]:"fire-data-connect",[dR]:"fire-rtdb-compat",[hR]:"fire-fn",[fR]:"fire-fn-compat",[gR]:"fire-iid",[pR]:"fire-iid-compat",[mR]:"fire-fcm",[wR]:"fire-fcm-compat",[xR]:"fire-perf",[yR]:"fire-perf-compat",[vR]:"fire-rc",[BR]:"fire-rc-compat",[bR]:"fire-gcs",[CR]:"fire-gcs-compat",[_R]:"fire-fst",[ER]:"fire-fst-compat",[IR]:"fire-vertex","fire-js":"fire-js",[TR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,SR=new Map,Om=new Map;function sB(t,e){try{t.container.addComponent(e)}catch(r){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function pa(t){const e=t.name;if(Om.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,t);for(const r of Qc.values())sB(r,t);for(const r of SR.values())sB(r,t);return!0}function Au(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function UR(t,e,r=Ph){Au(t,e).clearInstance(r)}function ks(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},MA=new nu("app","Firebase",QR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw MA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=kR;function CE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ph,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw MA.create("bad-app-name",{appName:String(s)});if(r||(r=wE()),!r)throw MA.create("no-options");const A=Qc.get(s);if(A){if($A(r,A.options)&&$A(n,A.config))return A;throw MA.create("duplicate-app",{appName:s})}const i=new LN(s);for(const a of Om.values())i.addComponent(a);const l=new NR(r,n,i);return Qc.set(s,l),l}function Rw(t=Ph){const e=Qc.get(t);if(!e&&t===Ph&&wE())return CE();if(!e)throw MA.create("no-app",{appName:t});return e}function RR(){return Array.from(Qc.values())}function OA(t,e,r){var n;let s=(n=FR[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const l=[`Unable to register library "${s}" with version "${e}":`];A&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(l.join(" "));return}pa(new Wi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="firebase-heartbeat-database",jR=1,Nc="firebase-heartbeat-store";let lp=null;function _E(){return lp||(lp=YN(DR,jR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nc)}catch(r){console.warn(r)}}}}).catch(t=>{throw MA.create("idb-open",{originalErrorMessage:t.message})})),lp}async function PR(t){try{const r=(await _E()).transaction(Nc),n=await r.objectStore(Nc).get(IE(t));return await r.done,n}catch(e){if(e instanceof Ws)Ms.warn(e.message);else{const r=MA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(r.message)}}}async function AB(t,e){try{const n=(await _E()).transaction(Nc,"readwrite");await n.objectStore(Nc).put(e,IE(t)),await n.done}catch(r){if(r instanceof Ws)Ms.warn(r.message);else{const n=MA.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ms.warn(n.message)}}}function IE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=1024,MR=30*24*60*60*1e3;class OR{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new VR(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=iB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=MR}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ms.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=iB(),{heartbeatsToSend:n,unsentEntries:s}=HR(this._heartbeatsCache.heartbeats),A=jh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(r){return Ms.warn(r),""}}}function iB(){return new Date().toISOString().substring(0,10)}function HR(t,e=LR){const r=[];let n=t.slice();for(const s of t){const A=r.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),oB(r)>e){A.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),oB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class VR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vE()?TN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await PR(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return AB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return AB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oB(t){return jh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){pa(new Wi("platform-logger",e=>new tR(e),"PRIVATE")),pa(new Wi("heartbeat",e=>new OR(e),"PRIVATE")),OA(Mm,nB,t),OA(Mm,nB,"esm2017"),OA("fire-js","")}KR("");var GR="firebase",zR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */OA(GR,zR,"app");var aB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,EE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,b){function B(){}B.prototype=b.prototype,v.D=b.prototype,v.prototype=new B,v.prototype.constructor=v,v.C=function(F,D,P){for(var I=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)I[ze-2]=arguments[ze];return b.prototype[D].apply(F,I)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,b,B){B||(B=0);var F=Array(16);if(typeof b=="string")for(var D=0;16>D;++D)F[D]=b.charCodeAt(B++)|b.charCodeAt(B++)<<8|b.charCodeAt(B++)<<16|b.charCodeAt(B++)<<24;else for(D=0;16>D;++D)F[D]=b[B++]|b[B++]<<8|b[B++]<<16|b[B++]<<24;b=v.g[0],B=v.g[1],D=v.g[2];var P=v.g[3],I=b+(P^B&(D^P))+F[0]+3614090360&4294967295;b=B+(I<<7&4294967295|I>>>25),I=P+(D^b&(B^D))+F[1]+3905402710&4294967295,P=b+(I<<12&4294967295|I>>>20),I=D+(B^P&(b^B))+F[2]+606105819&4294967295,D=P+(I<<17&4294967295|I>>>15),I=B+(b^D&(P^b))+F[3]+3250441966&4294967295,B=D+(I<<22&4294967295|I>>>10),I=b+(P^B&(D^P))+F[4]+4118548399&4294967295,b=B+(I<<7&4294967295|I>>>25),I=P+(D^b&(B^D))+F[5]+1200080426&4294967295,P=b+(I<<12&4294967295|I>>>20),I=D+(B^P&(b^B))+F[6]+2821735955&4294967295,D=P+(I<<17&4294967295|I>>>15),I=B+(b^D&(P^b))+F[7]+4249261313&4294967295,B=D+(I<<22&4294967295|I>>>10),I=b+(P^B&(D^P))+F[8]+1770035416&4294967295,b=B+(I<<7&4294967295|I>>>25),I=P+(D^b&(B^D))+F[9]+2336552879&4294967295,P=b+(I<<12&4294967295|I>>>20),I=D+(B^P&(b^B))+F[10]+4294925233&4294967295,D=P+(I<<17&4294967295|I>>>15),I=B+(b^D&(P^b))+F[11]+2304563134&4294967295,B=D+(I<<22&4294967295|I>>>10),I=b+(P^B&(D^P))+F[12]+1804603682&4294967295,b=B+(I<<7&4294967295|I>>>25),I=P+(D^b&(B^D))+F[13]+4254626195&4294967295,P=b+(I<<12&4294967295|I>>>20),I=D+(B^P&(b^B))+F[14]+2792965006&4294967295,D=P+(I<<17&4294967295|I>>>15),I=B+(b^D&(P^b))+F[15]+1236535329&4294967295,B=D+(I<<22&4294967295|I>>>10),I=b+(D^P&(B^D))+F[1]+4129170786&4294967295,b=B+(I<<5&4294967295|I>>>27),I=P+(B^D&(b^B))+F[6]+3225465664&4294967295,P=b+(I<<9&4294967295|I>>>23),I=D+(b^B&(P^b))+F[11]+643717713&4294967295,D=P+(I<<14&4294967295|I>>>18),I=B+(P^b&(D^P))+F[0]+3921069994&4294967295,B=D+(I<<20&4294967295|I>>>12),I=b+(D^P&(B^D))+F[5]+3593408605&4294967295,b=B+(I<<5&4294967295|I>>>27),I=P+(B^D&(b^B))+F[10]+38016083&4294967295,P=b+(I<<9&4294967295|I>>>23),I=D+(b^B&(P^b))+F[15]+3634488961&4294967295,D=P+(I<<14&4294967295|I>>>18),I=B+(P^b&(D^P))+F[4]+3889429448&4294967295,B=D+(I<<20&4294967295|I>>>12),I=b+(D^P&(B^D))+F[9]+568446438&4294967295,b=B+(I<<5&4294967295|I>>>27),I=P+(B^D&(b^B))+F[14]+3275163606&4294967295,P=b+(I<<9&4294967295|I>>>23),I=D+(b^B&(P^b))+F[3]+4107603335&4294967295,D=P+(I<<14&4294967295|I>>>18),I=B+(P^b&(D^P))+F[8]+1163531501&4294967295,B=D+(I<<20&4294967295|I>>>12),I=b+(D^P&(B^D))+F[13]+2850285829&4294967295,b=B+(I<<5&4294967295|I>>>27),I=P+(B^D&(b^B))+F[2]+4243563512&4294967295,P=b+(I<<9&4294967295|I>>>23),I=D+(b^B&(P^b))+F[7]+1735328473&4294967295,D=P+(I<<14&4294967295|I>>>18),I=B+(P^b&(D^P))+F[12]+2368359562&4294967295,B=D+(I<<20&4294967295|I>>>12),I=b+(B^D^P)+F[5]+4294588738&4294967295,b=B+(I<<4&4294967295|I>>>28),I=P+(b^B^D)+F[8]+2272392833&4294967295,P=b+(I<<11&4294967295|I>>>21),I=D+(P^b^B)+F[11]+1839030562&4294967295,D=P+(I<<16&4294967295|I>>>16),I=B+(D^P^b)+F[14]+4259657740&4294967295,B=D+(I<<23&4294967295|I>>>9),I=b+(B^D^P)+F[1]+2763975236&4294967295,b=B+(I<<4&4294967295|I>>>28),I=P+(b^B^D)+F[4]+1272893353&4294967295,P=b+(I<<11&4294967295|I>>>21),I=D+(P^b^B)+F[7]+4139469664&4294967295,D=P+(I<<16&4294967295|I>>>16),I=B+(D^P^b)+F[10]+3200236656&4294967295,B=D+(I<<23&4294967295|I>>>9),I=b+(B^D^P)+F[13]+681279174&4294967295,b=B+(I<<4&4294967295|I>>>28),I=P+(b^B^D)+F[0]+3936430074&4294967295,P=b+(I<<11&4294967295|I>>>21),I=D+(P^b^B)+F[3]+3572445317&4294967295,D=P+(I<<16&4294967295|I>>>16),I=B+(D^P^b)+F[6]+76029189&4294967295,B=D+(I<<23&4294967295|I>>>9),I=b+(B^D^P)+F[9]+3654602809&4294967295,b=B+(I<<4&4294967295|I>>>28),I=P+(b^B^D)+F[12]+3873151461&4294967295,P=b+(I<<11&4294967295|I>>>21),I=D+(P^b^B)+F[15]+530742520&4294967295,D=P+(I<<16&4294967295|I>>>16),I=B+(D^P^b)+F[2]+3299628645&4294967295,B=D+(I<<23&4294967295|I>>>9),I=b+(D^(B|~P))+F[0]+4096336452&4294967295,b=B+(I<<6&4294967295|I>>>26),I=P+(B^(b|~D))+F[7]+1126891415&4294967295,P=b+(I<<10&4294967295|I>>>22),I=D+(b^(P|~B))+F[14]+2878612391&4294967295,D=P+(I<<15&4294967295|I>>>17),I=B+(P^(D|~b))+F[5]+4237533241&4294967295,B=D+(I<<21&4294967295|I>>>11),I=b+(D^(B|~P))+F[12]+1700485571&4294967295,b=B+(I<<6&4294967295|I>>>26),I=P+(B^(b|~D))+F[3]+2399980690&4294967295,P=b+(I<<10&4294967295|I>>>22),I=D+(b^(P|~B))+F[10]+4293915773&4294967295,D=P+(I<<15&4294967295|I>>>17),I=B+(P^(D|~b))+F[1]+2240044497&4294967295,B=D+(I<<21&4294967295|I>>>11),I=b+(D^(B|~P))+F[8]+1873313359&4294967295,b=B+(I<<6&4294967295|I>>>26),I=P+(B^(b|~D))+F[15]+4264355552&4294967295,P=b+(I<<10&4294967295|I>>>22),I=D+(b^(P|~B))+F[6]+2734768916&4294967295,D=P+(I<<15&4294967295|I>>>17),I=B+(P^(D|~b))+F[13]+1309151649&4294967295,B=D+(I<<21&4294967295|I>>>11),I=b+(D^(B|~P))+F[4]+4149444226&4294967295,b=B+(I<<6&4294967295|I>>>26),I=P+(B^(b|~D))+F[11]+3174756917&4294967295,P=b+(I<<10&4294967295|I>>>22),I=D+(b^(P|~B))+F[2]+718787259&4294967295,D=P+(I<<15&4294967295|I>>>17),I=B+(P^(D|~b))+F[9]+3951481745&4294967295,v.g[0]=v.g[0]+b&4294967295,v.g[1]=v.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,v.g[2]=v.g[2]+D&4294967295,v.g[3]=v.g[3]+P&4294967295}n.prototype.u=function(v,b){b===void 0&&(b=v.length);for(var B=b-this.blockSize,F=this.B,D=this.h,P=0;P<b;){if(D==0)for(;P<=B;)s(this,v,P),P+=this.blockSize;if(typeof v=="string"){for(;P<b;)if(F[D++]=v.charCodeAt(P++),D==this.blockSize){s(this,F),D=0;break}}else for(;P<b;)if(F[D++]=v[P++],D==this.blockSize){s(this,F),D=0;break}}this.h=D,this.o+=b},n.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var b=1;b<v.length-8;++b)v[b]=0;var B=8*this.o;for(b=v.length-8;b<v.length;++b)v[b]=B&255,B/=256;for(this.u(v),v=Array(16),b=B=0;4>b;++b)for(var F=0;32>F;F+=8)v[B++]=this.g[b]>>>F&255;return v};function A(v,b){var B=l;return Object.prototype.hasOwnProperty.call(B,v)?B[v]:B[v]=b(v)}function i(v,b){this.h=b;for(var B=[],F=!0,D=v.length-1;0<=D;D--){var P=v[D]|0;F&&P==b||(B[D]=P,F=!1)}this.g=B}var l={};function a(v){return-128<=v&&128>v?A(v,function(b){return new i([b|0],0>b?-1:0)}):new i([v|0],0>v?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return h;if(0>v)return E(c(-v));for(var b=[],B=1,F=0;v>=B;F++)b[F]=v/B|0,B*=4294967296;return new i(b,0)}function d(v,b){if(v.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(v.charAt(0)=="-")return E(d(v.substring(1),b));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=c(Math.pow(b,8)),F=h,D=0;D<v.length;D+=8){var P=Math.min(8,v.length-D),I=parseInt(v.substring(D,D+P),b);8>P?(P=c(Math.pow(b,P)),F=F.j(P).add(c(I))):(F=F.j(B),F=F.add(c(I)))}return F}var h=a(0),f=a(1),m=a(16777216);t=i.prototype,t.m=function(){if(w(this))return-E(this).m();for(var v=0,b=1,B=0;B<this.g.length;B++){var F=this.i(B);v+=(0<=F?F:4294967296+F)*b,b*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y(this))return"0";if(w(this))return"-"+E(this).toString(v);for(var b=c(Math.pow(v,6)),B=this,F="";;){var D=S(B,b).g;B=C(B,D.j(b));var P=((0<B.g.length?B.g[0]:B.h)>>>0).toString(v);if(B=D,y(B))return P+F;for(;6>P.length;)P="0"+P;F=P+F}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function y(v){if(v.h!=0)return!1;for(var b=0;b<v.g.length;b++)if(v.g[b]!=0)return!1;return!0}function w(v){return v.h==-1}t.l=function(v){return v=C(this,v),w(v)?-1:y(v)?0:1};function E(v){for(var b=v.g.length,B=[],F=0;F<b;F++)B[F]=~v.g[F];return new i(B,~v.h).add(f)}t.abs=function(){return w(this)?E(this):this},t.add=function(v){for(var b=Math.max(this.g.length,v.g.length),B=[],F=0,D=0;D<=b;D++){var P=F+(this.i(D)&65535)+(v.i(D)&65535),I=(P>>>16)+(this.i(D)>>>16)+(v.i(D)>>>16);F=I>>>16,P&=65535,I&=65535,B[D]=I<<16|P}return new i(B,B[B.length-1]&-2147483648?-1:0)};function C(v,b){return v.add(E(b))}t.j=function(v){if(y(this)||y(v))return h;if(w(this))return w(v)?E(this).j(E(v)):E(E(this).j(v));if(w(v))return E(this.j(E(v)));if(0>this.l(m)&&0>v.l(m))return c(this.m()*v.m());for(var b=this.g.length+v.g.length,B=[],F=0;F<2*b;F++)B[F]=0;for(F=0;F<this.g.length;F++)for(var D=0;D<v.g.length;D++){var P=this.i(F)>>>16,I=this.i(F)&65535,ze=v.i(D)>>>16,Le=v.i(D)&65535;B[2*F+2*D]+=I*Le,x(B,2*F+2*D),B[2*F+2*D+1]+=P*Le,x(B,2*F+2*D+1),B[2*F+2*D+1]+=I*ze,x(B,2*F+2*D+1),B[2*F+2*D+2]+=P*ze,x(B,2*F+2*D+2)}for(F=0;F<b;F++)B[F]=B[2*F+1]<<16|B[2*F];for(F=b;F<2*b;F++)B[F]=0;return new i(B,0)};function x(v,b){for(;(v[b]&65535)!=v[b];)v[b+1]+=v[b]>>>16,v[b]&=65535,b++}function _(v,b){this.g=v,this.h=b}function S(v,b){if(y(b))throw Error("division by zero");if(y(v))return new _(h,h);if(w(v))return b=S(E(v),b),new _(E(b.g),E(b.h));if(w(b))return b=S(v,E(b)),new _(E(b.g),b.h);if(30<v.g.length){if(w(v)||w(b))throw Error("slowDivide_ only works with positive integers.");for(var B=f,F=b;0>=F.l(v);)B=U(B),F=U(F);var D=N(B,1),P=N(F,1);for(F=N(F,2),B=N(B,2);!y(F);){var I=P.add(F);0>=I.l(v)&&(D=D.add(B),P=I),F=N(F,1),B=N(B,1)}return b=C(v,D.j(b)),new _(D,b)}for(D=h;0<=v.l(b);){for(B=Math.max(1,Math.floor(v.m()/b.m())),F=Math.ceil(Math.log(B)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),P=c(B),I=P.j(b);w(I)||0<I.l(v);)B-=F,P=c(B),I=P.j(b);y(P)&&(P=f),D=D.add(P),v=C(v,I)}return new _(D,v)}t.A=function(v){return S(this,v).h},t.and=function(v){for(var b=Math.max(this.g.length,v.g.length),B=[],F=0;F<b;F++)B[F]=this.i(F)&v.i(F);return new i(B,this.h&v.h)},t.or=function(v){for(var b=Math.max(this.g.length,v.g.length),B=[],F=0;F<b;F++)B[F]=this.i(F)|v.i(F);return new i(B,this.h|v.h)},t.xor=function(v){for(var b=Math.max(this.g.length,v.g.length),B=[],F=0;F<b;F++)B[F]=this.i(F)^v.i(F);return new i(B,this.h^v.h)};function U(v){for(var b=v.g.length+1,B=[],F=0;F<b;F++)B[F]=v.i(F)<<1|v.i(F-1)>>>31;return new i(B,v.h)}function N(v,b){var B=b>>5;b%=32;for(var F=v.g.length-B,D=[],P=0;P<F;P++)D[P]=0<b?v.i(P+B)>>>b|v.i(P+B+1)<<32-b:v.i(P+B);return new i(D,v.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,EE=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Li=i}).apply(typeof aB<"u"?aB:typeof self<"u"?self:typeof window<"u"?window:{});var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TE,Nl,kE,Gd,Hm,FE,SE,UE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ed=="object"&&ed];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function s(u,g){if(g)e:{var p=n;u=u.split(".");for(var k=0;k<u.length-1;k++){var H=u[k];if(!(H in p))break e;p=p[H]}u=u[u.length-1],k=p[u],g=g(k),g!=k&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var p=0,k=!1,H={next:function(){if(!k&&p<u.length){var Y=p++;return{value:g(Y,u[Y]),done:!1}}return k=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,k),u.apply(g,H)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var k=p.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function y(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(k,H,Y){for(var ke=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)ke[Nt-2]=arguments[Nt];return g.prototype[H].apply(k,ke)}}function w(u){const g=u.length;if(0<g){const p=Array(g);for(let k=0;k<g;k++)p[k]=u[k];return p}return[]}function E(u,g){for(let p=1;p<arguments.length;p++){const k=arguments[p];if(a(k)){const H=u.length||0,Y=k.length||0;u.length=H+Y;for(let ke=0;ke<Y;ke++)u[H+ke]=k[ke]}else u.push(k)}}class C{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function S(u){return S[" "](u),u}S[" "]=function(){};var U=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function N(u,g,p){for(const k in u)g.call(p,u[k],k,u)}function v(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function b(u){const g={};for(const p in u)g[p]=u[p];return g}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(u,g){let p,k;for(let H=1;H<arguments.length;H++){k=arguments[H];for(p in k)u[p]=k[p];for(let Y=0;Y<B.length;Y++)p=B[Y],Object.prototype.hasOwnProperty.call(k,p)&&(u[p]=k[p])}}function D(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function P(u){l.setTimeout(()=>{throw u},0)}function I(){var u=Ce;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ze{constructor(){this.h=this.g=null}add(g,p){const k=Le.get();k.set(g,p),this.h?this.h.next=k:this.g=k,this.h=k}}var Le=new C(()=>new At,u=>u.reset());class At{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Je,se=!1,Ce=new ze,Ne=()=>{const u=l.Promise.resolve(void 0);Je=()=>{u.then(Ye)}};var Ye=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){P(p)}var g=Le;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}se=!1};function We(){this.s=this.s,this.C=this.C}We.prototype.s=!1,We.prototype.ma=function(){this.s||(this.s=!0,this.N())},We.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};l.addEventListener("test",p,g),l.removeEventListener("test",p,g)}catch{}return u}();function $e(u,g){if(G.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{S(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&$e.aa.h.call(this)}}y($e,G);var Re={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),it=0;function et(u,g,p,k,H){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!k,this.ha=H,this.key=++it,this.da=this.fa=!1}function ot(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ze(u){this.src=u,this.g={},this.h=0}Ze.prototype.add=function(u,g,p,k,H){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var ke=ee(u,g,k,H);return-1<ke?(g=u[ke],p||(g.fa=!1)):(g=new et(g,this.src,Y,!!k,H),g.fa=p,u.push(g)),g};function at(u,g){var p=g.type;if(p in u.g){var k=u.g[p],H=Array.prototype.indexOf.call(k,g,void 0),Y;(Y=0<=H)&&Array.prototype.splice.call(k,H,1),Y&&(ot(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function ee(u,g,p,k){for(var H=0;H<u.length;++H){var Y=u[H];if(!Y.da&&Y.listener==g&&Y.capture==!!p&&Y.ha==k)return H}return-1}var R="closure_lm_"+(1e6*Math.random()|0),L={};function $(u,g,p,k,H){if(Array.isArray(g)){for(var Y=0;Y<g.length;Y++)$(u,g[Y],p,k,H);return null}return p=Ue(p),u&&u[X]?u.K(g,p,c(k)?!!k.capture:!1,H):ne(u,g,p,!1,k,H)}function ne(u,g,p,k,H,Y){if(!g)throw Error("Invalid event type");var ke=c(H)?!!H.capture:!!H,Nt=me(u);if(Nt||(u[R]=Nt=new Ze(u)),p=Nt.add(g,p,k,ke,Y),p.proxy)return p;if(k=De(),p.proxy=k,k.src=u,k.listener=p,u.addEventListener)he||(H=ke),H===void 0&&(H=!1),u.addEventListener(g.toString(),k,H);else if(u.attachEvent)u.attachEvent(z(g.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return p}function De(){function u(p){return g.call(u.src,u.listener,p)}const g=J;return u}function Be(u,g,p,k,H){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)Be(u,g[Y],p,k,H);else k=c(k)?!!k.capture:!!k,p=Ue(p),u&&u[X]?(u=u.i,g=String(g).toString(),g in u.g&&(Y=u.g[g],p=ee(Y,p,k,H),-1<p&&(ot(Y[p]),Array.prototype.splice.call(Y,p,1),Y.length==0&&(delete u.g[g],u.h--)))):u&&(u=me(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ee(g,p,k,H)),(p=-1<u?g[u]:null)&&re(p))}function re(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[X])at(g.i,u);else{var p=u.type,k=u.proxy;g.removeEventListener?g.removeEventListener(p,k,u.capture):g.detachEvent?g.detachEvent(z(p),k):g.addListener&&g.removeListener&&g.removeListener(k),(p=me(g))?(at(p,u),p.h==0&&(p.src=null,g[R]=null)):ot(u)}}}function z(u){return u in L?L[u]:L[u]="on"+u}function J(u,g){if(u.da)u=!0;else{g=new $e(g,this);var p=u.listener,k=u.ha||u.src;u.fa&&re(u),u=p.call(k,g)}return u}function me(u){return u=u[R],u instanceof Ze?u:null}var fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(u){return typeof u=="function"?u:(u[fe]||(u[fe]=function(g){return u.handleEvent(g)}),u[fe])}function Ae(){We.call(this),this.i=new Ze(this),this.M=this,this.F=null}y(Ae,We),Ae.prototype[X]=!0,Ae.prototype.removeEventListener=function(u,g,p,k){Be(this,u,g,p,k)};function ae(u,g){var p,k=u.F;if(k)for(p=[];k;k=k.F)p.push(k);if(u=u.M,k=g.type||g,typeof g=="string")g=new G(g,u);else if(g instanceof G)g.target=g.target||u;else{var H=g;g=new G(k,u),F(g,H)}if(H=!0,p)for(var Y=p.length-1;0<=Y;Y--){var ke=g.g=p[Y];H=_e(ke,k,!0,g)&&H}if(ke=g.g=u,H=_e(ke,k,!0,g)&&H,H=_e(ke,k,!1,g)&&H,p)for(Y=0;Y<p.length;Y++)ke=g.g=p[Y],H=_e(ke,k,!1,g)&&H}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],k=0;k<p.length;k++)ot(p[k]);delete u.g[g],u.h--}}this.F=null},Ae.prototype.K=function(u,g,p,k){return this.i.add(String(u),g,!1,p,k)},Ae.prototype.L=function(u,g,p,k){return this.i.add(String(u),g,!0,p,k)};function _e(u,g,p,k){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,Y=0;Y<g.length;++Y){var ke=g[Y];if(ke&&!ke.da&&ke.capture==p){var Nt=ke.listener,Sr=ke.ha||ke.src;ke.fa&&at(u.i,ke),H=Nt.call(Sr,k)!==!1&&H}}return H&&!k.defaultPrevented}function Qe(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(u,g||0)}function je(u){u.g=Qe(()=>{u.g=null,u.i&&(u.i=!1,je(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Fe extends We{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(u){We.call(this),this.h=u,this.g={}}y(st,We);var tt=[];function ht(u){N(u.g,function(g,p){this.g.hasOwnProperty(p)&&re(g)},u),u.g={}}st.prototype.N=function(){st.aa.N.call(this),ht(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ie=l.JSON.stringify,be=l.JSON.parse,qe=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function lt(){}lt.prototype.h=null;function It(u){return u.h||(u.h=u.i())}function j(){}var q={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Z(){G.call(this,"d")}y(Z,G);function V(){G.call(this,"c")}y(V,G);var Ee={},we=null;function xe(){return we=we||new Ae}Ee.La="serverreachability";function Ve(u){G.call(this,Ee.La,u)}y(Ve,G);function ye(u){const g=xe();ae(g,new Ve(g))}Ee.STAT_EVENT="statevent";function Q(u,g){G.call(this,Ee.STAT_EVENT,u),this.stat=g}y(Q,G);function K(u){const g=xe();ae(g,new Q(g,u))}Ee.Ma="timingevent";function ie(u,g){G.call(this,Ee.Ma,u),this.size=g}y(ie,G);function te(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},g)}function ce(){this.g=!0}ce.prototype.xa=function(){this.g=!1};function oe(u,g,p,k,H,Y){u.info(function(){if(u.g)if(Y)for(var ke="",Nt=Y.split("&"),Sr=0;Sr<Nt.length;Sr++){var bt=Nt[Sr].split("=");if(1<bt.length){var Mr=bt[0];bt=bt[1];var Or=Mr.split("_");ke=2<=Or.length&&Or[1]=="type"?ke+(Mr+"="+bt+"&"):ke+(Mr+"=redacted&")}}else ke=null;else ke=Y;return"XMLHTTP REQ ("+k+") [attempt "+H+"]: "+g+`
`+p+`
`+ke})}function ge(u,g,p,k,H,Y,ke){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+H+"]: "+g+`
`+p+`
`+Y+" "+ke})}function ve(u,g,p,k){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+yt(u,p)+(k?" "+k:"")})}function Ke(u,g){u.info(function(){return"TIMEOUT: "+g})}ce.prototype.info=function(){};function yt(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var k=p[u];if(!(2>k.length)){var H=k[1];if(Array.isArray(H)&&!(1>H.length)){var Y=H[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ke=1;ke<H.length;ke++)H[ke]=""}}}}return Ie(p)}catch{return g}}var ut={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jt;function Fr(){}y(Fr,lt),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Jt=new Fr;function Et(u,g,p,k){this.j=u,this.i=g,this.l=p,this.R=k||1,this.U=new st(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lr}function Lr(){this.i=null,this.g="",this.h=!1}var Fn={},rs={};function Zs(u,g,p){u.L=1,u.v=Tu(xs(g)),u.m=p,u.P=!0,on(u,null)}function on(u,g){u.F=Date.now(),wi(u),u.A=xs(u.v);var p=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),uy(p.i,"t",k),u.C=0,p=u.j.J,u.h=new Lr,u.g=ky(u.j,p?g:null,!u.m),0<u.O&&(u.M=new Fe(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,k=u.ca;var H="readystatechange";Array.isArray(H)||(H&&(tt[0]=H.toString()),H=tt);for(var Y=0;Y<H.length;Y++){var ke=$(p,H[Y],k||g.handleEvent,!1,g.h||g);if(!ke)break;g.g[ke.key]=ke}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ye(),oe(u.i,u.u,u.A,u.l,u.R,u.m)}Et.prototype.ca=function(u){u=u.target;const g=this.M;g&&ys(u)==3?g.j():this.Y(u)},Et.prototype.Y=function(u){try{if(u==this.g)e:{const Or=ys(this.g);var g=this.g.Ba();const po=this.g.Z();if(!(3>Or)&&(Or!=3||this.g&&(this.h.h||this.g.oa()||wy(this.g)))){this.J||Or!=4||g==7||(g==8||0>=po?ye(3):ye(2)),bg(this);var p=this.g.Z();this.X=p;t:if(eA(this)){var k=wy(this.g);u="";var H=k.length,Y=ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xi(this),el(this);var ke="";break t}this.h.i=new l.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,u+=this.h.i.decode(k[g],{stream:!(Y&&g==H-1)});k.length=0,this.h.g+=u,this.C=0,ke=this.h.g}else ke=this.g.oa();if(this.o=p==200,ge(this.i,this.u,this.A,this.l,this.R,Or,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,Sr=this.g;if((Nt=Sr.g?Sr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Nt)){var bt=Nt;break t}}bt=null}if(p=bt)ve(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cg(this,p);else{this.o=!1,this.s=3,K(12),xi(this),el(this);break e}}if(this.P){p=!0;let Vn;for(;!this.J&&this.C<ke.length;)if(Vn=Yt(this,ke),Vn==rs){Or==4&&(this.s=4,K(14),p=!1),ve(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Fn){this.s=4,K(15),ve(this.i,this.l,ke,"[Invalid Chunk]"),p=!1;break}else ve(this.i,this.l,Vn,null),Cg(this,Vn);if(eA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Or!=4||ke.length!=0||this.h.h||(this.s=1,K(16),p=!1),this.o=this.o&&p,!p)ve(this.i,this.l,ke,"[Invalid Chunked Response]"),xi(this),el(this);else if(0<ke.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+ke.length),Fg(Mr),Mr.M=!0,K(11))}}else ve(this.i,this.l,ke,null),Cg(this,ke);Or==4&&xi(this),this.o&&!this.J&&(Or==4?_y(this.j,this):(this.o=!1,wi(this)))}else b2(this.g),p==400&&0<ke.indexOf("Unknown SID")?(this.s=3,K(12)):(this.s=0,K(13)),xi(this),el(this)}}}catch{}finally{}};function eA(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yt(u,g){var p=u.C,k=g.indexOf(`
`,p);return k==-1?rs:(p=Number(g.substring(p,k)),isNaN(p)?Fn:(k+=1,k+p>g.length?rs:(g=g.slice(k,k+p),u.C=k+p,g)))}Et.prototype.cancel=function(){this.J=!0,xi(this)};function wi(u){u.S=Date.now()+u.I,vr(u,u.I)}function vr(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=te(f(u.ba,u),g)}function bg(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Et.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ke(this.i,this.A),this.L!=2&&(ye(),K(17)),xi(this),this.s=2,el(this)):vr(this,this.S-u)};function el(u){u.j.G==0||u.J||_y(u.j,u)}function xi(u){bg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,ht(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Cg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||_g(p.h,u))){if(!u.K&&_g(p.h,u)&&p.G==3){try{var k=p.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var H=k;if(H[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Nu(p),Uu(p);else break e;kg(p),K(18)}}else p.za=H[1],0<p.za-p.T&&37500>H[2]&&p.F&&p.v==0&&!p.C&&(p.C=te(f(p.Za,p),6e3));if(1>=ry(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else vi(p,11)}else if((u.K||p.g==u)&&Nu(p),!x(g))for(H=p.Da.g.parse(g),g=0;g<H.length;g++){let bt=H[g];if(p.T=bt[0],bt=bt[1],p.G==2)if(bt[0]=="c"){p.K=bt[1],p.ia=bt[2];const Mr=bt[3];Mr!=null&&(p.la=Mr,p.j.info("VER="+p.la));const Or=bt[4];Or!=null&&(p.Aa=Or,p.j.info("SVER="+p.Aa));const po=bt[5];po!=null&&typeof po=="number"&&0<po&&(k=1.5*po,p.L=k,p.j.info("backChannelRequestTimeoutMs_="+k)),k=p;const Vn=u.g;if(Vn){const Du=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var Y=k.h;Y.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ig(Y,Y.h),Y.h=null))}if(k.D){const Sg=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Sg&&(k.ya=Sg,Mt(k.I,k.D,Sg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),k=p;var ke=u;if(k.qa=Ty(k,k.J?k.ia:null,k.W),ke.K){ny(k.h,ke);var Nt=ke,Sr=k.L;Sr&&(Nt.I=Sr),Nt.B&&(bg(Nt),wi(Nt)),k.g=ke}else by(k);0<p.i.length&&Qu(p)}else bt[0]!="stop"&&bt[0]!="close"||vi(p,7);else p.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?vi(p,7):Tg(p):bt[0]!="noop"&&p.l&&p.l.ta(bt),p.v=0)}}ye(4)}catch{}}var o2=class{constructor(u,g){this.g=u,this.map=g}};function ey(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ty(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ry(u){return u.h?1:u.g?u.g.size:0}function _g(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ig(u,g){u.g?u.g.add(g):u.h=g}function ny(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ey.prototype.cancel=function(){if(this.i=sy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function sy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return w(u.i)}function a2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],p=u.length,k=0;k<p;k++)g.push(u[k]);return g}g=[],p=0;for(k in u)g[p++]=u[k];return g}function l2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const k in u)g[p++]=k;return g}}}function Ay(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=l2(u),k=a2(u),H=k.length,Y=0;Y<H;Y++)g.call(void 0,k[Y],p&&p[Y],u)}var iy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function c2(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var k=u[p].indexOf("="),H=null;if(0<=k){var Y=u[p].substring(0,k);H=u[p].substring(k+1)}else Y=u[p];g(Y,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function yi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yi){this.h=u.h,Iu(this,u.j),this.o=u.o,this.g=u.g,Eu(this,u.s),this.l=u.l;var g=u.i,p=new nl;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),oy(this,p),this.m=u.m}else u&&(g=String(u).match(iy))?(this.h=!1,Iu(this,g[1]||"",!0),this.o=tl(g[2]||""),this.g=tl(g[3]||"",!0),Eu(this,g[4]),this.l=tl(g[5]||"",!0),oy(this,g[6]||"",!0),this.m=tl(g[7]||"")):(this.h=!1,this.i=new nl(null,this.h))}yi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(rl(g,ay,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(rl(g,ay,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(rl(p,p.charAt(0)=="/"?h2:d2,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",rl(p,g2)),u.join("")};function xs(u){return new yi(u)}function Iu(u,g,p){u.j=p?tl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Eu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function oy(u,g,p){g instanceof nl?(u.i=g,p2(u.i,u.h)):(p||(g=rl(g,f2)),u.i=new nl(g,u.h))}function Mt(u,g,p){u.i.set(g,p)}function Tu(u){return Mt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function tl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function rl(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,u2),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function u2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ay=/[#\/\?@]/g,d2=/[#\?:]/g,h2=/[#\?]/g,f2=/[#\?@]/g,g2=/#/g;function nl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function tA(u){u.g||(u.g=new Map,u.h=0,u.i&&c2(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=nl.prototype,t.add=function(u,g){tA(this),this.i=null,u=fo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function ly(u,g){tA(u),g=fo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function cy(u,g){return tA(u),g=fo(u,g),u.g.has(g)}t.forEach=function(u,g){tA(this),this.g.forEach(function(p,k){p.forEach(function(H){u.call(g,H,k,this)},this)},this)},t.na=function(){tA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let k=0;k<g.length;k++){const H=u[k];for(let Y=0;Y<H.length;Y++)p.push(g[k])}return p},t.V=function(u){tA(this);let g=[];if(typeof u=="string")cy(this,u)&&(g=g.concat(this.g.get(fo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return tA(this),this.i=null,u=fo(this,u),cy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function uy(u,g,p){ly(u,g),0<p.length&&(u.i=null,u.g.set(fo(u,g),w(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var k=g[p];const Y=encodeURIComponent(String(k)),ke=this.V(k);for(k=0;k<ke.length;k++){var H=Y;ke[k]!==""&&(H+="="+encodeURIComponent(String(ke[k]))),u.push(H)}}return this.i=u.join("&")};function fo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function p2(u,g){g&&!u.j&&(tA(u),u.i=null,u.g.forEach(function(p,k){var H=k.toLowerCase();k!=H&&(ly(this,k),uy(this,H,p))},u)),u.j=g}function m2(u,g){const p=new ce;if(l.Image){const k=new Image;k.onload=m(rA,p,"TestLoadImage: loaded",!0,g,k),k.onerror=m(rA,p,"TestLoadImage: error",!1,g,k),k.onabort=m(rA,p,"TestLoadImage: abort",!1,g,k),k.ontimeout=m(rA,p,"TestLoadImage: timeout",!1,g,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else g(!1)}function w2(u,g){const p=new ce,k=new AbortController,H=setTimeout(()=>{k.abort(),rA(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:k.signal}).then(Y=>{clearTimeout(H),Y.ok?rA(p,"TestPingServer: ok",!0,g):rA(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),rA(p,"TestPingServer: error",!1,g)})}function rA(u,g,p,k,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),k(p)}catch{}}function x2(){this.g=new qe}function y2(u,g,p){const k=p||"";try{Ay(u,function(H,Y){let ke=H;c(H)&&(ke=Ie(H)),g.push(k+Y+"="+encodeURIComponent(ke))})}catch(H){throw g.push(k+"type="+encodeURIComponent("_badmap")),H}}function ku(u){this.l=u.Ub||null,this.j=u.eb||!1}y(ku,lt),ku.prototype.g=function(){return new Fu(this.l,this.j)},ku.prototype.i=function(u){return function(){return u}}({});function Fu(u,g){Ae.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Fu,Ae),t=Fu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Al(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Al(this)),this.g&&(this.readyState=3,Al(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function dy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?sl(this):Al(this),this.readyState==3&&dy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,sl(this))},t.Qa=function(u){this.g&&(this.response=u,sl(this))},t.ga=function(){this.g&&sl(this)};function sl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Al(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function Al(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hy(u){let g="";return N(u,function(p,k){g+=k,g+=":",g+=p,g+=`\r
`}),g}function Eg(u,g,p){e:{for(k in p){var k=!1;break e}k=!0}k||(p=hy(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Mt(u,g,p))}function sr(u){Ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(sr,Ae);var v2=/^https?$/i,B2=["POST","PUT"];t=sr.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jt.g(),this.v=this.o?It(this.o):It(Jt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Y){fy(this,Y);return}if(u=p||"",p=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var H in k)p.set(H,k[H]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Y of k.keys())p.set(Y,k.get(Y));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(p.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(B2,g,void 0))||k||H||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ke]of p)this.g.setRequestHeader(Y,ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{my(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){fy(this,Y)}};function fy(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,gy(u),Su(u)}function gy(u){u.A||(u.A=!0,ae(u,"complete"),ae(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ae(this,"complete"),ae(this,"abort"),Su(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Su(this,!0)),sr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?py(this):this.bb())},t.bb=function(){py(this)};function py(u){if(u.h&&typeof i<"u"&&(!u.v[1]||ys(u)!=4||u.Z()!=2)){if(u.u&&ys(u)==4)Qe(u.Ea,0,u);else if(ae(u,"readystatechange"),ys(u)==4){u.h=!1;try{const ke=u.Z();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var k;if(k=ke===0){var H=String(u.D).match(iy)[1]||null;!H&&l.self&&l.self.location&&(H=l.self.location.protocol.slice(0,-1)),k=!v2.test(H?H.toLowerCase():"")}p=k}if(p)ae(u,"complete"),ae(u,"success");else{u.m=6;try{var Y=2<ys(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",gy(u)}}finally{Su(u)}}}}function Su(u,g){if(u.g){my(u);const p=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ae(u,"ready");try{p.onreadystatechange=k}catch{}}}function my(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ys(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),be(g)}};function wy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function b2(u){const g={};u=(u.g&&2<=ys(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(x(u[k]))continue;var p=D(u[k]);const H=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const Y=g[H]||[];g[H]=Y,Y.push(p)}v(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function il(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function xy(u){this.Aa=0,this.i=[],this.j=new ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=il("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=il("baseRetryDelayMs",5e3,u),this.cb=il("retryDelaySeedMs",1e4,u),this.Wa=il("forwardChannelMaxRetries",2,u),this.wa=il("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ey(u&&u.concurrentRequestLimit),this.Da=new x2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xy.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,k){K(0),this.W=u,this.H=g||{},p&&k!==void 0&&(this.H.OSID=p,this.H.OAID=k),this.F=this.X,this.I=Ty(this,null,this.W),Qu(this)};function Tg(u){if(yy(u),u.G==3){var g=u.U++,p=xs(u.I);if(Mt(p,"SID",u.K),Mt(p,"RID",g),Mt(p,"TYPE","terminate"),ol(u,p),g=new Et(u,u.j,g),g.L=2,g.v=Tu(xs(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=g.v,p=!0),p||(g.g=ky(g.j,null),g.g.ea(g.v)),g.F=Date.now(),wi(g)}Ey(u)}function Uu(u){u.g&&(Fg(u),u.g.cancel(),u.g=null)}function yy(u){Uu(u),u.u&&(l.clearTimeout(u.u),u.u=null),Nu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Qu(u){if(!ty(u.h)&&!u.s){u.s=!0;var g=u.Ga;Je||Ne(),se||(Je(),se=!0),Ce.add(g,u),u.B=0}}function C2(u,g){return ry(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=te(f(u.Ga,u,g),Iy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const H=new Et(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=b(Y),F(Y,this.S)):Y=this.S),this.m!==null||this.O||(H.H=Y,Y=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var k=this.i[p];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=By(this,H,g),p=xs(this.I),Mt(p,"RID",u),Mt(p,"CVER",22),this.D&&Mt(p,"X-HTTP-Session-Id",this.D),ol(this,p),Y&&(this.O?g="headers="+encodeURIComponent(String(hy(Y)))+"&"+g:this.m&&Eg(p,this.m,Y)),Ig(this.h,H),this.Ua&&Mt(p,"TYPE","init"),this.P?(Mt(p,"$req",g),Mt(p,"SID","null"),H.T=!0,Zs(H,p,null)):Zs(H,p,g),this.G=2}}else this.G==3&&(u?vy(this,u):this.i.length==0||ty(this.h)||vy(this))};function vy(u,g){var p;g?p=g.l:p=u.U++;const k=xs(u.I);Mt(k,"SID",u.K),Mt(k,"RID",p),Mt(k,"AID",u.T),ol(u,k),u.m&&u.o&&Eg(k,u.m,u.o),p=new Et(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=By(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ig(u.h,p),Zs(p,k,g)}function ol(u,g){u.H&&N(u.H,function(p,k){Mt(g,k,p)}),u.l&&Ay({},function(p,k){Mt(g,k,p)})}function By(u,g,p){p=Math.min(u.i.length,p);var k=u.l?f(u.l.Na,u.l,u):null;e:{var H=u.i;let Y=-1;for(;;){const ke=["count="+p];Y==-1?0<p?(Y=H[0].g,ke.push("ofs="+Y)):Y=0:ke.push("ofs="+Y);let Nt=!0;for(let Sr=0;Sr<p;Sr++){let bt=H[Sr].g;const Mr=H[Sr].map;if(bt-=Y,0>bt)Y=Math.max(0,H[Sr].g-100),Nt=!1;else try{y2(Mr,ke,"req"+bt+"_")}catch{k&&k(Mr)}}if(Nt){k=ke.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,k}function by(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Je||Ne(),se||(Je(),se=!0),Ce.add(g,u),u.v=0}}function kg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=te(f(u.Fa,u),Iy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Cy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=te(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,K(10),Uu(this),Cy(this))};function Fg(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function Cy(u){u.g=new Et(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=xs(u.qa);Mt(g,"RID","rpc"),Mt(g,"SID",u.K),Mt(g,"AID",u.T),Mt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Mt(g,"TO",u.ja),Mt(g,"TYPE","xmlhttp"),ol(u,g),u.m&&u.o&&Eg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Tu(xs(g)),p.m=null,p.P=!0,on(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Uu(this),kg(this),K(19))};function Nu(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function _y(u,g){var p=null;if(u.g==g){Nu(u),Fg(u),u.g=null;var k=2}else if(_g(u.h,g))p=g.D,ny(u.h,g),k=1;else return;if(u.G!=0){if(g.o)if(k==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var H=u.B;k=xe(),ae(k,new ie(k,p)),Qu(u)}else by(u);else if(H=g.s,H==3||H==0&&0<g.X||!(k==1&&C2(u,g)||k==2&&kg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),H){case 1:vi(u,5);break;case 4:vi(u,10);break;case 3:vi(u,6);break;default:vi(u,2)}}}function Iy(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function vi(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),k=u.Xa;const H=!k;k=new yi(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Iu(k,"https"),Tu(k),H?m2(k.toString(),p):w2(k.toString(),p)}else K(2);u.G=0,u.l&&u.l.sa(g),Ey(u),yy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),K(2)):(this.j.info("Failed to ping google.com"),K(1))};function Ey(u){if(u.G=0,u.ka=[],u.l){const g=sy(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ka,g),E(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function Ty(u,g,p){var k=p instanceof yi?xs(p):new yi(p);if(k.g!="")g&&(k.g=g+"."+k.g),Eu(k,k.s);else{var H=l.location;k=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var Y=new yi(null);k&&Iu(Y,k),g&&(Y.g=g),H&&Eu(Y,H),p&&(Y.l=p),k=Y}return p=u.D,g=u.ya,p&&g&&Mt(k,p,g),Mt(k,"VER",u.la),ol(u,k),k}function ky(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new sr(new ku({eb:p})):new sr(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fy(){}t=Fy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ru(){}Ru.prototype.g=function(u,g){return new wn(u,g)};function wn(u,g){Ae.call(this),this.g=new xy(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!x(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new go(this)}y(wn,Ae),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Tg(this.g)},wn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Ie(u),u=p);g.i.push(new o2(g.Ya++,u)),g.G==3&&Qu(g)},wn.prototype.N=function(){this.g.l=null,delete this.j,Tg(this.g),delete this.g,wn.aa.N.call(this)};function Sy(u){Z.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(Sy,Z);function Uy(){V.call(this),this.status=1}y(Uy,V);function go(u){this.g=u}y(go,Fy),go.prototype.ua=function(){ae(this.g,"a")},go.prototype.ta=function(u){ae(this.g,new Sy(u))},go.prototype.sa=function(u){ae(this.g,new Uy)},go.prototype.ra=function(){ae(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,UE=function(){return new Ru},SE=function(){return xe()},FE=Ee,Hm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ut.NO_ERROR=0,ut.TIMEOUT=8,ut.HTTP_ERROR=6,Gd=ut,Qt.COMPLETE="complete",kE=Qt,j.EventType=q,q.OPEN="a",q.CLOSE="b",q.ERROR="c",q.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Nl=j,sr.prototype.listenOnce=sr.prototype.L,sr.prototype.getLastError=sr.prototype.Ka,sr.prototype.getLastErrorCode=sr.prototype.Ba,sr.prototype.getStatus=sr.prototype.Z,sr.prototype.getResponseJson=sr.prototype.Oa,sr.prototype.getResponseText=sr.prototype.oa,sr.prototype.send=sr.prototype.ea,sr.prototype.setWithCredentials=sr.prototype.Ha,TE=sr}).apply(typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{});const lB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Qw("@firebase/firestore");function ko(){return WA.logLevel}function $R(t){WA.setLogLevel(t)}function de(t,...e){if(WA.logLevel<=mt.DEBUG){const r=e.map(Dw);WA.debug(`Firestore (${La}): ${t}`,...r)}}function cr(t,...e){if(WA.logLevel<=mt.ERROR){const r=e.map(Dw);WA.error(`Firestore (${La}): ${t}`,...r)}}function In(t,...e){if(WA.logLevel<=mt.WARN){const r=e.map(Dw);WA.warn(`Firestore (${La}): ${t}`,...r)}}function Dw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t="Unexpected state"){const e=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function Ge(t,e){t||Oe()}function WR(t,e){t||Oe()}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Ws{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ir.UNAUTHENTICATED))}shutdown(){}}class qR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class XR{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ge(this.o===void 0);let n=this.i;const s=a=>this.i!==n?(n=this.i,r(a)):Promise.resolve();let A=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const a=A;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},l=a=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Tr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ge(typeof n.accessToken=="string"),new QE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Ir(e)}}class JR{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YR{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new JR(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ge(this.o===void 0);const n=A=>{A.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,de("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>n(A))};const s=A=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ge(typeof r.token=="string"),this.R=r.token,new RE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class e4{getToken(){return Promise.resolve(new RE(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=t4(40);for(let A=0;A<s.length;++A)n.length<20&&s[A]<r&&(n+=e.charAt(s[A]%e.length))}return n}}function nt(t,e){return t<e?-1:t>e?1:0}function ma(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function DE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new qt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new qt(0,0))}static max(){return new Xe(new qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,r,n){r===void 0?r=0:r>e.length&&Oe(),n===void 0?n=e.length-r:n>e.length-r&&Oe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Rc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Rc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const A=e.get(s),i=r.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class wt extends Rc{construct(e,r,n){return new wt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ue(W.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new wt(r)}static emptyPath(){return new wt([])}}const r4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Rc{construct(e,r,n){return new Vt(e,r,n)}static isValidIdentifier(e){return r4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const A=()=>{if(n.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ue(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new ue(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=a,s+=2}else l==="`"?(i=!i,s++):l!=="."||i?(n+=l,s++):(A(),s++)}if(A(),i)throw new ue(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(r)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(wt.fromString(e))}static fromName(e){return new Se(wt.fromString(e).popFirst(5))}static empty(){return new Se(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return wt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function Vm(t){return t.fields.find(e=>e.kind===2)}function Ei(t){return t.fields.filter(e=>e.kind!==2)}function n4(t,e){let r=nt(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=s4(t.fields[n],e.fields[n]),r!==0)return r;return nt(t.fields.length,e.fields.length)}wa.UNKNOWN_ID=-1;class Mi{constructor(e,r){this.fieldPath=e,this.kind=r}}function s4(t,e){const r=Vt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:nt(t.kind,e.kind)}class xa{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new xa(0,En.min())}}function jE(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(n===1e9?new qt(r+1,0):new qt(r,n));return new En(s,Se.empty(),e)}function PE(t){return new En(t.readTime,t.key,-1)}class En{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new En(Xe.min(),Se.empty(),-1)}static max(){return new En(Xe.max(),Se.empty(),-1)}}function Pw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Se.comparator(t.documentKey,e.documentKey),r!==0?r:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ME{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ai(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==LE)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new O((n,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(n,s)},this.catchCallback=A=>{this.wrapFailure(r,A).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof O?r:O.resolve(r)}catch(r){return O.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):O.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):O.reject(r)}static resolve(e){return new O((r,n)=>{r(e)})}static reject(e){return new O((r,n)=>{n(e)})}static waitFor(e){return new O((r,n)=>{let s=0,A=0,i=!1;e.forEach(l=>{++s,l.next(()=>{++A,i&&A===s&&r()},a=>n(a))}),i=!0,A===s&&r()})}static or(e){let r=O.resolve(!1);for(const n of e)r=r.next(s=>s?O.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,A)=>{n.push(r.call(this,s,A))}),this.waitFor(n)}static mapArray(e,r){return new O((n,s)=>{const A=e.length,i=new Array(A);let l=0;for(let a=0;a<A;a++){const c=a;r(e[c]).next(d=>{i[c]=d,++l,l===A&&n(i)},d=>s(d))}})}static doWhile(e,r){return new O((n,s)=>{const A=()=>{e()===!0?r().next(()=>{A()},s):n()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Tr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new tc(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Lw(n.target.error);this.V.reject(new tc(e,s))}}static open(e,r,n,s){try{return new Pf(r,e.transaction(s,n))}catch(A){throw new tc(r,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(de("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new i4(r)}}class ds{constructor(e,r,n){this.name=e,this.version=r,this.p=n,ds.S(xr())===12.2&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return de("SimpleDb","Removing database:",e),Ti(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vE())return!1;if(ds.v())return!0;const e=xr(),r=ds.S(e),n=0<r&&r<10,s=OE(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(de("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;r(i)},s.onblocked=()=>{n(new tc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?n(new ue(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new ue(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new tc(e,i))},s.onupgradeneeded=A=>{de("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{de("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const A=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const l=Pf.open(this.db,e,A?"readonly":"readwrite",n),a=s(l).next(c=>(l.g(),c)).catch(c=>(l.abort(c),O.reject(c))).toPromise();return a.catch(()=>{}),await l.m,a}catch(l){const a=l,c=a.name!=="FirebaseError"&&i<3;if(de("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OE(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class A4{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ti(this.B.delete())}}class tc extends ue{constructor(e,r){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function li(t){return t.name==="IndexedDbTransactionError"}class i4{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(de("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(de("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ti(n)}add(e){return de("SimpleDb","ADD",this.store.name,e,e),Ti(this.store.add(e))}get(e){return Ti(this.store.get(e)).next(r=>(r===void 0&&(r=null),de("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return de("SimpleDb","DELETE",this.store.name,e),Ti(this.store.delete(e))}count(){return de("SimpleDb","COUNT",this.store.name),Ti(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(n.range);return new O((i,l)=>{A.onerror=a=>{l(a.target.error)},A.onsuccess=a=>{i(a.target.result)}})}{const A=this.cursor(n),i=[];return this.W(A,(l,a)=>{i.push(a)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new O((s,A)=>{n.onerror=i=>{A(i.target.error)},n.onsuccess=i=>{s(i.target.result)}})}j(e,r){de("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(A,i,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new O((n,s)=>{r.onerror=A=>{const i=Lw(A.target.error);s(i)},r.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(l=>{l?i.continue():n()}):n()}})}W(e,r){const n=[];return new O((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const l=i.target.result;if(!l)return void s();const a=new A4(l),c=r(l.primaryKey,l.value,a);if(c instanceof O){const d=c.catch(h=>(a.done(),O.reject(h)));n.push(d)}a.isDone?s():a.K===null?l.continue():l.continue(a.K)}}).next(()=>O.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Ti(t){return new O((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Lw(n.target.error);r(s)}})}let cB=!1;function Lw(t){const e=ds.S(xr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cB||(cB=!0,setTimeout(()=>{throw n},0)),n}}return t}class o4{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){de("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{de("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){li(r)?de("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ai(r)}await this.X(6e4)})}}class a4{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,A=!0;return O.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return de("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(l=>{s-=l,n.add(i)});A=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(l=>(de("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((s,A)=>{const i=PE(A);Pw(i,n)>0&&(n=i)}),new En(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dn.oe=-1;function iu(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function HE(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=uB(e)),e=l4(t.get(r),e);return uB(e)}function l4(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const A=t.charAt(s);switch(A){case"\0":r+="";break;case"":r+="";break;default:r+=A}}return r}function uB(t){return t+""}function as(t){const e=t.length;if(Ge(e>=2),e===2)return Ge(t.charAt(0)===""&&t.charAt(1)===""),wt.emptyPath();const r=e-2,n=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>r)&&Oe(),t.charAt(i+1)){case"":const l=t.substring(A,i);let a;s.length===0?a=l:(s+=l,a=s,s=""),n.push(a);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:Oe()}A=i+2}return new wt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t,e){return[t,Xr(e)]}function VE(t,e,r){return[t,Xr(e),r]}const c4={},u4=["prefixPath","collectionGroup","readTime","documentId"],d4=["prefixPath","collectionGroup","documentId"],h4=["collectionGroup","readTime","prefixPath","documentId"],f4=["canonicalId","targetId"],g4=["targetId","path"],p4=["path","targetId"],m4=["collectionId","parent"],w4=["indexId","uid"],x4=["uid","sequenceNumber"],y4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],v4=["indexId","uid","orderedDocumentKey"],B4=["userId","collectionPath","documentId"],b4=["userId","collectionPath","largestBatchId"],C4=["userId","collectionGroup","largestBatchId"],KE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_4=[...KE,"documentOverlays"],GE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zE=GE,Mw=[...zE,"indexConfiguration","indexState","indexEntries"],I4=Mw,E4=[...Mw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends ME{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function yr(t,e){const r=Te(t);return ds.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ci(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function $E(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function WE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){this.comparator=e,this.root=r||Nr.EMPTY}insert(e,r){return new Lt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=r?n(e.key,r):1,r&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,r,n,s,A){this.key=e,this.value=r,this.color=n??Nr.RED,this.left=s??Nr.EMPTY,this.right=A??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,A){return new Nr(e??this.key,r??this.value,n??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const A=n(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,r,n),null):A===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Nr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,r,n,s,A){return this}insert(e,r,n){return new Nr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new fB(this.data.getIterator())}getIteratorFrom(e){return new fB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new St(this.comparator);return r.data=e,r}}class fB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new hn([])}unionWith(e){let r=new St(Vt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new hn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new qE("Invalid base64 string: "+A):A}}(e);return new nr(r)}static fromUint8Array(e){const r=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new nr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const k4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(t){if(Ge(!!t),typeof t=="string"){let e=0;const r=k4.exec(t);if(Ge(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hs(t){return typeof t=="string"?nr.fromBase64String(t):nr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Mf(t){const e=t.mapValue.fields.__previous_value__;return Lf(e)?Mf(e):e}function jc(t){const e=Os(t.mapValue.fields.__local_write_time__.timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,r,n,s,A,i,l,a,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=c}}class qA{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new qA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$d={nullValue:"NULL_VALUE"};function XA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lf(t)?4:XE(t)?9007199254740991:Of(t)?10:11:Oe()}function ps(t,e){if(t===e)return!0;const r=XA(t);if(r!==XA(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jc(t).isEqual(jc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=Os(s.timestampValue),l=Os(A.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return Hs(s.bytesValue).isEqual(Hs(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return zt(s.geoPointValue.latitude)===zt(A.geoPointValue.latitude)&&zt(s.geoPointValue.longitude)===zt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return zt(s.integerValue)===zt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=zt(s.doubleValue),l=zt(A.doubleValue);return i===l?Dc(i)===Dc(l):isNaN(i)&&isNaN(l)}return!1}(t,e);case 9:return ma(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},l=A.mapValue.fields||{};if(hB(i)!==hB(l))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(l[a]===void 0||!ps(i[a],l[a])))return!1;return!0}(t,e);default:return Oe()}}function Pc(t,e){return(t.values||[]).find(r=>ps(r,e))!==void 0}function JA(t,e){if(t===e)return 0;const r=XA(t),n=XA(e);if(r!==n)return nt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return function(A,i){const l=zt(A.integerValue||A.doubleValue),a=zt(i.integerValue||i.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return gB(t.timestampValue,e.timestampValue);case 4:return gB(jc(t),jc(e));case 5:return nt(t.stringValue,e.stringValue);case 6:return function(A,i){const l=Hs(A),a=Hs(i);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const l=A.split("/"),a=i.split("/");for(let c=0;c<l.length&&c<a.length;c++){const d=nt(l[c],a[c]);if(d!==0)return d}return nt(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const l=nt(zt(A.latitude),zt(i.latitude));return l!==0?l:nt(zt(A.longitude),zt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pB(t.arrayValue,e.arrayValue);case 10:return function(A,i){var l,a,c,d;const h=A.fields||{},f=i.fields||{},m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=nt(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:pB(m,y)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===_A.mapValue&&i===_A.mapValue)return 0;if(A===_A.mapValue)return 1;if(i===_A.mapValue)return-1;const l=A.fields||{},a=Object.keys(l),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=nt(a[h],d[h]);if(f!==0)return f;const m=JA(l[a[h]],c[d[h]]);if(m!==0)return m}return nt(a.length,d.length)}(t.mapValue,e.mapValue);default:throw Oe()}}function gB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const r=Os(t),n=Os(e),s=nt(r.seconds,n.seconds);return s!==0?s:nt(r.nanos,n.nanos)}function pB(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const A=JA(r[s],n[s]);if(A)return A}return nt(r.length,n.length)}function ya(t){return Gm(t)}function Gm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Os(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Hs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Se.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const A of r.values||[])s?s=!1:n+=",",n+=Gm(A);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",A=!0;for(const i of n)A?A=!1:s+=",",s+=`${i}:${Gm(r.fields[i])}`;return s+"}"}(t.mapValue):Oe()}function Wd(t){switch(XA(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mf(t);return e?16+Wd(e):16;case 5:return 2*t.stringValue.length;case 6:return Hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,A)=>s+Wd(A),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return ci(n.fields,(A,i)=>{s+=A.length+Wd(i)}),s}(t.mapValue);default:throw Oe()}}function qi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zm(t){return!!t&&"integerValue"in t}function Lc(t){return!!t&&"arrayValue"in t}function mB(t){return!!t&&"nullValue"in t}function wB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qd(t){return!!t&&"mapValue"in t}function Of(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function rc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ci(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=rc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=rc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function XE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const JE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function S4(t){return"nullValue"in t?$d:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?qi(qA.empty(),Se.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Of(t)?JE:{mapValue:{}}:Oe()}function U4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?qi(qA.empty(),Se.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?JE:"mapValue"in t?Of(t)?{mapValue:{}}:_A:Oe()}function xB(t,e){const r=JA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yB(t,e){const r=JA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!qd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(r)}setAll(e){let r=Vt.emptyPath(),n={},s=[];e.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const a=this.getFieldsMap(r);this.applyChanges(a,n,s),n={},s=[],r=l.popLast()}i?n[l.lastSegment()]=rc(i):s.push(l.lastSegment())});const A=this.getFieldsMap(r);this.applyChanges(A,n,s)}delete(e){const r=this.field(e.popLast());qd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];qd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){ci(r,(s,A)=>e[s]=A);for(const s of n)delete e[s]}clone(){return new Rr(rc(this.value))}}function YE(t){const e=[];return ci(t.fields,(r,n)=>{const s=new Vt([r]);if(qd(n)){const A=YE(n.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,r,n,s,A,i,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=A,this.data=i,this.documentState=l}static newInvalidDocument(e){return new Ht(e,0,Xe.min(),Xe.min(),Xe.min(),Rr.empty(),0)}static newFoundDocument(e,r,n,s){return new Ht(e,1,r,Xe.min(),n,s,0)}static newNoDocument(e,r){return new Ht(e,2,r,Xe.min(),Xe.min(),Rr.empty(),0)}static newUnknownDocument(e,r){return new Ht(e,3,r,Xe.min(),Xe.min(),Rr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,r){this.position=e,this.inclusive=r}}function vB(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?n=Se.comparator(Se.fromName(i.referenceValue),r.key):n=JA(i,r.data.field(A.field)),A.dir==="desc"&&(n*=-1),n!==0)break}return n}function BB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ps(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,r="asc"){this.field=e,this.dir=r}}function Q4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class xt extends ZE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new N4(e,r,n):r==="array-contains"?new j4(e,n):r==="in"?new A1(e,n):r==="not-in"?new P4(e,n):r==="array-contains-any"?new L4(e,n):new xt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new R4(e,n):new D4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(JA(r,this.value)):r!==null&&XA(this.value)===XA(r)&&this.matchesComparison(JA(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends ZE{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Tt(e,r)}matches(e){return va(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function va(t){return t.op==="and"}function $m(t){return t.op==="or"}function Ow(t){return e1(t)&&va(t)}function e1(t){for(const e of t.filters)if(e instanceof Tt)return!1;return!0}function Wm(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+ya(t.value);if(Ow(t))return t.filters.map(e=>Wm(e)).join(",");{const e=t.filters.map(r=>Wm(r)).join(",");return`${t.op}(${e})`}}function t1(t,e){return t instanceof xt?function(n,s){return s instanceof xt&&n.op===s.op&&n.field.isEqual(s.field)&&ps(n.value,s.value)}(t,e):t instanceof Tt?function(n,s){return s instanceof Tt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((A,i,l)=>A&&t1(i,s.filters[l]),!0):!1}(t,e):void Oe()}function r1(t,e){const r=t.filters.concat(e);return Tt.create(r,t.op)}function n1(t){return t instanceof xt?function(r){return`${r.field.canonicalString()} ${r.op} ${ya(r.value)}`}(t):t instanceof Tt?function(r){return r.op.toString()+" {"+r.getFilters().map(n1).join(" ,")+"}"}(t):"Filter"}class N4 extends xt{constructor(e,r,n){super(e,r,n),this.key=Se.fromName(n.referenceValue)}matches(e){const r=Se.comparator(e.key,this.key);return this.matchesComparison(r)}}class R4 extends xt{constructor(e,r){super(e,"in",r),this.keys=s1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class D4 extends xt{constructor(e,r){super(e,"not-in",r),this.keys=s1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function s1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Se.fromName(n.referenceValue))}class j4 extends xt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Lc(r)&&Pc(r.arrayValue,this.value)}}class A1 extends xt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Pc(this.value.arrayValue,r)}}class P4 extends xt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Pc(this.value.arrayValue,r)}}class L4 extends xt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Lc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Pc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,r=null,n=[],s=[],A=null,i=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=A,this.startAt=i,this.endAt=l,this.ue=null}}function qm(t,e=null,r=[],n=[],s=null,A=null,i=null){return new M4(t,e,r,n,s,A,i)}function Xi(t){const e=Te(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Wm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(A){return A.field.canonicalString()+A.dir}(n)).join(","),iu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ya(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ya(n)).join(",")),e.ue=r}return e.ue}function ou(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Q4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!t1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BB(t.startAt,e.startAt)&&BB(t.endAt,e.endAt)}function Lh(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mh(t,e){return t.filters.filter(r=>r instanceof xt&&r.field.isEqual(e))}function bB(t,e,r){let n=$d,s=!0;for(const A of Mh(t,e)){let i=$d,l=!0;switch(A.op){case"<":case"<=":i=S4(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,l=!1;break;case"!=":case"not-in":i=$d}xB({value:n,inclusive:s},{value:i,inclusive:l})<0&&(n=i,s=l)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];xB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function CB(t,e,r){let n=_A,s=!0;for(const A of Mh(t,e)){let i=_A,l=!0;switch(A.op){case">=":case">":i=U4(A.value),l=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,l=!1;break;case"!=":case"not-in":i=_A}yB({value:n,inclusive:s},{value:i,inclusive:l})>0&&(n=i,s=l)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];yB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,r=null,n=[],s=[],A=null,i="F",l=null,a=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=A,this.limitType=i,this.startAt=l,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function i1(t,e,r,n,s,A,i,l){return new qs(t,e,r,n,s,A,i,l)}function Ma(t){return new qs(t)}function _B(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hw(t){return t.collectionGroup!==null}function ra(t){const e=Te(t);if(e.ce===null){e.ce=[];const r=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),r.add(A.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new St(Vt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(A=>{r.has(A.canonicalString())||A.isKeyField()||e.ce.push(new Mc(A,n))}),r.has(Vt.keyField().canonicalString())||e.ce.push(new Mc(Vt.keyField(),n))}return e.ce}function Jr(t){const e=Te(t);return e.le||(e.le=a1(e,ra(t))),e.le}function o1(t){const e=Te(t);return e.he||(e.he=a1(e,t.explicitOrderBy)),e.he}function a1(t,e){if(t.limitType==="F")return qm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new Mc(s.field,A)});const r=t.endAt?new YA(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new YA(t.startAt.position,t.startAt.inclusive):null;return qm(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Xm(t,e){const r=t.filters.concat([e]);return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Oh(t,e,r){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function au(t,e){return ou(Jr(t),Jr(e))&&t.limitType===e.limitType}function l1(t){return`${Xi(Jr(t))}|lt:${t.limitType}`}function Fo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>n1(s)).join(", ")}]`),iu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>ya(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>ya(s)).join(",")),`Target(${n})`}(Jr(t))}; limitType=${t.limitType})`}function lu(t,e){return e.isFoundDocument()&&function(n,s){const A=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(A):Se.isDocumentKey(n.path)?n.path.isEqual(A):n.path.isImmediateParentOf(A)}(t,e)&&function(n,s){for(const A of ra(n))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const A of n.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,l,a){const c=vB(i,l,a);return i.inclusive?c<=0:c<0}(n.startAt,ra(n),s)||n.endAt&&!function(i,l,a){const c=vB(i,l,a);return i.inclusive?c>=0:c>0}(n.endAt,ra(n),s))}(t,e)}function c1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u1(t){return(e,r)=>{let n=!1;for(const s of ra(t)){const A=O4(s,e,r);if(A!==0)return A;n=n||s.field.isKeyField()}return 0}}function O4(t,e,r){const n=t.field.isKeyField()?Se.comparator(e.key,r.key):function(A,i,l){const a=i.data.field(A),c=l.data.field(A);return a!==null&&c!==null?JA(a,c):Oe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,A]of n)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(r,n)=>{for(const[s,A]of n)e(s,A)})}isEmpty(){return WE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=new Lt(Se.comparator);function fn(){return H4}const d1=new Lt(Se.comparator);function Rl(...t){let e=d1;for(const r of t)e=e.insert(r.key,r);return e}function h1(t){let e=d1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ls(){return nc()}function f1(){return nc()}function nc(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const V4=new Lt(Se.comparator),K4=new St(Se.comparator);function dt(...t){let e=K4;for(const r of t)e=e.add(r);return e}const G4=new St(nt);function Vw(){return G4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function g1(t){return{integerValue:""+t}}function p1(t,e){return HE(e)?g1(e):Kw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function z4(t,e,r){return t instanceof Ba?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&Lf(A)&&(A=Mf(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(r,e):t instanceof Ji?w1(t,e):t instanceof Yi?x1(t,e):function(s,A){const i=m1(s,A),l=IB(i)+IB(s.Pe);return zm(i)&&zm(s.Pe)?g1(l):Kw(s.serializer,l)}(t,e)}function $4(t,e,r){return t instanceof Ji?w1(t,e):t instanceof Yi?x1(t,e):r}function m1(t,e){return t instanceof ba?function(n){return zm(n)||function(A){return!!A&&"doubleValue"in A}(n)}(e)?e:{integerValue:0}:null}class Ba extends Hf{}class Ji extends Hf{constructor(e){super(),this.elements=e}}function w1(t,e){const r=y1(e);for(const n of t.elements)r.some(s=>ps(s,n))||r.push(n);return{arrayValue:{values:r}}}class Yi extends Hf{constructor(e){super(),this.elements=e}}function x1(t,e){let r=y1(e);for(const n of t.elements)r=r.filter(s=>!ps(s,n));return{arrayValue:{values:r}}}class ba extends Hf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function IB(t){return zt(t.integerValue||t.doubleValue)}function y1(t){return Lc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,r){this.field=e,this.transform=r}}function W4(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Ji&&s instanceof Ji||n instanceof Yi&&s instanceof Yi?ma(n.elements,s.elements,ps):n instanceof ba&&s instanceof ba?ps(n.Pe,s.Pe):n instanceof Ba&&s instanceof Ba}(t.transform,e.transform)}class q4{constructor(e,r){this.version=e,this.transformResults=r}}class Wt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vf{}function v1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ha(t.key,Wt.none()):new Oa(t.key,t.data,Wt.none());{const r=t.data,n=Rr.empty();let s=new St(Vt.comparator);for(let A of e.fields)if(!s.has(A)){let i=r.field(A);i===null&&A.length>1&&(A=A.popLast(),i=r.field(A)),i===null?n.delete(A):n.set(A,i),s=s.add(A)}return new Js(t.key,n,new hn(s.toArray()),Wt.none())}}function X4(t,e,r){t instanceof Oa?function(s,A,i){const l=s.value.clone(),a=TB(s.fieldTransforms,A,i.transformResults);l.setAll(a),A.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Js?function(s,A,i){if(!Xd(s.precondition,A))return void A.convertToUnknownDocument(i.version);const l=TB(s.fieldTransforms,A,i.transformResults),a=A.data;a.setAll(B1(s)),a.setAll(l),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function sc(t,e,r,n){return t instanceof Oa?function(A,i,l,a){if(!Xd(A.precondition,i))return l;const c=A.value.clone(),d=kB(A.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Js?function(A,i,l,a){if(!Xd(A.precondition,i))return l;const c=kB(A.fieldTransforms,a,i),d=i.data;return d.setAll(B1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(A,i,l){return Xd(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(t,e,r)}function J4(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),A=m1(n.transform,s||null);A!=null&&(r===null&&(r=Rr.empty()),r.set(n.field,A))}return r||null}function EB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ma(n,s,(A,i)=>W4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Oa extends Vf{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Js extends Vf{constructor(e,r,n,s,A=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function B1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function TB(t,e,r){const n=new Map;Ge(t.length===r.length);for(let s=0;s<r.length;s++){const A=t[s],i=A.transform,l=e.data.field(A.field);n.set(A.field,$4(i,l,r[s]))}return n}function kB(t,e,r){const n=new Map;for(const s of t){const A=s.transform,i=r.data.field(s.field);n.set(s.field,z4(A,i,e))}return n}class Ha extends Vf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gw extends Vf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&X4(A,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=sc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=sc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=f1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let l=this.applyToLocalView(i,A.mutatedFields);l=r.has(s.key)?null:l;const a=v1(i,l);a!==null&&n.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(Xe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),dt())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,(r,n)=>EB(r,n))&&ma(this.baseMutations,e.baseMutations,(r,n)=>EB(r,n))}}class $w{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Ge(e.mutations.length===n.length);let s=function(){return V4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,n[i].version);return new $w(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr,vt;function C1(t){switch(t){default:return Oe();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function _1(t){if(t===void 0)return cr("GRPC error has no .code"),W.UNKNOWN;switch(t){case dr.OK:return W.OK;case dr.CANCELLED:return W.CANCELLED;case dr.UNKNOWN:return W.UNKNOWN;case dr.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case dr.INTERNAL:return W.INTERNAL;case dr.UNAVAILABLE:return W.UNAVAILABLE;case dr.UNAUTHENTICATED:return W.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case dr.NOT_FOUND:return W.NOT_FOUND;case dr.ALREADY_EXISTS:return W.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return W.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case dr.ABORTED:return W.ABORTED;case dr.OUT_OF_RANGE:return W.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return W.UNIMPLEMENTED;case dr.DATA_LOSS:return W.DATA_LOSS;default:return Oe()}}(vt=dr||(dr={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=new Li([4294967295,4294967295],0);function FB(t){const e=I1().encode(t),r=new EE;return r.update(e),new Uint8Array(r.digest())}function SB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new Li([r,n],0),new Li([s,A],0)]}class qw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Dl(`Invalid padding: ${r}`);if(n<0)throw new Dl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Li.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Li.fromNumber(n)));return s.compare(Z4)===1&&(s=new Li([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=FB(e),[n,s]=SB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new qw(A,s,r);return n.forEach(l=>i.insert(l)),i}insert(e){if(this.Ie===0)return;const r=FB(e),[n,s]=SB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r,n,s,A){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new uu(Xe.min(),s,new Lt(nt),fn(),dt())}}class du{constructor(e,r,n,s,A){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new du(n,r,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class E1{constructor(e,r){this.targetId=e,this.me=r}}class T1{constructor(e,r,n=nr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class UB{constructor(){this.fe=0,this.ge=NB(),this.pe=nr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=dt(),r=dt(),n=dt();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Oe()}}),new du(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=NB()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eD{constructor(e){this.Le=e,this.Be=new Map,this.ke=fn(),this.qe=QB(),this.Qe=new Lt(nt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const A=s.target;if(Lh(A))if(n===0){const i=new Se(A.path);this.Ue(r,i,Ht.newNoDocument(i,Xe.min()))}else Ge(n===1);else{const i=this.Ye(r);if(i!==n){const l=this.Ze(e),a=l?this.Xe(l,e,i):1;if(a!==0){this.je(r);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Hh==null||Hh.et(function(d,h,f,m,y){var w,E,C,x,_,S;const U={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},N=h.unchangedNames;return N&&(U.bloomFilter={applied:y===0,hashCount:(w=N==null?void 0:N.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(x=(C=(E=N==null?void 0:N.bits)===null||E===void 0?void 0:E.bitmap)===null||C===void 0?void 0:C.length)!==null&&x!==void 0?x:0,padding:(S=(_=N==null?void 0:N.bits)===null||_===void 0?void 0:_.padding)!==null&&S!==void 0?S:0,mightContain:v=>{var b;return(b=m==null?void 0:m.mightContain(v))!==null&&b!==void 0&&b}}),U}(i,e.me,this.Le.tt(),l,a))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:A=0}=r;let i,l;try{i=Hs(n).toUint8Array()}catch(a){if(a instanceof qE)return In("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new qw(i,s,A)}catch(a){return In(a instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(A=>{const i=this.Le.tt(),l=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,A,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((A,i)=>{const l=this.Je(i);if(l){if(A.current&&Lh(l.target)){const a=new Se(l.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,Ht.newNoDocument(a,e))}A.be&&(r.set(i,A.ve()),A.Ce())}});let n=dt();this.qe.forEach((A,i)=>{let l=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new uu(e,r,this.Qe,this.ke,n);return this.ke=fn(),this.qe=QB(),this.Qe=new Lt(nt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new UB,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new St(nt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||de("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new UB),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function QB(){return new Lt(Se.comparator)}function NB(){return new Lt(Se.comparator)}const tD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nD={and:"AND",or:"OR"};class sD{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Jm(t,e){return t.useProto3Json||iu(e)?e:{value:e}}function Ca(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AD(t,e){return Ca(t,e.toTimestamp())}function ur(t){return Ge(!!t),Xe.fromTimestamp(function(r){const n=Os(r);return new qt(n.seconds,n.nanos)}(t))}function Xw(t,e){return Ym(t,e).canonicalString()}function Ym(t,e){const r=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function F1(t){const e=wt.fromString(t);return Ge(M1(e)),e}function Oc(t,e){return Xw(t.databaseId,e.path)}function hs(t,e){const r=F1(e);if(r.get(1)!==t.databaseId.projectId)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Se(Q1(r))}function S1(t,e){return Xw(t.databaseId,e)}function U1(t){const e=F1(t);return e.length===4?wt.emptyPath():Q1(e)}function Zm(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q1(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function RB(t,e,r){return{name:Oc(t,e),fields:r.value.mapValue.fields}}function N1(t,e,r){const n=hs(t,e.name),s=ur(e.updateTime),A=e.createTime?ur(e.createTime):Xe.min(),i=new Rr({mapValue:{fields:e.fields}}),l=Ht.newFoundDocument(n,s,A,i);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function iD(t,e){return"found"in e?function(n,s){Ge(!!s.found),s.found.name,s.found.updateTime;const A=hs(n,s.found.name),i=ur(s.found.updateTime),l=s.found.createTime?ur(s.found.createTime):Xe.min(),a=new Rr({mapValue:{fields:s.found.fields}});return Ht.newFoundDocument(A,i,l,a)}(t,e):"missing"in e?function(n,s){Ge(!!s.missing),Ge(!!s.readTime);const A=hs(n,s.missing),i=ur(s.readTime);return Ht.newNoDocument(A,i)}(t,e):Oe()}function oD(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(Ge(d===void 0||typeof d=="string"),nr.fromBase64String(d||"")):(Ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array),nr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,l=i&&function(c){const d=c.code===void 0?W.UNKNOWN:_1(c.code);return new ue(d,c.message||"")}(i);r=new T1(n,s,A,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=hs(t,n.document.name),A=ur(n.document.updateTime),i=n.document.createTime?ur(n.document.createTime):Xe.min(),l=new Rr({mapValue:{fields:n.document.fields}}),a=Ht.newFoundDocument(s,A,i,l),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Jd(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=hs(t,n.document),A=n.readTime?ur(n.readTime):Xe.min(),i=Ht.newNoDocument(s,A),l=n.removedTargetIds||[];r=new Jd([],l,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=hs(t,n.document),A=n.removedTargetIds||[];r=new Jd([],A,s,null)}else{if(!("filter"in e))return Oe();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:A}=n,i=new Y4(s,A),l=n.targetId;r=new E1(l,i)}}return r}function Hc(t,e){let r;if(e instanceof Oa)r={update:RB(t,e.key,e.value)};else if(e instanceof Ha)r={delete:Oc(t,e.key)};else if(e instanceof Js)r={update:RB(t,e.key,e.data),updateMask:hD(e.fieldMask)};else{if(!(e instanceof Gw))return Oe();r={verify:Oc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(A,i){const l=i.transform;if(l instanceof Ba)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ji)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ba)return{fieldPath:i.field.canonicalString(),increment:l.Pe};throw Oe()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:AD(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:Oe()}(t,e.precondition)),r}function e0(t,e){const r=e.currentDocument?function(A){return A.updateTime!==void 0?Wt.updateTime(ur(A.updateTime)):A.exists!==void 0?Wt.exists(A.exists):Wt.none()}(e.currentDocument):Wt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(i,l){let a=null;if("setToServerValue"in l)Ge(l.setToServerValue==="REQUEST_TIME"),a=new Ba;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];a=new Ji(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];a=new Yi(d)}else"increment"in l?a=new ba(i,l.increment):Oe();const c=Vt.fromServerFormat(l.fieldPath);return new cu(c,a)}(t,s)):[];if(e.update){e.update.name;const s=hs(t,e.update.name),A=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new hn(c.map(d=>Vt.fromServerFormat(d)))}(e.updateMask);return new Js(s,A,i,r,n)}return new Oa(s,A,r,n)}if(e.delete){const s=hs(t,e.delete);return new Ha(s,r)}if(e.verify){const s=hs(t,e.verify);return new Gw(s,r)}return Oe()}function aD(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(r=>function(s,A){let i=s.updateTime?ur(s.updateTime):ur(A);return i.isEqual(Xe.min())&&(i=ur(A)),new q4(i,s.transformResults||[])}(r,e))):[]}function R1(t,e){return{documents:[S1(t,e.path)]}}function Kf(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=S1(t,s);const A=function(c){if(c.length!==0)return L1(Tt.create(c,"and"))}(e.filters);A&&(r.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:gA(f.field),direction:cD(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const l=Jm(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function D1(t,e,r,n){const{_t:s,parent:A}=Kf(t,e),i={},l=[];let a=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+a++;i[d]=c.alias,c.aggregateType==="count"?l.push({alias:d,count:{}}):c.aggregateType==="avg"?l.push({alias:d,avg:{field:gA(c.fieldPath)}}):c.aggregateType==="sum"&&l.push({alias:d,sum:{field:gA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:A}}function j1(t){let e=U1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Ge(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];r.where&&(A=function(h){const f=P1(h);return f instanceof Tt&&Ow(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(y){return new Mc(So(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,iu(f)?null:f}(r.limit));let a=null;r.startAt&&(a=function(h){const f=!!h.before,m=h.values||[];return new YA(m,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new YA(m,f)}(r.endAt)),i1(e,s,i,A,l,"F",a,c)}function lD(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function P1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=So(r.unaryFilter.field);return xt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=So(r.unaryFilter.field);return xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=So(r.unaryFilter.field);return xt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=So(r.unaryFilter.field);return xt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(t):t.fieldFilter!==void 0?function(r){return xt.create(So(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Tt.create(r.compositeFilter.filters.map(n=>P1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe()}}(r.compositeFilter.op))}(t):Oe()}function cD(t){return tD[t]}function uD(t){return rD[t]}function dD(t){return nD[t]}function gA(t){return{fieldPath:t.canonicalString()}}function So(t){return Vt.fromServerFormat(t.fieldPath)}function L1(t){return t instanceof xt?function(r){if(r.op==="=="){if(wB(r.value))return{unaryFilter:{field:gA(r.field),op:"IS_NAN"}};if(mB(r.value))return{unaryFilter:{field:gA(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(wB(r.value))return{unaryFilter:{field:gA(r.field),op:"IS_NOT_NAN"}};if(mB(r.value))return{unaryFilter:{field:gA(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gA(r.field),op:uD(r.op),value:r.value}}}(t):t instanceof Tt?function(r){const n=r.getFilters().map(s=>L1(s));return n.length===1?n[0]:{compositeFilter:{op:dD(r.op),filters:n}}}(t):Oe()}function hD(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function M1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,r,n,s,A=Xe.min(),i=Xe.min(),l=nr.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.ct=e}}function fD(t,e){let r;if(e.document)r=N1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Se.fromSegments(e.noDocument.path),s=eo(e.noDocument.readTime);r=Ht.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe();{const n=Se.fromSegments(e.unknownDocument.path),s=eo(e.unknownDocument.version);r=Ht.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const A=new qt(s[0],s[1]);return Xe.fromTimestamp(A)}(e.readTime)),r}function DB(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Vh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(A,i){return{name:Oc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:Ca(A,i.version.toTimestamp()),createTime:Ca(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Zi(e.version)};else{if(!e.isUnknownDocument())return Oe();n.unknownDocument={path:r.path.toArray(),version:Zi(e.version)}}return n}function Vh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eo(t){const e=new qt(t.seconds,t.nanoseconds);return Xe.fromTimestamp(e)}function ki(t,e){const r=(e.baseMutations||[]).map(A=>e0(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const l=e.mutations[A+1];i.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const n=e.mutations.map(A=>e0(t.ct,A)),s=qt.fromMillis(e.localWriteTimeMs);return new zw(e.batchId,s,r,n)}function jl(t){const e=eo(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?eo(t.lastLimboFreeSnapshotVersion):Xe.min();let n;return n=function(A){return A.documents!==void 0}(t.query)?function(A){return Ge(A.documents.length===1),Jr(Ma(U1(A.documents[0])))}(t.query):function(A){return Jr(j1(A))}(t.query),new Fs(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,nr.fromBase64String(t.resumeToken))}function H1(t,e){const r=Zi(e.snapshotVersion),n=Zi(e.lastLimboFreeSnapshotVersion);let s;s=Lh(e.target)?R1(t.ct,e.target):Kf(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xi(e.target),readTime:r,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function Jw(t){const e=j1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Oh(e,e.limit,"L"):e}function cp(t,e){return new Ww(e.largestBatchId,e0(t.ct,e.overlayMutation))}function jB(t,e){const r=e.path.lastSegment();return[t,Xr(e.path.popLast()),r]}function PB(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Zi(n.readTime),documentKey:Xr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{getBundleMetadata(e,r){return LB(e).get(r).next(n=>{if(n)return function(A){return{id:A.bundleId,createTime:eo(A.createTime),version:A.version}}(n)})}saveBundleMetadata(e,r){return LB(e).put(function(s){return{bundleId:s.id,createTime:Zi(ur(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return MB(e).get(r).next(n=>{if(n)return function(A){return{name:A.name,query:Jw(A.bundledQuery),readTime:eo(A.readTime)}}(n)})}saveNamedQuery(e,r){return MB(e).put(function(s){return{name:s.name,readTime:Zi(ur(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function LB(t){return yr(t,"bundles")}function MB(t){return yr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Gf(e,n)}getOverlay(e,r){return ml(e).get(jB(this.userId,r)).next(n=>n?cp(this.serializer,n):null)}getOverlays(e,r){const n=ls();return O.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((A,i)=>{const l=new Ww(r,i);s.push(this.ht(e,l))}),O.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(i=>s.add(Xr(i.getCollectionPath())));const A=[];return s.forEach(i=>{const l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);A.push(ml(e).j("collectionPathOverlayIndex",l))}),O.waitFor(A)}getOverlaysForCollection(e,r,n){const s=ls(),A=Xr(r),i=IDBKeyRange.bound([this.userId,A,n],[this.userId,A,Number.POSITIVE_INFINITY],!0);return ml(e).U("collectionPathOverlayIndex",i).next(l=>{for(const a of l){const c=cp(this.serializer,a);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const A=ls();let i;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ml(e).J({index:"collectionGroupOverlayIndex",range:l},(a,c,d)=>{const h=cp(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,r){return ml(e).put(function(s,A,i){const[l,a,c]=jB(A,i.mutation.key);return{userId:A,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Hc(s.ct,i.mutation)}}(this.serializer,this.userId,r))}}function ml(t){return yr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{Pt(e){return yr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?nr.fromUint8Array(n):nr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(zt(e.integerValue));else if("doubleValue"in e){const n=zt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Dc(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Os(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Hs(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?XE(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Of(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Oe()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const A=e.fields||{};this.dt(r,53);const i="value",l=((s=(n=A[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(zt(l)),this.Vt(i,r),this.Tt(A[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),Se.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Fi.vt=new Fi;function mD(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function OB(t){const e=64-function(n){let s=0;for(let A=0;A<8;++A){const i=mD(255&n[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class wD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=OB(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=OB(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class xD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class yD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class wl{constructor(){this.jt=new wD,this.Ht=new xD(this.jt),this.Jt=new yD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Si(this.indexId,this.documentKey,this.arrayValue,n)}}function sA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=HB(t.arrayValue,e.arrayValue),r!==0?r:(r=HB(t.directionalValue,e.directionalValue),r!==0?r:Se.comparator(t.documentKey,e.documentKey)))}function HB(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e){this.Xt=new St((r,n)=>Vt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Ge(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Vm(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ei(e);let s=new Set,A=0,i=0;for(;A<n.length&&this.sn(n[A]);++A)s=s.add(n[A].fieldPath.canonicalString());if(A===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!s.has(l.field.canonicalString())){const a=n[A];if(!this.on(l,a)||!this._n(this.en[i++],a))return!1}++A}for(;A<n.length;++A){const l=n[A];if(i>=this.en.length||!this._n(this.en[i++],l))return!1}return!0}an(){if(this.nn)return null;let e=new St(Vt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Mi(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Mi(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Mi(n.field,n.dir==="asc"?0:1)));return new wa(wa.UNKNOWN_ID,this.collectionId,r,xa.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){var e,r;if(Ge(t instanceof xt||t instanceof Tt),t instanceof xt){if(t instanceof A1){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(A=>xt.create(t.field,"==",A)))||[];return Tt.create(s,"or")}return t}const n=t.filters.map(s=>V1(s));return Tt.create(n,t.op)}function vD(t){if(t.getFilters().length===0)return[];const e=n0(V1(t));return Ge(K1(e)),t0(e)||r0(e)?[e]:e.getFilters()}function t0(t){return t instanceof xt}function r0(t){return t instanceof Tt&&Ow(t)}function K1(t){return t0(t)||r0(t)||function(r){if(r instanceof Tt&&$m(r)){for(const n of r.getFilters())if(!t0(n)&&!r0(n))return!1;return!0}return!1}(t)}function n0(t){if(Ge(t instanceof xt||t instanceof Tt),t instanceof xt)return t;if(t.filters.length===1)return n0(t.filters[0]);const e=t.filters.map(n=>n0(n));let r=Tt.create(e,t.op);return r=Kh(r),K1(r)?r:(Ge(r instanceof Tt),Ge(va(r)),Ge(r.filters.length>1),r.filters.reduce((n,s)=>Yw(n,s)))}function Yw(t,e){let r;return Ge(t instanceof xt||t instanceof Tt),Ge(e instanceof xt||e instanceof Tt),r=t instanceof xt?e instanceof xt?function(s,A){return Tt.create([s,A],"and")}(t,e):KB(t,e):e instanceof xt?KB(e,t):function(s,A){if(Ge(s.filters.length>0&&A.filters.length>0),va(s)&&va(A))return r1(s,A.getFilters());const i=$m(s)?s:A,l=$m(s)?A:s,a=i.filters.map(c=>Yw(c,l));return Tt.create(a,"or")}(t,e),Kh(r)}function KB(t,e){if(va(e))return r1(e,t.getFilters());{const r=e.filters.map(n=>Yw(t,n));return Tt.create(r,"or")}}function Kh(t){if(Ge(t instanceof xt||t instanceof Tt),t instanceof xt)return t;const e=t.getFilters();if(e.length===1)return Kh(e[0]);if(e1(t))return t;const r=e.map(s=>Kh(s)),n=[];return r.forEach(s=>{s instanceof xt?n.push(s):s instanceof Tt&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Tt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.un=new Zw}addToCollectionParentIndex(e,r){return this.un.add(r),O.resolve()}getCollectionParents(e,r){return O.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return O.resolve()}deleteFieldIndex(e,r){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,r){return O.resolve()}getDocumentsMatchingTarget(e,r){return O.resolve(null)}getIndexType(e,r){return O.resolve(0)}getFieldIndexes(e,r){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,r){return O.resolve(En.min())}getMinOffsetFromCollectionGroup(e,r){return O.resolve(En.min())}updateCollectionGroup(e,r,n){return O.resolve()}updateIndexEntries(e,r){return O.resolve()}}class Zw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new St(wt.comparator),A=!s.has(n);return this.index[r]=s.add(n),A}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new St(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Uint8Array(0);class bD{constructor(e,r){this.databaseId=r,this.cn=new Zw,this.ln=new Xs(n=>Xi(n),(n,s)=>ou(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const A={collectionId:n,parent:Xr(s)};return GB(e).put(A)}return O.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[DE(r),""],!1,!0);return GB(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==r)break;n.push(as(i.parent))}return n})}addFieldIndex(e,r){const n=xl(e),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(r);delete s.indexId;const A=n.add(s);if(r.indexState){const i=yo(e);return A.next(l=>{i.put(PB(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return A.next()}deleteFieldIndex(e,r){const n=xl(e),s=yo(e),A=xo(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=xl(e),n=xo(e),s=yo(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return O.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const A=new VB(n).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,r){const n=xo(e);let s=!0;const A=new Map;return O.forEach(this.hn(r),i=>this.Pn(e,i).next(l=>{s&&(s=!!l),A.set(i,l)})).next(()=>{if(s){let i=dt();const l=[];return O.forEach(A,(a,c)=>{de("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(a)} to execute ${Xi(r)}`);const d=function(_,S){const U=Vm(S);if(U===void 0)return null;for(const N of Mh(_,U.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,a),h=function(_,S){const U=new Map;for(const N of Ei(S))for(const v of Mh(_,N.fieldPath))switch(v.op){case"==":case"in":U.set(N.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return U.set(N.fieldPath.canonicalString(),v.value),Array.from(U.values())}return null}(c,a),f=function(_,S){const U=[];let N=!0;for(const v of Ei(S)){const b=v.kind===0?bB(_,v.fieldPath,_.startAt):CB(_,v.fieldPath,_.startAt);U.push(b.value),N&&(N=b.inclusive)}return new YA(U,N)}(c,a),m=function(_,S){const U=[];let N=!0;for(const v of Ei(S)){const b=v.kind===0?CB(_,v.fieldPath,_.endAt):bB(_,v.fieldPath,_.endAt);U.push(b.value),N&&(N=b.inclusive)}return new YA(U,N)}(c,a),y=this.In(a,c,f),w=this.In(a,c,m),E=this.Tn(a,c,h),C=this.En(a.indexId,d,y,f.inclusive,w,m.inclusive,E);return O.forEach(C,x=>n.G(x,r.limit).next(_=>{_.forEach(S=>{const U=Se.fromSegments(S.documentKey);i.has(U)||(i=i.add(U),l.push(U))})}))}).next(()=>l)}return O.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=vD(Tt.create(e.filters,"and")).map(n=>qm(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,A,i,l){const a=(r!=null?r.length:1)*Math.max(n.length,A.length),c=a/(r!=null?r.length:1),d=[];for(let h=0;h<a;++h){const f=r?this.dn(r[h/c]):rd,m=this.An(e,f,n[h%c],s),y=this.Rn(e,f,A[h%c],i),w=l.map(E=>this.An(e,f,E,!0));d.push(...this.createRange(m,y,w))}return d}An(e,r,n,s){const A=new Si(e,Se.empty(),r,n);return s?A:A.Zt()}Rn(e,r,n,s){const A=new Si(e,Se.empty(),r,n);return s?A.Zt():A}Pn(e,r){const n=new VB(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const l of A)n.rn(l)&&(!i||l.fields.length>i.fields.length)&&(i=l);return i})}getIndexType(e,r){let n=2;const s=this.hn(r);return O.forEach(s,A=>this.Pn(e,A).next(i=>{i?n!==0&&i.fields.length<function(a){let c=new St(Vt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new wl;for(const s of Ei(e)){const A=r.data.field(s.fieldPath);if(A==null)return null;const i=n.Yt(s.kind);Fi.vt.It(A,i)}return n.zt()}dn(e){const r=new wl;return Fi.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new wl;return Fi.vt.It(qi(this.databaseId,r),n.Yt(function(A){const i=Ei(A);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new wl);let A=0;for(const i of Ei(e)){const l=n[A++];for(const a of s)if(this.fn(r,i.fieldPath)&&Lc(l))s=this.gn(s,i,l);else{const c=a.Yt(i.kind);Fi.vt.It(l,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],A=[];for(const i of n.arrayValue.values||[])for(const l of s){const a=new wl;a.seed(l.zt()),Fi.vt.It(i,a.Yt(r.kind)),A.push(a)}return A}fn(e,r){return!!e.filters.find(n=>n instanceof xt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=xl(e),s=yo(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(A=>{const i=[];return O.forEach(A,l=>s.get([l.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new xa(h.sequenceNumber,new En(eo(h.readTime),new Se(as(h.documentKey)),h.largestBatchId)):xa.empty(),m=d.fields.map(([y,w])=>new Mi(Vt.fromServerFormat(y),w));return new wa(d.indexId,d.collectionGroup,m,f)}(l,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const A=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:nt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=xl(e),A=yo(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>O.forEach(l,a=>A.put(PB(a.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return O.forEach(r,(s,A)=>{const i=n.get(s.collectionGroup);return(i?O.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(n.set(s.collectionGroup,l),O.forEach(l,a=>this.wn(e,s,a).next(c=>{const d=this.Sn(A,a);return c.isEqual(d)?O.resolve():this.bn(e,A,a,c,d)}))))})}Dn(e,r,n,s){return xo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return xo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=xo(e);let A=new St(sA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,l)=>{A=A.add(new Si(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>A)}Sn(e,r){let n=new St(sA);const s=this.Vn(r,e);if(s==null)return n;const A=Vm(r);if(A!=null){const i=e.data.field(A.fieldPath);if(Lc(i))for(const l of i.arrayValue.values||[])n=n.add(new Si(r.indexId,e.key,this.dn(l),s))}else n=n.add(new Si(r.indexId,e.key,rd,s));return n}bn(e,r,n,s,A){de("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(a,c,d,h,f){const m=a.getIterator(),y=c.getIterator();let w=wo(m),E=wo(y);for(;w||E;){let C=!1,x=!1;if(w&&E){const _=d(w,E);_<0?x=!0:_>0&&(C=!0)}else w!=null?x=!0:C=!0;C?(h(E),E=wo(y)):x?(f(w),w=wo(m)):(w=wo(m),E=wo(y))}}(s,A,sA,l=>{i.push(this.Dn(e,r,n,l))},l=>{i.push(this.vn(e,r,n,l))}),O.waitFor(i)}yn(e){let r=1;return yo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,A)=>{A.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,l)=>sA(i,l)).filter((i,l,a)=>!l||sA(i,a[l-1])!==0);const s=[];s.push(e);for(const i of n){const l=sA(i,e),a=sA(i,r);if(l===0)s[0]=e.Zt();else if(l>0&&a<0)s.push(i),s.push(i.Zt());else if(a>0)break}s.push(r);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const l=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,rd,[]],a=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,rd,[]];A.push(IDBKeyRange.bound(l,a))}return A}Cn(e,r){return sA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(zB)}getMinOffset(e,r){return O.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Oe())).next(zB)}}function GB(t){return yr(t,"collectionParents")}function xo(t){return yr(t,"indexEntries")}function xl(t){return yr(t,"indexConfiguration")}function yo(t){return yr(t,"indexState")}function zB(t){Ge(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Pw(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new En(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(r.batchId);let l=0;const a=n.J({range:i},(d,h,f)=>(l++,f.delete()));A.push(a.next(()=>{Ge(l===1)}));const c=[];for(const d of r.mutations){const h=VE(e,d.key.path,r.batchId);A.push(s.delete(h)),c.push(d.key)}return O.waitFor(A).next(()=>c)}function Gh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);class zf{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Ge(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new zf(A,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return AA(e).J({index:"userMutationsIndex",range:n},(s,A,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const A=Uo(e),i=AA(e);return i.add({}).next(l=>{Ge(typeof l=="number");const a=new zw(l,r,n,s),c=function(m,y,w){const E=w.baseMutations.map(x=>Hc(m.ct,x)),C=w.mutations.map(x=>Hc(m.ct,x));return{userId:y,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:E,mutations:C}}(this.serializer,this.userId,a),d=[];let h=new St((f,m)=>nt(f.canonicalString(),m.canonicalString()));for(const f of s){const m=VE(this.userId,f.key.path,l);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(m,c4))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[l]=a.keys()}),O.waitFor(d).next(()=>a)})}lookupMutationBatch(e,r){return AA(e).get(r).next(n=>n?(Ge(n.userId===this.userId),ki(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?O.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let A=null;return AA(e).J({index:"userMutationsIndex",range:s},(i,l,a)=>{l.userId===this.userId&&(Ge(l.batchId>=n),A=ki(this.serializer,l)),a.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return AA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,A,i)=>{n=A.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return AA(e).U("userMutationsIndex",r).next(n=>n.map(s=>ki(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=zd(this.userId,r.path),s=IDBKeyRange.lowerBound(n),A=[];return Uo(e).J({range:s},(i,l,a)=>{const[c,d,h]=i,f=as(d);if(c===this.userId&&r.path.isEqual(f))return AA(e).get(h).next(m=>{if(!m)throw Oe();Ge(m.userId===this.userId),A.push(ki(this.serializer,m))});a.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new St(nt);const s=[];return r.forEach(A=>{const i=zd(this.userId,A.path),l=IDBKeyRange.lowerBound(i),a=Uo(e).J({range:l},(c,d,h)=>{const[f,m,y]=c,w=as(m);f===this.userId&&A.path.isEqual(w)?n=n.add(y):h.done()});s.push(a)}),O.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,A=zd(this.userId,n),i=IDBKeyRange.lowerBound(A);let l=new St(nt);return Uo(e).J({range:i},(a,c,d)=>{const[h,f,m]=a,y=as(f);h===this.userId&&n.isPrefixOf(y)?y.length===s&&(l=l.add(m)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],s=[];return r.forEach(A=>{s.push(AA(e).get(A).next(i=>{if(i===null)throw Oe();Ge(i.userId===this.userId),n.push(ki(this.serializer,i))}))}),O.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return G1(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),O.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return O.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return Uo(e).J({range:n},(A,i,l)=>{if(A[0]===this.userId){const a=as(A[1]);s.push(a)}else l.done()}).next(()=>{Ge(s.length===0)})})}containsKey(e,r){return z1(e,this.userId,r)}Nn(e){return $1(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function z1(t,e,r){const n=zd(e,r.path),s=n[1],A=IDBKeyRange.lowerBound(n);let i=!1;return Uo(t).J({range:A,H:!0},(l,a,c)=>{const[d,h,f]=l;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function AA(t){return yr(t,"mutations")}function Uo(t){return yr(t,"documentMutations")}function $1(t){return yr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new to(0)}static kn(){return new to(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new to(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Xe.fromTimestamp(new qt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>vo(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Ge(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const A=[];return vo(e).J((i,l)=>{const a=jl(l);a.sequenceNumber<=r&&n.get(a.targetId)===null&&(s++,A.push(this.removeTargetData(e,a)))}).next(()=>O.waitFor(A)).next(()=>s)}forEachTarget(e,r){return vo(e).J((n,s)=>{const A=jl(s);r(A)})}qn(e){return WB(e).get("targetGlobalKey").next(r=>(Ge(r!==null),r))}Qn(e,r){return WB(e).put("targetGlobalKey",r)}Kn(e,r){return vo(e).put(H1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Xi(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let A=null;return vo(e).J({range:s,index:"queryTargetsIndex"},(i,l,a)=>{const c=jl(l);ou(r,c.target)&&(A=c,a.done())}).next(()=>A)}addMatchingKeys(e,r,n){const s=[],A=pA(e);return r.forEach(i=>{const l=Xr(i.path);s.push(A.put({targetId:n,path:l})),s.push(this.referenceDelegate.addReference(e,n,i))}),O.waitFor(s)}removeMatchingKeys(e,r,n){const s=pA(e);return O.forEach(r,A=>{const i=Xr(A.path);return O.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,A)])})}removeMatchingKeysForTargetId(e,r){const n=pA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=pA(e);let A=dt();return s.J({range:n,H:!0},(i,l,a)=>{const c=as(i[1]),d=new Se(c);A=A.add(d)}).next(()=>A)}containsKey(e,r){const n=Xr(r.path),s=IDBKeyRange.bound([n],[DE(n)],!1,!0);let A=0;return pA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,l],a,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,r){return vo(e).get(r).next(n=>n?jl(n):null)}}function vo(t){return yr(t,"targets")}function WB(t){return yr(t,"targetGlobal")}function pA(t){return yr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB([t,e],[r,n]){const s=nt(t,r);return s===0?nt(e,n):s}class _D{constructor(e){this.Un=e,this.buffer=new St(qB),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();qB(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class W1{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){de("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){li(r)?de("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ai(r)}await this.Hn(3e5)})}}class ID{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return O.resolve(dn.oe);const n=new _D(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve($B)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$B):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,A,i,l,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,l=Date.now(),this.removeTargets(e,n,r))).next(h=>(A=h,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),ko()<=mt.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(l-i)+`ms
	Removed ${A} targets in `+(a-l)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function q1(t,e){return new ID(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,r){this.db=e,this.garbageCollector=q1(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return nd(e,n)}removeReference(e,r,n){return nd(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return nd(e,r)}nr(e,r){return function(s,A){let i=!1;return $1(s).Y(l=>z1(s,l,A).next(a=>(a&&(i=!0),O.resolve(!a)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,l)=>{if(l<=r){const a=this.nr(e,i).next(c=>{if(!c)return A++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Xe.min()),pA(e).delete(function(h){return[0,Xr(h.path)]}(i))))});s.push(a)}}).next(()=>O.waitFor(s)).next(()=>n.apply(e)).next(()=>A)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return nd(e,r)}tr(e,r){const n=pA(e);let s,A=dn.oe;return n.J({index:"documentTargetsIndex"},([i,l],{path:a,sequenceNumber:c})=>{i===0?(A!==dn.oe&&r(new Se(as(s)),A),A=c,s=a):A=dn.oe}).next(()=>{A!==dn.oe&&r(new Se(as(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nd(t,e){return pA(t).put(function(n,s){return{targetId:0,path:Xr(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.changes=new Xs(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?O.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Bi(e).put(n)}removeEntry(e,r,n){return Bi(e).delete(function(A,i){const l=A.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Vh(i),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Ht.newInvalidDocument(r);return Bi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yl(r))},(s,A)=>{n=this.ir(r,A)}).next(()=>n)}sr(e,r){let n={size:0,document:Ht.newInvalidDocument(r)};return Bi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yl(r))},(s,A)=>{n={document:this.ir(r,A),size:Gh(A)}}).next(()=>n)}getEntries(e,r){let n=fn();return this._r(e,r,(s,A)=>{const i=this.ir(s,A);n=n.insert(s,i)}).next(()=>n)}ar(e,r){let n=fn(),s=new Lt(Se.comparator);return this._r(e,r,(A,i)=>{const l=this.ir(A,i);n=n.insert(A,l),s=s.insert(A,Gh(i))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return O.resolve();let s=new St(YB);r.forEach(a=>s=s.add(a));const A=IDBKeyRange.bound(yl(s.first()),yl(s.last())),i=s.getIterator();let l=i.getNext();return Bi(e).J({index:"documentKeyIndex",range:A},(a,c,d)=>{const h=Se.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;l&&YB(l,h)<0;)n(l,null),l=i.getNext();l&&l.isEqual(h)&&(n(l,c),l=i.hasNext()?i.getNext():null),l?d.$(yl(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,A){const i=r.path,l=[i.popLast().toArray(),i.lastSegment(),Vh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bi(e).U(IDBKeyRange.bound(l,a,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=fn();for(const h of c){const f=this.ir(Se.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(lu(r,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,s){let A=fn();const i=JB(r,n),l=JB(r,En.max());return Bi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,l,!0)},(a,c,d)=>{const h=this.ir(Se.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new kD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return XB(e).get("remoteDocumentGlobalKey").next(r=>(Ge(!!r),r))}rr(e,r){return XB(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=fD(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Xe.min())))return n}return Ht.newInvalidDocument(e)}}function J1(t){return new TD(t)}class kD extends X1{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Xs(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new St((A,i)=>nt(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const l=this.lr.get(A);if(r.push(this.cr.removeEntry(e,A,l.readTime)),i.isValidDocument()){const a=DB(this.cr.serializer,i);s=s.add(A.path.popLast());const c=Gh(a);n+=c-l.size,r.push(this.cr.addEntry(e,A,a))}else if(n-=l.size,this.trackRemovals){const a=DB(this.cr.serializer,i.convertToNoDocument(Xe.min()));r.push(this.cr.addEntry(e,A,a))}}),s.forEach(A=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),r.push(this.cr.updateMetadata(e,n)),O.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:n.get(A).readTime})}),n))}}function XB(t){return yr(t,"remoteDocumentGlobal")}function Bi(t){return yr(t,"remoteDocumentsV14")}function yl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JB(t,e){const r=e.documentKey.path.toArray();return[t,Vh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function YB(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let A=0;A<r.length-2&&A<n.length-2;++A)if(s=nt(r[A],n[A]),s)return s;return s=nt(r.length,n.length),s||(s=nt(r[r.length-2],n[n.length-2]),s||nt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&sc(n.mutation,s,hn.empty(),qt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,dt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=dt()){const s=ls();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(A=>{let i=Rl();return A.forEach((l,a)=>{i=i.insert(l,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=ls();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,dt()))}populateOverlays(e,r,n){const s=[];return n.forEach(A=>{r.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,l)=>{r.set(i,l)})})}computeViews(e,r,n,s){let A=fn();const i=nc(),l=function(){return nc()}();return r.forEach((a,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Js)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),sc(d.mutation,c,d.mutation.getFieldMask(),qt.now())):i.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,A).next(a=>(a.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return l.set(c,new FD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const n=nc();let s=new Lt((i,l)=>i-l),A=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const l of i)l.keys().forEach(a=>{const c=r.get(a);if(c===null)return;let d=n.get(a)||hn.empty();d=l.applyToLocalView(c,d),n.set(a,d);const h=(s.get(l.batchId)||dt()).add(a);s=s.insert(l.batchId,h)})}).next(()=>{const i=[],l=s.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,d=a.value,h=f1();d.forEach(f=>{if(!A.has(f)){const m=v1(r.get(f),n.get(f));m!==null&&h.set(f,m),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return O.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return Se.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Hw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-A.size):O.resolve(ls());let l=-1,a=A;return i.next(c=>O.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),A.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,a,c,dt())).next(d=>({batchId:l,changes:h1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Se(r)).next(n=>{let s=Rl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const A=r.collectionGroup;let i=Rl();return this.indexManager.getCollectionParents(e,A).next(l=>O.forEach(l,a=>{const c=function(h,f){return new qs(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,a.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,A,s))).next(i=>{A.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Ht.newInvalidDocument(d)))});let l=Rl();return i.forEach((a,c)=>{const d=A.get(a);d!==void 0&&sc(d.mutation,c,hn.empty(),qt.now()),lu(r,c)&&(l=l.insert(a,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return O.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ur(s.createTime)}}(r)),O.resolve()}getNamedQuery(e,r){return O.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:Jw(s.bundledQuery),readTime:ur(s.readTime)}}(r)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.overlays=new Lt(Se.comparator),this.Ir=new Map}getOverlay(e,r){return O.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ls();return O.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,A)=>{this.ht(e,r,A)}),O.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(n)),O.resolve()}getOverlaysForCollection(e,r,n){const s=ls(),A=r.length+1,i=new Se(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===A&&a.largestBatchId>n&&s.set(a.getKey(),a)}return O.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let A=new Lt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=A.get(c.largestBatchId);d===null&&(d=ls(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=ls(),a=A.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return O.resolve(l)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ww(r,n));let A=this.Ir.get(r);A===void 0&&(A=dt(),this.Ir.set(r,A)),this.Ir.set(r,A.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.sessionToken=nr.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.Tr=new St(Cr.Er),this.dr=new St(Cr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Cr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Cr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Se(new wt([])),n=new Cr(r,e),s=new Cr(r,e+1),A=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Se(new wt([])),n=new Cr(r,e),s=new Cr(r,e+1);let A=dt();return this.dr.forEachInRange([n,s],i=>{A=A.add(i.key)}),A}containsKey(e){const r=new Cr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Cr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Se.comparator(e.key,r.key)||nt(e.wr,r.wr)}static Ar(e,r){return nt(e.wr,r.wr)||Se.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new St(Cr.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new zw(A,r,n,s);this.mutationQueue.push(i);for(const l of s)this.br=this.br.add(new Cr(l.key,A)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(i)}lookupMutationBatch(e,r){return O.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),A=s<0?0:s;return O.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Cr(r,0),s=new Cr(r,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([n,s],i=>{const l=this.Dr(i.wr);A.push(l)}),O.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new St(nt);return r.forEach(s=>{const A=new Cr(s,0),i=new Cr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],l=>{n=n.add(l.wr)})}),O.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let A=n;Se.isDocumentKey(A)||(A=A.child(""));const i=new Cr(new Se(A),0);let l=new St(nt);return this.br.forEachWhile(a=>{const c=a.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(l=l.add(a.wr)),!0)},i),O.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Ge(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return O.forEach(r.mutations,s=>{const A=new Cr(s.key,r.batchId);return n=n.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Cr(r,0),s=this.br.firstAfterOrEqual(n);return O.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.Mr=e,this.docs=function(){return new Lt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),A=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return O.resolve(n?n.document.mutableCopy():Ht.newInvalidDocument(r))}getEntries(e,r){let n=fn();return r.forEach(s=>{const A=this.docs.get(s);n=n.insert(s,A?A.document.mutableCopy():Ht.newInvalidDocument(s))}),O.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let A=fn();const i=r.path,l=new Se(i.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Pw(PE(d),n)<=0||(s.has(d.key)||lu(r,d))&&(A=A.insert(d.key,d.mutableCopy()))}return O.resolve(A)}getAllFromCollectionGroup(e,r,n,s){Oe()}Or(e,r){return O.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new DD(this)}getSize(e){return O.resolve(this.size)}}class DD extends X1{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),O.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.persistence=e,this.Nr=new Xs(r=>Xi(r),ou),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ex,this.targetCount=0,this.kr=to.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),O.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new to(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,O.resolve()}updateTargetData(e,r){return this.Kn(r),O.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,r,n){let s=0;const A=[];return this.Nr.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(A).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return O.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),O.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,A=[];return s&&r.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),O.waitFor(A)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),O.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return O.resolve(n)}containsKey(e,r){return O.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,r){this.qr={},this.overlays={},this.Qr=new dn(0),this.Kr=!1,this.Kr=!0,this.$r=new QD,this.referenceDelegate=e(this),this.Ur=new jD(this),this.indexManager=new BD,this.remoteDocumentCache=function(s){return new RD(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new O1(r),this.Gr=new SD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new UD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new ND(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){de("MemoryPersistence","Starting transaction:",e);const s=new PD(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,r){return O.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class PD extends ME{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Jr=new ex,this.Yr=null}static Zr(e){return new $f(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),O.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),O.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),O.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,n=>{const s=Se.fromPath(n);return this.ei(e,s).next(A=>{A||r.removeEntry(s,Xe.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return O.or([()=>O.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class zh{constructor(e,r){this.persistence=e,this.ti=new Xs(n=>Xr(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=q1(this,r)}static Zr(e,r){return new zh(e,r)}zr(){}jr(e){return O.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return O.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(A=>A?O.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),A=s.newChangeBuffer();return s.Or(e,i=>this.nr(e,i,r).next(l=>{l||(n++,A.removeEntry(i,Xe.min()))})).next(()=>A.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),O.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),O.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),O.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Wd(e.data.value)),r}nr(e,r,n){return O.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return O.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.serializer=e}O(e,r,n,s){const A=new Pf("createOrUpgrade",r);n<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dB,{unique:!0}),a.createObjectStore("documentMutations")}(e),ZB(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=O.resolve();return n<3&&s>=3&&(n!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),ZB(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),n<4&&s>=4&&(n!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dB,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return O.waitFor(f)})}(e,A))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(i=i.next(()=>this.ni(A))),n<6&&s>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),n<7&&s>=7&&(i=i.next(()=>this.ii(A))),n<8&&s>=8&&(i=i.next(()=>this.si(e,A))),n<9&&s>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(i=i.next(()=>this.oi(A))),n<11&&s>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:B4});c.createIndex("collectionPathOverlayIndex",b4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",C4,{unique:!1})})(e)})),n<13&&s>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:u4});c.createIndex("documentKeyIndex",d4),c.createIndex("collectionGroupIndex",h4)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),n<15&&s>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:w4}).createIndex("sequenceNumberIndex",x4,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:y4}).createIndex("documentKeyIndex",v4,{unique:!1})}(e))),n<16&&s>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Gh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>O.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(l=>O.forEach(l,a=>{Ge(a.userId===A.userId);const c=ki(this.serializer,a);return G1(e,A.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return n.J((i,l)=>{const a=new wt(i),c=function(h){return[0,Xr(h)]}(a);A.push(r.get(c).next(d=>d?O.resolve():(h=>r.put({targetId:0,path:Xr(h),sequenceNumber:s.highestListenSequenceNumber}))(a)))}).next(()=>O.waitFor(A))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:m4});const n=r.store("collectionParents"),s=new Zw,A=i=>{if(s.add(i)){const l=i.lastSegment(),a=i.popLast();return n.put({collectionId:l,parent:Xr(a)})}};return r.store("remoteDocuments").J({H:!0},(i,l)=>{const a=new wt(i);return A(a.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,l,a],c)=>{const d=as(l);return A(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const A=jl(s),i=H1(this.serializer,A);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((A,i)=>{const l=r.store("remoteDocumentsV14"),a=function(h){return h.document?new Se(wt.fromString(h.document.name).popFirst(5)):h.noDocument?Se.fromSegments(h.noDocument.path):h.unknownDocument?Se.fromSegments(h.unknownDocument.path):Oe()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(l.put(c))}).next(()=>O.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=J1(this.serializer),A=new tx($f.Zr,this.serializer.ct);return n.U().next(i=>{const l=new Map;return i.forEach(a=>{var c;let d=(c=l.get(a.userId))!==null&&c!==void 0?c:dt();ki(this.serializer,a).keys().forEach(h=>d=d.add(h)),l.set(a.userId,d)}),O.forEach(l,(a,c)=>{const d=new Ir(c),h=Gf.lt(this.serializer,d),f=A.getIndexManager(d),m=zf.lt(d,this.serializer,f,A.referenceDelegate);return new Y1(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Km(r,dn.oe),a).next()})})}}function ZB(t){t.createObjectStore("targetDocuments",{keyPath:g4}).createIndex("documentTargetsIndex",p4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",f4,{unique:!0}),t.createObjectStore("targetGlobal")}const up="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rx{constructor(e,r,n,s,A,i,l,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=A,this.window=i,this.document=l,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!rx.D())throw new ue(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ED(this,s),this.Ai=r+"main",this.serializer=new O1(a),this.Ri=new ds(this.Ai,this.hi,new LD(this.serializer)),this.$r=new pD,this.Ur=new CD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=J1(this.serializer),this.Gr=new gD,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ue(W.FAILED_PRECONDITION,up);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new dn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(li(e))return de("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return de("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return vl(e).get("owner").next(r=>O.resolve(this.vi(r)))}Ci(e){return sd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=yr(r,"clientMetadata");return n.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(l=>A.indexOf(l)===-1);return O.forEach(i,l=>n.delete(l.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?O.resolve(!0):vl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ue(W.FAILED_PRECONDITION,up);return!1}}return!(!this.networkEnabled||!this.inForeground)||sd(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(A||i&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&de("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Km(e,dn.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>sd(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return zf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Gf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){de("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",A=function(a){return a===17?E4:a===16?I4:a===15?Mw:a===14?zE:a===13?GE:a===12?_4:a===11?KE:void Oe()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,l=>(i=new Km(l,this.Qr?this.Qr.next():dn.oe),r==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ue(W.FAILED_PRECONDITION,LE);return n(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>n(i)))).then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e){return vl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ue(W.FAILED_PRECONDITION,up)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vl(e).put("owner",r)}static D(){return ds.D()}bi(e){const r=vl(e);return r.get("owner").next(n=>this.vi(n)?(de("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):O.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(cr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;yE()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return de("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return cr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vl(t){return yr(t,"owner")}function sd(t){return yr(t,"clientMetadata")}function nx(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=dt(),s=dt();for(const A of r.docChanges)switch(A.type){case 0:n=n.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new sx(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yE()?8:OE(xr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const A={result:null};return this.Yi(e,r).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,r,s,n).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new MD;return this.Xi(e,r,i).next(l=>{if(A.result=l,this.zi)return this.es(e,r,i,l.size)})}).next(()=>A.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(ko()<=mt.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Fo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(ko()<=mt.DEBUG&&de("QueryEngine","Query:",Fo(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(ko()<=mt.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Fo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(r))):O.resolve())}Yi(e,r){if(_B(r))return O.resolve(null);let n=Jr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Oh(r,null,"F"),n=Jr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(A=>{const i=dt(...A);return this.Ji.getDocuments(e,i).next(l=>this.indexManager.getMinOffset(e,n).next(a=>{const c=this.ts(r,l);return this.ns(r,c,i,a.readTime)?this.Yi(e,Oh(r,null,"F")):this.rs(e,c,r,a)}))})))}Zi(e,r,n,s){return _B(r)||s.isEqual(Xe.min())?O.resolve(null):this.Ji.getDocuments(e,n).next(A=>{const i=this.ts(r,A);return this.ns(r,i,n,s)?O.resolve(null):(ko()<=mt.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fo(r)),this.rs(e,i,r,jE(s,-1)).next(l=>l))})}ts(e,r){let n=new St(u1(e));return r.forEach((s,A)=>{lu(e,A)&&(n=n.add(A))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const A=e.limitType==="F"?r.last():r.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,r,n){return ko()<=mt.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Fo(r)),this.Ji.getDocumentsMatchingQuery(e,r,En.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(A=>(r.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Lt(nt),this._s=new Xs(A=>Xi(A),ou),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function eT(t,e,r,n){return new OD(t,e,r,n)}async function tT(t,e){const r=Te(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(A=>(s=A,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(A=>{const i=[],l=[];let a=dt();for(const c of s){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of A){l.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return r.localDocuments.getDocuments(n,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:l}))})})}function HD(t,e){const r=Te(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),A=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,a,c,d){const h=c.batch,f=h.keys();let m=O.resolve();return f.forEach(y=>{m=m.next(()=>d.getEntry(a,y)).next(w=>{const E=c.docVersions.get(y);Ge(E!==null),w.version.compareTo(E)<0&&(h.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),d.addEntry(w)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(a,h))}(r,n,e,A).next(()=>A.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let a=dt();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(a=a.add(l.batch.mutations[c].key));return a}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function rT(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function VD(t,e){const r=Te(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(r.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(A,d.addedDocuments,h)));let m=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(nr.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(h,m),function(w,E,C){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(f,m,d)&&l.push(r.Ur.updateTargetData(A,m))});let a=fn(),c=dt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(A,d))}),l.push(nT(A,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!n.isEqual(Xe.min())){const d=r.Ur.getLastRemoteSnapshotVersion(A).next(h=>r.Ur.setTargetsMetadata(A,A.currentSequenceNumber,n));l.push(d)}return O.waitFor(l).next(()=>i.apply(A)).next(()=>r.localDocuments.getLocalViewOfDocuments(A,a,c)).next(()=>a)}).then(A=>(r.os=s,A))}function nT(t,e,r){let n=dt(),s=dt();return r.forEach(A=>n=n.add(A)),e.getEntries(t,n).next(A=>{let i=fn();return r.forEach((l,a)=>{const c=A.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),a.isNoDocument()&&a.version.isEqual(Xe.min())?(e.removeEntry(l,a.readTime),i=i.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(l,a)):de("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:s}})}function KD(t,e){const r=Te(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function _a(t,e){const r=Te(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(A=>A?(s=A,O.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Fs(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ia(t,e,r){const n=Te(t),s=n.os.get(e),A=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",A,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!li(i))throw i;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function $h(t,e,r){const n=Te(t);let s=Xe.min(),A=dt();return n.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=Te(a),f=h._s.get(d);return f!==void 0?O.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,Jr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,l.targetId).next(a=>{A=a})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:Xe.min(),r?A:dt())).next(l=>(iT(n,c1(e),l),{documents:l,Ts:A})))}function sT(t,e){const r=Te(t),n=Te(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",A=>n.ot(A,e).next(i=>i?i.target:null))}function AT(t,e){const r=Te(t),n=r.us.get(e)||Xe.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,jE(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(iT(r,e,s),s))}function iT(t,e,r){let n=t.us.get(e)||Xe.min();r.forEach((s,A)=>{A.readTime.compareTo(n)>0&&(n=A.readTime)}),t.us.set(e,n)}async function GD(t,e,r,n){const s=Te(t);let A=dt(),i=fn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const l=s.cs.newChangeBuffer({trackRemovals:!0}),a=await _a(s,function(d){return Jr(Ma(wt.fromString(`__bundle__/docs/${d}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>nT(c,l,i).next(d=>(l.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>s.Ur.addMatchingKeys(c,A,a.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function zD(t,e,r=dt()){const n=await _a(t,Jr(Jw(e.bundledQuery))),s=Te(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=ur(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const l=n.withResumeToken(nr.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(A,l).next(()=>s.Ur.removeMatchingKeysForTargetId(A,n.targetId)).next(()=>s.Ur.addMatchingKeys(A,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function eb(t,e){return`firestore_clients_${t}_${e}`}function tb(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function dp(t,e){return`firestore_targets_${t}_${e}`}class Wh{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new ue(s.error.code,s.error.message))),i?new Wh(e,r,s.state,A):(cr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ac{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,A=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return A&&n.error&&(A=typeof n.error.message=="string"&&typeof n.error.code=="string",A&&(s=new ue(n.error.code,n.error.message))),A?new Ac(e,n.state,s):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,A=Vw();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=HE(n.activeTargetIds[i]),A=A.add(n.activeTargetIds[i]);return s?new qh(e,A):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Ax{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Ax(r.clientId,r.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class s0{constructor(){this.activeTargetIds=Vw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hp{constructor(e,r,n,s,A){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Lt(nt),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=eb(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new s0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(eb(this.persistenceKey,n));if(s){const A=qh.Rs(n,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(dp(this.persistenceKey,e));if(s){const A=Ac.Rs(e,s);A&&(n=A.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dp(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return de("SharedClientState","READ",e,r),r}setItem(e,r){de("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){de("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(de("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(A){let i=dn.oe;if(A!=null)try{const l=JSON.parse(A);Ge(typeof l=="number"),i=l}catch(l){cr("SharedClientState","Failed to read sequence number from WebStorage",l)}return i}(r.newValue);n!==dn.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new Wh(this.currentUser,e,r,n),A=tb(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const r=tb(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=dp(this.persistenceKey,e),A=new Ac(e,r,n);this.setItem(s,A.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return qh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),A=n[2]!==void 0?n[2]:null;return Wh.Rs(new Ir(A),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return Ac.Rs(s,r)}Ls(e){return Ax.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);de("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(n),i=[],l=[];return A.forEach(a=>{s.has(a)||i.push(a)}),s.forEach(a=>{A.has(a)||l.push(a)}),this.syncEngine.io(i,l).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Vw();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class oT{constructor(){this.so=new s0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new s0,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad=null;function fp(){return Ad===null?Ad=function(){return 268435456+Math.round(2147483648*Math.random())}():Ad++,"0x"+Ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="WebChannelConnection";class XD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(r,n,s,A,i){const l=fp(),a=this.xo(r,n.toUriEncodedString());de("RestConnection",`Sending RPC '${r}' ${l}:`,a,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(r,a,c,s).then(d=>(de("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw In("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",a,"request:",s),d})}Lo(r,n,s,A,i,l){return this.Mo(r,n,s,A,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+La}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((A,i)=>r[i]=A),s&&s.headers.forEach((A,i)=>r[i]=A)}xo(r,n){const s=WD[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const A=fp();return new Promise((i,l)=>{const a=new TE;a.setWithCredentials(!0),a.listenOnce(kE.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Gd.NO_ERROR:const d=a.getResponseJson();de(Kr,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case Gd.TIMEOUT:de(Kr,`RPC '${e}' ${A} timed out`),l(new ue(W.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const h=a.getStatus();if(de(Kr,`RPC '${e}' ${A} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const y=function(E){const C=E.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(C)>=0?C:W.UNKNOWN}(m.status);l(new ue(y,m.message))}else l(new ue(W.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new ue(W.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{de(Kr,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);de(Kr,`RPC '${e}' ${A} sending request:`,s),a.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=fp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=UE(),l=SE(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,r,n),a.encodeInitMessageHeaders=!0;const d=A.join("");de(Kr,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,m=!1;const y=new qD({Io:E=>{m?de(Kr,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(f||(de(Kr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),de(Kr,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},To:()=>h.close()}),w=(E,C,x)=>{E.listen(C,_=>{try{x(_)}catch(S){setTimeout(()=>{throw S},0)}})};return w(h,Nl.EventType.OPEN,()=>{m||(de(Kr,`RPC '${e}' stream ${s} transport opened.`),y.yo())}),w(h,Nl.EventType.CLOSE,()=>{m||(m=!0,de(Kr,`RPC '${e}' stream ${s} transport closed`),y.So())}),w(h,Nl.EventType.ERROR,E=>{m||(m=!0,In(Kr,`RPC '${e}' stream ${s} transport errored:`,E),y.So(new ue(W.UNAVAILABLE,"The operation could not be completed")))}),w(h,Nl.EventType.MESSAGE,E=>{var C;if(!m){const x=E.data[0];Ge(!!x);const _=x,S=_.error||((C=_[0])===null||C===void 0?void 0:C.error);if(S){de(Kr,`RPC '${e}' stream ${s} received error:`,S);const U=S.status;let N=function(B){const F=dr[B];if(F!==void 0)return _1(F)}(U),v=S.message;N===void 0&&(N=W.INTERNAL,v="Unknown error status: "+U+" with message "+S.message),m=!0,y.So(new ue(N,v)),h.close()}else de(Kr,`RPC '${e}' stream ${s} received:`,x),y.bo(x)}}),w(l,FE.STAT_EVENT,E=>{E.stat===Hm.PROXY?de(Kr,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Hm.NOPROXY&&de(Kr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof window<"u"?window:null}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){return new sD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,r,n=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,r,n,s,A,i,l,a){this.ui=e,this.Ho=n,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ix(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===W.RESOURCE_EXHAUSTED?(cr(r.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ue(W.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JD extends lT{constructor(e,r,n,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=oD(this.serializer,e),n=function(A){if(!("targetChange"in A))return Xe.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?Xe.min():i.readTime?ur(i.readTime):Xe.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Zm(this.serializer),r.addTarget=function(A,i){let l;const a=i.target;if(l=Lh(a)?{documents:R1(A,a)}:{query:Kf(A,a)._t},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=k1(A,i.resumeToken);const c=Jm(A,i.expectedCount);c!==null&&(l.expectedCount=c)}else if(i.snapshotVersion.compareTo(Xe.min())>0){l.readTime=Ca(A,i.snapshotVersion.toTimestamp());const c=Jm(A,i.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const n=lD(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Zm(this.serializer),r.removeTarget=e,this.a_(r)}}class YD extends lT{constructor(e,r,n,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=aD(e.writeResults,e.commitTime),n=ur(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Zm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Hc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,Ym(r,n),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new ue(W.UNKNOWN,A.toString())})}Lo(e,r,n,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Lo(e,Ym(r,n),s,i,l,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ue(W.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ej{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(r),this.D_=!1):de("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,r,n,s,A){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{n.enqueueAndForget(async()=>{ui(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=Te(a);c.L_.add(4),await Va(c),c.q_.set("Unknown"),c.L_.delete(4),await fu(c)}(this))})}),this.q_=new ej(n,s)}}async function fu(t){if(ui(t))for(const e of t.B_)await e(!0)}async function Va(t){for(const e of t.B_)await e(!1)}function Wf(t,e){const r=Te(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),lx(r)?ax(r):Ga(r).r_()&&ox(r,e))}function Ea(t,e){const r=Te(t),n=Ga(r);r.N_.delete(e),n.r_()&&cT(r,e),r.N_.size===0&&(n.r_()?n.o_():ui(r)&&r.q_.set("Unknown"))}function ox(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ga(t).A_(e)}function cT(t,e){t.Q_.xe(e),Ga(t).R_(e)}function ax(t){t.Q_=new eD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ga(t).start(),t.q_.v_()}function lx(t){return ui(t)&&!Ga(t).n_()&&t.N_.size>0}function ui(t){return Te(t).L_.size===0}function uT(t){t.Q_=void 0}async function rj(t){t.q_.set("Online")}async function nj(t){t.N_.forEach((e,r)=>{ox(t,e)})}async function sj(t,e){uT(t),lx(t)?(t.q_.M_(e),ax(t)):t.q_.set("Unknown")}async function Aj(t,e,r){if(t.q_.set("Online"),e instanceof T1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const l of A.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,i),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(n){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Xh(t,n)}else if(e instanceof Jd?t.Q_.Ke(e):e instanceof E1?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Xe.min()))try{const n=await rT(t.localStore);r.compareTo(n)>=0&&await function(A,i){const l=A.Q_.rt(i);return l.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),l.targetMismatches.forEach((a,c)=>{const d=A.N_.get(a);if(!d)return;A.N_.set(a,d.withResumeToken(nr.EMPTY_BYTE_STRING,d.snapshotVersion)),cT(A,a);const h=new Fs(d.target,a,c,d.sequenceNumber);ox(A,h)}),A.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){de("RemoteStore","Failed to raise snapshot:",n),await Xh(t,n)}}async function Xh(t,e,r){if(!li(e))throw e;t.L_.add(1),await Va(t),t.q_.set("Offline"),r||(r=()=>rT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await fu(t)})}function dT(t,e){return e().catch(r=>Xh(t,r,e))}async function Ka(t){const e=Te(t),r=ZA(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ij(e);)try{const s=await KD(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,oj(e,s)}catch(s){await Xh(e,s)}hT(e)&&fT(e)}function ij(t){return ui(t)&&t.O_.length<10}function oj(t,e){t.O_.push(e);const r=ZA(t);r.r_()&&r.V_&&r.m_(e.mutations)}function hT(t){return ui(t)&&!ZA(t).n_()&&t.O_.length>0}function fT(t){ZA(t).start()}async function aj(t){ZA(t).p_()}async function lj(t){const e=ZA(t);for(const r of t.O_)e.m_(r.mutations)}async function cj(t,e,r){const n=t.O_.shift(),s=$w.from(n,e,r);await dT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ka(t)}async function uj(t,e){e&&ZA(t).V_&&await async function(n,s){if(function(i){return C1(i)&&i!==W.ABORTED}(s.code)){const A=n.O_.shift();ZA(n).s_(),await dT(n,()=>n.remoteSyncer.rejectFailedWrite(A.batchId,s)),await Ka(n)}}(t,e),hT(t)&&fT(t)}async function nb(t,e){const r=Te(t);r.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const n=ui(r);r.L_.add(3),await Va(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await fu(r)}async function A0(t,e){const r=Te(t);e?(r.L_.delete(2),await fu(r)):e||(r.L_.add(2),await Va(r),r.q_.set("Unknown"))}function Ga(t){return t.K_||(t.K_=function(r,n,s){const A=Te(r);return A.w_(),new JD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:rj.bind(null,t),Ro:nj.bind(null,t),mo:sj.bind(null,t),d_:Aj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),lx(t)?ax(t):t.q_.set("Unknown")):(await t.K_.stop(),uT(t))})),t.K_}function ZA(t){return t.U_||(t.U_=function(r,n,s){const A=Te(r);return A.w_(),new YD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aj.bind(null,t),mo:uj.bind(null,t),f_:lj.bind(null,t),g_:cj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ka(t)):(await t.U_.stop(),t.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,r,n,s,A){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=A,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,A){const i=Date.now()+n,l=new cx(e,r,i,s,A);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function za(t,e){if(cr("AsyncQueue",`${e}: ${t}`),li(t))return new ue(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Se.comparator(r.key,n.key):(r,n)=>Se.comparator(r.key,n.key),this.keyedMap=Rl(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new na(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new na;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.W_=new Lt(Se.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ta{constructor(e,r,n,s,A,i,l,a,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,A){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new Ta(e,r,na.emptySet(r),i,n,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hj{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Te(r),A=s.queries;s.queries=Ab(),A.forEach((i,l)=>{for(const a of l.j_)a.onError(n)})})(this,new ue(W.ABORTED,"Firestore shutting down"))}}function Ab(){return new Xs(t=>l1(t),au)}async function ux(t,e){const r=Te(t);let n=3;const s=e.query;let A=r.queries.get(s);A?!A.H_()&&e.J_()&&(n=2):(A=new dj,n=e.J_()?0:1);try{switch(n){case 0:A.z_=await r.onListen(s,!0);break;case 1:A.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const l=za(i,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,A),A.j_.push(e),e.Z_(r.onlineState),A.z_&&e.X_(A.z_)&&hx(r)}async function dx(t,e){const r=Te(t),n=e.query;let s=3;const A=r.queries.get(n);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function fj(t,e){const r=Te(t);let n=!1;for(const s of e){const A=s.query,i=r.queries.get(A);if(i){for(const l of i.j_)l.X_(s)&&(n=!0);i.z_=s}}n&&hx(r)}function gj(t,e,r){const n=Te(t),s=n.queries.get(e);if(s)for(const A of s.j_)A.onError(r);n.queries.delete(e)}function hx(t){t.Y_.forEach(e=>{e.next()})}var i0,ib;(ib=i0||(i0={})).ea="default",ib.Cache="cache";class fx{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ta(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==i0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.serializer=e}Es(e){return hs(this.serializer,e)}ds(e){return e.metadata.exists?N1(this.serializer,e.document,!1):Ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ur(e)}}class mj{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=wt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new ob(this.serializer);for(const s of e)if(s.metadata.queries){const A=n.Es(s.metadata.name);for(const i of s.metadata.queries){const l=(r.get(i)||dt()).add(A);r.set(i,l)}}return r}async complete(){const e=await GD(this.localStore,new ob(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await zD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function gT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.key=e}}class mT{constructor(e){this.key=e}}class wT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=dt(),this.mutatedKeys=dt(),this.Aa=u1(e),this.Ra=new na(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new sb,s=r?r.Ra:this.Ra;let A=r?r.mutatedKeys:this.mutatedKeys,i=s,l=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=lu(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?y!==w&&(n.track({type:3,doc:m}),E=!0):this.ga(f,m)||(n.track({type:2,doc:m}),E=!0,(a&&this.Aa(m,a)>0||c&&this.Aa(m,c)<0)&&(l=!0)):!f&&m?(n.track({type:0,doc:m}),E=!0):f&&!m&&(n.track({type:1,doc:f}),E=!0,(a||c)&&(l=!0)),E&&(m?(i=i.add(m),A=w?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:l,mutatedKeys:A}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,y){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return w(m)-w(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const l=r&&!s?this.ya():[],a=this.da.size===0&&this.current&&!s?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new Ta(this.query,e.Ra,A,i,e.mutatedKeys,a===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=dt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new mT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new pT(n))}),r}ba(e){this.Ta=e.Ts,this.da=dt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ta.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wj{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class xj{constructor(e){this.key=e,this.va=!1}}class yj{constructor(e,r,n,s,A,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new Xs(l=>l1(l),au),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(Se.comparator),this.Na=new Map,this.La=new ex,this.Ba={},this.ka=new Map,this.qa=to.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vj(t,e,r=!0){const n=qf(t);let s;const A=n.Fa.get(e);return A?(n.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await xT(n,e,r,!0),s}async function Bj(t,e){const r=qf(t);await xT(r,e,!0,!1)}async function xT(t,e,r,n){const s=await _a(t.localStore,Jr(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,r);let l;return n&&(l=await gx(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&Wf(t.remoteStore,s),l}async function gx(t,e,r,n,s){t.Ka=(h,f,m)=>async function(w,E,C,x){let _=E.view.ma(C);_.ns&&(_=await $h(w.localStore,E.query,!1).then(({documents:v})=>E.view.ma(v,_)));const S=x&&x.targetChanges.get(E.targetId),U=x&&x.targetMismatches.get(E.targetId)!=null,N=E.view.applyChanges(_,w.isPrimaryClient,S,U);return o0(w,E.targetId,N.wa),N.snapshot}(t,h,f,m);const A=await $h(t.localStore,e,!0),i=new wT(e,A.Ts),l=i.ma(A.documents),a=du.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(l,t.isPrimaryClient,a);o0(t,r,c.wa);const d=new wj(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function bj(t,e,r){const n=Te(t),s=n.Fa.get(e),A=n.Ma.get(s.targetId);if(A.length>1)return n.Ma.set(s.targetId,A.filter(i=>!au(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ia(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Ea(n.remoteStore,s.targetId),ka(n,s.targetId)}).catch(ai)):(ka(n,s.targetId),await Ia(n.localStore,s.targetId,!0))}async function Cj(t,e){const r=Te(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ea(r.remoteStore,n.targetId))}async function _j(t,e,r){const n=xx(t);try{const s=await function(i,l){const a=Te(i),c=qt.now(),d=l.reduce((m,y)=>m.add(y.key),dt());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=fn(),w=dt();return a.cs.getEntries(m,d).next(E=>{y=E,y.forEach((C,x)=>{x.isValidDocument()||(w=w.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,y)).next(E=>{h=E;const C=[];for(const x of l){const _=J4(x,h.get(x.key).overlayedDocument);_!=null&&C.push(new Js(x.key,_,YE(_.value.mapValue),Wt.exists(!0)))}return a.mutationQueue.addMutationBatch(m,c,C,l)}).next(E=>{f=E;const C=E.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(m,E.batchId,C)})}).then(()=>({batchId:f.batchId,changes:h1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,l,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new Lt(nt)),c=c.insert(l,a),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await Ys(n,s.changes),await Ka(n.remoteStore)}catch(s){const A=za(s,"Failed to persist write");r.reject(A)}}async function yT(t,e){const r=Te(t);try{const n=await VD(r.localStore,e);e.targetChanges.forEach((s,A)=>{const i=r.Na.get(A);i&&(Ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Ge(i.va):s.removedDocuments.size>0&&(Ge(i.va),i.va=!1))}),await Ys(r,n,e)}catch(n){await ai(n)}}function ab(t,e,r){const n=Te(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((A,i)=>{const l=i.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(i,l){const a=Te(i);a.onlineState=l;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(l)&&(c=!0)}),c&&hx(a)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Ij(t,e,r){const n=Te(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),A=s&&s.key;if(A){let i=new Lt(Se.comparator);i=i.insert(A,Ht.newNoDocument(A,Xe.min()));const l=dt().add(A),a=new uu(Xe.min(),new Map,new Lt(nt),i,l);await yT(n,a),n.Oa=n.Oa.remove(A),n.Na.delete(e),wx(n)}else await Ia(n.localStore,e,!1).then(()=>ka(n,e,r)).catch(ai)}async function Ej(t,e){const r=Te(t),n=e.batch.batchId;try{const s=await HD(r.localStore,e);mx(r,n,null),px(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ys(r,s)}catch(s){await ai(s)}}async function Tj(t,e,r){const n=Te(t);try{const s=await function(i,l){const a=Te(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,l).next(h=>(Ge(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(n.localStore,e);mx(n,e,r),px(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ys(n,s)}catch(s){await ai(s)}}async function kj(t,e){const r=Te(t);ui(r.remoteStore)||de("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const l=Te(i);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>l.mutationQueue.getHighestUnacknowledgedBatchId(a))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=za(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function px(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function mx(t,e,r){const n=Te(t);let s=n.Ba[n.currentUser.toKey()];if(s){const A=s.get(e);A&&(r?A.reject(r):A.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function ka(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||vT(t,n)})}function vT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Ea(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),wx(t))}function o0(t,e,r){for(const n of r)n instanceof pT?(t.La.addReference(n.key,e),Fj(t,n)):n instanceof mT?(de("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||vT(t,n.key)):Oe()}function Fj(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(de("SyncEngine","New document in limbo: "+r),t.xa.add(n),wx(t))}function wx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Se(wt.fromString(e)),n=t.qa.next();t.Na.set(n,new xj(r)),t.Oa=t.Oa.insert(r,n),Wf(t.remoteStore,new Fs(Jr(Ma(r.path)),n,"TargetPurposeLimboResolution",dn.oe))}}async function Ys(t,e,r){const n=Te(t),s=[],A=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((l,a)=>{i.push(n.Ka(a,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){s.push(c);const h=sx.Wi(a.targetId,c);A.push(h)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(a,c){const d=Te(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>O.forEach(c,f=>O.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>O.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!li(h))throw h;de("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),y=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,w)}}}(n.localStore,A))}async function Sj(t,e){const r=Te(t);if(!r.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const n=await tT(r.localStore,e);r.currentUser=e,function(A,i){A.ka.forEach(l=>{l.forEach(a=>{a.reject(new ue(W.CANCELLED,i))})}),A.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ys(r,n.hs)}}function Uj(t,e){const r=Te(t),n=r.Na.get(e);if(n&&n.va)return dt().add(n.key);{let s=dt();const A=r.Ma.get(e);if(!A)return s;for(const i of A){const l=r.Fa.get(i);s=s.unionWith(l.view.Va)}return s}}async function Qj(t,e){const r=Te(t),n=await $h(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&o0(r,e.targetId,s.wa),s}async function Nj(t,e){const r=Te(t);return AT(r.localStore,e).then(n=>Ys(r,n))}async function Rj(t,e,r,n){const s=Te(t),A=await function(l,a){const c=Te(l),d=Te(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):O.resolve(null)))}(s.localStore,e);A!==null?(r==="pending"?await Ka(s.remoteStore):r==="acknowledged"||r==="rejected"?(mx(s,e,n||null),px(s,e),function(l,a){Te(Te(l).mutationQueue).On(a)}(s.localStore,e)):Oe(),await Ys(s,A)):de("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Dj(t,e){const r=Te(t);if(qf(r),xx(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await lb(r,n.toArray());r.Qa=!0,await A0(r.remoteStore,!0);for(const A of s)Wf(r.remoteStore,A)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((A,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then(()=>(ka(r,i),Ia(r.localStore,i,!0))),Ea(r.remoteStore,i)}),await s,await lb(r,n),function(i){const l=Te(i);l.Na.forEach((a,c)=>{Ea(l.remoteStore,c)}),l.La.pr(),l.Na=new Map,l.Oa=new Lt(Se.comparator)}(r),r.Qa=!1,await A0(r.remoteStore,!1)}}async function lb(t,e,r){const n=Te(t),s=[],A=[];for(const i of e){let l;const a=n.Ma.get(i);if(a&&a.length!==0){l=await _a(n.localStore,Jr(a[0]));for(const c of a){const d=n.Fa.get(c),h=await Qj(n,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await sT(n.localStore,i);l=await _a(n.localStore,c),await gx(n,BT(c),i,!1,l.resumeToken)}s.push(l)}return n.Ca.d_(A),s}function BT(t){return i1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jj(t){return function(r){return Te(Te(r).persistence).Qi()}(Te(t).localStore)}async function Pj(t,e,r,n){const s=Te(t);if(s.Qa)return void de("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(r){case"current":case"not-current":{const i=await AT(s.localStore,c1(A[0])),l=uu.createSynthesizedRemoteEventForCurrentChange(e,r==="current",nr.EMPTY_BYTE_STRING);await Ys(s,i,l);break}case"rejected":await Ia(s.localStore,e,!0),ka(s,e,n);break;default:Oe()}}async function Lj(t,e,r){const n=qf(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){de("SyncEngine","Adding an already active target "+s);continue}const A=await sT(n.localStore,s),i=await _a(n.localStore,A);await gx(n,BT(A),i.targetId,!1,i.resumeToken),Wf(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await Ia(n.localStore,s,!1).then(()=>{Ea(n.remoteStore,s),ka(n,s)}).catch(ai)}}function qf(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ij.bind(null,e),e.Ca.d_=fj.bind(null,e.eventManager),e.Ca.$a=gj.bind(null,e.eventManager),e}function xx(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ej.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tj.bind(null,e),e}function Mj(t,e,r){const n=Te(t);(async function(A,i,l){try{const a=await i.getMetadata();if(await function(m,y){const w=Te(m),E=ur(y.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",C=>w.Gr.getBundleMetadata(C,y.id)).then(C=>!!C&&C.createTime.compareTo(E)>=0)}(A.localStore,a))return await i.close(),l._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(a)),Promise.resolve(new Set);l._updateProgress(gT(a));const c=new mj(a,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&l._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await Ys(A,h.Ia,void 0),await function(m,y){const w=Te(m);return w.persistence.runTransaction("Save bundle","readwrite",E=>w.Gr.saveBundleMetadata(E,y))}(A.localStore,a),l._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return In("SyncEngine",`Loading bundle failed with ${a}`),l._failWith(a),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class ei{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return eT(this.persistence,new Z1,e.initialUser,this.serializer)}Ga(e){return new tx($f.Zr,this.serializer)}Wa(e){return new oT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ei.provider={build:()=>new ei};class Oj extends ei{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Ge(this.persistence.referenceDelegate instanceof zh);const n=this.persistence.referenceDelegate.garbageCollector;return new W1(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new tx(n=>zh.Zr(n,r),this.serializer)}}class yx extends ei{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await xx(this.Ja.syncEngine),await Ka(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return eT(this.persistence,new Z1,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new W1(n,e.asyncQueue,r)}Ha(e,r){const n=new a4(r,this.persistence);return new o4(e.asyncQueue,n)}Ga(e){const r=nx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new rx(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,aT(),Yd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new oT}}class bT extends yx{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof hp&&(this.sharedClientState.syncEngine={no:Rj.bind(null,r),ro:Pj.bind(null,r),io:Lj.bind(null,r),Qi:jj.bind(null,r),eo:Nj.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await Dj(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=aT();if(!hp.D(r))throw new ue(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=nx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hp(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class ti{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ab(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sj.bind(null,this.syncEngine),await A0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hj}()}createDatastore(e){const r=hu(e.databaseInfo.databaseId),n=function(A){return new XD(A)}(e.databaseInfo);return function(A,i,l,a){return new ZD(A,i,l,a)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,A,i,l){return new tj(n,s,A,i,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ab(this.syncEngine,r,0),function(){return rb.D()?new rb:new $D}())}createSyncEngine(e,r){return function(s,A,i,l,a,c,d){const h=new yj(s,A,i,l,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const A=Te(s);de("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Va(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}ti.provider={build:()=>new ti};function cb(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Tr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new pj(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ue(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,A){const i=Te(s),l={documents:A.map(h=>Oc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,wt.emptyPath(),l,A.length),c=new Map;a.forEach(h=>{const f=iD(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());Ge(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ha(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=Se.fromPath(n);this.mutations.push(new Gw(s,this.precondition(s)))}),await async function(n,s){const A=Te(n),i={writes:s.map(l=>Hc(A.serializer,l))};await A.Mo("Commit",A.serializer.databaseId,wt.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Oe();r=Xe.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ue(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Xe.min())?Wt.exists(!1):Wt.updateTime(r):Wt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Xe.min()))throw new ue(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(r)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,r,n,s,A){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=A,this._u=n.maxAttempts,this.t_=new ix(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Vj(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!iu(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!C1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,r,n,s,A){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Ir.UNAUTHENTICATED,this.clientId=jw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(n,async i=>{de("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(de("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=za(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function gp(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await tT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ub(t,e){t.asyncQueue.verifyOperationInProgress();const r=await vx(t);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>nb(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>nb(e.remoteStore,s)),t._onlineComponents=e}async function vx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;In("Error using user provided cache. Falling back to memory cache: "+r),await gp(t,new ei)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await gp(t,new ei);return t._offlineComponents}async function Jf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await ub(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await ub(t,new ti))),t._onlineComponents}function CT(t){return vx(t).then(e=>e.persistence)}function $a(t){return vx(t).then(e=>e.localStore)}function _T(t){return Jf(t).then(e=>e.remoteStore)}function Bx(t){return Jf(t).then(e=>e.syncEngine)}function IT(t){return Jf(t).then(e=>e.datastore)}async function Fa(t){const e=await Jf(t),r=e.eventManager;return r.onListen=vj.bind(null,e.syncEngine),r.onUnlisten=bj.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Bj.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Cj.bind(null,e.syncEngine),r}function zj(t){return t.asyncQueue.enqueue(async()=>{const e=await CT(t),r=await _T(t);return e.setNetworkEnabled(!0),function(s){const A=Te(s);return A.L_.delete(0),fu(A)}(r)})}function $j(t){return t.asyncQueue.enqueue(async()=>{const e=await CT(t),r=await _T(t);return e.setNetworkEnabled(!1),async function(s){const A=Te(s);A.L_.add(0),await Va(A),A.q_.set("Offline")}(r)})}function Wj(t,e){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const l=await function(c,d){const h=Te(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);l.isFoundDocument()?i.resolve(l):l.isNoDocument()?i.resolve(null):i.reject(new ue(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const a=za(l,`Failed to get document '${A} from cache`);i.reject(a)}}(await $a(t),e,r)),r.promise}function ET(t,e,r={}){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,l,a,c){const d=new Xf({next:f=>{d.Za(),i.enqueueAndForget(()=>dx(A,h));const m=f.docs.has(l);!m&&f.fromCache?c.reject(new ue(W.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&a&&a.source==="server"?c.reject(new ue(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new fx(Ma(l.path),d,{includeMetadataChanges:!0,_a:!0});return ux(A,h)}(await Fa(t),t.asyncQueue,e,r,n)),n.promise}function qj(t,e){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const l=await $h(s,A,!0),a=new wT(A,l.Ts),c=a.ma(l.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(l){const a=za(l,`Failed to execute query '${A} against cache`);i.reject(a)}}(await $a(t),e,r)),r.promise}function TT(t,e,r={}){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,l,a,c){const d=new Xf({next:f=>{d.Za(),i.enqueueAndForget(()=>dx(A,h)),f.fromCache&&a.source==="server"?c.reject(new ue(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new fx(l,d,{includeMetadataChanges:!0,_a:!0});return ux(A,h)}(await Fa(t),t.asyncQueue,e,r,n)),n.promise}function Xj(t,e,r){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await IT(t);n.resolve(async function(i,l,a){var c;const d=Te(i),{request:h,ut:f,parent:m}=D1(d.serializer,o1(l),a);d.connection.Fo||delete h.parent;const y=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(E=>!!E.result);Ge(y.length===1);const w=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(w).reduce((E,C)=>(E[f[C]]=w[C],E),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function Jj(t,e){const r=new Xf(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){Te(s).Y_.add(A),A.next()}(await Fa(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){Te(s).Y_.delete(A)}(await Fa(t),r))}}function Yj(t,e,r,n){const s=function(i,l){let a;return a=typeof i=="string"?I1().encode(i):i,function(d,h){return new Hj(d,h)}(function(d,h){if(d instanceof Uint8Array)return cb(d,h);if(d instanceof ArrayBuffer)return cb(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),l)}(r,hu(e));t.asyncQueue.enqueueAndForget(async()=>{Mj(await Bx(t),s,n)})}function Zj(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const A=Te(n);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await $a(t),e))}function eP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const A=Te(n),i=A.indexManager,l=[];return A.persistence.runTransaction("Configure indexes","readwrite",a=>i.getFieldIndexes(a).next(c=>function(h,f,m,y,w){h=[...h],f=[...f],h.sort(m),f.sort(m);const E=h.length,C=f.length;let x=0,_=0;for(;x<C&&_<E;){const S=m(h[_],f[x]);S<0?w(h[_++]):S>0?y(f[x++]):(x++,_++)}for(;x<C;)y(f[x++]);for(;_<E;)w(h[_++])}(c,s,n4,d=>{l.push(i.addFieldIndex(a,d))},d=>{l.push(i.deleteFieldIndex(a,d))})).next(()=>O.waitFor(l)))}(await $a(t),e))}function tP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){Te(n).ss.zi=s}(await $a(t),e))}function rP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=Te(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",A=>s.deleteAllFieldIndexes(A))}(await $a(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e,r){if(!r)throw new ue(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FT(t,e,r,n){if(e===!0&&n===!0)throw new ue(W.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function hb(t){if(!Se.isDocumentKey(t))throw new ue(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fb(t){if(Se.isDocumentKey(t))throw new ue(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe()}function ft(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Yf(t);throw new ue(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function ST(t,e){if(e<=0)throw new ue(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gu{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new NE;switch(n.type){case"firstParty":return new YR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ue(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=db.get(r);n&&(de("ComponentProvider","Removing Datastore"),db.delete(r),n.terminate())}(this),Promise.resolve()}}function UT(t,e,r,n={}){var s;const A=(t=ft(t,gu))._getSettings(),i=`${e}:${r}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),n.mockUserToken){let l,a;if(typeof n.mockUserToken=="string")l=n.mockUserToken,a=Ir.MOCK_USER;else{l=vN(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new ue(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ir(c)}t._authCredentials=new qR(new QE(l,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class ir{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class Yn extends kr{constructor(e,r,n){super(e,r,Ma(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new Se(e))}withConverter(e){return new Yn(this.firestore,e,this._path)}}function a0(t,e,...r){if(t=Dt(t),bx("collection","path",e),t instanceof gu){const n=wt.fromString(e,...r);return fb(n),new Yn(t,null,n)}{if(!(t instanceof ir||t instanceof Yn))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(wt.fromString(e,...r));return fb(n),new Yn(t.firestore,null,n)}}function nP(t,e){if(t=ft(t,gu),bx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ue(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kr(t,null,function(n){return new qs(wt.emptyPath(),n)}(e))}function is(t,e,...r){if(t=Dt(t),arguments.length===1&&(e=jw.newId()),bx("doc","path",e),t instanceof gu){const n=wt.fromString(e,...r);return hb(n),new ir(t,null,new Se(n))}{if(!(t instanceof ir||t instanceof Yn))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(wt.fromString(e,...r));return hb(n),new ir(t.firestore,t instanceof Yn?t.converter:null,new Se(n))}}function sP(t,e){return t=Dt(t),e=Dt(e),(t instanceof ir||t instanceof Yn)&&(e instanceof ir||e instanceof Yn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Cx(t,e){return t=Dt(t),e=Dt(e),t instanceof kr&&e instanceof kr&&t.firestore===e.firestore&&au(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ix(this,"async_queue_retry"),this.Vu=()=>{const n=Yd();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Yd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Yd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!li(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let l=i.message||"";return i.stack&&(l=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),l}(n);throw cr("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=cx.createAndSchedule(this,e,r,n,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&Oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function l0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const A of n)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class QT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=-1;class Ut extends gu{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new pb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pb(e),this._firestoreClient=void 0,await e}}}function iP(t,e,r){r||(r="(default)");const n=Au(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),A=n.getOptions(r);if($A(A,e))return s;throw new ue(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ue(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function NT(t,e){const r=typeof t=="object"?t:Rw(),n=typeof t=="string"?t:e||"(default)",s=Au(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const A=xN("firestore");A&&UT(s,...A)}return s}function Xt(t){if(t._terminated)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RT(t),t._firestoreClient}function RT(t){var e,r,n;const s=t._freezeSettings(),A=function(l,a,c,d){return new F4(l,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Gj(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(l){const a=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(a),_online:a}}(t._componentsProvider))}function oP(t,e){In("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return DT(t,ti.provider,{build:n=>new yx(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function aP(t){In("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();DT(t,ti.provider,{build:r=>new bT(r,e.cacheSizeBytes)})}function DT(t,e,r){if((t=ft(t,Ut))._firestoreClient||t._terminated)throw new ue(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ue(W.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},RT(t)}function lP(t){if(t._initialized&&!t._terminated)throw new ue(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!ds.D())return Promise.resolve();const s=n+"main";await ds.delete(s)}(nx(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function cP(t){return function(r){const n=new Tr;return r.asyncQueue.enqueueAndForget(async()=>kj(await Bx(r),n)),n.promise}(Xt(t=ft(t,Ut)))}function uP(t){return zj(Xt(t=ft(t,Ut)))}function dP(t){return $j(Xt(t=ft(t,Ut)))}function hP(t){return UR(t.app,"firestore",t._databaseId.database),t._delete()}function fP(t,e){const r=Xt(t=ft(t,Ut)),n=new QT;return Yj(r,t._databaseId,e,n),n}function gP(t,e){return Zj(Xt(t=ft(t,Ut)),e).then(r=>r?new kr(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class jT{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(nr.fromBase64String(e))}catch(r){throw new ue(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ri(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ue(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function pP(){return new di("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ue(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ue(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let A=0;A<n.length;++A)if(n[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=/^__.*__$/;class wP{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Js(e,this.data,this.fieldMask,r,this.fieldTransforms):new Oa(e,this.data,r,this.fieldTransforms)}}class PT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Js(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function LT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class eg{constructor(e,r,n,s,A,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(LT(this.Cu)&&mP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xP{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||hu(e)}Qu(e,r,n,s=!1){return new eg({Cu:e,methodName:r,qu:n,path:Vt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lo(t){const e=t._freezeSettings(),r=hu(t._databaseId);return new xP(t._databaseId,!!e.ignoreUndefinedProperties,r)}function tg(t,e,r,n,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,r,s);Sx("Data must be an object, but it was:",i,n);const l=HT(n,i);let a,c;if(A.merge)a=new hn(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=Vc(e,h,r);if(!i.contains(f))throw new ue(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);KT(d,f)||d.push(f)}a=new hn(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new wP(new Rr(l),a,c)}class mu extends hi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mu}}function MT(t,e,r){return new eg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _x extends hi{_toFieldTransform(e){return new cu(e.path,new Ba)}isEqual(e){return e instanceof _x}}class Ix extends hi{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=MT(this,e,!0),n=this.Ku.map(A=>co(A,r)),s=new Ji(n);return new cu(e.path,s)}isEqual(e){return e instanceof Ix&&$A(this.Ku,e.Ku)}}class Ex extends hi{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=MT(this,e,!0),n=this.Ku.map(A=>co(A,r)),s=new Yi(n);return new cu(e.path,s)}isEqual(e){return e instanceof Ex&&$A(this.Ku,e.Ku)}}class Tx extends hi{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new ba(e.serializer,p1(e.serializer,this.$u));return new cu(e.path,r)}isEqual(e){return e instanceof Tx&&this.$u===e.$u}}function kx(t,e,r,n){const s=t.Qu(1,e,r);Sx("Data must be an object, but it was:",s,n);const A=[],i=Rr.empty();ci(n,(a,c)=>{const d=rg(e,a,r);c=Dt(c);const h=s.Nu(d);if(c instanceof mu)A.push(d);else{const f=co(c,h);f!=null&&(A.push(d),i.set(d,f))}});const l=new hn(A);return new PT(i,l,s.fieldTransforms)}function Fx(t,e,r,n,s,A){const i=t.Qu(1,e,r),l=[Vc(e,n,r)],a=[s];if(A.length%2!=0)throw new ue(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)l.push(Vc(e,A[f])),a.push(A[f+1]);const c=[],d=Rr.empty();for(let f=l.length-1;f>=0;--f)if(!KT(c,l[f])){const m=l[f];let y=a[f];y=Dt(y);const w=i.Nu(m);if(y instanceof mu)c.push(m);else{const E=co(y,w);E!=null&&(c.push(m),d.set(m,E))}}const h=new hn(c);return new PT(d,h,i.fieldTransforms)}function OT(t,e,r,n=!1){return co(r,t.Qu(n?4:3,e))}function co(t,e){if(VT(t=Dt(t)))return Sx("Unsupported field value:",e,t),HT(t,e);if(t instanceof hi)return function(n,s){if(!LT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const A=n._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const A=[];let i=0;for(const l of n){let a=co(l,s.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),A.push(a),i++}return{arrayValue:{values:A}}}(t,e)}return function(n,s){if((n=Dt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return p1(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const A=qt.fromDate(n);return{timestampValue:Ca(s.serializer,A)}}if(n instanceof qt){const A=new qt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ca(s.serializer,A)}}if(n instanceof Zf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ri)return{bytesValue:k1(s.serializer,n._byteString)};if(n instanceof ir){const A=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:Xw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof pu)return function(i,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw l.Bu("VectorValues must only contain numeric values.");return Kw(l.serializer,a)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Yf(n)}`)}(t,e)}function HT(t,e){const r={};return WE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,(n,s)=>{const A=co(s,e.Mu(n));A!=null&&(r[n]=A)}),{mapValue:{fields:r}}}function VT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof Zf||t instanceof ri||t instanceof ir||t instanceof hi||t instanceof pu)}function Sx(t,e,r){if(!VT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Yf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Vc(t,e,r){if((e=Dt(e))instanceof di)return e._internalPath;if(typeof e=="string")return rg(t,e);throw Jh("Field path arguments must be of type string or ",t,!1,void 0,r)}const yP=new RegExp("[~\\*/\\[\\]]");function rg(t,e,r){if(e.search(yP)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new di(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Jh(t,e,r,n,s){const A=n&&!n.isEmpty(),i=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(A||i)&&(a+=" (found",A&&(a+=` in field ${n}`),i&&(a+=` in document ${s}`),a+=")"),new ue(W.INVALID_ARGUMENT,l+t+a)}function KT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,r,n,s,A){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class vP extends Kc{data(){return super.data()}}function ng(t,e){return typeof e=="string"?rg(t,e):e instanceof di?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ux{}class Wa extends Ux{}function c0(t,e,...r){let n=[];e instanceof Ux&&n.push(e),n=n.concat(r),function(A){const i=A.filter(a=>a instanceof uo).length,l=A.filter(a=>a instanceof qa).length;if(i>1||i>0&&l>0)throw new ue(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class qa extends Wa{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new qa(e,r,n)}_apply(e){const r=this._parse(e);return $T(e._query,r),new kr(e.firestore,e.converter,Xm(e._query,r))}_parse(e){const r=lo(e.firestore);return function(A,i,l,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ue(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){wb(h,d);const m=[];for(const y of h)m.push(mb(a,A,y));f={arrayValue:{values:m}}}else f=mb(a,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||wb(h,d),f=OT(l,i,h,d==="in"||d==="not-in");return xt.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function BP(t,e,r){const n=e,s=ng("where",t);return qa._create(s,n,r)}class uo extends Ux{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new uo(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Tt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,A){let i=s;const l=A.getFlattenedFilters();for(const a of l)$T(i,a),i=Xm(i,a)}(e._query,r),new kr(e.firestore,e.converter,Xm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function bP(...t){return t.forEach(e=>WT("or",e)),uo._create("or",t)}function CP(...t){return t.forEach(e=>WT("and",e)),uo._create("and",t)}class sg extends Wa{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new sg(e,r)}_apply(e){const r=function(s,A,i){if(s.startAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mc(A,i)}(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new qs(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function _P(t,e="asc"){const r=e,n=ng("orderBy",t);return sg._create(n,r)}class wu extends Wa{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new wu(e,r,n)}_apply(e){return new kr(e.firestore,e.converter,Oh(e._query,this._limit,this._limitType))}}function IP(t){return ST("limit",t),wu._create("limit",t,"F")}function EP(t){return ST("limitToLast",t),wu._create("limitToLast",t,"L")}class xu extends Wa{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new xu(e,r,n)}_apply(e){const r=zT(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,function(s,A){return new qs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,r))}}function TP(...t){return xu._create("startAt",t,!0)}function kP(...t){return xu._create("startAfter",t,!1)}class yu extends Wa{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new yu(e,r,n)}_apply(e){const r=zT(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,function(s,A){return new qs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,r))}}function FP(...t){return yu._create("endBefore",t,!1)}function SP(...t){return yu._create("endAt",t,!0)}function zT(t,e,r,n){if(r[0]=Dt(r[0]),r[0]instanceof Kc)return function(A,i,l,a,c){if(!a)throw new ue(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const h of ra(A))if(h.field.isKeyField())d.push(qi(i,a.key));else{const f=a.data.field(h.field);if(Lf(f))throw new ue(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new ue(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new YA(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=lo(t.firestore);return function(i,l,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new ue(W.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<d.length;y++){const w=d[y];if(f[y].field.isKeyField()){if(typeof w!="string")throw new ue(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!Hw(i)&&w.indexOf("/")!==-1)throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const E=i.path.child(wt.fromString(w));if(!Se.isDocumentKey(E))throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const C=new Se(E);m.push(qi(l,C))}else{const E=OT(a,c,w);m.push(E)}}return new YA(m,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function mb(t,e,r){if(typeof(r=Dt(r))=="string"){if(r==="")throw new ue(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hw(e)&&r.indexOf("/")!==-1)throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(wt.fromString(r));if(!Se.isDocumentKey(n))throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return qi(t,new Se(n))}if(r instanceof ir)return qi(t,r._key);throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yf(r)}.`)}function wb(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $T(t,e){const r=function(s,A){for(const i of s)for(const l of i.getFlattenedFilters())if(A.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function WT(t,e){if(!(e instanceof qa||e instanceof uo))throw new ue(W.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Qx{convertValue(e,r="none"){switch(XA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return ci(e,(s,A)=>{n[s]=this.convertValue(A,r)}),n}convertVectorValue(e){var r,n,s;const A=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>zt(i.doubleValue));return new pu(A)}convertGeoPoint(e){return new Zf(zt(e.latitude),zt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Mf(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const r=Os(e);return new qt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=wt.fromString(e);Ge(M1(n));const s=new qA(n.get(1),n.get(3)),A=new Se(n.popFirst(5));return s.isEqual(r)||cr(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class UP extends Qx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){return new Sa("sum",Vc("sum",t))}function NP(t){return new Sa("avg",Vc("average",t))}function qT(){return new Sa("count")}function RP(t,e){var r,n;return t instanceof Sa&&e instanceof Sa&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function DP(t,e){return Cx(t.query,e.query)&&$A(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ro extends Kc{constructor(e,r,n,s,A,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ic extends ro{data(e={}){return super.data(e)}}class no{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new IA(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ic(this._firestore,this._userDataWriter,n.key,n,new IA(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ue(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(l=>{const a=new ic(s._firestore,s._userDataWriter,l.doc.key,l.doc,new IA(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>A||l.type!==3).map(l=>{const a=new ic(s._firestore,s._userDataWriter,l.doc.key,l.doc,new IA(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:jP(l.type),doc:a,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function jP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}function PP(t,e){return t instanceof ro&&e instanceof ro?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof no&&e instanceof no&&t._firestore===e._firestore&&Cx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){t=ft(t,ir);const e=ft(t.firestore,Ut);return ET(Xt(e),t._key).then(r=>Nx(e,t,r))}class fi extends Qx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,r)}}function MP(t){t=ft(t,ir);const e=ft(t.firestore,Ut),r=Xt(e),n=new fi(e);return Wj(r,t._key).then(s=>new ro(e,n,t._key,s,new IA(s!==null&&s.hasLocalMutations,!0),t.converter))}function OP(t){t=ft(t,ir);const e=ft(t.firestore,Ut);return ET(Xt(e),t._key,{source:"server"}).then(r=>Nx(e,t,r))}function XT(t){t=ft(t,kr);const e=ft(t.firestore,Ut),r=Xt(e),n=new fi(e);return GT(t._query),TT(r,t._query).then(s=>new no(e,n,t,s))}function HP(t){t=ft(t,kr);const e=ft(t.firestore,Ut),r=Xt(e),n=new fi(e);return qj(r,t._query).then(s=>new no(e,n,t,s))}function VP(t){t=ft(t,kr);const e=ft(t.firestore,Ut),r=Xt(e),n=new fi(e);return TT(r,t._query,{source:"server"}).then(s=>new no(e,n,t,s))}function Zd(t,e,r){t=ft(t,ir);const n=ft(t.firestore,Ut),s=Ag(t.converter,e,r);return Xa(n,[tg(lo(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Wt.none())])}function KP(t,e,r,...n){t=ft(t,ir);const s=ft(t.firestore,Ut),A=lo(s);let i;return i=typeof(e=Dt(e))=="string"||e instanceof di?Fx(A,"updateDoc",t._key,e,r,n):kx(A,"updateDoc",t._key,e),Xa(s,[i.toMutation(t._key,Wt.exists(!0))])}function JT(t){return Xa(ft(t.firestore,Ut),[new Ha(t._key,Wt.none())])}function GP(t,e){const r=ft(t.firestore,Ut),n=is(t),s=Ag(t.converter,e);return Xa(r,[tg(lo(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Wt.exists(!1))]).then(()=>n)}function eh(t,...e){var r,n,s;t=Dt(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||l0(e[i])||(A=e[i],i++);const l={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(l0(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let a,c,d;if(t instanceof ir)c=ft(t.firestore,Ut),d=Ma(t._key.path),a={next:h=>{e[i]&&e[i](Nx(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=ft(t,kr);c=ft(h.firestore,Ut),d=h._query;const f=new fi(c);a={next:m=>{e[i]&&e[i](new no(c,f,h,m))},error:e[i+1],complete:e[i+2]},GT(t._query)}return function(f,m,y,w){const E=new Xf(w),C=new fx(m,E,y);return f.asyncQueue.enqueueAndForget(async()=>ux(await Fa(f),C)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>dx(await Fa(f),C))}}(Xt(c),d,l,a)}function zP(t,e){return Jj(Xt(t=ft(t,Ut)),l0(e)?e:{next:e})}function Xa(t,e){return function(n,s){const A=new Tr;return n.asyncQueue.enqueueAndForget(async()=>_j(await Bx(n),s,A)),A.promise}(Xt(t),e)}function Nx(t,e,r){const n=r.docs.get(e._key),s=new fi(t);return new ro(t,s,e._key,n,new IA(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){return YT(t,{count:qT()})}function YT(t,e){const r=ft(t.firestore,Ut),n=Xt(r),s=$E(e,(A,i)=>new b1(i,A.aggregateType,A._internalFieldPath));return Xj(n,t._query,s).then(A=>function(l,a,c){const d=new fi(l);return new jT(a,d,c)}(r,t,A))}class WP{constructor(e){this.kind="memory",this._onlineComponentProvider=ti.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=ei.provider}toJSON(){return{kind:this.kind}}}class qP{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=ZT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class XP{constructor(){this.kind="memoryEager",this._offlineComponentProvider=ei.provider}toJSON(){return{kind:this.kind}}}class JP{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Oj(e)}}toJSON(){return{kind:this.kind}}}function YP(){return new XP}function ZP(t){return new JP(t==null?void 0:t.cacheSizeBytes)}function eL(t){return new WP(t)}function tL(t){return new qP(t)}class rL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ti.provider,this._offlineComponentProvider={build:r=>new yx(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class nL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ti.provider,this._offlineComponentProvider={build:r=>new bT(r,e==null?void 0:e.cacheSizeBytes)}}}function ZT(t){return new rL(t==null?void 0:t.forceOwnership)}function sL(){return new nL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=lo(e)}set(e,r,n){this._verifyNotCommitted();const s=mA(e,this._firestore),A=Ag(s.converter,r,n),i=tg(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,Wt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const A=mA(e,this._firestore);let i;return i=typeof(r=Dt(r))=="string"||r instanceof di?Fx(this._dataReader,"WriteBatch.update",A._key,r,n,s):kx(this._dataReader,"WriteBatch.update",A._key,r),this._mutations.push(i.toMutation(A._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=mA(e,this._firestore);return this._mutations=this._mutations.concat(new Ha(r._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mA(t,e){if((t=Dt(t)).firestore!==e)throw new ue(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=lo(r)}get(r){const n=mA(r,this._firestore),s=new UP(this._firestore);return this._transaction.lookup([n._key]).then(A=>{if(!A||A.length!==1)return Oe();const i=A[0];if(i.isFoundDocument())return new Kc(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new Kc(this._firestore,s,n._key,null,n.converter);throw Oe()})}set(r,n,s){const A=mA(r,this._firestore),i=Ag(A.converter,n,s),l=tg(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,l),this}update(r,n,s,...A){const i=mA(r,this._firestore);let l;return l=typeof(n=Dt(n))=="string"||n instanceof di?Fx(this._dataReader,"Transaction.update",i._key,n,s,A):kx(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,l),this}delete(r){const n=mA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=mA(e,this._firestore),n=new fi(this._firestore);return super.get(e).then(s=>new ro(this._firestore,n,r._key,s._document,new IA(!1,!1),r.converter))}}function iL(t,e,r){t=ft(t,Ut);const n=Object.assign(Object.assign({},AL),r);return function(A){if(A.maxAttempts<1)throw new ue(W.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(A,i,l){const a=new Tr;return A.asyncQueue.enqueueAndForget(async()=>{const c=await IT(A);new Kj(A.asyncQueue,c,l,i,a).au()}),a.promise}(Xt(t),s=>e(new tk(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(){return new mu("deleteField")}function aL(){return new _x("serverTimestamp")}function lL(...t){return new Ix("arrayUnion",t)}function cL(...t){return new Ex("arrayRemove",t)}function uL(t){return new Tx("increment",t)}function dL(t){return new pu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){return Xt(t=ft(t,Ut)),new ek(t,e=>Xa(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){const r=Xt(t=ft(t,Ut));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return In("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(A){const i=typeof A=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new ue(W.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(A):A,l=[];if(Array.isArray(i.indexes))for(const a of i.indexes){const c=xb(a,"collectionGroup"),d=[];if(Array.isArray(a.fields))for(const h of a.fields){const f=rg("setIndexConfiguration",xb(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Mi(f,2)):h.order==="ASCENDING"?d.push(new Mi(f,0)):h.order==="DESCENDING"&&d.push(new Mi(f,1))}l.push(new wa(wa.UNKNOWN_ID,c,d,xa.empty()))}return l}(e);return eP(r,n)}function xb(t,e){if(typeof t[e]!="string")throw new ue(W.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function fL(t){var e;t=ft(t,Ut);const r=yb.get(t);if(r)return r;if(((e=Xt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new nk(t);return yb.set(t,n),n}function gL(t){sk(t,!0)}function pL(t){sk(t,!1)}function mL(t){rP(Xt(t._firestore)).then(e=>de("deleting all persistent cache indexes succeeded")).catch(e=>In("deleting all persistent cache indexes failed",e))}function sk(t,e){tP(Xt(t._firestore),e).then(r=>de(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>In(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const yb=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){var e;const r=(e=Xt(ft(t.firestore,Ut))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Kf(r,Jr(t._query))._t}function xL(t,e){var r;const n=$E(e,(A,i)=>new b1(i,A.aggregateType,A._internalFieldPath)),s=(r=Xt(ft(t.firestore,Ut))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:D1(s,o1(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Rx.instance.onExistenceFilterMismatch(e)}}class Rx{constructor(){this.Uu=new Map}static get instance(){return id||(id=new Rx,function(r){if(Hh)throw new Error("a TestingHooksSpi instance is already set");Hh=r}(id)),id}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let id=null;(function(e,r=!0){(function(s){La=s})(Pa),pa(new Wi("firestore",(n,{instanceIdentifier:s,options:A})=>{const i=n.getProvider("app").getImmediate(),l=new Ut(new XR(n.getProvider("auth-internal")),new ZR(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ue(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qA(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:r},A),l._setSettings(A),l},"PUBLIC").setMultipleInstances(!0)),OA(lB,"4.7.3",e),OA(lB,"4.7.3","esm2017")})();const vL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Qx,AggregateField:Sa,AggregateQuerySnapshot:jT,Bytes:ri,CACHE_SIZE_UNLIMITED:AP,CollectionReference:Yn,DocumentReference:ir,DocumentSnapshot:ro,FieldPath:di,FieldValue:hi,Firestore:Ut,FirestoreError:ue,GeoPoint:Zf,LoadBundleTask:QT,PersistentCacheIndexManager:nk,Query:kr,QueryCompositeFilterConstraint:uo,QueryConstraint:Wa,QueryDocumentSnapshot:ic,QueryEndAtConstraint:yu,QueryFieldFilterConstraint:qa,QueryLimitConstraint:wu,QueryOrderByConstraint:sg,QuerySnapshot:no,QueryStartAtConstraint:xu,SnapshotMetadata:IA,Timestamp:qt,Transaction:tk,VectorValue:pu,WriteBatch:ek,_AutoId:jw,_ByteString:nr,_DatabaseId:qA,_DocumentKey:Se,_EmptyAppCheckTokenProvider:e4,_EmptyAuthCredentialsProvider:NE,_FieldPath:Vt,_TestingHooks:yL,_cast:ft,_debugAssert:WR,_internalAggregationQueryToProtoRunAggregationQueryRequest:xL,_internalQueryToProtoQueryTarget:wL,_isBase64Available:T4,_logWarn:In,_validateIsNotUsedTogether:FT,addDoc:GP,aggregateFieldEqual:RP,aggregateQuerySnapshotEqual:DP,and:CP,arrayRemove:cL,arrayUnion:lL,average:NP,clearIndexedDbPersistence:lP,collection:a0,collectionGroup:nP,connectFirestoreEmulator:UT,count:qT,deleteAllPersistentCacheIndexes:mL,deleteDoc:JT,deleteField:oL,disableNetwork:dP,disablePersistentCacheIndexAutoCreation:pL,doc:is,documentId:pP,enableIndexedDbPersistence:oP,enableMultiTabIndexedDbPersistence:aP,enableNetwork:uP,enablePersistentCacheIndexAutoCreation:gL,endAt:SP,endBefore:FP,ensureFirestoreConfigured:Xt,executeWrite:Xa,getAggregateFromServer:YT,getCountFromServer:$P,getDoc:LP,getDocFromCache:MP,getDocFromServer:OP,getDocs:XT,getDocsFromCache:HP,getDocsFromServer:VP,getFirestore:NT,getPersistentCacheIndexManager:fL,increment:uL,initializeFirestore:iP,limit:IP,limitToLast:EP,loadBundle:fP,memoryEagerGarbageCollector:YP,memoryLocalCache:eL,memoryLruGarbageCollector:ZP,namedQuery:gP,onSnapshot:eh,onSnapshotsInSync:zP,or:bP,orderBy:_P,persistentLocalCache:tL,persistentMultipleTabManager:sL,persistentSingleTabManager:ZT,query:c0,queryEqual:Cx,refEqual:sP,runTransaction:iL,serverTimestamp:aL,setDoc:Zd,setIndexConfiguration:hL,setLogLevel:$R,snapshotEqual:PP,startAfter:kP,startAt:TP,sum:QP,terminate:hP,updateDoc:KP,vector:dL,waitForPendingWrites:cP,where:BP,writeBatch:rk},Symbol.toStringTag,{value:"Module"}));function Dx(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Ak(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BL=Ak,ik=new nu("auth","Firebase",Ak());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Qw("@firebase/auth");function bL(t,...e){Yh.logLevel<=mt.WARN&&Yh.warn(`Auth (${Pa}): ${t}`,...e)}function th(t,...e){Yh.logLevel<=mt.ERROR&&Yh.error(`Auth (${Pa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,...e){throw jx(t,...e)}function fs(t,...e){return jx(t,...e)}function ok(t,e,r){const n=Object.assign(Object.assign({},BL()),{[e]:r});return new nu("auth","Firebase",n).create(e,{appName:t.name})}function HA(t){return ok(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jx(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return ik.create(t,...e)}function rt(t,e,...r){if(!t)throw jx(e,...r)}function Ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function Vs(t,e){t||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CL(){return vb()==="http:"||vb()==="https:"}function vb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CL()||_N()||"connection"in navigator)?navigator.onLine:!0}function IL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Vs(r>e,"Short delay should be less than long delay!"),this.isMobile=BN()||IN()}get(){return _L()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){Vs(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new vu(3e4,6e4);function ho(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gi(t,e,r,n,s={}){return lk(t,s,async()=>{let A={},i={};n&&(e==="GET"?i=n:A={body:JSON.stringify(n)});const l=su(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},A);return CN()||(c.referrerPolicy="no-referrer"),ak.fetch()(ck(t,t.config.apiHost,r,l),c)})}async function lk(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},EL),e);try{const s=new FL(t),A=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw od(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const l=A.ok?i.errorMessage:i.error.message,[a,c]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw od(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw od(t,"user-disabled",i);const d=n[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ok(t,d,c);es(t,d)}}catch(s){if(s instanceof Ws)throw s;es(t,"network-request-failed",{message:String(s)})}}async function ig(t,e,r,n,s={}){const A=await gi(t,e,r,n,s);return"mfaPendingCredential"in A&&es(t,"multi-factor-auth-required",{_serverResponse:A}),A}function ck(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Px(t.config,s):`${t.config.apiScheme}://${s}`}function kL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(fs(this.auth,"network-request-failed")),TL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function od(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=fs(t,e,n);return s.customData._tokenResponse=r,s}function Bb(t){return t!==void 0&&t.enterprise!==void 0}class SL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return kL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function UL(t,e){return gi(t,"GET","/v2/recaptchaConfig",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e){return gi(t,"POST","/v1/accounts:delete",e)}async function uk(t,e){return gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NL(t,e=!1){const r=Dt(t),n=await r.getIdToken(e),s=Lx(n);rt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:n,authTime:oc(pp(s.auth_time)),issuedAtTime:oc(pp(s.iat)),expirationTime:oc(pp(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function pp(t){return Number(t)*1e3}function Lx(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const s=pE(r);return s?JSON.parse(s):(th("Failed to decode base64 JWT payload"),null)}catch(s){return th("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function bb(t){const e=Lx(t);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ws&&RL(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function RL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Gc(t,uk(r,{idToken:n}));rt(s==null?void 0:s.users.length,r,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?dk(A.providerUserInfo):[],l=PL(t.providerData,i),a=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(l!=null&&l.length),d=a?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:l,metadata:new d0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function jL(t){const e=Dt(t);await Zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PL(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function dk(t){return t.map(e=>{var{providerId:r}=e,n=Dx(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t,e){const r=await lk(t,{},async()=>{const n=su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=ck(t,s,"/v1/token",`key=${A}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ak.fetch()(i,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function ML(t,e){return gi(t,"POST","/v2/accounts:revokeToken",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const r=bb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:A}=await LL(e,r);this.updateTokensAndExpiration(n,s,Number(A))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:A}=r,i=new sa;return n&&(rt(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(rt(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(rt(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sa,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t,e){rt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Us{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,A=Dx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new d0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const r=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return rt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return NL(this,e)}reload(){return jL(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Us(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Zh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ks(this.auth.app))return Promise.reject(HA(this.auth));const e=await this.getIdToken();return await Gc(this,QL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,A,i,l,a,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,m=(A=r.phoneNumber)!==null&&A!==void 0?A:void 0,y=(i=r.photoURL)!==null&&i!==void 0?i:void 0,w=(l=r.tenantId)!==null&&l!==void 0?l:void 0,E=(a=r._redirectEventId)!==null&&a!==void 0?a:void 0,C=(c=r.createdAt)!==null&&c!==void 0?c:void 0,x=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:S,isAnonymous:U,providerData:N,stsTokenManager:v}=r;rt(_&&v,e,"internal-error");const b=sa.fromJSON(this.name,v);rt(typeof _=="string",e,"internal-error"),iA(h,e.name),iA(f,e.name),rt(typeof S=="boolean",e,"internal-error"),rt(typeof U=="boolean",e,"internal-error"),iA(m,e.name),iA(y,e.name),iA(w,e.name),iA(E,e.name),iA(C,e.name),iA(x,e.name);const B=new Us({uid:_,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:U,photoURL:y,phoneNumber:m,tenantId:w,stsTokenManager:b,createdAt:C,lastLoginAt:x});return N&&Array.isArray(N)&&(B.providerData=N.map(F=>Object.assign({},F))),E&&(B._redirectEventId=E),B}static async _fromIdTokenResponse(e,r,n=!1){const s=new sa;s.updateFromServerResponse(r);const A=new Us({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Zh(A),A}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];rt(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?dk(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),l=new sa;l.updateFromIdToken(n);const a=new Us({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new d0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=new Map;function Qs(t){Vs(t instanceof Function,"Expected a class definition");let e=Cb.get(t);return e?(Vs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}hk.type="NONE";const _b=hk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t,e,r){return`firebase:${t}:${e}:${r}`}class Aa{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:A}=this.auth;this.fullUserKey=rh(this.userKey,s.apiKey,A),this.fullPersistenceKey=rh("persistence",s.apiKey,A),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Us._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Aa(Qs(_b),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||Qs(_b);const i=rh(n,e.config.apiKey,e.name);let l=null;for(const c of r)try{const d=await c._get(i);if(d){const h=Us._fromJSON(e,d);c!==A&&(l=h),A=c;break}}catch{}const a=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!a.length?new Aa(A,e,n):(A=a[0],l&&await A._set(i,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new Aa(A,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xk(e))return"Blackberry";if(yk(e))return"Webos";if(gk(e))return"Safari";if((e.includes("chrome/")||pk(e))&&!e.includes("edge/"))return"Chrome";if(wk(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function fk(t=xr()){return/firefox\//i.test(t)}function gk(t=xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pk(t=xr()){return/crios\//i.test(t)}function mk(t=xr()){return/iemobile/i.test(t)}function wk(t=xr()){return/android/i.test(t)}function xk(t=xr()){return/blackberry/i.test(t)}function yk(t=xr()){return/webos/i.test(t)}function Mx(t=xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OL(t=xr()){var e;return Mx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HL(){return EN()&&document.documentMode===10}function vk(t=xr()){return Mx(t)||wk(t)||yk(t)||xk(t)||/windows phone/i.test(t)||mk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e=[]){let r;switch(t){case"Browser":r=Ib(xr());break;case"Worker":r=`${Ib(xr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Pa}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=A=>new Promise((i,l)=>{try{const a=e(A);i(a)}catch(a){l(a)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e={}){return gi(t,"GET","/v2/passwordPolicy",ho(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=6;class zL{constructor(e){var r,n,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:GL,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,A,i,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(r=a.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(n=a.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(s=a.containsLowercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(A=a.containsUppercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eb(this),this.idTokenSubscription=new Eb(this),this.beforeStateQueue=new VL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ik,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Qs(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await uk(this,{idToken:e}),n=await Us._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ks(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===l)&&(a!=null&&a.user)&&(s=a.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Zh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ks(this.app))return Promise.reject(HA(this));const r=e?Dt(e):null;return r&&rt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ks(this.app)?Promise.reject(HA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ks(this.app)?Promise.reject(HA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KL(this),r=new zL(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await ML(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Qs(e)||this._popupRedirectResolver;rt(r,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[Qs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const A=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(l,this,"internal-error"),l.then(()=>{i||A(this.currentUser)}),typeof r=="function"){const a=e.addObserver(r,n,s);return()=>{i=!0,a()}}else{const a=e.addObserver(r);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&bL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ja(t){return Dt(t)}class Eb{constructor(e){this.auth=e,this.observer=null,this.addObserver=QN(r=>this.observer=r)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WL(t){og=t}function bk(t){return og.loadJS(t)}function qL(){return og.recaptchaEnterpriseScript}function XL(){return og.gapiScript}function JL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const YL="recaptcha-enterprise",ZL="NO_RECAPTCHA";class eM{constructor(e){this.type=YL,this.auth=Ja(e)}async verify(e="verify",r=!1){async function n(A){if(!r){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,l)=>{UL(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new SL(a);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(a=>{l(a)})})}function s(A,i,l){const a=window.grecaptcha;Bb(a)?a.enterprise.ready(()=>{a.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(ZL)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{n(this.auth).then(l=>{if(!r&&Bb(window.grecaptcha))s(l,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=qL();a.length!==0&&(a+=l),bk(a).then(()=>{s(l,A,i)}).catch(c=>{i(c)})}}).catch(l=>{i(l)})})}}async function Tb(t,e,r,n=!1){const s=new eM(t);let A;try{A=await s.verify(r)}catch{A=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function kb(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await Tb(t,e,r,r==="getOobCode");return n(t,A)}else return n(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Tb(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(A)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t,e){const r=Au(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),A=r.getOptions();if($A(A,e??{}))return s;es(s,"already-initialized")}return r.initialize({options:e})}function rM(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Qs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function nM(t,e,r){const n=Ja(t);rt(n._canInitEmulator,n,"emulator-config-failed"),rt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,A=Ck(e),{host:i,port:l}=sM(e),a=l===null?"":`:${l}`;n.config.emulator={url:`${A}//${i}${a}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:l,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),AM()}function Ck(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sM(t){const e=Ck(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const A=s[1];return{host:A,port:Fb(n.substr(A.length+1))}}else{const[A,i]=n.split(":");return{host:A,port:Fb(i)}}}function Fb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AM(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,r){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function iM(t,e){return gi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return ig(t,"POST","/v1/accounts:signInWithPassword",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(t,e){return ig(t,"POST","/v1/accounts:signInWithEmailLink",ho(t,e))}async function lM(t,e){return ig(t,"POST","/v1/accounts:signInWithEmailLink",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Ox{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new zc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new zc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kb(e,r,"signInWithPassword",oM);case"emailLink":return aM(e,{email:this._email,oobCode:this._password});default:es(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kb(e,n,"signUpPassword",iM);case"emailLink":return lM(e,{idToken:r,email:this._email,oobCode:this._password});default:es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(t,e){return ig(t,"POST","/v1/accounts:signInWithIdp",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="http://localhost";class so extends Ox{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):es("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,A=Dx(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new so(n,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return ia(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ia(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ia(e,r)}buildRequest(){const e={requestUri:cM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=su(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dM(t){const e=Ul(Ql(t)).link,r=e?Ul(Ql(e)).deep_link_id:null,n=Ul(Ql(t)).deep_link_id;return(n?Ul(Ql(n)).link:null)||n||r||e||t}class Hx{constructor(e){var r,n,s,A,i,l;const a=Ul(Ql(e)),c=(r=a.apiKey)!==null&&r!==void 0?r:null,d=(n=a.oobCode)!==null&&n!==void 0?n:null,h=uM((s=a.mode)!==null&&s!==void 0?s:null);rt(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=a.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=dM(e);try{return new Hx(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,r){return zc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Hx.parseLink(r);return rt(n,"argument-error"),zc._fromEmailAndCode(e,n.code,n.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends _k{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends Bu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:wA.PROVIDER_ID,signInMethod:wA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wA.credentialFromTaggedObject(e)}static credentialFromError(e){return wA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wA.credential(e.oauthAccessToken)}catch{return null}}}wA.FACEBOOK_SIGN_IN_METHOD="facebook.com";wA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return so._fromParams({providerId:xA.PROVIDER_ID,signInMethod:xA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return xA.credentialFromTaggedObject(e)}static credentialFromError(e){return xA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return xA.credential(r,n)}catch{return null}}}xA.GOOGLE_SIGN_IN_METHOD="google.com";xA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends Bu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:yA.PROVIDER_ID,signInMethod:yA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yA.credentialFromTaggedObject(e)}static credentialFromError(e){return yA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yA.credential(e.oauthAccessToken)}catch{return null}}}yA.GITHUB_SIGN_IN_METHOD="github.com";yA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA extends Bu{constructor(){super("twitter.com")}static credential(e,r){return so._fromParams({providerId:vA.PROVIDER_ID,signInMethod:vA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return vA.credentialFromTaggedObject(e)}static credentialFromError(e){return vA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return vA.credential(r,n)}catch{return null}}}vA.TWITTER_SIGN_IN_METHOD="twitter.com";vA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const A=await Us._fromIdTokenResponse(e,n,s),i=Sb(n);return new Ua({user:A,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Sb(n);return new Ua({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Sb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Ws{constructor(e,r,n,s){var A;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,ef.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new ef(e,r,n,s)}}function Ik(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?ef._fromErrorAndOperation(t,A,e,n):A})}async function hM(t,e,r=!1){const n=await Gc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ua._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e,r=!1){const{auth:n}=t;if(ks(n.app))return Promise.reject(HA(n));const s="reauthenticate";try{const A=await Gc(t,Ik(n,s,e,t),r);rt(A.idToken,n,"internal-error");const i=Lx(A.idToken);rt(i,n,"internal-error");const{sub:l}=i;return rt(t.uid===l,n,"user-mismatch"),Ua._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&es(n,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(t,e,r=!1){if(ks(t.app))return Promise.reject(HA(t));const n="signIn",s=await Ik(t,n,e),A=await Ua._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(A.user),A}async function gM(t,e){return Ek(Ja(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(t){const e=Ja(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function mM(t,e,r){return ks(t.app)?Promise.reject(HA(t)):gM(Dt(t),Ya.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&pM(t),n})}function wM(t,e,r,n){return Dt(t).onIdTokenChanged(e,r,n)}function xM(t,e,r){return Dt(t).beforeAuthStateChanged(e,r)}function yM(t,e,r,n){return Dt(t).onAuthStateChanged(e,r,n)}function vM(t){return Dt(t).signOut()}const tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(tf,"1"),this.storage.removeItem(tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=1e3,bM=10;class kk extends Tk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,l,a)=>{this.notifyListeners(i,a)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},A=this.storage.getItem(n);HL()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bM):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},BM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}kk.type="LOCAL";const CM=kk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk extends Tk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Fk.type="SESSION";const Sk=Fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new ag(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:A}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(i).map(async c=>c(r.origin,A)),a=await _M(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:a})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ag.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((l,a)=>{const c=Vx("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),l(f.data.response);break;default:clearTimeout(d),clearTimeout(A),a(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return window}function EM(t){gs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(){return typeof gs().WorkerGlobalScope<"u"&&typeof gs().importScripts=="function"}async function TM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function FM(){return Uk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firebaseLocalStorageDb",SM=1,rf="firebaseLocalStorage",Nk="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function lg(t,e){return t.transaction([rf],e?"readwrite":"readonly").objectStore(rf)}function UM(){const t=indexedDB.deleteDatabase(Qk);return new bu(t).toPromise()}function h0(){const t=indexedDB.open(Qk,SM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(rf,{keyPath:Nk})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(rf)?e(n):(n.close(),await UM(),e(await h0()))})})}async function Ub(t,e,r){const n=lg(t,!0).put({[Nk]:e,value:r});return new bu(n).toPromise()}async function QM(t,e){const r=lg(t,!1).get(e),n=await new bu(r).toPromise();return n===void 0?null:n.value}function Qb(t,e){const r=lg(t,!0).delete(e);return new bu(r).toPromise()}const NM=800,RM=3;class Rk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>RM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Uk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ag._getInstance(FM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await TM(),!this.activeServiceWorker)return;this.sender=new IM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await h0();return await Ub(e,tf,"1"),await Qb(e,tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ub(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>QM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=lg(s,!1).getAll();return new bu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rk.type="LOCAL";const DM=Rk;new vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t,e){return e?Qs(e):(rt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends Ox{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ia(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ia(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ia(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function PM(t){return Ek(t.auth,new Kx(t),t.bypassAuthState)}function LM(t){const{auth:e,user:r}=t;return rt(r,e,"internal-error"),fM(r,new Kx(t),t.bypassAuthState)}async function MM(t){const{auth:e,user:r}=t;return rt(r,e,"internal-error"),hM(r,new Kx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,r,n,s,A=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:A,error:i,type:l}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:r,sessionId:n,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PM;case"linkViaPopup":case"linkViaRedirect":return MM;case"reauthViaPopup":case"reauthViaRedirect":return LM;default:es(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new vu(2e3,1e4);class $o extends Dk{constructor(e,r,n,s,A){super(e,r,s,A),this.provider=n,this.authWindow=null,this.pollId=null,$o.currentPopupAction&&$o.currentPopupAction.cancel(),$o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const e=Vx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OM.get())};e()}}$o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="pendingRedirect",nh=new Map;class VM extends Dk{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const n=await KM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KM(t,e){const r=$M(e),n=zM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function GM(t,e){nh.set(t._key(),e)}function zM(t){return Qs(t._redirectPersistence)}function $M(t){return rh(HM,t.config.apiKey,t.name)}async function WM(t,e,r=!1){if(ks(t.app))return Promise.reject(HA(t));const n=Ja(t),s=jM(n,e),i=await new VM(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=10*60*1e3;class XM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!jk(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(fs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nb(e))}saveEventToCache(e){this.cachedEventUids.add(Nb(e)),this.lastProcessedEventTime=Date.now()}}function Nb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t,e={}){return gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eO=/^https?/;async function tO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YM(t);for(const r of e)try{if(rO(r))return}catch{}es(t,"unauthorized-domain")}function rO(t){const e=u0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!eO.test(r))return!1;if(ZM.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new vu(3e4,6e4);function Rb(){const t=gs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function sO(t){return new Promise((e,r)=>{var n,s,A;function i(){Rb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rb(),r(fs(t,"network-request-failed"))},timeout:nO.get()})}if(!((s=(n=gs().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=gs().gapi)===null||A===void 0)&&A.load)i();else{const l=JL("iframefcb");return gs()[l]=()=>{gapi.load?i():r(fs(t,"network-request-failed"))},bk(`${XL()}?onload=${l}`).catch(a=>r(a))}}).catch(e=>{throw sh=null,e})}let sh=null;function AO(t){return sh=sh||sO(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=new vu(5e3,15e3),oO="__/auth/iframe",aO="emulator/auth/iframe",lO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uO(t){const e=t.config;rt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Px(e,aO):`https://${t.config.authDomain}/${oO}`,n={apiKey:e.apiKey,appName:t.name,v:Pa},s=cO.get(t.config.apiHost);s&&(n.eid=s);const A=t._getFrameworks();return A.length&&(n.fw=A.join(",")),`${r}?${su(n).slice(1)}`}async function dO(t){const e=await AO(t),r=gs().gapi;return rt(r,t,"internal-error"),e.open({where:document.body,url:uO(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lO,dontclear:!0},n=>new Promise(async(s,A)=>{await n.restyle({setHideOnLeave:!1});const i=fs(t,"network-request-failed"),l=gs().setTimeout(()=>{A(i)},iO.get());function a(){gs().clearTimeout(l),s(n)}n.ping(a).then(a,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fO=500,gO=600,pO="_blank",mO="http://localhost";class Db{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wO(t,e,r,n=fO,s=gO){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const a=Object.assign(Object.assign({},hO),{width:n.toString(),height:s.toString(),top:A,left:i}),c=xr().toLowerCase();r&&(l=pk(c)?pO:r),fk(c)&&(e=e||mO,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[m,y])=>`${f}${m}=${y},`,"");if(OL(c)&&l!=="_self")return xO(e||"",l),new Db(null);const h=window.open(e||"",l,d);rt(h,t,"popup-blocked");try{h.focus()}catch{}return new Db(h)}function xO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="__/auth/handler",vO="emulator/auth/handler",BO=encodeURIComponent("fac");async function jb(t,e,r,n,s,A){rt(t.config.authDomain,t,"auth-domain-config-required"),rt(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Pa,eventId:s};if(e instanceof _k){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",UN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Bu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const a=await t._getAppCheckToken(),c=a?`#${BO}=${encodeURIComponent(a)}`:"";return`${bO(t)}?${su(l).slice(1)}${c}`}function bO({config:t}){return t.emulator?Px(t,vO):`https://${t.authDomain}/${yO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="webStorageSupport";class CO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sk,this._completeRedirectFn=WM,this._overrideRedirectResult=GM}async _openPopup(e,r,n,s){var A;Vs((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await jb(e,r,n,u0(),s);return wO(e,i,Vx())}async _openRedirect(e,r,n,s){await this._originValidation(e);const A=await jb(e,r,n,u0(),s);return EM(A),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:A}=this.eventManagers[r];return s?Promise.resolve(s):(Vs(A,"If manager is not set, promise should be"),A)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await dO(e),n=new XM(e);return r.register("authEvent",s=>(rt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(mp,{type:mp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[mp];i!==void 0&&r(!!i),es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=tO(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return vk()||gk()||Mx()}}const _O=CO;var Pb="@firebase/auth",Lb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TO(t){pa(new Wi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;rt(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bk(t)},c=new $L(n,s,A,a);return rM(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),pa(new Wi("auth-internal",e=>{const r=Ja(e.getProvider("auth").getImmediate());return(n=>new IO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),OA(Pb,Lb,EO(t)),OA(Pb,Lb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=5*60,FO=xE("authIdTokenMaxAge")||kO;let Mb=null;const SO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>FO)return;const s=r==null?void 0:r.token;Mb!==s&&(Mb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UO(t=Rw()){const e=Au(t,"auth");if(e.isInitialized())return e.getImmediate();const r=tM(t,{popupRedirectResolver:_O,persistence:[DM,CM,Sk]}),n=xE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const A=new URL(n,location.origin);if(location.origin===A.origin){const i=SO(A.toString());xM(r,i,()=>i(r.currentUser)),wM(r,l=>i(l))}}const s=mE("auth");return s&&nM(r,`http://${s}`),r}function QO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WL({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const A=fs("internal-error");A.customData=s,r(A)},n.type="text/javascript",n.charset="UTF-8",QO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TO("Browser");const NO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",RO="zameny-b6c3f.firebaseapp.com",DO="zameny-b6c3f",jO="zameny-b6c3f.firebasestorage.app",PO="323355347910",LO="1:323355347910:web:c81f2813dce5ee9373c0c7",Pk={apiKey:NO,authDomain:RO,projectId:DO,storageBucket:jO,messagingSenderId:PO,appId:LO};let nf;RR().length?nf=Rw():nf=CE(Pk);const Br=NT(nf),Nn=UO(nf);Pk.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Rt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule",NUTRITION:"nutrition_records"},Bo=new Map,MO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},Wo=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>Wo(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=Wo(n);s!==void 0&&(e[r]=s)}return e}return t},Lk=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!Lk(t[s],e[s]))return!1;return!0}return!1};async function OO(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const gr={syncCollection:async(t,e)=>{if(!Br)return;let r=Bo.get(t);r||(r=new Map,Bo.set(t,r));const n=new Map;e.forEach(A=>{A&&A.id&&n.set(A.id,Wo(A))});const s=[];if(r.forEach((A,i)=>{n.has(i)||s.push({type:"delete",id:i})}),n.forEach((A,i)=>{const l=r.get(i);(!l||!Lk(l,A))&&s.push({type:l?"update":"create",item:A,id:i})}),s.length!==0)try{const A=MO(s,450);for(const i of A){const l=rk(Br);i.forEach(a=>{const c=is(Br,t,a.id);a.type==="delete"?(l.delete(c),r.delete(a.id)):(l.set(c,a.item,{merge:!0}),r.set(a.id,a.item))}),await l.commit()}}catch(A){throw console.error(`Failed to sync ${t}:`,A),A}},syncCacheWithDatabase:async t=>{if(Br){if(Bo.has(t)&&Bo.get(t).size>0){console.log(`Cache already exists for ${t}, skipping sync`);return}try{const e=c0(a0(Br,t)),r=await OO(async()=>await XT(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),Bo.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)}catch(e){console.error(`Failed to sync cache for ${t}:`,e)}}},save:async(t,e)=>{if(!Br||!(e||(Nn==null?void 0:Nn.currentUser)))return;const n=[];t.teachers&&n.push(gr.syncCollection(Rt.TEACHERS,t.teachers)),t.subjects&&n.push(gr.syncCollection(Rt.SUBJECTS,t.subjects)),t.classes&&n.push(gr.syncCollection(Rt.CLASSES,t.classes)),t.rooms&&n.push(gr.syncCollection(Rt.ROOMS,t.rooms)),t.schedule&&n.push(gr.syncCollection(Rt.SCHEDULE_1,t.schedule)),t.schedule2&&n.push(gr.syncCollection(Rt.SCHEDULE_2,t.schedule2)),t.substitutions&&n.push(gr.syncCollection(Rt.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&n.push(gr.syncCollection(Rt.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&n.push(gr.syncCollection(Rt.DUTY_SCHEDULE,t.dutySchedule)),t.nutritionRecords&&n.push(gr.syncCollection(Rt.NUTRITION,t.nutritionRecords)),t.settings&&n.push(Zd(is(Br,Rt.CONFIG,"settings"),Wo(t.settings),{merge:!0})),t.bellSchedule&&n.push(Zd(is(Br,Rt.CONFIG,"bells"),Wo({items:t.bellSchedule}))),await Promise.all(n)},subscribe:(t,e)=>{if(!Br)return()=>{};let r={...$r},n=!0,s;const A=()=>{clearTimeout(s),s=setTimeout(async()=>{const a={...r};n&&(n=!1,console.log("Skipping initial cache synchronization to save Firestore quota")),t(a)},50)},i=[],l=(a,c)=>{const d=c0(a0(Br,a));return eh(d,h=>{const f=h.docs.map(y=>y.data()),m=new Map;f.forEach(y=>{y&&y.id&&m.set(y.id,y)}),Bo.set(a,m),f.sort((y,w)=>{const E=typeof y.order=="number"?y.order:999999,C=typeof w.order=="number"?w.order:999999;return E-C}),r[c]=f,A()},h=>{console.warn(`Error reading ${a}:`,h)})};return i.push(l(Rt.TEACHERS,"teachers")),i.push(l(Rt.SUBJECTS,"subjects")),i.push(l(Rt.CLASSES,"classes")),i.push(l(Rt.ROOMS,"rooms")),i.push(l(Rt.SCHEDULE_1,"schedule")),i.push(l(Rt.SCHEDULE_2,"schedule2")),i.push(l(Rt.SUBSTITUTIONS,"substitutions")),i.push(l(Rt.DUTY_ZONES,"dutyZones")),i.push(l(Rt.DUTY_SCHEDULE,"dutySchedule")),i.push(l(Rt.NUTRITION,"nutritionRecords")),i.push(eh(is(Br,Rt.CONFIG,"settings"),a=>{a.exists()&&(r.settings={...$r.settings,...a.data()},A())})),i.push(eh(is(Br,Rt.CONFIG,"bells"),a=>{if(a.exists()){const c=a.data();r.bellSchedule=c.items||$r.bellSchedule,A()}})),()=>{i.forEach(a=>a()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(A=new Date)=>{const i=A.getFullYear(),l=String(A.getMonth()+1).padStart(2,"0"),a=String(A.getDate()).padStart(2,"0");return`${i}-${l}-${a}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Br)throw new Error("Database not initialized");const r=Nn==null?void 0:Nn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(A=>({id:A.id,name:A.name,color:A.color,difficulty:A.difficulty,requiredRoomType:A.requiredRoomType,order:A.order})),teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:A.order})),classes:e.classes.map(A=>({id:A.id,name:A.name,shift:A.shift,studentsCount:A.studentsCount,order:A.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=Wo(n);await Zd(is(Br,Rt.PUBLIC,t),s)},getPublicData:async t=>{if(!Br)return null;try{const e=await uN(()=>Promise.resolve().then(()=>vL),void 0).then(r=>r.getDoc(is(Br,Rt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Br&&await JT(is(Br,Rt.PUBLIC,t))}},Mk=T.createContext(void 0),HO="admin@gymnasium22.com",VO=({children:t})=>{const[e,r]=T.useState(null),[n,s]=T.useState(null),[A,i]=T.useState(!0);T.useEffect(()=>{if(!Nn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=yM(Nn,d=>{r(d),d?d.email===HO?s("admin"):d.email==="canteen@gymnasium22.com"?s("canteen"):d.email&&d.email.includes("@")?s("teacher"):s("guest"):s(null),i(!1)});return()=>c()},[]);const l=async()=>{Nn&&await vM(Nn),s(null)},a=()=>{s("guest"),i(!1)};return o.jsx(Mk.Provider,{value:{user:e,role:n,loading:A,logout:l,setGuestRole:a},children:t})},pi=()=>{const t=T.useContext(Mk);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},rn=()=>crypto.randomUUID(),cg=(t,e)=>{const r=t.getMonth(),n=e==null?void 0:e.semesterConfig;if(n){if(n.secondSemesterMonths.includes(r))return 2;if(n.firstSemesterMonths.includes(r))return 1}return r>=0&&r<=4?2:1},Ok=(t,e)=>cg(t,e.settings)===2?e.schedule2||[]:e.schedule||[],$c=(t=new Date)=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},Hk=T.createContext(void 0),Bl="gym_data_local_backup_v2",bl=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},ad=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},KO=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},yn={items:[],isProcessing:!1,add:t=>{const e=rn();yn.items.push({id:e,data:t,timestamp:Date.now(),retryCount:0}),console.log("   :",e)},process:async t=>{if(yn.isProcessing||!navigator.onLine)return;yn.isProcessing=!0;const e=[];try{for(const r of yn.items){if(!navigator.onLine)break;try{await gr.save(r.data,t),e.push(r.id),console.log(" :",r.id)}catch{r.retryCount++,r.retryCount>=3?(console.error("    3 :",r.id),e.push(r.id)):console.log(`   ${r.retryCount}/3:`,r.id)}}}finally{yn.items=yn.items.filter(r=>!e.includes(r.id)),yn.isProcessing=!1,yn.items.length>0&&navigator.onLine&&setTimeout(()=>yn.process(t),5e3)}}},oA={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)},firebaseOffline:(t,e,r)=>{const n=window.innerWidth<768,s=n?" .     .":` ${e}.         .`;console.warn(`Firebase ${e} ():`,t),n||alert(s),yn.add(r)}},Vk=({children:t,initialData:e})=>{const[r,n]=T.useState($r),[s,A]=T.useState(!0),[i,l]=T.useState(!1),[a,c]=T.useState([]),[d,h]=T.useState(-1),{user:f,role:m,loading:y}=pi();T.useEffect(()=>{if(e){n(e),c([e]),h(0),A(!1);return}if(y)return;let S=null;if(bl()&&(S=KO(Bl),S))try{const b=JSON.parse(S);b&&b.teachers&&(n(B=>({...B,...b})),console.log("Loaded from local storage backup"))}catch(b){oA.log("Error parsing local backup",b)}const U=f&&m!=="guest";if(!(f||m==="guest")){n($r),A(!1);return}if(!U){S||n($r),A(!1);return}A(!0);let v;try{v=gr.subscribe(b=>{const B={...$r,...b};B.teachers||(B.teachers=[]),B.teachers=B.teachers.map(F=>({telegramChatId:"",...F,shifts:F.shifts||[le.First,le.Second]})),B.schedule||(B.schedule=[]),B.schedule2||(B.schedule2=[]),B.substitutions||(B.substitutions=[]),B.bellSchedule||(B.bellSchedule=Dh),(!B.dutyZones||B.dutyZones.length===0)&&(B.dutyZones=hE),B.dutySchedule||(B.dutySchedule=[]),B.nutritionRecords||(B.nutritionRecords=[]),B.settings?B.settings={...$r.settings,...B.settings}:B.settings=$r.settings,n(B),bl()&&ad(Bl,JSON.stringify(B)),c(F=>F.length===0?[B]:F),h(F=>F===-1?0:F),A(!1)},b=>{oA.log("Failed to subscribe to data:",b),A(!1)})}catch(b){oA.log("Failed to initialize subscription:",b),A(!1),v=void 0}return()=>{v&&v()}},[e,f,m,y]);const w=T.useCallback(async(S,U=!0)=>{const N=m==="guest";l(!0);try{const v={...r,...S};if(n(v),bl()&&ad(Bl,JSON.stringify(v)),!e&&f&&!N)try{await gr.save(S,f)}catch(b){oA.firebaseOffline(b," ",S)}else N&&console.warn("       .");if(U){const b=a.slice(0,d+1);b.push(v);const B=50;if(b.length>B){const F=b.length-B;b.splice(0,F),h(B-1)}else h(b.length-1);c(b)}}finally{l(!1)}},[r,a,d,f,m,e]);T.useEffect(()=>{const S=()=>{yn.items.length>0&&f&&m!=="guest"&&!e&&(console.log(` .  ${yn.items.length} ...`),yn.process(f))};return window.addEventListener("online",S),()=>window.removeEventListener("online",S)},[f,m,e]);const E=T.useCallback(async()=>{h(S=>{if(S>0){const U=a[S-1];if(n(U),bl()&&ad(Bl,JSON.stringify(U)),!e&&f)try{gr.save(U,f).catch(N=>oA.firebase(N," "))}catch(N){oA.firebase(N," ")}return S-1}return S})},[a,e,f]),C=T.useCallback(async()=>{h(S=>{if(S<a.length-1){const U=a[S+1];if(n(U),bl()&&ad(Bl,JSON.stringify(U)),!e&&f)try{gr.save(U,f).catch(N=>oA.firebase(N," "))}catch(N){oA.firebase(N," ")}return S+1}return S})},[a,e,f]),x=T.useCallback(async()=>{await w($r)},[w]),_=T.useMemo(()=>({data:r,isLoading:s,isSaving:i,saveData:w,resetData:x,undo:E,redo:C,canUndo:d>0,canRedo:d<a.length-1}),[r,s,i,w,x,E,C,d]);return o.jsx(Hk.Provider,{value:_,children:t})},ug=()=>{const t=T.useContext(Hk);if(!t)throw new Error("useFullData must be used within DataProvider");return t},Kk=T.createContext(void 0),Gk=T.createContext(void 0),zk=({children:t})=>{const{data:e,saveData:r}=ug(),n=T.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=T.useCallback(async(i,l)=>{await r(i,l)},[r]),A=T.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return o.jsx(Kk.Provider,{value:A,children:t})},$k=({children:t})=>{const{data:e,saveData:r}=ug(),A=cg(new Date,e.settings)===2?e.schedule2||[]:e.schedule||[],i=T.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2:h})},[r]),l=T.useCallback(async(d,h)=>{await r(d,h)},[r]),a=T.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,nutritionRecords:e.nutritionRecords||[],saveSemesterSchedule:i,saveScheduleData:l}),[A,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,e.nutritionRecords,i,l]),c=T.useMemo(()=>({...a,saveScheduleData:l}),[a,l]);return o.jsx(Gk.Provider,{value:c,children:t})},Hn=()=>{const t=T.useContext(Kk);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=ug();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||$r.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},mi=()=>{const t=T.useContext(Gk);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=ug();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[],nutritionRecords:t.nutritionRecords||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},GO={Home:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),o.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),o.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"17 1 21 5 17 9"}),o.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),o.jsx("polyline",{points:"7 23 3 19 7 15"}),o.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),o.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),o.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),o.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),o.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),o.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),o.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),o.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),o.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),o.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),o.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),o.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),o.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),o.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"1 4 1 10 7 10"}),o.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"23 4 23 10 17 10"}),o.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),o.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),o.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"18",cy:"5",r:"3"}),o.jsx("circle",{cx:"6",cy:"12",r:"3"}),o.jsx("circle",{cx:"18",cy:"19",r:"3"}),o.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),o.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),o.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),o.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),o.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),o.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),o.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),o.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),o.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),o.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),o.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),o.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),o.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),o.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),o.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),o.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("path",{d:"M8 13h2"}),o.jsx("path",{d:"M8 17h2"}),o.jsx("path",{d:"M14 13h2"}),o.jsx("path",{d:"M14 17h2"})]}),Activity:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),o.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),o.jsx("path",{d:"M3 9h18"}),o.jsx("path",{d:"M12 21V9"})]}),Image:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),o.jsx("circle",{cx:"9",cy:"9",r:"2"}),o.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"17 8 12 3 7 8"}),o.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 3v5h5"}),o.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),o.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),o.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),o.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"9",cy:"12",r:"1"}),o.jsx("circle",{cx:"9",cy:"5",r:"1"}),o.jsx("circle",{cx:"9",cy:"19",r:"1"}),o.jsx("circle",{cx:"15",cy:"12",r:"1"}),o.jsx("circle",{cx:"15",cy:"5",r:"1"}),o.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),o.jsx("path",{d:"M2 20h3"}),o.jsx("path",{d:"M13 20h9"}),o.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),o.jsx("path",{d:"M13 12h1"}),o.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),o.jsx("path",{d:"M8 12h1"}),o.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),o.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"9 11 12 14 22 4"}),o.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),o.jsx("path",{d:"M17 17h.01"}),o.jsx("path",{d:"M12 17h.01"}),o.jsx("path",{d:"M14 14h.01"}),o.jsx("path",{d:"M17 14h.01"}),o.jsx("path",{d:"M14 12h.01"}),o.jsx("path",{d:"M19 12h.01"}),o.jsx("path",{d:"M12 19h.01"}),o.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),o.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 12H3"}),o.jsx("path",{d:"M21 6H3"}),o.jsx("path",{d:"M21 18H3"})]}),Send:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),o.jsx("polyline",{points:"16 17 21 12 16 7"}),o.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),o.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),o.jsx("path",{d:"m20 16-4-4 4-4"}),o.jsx("path",{d:"m4 8 4 4-4 4"}),o.jsx("path",{d:"m16 4-4 4-4-4"}),o.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Coffee:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),Edit:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Info:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})},M=({name:t,size:e=24,className:r="",...n})=>{const s=GO[t];return s?o.jsx(s,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},Wk=T.createContext(void 0),zO=({children:t})=>{const[e,r]=T.useState([]),n=A=>{const i=rn();r(l=>[...l,{...A,id:i}])},s=A=>{r(i=>i.filter(l=>l.id!==A))};return o.jsxs(Wk.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,o.jsx($O,{toasts:e,onRemoveToast:s})]})},qk=()=>{const t=T.useContext(Wk);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},$O=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:o.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&o.jsx("div",{className:"flex justify-end mb-2",children:o.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>o.jsx(WO,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},Cn=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(T.useEffect(()=>{if(!t)return;const A=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[t,e]),t?o.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:A=>A.target===A.currentTarget&&e(),children:o.jsxs("div",{className:`bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:o.jsx(M,{name:"X",size:20})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),WO=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:A})=>{const[i,l]=T.useState(!0),[a,c]=T.useState(!1),d=T.useRef(null);T.useEffect(()=>(d.current=setTimeout(()=>{h()},s),()=>{d.current&&clearTimeout(d.current)}),[]);const h=()=>{d.current&&(clearTimeout(d.current),d.current=null),c(!0),setTimeout(()=>{l(!1),A(t)},300)};if(!i)return null;const m=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),y=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return o.jsx("div",{className:`max-w-sm w-full animate-slide-in ${a?"animate-fade-out":""}`,children:o.jsx("div",{className:`modern-card border p-4 ${m.bg}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`flex-shrink-0 ${m.icon}`,children:o.jsx(M,{name:y,size:20})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:`text-sm font-semibold ${m.title}`,children:r}),n&&o.jsx("p",{className:`text-sm mt-1 ${m.message}`,children:n})]}),o.jsx("button",{onClick:h,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:o.jsx(M,{name:"X",size:16})})]})})})},qO=({x:t,y:e,onClose:r,actions:n})=>{const s=T.useRef(null);if(T.useEffect(()=>{if(t===null||e===null)return;const l=c=>{s.current&&!s.current.contains(c.target)&&r()},a=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",l,!0),document.addEventListener("keydown",a),()=>{window.removeEventListener("click",l,!0),document.removeEventListener("keydown",a)}},[t,e,r]),t===null||e===null)return null;const A=window.innerWidth-t<200?t-200:t,i={top:e,left:A};return o.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:i,children:n.map(l=>o.jsxs("button",{onClick:a=>{a.stopPropagation(),l.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${l.color||"text-slate-700 dark:text-slate-200"}`,children:[l.icon&&o.jsx(M,{name:l.icon,size:16}),l.label]},l.id||l.label))})},XO=()=>{const{bellSchedule:t,isSaving:e}=Hn(),[r,n]=T.useState("..."),[s,A]=T.useState(""),[i,l]=T.useState(0),[a,c]=T.useState("bg-slate-500"),[d,h]=T.useState(""),[f,m]=T.useState(navigator.onLine);return T.useEffect(()=>{const y=()=>m(!0),w=()=>m(!1);return window.addEventListener("online",y),window.addEventListener("offline",w),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",w)}},[]),T.useEffect(()=>{const y=()=>{const E=new Date,C=E.getDay(),_=[null,ct.Monday,ct.Tuesday,ct.Wednesday,ct.Thursday,ct.Friday,null][C];if(h(_||""),!_){n(" "),A(" "),c("bg-slate-400"),l(0);return}const S=B=>{const[F,D]=B.split(":").map(Number);return F*60+D},U=E.getHours()*60+E.getMinutes();let N=t.filter(B=>B.day===_);N.length===0&&(N=t.filter(B=>B.day==="default")),N.sort((B,F)=>S(B.start)-S(F.start));let v=null,b=null;for(let B=0;B<N.length;B++){const F=N[B],D=S(F.start),P=S(F.end);if(U>=D&&U<P){v={...F,duration:P-D,passed:U-D};break}if(B<N.length-1){const I=N[B+1],ze=S(I.start);if(U>=P&&U<ze){const Le=ze-P;if(Le>0&&Le<60){const At=U-P,Je=ze-U;b={nextLesson:I,duration:Le,passed:At,remaining:Je};break}}}}if(v){n(`${v.period} `);const B=Math.max(0,v.duration-v.passed);A(`${v.shift===le.First?"1 ":"2 "}  . ${B} `);const F=v.duration>0?v.passed/v.duration*100:0;l(Math.min(100,Math.max(0,F))),c("bg-indigo-600")}else if(b){n(""),A(` ${b.remaining}  ${b.nextLesson.period} `),c("bg-amber-500");const B=b.duration>0?b.passed/b.duration*100:0;l(Math.min(100,Math.max(0,B)))}else n(" "),A(" "),c("bg-slate-400"),l(0)};y();const w=setInterval(y,6e4);return()=>clearInterval(w)},[t]),o.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[o.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${a}`}),!f&&o.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-amber-500 text-white text-xs font-bold py-1 px-3 rounded-t-2xl text-center flex items-center justify-center gap-1",children:[o.jsx(M,{name:"WifiOff",size:12}),o.jsx("span",{children:"      "})]}),o.jsxs("div",{className:"flex justify-between items-start z-10",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:d}),o.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),o.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),o.jsxs("div",{className:`w-8 h-8 rounded-full ${a} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(M,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),!f&&!e&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(M,{name:"WifiOff",size:16,className:"text-amber-500"})}),o.jsx(M,{name:e?"Loader":f?"Clock":"WifiOff",size:16,className:e?"text-indigo-600 animate-spin":f?a==="bg-indigo-600"?"text-indigo-600":a==="bg-amber-500"?"text-amber-500":"text-slate-400":"text-amber-500"})]})]}),i>0&&o.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:o.jsx("div",{className:`h-full ${a} transition-all duration-1000`,style:{width:`${i}%`}})})]})},ac=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var y;const[A,i]=T.useState(!1),[l,a]=T.useState(""),c=T.useRef(null);T.useEffect(()=>{const w=C=>{c.current&&!c.current.contains(C.target)&&i(!1)},E=C=>{C.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",w),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",E)}},[]);const h=((y=(s?t.flatMap(w=>w.options):t).find(w=>w.value===e))==null?void 0:y.label)||n,f=s?t.map(w=>({...w,options:w.options.filter(E=>E.label.toLowerCase().includes(l.toLowerCase()))})).filter(w=>w.options.length>0):null,m=s?null:t.filter(w=>w.label.toLowerCase().includes(l.toLowerCase()));return o.jsxs("div",{className:"relative w-full",ref:c,children:[o.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[o.jsx("span",{className:e?"":"text-slate-400",children:h}),o.jsx(M,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[o.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:o.jsx("input",{autoFocus:!0,value:l,onChange:w=>a(w.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&f?f.map(w=>o.jsxs("div",{children:[o.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:w.label}),w.options.map(E=>o.jsx("div",{onClick:()=>{r(E.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===E.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:E.label},E.value))]},w.id||w.label)):m?m.map(w=>o.jsx("div",{onClick:()=>{r(w.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===w.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:w.label},w.value)):null]})]})},ld=({children:t,className:e=""})=>{const r=Is.Children.toArray(t);return o.jsx("div",{className:e,children:r.map((n,s)=>{const A=Is.isValidElement(n)&&n.key?n.key:s;return o.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},A)})})},wp=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return o.jsx("div",{className:"space-y-3",children:t.map(s=>{const A=s.id??s.label,i=Math.min(100,Math.max(0,s.value/n*100));return o.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[o.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),o.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),o.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},A)})})},JO=({onMenuClick:t,role:e})=>{const{settings:r}=Hn(),n=e==="admin",s=e==="teacher",A=e==="canteen",i=e==="guest",l=n||s,a=n||s||i,c=n||s||A,h=cg(new Date,r)===2?"/schedule2":"/schedule";return o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:o.jsxs("div",{className:"flex justify-around items-center h-20",children:[l&&o.jsxs(qn,{to:"/dashboard",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Home",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),a&&o.jsxs(qn,{to:h,className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Calendar",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),c&&o.jsxs(qn,{to:"/nutrition",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Coffee",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),n&&o.jsxs(qn,{to:"/substitutions",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Repeat",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),o.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 active:bg-indigo-50/50 dark:active:bg-indigo-900/20 transition-all duration-300 flex-1 h-full hover:bg-slate-100/50 dark:hover:bg-slate-700/30",children:[o.jsx(M,{name:"Menu",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]})]})})},YO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:A}=Hn(),{schedule:i,substitutions:l,nutritionRecords:a}=mi(),{role:c}=pi(),d=ru(),{addToast:h}=qk(),[f,m]=T.useState(localStorage.getItem("gym_notes")||""),[y]=T.useState(new Date),[w,E]=T.useState(""),[C,x]=T.useState(null),[_,S]=T.useState(!1),[U,N]=T.useState(!1),v=(X=new Date)=>{const it=X.getFullYear(),et=String(X.getMonth()+1).padStart(2,"0"),ot=String(X.getDate()).padStart(2,"0");return`${it}-${et}-${ot}`},[b,B]=T.useState(!1),[F,D]=T.useState(""),[P,I]=T.useState(!1),ze=X=>X.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),Le=X=>{const it=ze(X);m(it),N(!0)},At=()=>{localStorage.setItem("gym_notes",f),N(!1),h({type:"success",title:" ",message:"     ",duration:3e3})};T.useEffect(()=>{if(!U)return;const X=setTimeout(()=>{localStorage.setItem("gym_notes",f),N(!1)},3e3);return()=>clearTimeout(X)},[f,U]);const Je=T.useMemo(()=>{const X=y.getHours();return X<5?" ":X<12?" ":X<18?" ":" "},[y]),se=T.useMemo(()=>v(y),[y]),Ce=T.useMemo(()=>{const X=y.getDay();return X===0||X===6?null:Ct[X-1]},[y]),Ne=T.useMemo(()=>{const X=new Date;return X.setHours(0,0,0,0),e.filter(it=>it.birthDate).map(it=>{const et=new Date(it.birthDate);let ot=new Date(X.getFullYear(),et.getMonth(),et.getDate());ot<X&&ot.setFullYear(X.getFullYear()+1);const Ze=Math.ceil((ot.getTime()-X.getTime())/(1e3*60*60*24));return{...it,diff:Ze,age:X.getFullYear()-et.getFullYear()}}).filter(it=>it.diff<=30).sort((it,et)=>it.diff-et.diff)},[e]),Ye=T.useMemo(()=>{const X=e.length,it=new Map;e.filter(L=>L.unavailableDates.includes(se)).forEach(L=>{var De;const ne=((De=L.absenceReasons)==null?void 0:De[se])===" "?" ":"";it.set(L.id,{id:L.id,name:L.name,displayReason:ne})});const et=l.filter(L=>L.date===se&&L.replacementTeacherId!=="conducted"&&L.replacementTeacherId!==L.originalTeacherId),ot=new Map;et.forEach(L=>{if(it.has(L.originalTeacherId))return;const $=e.find(Be=>Be.id===L.originalTeacherId);if(!$)return;const ne=i.find(Be=>Be.id===L.scheduleItemId);if(!ne)return;ot.has(L.originalTeacherId)||ot.set(L.originalTeacherId,{teacher:$,lessons:[]}),ot.get(L.originalTeacherId).lessons.push({period:ne.period,reason:L.lessonAbsenceReason})});const Ze=Array.from(it.values());ot.forEach((L,$)=>{const ne=L.lessons.sort((z,J)=>z.period-J.period),De=ne.map(z=>z.period).join(", "),re=ne.some(z=>z.reason===" ")?" ":"";Ze.push({id:$,name:L.teacher.name,displayReason:`${De} : ${re}`})}),Ze.sort((L,$)=>L.name.localeCompare($.name));const at=Ze.length,ee=X-at;return{presentPercent:X>0?Math.round(ee/X*100):0,absentCount:at,totalTeachers:X,absentTeachersList:Ze}},[e,se,l,i]),We=T.useMemo(()=>{const X=new Date(y);for(X.setDate(y.getDate()+1);X.getDay()===0||X.getDay()===6;)X.setDate(X.getDate()+1);const et=[null,"","","","","",null][X.getDay()];if(!et)return[];const ot=[];return r.forEach(Ze=>{const at=i.filter(ee=>ee.classId===Ze.id&&ee.day===et);at.length===0?ot.push({class:Ze.name,issue:`   ${et}`}):at.length<4&&ot.push({class:Ze.name,issue:`  (${at.length})`}),at.forEach(ee=>{if(i.some(L=>L.id!==ee.id&&L.day===et&&L.period===ee.period&&L.shift===ee.shift&&L.teacherId===ee.teacherId)&&ot.push({class:Ze.name,issue:`  (${ee.period} )`}),ee.roomId){const L=n.find($=>$.id===ee.roomId);L&&L.capacity<Ze.studentsCount&&ot.push({class:Ze.name,issue:`: ${L.name} (${ee.period} )`})}})}),ot.filter((Ze,at,ee)=>ee.findIndex(R=>R.class===Ze.class&&R.issue===Ze.issue)===at).slice(0,10)},[i,r,e,n,y]),G=T.useMemo(()=>{if(!Ce)return 0;let X=0;const it=i.filter(et=>et.day===Ce);for(const et of it){const ot=e.find(Ze=>Ze.id===et.teacherId);ot&&ot.unavailableDates.includes(se)&&(l.find(at=>at.scheduleItemId===et.id&&at.date===se)||X++)}return X},[i,e,l,se,Ce]),he=T.useMemo(()=>{if(c!=="canteen")return 0;const X=a.filter(et=>et.date===se),it=new Set(X.map(et=>et.classId));return r.filter(et=>!it.has(et.id)).length},[c,a,se,r]),$e=()=>{var ne;if(!w){x(null);return}const X=new Date,et=[null,ct.Monday,ct.Tuesday,ct.Wednesday,ct.Thursday,ct.Friday,null][X.getDay()];if(!et){x({status:"",detail:"  ",color:"text-slate-500"});return}const ot=De=>{const[Be,re]=De.split(":").map(Number);return Be*60+re},Ze=X.getHours()*60+X.getMinutes();let at=s.filter(De=>De.day===et);at.length===0&&(at=s.filter(De=>De.day==="default"));const ee=at.find(De=>{const Be=ot(De.start),re=ot(De.end);return Ze>=Be&&Ze<=re}),R=w.toLowerCase(),L=e.find(De=>De.name.toLowerCase().includes(R)),$=r.find(De=>De.name.toLowerCase().includes(R));if(!L&&!$){x({status:" ",detail:" ",color:"text-red-500"});return}if(L){if(L.unavailableDates.includes(se)){const J=((ne=L.absenceReasons)==null?void 0:ne[se])===" "?" ":"";x({status:"",detail:J,color:"text-red-500",icon:"UserX",items:[]});return}if(!ee){x({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const De=i.filter(z=>z.teacherId===L.id&&z.day===et&&z.period===ee.period&&z.shift===ee.shift),Be=l.filter(z=>z.date===se&&z.replacementTeacherId===L.id).map(z=>i.find(J=>J.id===z.scheduleItemId)).filter(z=>!!z&&z.day===et&&z.period===ee.period&&z.shift===ee.shift);let re=[];De.forEach(z=>{var me,fe,Ue;const J=l.find(Ae=>Ae.date===se&&Ae.scheduleItemId===z.id);if(!J||J.replacementTeacherId===L.id){const Ae=((me=n.find(Qe=>Qe.id===((J==null?void 0:J.replacementRoomId)||z.roomId)))==null?void 0:me.name)||(J==null?void 0:J.replacementRoomId)||z.roomId||" .",ae=(fe=t.find(Qe=>Qe.id===z.subjectId))==null?void 0:fe.name,_e=(Ue=r.find(Qe=>Qe.id===z.classId))==null?void 0:Ue.name;re.push({room:Ae,subject:ae,entityName:_e,direction:z.direction,isSubstitution:!!(J&&J.replacementTeacherId===L.id),originalTeacherName:null})}}),Be.forEach(z=>{var ae,_e,Qe;const J=l.find(je=>je.date===se&&je.scheduleItemId===z.id&&je.replacementTeacherId===L.id);if(!J)return;const me=((ae=n.find(je=>je.id===(J.replacementRoomId||z.roomId)))==null?void 0:ae.name)||J.replacementRoomId||z.roomId||" .",fe=(_e=t.find(je=>je.id===z.subjectId))==null?void 0:_e.name,Ue=(Qe=r.find(je=>je.id===z.classId))==null?void 0:Qe.name,Ae=e.find(je=>je.id===J.originalTeacherId);re.push({room:me,subject:fe,entityName:Ue,direction:z.direction,isSubstitution:!0,originalTeacherName:Ae==null?void 0:Ae.name})}),re.length>0?x({status:` ${ee.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:re}):x({status:"",detail:` ( ${ee.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if($){if(!ee){x({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const De=i.filter(Be=>Be.classId===$.id&&Be.day===et&&Be.period===ee.period&&Be.shift===ee.shift);if(De.length>0){const Be=De.map(J=>{var Fe,st,tt,ht,Ie;const me=l.find(be=>be.scheduleItemId===J.id&&be.date===se);if(me&&me.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(Fe=t.find(be=>be.id===J.subjectId))==null?void 0:Fe.name};const fe=!!(me&&me.replacementTeacherId!=="conducted"&&me.replacementTeacherId!=="cancelled"),Ue=fe?me.replacementTeacherId:J.teacherId,Ae=(me==null?void 0:me.replacementRoomId)||J.roomId,ae=(st=e.find(be=>be.id===Ue))==null?void 0:st.name,_e=((tt=n.find(be=>be.id===Ae))==null?void 0:tt.name)||Ae||" .",Qe=(ht=t.find(be=>be.id===J.subjectId))==null?void 0:ht.name,je=fe?(Ie=e.find(be=>be.id===me.originalTeacherId))==null?void 0:Ie.name:null;return{room:_e,subject:Qe,entityName:ae,direction:J.direction,isSubstitution:fe,originalTeacherName:je}}),re=Be.filter(J=>!J.cancelled),z=Be.filter(J=>!!J.cancelled);re.length>0?x({status:` ${ee.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:re}):z.length>0?x({status:" ",detail:z.map(J=>J.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):x({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else x({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},Re=async()=>{if(!F.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}I(!0);const X=` *   :*

${F}`;try{const et=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:X,parse_mode:"Markdown"})})).json();if(et.ok)alert("!   ."),B(!1),D("");else throw new Error(et.description)}catch(it){console.error("   Telegram:",it),alert(`   . : ${it}`)}finally{I(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[o.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 animate-fade-in",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[Je,", ",c==="admin"?"":c==="canteen"?"":"","!"]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:[" ",y.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[o.jsx(M,{name:"Send",size:18}),"  "]})})]}),c==="admin"&&G>0&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-4 animate-fade-in",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-amber-500 text-white p-2 rounded-xl",children:o.jsx(M,{name:"AlertTriangle",size:20})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:[G," ",G===1?"":G<5?"":"","  "]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:'  ""   '})]}),o.jsx(qn,{to:"/substitutions",className:"px-4 py-2 bg-amber-500 text-white rounded-xl font-semibold hover:bg-amber-600 transition-colors text-sm",children:""})]})}),c==="canteen"&&he>0&&o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-4 animate-fade-in",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-xl",children:o.jsx(M,{name:"Coffee",size:20})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:[he," ",he===1?"":he<5?"":"","    "]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"        "})]}),o.jsx(qn,{to:"/nutrition",className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors text-sm",children:""})]})}),o.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3 animate-fade-in",children:[o.jsxs(qn,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Calendar",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&o.jsxs(qn,{to:"/substitutions",className:"p-4 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-orange-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Repeat",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&o.jsxs(qn,{to:"/duty",className:"p-4 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Shield",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="guest"&&o.jsxs(qn,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30 border border-emerald-200 dark:border-emerald-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-emerald-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Users",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:o.jsx(M,{name:"Search",size:22})}),o.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",inputMode:"search",placeholder:"  ...",value:w,onChange:X=>E(X.target.value),onKeyDown:X=>X.key==="Enter"&&$e(),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl p-3.5 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),o.jsx("button",{onClick:$e,className:"btn-primary btn-ripple btn-touch p-3.5 mobile-optimized",children:o.jsx(M,{name:"Search",size:20})})]}),C&&o.jsxs("div",{className:"mt-auto p-4 bg-slate-50/80 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 animate-fade-in backdrop-blur-sm",children:[o.jsxs("div",{className:`text-xs font-bold uppercase mb-3 flex items-center gap-2 ${C.color}`,children:[o.jsx(M,{name:C.icon||"Info",size:16})," ",C.status]}),C.items&&C.items.length>0?o.jsx("div",{className:"space-y-2.5",children:C.items.map((X,it)=>o.jsxs("div",{className:"bg-white dark:bg-dark-900/80 p-3 rounded-xl border border-slate-100 dark:border-slate-600 text-sm shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:X.subject}),X.direction&&o.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-md",children:X.direction})]}),X.isSubstitution&&o.jsx("div",{className:"text-[10px] font-bold text-orange-500 mt-1",children:X.originalTeacherName?` (${X.originalTeacherName})`:" "}),o.jsxs("div",{className:"flex justify-between items-center mt-2 text-slate-500 dark:text-slate-400 text-xs",children:[o.jsx("span",{children:X.entityName}),o.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg font-mono font-bold text-slate-600 dark:text-slate-300",children:X.room})]})]},`${X.room}-${X.subject}-${X.entityName}-${it}`))}):o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-base leading-snug",children:C.detail})]})]}),o.jsxs("div",{className:`p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 ${G>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[G>0&&o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),o.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[o.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${G>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:o.jsx(M,{name:G>0?"AlertTriangle":"CheckCircle",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:G>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:G}),o.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),o.jsxs("button",{onClick:()=>d("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",o.jsx(M,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:o.jsx(M,{name:"CheckCircle",size:64})}),o.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]}),o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:o.jsx(M,{name:"PieChart",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsx("button",{onClick:()=>S(!_),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:_?" ":" ",children:o.jsx(M,{name:_?"PieChart":"List",size:20})})]}),_?o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:Ye.absentTeachersList.length>0?o.jsx("div",{className:"space-y-3",children:Ye.absentTeachersList.map(X=>o.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:X.name}),o.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:X.displayReason})]},X.id))}):o.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:o.jsx("p",{className:"text-sm font-medium",children:"   "})})}):o.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[o.jsxs("div",{className:"relative w-28 h-28",children:[o.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[o.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),o.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${Ye.presentPercent}, 100`,strokeLinecap:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),o.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),o.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[Ye.presentPercent,"%"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:Ye.absentCount}),o.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",o.jsx("br",{}),""]})]})]})]}),o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full group card-hover relative bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:o.jsx(M,{name:"Edit2",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:At,disabled:!U,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${U?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:U?" ":" ",children:o.jsx(M,{name:"Save",size:16})}),o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f),h({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:o.jsx(M,{name:"Copy",size:16})}),o.jsx("button",{onClick:()=>{confirm(" ?")&&(m(""),localStorage.setItem("gym_notes",""),N(!1),h({type:"success",title:" ",duration:2e3}))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:o.jsx(M,{name:"Trash2",size:16})})]})]}),o.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[o.jsx("textarea",{inputMode:"text",className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:f,onChange:X=>Le(X.target.value),maxLength:1e4}),U&&o.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[o.jsx(M,{name:"Clock",size:10}),"  "]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:o.jsx(M,{name:"AlertTriangle",size:20})}),o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:We.length?We.map(X=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:X.class}),o.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:X.issue})]},`${X.class}-${X.issue}`)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]}),o.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:o.jsx(M,{name:"Gift",size:20})}),o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:Ne.length?Ne.map(X=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:X.name}),o.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${X.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:X.diff===0?"!":` ${X.diff} .`})]},X.id)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]})]}),o.jsx(Cn,{isOpen:b,onClose:()=>B(!1),title:" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),o.jsx("textarea",{inputMode:"text",value:F,onChange:X=>D(X.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:Re,disabled:P,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[P?o.jsx(M,{name:"Loader",size:16,className:"animate-spin"}):o.jsx(M,{name:"Send",size:16}),P?"...":""]})})]})})]})};var Xk={},Jk={},Yk={},dg={};Object.defineProperty(dg,"__esModule",{value:!0});function ZO(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}dg.default=ZO;var Gx={};Object.defineProperty(Gx,"__esModule",{value:!0});var eH=dg,tH=" and ";function rH(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=eH.default(r),A=n;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(tH)}Gx.default=rH;var zx={};Object.defineProperty(zx,"__esModule",{value:!0});function nH(){}zx.default=nH;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=dg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=Gx;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=zx;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(Yk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=T,r=Yk;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(A,i){i===void 0&&(i=!1);var l=e.useState(i),a=l[0],c=l[1],d=r.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),a}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(Jk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=Jk;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(Xk);const Zk=KC(Xk),eF=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:A}=Hn(),{schedule1:i,schedule2:l,saveSemesterSchedule:a,canUndo:c,canRedo:d,undo:h,redo:f}=mi(),m=e===2?l:i,y=async Q=>{await a(e,Q)},[w,E]=T.useState(le.First),[C,x]=T.useState(ct.Monday),[_,S]=T.useState(!1),[U,N]=T.useState({}),[v,b]=T.useState("class"),[B,F]=T.useState(""),[D,P]=T.useState(""),[I,ze]=T.useState(""),[Le,At]=T.useState(!1),[Je,se]=T.useState({visible:!1,x:0,y:0,item:null,cell:null}),[Ce,Ne]=T.useState(null),[Ye,We]=T.useState([]),[G,he]=T.useState(null),[$e,Re]=T.useState(null),X=Zk({maxWidth:767}),[it,et]=T.useState(!0),[ot,Ze]=T.useState(!1),[at,ee]=T.useState({isOpen:!1,type:"",day:"",classId:""}),[R,L]=T.useState(ct.Monday),[$,ne]=T.useState(""),De=an[w],Be=T.useMemo(()=>v==="week"?an[w].map(Q=>({id:Q.toString(),name:`${Q} `})):v==="class"?B?s.filter(Q=>Q.id===B&&Q.shift===w):s.filter(Q=>Q.shift===w):v==="teacher"?B?n.filter(Q=>Q.id===B):n:v==="subject"?B?r.filter(Q=>Q.id===B):r:[],[v,B,s,n,r,w]),re=()=>Be,[z]=T.useState(()=>new Map);T.useEffect(()=>{z.clear()},[m,z]),T.useEffect(()=>{z.size>500&&(z.clear(),console.warn("Schedule cache cleared to prevent memory leak"))},[z]);const J=T.useCallback((Q,K)=>{const ie=`${v}-${Q}-${K}-${w}-${C}-${B}-${D}-${I}`;if(z.has(ie))return z.get(ie);let te=[];if(v==="week"){const ce=parseInt(Q);if(isNaN(ce))return[];const oe=String(K);te=m.filter(ge=>ge.shift===w&&ge.period===ce&&ge.day===oe),B&&(te=te.filter(ge=>ge.classId===B))}else{const ce=typeof K=="string"?parseInt(K):K;if(isNaN(ce))return[];v==="class"&&(te=m.filter(oe=>oe.classId===Q&&oe.period===ce&&oe.day===C&&oe.shift===w)),v==="teacher"&&(te=m.filter(oe=>oe.teacherId===Q&&oe.period===ce&&oe.day===C&&oe.shift===w)),v==="subject"&&(te=m.filter(oe=>oe.subjectId===Q&&oe.period===ce&&oe.day===C&&oe.shift===w))}return D&&(te=te.filter(ce=>{if(!ce.roomId)return!1;const oe=A.find(ve=>ve.id===ce.roomId);return((oe?oe.name:ce.roomId)||"").toLowerCase().includes(D.toLowerCase())})),I&&(te=te.filter(ce=>{var oe;return(oe=ce.direction)==null?void 0:oe.toLowerCase().includes(I.toLowerCase())})),z.set(ie,te),te},[v,m,w,C,B,D,I,A]),me=Q=>{const K=[],ie=m.filter(oe=>oe.id!==Q.id&&oe.day===Q.day&&oe.period===Q.period&&oe.shift===Q.shift);return ie.find(oe=>oe.teacherId===Q.teacherId)&&K.push("teacher"),ie.find(oe=>!(oe.classId!==Q.classId||oe.direction&&Q.direction&&oe.direction!==Q.direction))&&K.push("class"),Q.roomId&&ie.find(ge=>ge.roomId===Q.roomId)&&K.push("room"),K},fe=(Q,K,ie)=>{const te=[],ce=s.find(ve=>ve.id===Q),oe=r.find(ve=>ve.id===K),ge=A.find(ve=>ve.id===ie);return ge&&(ce&&ge.capacity<ce.studentsCount&&te.push(`  !   ${ce.studentsCount} .,     ${ge.capacity}.`),oe&&oe.requiredRoomType&&oe.requiredRoomType!==""&&ge.type!==oe.requiredRoomType&&te.push(`   !   "${oe.requiredRoomType}",   "${ge.type}".`)),te},Ue=Q=>{if(!Q.classId||!Q.subjectId||!Q.roomId){We([]);return}const K=fe(Q.classId,Q.subjectId,Q.roomId);We(K)},Ae=Q=>{t||(N(Q),Ue(Q),S(!0))},ae=(Q,K,ie=C)=>{if(t)return;const te={period:K,day:ie,shift:w,id:rn()};v==="class"&&(te.classId=Q),v==="teacher"&&(te.teacherId=Q),v==="subject"&&(te.subjectId=Q),v==="week"&&(te.period=parseInt(Q),te.day=ie,B&&s.find(ce=>ce.id===B)&&(te.classId=B)),N(te),We([]),S(!0)},_e=async()=>{if(!U.subjectId||!U.teacherId||!U.classId)return;const Q=[];if(U.period!==void 0){const ve=U.shift||w;(an[ve]||[]).includes(U.period)||Q.push(` ${U.period}    "${ve}"`)}if(n.find(ve=>ve.id===U.teacherId)||Q.push("   "),r.find(ve=>ve.id===U.subjectId)||Q.push("   "),s.find(ve=>ve.id===U.classId)||Q.push("   "),U.roomId&&(A.find(Ke=>Ke.id===U.roomId)||Q.push("   ")),Q.length>0){alert(`  :

${Q.join(`
`)}`);return}const ce=me(U);if(ce.length>0){const ve={teacher:"",class:"",room:""},Ke=ce.map(yt=>ve[yt]).join(", ");if(!confirm(`  : ${Ke}     .

   ?`))return}let oe=[...m];const ge=oe.findIndex(ve=>ve.id===U.id);ge>=0?oe[ge]=U:oe.push(U),await y(oe),S(!1)},Qe=async Q=>{const K=m.filter(ie=>ie.id!==(Q||U.id));await y(K),S(!1)},je=(Q,K,ie)=>{t||(Q.preventDefault(),Q.stopPropagation(),se({visible:!0,x:Q.clientX,y:Q.clientY,item:K,cell:ie}))},Fe=(Q,K)=>{if(t)return;he(K),Q.dataTransfer.effectAllowed="move";const ie=Q.currentTarget;setTimeout(()=>ie.classList.add("dragging"),0)},st=Q=>{Q.currentTarget.classList.remove("dragging"),he(null),Re(null)},tt=(Q,K)=>{Q.preventDefault(),!t&&Re(`${K.rowId}-${K.colKey}`)},ht=async(Q,K)=>{if(Q.preventDefault(),!G||t)return;const ie={...G};v==="week"?(ie.period=parseInt(K.rowId),ie.day=K.colKey):(ie.period=K.colKey,ie.day=C,v==="class"&&(ie.classId=K.rowId),v==="teacher"&&(ie.teacherId=K.rowId),v==="subject"&&(ie.subjectId=K.rowId));const te=m.map(ge=>ge.id===ie.id?ie:ge),ce=Ie(te,ie);if(ce.length>0){const ge=ce.map(ve=>{switch(ve.type){case"teacher":return` ${ve.entityName}     `;case"room":return` ${ve.entityName}     `;case"class":return` ${ve.entityName}      `;default:return"  "}});alert(`  :
${ge.join(`
`)}`),he(null),Re(null);return}await y(te),he(null),Re(null)},Ie=(Q,K)=>{const ie=[],te=Q.filter(ge=>ge.id!==K.id&&ge.day===K.day&&ge.period===K.period&&ge.shift===K.shift);if(te.find(ge=>ge.teacherId===K.teacherId)){const ge=n.find(ve=>ve.id===K.teacherId);ie.push({type:"teacher",entityName:(ge==null?void 0:ge.name)||K.teacherId})}if(K.roomId&&te.find(ve=>ve.roomId===K.roomId)){const ve=A.find(Ke=>Ke.id===K.roomId);ie.push({type:"room",entityName:(ve==null?void 0:ve.name)||K.roomId})}if(te.find(ge=>ge.classId===K.classId)){const ge=s.find(ve=>ve.id===K.classId);ie.push({type:"class",entityName:(ge==null?void 0:ge.name)||K.classId})}return ie},be=[];if(Je.item)be.push({label:"",icon:"Copy",onClick:()=>Ne(Je.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>Qe(Je.item.id)});else if(Je.cell){const Q=Je.cell;Ce&&be.push({label:"",icon:"Clipboard",onClick:async()=>{const K={...Ce,id:rn(),day:C,shift:w,period:Q.colKey};v==="week"&&(K.day=Q.colKey,K.period=parseInt(Q.rowId)),v==="class"?K.classId=Q.rowId:v==="teacher"?K.teacherId=Q.rowId:v==="subject"&&(K.subjectId=Q.rowId);let ie=[...m,K];await y(ie),Ne(null)}}),be.push({label:" ",icon:"Plus",onClick:()=>ae(Q.rowId||"",typeof Q.colKey=="number"?Q.colKey:parseInt(Q.rowId||"0"),v==="week"?Q.colKey:C)})}const qe=U.subjectId?n.filter(Q=>Q.subjectIds&&Q.subjectIds.includes(U.subjectId)):[],lt=U.subjectId?n.filter(Q=>!Q.subjectIds||!Q.subjectIds.includes(U.subjectId)):n,It=T.useMemo(()=>{const Q=e===2?" (2- )":"";if(B){if(v==="teacher"){const K=n.find(ie=>ie.id===B);return K?K.name+Q:""+Q}if(v==="class"){const K=s.find(ie=>ie.id===B);return K?K.name+Q:""+Q}if(v==="subject"){const K=r.find(ie=>ie.id===B);return K?K.name+Q:""+Q}if(v==="week"){const K=s.find(ie=>ie.id===B);return K?K.name+Q:""+Q}}return`  ${C}`+Q},[B,v,n,s,r,C,e]),j=!!B,q=T.useMemo(()=>j?Ct:De,[j,De]),Z=T.useMemo(()=>j?an[w].map(Q=>({id:Q.toString(),name:`${Q} `})):re(),[j,w,re]),V=(Q,K)=>{if(j){const ie=parseInt(Q),te=K;let ce=m.filter(oe=>oe.shift===w&&oe.period===ie&&oe.day===te);return v==="class"||v==="week"?ce=ce.filter(oe=>oe.classId===B):v==="teacher"?ce=ce.filter(oe=>oe.teacherId===B):v==="subject"&&(ce=ce.filter(oe=>oe.subjectId===B)),ce}else return J(Q,K)},Ee=v==="week"?Ct:De,we=(Q,K,ie)=>{ee({isOpen:!0,type:Q,day:K||"",classId:ie||""})},xe=async()=>{let Q=[...m];at.type==="clearAll"?Q=[]:at.type==="clearDay"&&at.day?Q=Q.filter(K=>K.day!==at.day):at.type==="clearClass"&&at.classId&&(Q=Q.filter(K=>K.classId!==at.classId)),await y(Q),ee({isOpen:!1,type:"",day:"",classId:""}),Ze(!1)},Ve=(Q,K,ie)=>t&&Q.length===0?null:o.jsxs("div",{className:"h-full flex flex-col gap-1",children:[Q.map(te=>{const ce=r.find(ut=>ut.id===te.subjectId),oe=n.find(ut=>ut.id===te.teacherId),ge=s.find(ut=>ut.id===te.classId),ve=me(te),Ke=A.find(ut=>ut.id===te.roomId),yt=Ke?Ke.name:te.roomId;return o.jsxs("div",{draggable:!t,onDragStart:t?void 0:ut=>Fe(ut,te),onDragEnd:t?void 0:st,onClick:t?void 0:()=>Ae(te),onContextMenu:t?void 0:ut=>je(ut,te,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${ve.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:ve.length===0&&(ce!=null&&ce.color)?{backgroundColor:`${ce.color}40`}:{},children:[o.jsxs("div",{className:"flex justify-between items-center gap-1",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:v==="subject"||v==="week"?ge==null?void 0:ge.name:ce==null?void 0:ce.name}),te.direction&&o.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:te.direction})]}),v==="week"&&o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:ce==null?void 0:ce.name}),o.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[o.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:oe==null?void 0:oe.name,children:[o.jsx(M,{name:v==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),o.jsx("span",{className:"truncate",children:v==="teacher"?ge==null?void 0:ge.name:oe==null?void 0:oe.name})]}),yt&&o.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Ke?`: ${Ke.capacity}, : ${Ke.type}`:"",children:yt})]}),ve.length>0&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${ve.join(", ")}`,children:"!"})]},te.id)}),!t&&Q.length<3&&o.jsx("button",{onClick:()=>ae(ie,typeof K=="number"?K:parseInt(ie),v==="week"?K:C),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:o.jsx(M,{name:"Plus",size:16})})]}),ye=()=>{if(!B)return o.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const Q=m.filter(K=>K.day===C&&K.shift===w&&(v==="class"&&K.classId===B||v==="teacher"&&K.teacherId===B||v==="subject"&&K.subjectId===B)).sort((K,ie)=>K.period-ie.period);return Q.length===0?o.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",C,"  ",w,"."]}):o.jsx("div",{className:"p-4 space-y-4",children:Q.map(K=>{const ie=r.find(Ke=>Ke.id===K.subjectId),te=n.find(Ke=>Ke.id===K.teacherId),ce=s.find(Ke=>Ke.id===K.classId),oe=A.find(Ke=>Ke.id===K.roomId),ge=oe?oe.name:K.roomId,ve=me(K);return o.jsxs("div",{onClick:t?void 0:()=>Ae(K),className:`rounded-xl p-4 shadow-sm border ${ve.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[K.period," "]}),ve.length>0&&o.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${ve.join(", ")}`,children:"!"})]}),o.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ie==null?void 0:ie.name," ",K.direction&&`(${K.direction})`]}),o.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ce==null?void 0:ce.name,"  ",te==null?void 0:te.name]}),ge&&o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",ge]})]},K.id)})})};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Je.visible&&o.jsx(qO,{x:Je.x,y:Je.y,onClose:()=>se({...Je,visible:!1}),actions:be}),o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[o.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>E(le.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${w===le.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>E(le.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${w===le.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),v!=="week"&&o.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Ct.map(Q=>o.jsx("button",{onClick:()=>x(Q),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${C===Q?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Q},Q))}),!t&&o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:o.jsx(M,{name:"RotateCcw",size:18})}),o.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:o.jsx(M,{name:"RotateCw",size:18})})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>{b("class"),F("")},className:`p-2 rounded-md ${v==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(M,{name:"GraduationCap",size:18})}),o.jsx("button",{onClick:()=>{b("teacher"),F("")},className:`p-2 rounded-md ${v==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(M,{name:"Users",size:18})}),o.jsx("button",{onClick:()=>{b("subject"),F("")},className:`p-2 rounded-md ${v==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(M,{name:"BookOpen",size:18})}),o.jsx("button",{onClick:()=>{var Q;b("week"),F(((Q=s[0])==null?void 0:Q.id)||"")},className:`p-2 rounded-md ${v==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:o.jsx(M,{name:"Calendar",size:18})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[o.jsx(M,{name:"Filter",size:16,className:"text-slate-400"}),o.jsxs("select",{value:B,onChange:Q=>F(Q.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[o.jsxs("option",{value:"",children:[" ",v==="class"?"":v==="teacher"?"":v==="week"?" ()":""]}),(v==="class"||v==="week")&&s.filter(Q=>Q.shift===w).map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id)),v==="teacher"&&n.map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id)),v==="subject"&&r.map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),o.jsx("input",{placeholder:"...",value:D,onChange:Q=>P(Q.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),o.jsx("input",{placeholder:"...",value:I,onChange:Q=>ze(Q.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&o.jsxs("button",{onClick:()=>Ze(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[o.jsx(M,{name:"List",size:16})," . ."]}),(B||v==="week")&&o.jsx("button",{onClick:()=>At(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:o.jsx(M,{name:"Printer",size:16})})]})]}),X&&!t&&B&&o.jsx("div",{className:"flex justify-center mb-4 no-print",children:o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>et(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${it?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:o.jsx(M,{name:"Columns",size:16})}),o.jsx("button",{onClick:()=>et(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${it?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:o.jsx(M,{name:"Rows",size:16})})]})}),o.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:o.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:X&&it&&!t&&B?ye():o.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:v==="week"?"":v==="class"?"":v==="teacher"?"":""}),Ee.map(Q=>o.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:v==="week"?Q:`${Q} `},Q))]})}),o.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Be.length>0?Be.map(Q=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:Q.name}),Ee.map(K=>{const ie=J(Q.id,K),te=`${Q.id}-${K}`,ce={rowId:Q.id,colKey:K};return o.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${$e===te?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:oe=>je(oe,null,ce),onDragOver:t?void 0:oe=>tt(oe,ce),onDrop:t?void 0:oe=>ht(oe,ce),children:Ve(ie,K,Q.id)},K)})]},Q.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),o.jsx(Cn,{isOpen:_,onClose:()=>S(!1),title:U.id?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[o.jsxs("span",{children:[": ",U.day]}),o.jsxs("span",{children:[": ",U.period]}),o.jsxs("span",{children:[": ",U.shift===le.First?"1 ":"2 "]})]}),Ye.length>0&&o.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Ye.map(Q=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(M,{name:"AlertTriangle",size:14}),Q]},Q))}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(ac,{options:s.filter(Q=>Q.shift===w).map(Q=>({value:Q.id,label:Q.name})),value:U.classId||null,onChange:Q=>{N({...U,classId:Q}),Ue({...U,classId:Q})},placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(ac,{options:r.map(Q=>({value:Q.id,label:Q.name})),value:U.subjectId||null,onChange:Q=>{N({...U,subjectId:Q}),Ue({...U,subjectId:Q})},placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(ac,{options:[{label:"",options:qe.map(Q=>({value:Q.id,label:Q.name}))},{label:"",options:lt.map(Q=>({value:Q.id,label:Q.name}))}],value:U.teacherId||null,onChange:Q=>N({...U,teacherId:Q}),placeholder:" ",groupBy:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:U.direction||"",onChange:Q=>N({...U,direction:Q.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:U.roomId||"",onChange:Q=>{N({...U,roomId:Q.target.value}),Ue({...U,roomId:Q.target.value})},children:[o.jsx("option",{value:"",children:" "}),A.map(Q=>o.jsxs("option",{value:Q.id,children:[Q.name," (",Q.capacity," )"]},Q.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[U.id&&o.jsx("button",{onClick:()=>Qe(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),o.jsx("button",{onClick:_e,className:"btn-primary btn-ripple",children:""})]})]})}),o.jsx(Cn,{isOpen:ot,onClose:()=>Ze(!1),title:"   ",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),o.jsx("button",{onClick:()=>we("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),o.jsx("div",{className:"flex gap-2",children:o.jsx("select",{value:R,onChange:Q=>L(Q.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Ct.map(Q=>o.jsx("option",{value:Q,children:Q},Q))})}),o.jsxs("button",{onClick:()=>we("clearDay",R),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",R]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{value:$,onChange:Q=>ne(Q.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[o.jsx("option",{value:"",disabled:!0,children:" "}),s.map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id))]})}),o.jsx("button",{onClick:()=>{$&&we("clearClass",void 0,$)},disabled:!$,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),o.jsxs(Cn,{isOpen:at.isOpen,onClose:()=>ee({...at,isOpen:!1}),title:"",children:[o.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>ee({...at,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),o.jsx("button",{onClick:xe,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),Le&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[o.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[o.jsx(M,{name:"Printer",size:16})," "]}),o.jsx("button",{onClick:()=>At(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:o.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:It}),o.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),o.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:j||v==="week"?"":v==="class"?"":v==="teacher"?"":""}),q.map(Q=>o.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:j||v==="week"?Q:`${Q} `},Q))]})}),o.jsx("tbody",{children:Z.map(Q=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:Q.name}),q.map(K=>{const ie=V(Q.id,K);return o.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ie.map(te=>{const ce=r.find(Et=>Et.id===te.subjectId),oe=n.find(Et=>Et.id===te.teacherId),ge=s.find(Et=>Et.id===te.classId),ve=A.find(Et=>Et.id===te.roomId),Ke=ve?ve.name:te.roomId,yt=v==="teacher",Jt=v==="subject"||v==="week"||j&&yt?ge==null?void 0:ge.name:ce==null?void 0:ce.name,Fr=yt?ge==null?void 0:ge.name:oe==null?void 0:oe.name;return o.jsxs("div",{className:"mb-1",children:[o.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Jt,te.direction&&` (${te.direction})`]}),o.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[o.jsx("span",{children:Fr}),Ke&&o.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Ke})]})]},te.id)})},K)})]},Q.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f0=function(t,e){return f0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},f0(t,e)};function ts(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var g0=function(){return g0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},g0.apply(this,arguments)};function en(t,e,r,n){function s(A){return A instanceof r?A:new r(function(i){i(A)})}return new(r||(r=Promise))(function(A,i){function l(d){try{c(n.next(d))}catch(h){i(h)}}function a(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(l,a)}c((n=n.apply(t,[])).next())})}function Gr(t,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,s,A,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return a([c,d])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){r.label=c[1];break}if(c[0]===6&&r.label<A[1]){r.label=A[1],A=c;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(c);break}A[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function cd(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,A;n<s;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||e)}var Ks=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),hg=function(t,e){return Ks.fromClientRect(t,e.getBoundingClientRect())},sH=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Ks(0,0,n,s)},fg=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},Ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ud=0;ud<Ob.length;ud++)AH[Ob.charCodeAt(ud)]=ud;var Hb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var dd=0;dd<Hb.length;dd++)Pl[Hb.charCodeAt(dd)]=dd;var iH=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Pl[t.charCodeAt(n)],i=Pl[t.charCodeAt(n+1)],l=Pl[t.charCodeAt(n+2)],a=Pl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|l>>2,d[s++]=(l&3)<<6|a&63;return c},oH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},aH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Oi=5,$x=11,xp=2,lH=$x-Oi,tF=65536>>Oi,cH=1<<Oi,yp=cH-1,uH=1024>>Oi,dH=tF+uH,hH=dH,fH=32,gH=hH+fH,pH=65536>>$x,mH=1<<lH,wH=mH-1,Vb=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},xH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},yH=function(t,e){var r=iH(t),n=Array.isArray(r)?aH(r):new Uint32Array(r),s=Array.isArray(r)?oH(r):new Uint16Array(r),A=24,i=Vb(s,A/2,n[4]/2),l=n[5]===2?Vb(s,(A+n[4])/2):xH(n,Math.ceil((A+n[4])/4));return new vH(n[0],n[1],n[2],n[3],i,l)},vH=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Oi],r=(r<<xp)+(e&yp),this.data[r];if(e<=65535)return r=this.index[tF+(e-55296>>Oi)],r=(r<<xp)+(e&yp),this.data[r];if(e<this.highStart)return r=gH-pH+(e>>$x),r=this.index[r],r+=e>>Oi&wH,r=this.index[r],r=(r<<xp)+(e&yp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Kb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var hd=0;hd<Kb.length;hd++)BH[Kb.charCodeAt(hd)]=hd;var bH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Gb=50,CH=1,rF=2,nF=3,_H=4,IH=5,zb=7,sF=8,$b=9,EA=10,p0=11,Wb=12,m0=13,EH=14,Ll=15,w0=16,fd=17,Cl=18,TH=19,qb=20,x0=21,_l=22,vp=23,bo=24,xn=25,Ml=26,Ol=27,Co=28,kH=29,Ui=30,FH=31,gd=32,pd=33,y0=34,v0=35,B0=36,Wc=37,b0=38,Ah=39,ih=40,Bp=41,AF=42,SH=43,UH=[9001,65288],iF="!",pt="",md="",C0=yH(bH),vs=[Ui,B0],_0=[CH,rF,nF,IH],oF=[EA,sF],Xb=[Ol,Ml],QH=_0.concat(oF),Jb=[b0,Ah,ih,y0,v0],NH=[Ll,m0],RH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(A,i){var l=C0.get(A);if(l>Gb?(s.push(!0),l-=Gb):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(i),r.push(w0);if(l===_H||l===p0){if(i===0)return n.push(i),r.push(Ui);var a=r[i-1];return QH.indexOf(a)===-1?(n.push(n[i-1]),r.push(a)):(n.push(i),r.push(Ui))}if(n.push(i),l===FH)return r.push(e==="strict"?x0:Wc);if(l===AF||l===kH)return r.push(Ui);if(l===SH)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(Wc):r.push(Ui);r.push(l)}),[n,r,s]},bp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=r;A<=n.length;){A++;var i=n[A];if(i===e)return!0;if(i!==EA)break}if(s===EA)for(var A=r;A>0;){A--;var l=n[A];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var a=r;a<=n.length;){a++;var i=n[a];if(i===e)return!0;if(i!==EA)break}if(l!==EA)break}return!1},Yb=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===EA)r--;else return n}return 0},DH=function(t,e,r,n,s){if(r[n]===0)return pt;var A=n-1;if(Array.isArray(s)&&s[A]===!0)return pt;var i=A-1,l=A+1,a=e[A],c=i>=0?e[i]:0,d=e[l];if(a===rF&&d===nF)return pt;if(_0.indexOf(a)!==-1)return iF;if(_0.indexOf(d)!==-1||oF.indexOf(d)!==-1)return pt;if(Yb(A,e)===sF)return md;if(C0.get(t[A])===p0||(a===gd||a===pd)&&C0.get(t[l])===p0||a===zb||d===zb||a===$b||[EA,m0,Ll].indexOf(a)===-1&&d===$b||[fd,Cl,TH,bo,Co].indexOf(d)!==-1||Yb(A,e)===_l||bp(vp,_l,A,e)||bp([fd,Cl],x0,A,e)||bp(Wb,Wb,A,e))return pt;if(a===EA)return md;if(a===vp||d===vp)return pt;if(d===w0||a===w0)return md;if([m0,Ll,x0].indexOf(d)!==-1||a===EH||c===B0&&NH.indexOf(a)!==-1||a===Co&&d===B0||d===qb||vs.indexOf(d)!==-1&&a===xn||vs.indexOf(a)!==-1&&d===xn||a===Ol&&[Wc,gd,pd].indexOf(d)!==-1||[Wc,gd,pd].indexOf(a)!==-1&&d===Ml||vs.indexOf(a)!==-1&&Xb.indexOf(d)!==-1||Xb.indexOf(a)!==-1&&vs.indexOf(d)!==-1||[Ol,Ml].indexOf(a)!==-1&&(d===xn||[_l,Ll].indexOf(d)!==-1&&e[l+1]===xn)||[_l,Ll].indexOf(a)!==-1&&d===xn||a===xn&&[xn,Co,bo].indexOf(d)!==-1)return pt;if([xn,Co,bo,fd,Cl].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===xn)return pt;if([Co,bo].indexOf(f)!==-1)h--;else break}if([Ol,Ml].indexOf(d)!==-1)for(var h=[fd,Cl].indexOf(a)!==-1?i:A;h>=0;){var f=e[h];if(f===xn)return pt;if([Co,bo].indexOf(f)!==-1)h--;else break}if(b0===a&&[b0,Ah,y0,v0].indexOf(d)!==-1||[Ah,y0].indexOf(a)!==-1&&[Ah,ih].indexOf(d)!==-1||[ih,v0].indexOf(a)!==-1&&d===ih||Jb.indexOf(a)!==-1&&[qb,Ml].indexOf(d)!==-1||Jb.indexOf(d)!==-1&&a===Ol||vs.indexOf(a)!==-1&&vs.indexOf(d)!==-1||a===bo&&vs.indexOf(d)!==-1||vs.concat(xn).indexOf(a)!==-1&&d===_l&&UH.indexOf(t[l])===-1||vs.concat(xn).indexOf(d)!==-1&&a===Cl)return pt;if(a===Bp&&d===Bp){for(var m=r[A],y=1;m>0&&(m--,e[m]===Bp);)y++;if(y%2!==0)return pt}return a===gd&&d===pd?pt:md},jH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=RH(t,e.lineBreak),n=r[0],s=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(l){return[xn,Ui,AF].indexOf(l)!==-1?Wc:l}));var i=e.wordBreak==="keep-all"?A.map(function(l,a){return l&&t[a]>=19968&&t[a]<=40959}):void 0;return[n,s,i]},PH=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===iF,this.start=n,this.end=s}return t.prototype.slice=function(){return ar.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),LH=function(t,e){var r=fg(t),n=jH(r,e),s=n[0],A=n[1],i=n[2],l=r.length,a=0,c=0;return{next:function(){if(c>=l)return{done:!0,value:null};for(var d=pt;c<l&&(d=DH(r,A,s,++c,i))===pt;);if(d!==pt||c===l){var h=new PH(r,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},MH=1,OH=2,Cu=4,Zb=8,sf=10,eC=47,lc=92,HH=9,VH=32,wd=34,Il=61,KH=35,GH=36,zH=37,xd=39,yd=40,El=41,$H=95,ln=45,WH=33,qH=60,XH=62,JH=64,YH=91,ZH=93,eV=61,tV=123,vd=63,rV=125,tC=124,nV=126,sV=128,rC=65533,Cp=42,Di=43,AV=44,iV=58,oV=59,qc=46,aV=0,lV=8,cV=11,uV=14,dV=31,hV=127,ss=-1,aF=48,lF=97,cF=101,fV=102,gV=117,pV=122,uF=65,dF=69,hF=70,mV=85,wV=90,Wr=function(t){return t>=aF&&t<=57},xV=function(t){return t>=55296&&t<=57343},_o=function(t){return Wr(t)||t>=uF&&t<=hF||t>=lF&&t<=fV},yV=function(t){return t>=lF&&t<=pV},vV=function(t){return t>=uF&&t<=wV},BV=function(t){return yV(t)||vV(t)},bV=function(t){return t>=sV},Bd=function(t){return t===sf||t===HH||t===VH},Af=function(t){return BV(t)||bV(t)||t===$H},nC=function(t){return Af(t)||Wr(t)||t===ln},CV=function(t){return t>=aV&&t<=lV||t===cV||t>=uV&&t<=dV||t===hV},dA=function(t,e){return t!==lc?!1:e!==sf},bd=function(t,e,r){return t===ln?Af(e)||dA(e,r):Af(t)?!0:!!(t===lc&&dA(t,e))},_p=function(t,e,r){return t===Di||t===ln?Wr(e)?!0:e===qc&&Wr(r):Wr(t===qc?e:t)},_V=function(t){var e=0,r=1;(t[e]===Di||t[e]===ln)&&(t[e]===ln&&(r=-1),e++);for(var n=[];Wr(t[e]);)n.push(t[e++]);var s=n.length?parseInt(ar.apply(void 0,n),10):0;t[e]===qc&&e++;for(var A=[];Wr(t[e]);)A.push(t[e++]);var i=A.length,l=i?parseInt(ar.apply(void 0,A),10):0;(t[e]===dF||t[e]===cF)&&e++;var a=1;(t[e]===Di||t[e]===ln)&&(t[e]===ln&&(a=-1),e++);for(var c=[];Wr(t[e]);)c.push(t[e++]);var d=c.length?parseInt(ar.apply(void 0,c),10):0;return r*(s+l*Math.pow(10,-i))*Math.pow(10,a*d)},IV={type:2},EV={type:3},TV={type:4},kV={type:13},FV={type:8},SV={type:21},UV={type:9},QV={type:10},NV={type:11},RV={type:12},DV={type:14},Cd={type:23},jV={type:1},PV={type:25},LV={type:24},MV={type:26},OV={type:27},HV={type:28},VV={type:29},KV={type:31},I0={type:32},fF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(fg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==I0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case wd:return this.consumeStringToken(wd);case KH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(nC(r)||dA(n,s)){var A=bd(r,n,s)?OH:MH,i=this.consumeName();return{type:5,value:i,flags:A}}break;case GH:if(this.peekCodePoint(0)===Il)return this.consumeCodePoint(),kV;break;case xd:return this.consumeStringToken(xd);case yd:return IV;case El:return EV;case Cp:if(this.peekCodePoint(0)===Il)return this.consumeCodePoint(),DV;break;case Di:if(_p(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case AV:return TV;case ln:var l=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(_p(l,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(bd(l,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===ln&&c===XH)return this.consumeCodePoint(),this.consumeCodePoint(),LV;break;case qc:if(_p(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case eC:if(this.peekCodePoint(0)===Cp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Cp&&(d=this.consumeCodePoint(),d===eC))return this.consumeToken();if(d===ss)return this.consumeToken()}break;case iV:return MV;case oV:return OV;case qH:if(this.peekCodePoint(0)===WH&&this.peekCodePoint(1)===ln&&this.peekCodePoint(2)===ln)return this.consumeCodePoint(),this.consumeCodePoint(),PV;break;case JH:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(bd(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case YH:return HV;case lc:if(dA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ZH:return VV;case eV:if(this.peekCodePoint(0)===Il)return this.consumeCodePoint(),FV;break;case tV:return NV;case rV:return RV;case gV:case mV:var y=this.peekCodePoint(0),w=this.peekCodePoint(1);return y===Di&&(_o(w)||w===vd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case tC:if(this.peekCodePoint(0)===Il)return this.consumeCodePoint(),UV;if(this.peekCodePoint(0)===tC)return this.consumeCodePoint(),SV;break;case nV:if(this.peekCodePoint(0)===Il)return this.consumeCodePoint(),QV;break;case ss:return I0}return Bd(e)?(this.consumeWhiteSpace(),KV):Wr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Af(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ar(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();_o(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===vd&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(ar.apply(void 0,e.map(function(a){return a===vd?aF:a})),16),A=parseInt(ar.apply(void 0,e.map(function(a){return a===vd?hF:a})),16);return{type:30,start:s,end:A}}var i=parseInt(ar.apply(void 0,e),16);if(this.peekCodePoint(0)===ln&&_o(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];_o(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var A=parseInt(ar.apply(void 0,l),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===yd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===yd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ss)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===xd||r===wd){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ss||this.peekCodePoint(0)===El)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Cd)}for(;;){var s=this.consumeCodePoint();if(s===ss||s===El)return{type:22,value:ar.apply(void 0,e)};if(Bd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ss||this.peekCodePoint(0)===El?(this.consumeCodePoint(),{type:22,value:ar.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Cd);if(s===wd||s===xd||s===yd||CV(s))return this.consumeBadUrlRemnants(),Cd;if(s===lc)if(dA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Cd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Bd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===El||e===ss)return;dA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=ar.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===ss||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===sf)return this._value.splice(0,n),jV;if(s===lc){var A=this._value[n+1];A!==ss&&A!==void 0&&(A===sf?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):dA(s,A)&&(r+=this.consumeStringSlice(n),r+=ar(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Cu,n=this.peekCodePoint(0);for((n===Di||n===ln)&&e.push(this.consumeCodePoint());Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===qc&&Wr(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Zb;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===dF||n===cF)&&((s===Di||s===ln)&&Wr(A)||Wr(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Zb;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[_V(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(bd(s,A,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return s===zH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(_o(e)){for(var r=ar(e);_o(this.peekCodePoint(0))&&r.length<6;)r+=ar(this.consumeCodePoint());Bd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||xV(n)||n>1114111?rC:n}return e===ss?rC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(nC(r))e+=ar(r);else if(dA(r,this.peekCodePoint(0)))e+=ar(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),gF=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new fF;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||zV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?I0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),_u=function(t){return t.type===15},Za=function(t){return t.type===17},Ft=function(t){return t.type===20},GV=function(t){return t.type===0},E0=function(t,e){return Ft(t)&&t.value===e},pF=function(t){return t.type!==31},Qa=function(t){return t.type!==31&&t.type!==4},ms=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},zV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ni=function(t){return t.type===17||t.type===15},hr=function(t){return t.type===16||ni(t)},mF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Dr={type:17,number:0,flags:Cu},Wx={type:16,number:50,flags:Cu},TA={type:16,number:100,flags:Cu},Hl=function(t,e,r){var n=t[0],s=t[1];return[jt(n,e),jt(typeof s<"u"?s:n,r)]},jt=function(t,e){if(t.type===16)return t.number/100*e;if(_u(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},wF="deg",xF="grad",yF="rad",vF="turn",gg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case wF:return Math.PI*e.number/180;case xF:return Math.PI/200*e.number;case yF:return e.number;case vF:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},BF=function(t){return t.type===15&&(t.unit===wF||t.unit===xF||t.unit===yF||t.unit===vF)},bF=function(t){var e=t.filter(Ft).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Dr,Dr];case"to top":case"bottom":return jn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Dr,TA];case"to right":case"left":return jn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[TA,TA];case"to bottom":case"top":return jn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[TA,Dr];case"to left":case"right":return jn(270)}return 0},jn=function(t){return Math.PI*t/180},VA={name:"color",parse:function(t,e){if(e.type===18){var r=$V[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return kA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return kA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return kA(parseInt(n,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return kA(parseInt(n,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var l=Rs[e.value.toUpperCase()];if(typeof l<"u")return l}return Rs.TRANSPARENT}},KA=function(t){return(255&t)===0},br=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},kA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},sC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},AC=function(t,e){var r=e.filter(Qa);if(r.length===3){var n=r.map(sC),s=n[0],A=n[1],i=n[2];return kA(s,A,i,1)}if(r.length===4){var l=r.map(sC),s=l[0],A=l[1],i=l[2],a=l[3];return kA(s,A,i,a)}return 0};function Ip(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var iC=function(t,e){var r=e.filter(Qa),n=r[0],s=r[1],A=r[2],i=r[3],l=(n.type===17?jn(n.number):gg.parse(t,n))/(Math.PI*2),a=hr(s)?s.number/100:0,c=hr(A)?A.number/100:0,d=typeof i<"u"&&hr(i)?jt(i,1):1;if(a===0)return kA(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,m=Ip(f,h,l+1/3),y=Ip(f,h,l),w=Ip(f,h,l-1/3);return kA(m*255,y*255,w*255,d)},$V={hsl:iC,hsla:iC,rgb:AC,rgba:AC},cc=function(t,e){return VA.parse(t,gF.create(e).parseComponentValue())},Rs={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},WV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ft(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},qV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pg=function(t,e){var r=VA.parse(t,e[0]),n=e[1];return n&&hr(n)?{color:r,stop:n}:{color:r,stop:null}},oC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Dr),n.stop===null&&(n.stop=TA);for(var s=[],A=0,i=0;i<t.length;i++){var l=t[i].stop;if(l!==null){var a=jt(l,e);a>A?s.push(a):s.push(A),A=a}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],m=(d-f)/(h+1),y=1;y<=h;y++)s[c+y-1]=m*y;c=null}}return t.map(function(w,E){var C=w.color;return{color:C,stop:Math.max(Math.min(1,s[E]/e),0)}})},XV=function(t,e,r){var n=e/2,s=r/2,A=jt(t[0],e)-n,i=s-jt(t[1],r);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},JV=function(t,e,r){var n=typeof t=="number"?t:XV(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,i=r/2,l=s/2,a=Math.sin(n-Math.PI/2)*l,c=Math.cos(n-Math.PI/2)*l;return[s,A-c,A+c,i-a,i+a]},Gn=function(t,e){return Math.sqrt(t*t+e*e)},aC=function(t,e,r,n,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,l){var a=l[0],c=l[1],d=Gn(r-a,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},YV=function(t,e,r,n,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)A=i=Math.min(Gn(e,r),Gn(e,r-s),Gn(e-n,r),Gn(e-n,r-s));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),a=aC(n,s,e,r,!0),c=a[0],d=a[1];A=Gn(c-e,(d-r)/l),i=l*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)A=i=Math.max(Gn(e,r),Gn(e,r-s),Gn(e-n,r),Gn(e-n,r-s));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=aC(n,s,e,r,!1),c=h[0],d=h[1];A=Gn(c-e,(d-r)/l),i=l*A}break}return Array.isArray(t.size)&&(A=jt(t.size[0],n),i=t.size.length===2?jt(t.size[1],s):A),[A,i]},ZV=function(t,e){var r=jn(180),n=[];return ms(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){r=bF(s);return}else if(BF(i)){r=gg.parse(t,i);return}}var l=pg(t,s);n.push(l)}),{angle:r,stops:n,type:1}},_d=function(t,e){var r=jn(180),n=[];return ms(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=bF(s);return}else if(BF(i)){r=(gg.parse(t,i)+jn(270))%jn(360);return}}var l=pg(t,s);n.push(l)}),{angle:r,stops:n,type:1}},e3=function(t,e){var r=jn(180),n=[],s=1,A=0,i=3,l=[];return ms(e).forEach(function(a,c){var d=a[0];if(c===0){if(Ft(d)&&d.value==="linear"){s=1;return}else if(Ft(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=VA.parse(t,d.values[0]);n.push({stop:Dr,color:h})}else if(d.name==="to"){var h=VA.parse(t,d.values[0]);n.push({stop:TA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Qa);if(f.length===2){var h=VA.parse(t,f[1]),m=f[0];Za(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),s===1?{angle:(r+jn(180))%jn(360),stops:n,type:s}:{size:i,shape:A,stops:n,position:l,type:s}},CF="closest-side",_F="farthest-side",IF="closest-corner",EF="farthest-corner",TF="circle",kF="ellipse",FF="cover",SF="contain",t3=function(t,e){var r=0,n=3,s=[],A=[];return ms(e).forEach(function(i,l){var a=!0;if(l===0){var c=!1;a=i.reduce(function(h,f){if(c)if(Ft(f))switch(f.value){case"center":return A.push(Wx),h;case"top":case"left":return A.push(Dr),h;case"right":case"bottom":return A.push(TA),h}else(hr(f)||ni(f))&&A.push(f);else if(Ft(f))switch(f.value){case TF:return r=0,!1;case kF:return r=1,!1;case"at":return c=!0,!1;case CF:return n=0,!1;case FF:case _F:return n=1,!1;case SF:case IF:return n=2,!1;case EF:return n=3,!1}else if(ni(f)||hr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},a)}if(a){var d=pg(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:A,type:2}},Id=function(t,e){var r=0,n=3,s=[],A=[];return ms(e).forEach(function(i,l){var a=!0;if(l===0?a=i.reduce(function(d,h){if(Ft(h))switch(h.value){case"center":return A.push(Wx),!1;case"top":case"left":return A.push(Dr),!1;case"right":case"bottom":return A.push(TA),!1}else if(hr(h)||ni(h))return A.push(h),!1;return d},a):l===1&&(a=i.reduce(function(d,h){if(Ft(h))switch(h.value){case TF:return r=0,!1;case kF:return r=1,!1;case SF:case CF:return n=0,!1;case _F:return n=1,!1;case IF:return n=2,!1;case FF:case EF:return n=3,!1}else if(ni(h)||hr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},a)),a){var c=pg(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:A,type:2}},r3=function(t){return t.type===1},n3=function(t){return t.type===2},qx={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=UF[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function s3(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!UF[t.name])}var UF={"linear-gradient":ZV,"-moz-linear-gradient":_d,"-ms-linear-gradient":_d,"-o-linear-gradient":_d,"-webkit-linear-gradient":_d,"radial-gradient":t3,"-moz-radial-gradient":Id,"-ms-radial-gradient":Id,"-o-radial-gradient":Id,"-webkit-radial-gradient":Id,"-webkit-gradient":e3},A3={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Qa(n)&&s3(n)}).map(function(n){return qx.parse(t,n)})}},i3={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ft(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},o3={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ms(e).map(function(r){return r.filter(hr)}).map(mF)}},a3={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ms(e).map(function(r){return r.filter(Ft).map(function(n){return n.value}).join(" ")}).map(l3)}},l3=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},oa;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(oa||(oa={}));var c3={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ms(e).map(function(r){return r.filter(u3)})}},u3=function(t){return Ft(t)||hr(t)},mg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},d3=mg("top"),h3=mg("right"),f3=mg("bottom"),g3=mg("left"),wg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return mF(r.filter(hr))}}},p3=wg("top-left"),m3=wg("top-right"),w3=wg("bottom-right"),x3=wg("bottom-left"),xg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},y3=xg("top"),v3=xg("right"),B3=xg("bottom"),b3=xg("left"),yg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return _u(r)?r.number:0}}},C3=yg("top"),_3=yg("right"),I3=yg("bottom"),E3=yg("left"),T3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},F3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ft).reduce(function(r,n){return r|S3(n.value)},0)}},S3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},U3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Q3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},of;(function(t){t.NORMAL="normal",t.STRICT="strict"})(of||(of={}));var N3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return of.STRICT;case"normal":default:return of.NORMAL}}},R3={name:"line-height",initialValue:"normal",prefix:!1,type:4},lC=function(t,e){return Ft(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:hr(t)?jt(t,e):e},D3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:qx.parse(t,e)}},j3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},T0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},vg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},P3=vg("top"),L3=vg("right"),M3=vg("bottom"),O3=vg("left"),H3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ft).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},V3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Bg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},K3=Bg("top"),G3=Bg("right"),z3=Bg("bottom"),$3=Bg("left"),W3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},q3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},X3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&E0(e[0],"none")?[]:ms(e).map(function(r){for(var n={color:Rs.TRANSPARENT,offsetX:Dr,offsetY:Dr,blur:Dr},s=0,A=0;A<r.length;A++){var i=r[A];ni(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=VA.parse(t,i)}return n})}},J3={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Y3={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=t5[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Z3=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},e5=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,s,A,i,l]:null},t5={matrix:Z3,matrix3d:e5},cC={type:16,number:50,flags:Cu},r5=[cC,cC],n5={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(hr);return r.length!==2?r5:[r[0],r[1]]}},s5={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},uc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(uc||(uc={}));var A5={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return uc.BREAK_ALL;case"keep-all":return uc.KEEP_ALL;case"normal":default:return uc.NORMAL}}},i5={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Za(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},QF={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},o5={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Za(e)?e.number:1}},a5={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},l5={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ft).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},c5={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},u5={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},d5={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Za(e))return e.number;if(Ft(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},h5={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ft).map(function(r){return r.value})}},f5={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mr=function(t,e){return(t&e)!==0},g5={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},p5={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(pF),A=0;A<s.length;A++){var i=s[A],l=s[A+1];if(i.type===20){var a=l&&Za(l)?l.number:1;n.push({counter:i.value,increment:a})}}return n}},m5={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(pF),s=0;s<n.length;s++){var A=n[s],i=n[s+1];if(Ft(A)&&A.value!=="none"){var l=i&&Za(i)?i.number:0;r.push({counter:A.value,reset:l})}}return r}},w5={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(_u).map(function(r){return QF.parse(t,r)})}},x5={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(GV);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,l=s[A+1].value;n.push({open:i,close:l})}return n}},uC=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},y5={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&E0(e[0],"none")?[]:ms(e).map(function(r){for(var n={color:255,offsetX:Dr,offsetY:Dr,blur:Dr,spread:Dr,inset:!1},s=0,A=0;A<r.length;A++){var i=r[A];E0(i,"inset")?n.inset=!0:ni(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=VA.parse(t,i)}return n})}},v5={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ft).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},B5={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},b5={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return _u(e)?e.number:0}},C5=function(){function t(e,r){var n,s;this.animationDuration=Me(e,w5,r.animationDuration),this.backgroundClip=Me(e,WV,r.backgroundClip),this.backgroundColor=Me(e,qV,r.backgroundColor),this.backgroundImage=Me(e,A3,r.backgroundImage),this.backgroundOrigin=Me(e,i3,r.backgroundOrigin),this.backgroundPosition=Me(e,o3,r.backgroundPosition),this.backgroundRepeat=Me(e,a3,r.backgroundRepeat),this.backgroundSize=Me(e,c3,r.backgroundSize),this.borderTopColor=Me(e,d3,r.borderTopColor),this.borderRightColor=Me(e,h3,r.borderRightColor),this.borderBottomColor=Me(e,f3,r.borderBottomColor),this.borderLeftColor=Me(e,g3,r.borderLeftColor),this.borderTopLeftRadius=Me(e,p3,r.borderTopLeftRadius),this.borderTopRightRadius=Me(e,m3,r.borderTopRightRadius),this.borderBottomRightRadius=Me(e,w3,r.borderBottomRightRadius),this.borderBottomLeftRadius=Me(e,x3,r.borderBottomLeftRadius),this.borderTopStyle=Me(e,y3,r.borderTopStyle),this.borderRightStyle=Me(e,v3,r.borderRightStyle),this.borderBottomStyle=Me(e,B3,r.borderBottomStyle),this.borderLeftStyle=Me(e,b3,r.borderLeftStyle),this.borderTopWidth=Me(e,C3,r.borderTopWidth),this.borderRightWidth=Me(e,_3,r.borderRightWidth),this.borderBottomWidth=Me(e,I3,r.borderBottomWidth),this.borderLeftWidth=Me(e,E3,r.borderLeftWidth),this.boxShadow=Me(e,y5,r.boxShadow),this.color=Me(e,T3,r.color),this.direction=Me(e,k3,r.direction),this.display=Me(e,F3,r.display),this.float=Me(e,U3,r.cssFloat),this.fontFamily=Me(e,c5,r.fontFamily),this.fontSize=Me(e,u5,r.fontSize),this.fontStyle=Me(e,f5,r.fontStyle),this.fontVariant=Me(e,h5,r.fontVariant),this.fontWeight=Me(e,d5,r.fontWeight),this.letterSpacing=Me(e,Q3,r.letterSpacing),this.lineBreak=Me(e,N3,r.lineBreak),this.lineHeight=Me(e,R3,r.lineHeight),this.listStyleImage=Me(e,D3,r.listStyleImage),this.listStylePosition=Me(e,j3,r.listStylePosition),this.listStyleType=Me(e,T0,r.listStyleType),this.marginTop=Me(e,P3,r.marginTop),this.marginRight=Me(e,L3,r.marginRight),this.marginBottom=Me(e,M3,r.marginBottom),this.marginLeft=Me(e,O3,r.marginLeft),this.opacity=Me(e,o5,r.opacity);var A=Me(e,H3,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=Me(e,V3,r.overflowWrap),this.paddingTop=Me(e,K3,r.paddingTop),this.paddingRight=Me(e,G3,r.paddingRight),this.paddingBottom=Me(e,z3,r.paddingBottom),this.paddingLeft=Me(e,$3,r.paddingLeft),this.paintOrder=Me(e,v5,r.paintOrder),this.position=Me(e,q3,r.position),this.textAlign=Me(e,W3,r.textAlign),this.textDecorationColor=Me(e,a5,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Me(e,l5,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Me(e,X3,r.textShadow),this.textTransform=Me(e,J3,r.textTransform),this.transform=Me(e,Y3,r.transform),this.transformOrigin=Me(e,n5,r.transformOrigin),this.visibility=Me(e,s5,r.visibility),this.webkitTextStrokeColor=Me(e,B5,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Me(e,b5,r.webkitTextStrokeWidth),this.wordBreak=Me(e,A5,r.wordBreak),this.zIndex=Me(e,i5,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return KA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return mr(this.display,4)||mr(this.display,33554432)||mr(this.display,268435456)||mr(this.display,536870912)||mr(this.display,67108864)||mr(this.display,134217728)},t}(),_5=function(){function t(e,r){this.content=Me(e,g5,r.content),this.quotes=Me(e,x5,r.quotes)}return t}(),dC=function(){function t(e,r){this.counterIncrement=Me(e,p5,r.counterIncrement),this.counterReset=Me(e,m5,r.counterReset)}return t}(),Me=function(t,e,r){var n=new fF,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var A=new gF(n.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,Ft(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return gg.parse(t,A.parseComponentValue());case"color":return VA.parse(t,A.parseComponentValue());case"image":return qx.parse(t,A.parseComponentValue());case"length":var l=A.parseComponentValue();return ni(l)?l:Dr;case"length-percentage":var a=A.parseComponentValue();return hr(a)?a:Dr;case"time":return QF.parse(t,A.parseComponentValue())}break}},I5="data-html2canvas-debug",E5=function(t){var e=t.getAttribute(I5);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},k0=function(t,e){var r=E5(t);return r===1||e===r},ws=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,k0(r,3))debugger;this.styles=new C5(e,window.getComputedStyle(r,null)),U0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=hg(this.context,r),k0(r,4)&&(this.flags|=16)}return t}(),T5="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",hC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ed=0;Ed<hC.length;Ed++)Vl[hC.charCodeAt(Ed)]=Ed;var k5=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Vl[t.charCodeAt(n)],i=Vl[t.charCodeAt(n+1)],l=Vl[t.charCodeAt(n+2)],a=Vl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|l>>2,d[s++]=(l&3)<<6|a&63;return c},F5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},S5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Hi=5,Xx=11,Ep=2,U5=Xx-Hi,NF=65536>>Hi,Q5=1<<Hi,Tp=Q5-1,N5=1024>>Hi,R5=NF+N5,D5=R5,j5=32,P5=D5+j5,L5=65536>>Xx,M5=1<<U5,O5=M5-1,fC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},H5=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},V5=function(t,e){var r=k5(t),n=Array.isArray(r)?S5(r):new Uint32Array(r),s=Array.isArray(r)?F5(r):new Uint16Array(r),A=24,i=fC(s,A/2,n[4]/2),l=n[5]===2?fC(s,(A+n[4])/2):H5(n,Math.ceil((A+n[4])/4));return new K5(n[0],n[1],n[2],n[3],i,l)},K5=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Hi],r=(r<<Ep)+(e&Tp),this.data[r];if(e<=65535)return r=this.index[NF+(e-55296>>Hi)],r=(r<<Ep)+(e&Tp),this.data[r];if(e<this.highStart)return r=P5-L5+(e>>Xx),r=this.index[r],r+=e>>Hi&O5,r=this.index[r],r=(r<<Ep)+(e&Tp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),gC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Td=0;Td<gC.length;Td++)G5[gC.charCodeAt(Td)]=Td;var z5=1,kp=2,Fp=3,pC=4,mC=5,$5=7,wC=8,Sp=9,Up=10,xC=11,yC=12,vC=13,BC=14,Qp=15,W5=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},q5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},X5=V5(T5),Sn="",Np="",J5=function(t){return X5.get(t)},Y5=function(t,e,r){var n=r-2,s=e[n],A=e[r-1],i=e[r];if(A===kp&&i===Fp)return Sn;if(A===kp||A===Fp||A===pC||i===kp||i===Fp||i===pC)return Np;if(A===wC&&[wC,Sp,xC,yC].indexOf(i)!==-1||(A===xC||A===Sp)&&(i===Sp||i===Up)||(A===yC||A===Up)&&i===Up||i===vC||i===mC||i===$5||A===z5)return Sn;if(A===vC&&i===BC){for(;s===mC;)s=e[--n];if(s===BC)return Sn}if(A===Qp&&i===Qp){for(var l=0;s===Qp;)l++,s=e[--n];if(l%2===0)return Sn}return Np},Z5=function(t){var e=W5(t),r=e.length,n=0,s=0,A=e.map(J5);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Sn;n<r&&(i=Y5(e,A,++n))===Sn;);if(i!==Sn||n===r){var l=q5.apply(null,e.slice(s,n));return s=n,{value:l,done:!1}}return{done:!0,value:null}}}},eK=function(t){for(var e=Z5(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},tK=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(n),A===e)return!0}}return!1},rK=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=fg(n.data).map(function(a){return ar(a)}),A=0,i={},l=s.every(function(a,c){r.setStart(n,A),r.setEnd(n,A+a.length);var d=r.getBoundingClientRect();A+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),l},nK=function(){return typeof new Image().crossOrigin<"u"},sK=function(){return typeof new XMLHttpRequest().responseType=="string"},AK=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},bC=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},iK=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,A=e.toDataURL();s.src=A;var i=F0(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),CC(i).then(function(l){n.drawImage(l,0,0);var a=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=r+"px",bC(a)?CC(F0(r,r,0,0,c)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),bC(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},F0=function(t,e,r,n,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),l=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(s),i},CC=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Qr={get SUPPORT_RANGE_BOUNDS(){var t=tK(document);return Object.defineProperty(Qr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Qr.SUPPORT_RANGE_BOUNDS&&rK(document);return Object.defineProperty(Qr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=AK(document);return Object.defineProperty(Qr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?iK(document):Promise.resolve(!1);return Object.defineProperty(Qr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=nK();return Object.defineProperty(Qr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=sK();return Object.defineProperty(Qr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},dc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),oK=function(t,e,r,n){var s=cK(e,r),A=[],i=0;return s.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Qr.SUPPORT_RANGE_BOUNDS){var a=_C(n,i,l.length).getClientRects();if(a.length>1){var c=Jx(l),d=0;c.forEach(function(f){A.push(new dc(f,Ks.fromDOMRectList(t,_C(n,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new dc(l,Ks.fromDOMRectList(t,a)))}else{var h=n.splitText(l.length);A.push(new dc(l,aK(t,n))),n=h}else Qr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),A},aK=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var A=hg(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),A}}return Ks.EMPTY},_C=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},Jx=function(t){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return eK(t)},lK=function(t,e){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return dK(t,e)},cK=function(t,e){return e.letterSpacing!==0?Jx(t):lK(t,e)},uK=[32,160,4961,65792,65793,4153,4241],dK=function(t,e){for(var r=LH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,A=function(){if(s.value){var i=s.value.slice(),l=fg(i),a="";l.forEach(function(c){uK.indexOf(c)===-1?a+=ar(c):(a.length&&n.push(a),n.push(ar(c)),a="")}),a.length&&n.push(a)}};!(s=r.next()).done;)A();return n},hK=function(){function t(e,r,n){this.text=fK(r.data,n.textTransform),this.textBounds=oK(e,this.text,n,r)}return t}(),fK=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(gK,pK);case 2:return t.toUpperCase();default:return t}},gK=/(^|\s|:|-|\(|\))([a-z])/g,pK=function(t,e,r){return t.length>0?e+r.toUpperCase():t},RF=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(ws),DF=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(ws),jF=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=new XMLSerializer,i=hg(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(ws),PF=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ws),S0=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(ws),mK=[{type:15,flags:0,unit:"px",number:3}],wK=[{type:16,flags:0,number:50}],xK=function(t){return t.width>t.height?new Ks(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ks(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},yK=function(t){var e=t.type===vK?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},af="checkbox",lf="radio",vK="password",IC=707406591,Yx=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=yK(n),(s.type===af||s.type===lf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=xK(s.bounds)),s.type){case af:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=mK;break;case lf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=wK;break}return s}return e}(ws),LF=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(ws),MF=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ws),OF=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=VF(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?cc(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Rs.TRANSPARENT,i=n.contentWindow.document.body?cc(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Rs.TRANSPARENT;s.backgroundColor=KA(A)?KA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(ws),BK=["OL","UL","MENU"],oh=function(t,e,r,n){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,KF(s)&&s.data.trim().length>0)r.textNodes.push(new hK(t,s,r.styles));else if(qo(s))if(WF(s)&&s.assignedNodes)s.assignedNodes().forEach(function(l){return oh(t,l,r,n)});else{var i=HF(t,s);i.styles.isVisible()&&(bK(s,i,n)?i.flags|=4:CK(i.styles)&&(i.flags|=2),BK.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?oh(t,s.shadowRoot,i,n):!cf(s)&&!GF(s)&&!uf(s)&&oh(t,s,i,n))}},HF=function(t,e){return Q0(e)?new RF(t,e):zF(e)?new DF(t,e):GF(e)?new jF(t,e):_K(e)?new PF(t,e):IK(e)?new S0(t,e):EK(e)?new Yx(t,e):uf(e)?new LF(t,e):cf(e)?new MF(t,e):$F(e)?new OF(t,e):new ws(t,e)},VF=function(t,e){var r=HF(t,e);return r.flags|=4,oh(t,e,r,r),r},bK=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Zx(t)&&r.styles.isTransparent()},CK=function(t){return t.isPositioned()||t.isFloating()},KF=function(t){return t.nodeType===Node.TEXT_NODE},qo=function(t){return t.nodeType===Node.ELEMENT_NODE},U0=function(t){return qo(t)&&typeof t.style<"u"&&!ah(t)},ah=function(t){return typeof t.className=="object"},_K=function(t){return t.tagName==="LI"},IK=function(t){return t.tagName==="OL"},EK=function(t){return t.tagName==="INPUT"},TK=function(t){return t.tagName==="HTML"},GF=function(t){return t.tagName==="svg"},Zx=function(t){return t.tagName==="BODY"},zF=function(t){return t.tagName==="CANVAS"},EC=function(t){return t.tagName==="VIDEO"},Q0=function(t){return t.tagName==="IMG"},$F=function(t){return t.tagName==="IFRAME"},TC=function(t){return t.tagName==="STYLE"},kK=function(t){return t.tagName==="SCRIPT"},cf=function(t){return t.tagName==="TEXTAREA"},uf=function(t){return t.tagName==="SELECT"},WF=function(t){return t.tagName==="SLOT"},kC=function(t){return t.tagName.indexOf("-")>0},FK=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,A=!0;n!==null&&n.forEach(function(l){var a=r.counters[l.counter];a&&l.increment!==0&&(A=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=l.increment)});var i=[];return A&&s.forEach(function(l){var a=r.counters[l.counter];i.push(l.counter),a||(a=r.counters[l.counter]=[]),a.push(l.reset)}),i},t}(),FC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},SC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},SK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},UK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Io=function(t,e,r,n,s,A){return t<e||t>r?Xc(t,s,A.length>0):n.integers.reduce(function(i,l,a){for(;t>=l;)t-=l,i+=n.values[a];return i},"")+A},qF=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},or=function(t,e,r,n,s){var A=r-e+1;return(t<0?"-":"")+(qF(Math.abs(t),A,n,function(i){return ar(Math.floor(i%A)+e)})+s)},bi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return qF(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Qo=1,aA=2,lA=4,Kl=8,Bs=function(t,e,r,n,s,A){if(t<-9999||t>9999)return Xc(t,4,s.length>0);var i=Math.abs(t),l=s;if(i===0)return e[0]+l;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&mr(A,Qo)&&l!==""?l=e[c]+l:c>1||c===1&&a===0||c===1&&a===1&&mr(A,aA)||c===1&&a===1&&mr(A,lA)&&t>100||c===1&&a>1&&mr(A,Kl)?l=e[c]+(a>0?r[a-1]:"")+l:c===1&&a>0&&(l=r[a-1]+l),i=Math.floor(i/10)}return(t<0?n:"")+l},UC="",QC="",NC="",Rp="",Xc=function(t,e,r){var n=r?". ":"",s=r?"":"",A=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var l=or(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return bi(t,"",s);case 6:return Io(t,1,3999,FC,3,n).toLowerCase();case 7:return Io(t,1,3999,FC,3,n);case 8:return or(t,945,969,!1,n);case 9:return or(t,97,122,!1,n);case 10:return or(t,65,90,!1,n);case 11:return or(t,1632,1641,!0,n);case 12:case 49:return Io(t,1,9999,SC,3,n);case 35:return Io(t,1,9999,SC,3,n).toLowerCase();case 13:return or(t,2534,2543,!0,n);case 14:case 30:return or(t,6112,6121,!0,n);case 15:return bi(t,"",s);case 16:return bi(t,"",s);case 17:case 48:return Bs(t,"",UC,"",s,aA|lA|Kl);case 47:return Bs(t,"",QC,"",s,Qo|aA|lA|Kl);case 42:return Bs(t,"",UC,"",s,aA|lA|Kl);case 41:return Bs(t,"",QC,"",s,Qo|aA|lA|Kl);case 26:return Bs(t,"","",NC,s,0);case 25:return Bs(t,"","",NC,s,Qo|aA|lA);case 31:return Bs(t,"","",Rp,A,Qo|aA|lA);case 33:return Bs(t,"","",Rp,A,0);case 32:return Bs(t,"","",Rp,A,Qo|aA|lA);case 18:return or(t,2406,2415,!0,n);case 20:return Io(t,1,19999,UK,3,n);case 21:return or(t,2790,2799,!0,n);case 22:return or(t,2662,2671,!0,n);case 22:return Io(t,1,10999,SK,3,n);case 23:return bi(t,"");case 24:return bi(t,"");case 27:return or(t,3302,3311,!0,n);case 28:return bi(t,"",s);case 29:return bi(t,"",s);case 34:return or(t,3792,3801,!0,n);case 37:return or(t,6160,6169,!0,n);case 38:return or(t,4160,4169,!0,n);case 39:return or(t,2918,2927,!0,n);case 40:return or(t,1776,1785,!0,n);case 43:return or(t,3046,3055,!0,n);case 44:return or(t,3174,3183,!0,n);case 45:return or(t,3664,3673,!0,n);case 46:return or(t,3872,3881,!0,n);case 3:default:return or(t,48,57,!0,n)}},XF="data-html2canvas-ignore",RC=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new FK,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=QK(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,l=s.contentWindow,a=l.document,c=DK(s).then(function(){return en(n,void 0,void 0,function(){var d,h;return Gr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(MK),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,RK(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return s})]:[2,s]}})})});return a.open(),a.write(PK(document.doctype)+"<html></html>"),LK(this.referenceElement.ownerDocument,A,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(k0(e,2))debugger;if(zF(e))return this.createCanvasClone(e);if(EC(e))return this.createVideoClone(e);if(TC(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return Q0(r)&&(Q0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),kC(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Dp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var a=l.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!qo(r)||!kK(r)&&!r.hasAttribute(XF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!qo(r)||!TC(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(qo(A)&&WF(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(l){return s.appendChildNode(r,l,n)})}else this.appendChildNode(r,A,n)},t.prototype.cloneNode=function(e,r){if(KF(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&qo(e)&&(U0(e)||ah(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&U0(s)&&(this.clonedReferenceElement=s),Zx(s)&&VK(s);var a=this.counters.parse(new dC(this.context,A)),c=this.resolvePseudoContent(e,s,i,hc.BEFORE);kC(e)&&(r=!0),EC(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,l,hc.AFTER);return d&&s.appendChild(d),this.counters.pop(a),(A&&(this.options.copyStyles||ah(e))&&!$F(e)||r)&&Dp(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(cf(e)||uf(e))&&(cf(s)||uf(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var A=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new dC(this.context,n));var a=new _5(this.context,n),c=l.createElement("html2canvaspseudoelement");Dp(n,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(l.createTextNode(h.value));else if(h.type===22){var f=l.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(Ft);m.length&&c.appendChild(l.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(Qa),w=y[0],E=y[1];if(w&&Ft(w)){var C=A.counters.getCounterValue(w.value),x=E&&Ft(E)?T0.parse(A.context,E.value):3;c.appendChild(l.createTextNode(Xc(C,x,!1)))}}else if(h.name==="counters"){var _=h.values.filter(Qa),w=_[0],S=_[1],E=_[2];if(w&&Ft(w)){var U=A.counters.getCounterValues(w.value),N=E&&Ft(E)?T0.parse(A.context,E.value):3,v=S&&S.type===0?S.value:"",b=U.map(function(D){return Xc(D,N,!1)}).join(v);c.appendChild(l.createTextNode(b))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(l.createTextNode(uC(a.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(l.createTextNode(uC(a.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(l.createTextNode(h.value))}}),c.className=N0+" "+R0;var d=s===hc.BEFORE?" "+N0:" "+R0;return ah(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),hc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(hc||(hc={}));var QK=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(XF,"true"),t.body.appendChild(r),r},NK=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},RK=function(t){return Promise.all([].slice.call(t.images,0).map(NK))},DK=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},jK=["all","d","content"],Dp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);jK.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},PK=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},LK=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},MK=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},OK=":before",HK=":after",N0="___html2canvas___pseudoelement_before",R0="___html2canvas___pseudoelement_after",DC=`{
    content: "" !important;
    display: none !important;
}`,VK=function(t){KK(t,"."+N0+OK+DC+`
         .`+R0+HK+DC)},KK=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},JF=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),GK=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Pp(e)||qK(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return en(this,void 0,void 0,function(){var r,n,s,A,i=this;return Gr(this,function(l){switch(l.label){case 0:return r=JF.isSameOrigin(e),n=!jp(e)&&this._options.useCORS===!0&&Qr.SUPPORT_CORS_IMAGES&&!r,s=!jp(e)&&!r&&!Pp(e)&&typeof this._options.proxy=="string"&&Qr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!jp(e)&&!Pp(e)&&!s&&!n?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(XK(A)||n)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var l=Qr.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(l==="text")A(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+s+" with status code "+a.status)},a.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}a.send()})},t}(),zK=/^data:image\/svg\+xml/i,$K=/^data:image\/.*;base64,/i,WK=/^data:image\/.*/i,qK=function(t){return Qr.SUPPORT_SVG_DRAWING||!JK(t)},jp=function(t){return WK.test(t)},XK=function(t){return $K.test(t)},Pp=function(t){return t.substr(0,4)==="blob"},JK=function(t){return t.substr(-3).toLowerCase()==="svg"||zK.test(t)},Pe=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Eo=function(t,e,r){return new Pe(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},kd=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Eo(this.start,this.startControl,e),s=Eo(this.startControl,this.endControl,e),A=Eo(this.endControl,this.end,e),i=Eo(n,s,e),l=Eo(s,A,e),a=Eo(i,l,e);return r?new t(this.start,n,i,a):new t(a,l,A,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Rn=function(t){return t.type===1},YK=function(){function t(e){var r=e.styles,n=e.bounds,s=Hl(r.borderTopLeftRadius,n.width,n.height),A=s[0],i=s[1],l=Hl(r.borderTopRightRadius,n.width,n.height),a=l[0],c=l[1],d=Hl(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],m=Hl(r.borderBottomLeftRadius,n.width,n.height),y=m[0],w=m[1],E=[];E.push((A+a)/n.width),E.push((y+h)/n.width),E.push((i+w)/n.height),E.push((c+f)/n.height);var C=Math.max.apply(Math,E);C>1&&(A/=C,i/=C,a/=C,c/=C,h/=C,f/=C,y/=C,w/=C);var x=n.width-a,_=n.height-f,S=n.width-h,U=n.height-w,N=r.borderTopWidth,v=r.borderRightWidth,b=r.borderBottomWidth,B=r.borderLeftWidth,F=jt(r.paddingTop,e.bounds.width),D=jt(r.paddingRight,e.bounds.width),P=jt(r.paddingBottom,e.bounds.width),I=jt(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?Gt(n.left+B/3,n.top+N/3,A-B/3,i-N/3,_t.TOP_LEFT):new Pe(n.left+B/3,n.top+N/3),this.topRightBorderDoubleOuterBox=A>0||i>0?Gt(n.left+x,n.top+N/3,a-v/3,c-N/3,_t.TOP_RIGHT):new Pe(n.left+n.width-v/3,n.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Gt(n.left+S,n.top+_,h-v/3,f-b/3,_t.BOTTOM_RIGHT):new Pe(n.left+n.width-v/3,n.top+n.height-b/3),this.bottomLeftBorderDoubleOuterBox=y>0||w>0?Gt(n.left+B/3,n.top+U,y-B/3,w-b/3,_t.BOTTOM_LEFT):new Pe(n.left+B/3,n.top+n.height-b/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?Gt(n.left+B*2/3,n.top+N*2/3,A-B*2/3,i-N*2/3,_t.TOP_LEFT):new Pe(n.left+B*2/3,n.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?Gt(n.left+x,n.top+N*2/3,a-v*2/3,c-N*2/3,_t.TOP_RIGHT):new Pe(n.left+n.width-v*2/3,n.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Gt(n.left+S,n.top+_,h-v*2/3,f-b*2/3,_t.BOTTOM_RIGHT):new Pe(n.left+n.width-v*2/3,n.top+n.height-b*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||w>0?Gt(n.left+B*2/3,n.top+U,y-B*2/3,w-b*2/3,_t.BOTTOM_LEFT):new Pe(n.left+B*2/3,n.top+n.height-b*2/3),this.topLeftBorderStroke=A>0||i>0?Gt(n.left+B/2,n.top+N/2,A-B/2,i-N/2,_t.TOP_LEFT):new Pe(n.left+B/2,n.top+N/2),this.topRightBorderStroke=A>0||i>0?Gt(n.left+x,n.top+N/2,a-v/2,c-N/2,_t.TOP_RIGHT):new Pe(n.left+n.width-v/2,n.top+N/2),this.bottomRightBorderStroke=h>0||f>0?Gt(n.left+S,n.top+_,h-v/2,f-b/2,_t.BOTTOM_RIGHT):new Pe(n.left+n.width-v/2,n.top+n.height-b/2),this.bottomLeftBorderStroke=y>0||w>0?Gt(n.left+B/2,n.top+U,y-B/2,w-b/2,_t.BOTTOM_LEFT):new Pe(n.left+B/2,n.top+n.height-b/2),this.topLeftBorderBox=A>0||i>0?Gt(n.left,n.top,A,i,_t.TOP_LEFT):new Pe(n.left,n.top),this.topRightBorderBox=a>0||c>0?Gt(n.left+x,n.top,a,c,_t.TOP_RIGHT):new Pe(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Gt(n.left+S,n.top+_,h,f,_t.BOTTOM_RIGHT):new Pe(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||w>0?Gt(n.left,n.top+U,y,w,_t.BOTTOM_LEFT):new Pe(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||i>0?Gt(n.left+B,n.top+N,Math.max(0,A-B),Math.max(0,i-N),_t.TOP_LEFT):new Pe(n.left+B,n.top+N),this.topRightPaddingBox=a>0||c>0?Gt(n.left+Math.min(x,n.width-v),n.top+N,x>n.width+v?0:Math.max(0,a-v),Math.max(0,c-N),_t.TOP_RIGHT):new Pe(n.left+n.width-v,n.top+N),this.bottomRightPaddingBox=h>0||f>0?Gt(n.left+Math.min(S,n.width-B),n.top+Math.min(_,n.height-b),Math.max(0,h-v),Math.max(0,f-b),_t.BOTTOM_RIGHT):new Pe(n.left+n.width-v,n.top+n.height-b),this.bottomLeftPaddingBox=y>0||w>0?Gt(n.left+B,n.top+Math.min(U,n.height-b),Math.max(0,y-B),Math.max(0,w-b),_t.BOTTOM_LEFT):new Pe(n.left+B,n.top+n.height-b),this.topLeftContentBox=A>0||i>0?Gt(n.left+B+I,n.top+N+F,Math.max(0,A-(B+I)),Math.max(0,i-(N+F)),_t.TOP_LEFT):new Pe(n.left+B+I,n.top+N+F),this.topRightContentBox=a>0||c>0?Gt(n.left+Math.min(x,n.width+B+I),n.top+N+F,x>n.width+B+I?0:a-B+I,c-(N+F),_t.TOP_RIGHT):new Pe(n.left+n.width-(v+D),n.top+N+F),this.bottomRightContentBox=h>0||f>0?Gt(n.left+Math.min(S,n.width-(B+I)),n.top+Math.min(_,n.height+N+F),Math.max(0,h-(v+D)),f-(b+P),_t.BOTTOM_RIGHT):new Pe(n.left+n.width-(v+D),n.top+n.height-(b+P)),this.bottomLeftContentBox=y>0||w>0?Gt(n.left+B+I,n.top+U,Math.max(0,y-(B+I)),w-(b+P),_t.BOTTOM_LEFT):new Pe(n.left+B+I,n.top+n.height-(b+P))}return t}(),_t;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(_t||(_t={}));var Gt=function(t,e,r,n,s){var A=4*((Math.sqrt(2)-1)/3),i=r*A,l=n*A,a=t+r,c=e+n;switch(s){case _t.TOP_LEFT:return new kd(new Pe(t,c),new Pe(t,c-l),new Pe(a-i,e),new Pe(a,e));case _t.TOP_RIGHT:return new kd(new Pe(t,e),new Pe(t+i,e),new Pe(a,c-l),new Pe(a,c));case _t.BOTTOM_RIGHT:return new kd(new Pe(a,e),new Pe(a,e+l),new Pe(t+i,c),new Pe(t,c));case _t.BOTTOM_LEFT:default:return new kd(new Pe(a,c),new Pe(a-i,c),new Pe(t,e+l),new Pe(t,e))}},df=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},ZK=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},hf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},e6=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Fd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),t6=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),r6=function(t){return t.type===0},YF=function(t){return t.type===1},n6=function(t){return t.type===2},jC=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},s6=function(t,e,r,n,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+s);case 3:return A.add(e,r+s)}return A})},ZF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),e2=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new YK(this.container),this.container.styles.opacity<1&&this.effects.push(new t6(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new e6(n,s,A))}if(this.container.styles.overflowX!==0){var i=df(this.curves),l=hf(this.curves);jC(i,l)?this.effects.push(new Fd(i,6)):(this.effects.push(new Fd(i,2)),this.effects.push(new Fd(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var A=n.effects.filter(function(a){return!YF(a)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=df(n.curves),l=hf(n.curves);jC(i,l)||s.unshift(new Fd(l,6))}}else s.unshift.apply(s,A);n=n.parent}return s.filter(function(a){return mr(a.target,e)})},t}(),D0=function(t,e,r,n){t.container.elements.forEach(function(s){var A=mr(s.flags,4),i=mr(s.flags,2),l=new e2(s,t);mr(s.styles.display,2048)&&n.push(l);var a=mr(s.flags,8)?[]:n;if(A||i){var c=A||s.styles.isPositioned()?r:e,d=new ZF(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(y,w){return h>y.element.container.styles.zIndex.order?(f=w,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(y,w){return h>=y.element.container.styles.zIndex.order?(m=w+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);D0(l,d,A?d:r,a)}else s.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),D0(l,e,r,a);mr(s.flags,8)&&t2(s,a)})},t2=function(t,e){for(var r=t instanceof S0?t.start:1,n=t instanceof S0?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof PF&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=Xc(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},A6=function(t){var e=new e2(t,null),r=new ZF(e),n=[];return D0(e,r,r,n),t2(e.container,n),r},PC=function(t,e){switch(e){case 0:return Pn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Pn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Pn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Pn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},i6=function(t,e){switch(e){case 0:return Pn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Pn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Pn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Pn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},o6=function(t,e){switch(e){case 0:return Pn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Pn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Pn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Pn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},a6=function(t,e){switch(e){case 0:return Sd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Sd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Sd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Sd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Sd=function(t,e){var r=[];return Rn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Rn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Pn=function(t,e,r,n){var s=[];return Rn(t)?s.push(t.subdivide(.5,!1)):s.push(t),Rn(r)?s.push(r.subdivide(.5,!0)):s.push(r),Rn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Rn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},r2=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ff=function(t){var e=t.styles,r=t.bounds,n=jt(e.paddingLeft,r.width),s=jt(e.paddingRight,r.width),A=jt(e.paddingTop,r.width),i=jt(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},l6=function(t,e){return t===0?e.bounds:t===2?ff(e):r2(e)},c6=function(t,e){return t===0?e.bounds:t===2?ff(e):r2(e)},Lp=function(t,e,r){var n=l6(No(t.styles.backgroundOrigin,e),t),s=c6(No(t.styles.backgroundClip,e),t),A=u6(No(t.styles.backgroundSize,e),r,n),i=A[0],l=A[1],a=Hl(No(t.styles.backgroundPosition,e),n.width-i,n.height-l),c=d6(No(t.styles.backgroundRepeat,e),a,A,n,s),d=Math.round(n.left+a[0]),h=Math.round(n.top+a[1]);return[c,d,h,i,l]},To=function(t){return Ft(t)&&t.value===oa.AUTO},Ud=function(t){return typeof t=="number"},u6=function(t,e,r){var n=e[0],s=e[1],A=e[2],i=t[0],l=t[1];if(!i)return[0,0];if(hr(i)&&l&&hr(l))return[jt(i,r.width),jt(l,r.height)];var a=Ud(A);if(Ft(i)&&(i.value===oa.CONTAIN||i.value===oa.COVER)){if(Ud(A)){var c=r.width/r.height;return c<A!=(i.value===oa.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var d=Ud(n),h=Ud(s),f=d||h;if(To(i)&&(!l||To(l))){if(d&&h)return[n,s];if(!a&&!f)return[r.width,r.height];if(f&&a){var m=d?n:s*A,y=h?s:n/A;return[m,y]}var w=d?n:r.width,E=h?s:r.height;return[w,E]}if(a){var C=0,x=0;return hr(i)?C=jt(i,r.width):hr(l)&&(x=jt(l,r.height)),To(i)?C=x*A:(!l||To(l))&&(x=C/A),[C,x]}var _=null,S=null;if(hr(i)?_=jt(i,r.width):l&&hr(l)&&(S=jt(l,r.height)),_!==null&&(!l||To(l))&&(S=d&&h?_/n*s:r.height),S!==null&&To(i)&&(_=d&&h?S/s*n:r.width),_!==null&&S!==null)return[_,S];throw new Error("Unable to calculate background-size for element")},No=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},d6=function(t,e,r,n,s){var A=e[0],i=e[1],l=r[0],a=r[1];switch(t){case 2:return[new Pe(Math.round(n.left),Math.round(n.top+i)),new Pe(Math.round(n.left+n.width),Math.round(n.top+i)),new Pe(Math.round(n.left+n.width),Math.round(a+n.top+i)),new Pe(Math.round(n.left),Math.round(a+n.top+i))];case 3:return[new Pe(Math.round(n.left+A),Math.round(n.top)),new Pe(Math.round(n.left+A+l),Math.round(n.top)),new Pe(Math.round(n.left+A+l),Math.round(n.height+n.top)),new Pe(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new Pe(Math.round(n.left+A),Math.round(n.top+i)),new Pe(Math.round(n.left+A+l),Math.round(n.top+i)),new Pe(Math.round(n.left+A+l),Math.round(n.top+i+a)),new Pe(Math.round(n.left+A),Math.round(n.top+i+a))];default:return[new Pe(Math.round(s.left),Math.round(s.top)),new Pe(Math.round(s.left+s.width),Math.round(s.top)),new Pe(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Pe(Math.round(s.left),Math.round(s.height+s.top))]}},h6="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",LC="Hidden Text",f6=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=h6,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(LC)),n.appendChild(A),n.appendChild(s);var l=s.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode(LC)),n.style.lineHeight="normal",s.style.verticalAlign="super";var a=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:a}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),n2=function(){function t(e,r){this.context=e,this.options=r}return t}(),g6=1e4,p6=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new f6(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),n6(r)&&(this.ctx.globalAlpha=r.opacity),r6(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),YF(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return en(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return en(this,void 0,void 0,function(){return Gr(this,function(n){switch(n.label){case 0:if(mr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=Jx(r.text);i.reduce(function(l,a){return A.ctx.fillText(a,l,r.bounds.top+s),l+A.ctx.measureText(a).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=v6(r.fontFamily).join(", "),A=_u(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(r,n){return en(this,void 0,void 0,function(){var s,A,i,l,a,c,d,h,f=this;return Gr(this,function(m){return s=this.createFontStyle(n),A=s[0],i=s[1],l=s[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,l),c=a.baseline,d=a.middle,h=n.paintOrder,r.textBounds.forEach(function(y){h.forEach(function(w){switch(w){case 0:f.ctx.fillStyle=br(n.color),f.renderTextWithLetterSpacing(y,n.letterSpacing,c);var E=n.textShadow;E.length&&y.text.trim().length&&(E.slice(0).reverse().forEach(function(C){f.ctx.shadowColor=br(C.color),f.ctx.shadowOffsetX=C.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=C.offsetY.number*f.options.scale,f.ctx.shadowBlur=C.blur.number,f.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=br(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(C){switch(C){case 1:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:f.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(f.ctx.strokeStyle=br(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=ff(r),i=hf(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return en(this,void 0,void 0,function(){var n,s,A,i,l,a,x,x,c,d,h,f,S,m,y,U,w,E,C,x,_,S,U;return Gr(this,function(N){switch(N.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,A=n.styles,i=0,l=n.textNodes,N.label=1;case 1:return i<l.length?(a=l[i],[4,this.renderTextNode(a,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof RF))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return x=N.sent(),this.renderReplacedElement(n,s,x),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof DF&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof jF))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return x=N.sent(),this.renderReplacedElement(n,s,x),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof OF&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=N.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),N.label=14;case 14:if(n instanceof Yx&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===af?n.checked&&(this.ctx.save(),this.path([new Pe(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Pe(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Pe(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Pe(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Pe(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Pe(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Pe(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=br(IC),this.ctx.fill(),this.ctx.restore()):n.type===lf&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=br(IC),this.ctx.fill(),this.ctx.restore())),m6(n)&&n.value.length){switch(f=this.createFontStyle(A),S=f[0],m=f[1],y=this.fontMetrics.getMetrics(S,m).baseline,this.ctx.font=S,this.ctx.fillStyle=br(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=x6(n.styles.textAlign),U=ff(n),w=0,n.styles.textAlign){case 1:w+=U.width/2;break;case 2:w+=U.width;break}E=U.add(w,0,0,-U.height/2+1),this.ctx.save(),this.path([new Pe(U.left,U.top),new Pe(U.left+U.width,U.top),new Pe(U.left+U.width,U.top+U.height),new Pe(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new dc(n.value,E),A.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(C=n.styles.listStyleImage,C.type!==0)return[3,18];x=void 0,_=C.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return x=N.sent(),this.ctx.drawImage(x,n.bounds.left-(x.width+10),n.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(S=this.createFontStyle(A)[0],this.ctx.font=S,this.ctx.fillStyle=br(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new Ks(n.bounds.left,n.bounds.top+jt(n.styles.paddingTop,n.bounds.width),n.bounds.width,lC(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new dc(r.listValue,U),A.letterSpacing,lC(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return en(this,void 0,void 0,function(){var n,s,C,A,i,C,l,a,C,c,d,C,h,f,C,m,y,C,w,E,C;return Gr(this,function(x){switch(x.label){case 0:if(mr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:x.sent(),n=0,s=r.negativeZIndex,x.label=2;case 2:return n<s.length?(C=s[n],[4,this.renderStack(C)]):[3,5];case 3:x.sent(),x.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:x.sent(),A=0,i=r.nonInlineLevel,x.label=7;case 7:return A<i.length?(C=i[A],[4,this.renderNode(C)]):[3,10];case 8:x.sent(),x.label=9;case 9:return A++,[3,7];case 10:l=0,a=r.nonPositionedFloats,x.label=11;case 11:return l<a.length?(C=a[l],[4,this.renderStack(C)]):[3,14];case 12:x.sent(),x.label=13;case 13:return l++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,x.label=15;case 15:return c<d.length?(C=d[c],[4,this.renderStack(C)]):[3,18];case 16:x.sent(),x.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,x.label=19;case 19:return h<f.length?(C=f[h],[4,this.renderNode(C)]):[3,22];case 20:x.sent(),x.label=21;case 21:return h++,[3,19];case 22:m=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,x.label=23;case 23:return m<y.length?(C=y[m],[4,this.renderStack(C)]):[3,26];case 24:x.sent(),x.label=25;case 25:return m++,[3,23];case 26:w=0,E=r.positiveZIndex,x.label=27;case 27:return w<E.length?(C=E[w],[4,this.renderStack(C)]):[3,30];case 28:x.sent(),x.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,A){var i=Rn(s)?s.start:s;A===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Rn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(r,n,s){var A;if(r.width===n&&r.height===s)return r;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,s);var a=l.getContext("2d");return a.drawImage(r,0,0,r.width,r.height,0,0,n,s),l},e.prototype.renderBackgroundImage=function(r){return en(this,void 0,void 0,function(){var n,s,A,i,l,a;return Gr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,f,m,F,At,Je,I,ze,b,y,F,At,Je,I,ze,w,E,C,x,_,S,U,N,v,b,B,F,D,P,I,ze,Le,At,Je,se,Ce,Ne,Ye,We,G,he,$e;return Gr(this,function(Re){switch(Re.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Re.label=1;case 1:return Re.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=Re.sent(),[3,4];case 3:return Re.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=Lp(r,n,[h.width,h.height,h.width/h.height]),F=m[0],At=m[1],Je=m[2],I=m[3],ze=m[4],b=A.ctx.createPattern(A.resizeImage(h,I,ze),"repeat"),A.renderRepeat(F,b,At,Je)),[3,6];case 5:r3(d)?(y=Lp(r,n,[null,null,null]),F=y[0],At=y[1],Je=y[2],I=y[3],ze=y[4],w=JV(d.angle,I,ze),E=w[0],C=w[1],x=w[2],_=w[3],S=w[4],U=document.createElement("canvas"),U.width=I,U.height=ze,N=U.getContext("2d"),v=N.createLinearGradient(C,_,x,S),oC(d.stops,E).forEach(function(X){return v.addColorStop(X.stop,br(X.color))}),N.fillStyle=v,N.fillRect(0,0,I,ze),I>0&&ze>0&&(b=A.ctx.createPattern(U,"repeat"),A.renderRepeat(F,b,At,Je))):n3(d)&&(B=Lp(r,n,[null,null,null]),F=B[0],D=B[1],P=B[2],I=B[3],ze=B[4],Le=d.position.length===0?[Wx]:d.position,At=jt(Le[0],I),Je=jt(Le[Le.length-1],ze),se=YV(d,At,Je,I,ze),Ce=se[0],Ne=se[1],Ce>0&&Ne>0&&(Ye=A.ctx.createRadialGradient(D+At,P+Je,0,D+At,P+Je,Ce),oC(d.stops,Ce*2).forEach(function(X){return Ye.addColorStop(X.stop,br(X.color))}),A.path(F),A.ctx.fillStyle=Ye,Ce!==Ne?(We=r.bounds.left+.5*r.bounds.width,G=r.bounds.top+.5*r.bounds.height,he=Ne/Ce,$e=1/he,A.ctx.save(),A.ctx.translate(We,G),A.ctx.transform(1,0,0,he,0,0),A.ctx.translate(-We,-G),A.ctx.fillRect(D,$e*(P-G)+G,I,ze*$e),A.ctx.restore()):A.ctx.fill())),Re.label=6;case 6:return n--,[2]}})},A=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<l.length?(a=l[i],[5,s(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return en(this,void 0,void 0,function(){return Gr(this,function(A){return this.path(PC(s,n)),this.ctx.fillStyle=br(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,A){return en(this,void 0,void 0,function(){var i,l;return Gr(this,function(a){switch(a.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,A)]:[3,2];case 1:return a.sent(),[2];case 2:return i=i6(A,s),this.path(i),this.ctx.fillStyle=br(r),this.ctx.fill(),l=o6(A,s),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return en(this,void 0,void 0,function(){var n,s,A,i,l,a,c,d,h=this;return Gr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!KA(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=w6(No(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),KA(n.backgroundColor)||(this.ctx.fillStyle=br(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var y=df(r.curves),w=m.inset?0:g6,E=s6(y,-w+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(y),h.ctx.clip(),h.mask(E)):(h.mask(y),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=m.offsetX.number+w,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=br(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?br(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:l=0,a=0,c=A,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!KA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:f.sent(),f.label=11;case 11:l++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,A,i){return en(this,void 0,void 0,function(){var l,a,c,d,h,f,m,y,w,E,C,x,_,S,U,N,U,N;return Gr(this,function(v){return this.ctx.save(),l=a6(A,s),a=PC(A,s),i===2&&(this.path(a),this.ctx.clip()),Rn(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),Rn(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),s===0||s===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(a.slice(0,2)),y=n<3?n*3:n*2,w=n<3?n*2:n,i===3&&(y=n,w=n),E=!0,m<=y*2?E=!1:m<=y*2+w?(C=m/(2*y+w),y*=C,w*=C):(x=Math.floor((m+w)/(y+w)),_=(m-x*y)/(x-1),S=(m-(x+1)*y)/x,w=S<=0||Math.abs(w-_)<Math.abs(w-S)?_:S),E&&(i===3?this.ctx.setLineDash([0,y+w]):this.ctx.setLineDash([y,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=br(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Rn(a[0])&&(U=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new Pe(U.end.x,U.end.y),new Pe(N.start.x,N.start.y)]),this.ctx.stroke()),Rn(a[1])&&(U=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new Pe(U.end.x,U.end.y),new Pe(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return en(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=A6(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(n2),m6=function(t){return t instanceof MF||t instanceof LF?!0:t instanceof Yx&&t.type!==lf&&t.type!==af},w6=function(t,e){switch(t){case 0:return df(e);case 2:return ZK(e);case 1:default:return hf(e)}},x6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},y6=["-apple-system","system-ui"],v6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return y6.indexOf(e)===-1}):t},B6=function(t){ts(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return en(this,void 0,void 0,function(){var n,s;return Gr(this,function(A){switch(A.label){case 0:return n=F0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,b6(n)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(n2),b6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},C6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,cd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,cd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,cd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,cd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),_6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new C6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new GK(this,e)}return t.instanceCount=1,t}(),gf=function(t,e){return e===void 0&&(e={}),I6(t,e)};typeof window<"u"&&JF.setContext(window);var I6=function(t,e){return en(void 0,void 0,void 0,function(){var r,n,s,A,i,l,a,c,d,h,f,m,y,w,E,C,x,_,S,U,v,N,v,b,B,F,D,P,I,ze,Le,At,Je,se,Ce,Ne,Ye,We,G,he;return Gr(this,function($e){switch($e.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(b=e.allowTaint)!==null&&b!==void 0?b:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},A=g0({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},s),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(I=e.windowHeight)!==null&&I!==void 0?I:n.innerHeight,scrollX:(ze=e.scrollX)!==null&&ze!==void 0?ze:n.pageXOffset,scrollY:(Le=e.scrollY)!==null&&Le!==void 0?Le:n.pageYOffset},l=new Ks(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new _6(A,l),c=(At=e.foreignObjectRendering)!==null&&At!==void 0?At:!1,d={allowTaint:(Je=e.allowTaint)!==null&&Je!==void 0?Je:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),h=new RC(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=$e.sent(),y=Zx(f)||TK(f)?sH(f.ownerDocument):hg(a,f),w=y.width,E=y.height,C=y.left,x=y.top,_=E6(a,f,e.backgroundColor),S={canvas:e.canvas,backgroundColor:_,scale:(Ce=(se=e.scale)!==null&&se!==void 0?se:n.devicePixelRatio)!==null&&Ce!==void 0?Ce:1,x:((Ne=e.x)!==null&&Ne!==void 0?Ne:0)+C,y:((Ye=e.y)!==null&&Ye!==void 0?Ye:0)+x,width:(We=e.width)!==null&&We!==void 0?We:Math.ceil(w),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(E)},c?(a.logger.debug("Document cloned, using foreign object rendering"),v=new B6(a,S),[4,v.render(f)]):[3,3];case 2:return U=$e.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+C+","+x+" with size "+w+"x"+E+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=VF(a,f),_===N.styles.backgroundColor&&(N.styles.backgroundColor=Rs.TRANSPARENT),a.logger.debug("Starting renderer for element at "+S.x+","+S.y+" with size "+S.width+"x"+S.height),v=new p6(a,S),[4,v.render(N)];case 4:U=$e.sent(),$e.label=5;case 5:return(!((he=e.removeContainer)!==null&&he!==void 0)||he)&&(RC.destroy(m)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,U]}})})},E6=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?cc(t,getComputedStyle(n.documentElement).backgroundColor):Rs.TRANSPARENT,A=n.body?cc(t,getComputedStyle(n.body).backgroundColor):Rs.TRANSPARENT,i=typeof r=="string"?cc(t,r):r===null?Rs.TRANSPARENT:4294967295;return e===n.documentElement?KA(s)?KA(A)?i:A:s:i};const T6=()=>{var ot,Ze,at,ee;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Hn(),[i,l]=T.useState("teachers"),[a,c]=T.useState(!1),[d,h]=T.useState(null),[f,m]=T.useState({}),[y,w]=T.useState({}),[E,C]=T.useState({}),[x,_]=T.useState({}),[S,U]=T.useState("preset_normal"),[N,v]=T.useState([]),[b,B]=T.useState(!1),[F,D]=T.useState(""),P=T.useRef(null),[I,ze]=T.useState(null);T.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const R=s.bellPresets.find(L=>L.id===S);if(R){v(R.bells);return}}v(Dh)},[S,s.bellPresets]);const Le=R=>{h(R||null),i==="teachers"?m(R?e.find(L=>L.id===R)??{}:{subjectIds:[],unavailableDates:[],shifts:[le.First,le.Second],telegramChatId:""}):i==="subjects"?w(R?t.find(L=>L.id===R)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?C(R?r.find(L=>L.id===R)??{}:{shift:le.First,studentsCount:25}):i==="rooms"&&_(R?n.find(L=>L.id===R)??{}:{capacity:30,type:""}),c(!0)},At=async()=>{const R={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:y,key:"subjects"},classes:{list:r,form:E,key:"classes"},rooms:{list:n,form:x,key:"rooms"}};if(i==="bells"||!(i in R))return;const L=R[i],{list:$,form:ne,key:De}=L;if(!ne.name)return;let Be=[...$];if(d)Be=Be.map(re=>re.id===d?{...re,...ne}:re);else{const re=$.reduce((J,me)=>Math.max(J,me.order||0),0),z={...ne,id:rn(),order:re+1};Be.push(z)}await A({[De]:Be}),c(!1)},Je=async R=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(L=>L.id!==R)});break;case"subjects":await A({subjects:t.filter(L=>L.id!==R)});break;case"classes":await A({classes:r.filter(L=>L.id!==R)});break;case"rooms":await A({rooms:n.filter(L=>L.id!==R)});break}},se=(R,L)=>{ze(L),R.dataTransfer.effectAllowed="move"},Ce=R=>{R.preventDefault()},Ne=async(R,L)=>{if(I===null||I===L)return;const $=ne=>{const De=[...ne],[Be]=De.splice(I,1);return De.splice(L,0,Be),De.map((re,z)=>({...re,order:z}))};switch(i){case"teachers":{await A({teachers:$(e)});break}case"subjects":{await A({subjects:$(t)});break}case"classes":{await A({classes:$(r)});break}case"rooms":{await A({rooms:$(n)});break}}ze(null)},Ye=(R,L,$,ne)=>{const De=[...N],Be=De.findIndex(re=>re.shift===R&&re.period===L&&re.day==="default");Be>=0?De[Be]={...De[Be],[$]:ne}:De.push({shift:R,period:L,[$]:ne,start:"00:00",end:"00:00",day:"default"}),v(De)},We=(R,L)=>{const $=[...N],ne=$.findIndex(De=>De.shift===R&&De.period===L&&De.day==="default");ne>=0?$[ne]={...$[ne],cancelled:!$[ne].cancelled}:$.push({shift:R,period:L,start:"00:00",end:"00:00",day:"default",cancelled:!0}),v($)},G=async()=>{let R=[...s.bellPresets||[]];const L=R.findIndex($=>$.id===S);L>=0?R[L]={...R[L],bells:N}:R.push({id:S,name:F||" ",bells:N}),await A({settings:{...s,bellPresets:R}}),alert(" !")},he=()=>{D(""),B(!0)},$e=async()=>{if(!F)return;const R=`preset_${rn()}`,L=[...s.bellPresets||[]];L.push({id:R,name:F,bells:JSON.parse(JSON.stringify(N))}),await A({settings:{...s,bellPresets:L}}),U(R),B(!1)},Re=async()=>{if(S==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const R=(s.bellPresets||[]).filter(L=>L.id!==S);await A({settings:{...s,bellPresets:R}}),U("preset_normal")},X=async()=>{var R,L;window.confirm(`   "${(L=(R=s.bellPresets)==null?void 0:R.find($=>$.id===S))==null?void 0:L.name}"   ?`)&&(await A({bellSchedule:N}),alert("  !"))},it=async()=>{var $,ne;if(!P.current)return;const R=await gf(P.current,{scale:2,backgroundColor:"#ffffff"}),L=document.createElement("a");L.href=R.toDataURL("image/png"),L.download=`_${(ne=($=s.bellPresets)==null?void 0:$.find(De=>De.id===S))==null?void 0:ne.name}.png`,document.body.appendChild(L),L.click(),document.body.removeChild(L)},et=R=>{const L=f.shifts||[];L.includes(R)?m({...f,shifts:L.filter($=>$!==R)}):m({...f,shifts:[...L,R]})};return o.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[o.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(R=>o.jsxs("button",{onClick:()=>l(R.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===R.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(M,{name:R.icon,size:18})," ",R.label]},R.id))}),i!=="bells"&&o.jsxs("button",{onClick:()=>Le(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[o.jsx(M,{name:"Plus",size:20})," "]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&o.jsx(ld,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((R,L)=>o.jsxs("div",{draggable:!0,onDragStart:$=>se($,L),onDragOver:Ce,onDrop:$=>Ne($,L),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:R.name})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>Le(R.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:o.jsx(M,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>Je(R.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:o.jsx(M,{name:"Trash2",size:16})})]})]}),o.jsx("div",{className:"text-xs text-slate-500 mb-2",children:R.birthDate?`: ${new Date(R.birthDate).toLocaleDateString("ru-RU")}`:""}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[R.shifts.includes(le.First)&&o.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),R.shifts.includes(le.Second)&&o.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:R.subjectIds.map($=>{const ne=t.find(De=>De.id===$);return ne?o.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:ne.color,color:"#334155"},children:ne.name},$):null})})]},R.id))}),i==="subjects"&&o.jsx(ld,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((R,L)=>o.jsxs("div",{draggable:!0,onDragStart:$=>se($,L),onDragOver:Ce,onDrop:$=>Ne($,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:R.color},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:R.name}),o.jsxs("div",{className:"text-xs text-slate-400",children:[" ",R.difficulty,"  ",R.requiredRoomType]})]})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>Le(R.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>Je(R.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(M,{name:"Trash2",size:16})})]})]},R.id))}),i==="classes"&&o.jsx(ld,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((R,L)=>o.jsxs("div",{draggable:!0,onDragStart:$=>se($,L),onDragOver:Ce,onDrop:$=>Ne($,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[o.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:o.jsx(M,{name:"GripVertical",size:14})}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:R.name}),o.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[R.studentsCount||0," "]}),o.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${R.shift===le.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[R.shift===le.First?"I":"II"," "]}),o.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>Le(R.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:14})}),o.jsx("button",{onClick:()=>Je(R.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(M,{name:"Trash2",size:14})})]})]},R.id))}),i==="rooms"&&o.jsx(ld,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((R,L)=>o.jsxs("div",{draggable:!0,onDragStart:$=>se($,L),onDragOver:Ce,onDrop:$=>Ne($,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:o.jsx(M,{name:"DoorOpen",size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:R.name}),o.jsxs("div",{className:"text-xs text-slate-400",children:[": ",R.capacity,"  ",R.type]})]})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>Le(R.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>Je(R.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(M,{name:"Trash2",size:16})})]})]},R.id))}),i==="bells"&&o.jsxs("div",{className:"flex flex-col gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-wrap items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:S,onChange:R=>U(R.target.value),className:"appearance-none bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500 cursor-pointer",children:(s.bellPresets||[]).map(R=>o.jsx("option",{value:R.id,children:R.name},R.id))}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:o.jsx(M,{name:"Filter",size:14})})]}),o.jsx("button",{onClick:he,className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition",title:"  ",children:o.jsx(M,{name:"Plus",size:18})}),o.jsx("button",{onClick:Re,className:"p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",title:" ",children:o.jsx(M,{name:"Trash2",size:18})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:G,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Save",size:18}),"  "]}),o.jsxs("button",{onClick:X,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[o.jsx(M,{name:"CheckCircle",size:18}),"  "]}),o.jsxs("button",{onClick:it,className:"px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Image",size:18})," PNG"]})]})]}),o.jsxs("div",{ref:P,className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 text-slate-900",children:[o.jsxs("h3",{className:"text-2xl font-black text-center mb-6 uppercase text-slate-800",children:[" : ",(Ze=(ot=s.bellPresets)==null?void 0:ot.find(R=>R.id===S))==null?void 0:Ze.name]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[le.First,le.Second].map(R=>o.jsxs("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:[o.jsx("div",{className:`p-4 font-bold text-lg text-white text-center ${R===le.First?"bg-indigo-600":"bg-purple-600"}`,children:R}),o.jsx("div",{className:"p-4 space-y-2 bg-white",children:an[R].map(L=>{const $=N.find(ne=>ne.shift===R&&ne.period===L&&ne.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return o.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-lg border ${$.cancelled?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[o.jsx("div",{className:"w-10 h-10 rounded bg-white flex items-center justify-center font-black text-slate-500 shadow-sm border border-slate-200",children:L}),$.cancelled?o.jsx("div",{className:"flex-1 flex justify-center items-center",children:o.jsx("span",{className:"text-red-500 font-bold uppercase tracking-wider text-sm",children:" "})}):o.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[o.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:$.start,onChange:ne=>Ye(R,L,"start",ne.target.value)}),o.jsx("span",{className:"text-slate-400 font-bold",children:""}),o.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:$.end,onChange:ne=>Ye(R,L,"end",ne.target.value)})]}),o.jsx("button",{onClick:()=>We(R,L),className:`w-8 h-8 rounded flex items-center justify-center transition-colors ${$.cancelled?"bg-white text-emerald-500 hover:text-emerald-700":"text-slate-400 hover:text-red-500 hover:bg-red-50"}`,title:$.cancelled?" ":" ","data-html2canvas-ignore":"true",children:o.jsx(M,{name:$.cancelled?"RotateCcw":"X",size:16})})]},L)})})]},R))}),o.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 flex justify-between items-end text-sm font-bold text-slate-500",children:[o.jsxs("div",{children:["",o.jsx("br",{})," "]}),o.jsx("div",{children:"____________"})]})]})]})]}),o.jsx(Cn,{isOpen:a,onClose:()=>c(!1),title:d?"":"",children:o.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:R=>m({...f,name:R.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:R=>m({...f,birthDate:R.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),o.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:R=>m({...f,telegramChatId:R.target.value}),placeholder:"12345678"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(at=f.shifts)==null?void 0:at.includes(le.First),onChange:()=>et(le.First)})," ",o.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(ee=f.shifts)==null?void 0:ee.includes(le.Second),onChange:()=>et(le.Second)})," ",o.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(R=>{var L;return o.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(L=f.subjectIds)==null?void 0:L.includes(R.id),onChange:$=>{const ne=f.subjectIds||[];m({...f,subjectIds:$.target.checked?[...ne,R.id]:ne.filter(De=>De!==R.id)})}})," ",o.jsx("span",{className:"text-sm dark:text-slate-300",children:R.name})]},R.id)})})]}),i==="subjects"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:y.name||"",onChange:R=>w({...y,name:R.target.value})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),o.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:y.color||"#ffffff",onChange:R=>w({...y,color:R.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),o.jsx("input",{type:"number",inputMode:"numeric",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.difficulty||5,onChange:R=>w({...y,difficulty:parseInt(R.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),o.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.requiredRoomType,onChange:R=>w({...y,requiredRoomType:R.target.value}),children:Xv.map(R=>o.jsx("option",{value:R,children:R},R))})]})]}),i==="classes"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:E.name||"",onChange:R=>C({...E,name:R.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:E.studentsCount||25,onChange:R=>C({...E,studentsCount:parseInt(R.target.value)})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:()=>C({...E,shift:le.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===le.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>C({...E,shift:le.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===le.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:x.name||"",onChange:R=>_({...x,name:R.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),o.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:x.capacity||30,onChange:R=>_({...x,capacity:parseInt(R.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:x.type,onChange:R=>_({...x,type:R.target.value}),children:Xv.map(R=>o.jsx("option",{value:R,children:R},R))})]})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:At,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),o.jsx(Cn,{isOpen:b,onClose:()=>B(!1),title:"  ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:F,onChange:R=>D(R.target.value),autoFocus:!0})]}),o.jsx("div",{className:"flex justify-end pt-2",children:o.jsx("button",{onClick:$e,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})})]})},k6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Hn(),{schedule1:i,schedule2:l,substitutions:a,saveScheduleData:c}=mi(),d=oi(),[h,f]=T.useState($c()),[m,y]=T.useState(!1),[w,E]=T.useState(null),[C,x]=T.useState(!1),[_,S]=T.useState(!1),[U,N]=T.useState(null),[v,b]=T.useState(""),[B,F]=T.useState(!1),[D,P]=T.useState(""),[I,ze]=T.useState(""),[Le,At]=T.useState("all"),[Je,se]=T.useState(""),[Ce,Ne]=T.useState(""),[Ye,We]=T.useState(""),[G,he]=T.useState(""),[$e,Re]=T.useState([]),[X,it]=T.useState(!1),[et,ot]=T.useState(!1),[Ze,at]=T.useState(!1),ee=Zk({maxWidth:767}),[R,L]=T.useState("lessons"),$=T.useMemo(()=>{const j={schedule:i,schedule2:l,settings:s};return Ok(new Date(h),j)},[h,i,l,s]);T.useEffect(()=>{var j;(j=d.state)!=null&&j.subParams&&(E(d.state.subParams),We(""),he(""),Re([]),it(!1),ot(!1),at(!1),y(!0),window.history.replaceState({},document.title))},[d.state]),T.useEffect(()=>{if(m&&w){const j=a.find(q=>q.scheduleItemId===w.scheduleItemId&&q.date===h);Re(j?j.refusals||[]:[]),it(!1),ot(!1),at(!1)}},[m,w,a,h]);const ne=T.useMemo(()=>{const j=new Date(h).getDay();return j===0||j===6?null:Ct[j-1]},[h]),De=T.useMemo(()=>e.filter(j=>{const q=j.name.toLowerCase().includes(I.toLowerCase()),Z=Le==="all"?!0:j.shifts&&j.shifts.includes(Le);return q&&Z}),[e,I,Le]),Be=T.useMemo(()=>e.filter(j=>j.unavailableDates.includes(h)),[e,h]),re=T.useMemo(()=>{if(!ne)return[];const j=Be.map(xe=>xe.id),q=$.filter(xe=>xe.day===ne&&j.includes(xe.teacherId)),V=a.filter(xe=>xe.date===h).map(xe=>xe.scheduleItemId),Ee=$.filter(xe=>V.includes(xe.id)),we=[...q];return Ee.forEach(xe=>{we.find(Ve=>Ve.id===xe.id)||we.push(xe)}),we.sort((xe,Ve)=>xe.period-Ve.period)},[$,ne,Be,a,h]),z=j=>{var Z;const q=e.find(V=>V.id===j);N(j),b(((Z=q==null?void 0:q.absenceReasons)==null?void 0:Z[h])||""),x(!0)},J=T.useCallback(async()=>{let j=[...e];const q=j.findIndex(V=>V.id===U);if(q===-1)return;const Z={...j[q]};Z.unavailableDates.includes(h)||(Z.unavailableDates=[...Z.unavailableDates,h]),Z.absenceReasons||(Z.absenceReasons={}),Z.absenceReasons[h]=v,j[q]=Z,await A({teachers:j}),x(!1)},[e,U,h,v,A]),me=T.useCallback(async j=>{let q=[...e];const Z=q.findIndex(Ee=>Ee.id===j);if(Z===-1)return;const V={...q[Z]};V.unavailableDates=V.unavailableDates.filter(Ee=>Ee!==h),V.absenceReasons&&delete V.absenceReasons[h],q[Z]=V,await A({teachers:q})},[e,h,A]),fe=T.useCallback(async(j,q=!1)=>{if(!w){alert(":   .    .");return}const Z=$.find(we=>we.id===w.scheduleItemId);if(!Z){alert(":     .");return}const V=a.filter(we=>!(we.scheduleItemId===w.scheduleItemId&&we.date===h)),Ee={id:rn(),date:h,scheduleItemId:w.scheduleItemId,originalTeacherId:Z.teacherId,replacementTeacherId:j,replacementRoomId:Ye||void 0,isMerger:q,lessonAbsenceReason:j!=="conducted"&&j!=="cancelled"&&G?G:void 0,refusals:$e};V.push(Ee);try{await c({substitutions:V}),y(!1),se(""),We(""),he(""),Re([]),E(null)}catch(we){console.error("Failed to save substitution:",we),alert("   .   .")}},[w,h,Ye,$,a,e,G,$e,c]),Ue=T.useCallback(async j=>{if(!w||!ne||!w.period||!w.shift||!w.teacherId){alert(":   .");return}const q=$.filter(V=>V.classId===j&&V.day===ne&&V.period===w.period&&V.shift===w.shift);if(q.length===0){alert("    .");return}const Z=a.filter(V=>!(V.scheduleItemId===w.scheduleItemId&&V.date===h));q.forEach(V=>{const Ee={id:rn(),date:h,scheduleItemId:w.scheduleItemId,originalTeacherId:w.teacherId,replacementTeacherId:V.teacherId,replacementClassId:V.classId,replacementSubjectId:V.subjectId,isMerger:!0,replacementRoomId:V.roomId,lessonAbsenceReason:G||void 0};Z.push(Ee)}),await c({substitutions:Z}),y(!1),se(""),We(""),he(""),E(null),ot(!1)},[w,h,ne,$,a,G,c]),Ae=T.useCallback(async j=>{if(!w)return;const q=$.find(K=>K.id===w.scheduleItemId),Z=$.find(K=>K.id===j);if(!q||!Z){alert(":     .");return}const V=[...a];let Ee,we;Ye?(Ee=Ye,we=Ze?Z.roomId:q.roomId):Ze?(Ee=q.roomId,we=Z.roomId):(Ee=Z.roomId,we=q.roomId);const xe=V.findIndex(K=>K.scheduleItemId===q.id&&K.date===h),Ve={id:xe>=0?V[xe].id:rn(),date:h,scheduleItemId:q.id,originalTeacherId:q.teacherId,replacementTeacherId:q.teacherId,replacementClassId:Z.classId,replacementSubjectId:Z.subjectId,replacementRoomId:Ee!==q.roomId?Ee:void 0};xe>=0?V[xe]=Ve:V.push(Ve);const ye=V.findIndex(K=>K.scheduleItemId===Z.id&&K.date===h),Q={id:ye>=0?V[ye].id:rn(),date:h,scheduleItemId:Z.id,originalTeacherId:Z.teacherId,replacementTeacherId:Z.teacherId,replacementClassId:q.classId,replacementSubjectId:q.subjectId,replacementRoomId:we!==Z.roomId?we:void 0};ye>=0?V[ye]=Q:V.push(Q),await c({substitutions:V}),y(!1),E(null),We(""),it(!1),at(!1)},[w,$,a,h,c,Ye,Ze]),ae=T.useCallback(async j=>{const q=a.filter(Z=>!(Z.scheduleItemId===j&&Z.date===h));await c({substitutions:q})},[a,h,c]),_e=T.useCallback(()=>{let j=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const q=a.some(V=>V.date===h&&V.replacementTeacherId!=="conducted"),Z=(V,Ee)=>{const xe=re.filter(Ve=>Ve.shift===Ee).filter(Ve=>{const ye=a.filter(Q=>Q.scheduleItemId===Ve.id&&Q.date===h);return ye.length>0&&ye.some(Q=>Q.replacementTeacherId!=="conducted")});xe.length>0&&(j+=`
 *${V.toUpperCase()}*
`,xe.forEach(Ve=>{var K;const ye=a.filter(ie=>ie.scheduleItemId===Ve.id&&ie.date===h);if(ye.some(ie=>ie.isMerger)){const ie=r.find(Qt=>Qt.id===Ve.classId),te=t.find(Qt=>Qt.id===Ve.subjectId),ce=e.find(Qt=>Qt.id===Ve.teacherId),oe=(ce==null?void 0:ce.name)||"?",ge=ye.map(Qt=>{var Jt;return(Jt=e.find(Fr=>Fr.id===Qt.replacementTeacherId))==null?void 0:Jt.name}).filter(Boolean).join(", "),ve=ye[0],Ke=ve!=null&&ve.replacementClassId?r.find(Qt=>Qt.id===ve.replacementClassId):null;let yt=` ${ie==null?void 0:ie.name} (${Ve.period} ): ${te==null?void 0:te.name} -> ${ge} (${Ke?`  ${Ke.name}`:""}) ( ${oe})`;const ut=ve==null?void 0:ve.replacementRoomId;if(ut){const Qt=((K=n.find(Jt=>Jt.id===ut))==null?void 0:K.name)||ut;yt+=`  . ${Qt}`}j+=yt+`
`}else ye.forEach(ie=>{var Zs,on,eA;if(ie.replacementTeacherId==="conducted")return;const te=r.find(Yt=>Yt.id===Ve.classId),ce=t.find(Yt=>Yt.id===Ve.subjectId),oe=e.find(Yt=>Yt.id===ie.replacementTeacherId),ge=e.find(Yt=>Yt.id===Ve.teacherId),ve=((Zs=n.find(Yt=>Yt.id===Ve.roomId))==null?void 0:Zs.name)||Ve.roomId||"?",Ke=(on=ge==null?void 0:ge.absenceReasons)==null?void 0:on[h],yt=ie==null?void 0:ie.lessonAbsenceReason,Jt=(yt===" "?yt:null)||(Ke===" "?Ke:null),Fr=(ge==null?void 0:ge.name)+(Jt?` (${Jt})`:""),Et=ie!=null&&ie.replacementRoomId?((eA=n.find(Yt=>Yt.id===ie.replacementRoomId))==null?void 0:eA.name)||ie.replacementRoomId:null,Lr=ie!=null&&ie.replacementClassId?r.find(Yt=>Yt.id===ie.replacementClassId):null,Fn=ie!=null&&ie.replacementSubjectId?t.find(Yt=>Yt.id===ie.replacementSubjectId):null,rs=Lr&&Fn&&!ie.isMerger;if(ie.replacementTeacherId==="cancelled")j+=` ${te==null?void 0:te.name} (${Ve.period} ): ${ce==null?void 0:ce.name} (${Fr}) ->  
`;else if(ie.replacementTeacherId===ie.originalTeacherId&&Et&&!Lr)j+=` ${te==null?void 0:te.name} (${Ve.period} ): ${ce==null?void 0:ce.name} (${ge==null?void 0:ge.name}) ->  ${ve}  ${Et}
`;else if(rs)j+=` ${te==null?void 0:te.name} (${Ve.period} ): ${ce==null?void 0:ce.name} ->  ${Lr==null?void 0:Lr.name} ${Fn==null?void 0:Fn.name} ( )${Et?`  . ${Et}`:""}
`;else{let Yt=` ${te==null?void 0:te.name} (${Ve.period} ): ${ce==null?void 0:ce.name} -> ${oe==null?void 0:oe.name} ( ${Fr})`;Et&&(Yt+=`  . ${Et}`),j+=Yt+`
`}})}),j+=`
`)};q?(Z(le.First,le.First),Z(le.Second,le.Second)):j+=`
 .`,navigator.clipboard.writeText(j),alert("     !")},[h,a,re,r,t,e,n]),Qe=T.useCallback(()=>{let j=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;a.filter(we=>we.date===h).forEach(we=>{var Ke;const xe=$.find(yt=>yt.id===we.scheduleItemId);if(!xe)return;let Ve="Unknown";if(we.replacementTeacherId==="cancelled")Ve=" ";else if(we.replacementTeacherId==="conducted")Ve=" ";else{const yt=e.find(ut=>ut.id===we.replacementTeacherId);yt&&(Ve=yt.name)}const ye=t.find(yt=>yt.id===xe.subjectId),Q=r.find(yt=>yt.id===xe.classId),K=we.date.replace(/-/g,""),ie=e.find(yt=>yt.id===we.originalTeacherId),te=(Ke=ie==null?void 0:ie.absenceReasons)==null?void 0:Ke[h],ce=we.lessonAbsenceReason,ve=(ce===" "?ce:null)||(te===" "?te:null);j+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${K}
SUMMARY:: ${Q==null?void 0:Q.name} - ${ye==null?void 0:ye.name}
DESCRIPTION:: ${Ve}${we.isMerger?" ()":""}${ve?` (: ${ve})`:""}
END:VEVENT
`}),j+="END:VCALENDAR";const Z=new Blob([j],{type:"text/calendar"}),V=URL.createObjectURL(Z),Ee=document.createElement("a");Ee.href=V,Ee.download="substitutions.ics",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee)},[h,a,$,e,t,r]),je=T.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let j=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,q=!1;const Z=new Set,V=[le.First,le.Second];for(const we of V){const Ve=re.filter(ye=>ye.shift===we).filter(ye=>a.some(Q=>Q.scheduleItemId===ye.id&&Q.date===h&&Q.replacementTeacherId!=="conducted"));Ve.length>0&&(q=!0,j+=` *${we.toUpperCase()}*
`,Ve.forEach(ye=>{var ie;const Q=a.filter(te=>te.scheduleItemId===ye.id&&te.date===h);if(Q.some(te=>te.isMerger)){const te=r.find(ut=>ut.id===ye.classId),ce=t.find(ut=>ut.id===ye.subjectId),oe=e.find(ut=>ut.id===ye.teacherId),ge=Q.map(ut=>{var Qt;return(Qt=e.find(Jt=>Jt.id===ut.replacementTeacherId))==null?void 0:Qt.name}).filter(Boolean).join(", "),ve=Q[0],Ke=ve!=null&&ve.replacementClassId?r.find(ut=>ut.id===ve.replacementClassId):null;oe!=null&&oe.telegramChatId&&Z.add(oe.telegramChatId),Q.forEach(ut=>{const Qt=e.find(Jt=>Jt.id===ut.replacementTeacherId);Qt!=null&&Qt.telegramChatId&&Z.add(Qt.telegramChatId)});const yt=ve!=null&&ve.replacementRoomId?((ie=n.find(ut=>ut.id===ve.replacementRoomId))==null?void 0:ie.name)||ve.replacementRoomId:"";j+=`${ye.period}  (${te==null?void 0:te.name} ${ce==null?void 0:ce.name}): *${ge}* (${Ke?`  ${Ke.name}`:""}). : ${yt}
`}else Q.forEach(te=>{var eA,Yt,wi;if(!te)return;const ce=r.find(vr=>vr.id===ye.classId),oe=t.find(vr=>vr.id===ye.subjectId),ge=e.find(vr=>vr.id===te.originalTeacherId),ve=e.find(vr=>vr.id===te.replacementTeacherId),Ke=(eA=ge==null?void 0:ge.absenceReasons)==null?void 0:eA[h],yt=te.lessonAbsenceReason,Jt=(yt===" "?yt:null)||(Ke===" "?Ke:null),Fr=(ge==null?void 0:ge.name)+(Jt?` (${Jt})`:""),Et=((Yt=n.find(vr=>vr.id===ye.roomId))==null?void 0:Yt.name)||ye.roomId||"",Lr=te.replacementRoomId?((wi=n.find(vr=>vr.id===te.replacementRoomId))==null?void 0:wi.name)||te.replacementRoomId:Et,Fn=te.replacementClassId?r.find(vr=>vr.id===te.replacementClassId):null,rs=te.replacementSubjectId?t.find(vr=>vr.id===te.replacementSubjectId):null,Zs=Fn&&rs&&!te.isMerger;let on=`${ye.period}  (${ce==null?void 0:ce.name} ${oe==null?void 0:oe.name}${ye.direction?` ${ye.direction}`:""}): `;te.replacementTeacherId==="cancelled"?on+=`* * ( ${Fr})`:Zs?(on+=`  : ${Fn==null?void 0:Fn.name} ${rs==null?void 0:rs.name} ( ${ce==null?void 0:ce.name} ${oe==null?void 0:oe.name})`,Lr!==Et&&(on+=`  . ${Lr}`)):te.replacementTeacherId===te.originalTeacherId?on+=`: ${Fr}.  : ${Et}  ${Lr}`:(on+=`*${ve==null?void 0:ve.name}* ( *${Fr}*)`,Et!==Lr?on+=`. : ${Et}  ${Lr}`:Lr!==""&&(on+=`. : ${Lr}`)),j+=`${on}
`,ge!=null&&ge.telegramChatId&&Z.add(ge.telegramChatId),ve!=null&&ve.telegramChatId&&Z.add(ve.telegramChatId)})}),j+=`
`)}if(q||(j+=` .
`),Be.forEach(we=>{var Q;const xe=a.some(K=>K.date===h&&K.originalTeacherId===we.id&&K.replacementTeacherId!=="cancelled"&&K.replacementTeacherId!=="conducted"),Ve=(Q=we.absenceReasons)==null?void 0:Q[h],ye=Ve===" "?Ve:"";we.telegramChatId&&!xe&&we.unavailableDates.includes(h)&&(Z.add(we.telegramChatId),q?j+=`_:  ${we.name} ${ye},        /._
`:j+=`_:  ${we.name} ${ye},      ._
`)}),Z.size===0){alert("    Telegram Chat ID   .");return}const Ee=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const we=Array.from(Z).map(xe=>fetch(Ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:xe,text:j,parse_mode:"Markdown"})}));await Promise.all(we),alert(`   ${Z.size} !`)}catch(we){console.error("    Telegram:",we),alert("     Telegram.     .")}},[h,re,a,r,t,e,n,Be,s==null?void 0:s.telegramToken]),Fe=T.useCallback(async(j,q,Z,V,Ee,we)=>{const Ve=new Date(we).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),ye=q.shift===le.First?"1 ":"2 ",Q=` *  *
${j.name}

 : ${Ve}
 : ${ye}
 : ${Z==null?void 0:Z.name}
1 : ${q.period}
 : ${V==null?void 0:V.name}
 : ${Ee||" "}`;if(s!=null&&s.telegramToken&&j.telegramChatId)try{const ie=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:j.telegramChatId,text:Q,parse_mode:"Markdown"})})).json();ie.ok?alert(`   Telegram  ${j.name}!`):ie.description.includes("chat not found")?alert(` Telegram:   .

  ${j.name}       "" (/start).`):alert(` Telegram: ${ie.description}`)}catch(K){alert("   Telegram (/)."),console.error(K)}else navigator.share?navigator.share({title:"",text:Q}).catch(()=>{}):(navigator.clipboard.writeText(Q),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),st=T.useMemo(()=>w?new Set(a.filter(j=>j.date===h&&j.replacementTeacherId!=="conducted"&&j.replacementTeacherId!=="cancelled").map(j=>{const q=$.find(Z=>Z.id===j.scheduleItemId);return q&&q.period===w.period&&q.shift===w.shift?j.replacementTeacherId:null}).filter(j=>!!j)):new Set,[a,$,h,w]),tt=T.useMemo(()=>{if(!w||!ne)return[];const j=h.substring(0,7);return e.filter(q=>q.name.toLowerCase().includes(Je.toLowerCase())).map(q=>{const Z=q.unavailableDates.includes(h),V=$.some(Q=>Q.teacherId===q.id&&Q.day===ne&&Q.period===w.period&&Q.shift===w.shift),Ee=st.has(q.id),we=V||Ee,xe=q.subjectIds.includes(w.subjectId),Ve=a.filter(Q=>Q.replacementTeacherId===q.id&&Q.date.startsWith(j)).length;let ye=0;return Z&&(ye-=1e3),we&&(ye-=100),xe&&(ye+=50),{teacher:q,isAbsent:Z,isBusy:we,isSpecialist:xe,score:ye,subsCount:Ve}}).sort((q,Z)=>Z.score-q.score)},[e,w,h,Je,ne,$,a,st]),ht=T.useMemo(()=>{if(!w||!ne)return[];const j=$.filter(Z=>Z.day===ne&&Z.period===w.period&&Z.shift===w.shift&&Z.classId!==w.classId),q=new Map;return j.forEach(Z=>{const V=r.find(xe=>xe.id===Z.classId),Ee=e.find(xe=>xe.id===Z.teacherId),we=t.find(xe=>xe.id===Z.subjectId);if(V&&Ee){q.has(V.id)||q.set(V.id,{classEntity:V,teachers:[],subjects:[]});const xe=q.get(V.id);xe.teachers.includes(Ee.name)||xe.teachers.push(Ee.name),we&&!xe.subjects.includes(we.name)&&xe.subjects.push(we.name)}}),Array.from(q.values())},[$,w,ne,r,e,t]),Ie=T.useMemo(()=>{var we;if(!w)return null;const j=$.find(xe=>xe.id===w.scheduleItemId);if(!j)return null;const q=r.find(xe=>xe.id===j.classId),Z=t.find(xe=>xe.id===j.subjectId),V=e.find(xe=>xe.id===j.teacherId),Ee=((we=V==null?void 0:V.unavailableDates)==null?void 0:we.includes(h))||!1;return{className:q==null?void 0:q.name,subjectName:Z==null?void 0:Z.name,teacherName:V==null?void 0:V.name,teacherId:V==null?void 0:V.id,period:j.period,roomId:j.roomId,isTeacherAbsent:Ee}},[w,$,r,t,e,h]),be=T.useMemo(()=>!(Ie!=null&&Ie.teacherId)||!ne?[]:$.filter(j=>j.teacherId===Ie.teacherId&&j.day===ne&&j.id!==(w==null?void 0:w.scheduleItemId)).sort((j,q)=>j.period-q.period),[$,Ie,ne,w]),qe=T.useMemo(()=>{if(!ne||Ce.length<2)return[];const j=Ce.toLowerCase(),q=e.filter(Ee=>Ee.name.toLowerCase().includes(j)),Z=r.filter(Ee=>Ee.name.toLowerCase().includes(j)),V=[];return q.forEach(Ee=>{$.filter(xe=>xe.teacherId===Ee.id&&xe.day===ne).forEach(xe=>{const Ve=r.find(Q=>Q.id===xe.classId),ye=t.find(Q=>Q.id===xe.subjectId);V.push({...xe,entityName:Ee.name,subInfo:Ve==null?void 0:Ve.name,subjectName:ye==null?void 0:ye.name})})}),Z.forEach(Ee=>{$.filter(xe=>xe.classId===Ee.id&&xe.day===ne).forEach(xe=>{if(V.find(Q=>Q.id===xe.id))return;const Ve=e.find(Q=>Q.id===xe.teacherId),ye=t.find(Q=>Q.id===xe.subjectId);V.push({...xe,entityName:Ee.name,subInfo:Ve==null?void 0:Ve.name,subjectName:ye==null?void 0:ye.name})})}),V.sort((Ee,we)=>Ee.period-we.period)},[Ce,ne,e,r,$,t]),lt=(j,q)=>{let Z=!1;if(q){if(!window.confirm("     .     ?"))return;Z=!0}fe(j,Z)},It=(j,q)=>{q.stopPropagation(),$e.includes(j)?Re($e.filter(Z=>Z!==j)):Re([...$e,j])};return o.jsxs("div",{className:"h-full flex flex-col gap-6",children:[o.jsx("div",{className:"flex flex-col gap-4",children:o.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),o.jsx("input",{type:"date",value:h,onChange:j=>f(j.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]})]}),o.jsxs("div",{className:"flex md:hidden bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-full",children:[o.jsxs("button",{onClick:()=>L("lessons"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${R==="lessons"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:["  ",re.length>0&&`(${re.length})`]}),o.jsx("button",{onClick:()=>L("teachers"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${R==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("button",{onClick:()=>F(!B),className:`h-[50px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all mt-6 ${B?"bg-indigo-600 text-white border-indigo-600":"bg-slate-50 dark:bg-slate-700 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-600"}`,children:[o.jsx(M,{name:"History",size:18})," ",B?" ":""]})})]})})}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[o.jsxs("div",{className:`w-full md:w-80 flex-col gap-4 ${ee&&R!=="teachers"?"hidden":"flex"}`,children:[o.jsx("div",{className:"md:hidden",children:o.jsxs("button",{onClick:()=>F(!B),className:`w-full py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all ${B?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-dark-800 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-700"}`,children:[o.jsx(M,{name:"History",size:18})," ",B?" ":"  "]})}),B?o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),o.jsx("input",{placeholder:"  /...",value:D,onChange:j=>P(j.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:a.filter(j=>{var q;return j.date.includes(D)||((q=e.find(Z=>Z.id===j.replacementTeacherId))==null?void 0:q.name.toLowerCase().includes(D.toLowerCase()))}).map(j=>{const q=e.find(V=>V.id===j.replacementTeacherId),Z=n.find(V=>V.id===j.replacementRoomId);return o.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[o.jsx("div",{className:"font-bold",children:j.date}),o.jsxs("div",{children:[(q==null?void 0:q.name)||(j.replacementTeacherId==="cancelled"?"":""),j.isMerger&&o.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),Z&&o.jsxs("div",{className:"text-indigo-500",children:[". ",Z.name]})]},j.id)})})]}):o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"UserX",size:18,className:"text-red-500"})," "]}),o.jsxs("div",{className:"mb-3 space-y-2",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>At("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Le==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),o.jsx("button",{onClick:()=>At(le.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Le===le.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>At(le.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Le===le.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),o.jsx("input",{placeholder:" ...",value:I,onChange:j=>ze(j.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[De.map(j=>{const q=j.unavailableDates.includes(h),Z=j.absenceReasons?j.absenceReasons[h]:"";return o.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${q?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:`text-sm font-medium ${q?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:j.name}),o.jsx("button",{onClick:()=>q?me(j.id):z(j.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${q?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:q?"":""})]}),o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("div",{className:"flex gap-1",children:j.shifts.map(V=>o.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:V===le.First?"1":"2"},V))}),q&&o.jsxs("div",{className:"flex items-center gap-1",children:[Z&&o.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:Z}),o.jsx("button",{onClick:()=>z(j.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:o.jsx(M,{name:"Edit2",size:14})})]})]})]},j.id)}),De.length===0&&o.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),o.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${ee&&R!=="lessons"?"hidden":"flex"}`,children:[o.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["   (",re.length,")"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 w-full xl:w-auto",children:[o.jsxs("button",{onClick:Qe,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-xs font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[o.jsx(M,{name:"Calendar",size:16})," iCal"]}),re.length>0&&o.jsxs("button",{onClick:_e,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-xs font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[o.jsx(M,{name:"Copy",size:16})," "]}),o.jsxs("button",{onClick:je,className:"px-3 py-2 bg-blue-500 text-white rounded-xl text-xs font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"Send",size:16})," Telegram"]}),o.jsxs("button",{onClick:()=>{Ne(""),S(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-xs font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[o.jsx(M,{name:"Search",size:16})," "]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:re.length===0?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[o.jsx(M,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),o.jsx("p",{children:" ,     "})]}):re.map(j=>{var ve;const q=a.filter(Ke=>Ke.scheduleItemId===j.id&&Ke.date===h),Z=q.length>0,V=Z?q[0]:null,Ee=V&&V.replacementTeacherId!=="cancelled"&&V.replacementTeacherId!=="conducted"?e.find(Ke=>Ke.id===V.replacementTeacherId):null,we=e.find(Ke=>Ke.id===j.teacherId),xe=t.find(Ke=>Ke.id===j.subjectId),Ve=r.find(Ke=>Ke.id===j.classId),ye=n.find(Ke=>Ke.id===j.roomId),Q=ye?ye.name:j.roomId,K=V==null?void 0:V.replacementRoomId,ie=K?((ve=n.find(Ke=>Ke.id===K))==null?void 0:ve.name)||K:void 0,te=V!=null&&V.replacementClassId?r.find(Ke=>Ke.id===V.replacementClassId):null,ce=V!=null&&V.replacementSubjectId?t.find(Ke=>Ke.id===V.replacementSubjectId):null;let oe=null;if((V==null?void 0:V.replacementTeacherId)==="conducted")oe=o.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[o.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),o.jsx("button",{onClick:()=>ae(j.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:o.jsx(M,{name:"X",size:16})})]});else if((V==null?void 0:V.replacementTeacherId)==="cancelled")oe=o.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[o.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),o.jsx("button",{onClick:()=>ae(j.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:o.jsx(M,{name:"X",size:16})})]});else if(Z){const Ke=(V==null?void 0:V.replacementTeacherId)===(V==null?void 0:V.originalTeacherId)&&K&&!te,yt=te&&ce&&!(V!=null&&V.isMerger),ut=q.map(Qt=>{var Jt;return(Jt=e.find(Fr=>Fr.id===Qt.replacementTeacherId))==null?void 0:Jt.name}).filter(Boolean).join(", ");oe=o.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl flex-1 justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Ke?" ":yt?" ":" "}),o.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm truncate",title:ut,children:Ke?"  ":yt?` ${te==null?void 0:te.name}`:ut}),(V==null?void 0:V.isMerger)&&o.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",te?`(  ${te.name})`:""]}),(V==null?void 0:V.lessonAbsenceReason)&&o.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",V.lessonAbsenceReason]})]}),o.jsxs("div",{className:"flex gap-1 shrink-0",children:[o.jsx("button",{onClick:()=>{(Ee||we)&&Fe(Ee||we,j,Ve,xe,ie||Q||void 0,h)},className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:o.jsx(M,{name:"Send",size:18})}),o.jsx("button",{onClick:()=>ae(j.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:o.jsx(M,{name:"UserX",size:18})})]})]})}else oe=o.jsxs("button",{onClick:()=>{E({scheduleItemId:j.id,subjectId:j.subjectId,period:j.period,shift:j.shift,classId:j.classId,teacherId:j.teacherId,roomId:j.roomId,day:j.day}),y(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",o.jsx(M,{name:"ArrowRight",size:16})]});const ge=!Be.find(Ke=>Ke.id===j.teacherId);return o.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[o.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),o.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:j.period})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:Ve==null?void 0:Ve.name}),o.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:j.shift===le.First?"1":"2"}),o.jsx("span",{className:"text-slate-400",children:"|"}),o.jsx("span",{children:xe==null?void 0:xe.name})]})]}),o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:ge?"font-semibold":"line-through decoration-red-400 decoration-2",children:we==null?void 0:we.name}),Q&&o.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Q," ",ie&&o.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",ie]})]}),(V==null?void 0:V.lessonAbsenceReason)&&o.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",V.lessonAbsenceReason,")"]}),te&&ce&&!(V!=null&&V.isMerger)&&o.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",te.name]})]})]})]}),o.jsx("div",{className:"w-full xl:w-auto mt-2 xl:mt-0",children:oe})]},j.id)})})]})]}),o.jsxs(Cn,{isOpen:m,onClose:()=>y(!1),title:" ",children:[Ie&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[Ie.className,"  ",Ie.period," "]}),o.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[o.jsx("span",{children:Ie.subjectName}),o.jsx("span",{className:Ie.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:Ie.teacherName})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),o.jsxs("select",{value:Ye,onChange:j=>We(j.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[o.jsx("option",{value:"",children:"  "}),n.map(j=>o.jsxs("option",{value:j.id,children:[j.name," (",j.capacity," )"]},j.id))]})]}),Ie&&!Ie.isTeacherAbsent&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),o.jsxs("select",{value:G,onChange:j=>he(j.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[o.jsx("option",{value:"",children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:" "})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsx("button",{onClick:()=>fe("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),o.jsx("button",{onClick:()=>fe("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{onClick:()=>ot(!et),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[o.jsx(M,{name:"Users",size:16})," :    (  )"]}),et&&o.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),ht.length===0?o.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):ht.map(j=>o.jsxs("button",{onClick:()=>Ue(j.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.classEntity.name}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[j.subjects.join(", ")," ",o.jsx("span",{className:"text-slate-400",children:"|"})," ",j.teachers.join(", ")]})]},j.classEntity.id))]})]}),(Ie==null?void 0:Ie.teacherId)&&!Ie.isTeacherAbsent&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Ie.teacherId&&fe(Ie.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),be.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>it(!X),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[o.jsx(M,{name:"RotateCw",size:16}),"     "]}),X&&o.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"mb-3",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsx("input",{type:"checkbox",checked:Ze,onChange:j=>at(j.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),o.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),o.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",o.jsx("br",{})," :     ,   ."]})]}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),be.map(j=>{const q=r.find(V=>V.id===j.classId),Z=t.find(V=>V.id===j.subjectId);return o.jsxs("button",{onClick:()=>Ae(j.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[o.jsxs("span",{className:"font-bold",children:[j.period," "]}),": ",q==null?void 0:q.name," - ",Z==null?void 0:Z.name]},j.id)})]})]})]}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx(M,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),o.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Je,onChange:j=>se(j.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),o.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[tt.map(({teacher:j,isAbsent:q,isBusy:Z,isSpecialist:V,subsCount:Ee})=>{const we=$e.includes(j.id);return o.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${q?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":we?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":Z?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${V?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:V?o.jsx(M,{name:"Star",size:14,fill:"currentColor"}):j.name[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:j.name}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[V&&o.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),Z&&o.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),q&&o.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),we&&o.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),o.jsxs("span",{className:`px-1.5 rounded font-medium ${Ee>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Ee]})]})]})]}),!q&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:xe=>It(j.id,xe),className:`px-3 py-1 text-xs font-bold rounded border ${we?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:we?"":""}),!we&&!Z&&o.jsx("button",{onClick:()=>lt(j.id,Z),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!we&&Z&&o.jsx("button",{onClick:()=>lt(j.id,Z),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},j.id)}),tt.length===0&&o.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),o.jsxs(Cn,{isOpen:_,onClose:()=>S(!1),title:"  ",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),o.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:Ce,onChange:j=>Ne(j.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),o.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[qe.map(j=>{var q;return o.jsxs("button",{onClick:()=>{S(!1),E({scheduleItemId:j.id,subjectId:j.subjectId,period:j.period,shift:j.shift,classId:j.classId,teacherId:j.teacherId,roomId:j.roomId,day:j.day}),y(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[j.entityName," ",o.jsxs("span",{className:"font-normal text-slate-500",children:["(",j.subInfo,")"]})]}),o.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[j.period," "]})]}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[o.jsx("span",{children:j.subjectName}),j.roomId&&o.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((q=n.find(Z=>Z.id===j.roomId))==null?void 0:q.name)||j.roomId]})]})]},j.id)}),Ce.length>1&&qe.length===0&&o.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),o.jsx(Cn,{isOpen:C,onClose:()=>x(!1),title:" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("select",{value:v,onChange:j=>b(j.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:J,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},F6=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=Hn(),{schedule1:A,schedule2:i}=mi(),[l,a]=T.useState("teachers"),[c,d]=T.useState($c()),[h,f]=T.useState(le.First),[m,y]=T.useState(1),[w,E]=T.useState(le.First),[C,x]=T.useState(1),[_,S]=T.useState(""),[U,N]=T.useState(""),v=T.useMemo(()=>{const I={schedule:A,schedule2:i,settings:n};return Ok(new Date(c),I)},[c,A,i,n]);T.useEffect(()=>{n&&(S(n.telegramToken||""),N(n.feedbackChatId||""))},[n]),T.useEffect(()=>{y(h===le.First?1:0)},[h]),T.useEffect(()=>{x(w===le.First?1:0)},[w]);const b=T.useMemo(()=>{const I=new Date(c).getDay();return I===0||I===6?null:Ct[I-1]},[c]),B=an[h],F=T.useMemo(()=>b?e.filter(I=>I.shifts&&!I.shifts.includes(h)||I.unavailableDates.includes(c)?!1:!v.some(Le=>Le.teacherId===I.id&&Le.day===b&&Le.period>m&&Le.shift===h)).sort((I,ze)=>I.name.localeCompare(ze.name)):[],[e,c,b,m,h,v]),D=T.useMemo(()=>{if(!b)return[];const I=new Set;return v.forEach(Le=>{Le.day===b&&Le.period===C&&Le.shift===w&&Le.roomId&&I.add(Le.roomId)}),r.filter(Le=>!I.has(Le.id)).map(Le=>Le.name)},[v,r,b,C,w]),P=async()=>{await s({settings:{...n,telegramToken:_,feedbackChatId:U}}),alert(" !")};return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(M,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>a("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),o.jsx("button",{onClick:()=>a("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),o.jsx("button",{onClick:()=>a("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),l!=="settings"&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsx("input",{type:"date",value:c,onChange:I=>d(I.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),l==="teachers"&&o.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>f(le.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===le.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>f(le.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===le.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),o.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:B.map(I=>o.jsx("button",{onClick:()=>y(I),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${m===I?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:I},I))})]})]}),l==="rooms"&&o.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>E(le.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${w===le.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>E(le.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${w===le.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),o.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:an[w].map(I=>o.jsx("button",{onClick:()=>x(I),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${C===I?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:I},I))})]})]}),l==="settings"&&o.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),o.jsx("input",{type:"password",value:_,onChange:I=>S(I.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),o.jsx("input",{type:"text",value:U,onChange:I=>N(I.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),o.jsxs("button",{onClick:P,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"Save",size:20}),"  "]})]})]}),l==="teachers"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[F.map(I=>o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:o.jsx(M,{name:"CheckCircle",size:22})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:I.name}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:I.subjectIds.slice(0,2).map(ze=>{const Le=t.find(At=>At.id===ze);return Le?o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:Le.name},ze):null})})]})]},I.id)),F.length===0&&o.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",m,"   ",h]})]}),l==="rooms"&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[D.map(I=>o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:o.jsx(M,{name:"DoorOpen",size:20})}),o.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:I}),o.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},I)),D.length===0&&o.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[o.jsx(M,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),o.jsx("p",{children:"      (   )."})]})]})]})};var S6=Object.defineProperty,pf=Object.getOwnPropertySymbols,s2=Object.prototype.hasOwnProperty,A2=Object.prototype.propertyIsEnumerable,MC=(t,e,r)=>e in t?S6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U6=(t,e)=>{for(var r in e||(e={}))s2.call(e,r)&&MC(t,r,e[r]);if(pf)for(var r of pf(e))A2.call(e,r)&&MC(t,r,e[r]);return t},Q6=(t,e)=>{var r={};for(var n in t)s2.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&pf)for(var n of pf(t))e.indexOf(n)<0&&A2.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ao;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let y=0;y<this.size;y++)f.push(!1);for(let y=0;y<this.size;y++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let y=1e9;for(let w=0;w<8;w++){this.applyMask(w),this.drawFormatBits(w);const E=this.getPenaltyScore();E<y&&(h=w,y=E),this.applyMask(w)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let y,w;for(y=d;;y++){const _=e.getNumDataCodewords(y,c)*8,S=l.getTotalBits(a,y);if(S<=_){w=S;break}if(y>=h)throw new RangeError("Data too long")}for(const _ of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&w<=e.getNumDataCodewords(y,_)*8&&(c=_);let E=[];for(const _ of a){n(_.mode.modeBits,4,E),n(_.numChars,_.mode.numCharCountBits(y),E);for(const S of _.getData())E.push(S)}A(E.length==w);const C=e.getNumDataCodewords(y,c)*8;A(E.length<=C),n(0,Math.min(4,C-E.length),E),n(0,(8-E.length%8)%8,E),A(E.length%8==0);for(let _=236;E.length<C;_^=253)n(_,8,E);let x=[];for(;x.length*8<E.length;)x.push(0);return E.forEach((_,S)=>x[S>>>3]|=_<<7-(S&7)),new e(y,c,x,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=a+h,y=c+d;0<=m&&m<this.size&&0<=y&&y<this.size&&this.setFunctionModule(m,y,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),y=h-m%h,w=Math.floor(m/h);let E=[];const C=e.reedSolomonComputeDivisor(f);for(let _=0,S=0;_<h;_++){let U=a.slice(S,S+w-f+(_<y?0:1));S+=U.length;const N=e.reedSolomonComputeRemainder(U,C);_<y&&U.push(0),E.push(U.concat(N))}let x=[];for(let _=0;_<E[0].length;_++)E.forEach((S,U)=>{(_!=w-f||U>=y)&&x.push(S[_])});return A(x.length==m),x}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,w=(d+1&2)==0?this.size-1-h:h;!this.isFunction[w][m]&&c<a.length*8&&(this.modules[w][m]=s(a[c>>>3],7-(c&7)),c++)}}A(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let m=!1,y=0,w=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[f][E]==m?(y++,y==5?a+=e.PENALTY_N1:y>5&&a++):(this.finderPenaltyAddHistory(y,w),m||(a+=this.finderPenaltyCountPatterns(w)*e.PENALTY_N3),m=this.modules[f][E],y=1);a+=this.finderPenaltyTerminateAndCount(m,y,w)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,y=0,w=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][f]==m?(y++,y==5?a+=e.PENALTY_N1:y>5&&a++):(this.finderPenaltyAddHistory(y,w),m||(a+=this.finderPenaltyCountPatterns(w)*e.PENALTY_N3),m=this.modules[E][f],y=1);a+=this.finderPenaltyTerminateAndCount(m,y,w)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const y=this.modules[f][m];y==this.modules[f][m+1]&&y==this.modules[f+1][m]&&y==this.modules[f+1][m+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,y)=>m+(y?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),a+=h*e.PENALTY_N4,A(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((m,y)=>d[y]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return A(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];A(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function s(a,c){return(a>>>c&1)!=0}function A(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)n(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);n(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),n(h,11,c)}return d<a.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)n(a,8,c);else if(a<16384)n(2,2,c),n(a,14,c);else if(a<1e6)n(6,3,c),n(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let l=i;l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=l})(Ao||(Ao={}));(t=>{(e=>{const r=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Ao||(Ao={}));(t=>{(e=>{const r=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Ao||(Ao={}));var Gl=Ao;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var N6={L:Gl.QrCode.Ecc.LOW,M:Gl.QrCode.Ecc.MEDIUM,Q:Gl.QrCode.Ecc.QUARTILE,H:Gl.QrCode.Ecc.HIGH},R6=128,D6="L",j6="#FFFFFF",P6="#000000",L6=!1,i2=4,M6=.1;function O6(t,e=0){const r=[];return t.forEach(function(n,s){let A=null;n.forEach(function(i,l){if(!i&&A!==null){r.push(`M${A+e} ${s+e}h${l-A}v1H${A+e}z`),A=null;return}if(l===n.length-1){if(!i)return;A===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${A+e},${s+e} h${l+1-A}v1H${A+e}z`);return}i&&A===null&&(A=l)})}),r.join("")}function H6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function V6(t,e,r,n){if(n==null)return null;const s=r?i2:0,A=t.length+s*2,i=Math.floor(e*M6),l=A/e,a=(n.width||i)*l,c=(n.height||i)*l,d=n.x==null?t.length/2-a/2:n.x*l,h=n.y==null?t.length/2-c/2:n.y*l;let f=null;if(n.excavate){let m=Math.floor(d),y=Math.floor(h),w=Math.ceil(a+d-m),E=Math.ceil(c+h-y);f={x:m,y,w,h:E}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function K6(t){const e=t,{value:r,size:n=R6,level:s=D6,bgColor:A=j6,fgColor:i=P6,includeMargin:l=L6,imageSettings:a}=e,c=Q6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Gl.QrCode.encodeText(r,N6[s]).getModules();const h=l?i2:0,f=d.length+h*2,m=V6(d,n,l,a);let y=null;a!=null&&m!=null&&(m.excavation!=null&&(d=H6(d,m.excavation)),y=Is.createElement("image",{xlinkHref:a.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const w=O6(d,h);return Is.createElement("svg",U6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),Is.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Is.createElement("path",{fill:i,d:w,shapeRendering:"crispEdges"}),y)}const G6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,saveStaticData:i,dutyZones:l}=Hn(),{schedule1:a,schedule2:c,substitutions:d,saveScheduleData:h,dutySchedule:f,nutritionRecords:m}=mi(),y=T.useRef(null),w=T.useRef(null),E=T.useRef(null),[C,x]=T.useState($c()),[_,S]=T.useState(()=>cg(new Date,s)),[U,N]=T.useState(!1),[v,b]=T.useState(!1),[B,F]=T.useState(""),[D,P]=T.useState(""),[I,ze]=T.useState(!1),[Le,At]=T.useState(""),Je=T.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,schedule:a,schedule2:c,substitutions:d,dutyZones:l,dutySchedule:f,nutritionRecords:m}),[t,e,r,n,s,A,a,c,d,l,f,m]),se=()=>_===2?c:a,Ce=re=>{const z=new Date(re).getMonth();return z>=0&&z<=4?c:a},Ne=T.useMemo(()=>{const re=new Set;return r.forEach(z=>{const J=z.name.match(/^(\d+)/);J&&re.add(J[1])}),Array.from(re).sort((z,J)=>parseInt(z)-parseInt(J))},[r]);T.useEffect(()=>{Ne.length>0&&!Le&&At(Ne[0])},[Ne]);const Ye=re=>{var me;const z=(me=re.target.files)==null?void 0:me[0];if(!z)return;const J=new FileReader;J.onload=async fe=>{var Ue;try{const Ae=JSON.parse((Ue=fe.target)==null?void 0:Ue.result);if(Ae.teachers&&(Ae.schedule||Ae.schedule2)){if(window.confirm("    . ?")){const ae={...$r,...Ae,rooms:Ae.rooms||$r.rooms,classes:Ae.classes||[],schedule:Ae.schedule||[],schedule2:Ae.schedule2||[],teachers:Ae.teachers||[],subjects:Ae.subjects||[],substitutions:Ae.substitutions||[],settings:{...$r.settings,...Ae.settings}};await i(ae),await h(ae),alert("  !")}}else alert("  .")}catch{alert("  .")}},J.readAsText(z)},We=()=>{const re=se();let z=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Ct.forEach(Ue=>{z+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${Ue}</td></tr>`,[le.First,le.Second].forEach(Ae=>{const ae=r.filter(_e=>_e.shift===Ae);ae.length!==0&&(z+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${Ae}</td></tr>`,z+='<tr><th class="header"></th>',an[Ae].forEach(_e=>z+=`<th class="header">${_e} </th>`),z+="</tr>",ae.forEach(_e=>{z+=`<tr><td class="class-cell">${_e.name}</td>`,an[Ae].forEach(Qe=>{const je=re.filter(Fe=>Fe.classId===_e.id&&Fe.day===Ue&&Fe.shift===Ae&&Fe.period===Qe);z+='<td style="height: 60px;">',je.forEach(Fe=>{const st=t.find(be=>be.id===Fe.subjectId),tt=e.find(be=>be.id===Fe.teacherId),ht=n.find(be=>be.id===Fe.roomId),Ie=ht?ht.name:Fe.roomId;z+=`<div style="background-color: ${(st==null?void 0:st.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(st==null?void 0:st.name)||""} ${Fe.direction||""}</div>
                                <div class="meta">${(tt==null?void 0:tt.name)||""} ${Ie?`(. ${Ie})`:""}</div>
                            </div>`}),z+="</td>"}),z+="</tr>"}))})}),z+="</table></body></html>";const J=new Blob([z],{type:"application/vnd.ms-excel"}),me=URL.createObjectURL(J),fe=document.createElement("a");fe.href=me,fe.download=`_22_${_}.xls`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)},G=()=>{const re=se(),z={[ct.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ct.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ct.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ct.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ct.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let J=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;J+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[le.First,le.Second].forEach(Ae=>{const ae=an[Ae];J+="<table>",J+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${Ct.length*ae.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,J+="<tr>",Ct.forEach(Qe=>{var Fe;const je=((Fe=z[Qe])==null?void 0:Fe.header)||"#f3f4f6";J+=`<th colspan="${ae.length}" class="header" style="border: 2px solid #000; background-color: ${je};">${Qe}</th>`}),J+="</tr>",J+="<tr>",Ct.forEach(Qe=>{var Fe;const je=((Fe=z[Qe])==null?void 0:Fe.header)||"#f3f4f6";ae.forEach(st=>J+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${je};"></th>`)}),J+="</tr>";const _e="#e5e7eb";J+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${_e};">${Ae}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${_e};"></th>
            `,Ct.forEach(Qe=>{var Fe;const je=((Fe=z[Qe])==null?void 0:Fe.header)||"#f3f4f6";ae.forEach(st=>J+=`<th class="header" style="width: 40px; background-color: ${je};">${st}</th>`)}),J+="</tr>",t.forEach(Qe=>{const je=e.filter(Fe=>Fe.subjectIds.includes(Qe.id)&&Fe.shifts.includes(Ae));je.length!==0&&(je.forEach((Fe,st)=>{J+="<tr>",st===0&&(J+=`<td rowspan="${je.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Qe.name}</td>`),J+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${Fe.name}</td>`,Ct.forEach(tt=>{var Ie;const ht=((Ie=z[tt])==null?void 0:Ie.cell)||"#fff";ae.forEach(be=>{const qe=re.find(lt=>lt.teacherId===Fe.id&&lt.subjectId===Qe.id&&lt.day===tt&&lt.period===be&&lt.shift===Ae);if(qe){const lt=r.find(Ee=>Ee.id===qe.classId),It=n.find(Ee=>Ee.id===qe.roomId),j=It?It.name:qe.roomId,q=j?`<sub>${j}</sub>`:"",Z=qe.direction?` <span style="font-size:10px">(${qe.direction})</span>`:"";J+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ht};">${lt?lt.name:""}${Z}${q}</td>`}else J+=`<td style="border: 1px solid #000; background-color: ${ht};"></td>`})}),J+="</tr>"}),J+=`<tr><td colspan="${2+Ct.length*ae.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),J+="</table><br/><br/>"}),J+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,J+="</body></html>";const me=new Blob([J],{type:"application/vnd.ms-excel"}),fe=URL.createObjectURL(me),Ue=document.createElement("a");Ue.href=fe,Ue.download=`__${_}.xls`,document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue)},he=()=>{const re=se(),z={[ct.Monday]:{header:"#fecaca",cell:"#fee2e2"},[ct.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[ct.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[ct.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[ct.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let J=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;J+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[le.First,le.Second].forEach(Ae=>{const ae=an[Ae];J+="<table>",J+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${Ct.length*ae.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,J+="<tr>",Ct.forEach(Qe=>{var Fe;const je=((Fe=z[Qe])==null?void 0:Fe.header)||"#f3f4f6";J+=`<th colspan="${ae.length}" class="header" style="border: 3px solid #000; background-color: ${je}; font-size: 20pt;">${Qe}</th>`}),J+="</tr>",J+="<tr>",Ct.forEach(Qe=>{var Fe;const je=((Fe=z[Qe])==null?void 0:Fe.header)||"#f3f4f6";J+=`<th colspan="${ae.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${je}; font-size: 16pt;"></th>`}),J+="</tr>";const _e="#e5e7eb";J+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${_e}; font-size: 24pt;">${Ae}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${_e};"></th>
            `,Ct.forEach(Qe=>{var Fe;const je=((Fe=z[Qe])==null?void 0:Fe.header)||"#f3f4f6";ae.forEach(st=>J+=`<th class="header" style="width: 20px; background-color: ${je}; font-size: 16pt;">${st}</th>`)}),J+="</tr>",t.forEach(Qe=>{const je=e.filter(Fe=>Fe.subjectIds.includes(Qe.id)&&Fe.shifts.includes(Ae));je.length!==0&&(je.forEach((Fe,st)=>{J+="<tr>",st===0&&(J+=`<td rowspan="${je.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Qe.name}</td>`),J+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${Fe.name}</td>`,Ct.forEach(tt=>{var Ie;const ht=((Ie=z[tt])==null?void 0:Ie.cell)||"#fff";ae.forEach(be=>{const qe=re.find(lt=>lt.teacherId===Fe.id&&lt.subjectId===Qe.id&&lt.day===tt&&lt.period===be&&lt.shift===Ae);if(qe){const lt=r.find(V=>V.id===qe.classId),It=n.find(V=>V.id===qe.roomId),j=It?It.name:qe.roomId,q=j?`<sub>${j}</sub>`:"",Z=qe.direction?` <span style="font-size:14px">(${qe.direction})</span>`:"";J+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ht}; height: 60px;">${lt?lt.name:""}${Z}${q}</td>`}else J+=`<td style="border: 1px solid #000; background-color: ${ht};"></td>`})}),J+="</tr>"}),J+=`<tr><td colspan="${2+Ct.length*ae.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),J+="</table><br/><br/>"}),J+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,J+="</body></html>";const me=new Blob([J],{type:"application/vnd.ms-excel"}),fe=URL.createObjectURL(me),Ue=document.createElement("a");Ue.href=fe,Ue.download=`__${_}.xls`,document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue)},$e=()=>{const re=se(),z=r.filter(_e=>_e.name.startsWith(Le)).sort((_e,Qe)=>_e.name.localeCompare(Qe.name)),J=Array.from(new Set(z.map(_e=>_e.shift))).sort(),me={[ct.Monday]:{label:"#fecaca",cell:"#fee2e2"},[ct.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[ct.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[ct.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[ct.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let fe=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;J.forEach(_e=>{const Qe=z.filter(Fe=>Fe.shift===_e),je=an[_e];Qe.length!==0&&(fe+="<table>",fe+="<tr>",fe+='<td style="border:none"></td>',fe+='<td style="border:none"></td>',fe+=`<td colspan="${Qe.length}" class="shift-header">${_e}</td>`,fe+="</tr>",fe+="<tr>",fe+='<td style="border:none"></td>',fe+='<td style="border:none"></td>',Qe.forEach(Fe=>{fe+=`<td class="class-header">${Fe.name}</td>`}),fe+="</tr>",Ct.forEach(Fe=>{const st=me[Fe]||{label:"#e5e7eb",cell:"#f3f4f6"};je.forEach((tt,ht)=>{fe+="<tr>",ht===0&&(fe+=`<td rowspan="${je.length}" class="day-cell" style="background-color: ${st.label};">${Fe.toUpperCase()}</td>`),fe+=`<td class="period-cell" style="background-color: ${st.label};">${tt}</td>`,Qe.forEach(Ie=>{const be=re.filter(qe=>qe.classId===Ie.id&&qe.day===Fe&&qe.shift===_e&&qe.period===tt);fe+=`<td class="content-cell" style="background-color: ${st.cell};">`,be.forEach((qe,lt)=>{lt>0&&(fe+='<br style="mso-data-placement:same-cell;">');const It=t.find(Z=>Z.id===qe.subjectId),j=n.find(Z=>Z.id===qe.roomId),q=j?j.name:qe.roomId||"";fe+=`<span class="subject">${(It==null?void 0:It.name)||""}</span>`,q&&(fe+=` <span class="room">${q}</span>`)}),fe+="</td>"}),fe+="</tr>"}),fe+=`<tr><td colspan="${2+Qe.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),fe+="</table><br><br>")}),fe+="</body></html>";const Ue=new Blob([fe],{type:"application/vnd.ms-excel"}),Ae=URL.createObjectURL(Ue),ae=document.createElement("a");ae.href=Ae,ae.download=`__${Le}_.xls`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},Re=()=>{const re=new Date(C),z=re.getUTCMonth(),J=re.getUTCFullYear(),me=d.filter(Ie=>{const be=new Date(Ie.date);return be.getUTCMonth()===z&&be.getUTCFullYear()===J}).sort((Ie,be)=>new Date(Ie.date).getTime()-new Date(be.date).getTime());if(me.length===0){alert("      .");return}const fe=new Map;me.forEach(Ie=>{const be=`${Ie.scheduleItemId}_${Ie.date}`,qe=fe.get(be)||[];qe.push(Ie),fe.set(be,qe)});const Ue=[],Ae=[];fe.forEach(Ie=>{var V;const be=Ie[0],qe=a.find(Ee=>Ee.id===be.scheduleItemId)||c.find(Ee=>Ee.id===be.scheduleItemId);if(!qe)return;const lt=r.find(Ee=>Ee.id===qe.classId),It=t.find(Ee=>Ee.id===qe.subjectId),j=e.find(Ee=>Ee.id===be.originalTeacherId);let q=be.lessonAbsenceReason||((V=j==null?void 0:j.absenceReasons)==null?void 0:V[be.date])||"";be.replacementTeacherId===be.originalTeacherId&&be.replacementRoomId&&!be.replacementClassId&&(q=" "),be.replacementClassId&&be.replacementSubjectId&&!be.isMerger&&(q=" ");const Z={subs:Ie,scheduleItem:qe,cls:lt,subj:It,origTeacher:j,reason:q};q===" "?Ae.push(Z):Ue.push(Z)});let ae=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${re.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const _e=Ie=>Ie.map(be=>{const{subs:qe,scheduleItem:lt,cls:It,subj:j,origTeacher:q,reason:Z}=be,V=qe[0],Ee=new Date(V.date).toLocaleDateString("ru-RU");let we="";if(V.replacementTeacherId==="conducted")we=" ";else if(V.replacementTeacherId==="cancelled")we=" ";else if(we=qe.map(ce=>{const oe=e.find(ge=>ge.id===ce.replacementTeacherId);return oe?oe.name:""}).join(", "),V.isMerger){let ce=" ()";if(V.replacementClassId){const oe=r.find(ge=>ge.id===V.replacementClassId);oe&&(ce=` (  ${oe.name})`)}we+=ce}else if(V.replacementClassId&&V.replacementSubjectId){const ce=r.find(ge=>ge.id===V.replacementClassId),oe=t.find(ge=>ge.id===V.replacementSubjectId);we+=` ( ${(ce==null?void 0:ce.name)||"?"} ${(oe==null?void 0:oe.name)||"?"})`}const xe=lt.roomId,Ve=V.replacementRoomId,ye=Ve||xe,Q=n.find(te=>te.id===ye),K=Q?Q.name:ye||"-",ie=Ve?`${K} ( .)`:K;return`
                    <tr>
                        <td>${Ee}</td>
                        <td>${lt.period}</td>
                        <td>${lt.shift}</td>
                        <td>${(It==null?void 0:It.name)||"?"}</td>
                        <td>${(j==null?void 0:j.name)||"?"}</td>
                        <td>${(q==null?void 0:q.name)||"?"}</td>
                        <td>${we}</td>
                        <td>${ie}</td>
                        <td>${Z}</td>
                    </tr>
                `}).join(""),Qe=(Ie,be=!1)=>`
            <table>
            <thead>
                <tr class="${be?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${_e(Ie)}
            </tbody>
            </table>
        `;Ue.length>0?ae+=Qe(Ue):ae+="<p>     .</p>",Ae.length>0&&(ae+="<br/><br/>",ae+='<h3 style="color: #b91c1c;">   (  )</h3>',ae+=Qe(Ae,!0));const je=new Map;me.forEach(Ie=>{var j;if(Ie.replacementTeacherId==="conducted"||Ie.replacementTeacherId==="cancelled"||Ie.replacementTeacherId===Ie.originalTeacherId)return;const be=e.find(q=>q.id===Ie.replacementTeacherId);if(!be)return;const qe=je.get(be.id)||{name:be.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},lt=e.find(q=>q.id===Ie.originalTeacherId);let It=Ie.lessonAbsenceReason||((j=lt==null?void 0:lt.absenceReasons)==null?void 0:j[Ie.date])||"";Ie.replacementClassId&&Ie.replacementSubjectId&&!Ie.isMerger&&(It=" "),qe.total++,Ie.isMerger?qe.merger++:It===""?qe.illness++:It===" "?qe.withoutRecord++:qe.other++,je.set(be.id,qe)});const Fe=Array.from(je.values()).sort((Ie,be)=>Ie.name.localeCompare(be.name));Fe.length>0&&(ae+="<br/><br/>",ae+="<h3>   </h3>",ae+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,Fe.forEach(Ie=>{ae+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${Ie.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ie.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ie.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ie.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ie.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ie.other}</td>
                     </tr>
                 `}),ae+="</tbody></table>"),ae+="</body></html>";const st=new Blob([ae],{type:"application/vnd.ms-excel"}),tt=URL.createObjectURL(st),ht=document.createElement("a");ht.href=tt,ht.download=`__${re.getMonth()+1}_${re.getFullYear()}.xls`,document.body.appendChild(ht),ht.click(),document.body.removeChild(ht)},X=()=>{const re=new Date(C),z=re.getUTCMonth(),J=re.getUTCFullYear(),me=d.filter(_e=>{const Qe=new Date(_e.date),je=Qe.getUTCMonth()===z&&Qe.getUTCFullYear()===J,Fe=_e.refusals&&_e.refusals.length>0;return je&&Fe}).sort((_e,Qe)=>new Date(_e.date).getTime()-new Date(Qe.date).getTime());if(me.length===0){alert("      .");return}let fe=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${re.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;me.forEach(_e=>{const Qe=a.find(be=>be.id===_e.scheduleItemId)||c.find(be=>be.id===_e.scheduleItemId);if(!Qe)return;const je=new Date(_e.date).toLocaleDateString("ru-RU"),Fe=r.find(be=>be.id===Qe.classId),st=t.find(be=>be.id===Qe.subjectId),tt=e.find(be=>be.id===_e.originalTeacherId);let ht="";if(_e.replacementTeacherId==="conducted")ht=" ";else if(_e.replacementTeacherId==="cancelled")ht=" ";else{const be=e.find(qe=>qe.id===_e.replacementTeacherId);ht=be?be.name:""}const Ie=(_e.refusals||[]).map(be=>{const qe=e.find(lt=>lt.id===be);return qe?qe.name:""}).join(", ");fe+=`
                <tr>
                    <td>${je}</td>
                    <td>${Qe.period}</td>
                    <td>${Qe.shift}</td>
                    <td>${(Fe==null?void 0:Fe.name)||"?"}</td>
                    <td>${(st==null?void 0:st.name)||"?"}</td>
                    <td>${(tt==null?void 0:tt.name)||"?"}</td>
                    <td>${ht}</td>
                    <td>${Ie}</td>
                </tr>
            `}),fe+="</tbody></table></body></html>";const Ue=new Blob([fe],{type:"application/vnd.ms-excel"}),Ae=URL.createObjectURL(Ue),ae=document.createElement("a");ae.href=Ae,ae.download=`__${re.getMonth()+1}_${re.getFullYear()}.xls`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},it=()=>{const re=se();let z=`							
`;Ct.forEach(J=>{[le.First,le.Second].forEach(me=>{r.filter(Ue=>Ue.shift===me).forEach(Ue=>{an[me].forEach(Ae=>{re.filter(_e=>_e.classId===Ue.id&&_e.day===J&&_e.shift===me&&_e.period===Ae).forEach(_e=>{const Qe=t.find(tt=>tt.id===_e.subjectId),je=e.find(tt=>tt.id===_e.teacherId),Fe=n.find(tt=>tt.id===_e.roomId),st=Fe?Fe.name:_e.roomId||"";z+=`${J}	${me}	${Ue.name}	${Ae}	${(Qe==null?void 0:Qe.name)||""}	${(je==null?void 0:je.name)||""}	${st}	${_e.direction||""}
`})})})})}),navigator.clipboard.writeText(z).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},et=async()=>{N(!0);try{if(!w.current){alert("   1- .");return}const re=await gf(w.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),z=document.createElement("a");z.href=re.toDataURL("image/png"),z.download=`_${C}_1.png`,document.body.appendChild(z),z.click(),document.body.removeChild(z)}catch(re){console.error(re),alert("   ")}finally{N(!1)}},ot=async()=>{N(!0);try{if(!E.current){alert("   2- .");return}const re=await gf(E.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),z=document.createElement("a");z.href=re.toDataURL("image/png"),z.download=`_${C}_2.png`,document.body.appendChild(z),z.click(),document.body.removeChild(z)}catch(re){console.error(re),alert("   ")}finally{N(!1)}},Ze=T.useMemo(()=>d.filter(re=>re.date===C),[d,C]),at=T.useMemo(()=>{const re=Ce(C);return Ze.filter(z=>{const J=re.find(me=>me.id===z.scheduleItemId);return J&&J.shift===le.First}).filter(z=>z.replacementTeacherId!=="conducted").length>0},[Ze,Ce,C]),ee=T.useMemo(()=>{const re=Ce(C);return Ze.filter(z=>{const J=re.find(me=>me.id===z.scheduleItemId);return J&&J.shift===le.Second}).filter(z=>z.replacementTeacherId!=="conducted").length>0},[Ze,Ce,C]),R=re=>{const z=Ce(C),J=Ze.filter(fe=>{const Ue=z.find(Ae=>Ae.id===fe.scheduleItemId);return Ue&&Ue.shift===re}).filter(fe=>fe.replacementTeacherId!=="conducted");if(J.length===0)return null;const me=Array.from(new Set(J.map(fe=>fe.scheduleItemId))).sort((fe,Ue)=>{const Ae=z.find(_e=>_e.id===fe),ae=z.find(_e=>_e.id===Ue);return((Ae==null?void 0:Ae.period)??0)-((ae==null?void 0:ae.period)??0)});return o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:re}),o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-200",children:[o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:me.map(fe=>{var we,xe,Ve;const Ue=J.filter(ye=>ye.scheduleItemId===fe),Ae=Ue[0],ae=z.find(ye=>ye.id===fe);if(!ae)return null;const _e=r.find(ye=>ye.id===ae.classId),Qe=t.find(ye=>ye.id===ae.subjectId),je=e.find(ye=>ye.id===Ae.originalTeacherId),Fe=Ae.replacementRoomId,st=ae.roomId?n.find(ye=>ye.id===ae.roomId):null,tt=st?st.name:ae.roomId||"",ht=Fe?n.find(ye=>ye.id===Fe):null,Ie=ht?ht.name:Fe||"",be=Ae.replacementTeacherId==="cancelled",qe=(we=je==null?void 0:je.absenceReasons)==null?void 0:we[C],lt=Ae.lessonAbsenceReason,It=lt===" "?lt:qe===" "?qe:"",j=Ae.replacementClassId?r.find(ye=>ye.id===Ae.replacementClassId):null,q=Ae.replacementSubjectId?t.find(ye=>ye.id===Ae.replacementSubjectId):null,Z=Ae.replacementTeacherId===Ae.originalTeacherId&&Fe&&!j,V=j&&q&&!Ae.isMerger,Ee=Ae.replacementTeacherId===Ae.originalTeacherId;return o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:ae.period}),o.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:_e==null?void 0:_e.name}),o.jsxs("td",{className:"py-3 px-2",children:[o.jsx("div",{className:"font-semibold text-slate-800",children:Qe==null?void 0:Qe.name}),ae.direction&&o.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:ae.direction})]}),o.jsx("td",{className:"py-3 px-2",children:!Ee&&!Z&&!V&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[je==null?void 0:je.name,o.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),It&&o.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:It})]})}),o.jsx("td",{className:`py-3 px-2 font-bold text-sm ${be?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Z?o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-800",children:je==null?void 0:je.name}),o.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):V?o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-800",children:je==null?void 0:je.name}),o.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",j==null?void 0:j.name]})]}):be?o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{children:" "})}):o.jsx("div",{className:"flex flex-col",children:Ue.length>1||Ae.isMerger?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-800 text-xs",children:Ue.map(ye=>{const Q=e.find(K=>K.id===ye.replacementTeacherId);return Q?Q.name:""}).join(", ")}),o.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",Ae.replacementClassId?`(${(xe=r.find(ye=>ye.id===Ae.replacementClassId))==null?void 0:xe.name})`:""]})]}):o.jsx("span",{children:(Ve=e.find(ye=>ye.id===Ae.replacementTeacherId))==null?void 0:Ve.name})})}),o.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Fe?"text-indigo-600":"text-slate-700"}`,children:Fe&&Fe!==ae.roomId?o.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[o.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:tt}),o.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),o.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Ie})]}):o.jsx("span",{className:"text-xl",children:tt})})]},String(fe))})})]})]})},L=async()=>{const re=rn();await gr.setPublicData(re,Je),await i({settings:{...s,publicScheduleId:re}});const z=`${window.location.origin}${window.location.pathname}#/public?id=${re}`;F(z),P(re),b(!0)},$=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await gr.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),F(""),P(""))},ne=()=>o.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),o.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),o.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(C).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),De=()=>o.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[o.jsx("div",{children:" "}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsx("div",{className:"h-px w-32 bg-slate-300"}),o.jsx("div",{children:" "})]})]}),Be=()=>{const re=se(),z=r.filter(fe=>fe.name.startsWith(Le)).sort((fe,Ue)=>fe.name.localeCompare(Ue.name)),J=Array.from(new Set(z.map(fe=>fe.shift))).sort(),me={[ct.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[ct.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[ct.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[ct.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[ct.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return z.length===0?o.jsx("div",{className:"text-center p-10",children:"    "}):o.jsx("div",{className:"font-sans text-black",children:J.map(fe=>{const Ue=z.filter(ae=>ae.shift===fe),Ae=an[fe];return Ue.length===0?null:o.jsx("div",{className:"mb-10 page-break-inside-avoid",children:o.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[o.jsxs("thead",{children:[o.jsxs("tr",{children:[o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{colSpan:Ue.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:fe})]}),o.jsxs("tr",{children:[o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{className:"border-2 border-black w-8"}),Ue.map(ae=>o.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:ae.name},String(ae.id)))]})]}),o.jsx("tbody",{children:Ct.map(ae=>{const _e=me[ae]||{label:"bg-gray-200",cell:"bg-gray-100"};return o.jsxs(Is.Fragment,{children:[Ae.map((Qe,je)=>o.jsxs("tr",{children:[je===0&&o.jsx("td",{rowSpan:Ae.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${_e.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:ae===ct.Monday?"":ae===ct.Tuesday?"":ae===ct.Wednesday?"":ae===ct.Thursday?"":ae===ct.Friday?"":ae}),o.jsx("td",{className:`border-2 border-black font-bold text-base ${_e.label}`,children:Qe}),Ue.map(Fe=>{const st=re.filter(tt=>tt.classId===Fe.id&&tt.day===ae&&tt.shift===fe&&tt.period===Qe);return o.jsx("td",{className:`border-2 border-black p-1 h-12 ${_e.cell}`,children:st.map(tt=>{const ht=t.find(qe=>qe.id===tt.subjectId),Ie=n.find(qe=>qe.id===tt.roomId),be=Ie?Ie.name:tt.roomId||"";return o.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[o.jsx("span",{children:ht==null?void 0:ht.name}),be&&o.jsx("span",{className:"font-black",children:be})]},String(tt.id))})},String(Fe.id))})]},`${String(ae)}-${Qe}`)),o.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:o.jsx("td",{colSpan:2+Ue.length})})]},String(ae))})})]})},String(fe))})})};return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("button",{onClick:()=>gr.exportJson(Je),className:"btn-primary btn-ripple flex items-center gap-2",children:[o.jsx(M,{name:"Download",size:20}),"  JSON"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"file",ref:y,onChange:Ye,accept:".json",className:"hidden"}),o.jsxs("button",{onClick:()=>{var re;return(re=y.current)==null?void 0:re.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[o.jsx(M,{name:"Upload",size:20}),"  JSON"]})]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(M,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsx("input",{type:"date",value:C,onChange:re=>x(re.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),o.jsx("button",{onClick:et,disabled:U||!at,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:U?o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Download",size:20})," 1- "]})}),o.jsx("button",{onClick:ot,disabled:U||!ee,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:U?o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Download",size:20})," 2- "]})})]})]}),o.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:Ze.length===0?o.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(ne,{}),o.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:o.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),o.jsx(De,{})]}):o.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[at&&o.jsxs("div",{ref:w,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(ne,{}),R(le.First),o.jsx(De,{})]}),ee&&o.jsxs("div",{ref:E,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(ne,{}),R(le.Second),o.jsx(De,{})]})]})})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsx("select",{value:Le,onChange:re=>At(re.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:Ne.map(re=>o.jsxs("option",{value:re,children:[re,"- "]},re))})]}),o.jsxs("button",{onClick:()=>ze(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"Printer",size:20}),"    "]}),o.jsxs("button",{onClick:$e,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:_,onChange:re=>S(Number(re.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1- (-)"}),o.jsx("option",{value:2,children:"2- (-)"})]})]}),o.jsxs("button",{onClick:We,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),o.jsxs("button",{onClick:G,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Table",size:20}),"   (XLS)"]}),o.jsxs("button",{onClick:he,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Table",size:20}),"   (XLS)"]}),o.jsxs("button",{onClick:it,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"Clipboard",size:20}),"   Google Sheets"]}),o.jsxs("button",{onClick:Re,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"List",size:20}),"    (XLS)"]}),o.jsxs("button",{onClick:X,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"UserX",size:20}),"    (XLS)"]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?o.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",o.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),o.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[o.jsx(M,{name:"Share2",size:16}),"  QR-  "]}),o.jsxs("button",{onClick:$,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Trash2",size:16}),"  "]})]})}):o.jsxs("button",{onClick:L,disabled:U,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[o.jsx(M,{name:"Share2",size:20}),"  "]})]}),o.jsx(Cn,{isOpen:v,onClose:()=>b(!1),title:" ",children:o.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),B&&o.jsxs(o.Fragment,{children:[o.jsx(K6,{value:B,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),o.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:B}),o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(B),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Copy",size:16}),"  "]})]})]})}),I&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[o.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",Le,"- )"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[o.jsx(M,{name:"Printer",size:16})," "]}),o.jsx("button",{onClick:()=>ze(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:o.jsx(Be,{})})]})]})},z6=()=>{var C;const{subjects:t,teachers:e,classes:r}=Hn(),{schedule1:n,schedule2:s,substitutions:A}=mi(),[i,l]=T.useState("load"),[a,c]=T.useState(((C=r[0])==null?void 0:C.id)||""),[d,h]=T.useState(()=>{const x=new Date().getMonth();return x>=0&&x<=4?2:1}),f=T.useMemo(()=>d===2?s:n,[d,n,s]),m=T.useMemo(()=>e.map(_=>{const S=f.filter(D=>D.teacherId===_.id),U=S.length,N=U*4,v=A.filter(D=>D.replacementTeacherId===_.id).length,b=A.filter(D=>D.originalTeacherId===_.id).length,B=N+v-b,F={};return S.forEach(D=>{const P=t.find(I=>I.id===D.subjectId);P&&(F[P.name]=(F[P.name]||0)+1)}),{id:_.id,name:_.name,weeklyHours:U,subsTaken:v,subsMissed:b,actualHours:B,subjectBreakdown:F}}).sort((_,S)=>S.actualHours-_.actualHours),[e,f,A,t]),y=T.useMemo(()=>a?Ct.map(x=>{const S=f.filter(U=>U.classId===a&&U.day===x).reduce((U,N)=>{const v=t.find(b=>b.id===N.subjectId);return U+((v==null?void 0:v.difficulty)||5)},0);return{label:x,value:S}}):[],[f,t,a]),w=T.useMemo(()=>{const x=e.map(S=>({name:S.name,count:A.filter(U=>U.replacementTeacherId===S.id).length})).sort((S,U)=>U.count-S.count).slice(0,5),_=e.map(S=>({name:S.name,count:S.unavailableDates.length})).sort((S,U)=>U.count-S.count).slice(0,5);return{heroes:x,absentees:_}},[e,A]),E=()=>{let x="";i==="load"?x=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(U=>`"${U.name}",${U.weeklyHours},${U.subsTaken},${U.subsMissed},${U.actualHours},"${Object.entries(U.subjectBreakdown).map(([N,v])=>N+": "+v).join(", ")}"`).join(`
`):i==="sanpin"&&(x=`Day,Score
`+y.map(U=>`${U.label},${U.value}`).join(`
`));const _=new Blob([`\uFEFF${x}`],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(_),S.download=`report_${i}_${d}sem.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return o.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(M,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:d,onChange:x=>h(Number(x.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1- (-)"}),o.jsx("option",{value:2,children:"2- (-)"})]})]}),o.jsxs("button",{onClick:E,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[o.jsx(M,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[o.jsx("button",{onClick:()=>l("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),o.jsx("button",{onClick:()=>l("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),o.jsx("button",{onClick:()=>l("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&o.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(x=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:x.name}),o.jsx("td",{className:"p-4 text-right font-mono",children:x.weeklyHours}),o.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",x.subsTaken]}),o.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",x.subsMissed]}),o.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:x.actualHours}),o.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(x.subjectBreakdown).map(([_,S])=>o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[_,": ",S]},_))})})]},x.id))})]})}),i==="sanpin"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),o.jsx("select",{value:a,onChange:x=>c(x.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(x=>o.jsx("option",{value:x.id,children:x.name},x.id))})]}),o.jsx(wp,{items:y,max:60,barClassName:"bg-indigo-500"}),o.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[o.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),o.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"TrendingUp",size:20}),"   ( 5)"]}),o.jsx(wp,{items:w.heroes.map(x=>({label:x.name,value:x.count})),max:Math.max(...w.heroes.map(x=>x.count),1),barClassName:"bg-emerald-500"})]}),o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Activity",size:20}),"  ( 5)"]}),o.jsx(wp,{items:w.absentees.map(x=>({label:x.name,value:x.count})),max:Math.max(...w.absentees.map(x=>x.count),1),barClassName:"bg-red-500"})]})]})]})},$6=()=>{var at;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=Hn(),{dutySchedule:s,saveScheduleData:A,schedule1:i,schedule2:l}=mi(),a={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,d]=T.useState(()=>{const ee=new Date().getMonth();return ee>=0&&ee<=4?2:1}),[h,f]=T.useState(le.First),m=c===1?i:l,y=T.useRef(null),[w,E]=T.useState(!1),[C,x]=T.useState(!1),[_,S]=T.useState(null),[U,N]=T.useState({}),[v,b]=T.useState(""),[B,F]=T.useState(null),D=(ee,R,L)=>{const $=s.find(ne=>ne.zoneId===ee&&ne.day===R&&ne.shift===L);return $?t.find(ne=>ne.id===$.teacherId):null},P=(ee,R,L,$)=>$?!!s.find(De=>De.teacherId===$&&De.day===R&&De.shift===L&&De.zoneId!==ee):!1,I=(ee,R)=>{S({zoneId:ee,day:R});const L=D(ee,R,h);F((L==null?void 0:L.id)||null),E(!0)},ze=async()=>{if(!_)return;let ee=[...s];ee=ee.filter(R=>!(R.zoneId===_.zoneId&&R.day===_.day&&R.shift===h)),B&&ee.push({id:rn(),zoneId:_.zoneId,day:_.day,shift:h,teacherId:B}),await A({dutySchedule:ee}),E(!1),F(null)},Le=async()=>{if(!_)return;let ee=[...s];ee=ee.filter(R=>!(R.zoneId===_.zoneId&&R.day===_.day&&R.shift===h)),await A({dutySchedule:ee}),E(!1),F(null)},At=(ee,R)=>{if(!ee||!R.includedRooms)return!1;const L=ee.replace(/\D/g,"");return L&&R.includedRooms.includes(L)?!0:R.includedRooms.includes(ee)},Je=async()=>{if(!window.confirm("    . ?"))return;let ee=[];const R=[le.First,le.Second],L={};Ct.forEach($=>L[$]=new Set);for(const $ of Ct)for(const ne of R){const De=t.filter(Be=>m.filter(z=>z.teacherId===Be.id&&z.day===$&&z.shift===ne).length>=1);for(const Be of e){const re=De.map(J=>{let me=0;L[$].has(J.id)&&(me-=2e3);const fe=m.filter(Ae=>{var ae;return Ae.teacherId===J.id&&Ae.day===$&&Ae.shift===ne&&Ae.roomId&&At(((ae=r.find(_e=>_e.id===Ae.roomId))==null?void 0:ae.name)||Ae.roomId,Be)}).length;return fe===0?{teacher:J,score:-9999}:(me+=fe*10,m.filter(Ae=>Ae.teacherId===J.id&&Ae.day===$&&Ae.shift===ne).length>=4&&(me+=5),{teacher:J,score:me})});re.sort((J,me)=>me.score-J.score);const z=re[0];z&&z.score>-500&&(ee.push({id:rn(),zoneId:Be.id,day:$,shift:ne,teacherId:z.teacher.id}),L[$].add(z.teacher.id))}}await A({dutySchedule:ee})},se=async()=>{window.confirm("   (  )?")&&await A({dutySchedule:[]})},Ce=async()=>{if(!y.current)return;const ee=await gf(y.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),R=document.createElement("a");R.href=ee.toDataURL("image/png"),R.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(R),R.click(),document.body.removeChild(R)},Ne={[ct.Monday]:{label:"#fecaca",cell:"#fee2e2"},[ct.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[ct.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[ct.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[ct.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}},Ye=()=>{let R=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 6px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 18pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 12pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #312e81; color: white; border: 2px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #e5e7eb; border: 2px solid #000; text-align: left; padding-left: 10px; }
                    .zone-cell { font-size: 11pt; font-weight: bold; background-color: #fff; text-align: left; width: 250px; }
                    .day-header { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 10pt; font-weight: bold; height: 35px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 11pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 11pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 15px; }
                </style>
            </head>
            <body>
        `;R+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,3)}" style="border:none"></td>
                    <td colspan="3" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        __________ ..<br>
                        "__" ______ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,R+=`
            <table>
                <tr><td colspan="6" class="title-main"> </td></tr>
                <tr><td colspan="6" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,[le.First,le.Second].forEach(De=>{R+="<table>",R+=`<tr><th colspan="6" class="shift-header">${De}</th></tr>`,R+="<tr>",R+='<th class="day-header" style="background-color: #f3f4f6;"> </th>',Ct.forEach(Be=>{const re=Ne[Be]||{label:"#ffffff"};R+=`<th class="day-header" style="background-color: ${re.label};">${Be}</th>`}),R+="</tr>",ot.forEach(Be=>{R+=`<tr><td colspan="6" class="floor-header">${Be.floor}</td></tr>`,Be.zones.forEach(re=>{R+="<tr>",R+=`<td class="zone-cell">${re.name}</td>`,Ct.forEach(z=>{const J=Ne[z]||{cell:"#ffffff"},me=D(re.id,z,De);R+=`<td class="content-cell" style="background-color: ${J.cell};">${me?me.name:""}</td>`}),R+="</tr>"})}),R+="</table><br/><br/>"}),R+=`
            <table>
                <tr>
                    <td colspan="3" class="footer-block">  </td>
                    <td colspan="1" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="2" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,R+="</body></html>";const L=new Blob([R],{type:"application/vnd.ms-excel"}),$=URL.createObjectURL(L),ne=document.createElement("a");ne.href=$,ne.download=`__${c}__.xls`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)},We=()=>{const R=Ze.length+1;let ne=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 5px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 20pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 14pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #e5e7eb; border: 3px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #d1d5db; border: 2px solid #000; text-transform: uppercase; }
                    .zone-header { font-size: 10pt; font-weight: bold; background-color: #f3f4f6; border: 2px solid #000; }
                    .day-label { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 11pt; font-weight: bold; height: 40px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 12pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 12pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 20px; }
                </style>
            </head>
            <body>
        `;ne+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,R-4)}" style="border:none"></td>
                    <td colspan="4" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="${R}" style="border:none"></td></tr>
            </table>
        `,ne+=`
            <table>
                <tr><td colspan="${R}" class="title-main"> </td></tr>
                <tr><td colspan="${R}" class="title-sub">       22 . </td></tr>
                <tr><td colspan="${R}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="${R}" style="border:none"></td></tr>
            </table>
        `,[le.First,le.Second].forEach(fe=>{ne+="<table>",ne+=`<tr><th colspan="${R}" class="shift-header">${fe}</th></tr>`,ne+="<tr>",ne+='<th rowspan="2" class="floor-header" style="width: 100px;"> </th>',ot.forEach(Ue=>{ne+=`<th colspan="${Ue.zones.length}" class="floor-header">${Ue.floor}</th>`}),ne+="</tr>",ne+="<tr>",Ze.forEach(Ue=>{ne+=`<th class="zone-header">${Ue.name}</th>`}),ne+="</tr>",Ct.forEach(Ue=>{const Ae=Ne[Ue]||{label:"#ffffff",cell:"#ffffff"};ne+="<tr>",ne+=`<td class="day-label" style="background-color: ${Ae.label};">${Ue}</td>`,Ze.forEach(ae=>{const _e=D(ae.id,Ue,fe);ne+=`<td class="content-cell" style="background-color: ${Ae.cell};">${_e?_e.name:""}</td>`}),ne+="</tr>"}),ne+=`<tr><td colspan="${R}" style="height: 4px; background-color: #000; border:none;"></td></tr>`,ne+="</table><br>"});const De=Math.floor(R*.4),Be=Math.floor(R*.3),re=R-De-Be;ne+=`
            <table>
                 <tr class="empty-row"><td colspan="${R}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${De}" class="footer-block">    22 .</td>
                    <td colspan="${re}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${Be}" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,ne+="</body></html>";const z=new Blob([ne],{type:"application/vnd.ms-excel"}),J=URL.createObjectURL(z),me=document.createElement("a");me.href=J,me.download=`__${c}_.xls`,document.body.appendChild(me),me.click(),document.body.removeChild(me)},G=async()=>{if(!U.name)return;const ee=v.split(",").map($=>$.trim()).filter(Boolean),R={...U,includedRooms:ee};let L=[...e];U.id?L=L.map($=>$.id===U.id?{...$,...R}:$):L.push({...R,id:rn()}),await n({dutyZones:L}),x(!1)},he=async ee=>{if(!window.confirm(" ?"))return;const R=e.filter(L=>L.id!==ee);await n({dutyZones:R})},$e=ee=>{var R;ee?(N(ee),b(((R=ee.includedRooms)==null?void 0:R.join(", "))||"")):(N({}),b("")),x(!0)},Re=()=>{if(!_)return{recommended:[],others:[],allTeachers:[]};const ee=_.day,R=e.find(Be=>Be.id===_.zoneId),L=t.map(Be=>{const re=m.filter(me=>me.teacherId===Be.id&&me.day===ee&&me.shift===h).length,z=s.some(me=>me.day===ee&&me.teacherId===Be.id&&me.zoneId!==_.zoneId&&me.shift===h),J=R&&R.includedRooms?m.filter(me=>{var fe;return me.teacherId===Be.id&&me.day===ee&&me.shift===h&&me.roomId&&At(((fe=r.find(Ue=>Ue.id===me.roomId))==null?void 0:fe.name)||me.roomId,R)}).length:0;return{t:Be,lessonsCount:re,isBusy:z,lessonsInZone:J}}),$=L.filter(Be=>Be.lessonsInZone>0&&!Be.isBusy).sort((Be,re)=>re.lessonsInZone-Be.lessonsInZone).map(Be=>({value:Be.t.id,label:`${Be.t.name} (${Be.lessonsInZone} .  )`})),ne=L.filter(Be=>(Be.lessonsInZone===0||Be.isBusy)&&Be.lessonsCount>0).map(Be=>({value:Be.t.id,label:Be.t.name+(Be.isBusy?" ()":"")+(Be.lessonsInZone===0?" (   )":"")})),De=L.filter(Be=>Be.lessonsCount===0).map(Be=>({value:Be.t.id,label:`${Be.t.name} ( )`}));return{recommended:$,others:ne,allTeachers:De}},{recommended:X,others:it,allTeachers:et}=Re(),ot=T.useMemo(()=>{const ee={};return e.forEach(L=>{const $=L.floor||" ";ee[$]||(ee[$]=[]),ee[$].push(L)}),Object.keys(ee).sort().map(L=>({floor:L,zones:ee[L].sort(($,ne)=>($.order||0)-(ne.order||0))}))},[e]),Ze=T.useMemo(()=>ot.flatMap(ee=>ee.zones),[ot]);return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(M,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>f(le.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===le.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>f(le.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===le.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:c,onChange:ee=>d(Number(ee.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1-"}),o.jsx("option",{value:2,children:"2-"})]})]}),o.jsxs("button",{onClick:Je,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Zap",size:16})," "]}),o.jsx("button",{onClick:se,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:o.jsx(M,{name:"Trash2",size:16})}),o.jsxs("button",{onClick:Ce,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Image",size:16})," PNG"]}),o.jsxs("button",{onClick:Ye,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Table",size:16}),"  (XLS)"]}),o.jsxs("button",{onClick:We,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),o.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(ee=>o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[ee.name," ",o.jsxs("span",{className:"text-slate-400 text-xs",children:["(",ee.floor||"?",")"]})]}),o.jsx("button",{onClick:()=>$e(ee),className:"text-slate-400 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:12})})]},ee.id)),o.jsxs("button",{onClick:()=>$e(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[o.jsx(M,{name:"Plus",size:14})," "]})]}),o.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),Ct.map(ee=>o.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:ee},ee))]})}),o.jsx("tbody",{children:e.map(ee=>{var R;return o.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[o.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[o.jsx("div",{children:ee.name}),o.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:ee.floor}),o.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(R=ee.includedRooms)==null?void 0:R.join(", ")})]}),Ct.map(L=>{const $=D(ee.id,L,h),ne=$?P(ee.id,L,h,$.id):!1;return o.jsx("td",{onClick:()=>I(ee.id,L),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${$?ne?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:$?o.jsxs("div",{className:`font-bold text-sm ${ne?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[$.name,ne&&o.jsx("div",{className:"text-[9px] uppercase",children:""})]}):o.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${ee.id}-${L}`)})]},ee.id)})})]})})]}),o.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Image",size:16}),"  "]}),o.jsx("div",{className:"overflow-auto custom-scrollbar",children:o.jsxs("div",{ref:y,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[o.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:a.approvalBlock},children:o.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[o.jsx("div",{className:"font-bold mb-1",children:""}),o.jsx("div",{children:" "}),o.jsx("div",{children:" "}),o.jsx("div",{children:"  22 . "}),o.jsxs("div",{className:"mt-8 flex items-end",children:[o.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:a.signatureLine}}),o.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),o.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:a.mainTitle},children:[o.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),o.jsx("h2",{className:"text-lg",children:"       22 . "}),o.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[le.First,le.Second].map((ee,R)=>o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:ee}),o.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[o.jsxs("thead",{children:[o.jsxs("tr",{children:[o.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:a.tableHeaders},children:" "}),ot.map(L=>o.jsx("th",{colSpan:L.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:a.tableHeaders},children:L.floor},L.floor))]}),o.jsx("tr",{children:Ze.map(L=>o.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:a.tableHeaders},children:L.name},L.id))})]}),o.jsx("tbody",{children:Ct.map(L=>o.jsxs("tr",{children:[o.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:L}),Ze.map($=>{const ne=D($.id,L,ee);return o.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:ne?ne.name:"-"},$.id)})]},L))})]})]},ee)),o.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:a.footerBlock},children:[o.jsx("div",{children:"    22 ."}),o.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:a.signatureLine}}),o.jsx("div",{children:".."})]})]})})]}),o.jsx(Cn,{isOpen:w,onClose:()=>E(!1),title:" ",maxWidth:"max-w-2xl",children:o.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[_&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(at=e.find(ee=>ee.id===_.zoneId))==null?void 0:at.name}),o.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[o.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:_.day}),o.jsx("span",{className:"text-slate-400",children:"|"}),o.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:h})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsx("p",{className:"text-[10px] text-slate-400 mb-2",children:"        "}),o.jsx(ac,{options:[{label:" (   )",options:X},{label:" (    )",options:it},{label:"  (  )",options:et}],value:B,onChange:ee=>F(String(ee)),placeholder:"   ",groupBy:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[o.jsx("button",{onClick:Le,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),o.jsx("button",{onClick:ze,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),o.jsx(Cn,{isOpen:C,onClose:()=>x(!1),title:U.id?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:U.name||"",onChange:ee=>N({...U,name:ee.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:U.floor||"",onChange:ee=>N({...U,floor:ee.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:v,onChange:ee=>b(ee.target.value)}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[U.id&&o.jsx("button",{onClick:()=>{he(U.id),x(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),o.jsx("button",{onClick:G,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},W6=()=>{const{classes:t}=Hn(),{nutritionRecords:e,saveScheduleData:r}=mi(),{role:n,user:s}=pi(),{addToast:A}=qk(),i=n==="admin",l=n==="teacher",a=n==="canteen",[c,d]=T.useState($c()),[h,f]=T.useState("day"),[m,y]=T.useState(()=>{const G=new Date;return`${G.getFullYear()}-${String(G.getMonth()+1).padStart(2,"0")}`}),[w,E]=T.useState(!1),[C,x]=T.useState(null),[_,S]=T.useState(""),[U,N]=T.useState(0),[v,b]=T.useState(0),B=T.useRef(null),F=T.useMemo(()=>e.filter(G=>G.date===c),[e,c]),D=T.useMemo(()=>{const[G,he]=m.split("-").map(Number);return e.filter($e=>{const Re=new Date($e.date);return Re.getFullYear()===G&&Re.getMonth()+1===he})},[e,m]),P=T.useMemo(()=>{const G={totalStudents:0,totalBenefit:0,totalRegular:0,classCount:F.length,records:F};return F.forEach(he=>{G.totalStudents+=he.totalCount,G.totalBenefit+=he.benefitCount,G.totalRegular+=he.regularCount}),G},[F]),I=T.useMemo(()=>{const G=new Map;D.forEach(Re=>{const X=G.get(Re.date)||{total:0,benefit:0,regular:0,classCount:0};X.total+=Re.totalCount,X.benefit+=Re.benefitCount,X.regular+=Re.regularCount,X.classCount+=1,G.set(Re.date,X)});const he=Array.from(G.values()).reduce((Re,X)=>({total:Re.total+X.total,benefit:Re.benefit+X.benefit,regular:Re.regular+X.regular,classCount:Math.max(Re.classCount,X.classCount)}),{total:0,benefit:0,regular:0,classCount:0}),$e=G.size>0?{total:Math.round(he.total/G.size),benefit:Math.round(he.benefit/G.size),regular:Math.round(he.regular/G.size)}:{total:0,benefit:0,regular:0};return{total:he,avgPerDay:$e,daysCount:G.size,statsByDate:Array.from(G.entries()).sort((Re,X)=>Re[0].localeCompare(X[0]))}},[D]),ze=G=>{var he;return((he=t.find($e=>$e.id===G))==null?void 0:he.name)||G},Le=G=>{const he=t.find($e=>$e.id===G);return he&&typeof he.order=="number"?he.order:Number.MAX_SAFE_INTEGER},At=(G,he)=>{he?(x(he),S(he.classId),N(he.totalCount),b(he.benefitCount)):(x(null),S(G||""),N(0),b(0)),E(!0)},Je=()=>{E(!1),x(null),S(""),N(0),b(0)},se=T.useCallback(async()=>{if(!_){A({type:"warning",title:" "});return}if(U<0||v<0){A({type:"warning",title:"    "});return}if(v>U){A({type:"warning",title:"      "});return}const G=U-v,he=new Date().toISOString();let $e;if(C)$e=e.map(Re=>Re.id===C.id?{...Re,classId:_,totalCount:U,benefitCount:v,regularCount:G,enteredBy:(s==null?void 0:s.uid)||Re.enteredBy,enteredAt:he}:Re);else{const Re=e.find(X=>X.date===c&&X.classId===_);if(Re)$e=e.map(X=>X.id===Re.id?{...X,totalCount:U,benefitCount:v,regularCount:G,enteredBy:(s==null?void 0:s.uid)||X.enteredBy,enteredAt:he}:X);else{const X={id:rn(),date:c,classId:_,totalCount:U,benefitCount:v,regularCount:G,enteredBy:s==null?void 0:s.uid,enteredAt:he};$e=[...e,X]}}await r({nutritionRecords:$e}),A({type:"success",title:" "}),Je()},[_,U,v,C,c,e,r,s,A]),Ce=T.useCallback(async G=>{const he=e.find(Re=>Re.id===G);if(!he)return;if(!i&&he.enteredBy!==(s==null?void 0:s.uid)){A({type:"warning",title:"     "});return}if(!window.confirm(" ?"))return;const $e=e.filter(Re=>Re.id!==G);await r({nutritionRecords:$e}),A({type:"success",title:" "})},[e,r,i,s,A]),Ne=()=>{if(!B.current)return;const G=window.open("","_blank");if(!G){A({type:"warning",title:"    "});return}const he=B.current.innerHTML;G.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${he}
            </body>
            </html>
        `),G.document.close(),G.focus(),setTimeout(()=>{G.print(),G.close()},250)},Ye=T.useMemo(()=>i||s?t:[],[t,i,s]),We=T.useMemo(()=>{if(h!=="day")return[];const G=F.map(he=>he.classId);return t.filter(he=>!G.includes(he.id)).sort((he,$e)=>{const Re=typeof he.order=="number"?he.order:Number.MAX_SAFE_INTEGER,X=typeof $e.order=="number"?$e.order:Number.MAX_SAFE_INTEGER;return Re!==X?Re-X:he.name.localeCompare($e.name)})},[t,F,h]);return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2",children:""}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:i?"   ":a?"   ":"   "})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>f(h==="day"?"month":"day"),className:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-semibold",children:h==="day"?" ":" "}),(i||a)&&o.jsxs("button",{onClick:Ne,className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[o.jsx(M,{name:"Download",size:18})," PDF"]})]})]}),o.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:h==="day"?o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),o.jsx("input",{type:"date",value:c,onChange:G=>d(G.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}):o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),o.jsx("input",{type:"month",value:m,onChange:G=>y(G.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})}),h==="day"&&We.length>0&&o.jsxs("div",{className:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-amber-500 text-white p-2.5 rounded-xl",children:o.jsx(M,{name:"AlertTriangle",size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"    "}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[We.length," ",We.length===1?"":We.length<5?"":"","   "]})]})]}),l||i?o.jsx("div",{className:"flex flex-wrap gap-2",children:We.map(G=>o.jsx("button",{onClick:()=>{d($c()),At(G.id)},className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-700 dark:text-slate-300 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:G.name},G.id))}):o.jsx("div",{className:"flex flex-wrap gap-2",children:We.map(G=>o.jsx("span",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-500 dark:text-slate-400",children:G.name},G.id))})]}),h==="day"?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:P.totalStudents})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-indigo-600",children:P.totalBenefit})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-green-600",children:P.totalRegular})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:P.classCount})]})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:I.total.total}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",I.avgPerDay.total,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-indigo-600",children:I.total.benefit}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",I.avgPerDay.benefit,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-green-600",children:I.total.regular}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",I.avgPerDay.regular,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:I.daysCount})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:h==="day"?`  ${new Date(c).toLocaleDateString("ru-RU")}`:`  ${new Date(m+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}`}),(l||i)&&h==="day"&&o.jsxs("button",{onClick:()=>At(),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[o.jsx(M,{name:"Plus",size:18}),""]})]}),h==="day"?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),i&&o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l&&o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:F.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:i?5:4,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):F.slice().sort((G,he)=>{const $e=Le(G.classId),Re=Le(he.classId);return $e!==Re?$e-Re:ze(G.classId).localeCompare(ze(he.classId))}).map(G=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:ze(G.classId)}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:G.totalCount}),o.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:G.benefitCount}),o.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:G.regularCount}),!a&&o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(l||i)&&o.jsx("button",{onClick:()=>At(void 0,G),className:"p-2 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 rounded-lg transition-colors",title:"",children:o.jsx(M,{name:"Edit",size:18})}),o.jsx("button",{onClick:()=>Ce(G.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 rounded-lg transition-colors",title:"",children:o.jsx(M,{name:"Trash2",size:18})})]})})]},G.id))})]})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:I.statsByDate.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):I.statsByDate.map(([G,he])=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:new Date(G).toLocaleDateString("ru-RU",{weekday:"short",day:"numeric",month:"short"})}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:he.total}),o.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:he.benefit}),o.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:he.regular}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:he.classCount})]},G))})]})})]}),o.jsx("div",{ref:B,className:"hidden print:block",children:o.jsxs("div",{className:"p-8",children:[o.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:"  "}),h==="day"?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),o.jsx("tbody",{children:F.slice().sort((G,he)=>{const $e=Le(G.classId),Re=Le(he.classId);return $e!==Re?$e-Re:ze(G.classId).localeCompare(ze(he.classId))}).map(G=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:ze(G.classId)}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:G.totalCount}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:G.benefitCount}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:G.regularCount})]},G.id))}),o.jsx("tfoot",{className:"bg-slate-100 font-bold",children:o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:P.totalStudents}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:P.totalBenefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:P.totalRegular})]})})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(m+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),o.jsx("tbody",{children:I.statsByDate.map(([G,he])=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:new Date(G).toLocaleDateString("ru-RU")}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.classCount})]},G))}),o.jsxs("tfoot",{className:"bg-slate-100 font-bold",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:I.total.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:I.total.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:I.total.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:"  "}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:I.avgPerDay.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:I.avgPerDay.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:I.avgPerDay.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]})]})]})]})]})}),o.jsx(Cn,{isOpen:w,onClose:Je,title:C?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:""}),o.jsx(ac,{options:Ye.slice().sort((G,he)=>G.name.localeCompare(he.name)).map(G=>({value:G.id,label:G.name})),value:_||null,onChange:G=>S(String(G)),placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),o.jsx("input",{type:"number",inputMode:"numeric",min:"0",value:U,onChange:G=>{const he=parseInt(G.target.value)||0;N(he),he<v&&b(he)},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),o.jsx("input",{type:"number",inputMode:"numeric",min:"0",max:U,value:v,onChange:G=>{const he=parseInt(G.target.value)||0;b(Math.min(he,U))},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:" ()"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:U-v})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:se,className:"flex-1 px-4 py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold",children:""}),o.jsx("button",{onClick:Je,className:"px-4 py-3 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-semibold",children:""})]})]})})]})},q6=()=>{const{setGuestRole:t,role:e,loading:r}=pi(),n=ru(),[s,A]=T.useState("select"),[i,l]=T.useState(""),[a,c]=T.useState(""),[d,h]=T.useState(""),[f,m]=T.useState(!1);T.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher"||e==="canteen")&&n("/dashboard")},[e,r,n]);const y=async E=>{if(E.preventDefault(),h(""),m(!0),!Nn){h("Firebase .  ."),m(!1);return}try{let C=i;s==="teacher"?C="teacher@gymnasium22.com":s==="canteen"&&(C="canteen@gymnasium22.com"),await mM(Nn,C,a)}catch(C){console.error("Firebase Auth Error:",C);const x=C==null?void 0:C.code;let _="   .";switch(x){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":_="   .";break;case"auth/invalid-email":_="  email.";break;case"auth/too-many-requests":_="  . .";break;default:_=" .  ."}h(_)}finally{m(!1)}},w=()=>{t(),n("/schedule")};return o.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),o.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),o.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),o.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10 bg-white/60 dark:bg-slate-800/60 border border-white/20 dark:border-slate-700 backdrop-blur-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:o.jsx(M,{name:"GraduationCap",size:48})}),o.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("button",{onClick:w,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"Users",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"BookOpen",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("canteen"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-xl text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"Coffee",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-green-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"Settings",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"    "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&o.jsxs("form",{onSubmit:y,className:"space-y-5 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:o.jsx(M,{name:"ArrowRight",className:"rotate-180",size:24})}),o.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":s==="canteen"?"  ":"  "})]}),s==="admin"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),o.jsx("input",{type:"email",inputMode:"email",autoComplete:"email",value:i,onChange:E=>l(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),o.jsx("input",{type:"password",inputMode:"text",autoComplete:"current-password",value:a,onChange:E=>c(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&o.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),o.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?o.jsx(M,{name:"Loader",className:"animate-spin",size:20}):o.jsx(M,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),o.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},OC=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},HC=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},bs=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=pi();return s?o.jsx("div",{className:"h-screen flex items-center justify-center",children:o.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?o.jsx(Nh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t}):o.jsx(Nh,{to:"/login",replace:!0})},X6=()=>{const{role:t,loading:e}=pi();return e?null:t==="guest"?o.jsx(Nh,{to:"/schedule",replace:!0}):o.jsx(Nh,{to:"/dashboard",replace:!0})},J6=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(OC("theme")||"light"),[s,A]=T.useState(OC("new_year_mode")==="true"),{isLoading:i}=Hn(),{logout:l,role:a,user:c}=pi();if(T.useEffect(()=>{const f=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),T.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),HC("theme",r)},[r]),T.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),HC("new_year_mode",String(s))},[s]),i)return o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:o.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher","canteen"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin"]},{to:"/nutrition",label:"",icon:"Coffee",roles:["admin","teacher","canteen"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(a||""));return o.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&o.jsx("div",{className:"snow-overlay no-print"}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),o.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 lg:w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none overflow-hidden`,children:o.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&o.jsx("div",{className:"bg-garland"}),o.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[o.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[o.jsx(M,{name:"GraduationCap",size:24}),s&&o.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:h.map(f=>o.jsxs(qn,{to:f.to,onClick:()=>e(!1),className:({isActive:m})=>`
                                    group flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-semibold transition-all relative
                                    ${m?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-slate-700 dark:hover:text-slate-300"}
                                `,children:[o.jsx(M,{name:f.icon,size:18,className:"flex-shrink-0"}),o.jsx("span",{className:"flex-1 truncate",children:f.label})]},f.to))}),o.jsx("div",{className:"hidden lg:block mb-2",children:o.jsx(XO,{})}),o.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-2",children:[o.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),o.jsx("button",{onClick:l,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:o.jsx(M,{name:"LogOut",size:16})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?o.jsx(M,{name:"Moon",size:18}):o.jsx(M,{name:"Sun",size:18})}),o.jsx("button",{onClick:()=>A(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:o.jsx(M,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[o.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&o.jsx("div",{className:"ml-auto text-xl",children:""})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:o.jsx(VQ,{})}),o.jsx(JO,{onMenuClick:()=>e(!0),role:a})]})]})},Y6=()=>{const[t,e]=T.useState(null),[r,n]=T.useState(!0),[s]=iN(),A=s.get("id");return T.useEffect(()=>{A?(n(!0),gr.getPublicData(A).then(i=>{const l={...$r,...i,settings:{...$r.settings,...i==null?void 0:i.settings}};e(l),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[A]),r?o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:o.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?o.jsx(Vk,{initialData:t,children:o.jsx(zk,{children:o.jsx($k,{children:o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[o.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:o.jsx(M,{name:"GraduationCap",size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),o.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:o.jsx(eF,{readOnly:!0})})]})})})}):o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[o.jsx(M,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function Z6(){return o.jsx(zO,{children:o.jsx(VO,{children:o.jsx(Vk,{children:o.jsx(zk,{children:o.jsx($k,{children:o.jsx(eN,{children:o.jsxs(GQ,{children:[o.jsx(Zr,{path:"/login",element:o.jsx(q6,{})}),o.jsxs(Zr,{path:"/",element:o.jsx(bs,{children:o.jsx(J6,{})}),children:[o.jsx(Zr,{index:!0,element:o.jsx(X6,{})}),o.jsx(Zr,{path:"dashboard",element:o.jsx(bs,{allowedRoles:["admin","teacher","canteen"],children:o.jsx(YO,{})})}),o.jsx(Zr,{path:"schedule",element:o.jsx(VC,{semester:1})}),o.jsx(Zr,{path:"schedule2",element:o.jsx(VC,{semester:2})}),o.jsx(Zr,{path:"substitutions",element:o.jsx(bs,{allowedRoles:["admin"],children:o.jsx(k6,{})})}),o.jsx(Zr,{path:"duty",element:o.jsx(bs,{allowedRoles:["admin"],children:o.jsx($6,{})})}),o.jsx(Zr,{path:"nutrition",element:o.jsx(bs,{allowedRoles:["admin","teacher","canteen"],children:o.jsx(W6,{})})}),o.jsx(Zr,{path:"directory",element:o.jsx(bs,{allowedRoles:["admin"],children:o.jsx(T6,{})})}),o.jsx(Zr,{path:"admin",element:o.jsx(bs,{allowedRoles:["admin"],children:o.jsx(F6,{})})}),o.jsx(Zr,{path:"reports",element:o.jsx(bs,{allowedRoles:["admin"],children:o.jsx(z6,{})})}),o.jsx(Zr,{path:"export",element:o.jsx(bs,{allowedRoles:["admin"],children:o.jsx(G6,{})})})]}),o.jsx(Zr,{path:"/public",element:o.jsx(Y6,{})})]})})})})})})})}const VC=({semester:t=1})=>{const{role:e}=pi();return o.jsx(eF,{readOnly:e!=="admin",semester:t})};Mp.createRoot(document.getElementById("root")).render(o.jsx(Is.StrictMode,{children:o.jsx(Z6,{})}));
