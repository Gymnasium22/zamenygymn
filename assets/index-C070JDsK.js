function GQ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(r,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function r(s){if(s.ep)return;s.ep=!0;const A=n(s);fetch(s.href,A)}})();function qI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var JI={exports:{}},Tf={},XI={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du=Symbol.for("react.element"),zQ=Symbol.for("react.portal"),WQ=Symbol.for("react.fragment"),$Q=Symbol.for("react.strict_mode"),qQ=Symbol.for("react.profiler"),JQ=Symbol.for("react.provider"),XQ=Symbol.for("react.context"),YQ=Symbol.for("react.forward_ref"),ZQ=Symbol.for("react.suspense"),ek=Symbol.for("react.memo"),tk=Symbol.for("react.lazy"),PB=Symbol.iterator;function nk(t){return t===null||typeof t!="object"?null:(t=PB&&t[PB]||t["@@iterator"],typeof t=="function"?t:null)}var YI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZI=Object.assign,eE={};function Va(t,e,n){this.props=t,this.context=e,this.refs=eE,this.updater=n||YI}Va.prototype.isReactComponent={};Va.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tE(){}tE.prototype=Va.prototype;function gw(t,e,n){this.props=t,this.context=e,this.refs=eE,this.updater=n||YI}var pw=gw.prototype=new tE;pw.constructor=gw;ZI(pw,Va.prototype);pw.isPureReactComponent=!0;var DB=Array.isArray,nE=Object.prototype.hasOwnProperty,mw={current:null},rE={key:!0,ref:!0,__self:!0,__source:!0};function sE(t,e,n){var r,s={},A=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)nE.call(e,r)&&!rE.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:du,type:t,key:A,ref:i,props:s,_owner:mw.current}}function rk(t,e){return{$$typeof:du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ww(t){return typeof t=="object"&&t!==null&&t.$$typeof===du}function sk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LB=/\/+/g;function Xg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sk(""+t.key):e.toString(36)}function $d(t,e,n,r,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case du:case zQ:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+Xg(i,0):r,DB(s)?(n="",t!=null&&(n=t.replace(LB,"$&/")+"/"),$d(s,e,n,"",function(c){return c})):s!=null&&(ww(s)&&(s=rk(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(LB,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",DB(t))for(var o=0;o<t.length;o++){A=t[o];var a=r+Xg(A,o);i+=$d(A,e,n,a,s)}else if(a=nk(t),typeof a=="function")for(t=a.call(t),o=0;!(A=t.next()).done;)A=A.value,a=r+Xg(A,o++),i+=$d(A,e,n,a,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ed(t,e,n){if(t==null)return t;var r=[],s=0;return $d(t,r,"","",function(A){return e.call(n,A,s++)}),r}function Ak(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qn={current:null},qd={transition:null},ik={ReactCurrentDispatcher:qn,ReactCurrentBatchConfig:qd,ReactCurrentOwner:mw};function AE(){throw Error("act(...) is not supported in production builds of React.")}Ye.Children={map:ed,forEach:function(t,e,n){ed(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ed(t,function(){e++}),e},toArray:function(t){return ed(t,function(e){return e})||[]},only:function(t){if(!ww(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ye.Component=Va;Ye.Fragment=WQ;Ye.Profiler=qQ;Ye.PureComponent=gw;Ye.StrictMode=$Q;Ye.Suspense=ZQ;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ik;Ye.act=AE;Ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ZI({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=mw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)nE.call(e,a)&&!rE.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:du,type:t.type,key:s,ref:A,props:r,_owner:i}};Ye.createContext=function(t){return t={$$typeof:XQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JQ,_context:t},t.Consumer=t};Ye.createElement=sE;Ye.createFactory=function(t){var e=sE.bind(null,t);return e.type=t,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(t){return{$$typeof:YQ,render:t}};Ye.isValidElement=ww;Ye.lazy=function(t){return{$$typeof:tk,_payload:{_status:-1,_result:t},_init:Ak}};Ye.memo=function(t,e){return{$$typeof:ek,type:t,compare:e===void 0?null:e}};Ye.startTransition=function(t){var e=qd.transition;qd.transition={};try{t()}finally{qd.transition=e}};Ye.unstable_act=AE;Ye.useCallback=function(t,e){return qn.current.useCallback(t,e)};Ye.useContext=function(t){return qn.current.useContext(t)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(t){return qn.current.useDeferredValue(t)};Ye.useEffect=function(t,e){return qn.current.useEffect(t,e)};Ye.useId=function(){return qn.current.useId()};Ye.useImperativeHandle=function(t,e,n){return qn.current.useImperativeHandle(t,e,n)};Ye.useInsertionEffect=function(t,e){return qn.current.useInsertionEffect(t,e)};Ye.useLayoutEffect=function(t,e){return qn.current.useLayoutEffect(t,e)};Ye.useMemo=function(t,e){return qn.current.useMemo(t,e)};Ye.useReducer=function(t,e,n){return qn.current.useReducer(t,e,n)};Ye.useRef=function(t){return qn.current.useRef(t)};Ye.useState=function(t){return qn.current.useState(t)};Ye.useSyncExternalStore=function(t,e,n){return qn.current.useSyncExternalStore(t,e,n)};Ye.useTransition=function(){return qn.current.useTransition()};Ye.version="18.3.1";XI.exports=Ye;var k=XI.exports;const Fi=qI(k),ok=GQ({__proto__:null,default:Fi},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ak=k,lk=Symbol.for("react.element"),ck=Symbol.for("react.fragment"),uk=Object.prototype.hasOwnProperty,dk=ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hk={key:!0,ref:!0,__self:!0,__source:!0};function iE(t,e,n){var r,s={},A=null,i=null;n!==void 0&&(A=""+n),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)uk.call(e,r)&&!hk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lk,type:t,key:A,ref:i,props:s,_owner:dk.current}}Tf.Fragment=ck;Tf.jsx=iE;Tf.jsxs=iE;JI.exports=Tf;var l=JI.exports,dm={},oE={exports:{}},_r={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,Q){var V=re.length;re.push(Q);e:for(;0<V;){var W=V-1>>>1,se=re[W];if(0<s(se,Q))re[W]=Q,re[V]=se,V=W;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var Q=re[0],V=re.pop();if(V!==Q){re[0]=V;e:for(var W=0,se=re.length,K=se>>>1;W<K;){var $=2*(W+1)-1,ie=re[$],de=$+1,z=re[de];if(0>s(ie,V))de<se&&0>s(z,ie)?(re[W]=z,re[de]=V,W=de):(re[W]=ie,re[$]=V,W=$);else if(de<se&&0>s(z,V))re[W]=z,re[de]=V,W=de;else break e}}return Q}function s(re,Q){var V=re.sortIndex-Q.sortIndex;return V!==0?V:re.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],c=[],d=1,h=null,f=3,m=!1,v=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(re){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=re)r(c),Q.sortIndex=Q.expirationTime,e(a,Q);else break;Q=n(c)}}function S(re){if(y=!1,_(re),!v)if(n(a)!==null)v=!0,$e(U);else{var Q=n(c);Q!==null&&Se(S,Q.startTime-re)}}function U(re,Q){v=!1,y&&(y=!1,C(x),x=-1),m=!0;var V=f;try{for(_(Q),h=n(a);h!==null&&(!(h.expirationTime>Q)||re&&!R());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var se=W(h.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(a)&&r(a),_(Q)}else r(a);h=n(a)}if(h!==null)var K=!0;else{var $=n(c);$!==null&&Se(S,$.startTime-Q),K=!1}return K}finally{h=null,f=V,m=!1}}var N=!1,B=null,x=-1,I=5,F=-1;function R(){return!(t.unstable_now()-F<I)}function L(){if(B!==null){var re=t.unstable_now();F=re;var Q=!0;try{Q=B(!0,re)}finally{Q?b():(N=!1,B=null)}}else N=!1}var b;if(typeof w=="function")b=function(){w(L)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Re=Qe.port2;Qe.port1.onmessage=L,b=function(){Re.postMessage(null)}}else b=function(){T(L,0)};function $e(re){B=re,N||(N=!0,b())}function Se(re,Q){x=T(function(){re(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,$e(U))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(re){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var V=f;f=Q;try{return re()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,Q){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var V=f;f=re;try{return Q()}finally{f=V}},t.unstable_scheduleCallback=function(re,Q,V){var W=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,re){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=V+se,re={id:d++,callback:Q,priorityLevel:re,startTime:V,expirationTime:se,sortIndex:-1},V>W?(re.sortIndex=V,e(c,re),n(a)===null&&re===n(c)&&(y?(C(x),x=-1):y=!0,Se(S,V-W))):(re.sortIndex=se,e(a,re),v||m||(v=!0,$e(U))),re},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(re){var Q=f;return function(){var V=f;f=Q;try{return re.apply(this,arguments)}finally{f=V}}}})(lE);aE.exports=lE;var fk=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=k,xr=fk;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cE=new Set,Bc={};function ao(t,e){ga(t,e),ga(t+"Capture",e)}function ga(t,e){for(Bc[t]=e,t=0;t<e.length;t++)cE.add(e[t])}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hm=Object.prototype.hasOwnProperty,pk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OB={},MB={};function mk(t){return hm.call(MB,t)?!0:hm.call(OB,t)?!1:pk.test(t)?MB[t]=!0:(OB[t]=!0,!1)}function wk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vk(t,e,n,r){if(e===null||typeof e>"u"||wk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jn(t,e,n,r,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){In[t]=new Jn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];In[e]=new Jn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){In[t]=new Jn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){In[t]=new Jn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){In[t]=new Jn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){In[t]=new Jn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){In[t]=new Jn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){In[t]=new Jn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){In[t]=new Jn(t,5,!1,t.toLowerCase(),null,!1,!1)});var vw=/[\-:]([a-z])/g;function yw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vw,yw);In[e]=new Jn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vw,yw);In[e]=new Jn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vw,yw);In[e]=new Jn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){In[t]=new Jn(t,1,!1,t.toLowerCase(),null,!1,!1)});In.xlinkHref=new Jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){In[t]=new Jn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bw(t,e,n,r){var s=In.hasOwnProperty(e)?In[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vk(e,n,s,r)&&(n=null),r||s===null?mk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qs=gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,td=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),fm=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),dE=Symbol.for("react.context"),Cw=Symbol.for("react.forward_ref"),gm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),_w=Symbol.for("react.memo"),fA=Symbol.for("react.lazy"),hE=Symbol.for("react.offscreen"),VB=Symbol.iterator;function fl(t){return t===null||typeof t!="object"?null:(t=VB&&t[VB]||t["@@iterator"],typeof t=="function"?t:null)}var Rt=Object.assign,Yg;function Rl(t){if(Yg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yg=e&&e[1]||""}return`
`+Yg+t}var Zg=!1;function ep(t,e){if(!t||Zg)return"";Zg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=r.stack.split(`
`),i=s.length-1,o=A.length-1;1<=i&&0<=o&&s[i]!==A[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==A[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==A[o]){var a=`
`+s[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{Zg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rl(t):""}function yk(t){switch(t.tag){case 5:return Rl(t.type);case 16:return Rl("Lazy");case 13:return Rl("Suspense");case 19:return Rl("SuspenseList");case 0:case 2:case 15:return t=ep(t.type,!1),t;case 11:return t=ep(t.type.render,!1),t;case 1:return t=ep(t.type,!0),t;default:return""}}function mm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Ho:return"Portal";case fm:return"Profiler";case xw:return"StrictMode";case gm:return"Suspense";case pm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dE:return(t.displayName||"Context")+".Consumer";case uE:return(t._context.displayName||"Context")+".Provider";case Cw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _w:return e=t.displayName||null,e!==null?e:mm(t.type)||"Memo";case fA:e=t._payload,t=t._init;try{return mm(t(e))}catch{}}return null}function Bk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mm(e);case 8:return e===xw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xk(t){var e=fE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,A=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nd(t){t._valueTracker||(t._valueTracker=xk(t))}function gE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wm(t,e){var n=e.checked;return Rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function HB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jA(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pE(t,e){e=e.checked,e!=null&&Bw(t,"checked",e,!1)}function vm(t,e){pE(t,e);var n=jA(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&ym(t,e.type,jA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ym(t,e,n){(e!=="number"||xh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nl=Array.isArray;function na(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jA(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Nl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jA(n)}}function mE(t,e){var n=jA(e.value),r=jA(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function GB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rd,vE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rd=rd||document.createElement("div"),rd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ck=["Webkit","ms","Moz","O"];Object.keys(Yl).forEach(function(t){Ck.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yl[e]=Yl[t]})});function yE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yl.hasOwnProperty(t)&&Yl[t]?(""+e).trim():e+"px"}function BE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _k=Rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cm(t,e){if(e){if(_k[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function _m(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=null;function Iw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Em=null,ra=null,sa=null;function zB(t){if(t=gu(t)){if(typeof Em!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=kf(e),Em(t.stateNode,t.type,e))}}function xE(t){ra?sa?sa.push(t):sa=[t]:ra=t}function CE(){if(ra){var t=ra,e=sa;if(sa=ra=null,zB(t),e)for(t=0;t<e.length;t++)zB(e[t])}}function _E(t,e){return t(e)}function IE(){}var tp=!1;function EE(t,e,n){if(tp)return t(e,n);tp=!0;try{return _E(t,e,n)}finally{tp=!1,(ra!==null||sa!==null)&&(IE(),CE())}}function Cc(t,e){var n=t.stateNode;if(n===null)return null;var r=kf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var bm=!1;if(Ms)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){bm=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch{bm=!1}function Ik(t,e,n,r,s,A,i,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Zl=!1,Ch=null,_h=!1,Tm=null,Ek={onError:function(t){Zl=!0,Ch=t}};function bk(t,e,n,r,s,A,i,o,a){Zl=!1,Ch=null,Ik.apply(Ek,arguments)}function Tk(t,e,n,r,s,A,i,o,a){if(bk.apply(this,arguments),Zl){if(Zl){var c=Ch;Zl=!1,Ch=null}else throw Error(ee(198));_h||(_h=!0,Tm=c)}}function lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WB(t){if(lo(t)!==t)throw Error(ee(188))}function Fk(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var A=s.alternate;if(A===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===n)return WB(s),t;if(A===r)return WB(s),e;A=A.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=A;else{for(var i=!1,o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i){for(o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function TE(t){return t=Fk(t),t!==null?FE(t):null}function FE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FE(t);if(e!==null)return e;t=t.sibling}return null}var UE=xr.unstable_scheduleCallback,$B=xr.unstable_cancelCallback,Uk=xr.unstable_shouldYield,Sk=xr.unstable_requestPaint,zt=xr.unstable_now,Qk=xr.unstable_getCurrentPriorityLevel,Ew=xr.unstable_ImmediatePriority,SE=xr.unstable_UserBlockingPriority,Ih=xr.unstable_NormalPriority,kk=xr.unstable_LowPriority,QE=xr.unstable_IdlePriority,Ff=null,hs=null;function Rk(t){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(Ff,t,void 0,(t.current.flags&128)===128)}catch{}}var $r=Math.clz32?Math.clz32:Dk,Nk=Math.log,Pk=Math.LN2;function Dk(t){return t>>>=0,t===0?32:31-(Nk(t)/Pk|0)|0}var sd=64,Ad=4194304;function Pl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,A=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~s;o!==0?r=Pl(o):(A&=i,A!==0&&(r=Pl(A)))}else i=n&~s,i!==0?r=Pl(i):A!==0&&(r=Pl(A));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$r(e),s=1<<n,r|=t[n],e&=~s;return r}function Lk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ok(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-$r(A),o=1<<i,a=s[i];a===-1?(!(o&n)||o&r)&&(s[i]=Lk(o,e)):a<=e&&(t.expiredLanes|=o),A&=~o}}function Fm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kE(){var t=sd;return sd<<=1,!(sd&4194240)&&(sd=64),t}function np(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$r(e),t[e]=n}function Mk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$r(n),A=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~A}}function bw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$r(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var dt=0;function RE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NE,Tw,PE,DE,LE,Um=!1,id=[],UA=null,SA=null,QA=null,_c=new Map,Ic=new Map,mA=[],Vk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qB(t,e){switch(t){case"focusin":case"focusout":UA=null;break;case"dragenter":case"dragleave":SA=null;break;case"mouseover":case"mouseout":QA=null;break;case"pointerover":case"pointerout":_c.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(e.pointerId)}}function pl(t,e,n,r,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:A,targetContainers:[s]},e!==null&&(e=gu(e),e!==null&&Tw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Hk(t,e,n,r,s){switch(e){case"focusin":return UA=pl(UA,t,e,n,r,s),!0;case"dragenter":return SA=pl(SA,t,e,n,r,s),!0;case"mouseover":return QA=pl(QA,t,e,n,r,s),!0;case"pointerover":var A=s.pointerId;return _c.set(A,pl(_c.get(A)||null,t,e,n,r,s)),!0;case"gotpointercapture":return A=s.pointerId,Ic.set(A,pl(Ic.get(A)||null,t,e,n,r,s)),!0}return!1}function OE(t){var e=Ui(t.target);if(e!==null){var n=lo(e);if(n!==null){if(e=n.tag,e===13){if(e=bE(n),e!==null){t.blockedOn=e,LE(t.priority,function(){PE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Im=r,n.target.dispatchEvent(r),Im=null}else return e=gu(n),e!==null&&Tw(e),t.blockedOn=n,!1;e.shift()}return!0}function JB(t,e,n){Jd(t)&&n.delete(e)}function jk(){Um=!1,UA!==null&&Jd(UA)&&(UA=null),SA!==null&&Jd(SA)&&(SA=null),QA!==null&&Jd(QA)&&(QA=null),_c.forEach(JB),Ic.forEach(JB)}function ml(t,e){t.blockedOn===e&&(t.blockedOn=null,Um||(Um=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,jk)))}function Ec(t){function e(s){return ml(s,t)}if(0<id.length){ml(id[0],t);for(var n=1;n<id.length;n++){var r=id[n];r.blockedOn===t&&(r.blockedOn=null)}}for(UA!==null&&ml(UA,t),SA!==null&&ml(SA,t),QA!==null&&ml(QA,t),_c.forEach(e),Ic.forEach(e),n=0;n<mA.length;n++)r=mA[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mA.length&&(n=mA[0],n.blockedOn===null);)OE(n),n.blockedOn===null&&mA.shift()}var Aa=qs.ReactCurrentBatchConfig,bh=!0;function Kk(t,e,n,r){var s=dt,A=Aa.transition;Aa.transition=null;try{dt=1,Fw(t,e,n,r)}finally{dt=s,Aa.transition=A}}function Gk(t,e,n,r){var s=dt,A=Aa.transition;Aa.transition=null;try{dt=4,Fw(t,e,n,r)}finally{dt=s,Aa.transition=A}}function Fw(t,e,n,r){if(bh){var s=Sm(t,e,n,r);if(s===null)dp(t,e,r,Th,n),qB(t,r);else if(Hk(s,t,e,n,r))r.stopPropagation();else if(qB(t,r),e&4&&-1<Vk.indexOf(t)){for(;s!==null;){var A=gu(s);if(A!==null&&NE(A),A=Sm(t,e,n,r),A===null&&dp(t,e,r,Th,n),A===s)break;s=A}s!==null&&r.stopPropagation()}else dp(t,e,r,null,n)}}var Th=null;function Sm(t,e,n,r){if(Th=null,t=Iw(r),t=Ui(t),t!==null)if(e=lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Th=t,null}function ME(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qk()){case Ew:return 1;case SE:return 4;case Ih:case kk:return 16;case QE:return 536870912;default:return 16}default:return 16}}var BA=null,Uw=null,Xd=null;function VE(){if(Xd)return Xd;var t,e=Uw,n=e.length,r,s="value"in BA?BA.value:BA.textContent,A=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[A-r];r++);return Xd=s.slice(t,1<r?1-r:void 0)}function Yd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function od(){return!0}function XB(){return!1}function Ir(t){function e(n,r,s,A,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(A):A[o]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?od:XB,this.isPropagationStopped=XB,this}return Rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),e}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sw=Ir(Ha),fu=Rt({},Ha,{view:0,detail:0}),zk=Ir(fu),rp,sp,wl,Uf=Rt({},fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?(rp=t.screenX-wl.screenX,sp=t.screenY-wl.screenY):sp=rp=0,wl=t),rp)},movementY:function(t){return"movementY"in t?t.movementY:sp}}),YB=Ir(Uf),Wk=Rt({},Uf,{dataTransfer:0}),$k=Ir(Wk),qk=Rt({},fu,{relatedTarget:0}),Ap=Ir(qk),Jk=Rt({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Xk=Ir(Jk),Yk=Rt({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zk=Ir(Yk),e2=Rt({},Ha,{data:0}),ZB=Ir(e2),t2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r2[t])?!!e[t]:!1}function Qw(){return s2}var A2=Rt({},fu,{key:function(t){if(t.key){var e=t2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qw,charCode:function(t){return t.type==="keypress"?Yd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i2=Ir(A2),o2=Rt({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=Ir(o2),a2=Rt({},fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qw}),l2=Ir(a2),c2=Rt({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=Ir(c2),d2=Rt({},Uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=Ir(d2),f2=[9,13,27,32],kw=Ms&&"CompositionEvent"in window,ec=null;Ms&&"documentMode"in document&&(ec=document.documentMode);var g2=Ms&&"TextEvent"in window&&!ec,HE=Ms&&(!kw||ec&&8<ec&&11>=ec),tx=" ",nx=!1;function jE(t,e){switch(t){case"keyup":return f2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function p2(t,e){switch(t){case"compositionend":return KE(e);case"keypress":return e.which!==32?null:(nx=!0,tx);case"textInput":return t=e.data,t===tx&&nx?null:t;default:return null}}function m2(t,e){if(Ko)return t==="compositionend"||!kw&&jE(t,e)?(t=VE(),Xd=Uw=BA=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HE&&e.locale!=="ko"?null:e.data;default:return null}}var w2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w2[t.type]:e==="textarea"}function GE(t,e,n,r){xE(r),e=Fh(e,"onChange"),0<e.length&&(n=new Sw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var tc=null,bc=null;function v2(t){nb(t,0)}function Sf(t){var e=Wo(t);if(gE(e))return t}function y2(t,e){if(t==="change")return e}var zE=!1;if(Ms){var ip;if(Ms){var op="oninput"in document;if(!op){var sx=document.createElement("div");sx.setAttribute("oninput","return;"),op=typeof sx.oninput=="function"}ip=op}else ip=!1;zE=ip&&(!document.documentMode||9<document.documentMode)}function Ax(){tc&&(tc.detachEvent("onpropertychange",WE),bc=tc=null)}function WE(t){if(t.propertyName==="value"&&Sf(bc)){var e=[];GE(e,bc,t,Iw(t)),EE(v2,e)}}function B2(t,e,n){t==="focusin"?(Ax(),tc=e,bc=n,tc.attachEvent("onpropertychange",WE)):t==="focusout"&&Ax()}function x2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sf(bc)}function C2(t,e){if(t==="click")return Sf(e)}function _2(t,e){if(t==="input"||t==="change")return Sf(e)}function I2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xr=typeof Object.is=="function"?Object.is:I2;function Tc(t,e){if(Xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hm.call(e,s)||!Xr(t[s],e[s]))return!1}return!0}function ix(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ox(t,e){var n=ix(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ix(n)}}function $E(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$E(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qE(){for(var t=window,e=xh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xh(t.document)}return e}function Rw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function E2(t){var e=qE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$E(n.ownerDocument.documentElement,n)){if(r!==null&&Rw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,A=Math.min(r.start,s);r=r.end===void 0?A:Math.min(r.end,s),!t.extend&&A>r&&(s=r,r=A,A=s),s=ox(n,A);var i=ox(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var b2=Ms&&"documentMode"in document&&11>=document.documentMode,Go=null,Qm=null,nc=null,km=!1;function ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;km||Go==null||Go!==xh(r)||(r=Go,"selectionStart"in r&&Rw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nc&&Tc(nc,r)||(nc=r,r=Fh(Qm,"onSelect"),0<r.length&&(e=new Sw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Go)))}function ad(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zo={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},ap={},JE={};Ms&&(JE=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Qf(t){if(ap[t])return ap[t];if(!zo[t])return t;var e=zo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JE)return ap[t]=e[n];return t}var XE=Qf("animationend"),YE=Qf("animationiteration"),ZE=Qf("animationstart"),eb=Qf("transitionend"),tb=new Map,lx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(t,e){tb.set(t,e),ao(e,[t])}for(var lp=0;lp<lx.length;lp++){var cp=lx[lp],T2=cp.toLowerCase(),F2=cp[0].toUpperCase()+cp.slice(1);ri(T2,"on"+F2)}ri(XE,"onAnimationEnd");ri(YE,"onAnimationIteration");ri(ZE,"onAnimationStart");ri("dblclick","onDoubleClick");ri("focusin","onFocus");ri("focusout","onBlur");ri(eb,"onTransitionEnd");ga("onMouseEnter",["mouseout","mouseover"]);ga("onMouseLeave",["mouseout","mouseover"]);ga("onPointerEnter",["pointerout","pointerover"]);ga("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function cx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tk(r,e,void 0,t),t.currentTarget=null}function nb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var A=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==A&&s.isPropagationStopped())break e;cx(s,o,c),A=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,c=o.currentTarget,o=o.listener,a!==A&&s.isPropagationStopped())break e;cx(s,o,c),A=a}}}if(_h)throw t=Tm,_h=!1,Tm=null,t}function yt(t,e){var n=e[Lm];n===void 0&&(n=e[Lm]=new Set);var r=t+"__bubble";n.has(r)||(rb(e,t,2,!1),n.add(r))}function up(t,e,n){var r=0;e&&(r|=4),rb(n,t,r,e)}var ld="_reactListening"+Math.random().toString(36).slice(2);function Fc(t){if(!t[ld]){t[ld]=!0,cE.forEach(function(n){n!=="selectionchange"&&(U2.has(n)||up(n,!1,t),up(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ld]||(e[ld]=!0,up("selectionchange",!1,e))}}function rb(t,e,n,r){switch(ME(e)){case 1:var s=Kk;break;case 4:s=Gk;break;default:s=Fw}n=s.bind(null,e,n,t),s=void 0,!bm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dp(t,e,n,r,s){var A=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;i=i.return}for(;o!==null;){if(i=Ui(o),i===null)return;if(a=i.tag,a===5||a===6){r=A=i;continue e}o=o.parentNode}}r=r.return}EE(function(){var c=A,d=Iw(n),h=[];e:{var f=tb.get(t);if(f!==void 0){var m=Sw,v=t;switch(t){case"keypress":if(Yd(n)===0)break e;case"keydown":case"keyup":m=i2;break;case"focusin":v="focus",m=Ap;break;case"focusout":v="blur",m=Ap;break;case"beforeblur":case"afterblur":m=Ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=YB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$k;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=l2;break;case XE:case YE:case ZE:m=Xk;break;case eb:m=u2;break;case"scroll":m=zk;break;case"wheel":m=h2;break;case"copy":case"cut":case"paste":m=Zk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ex}var y=(e&4)!==0,T=!y&&t==="scroll",C=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,_;w!==null;){_=w;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,C!==null&&(S=Cc(w,C),S!=null&&y.push(Uc(w,S,_)))),T)break;w=w.return}0<y.length&&(f=new m(f,v,null,n,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Im&&(v=n.relatedTarget||n.fromElement)&&(Ui(v)||v[Vs]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Ui(v):null,v!==null&&(T=lo(v),v!==T||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=YB,S="onMouseLeave",C="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=ex,S="onPointerLeave",C="onPointerEnter",w="pointer"),T=m==null?f:Wo(m),_=v==null?f:Wo(v),f=new y(S,w+"leave",m,n,d),f.target=T,f.relatedTarget=_,S=null,Ui(d)===c&&(y=new y(C,w+"enter",v,n,d),y.target=_,y.relatedTarget=T,S=y),T=S,m&&v)t:{for(y=m,C=v,w=0,_=y;_;_=Co(_))w++;for(_=0,S=C;S;S=Co(S))_++;for(;0<w-_;)y=Co(y),w--;for(;0<_-w;)C=Co(C),_--;for(;w--;){if(y===C||C!==null&&y===C.alternate)break t;y=Co(y),C=Co(C)}y=null}else y=null;m!==null&&ux(h,f,m,y,!1),v!==null&&T!==null&&ux(h,T,v,y,!0)}}e:{if(f=c?Wo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var U=y2;else if(rx(f))if(zE)U=_2;else{U=x2;var N=B2}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=C2);if(U&&(U=U(t,c))){GE(h,U,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&ym(f,"number",f.value)}switch(N=c?Wo(c):window,t){case"focusin":(rx(N)||N.contentEditable==="true")&&(Go=N,Qm=c,nc=null);break;case"focusout":nc=Qm=Go=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,ax(h,n,d);break;case"selectionchange":if(b2)break;case"keydown":case"keyup":ax(h,n,d)}var B;if(kw)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ko?jE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(HE&&n.locale!=="ko"&&(Ko||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ko&&(B=VE()):(BA=d,Uw="value"in BA?BA.value:BA.textContent,Ko=!0)),N=Fh(c,x),0<N.length&&(x=new ZB(x,t,null,n,d),h.push({event:x,listeners:N}),B?x.data=B:(B=KE(n),B!==null&&(x.data=B)))),(B=g2?p2(t,n):m2(t,n))&&(c=Fh(c,"onBeforeInput"),0<c.length&&(d=new ZB("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=B))}nb(h,e)})}function Uc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=Cc(t,n),A!=null&&r.unshift(Uc(t,A,s)),A=Cc(t,e),A!=null&&r.push(Uc(t,A,s))),t=t.return}return r}function Co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ux(t,e,n,r,s){for(var A=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,c=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&c!==null&&(o=c,s?(a=Cc(n,A),a!=null&&i.unshift(Uc(n,a,o))):s||(a=Cc(n,A),a!=null&&i.push(Uc(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var S2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function dx(t){return(typeof t=="string"?t:""+t).replace(S2,`
`).replace(Q2,"")}function cd(t,e,n){if(e=dx(e),dx(t)!==e&&n)throw Error(ee(425))}function Uh(){}var Rm=null,Nm=null;function Pm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=typeof setTimeout=="function"?setTimeout:void 0,k2=typeof clearTimeout=="function"?clearTimeout:void 0,hx=typeof Promise=="function"?Promise:void 0,R2=typeof queueMicrotask=="function"?queueMicrotask:typeof hx<"u"?function(t){return hx.resolve(null).then(t).catch(N2)}:Dm;function N2(t){setTimeout(function(){throw t})}function hp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ec(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ec(e)}function kA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),rs="__reactFiber$"+ja,Sc="__reactProps$"+ja,Vs="__reactContainer$"+ja,Lm="__reactEvents$"+ja,P2="__reactListeners$"+ja,D2="__reactHandles$"+ja;function Ui(t){var e=t[rs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vs]||n[rs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fx(t);t!==null;){if(n=t[rs])return n;t=fx(t)}return e}t=n,n=t.parentNode}return null}function gu(t){return t=t[rs]||t[Vs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function kf(t){return t[Sc]||null}var Om=[],$o=-1;function si(t){return{current:t}}function xt(t){0>$o||(t.current=Om[$o],Om[$o]=null,$o--)}function mt(t,e){$o++,Om[$o]=t.current,t.current=e}var KA={},Pn=si(KA),ar=si(!1),Ki=KA;function pa(t,e){var n=t.type.contextTypes;if(!n)return KA;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in n)s[A]=e[A];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function lr(t){return t=t.childContextTypes,t!=null}function Sh(){xt(ar),xt(Pn)}function gx(t,e,n){if(Pn.current!==KA)throw Error(ee(168));mt(Pn,e),mt(ar,n)}function sb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,Bk(t)||"Unknown",s));return Rt({},n,r)}function Qh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||KA,Ki=Pn.current,mt(Pn,t),mt(ar,ar.current),!0}function px(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=sb(t,e,Ki),r.__reactInternalMemoizedMergedChildContext=t,xt(ar),xt(Pn),mt(Pn,t)):xt(ar),mt(ar,n)}var Fs=null,Rf=!1,fp=!1;function Ab(t){Fs===null?Fs=[t]:Fs.push(t)}function L2(t){Rf=!0,Ab(t)}function Ai(){if(!fp&&Fs!==null){fp=!0;var t=0,e=dt;try{var n=Fs;for(dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fs=null,Rf=!1}catch(s){throw Fs!==null&&(Fs=Fs.slice(t+1)),UE(Ew,Ai),s}finally{dt=e,fp=!1}}return null}var qo=[],Jo=0,kh=null,Rh=0,Fr=[],Ur=0,Gi=null,Us=1,Ss="";function vi(t,e){qo[Jo++]=Rh,qo[Jo++]=kh,kh=t,Rh=e}function ib(t,e,n){Fr[Ur++]=Us,Fr[Ur++]=Ss,Fr[Ur++]=Gi,Gi=t;var r=Us;t=Ss;var s=32-$r(r)-1;r&=~(1<<s),n+=1;var A=32-$r(e)+s;if(30<A){var i=s-s%5;A=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Us=1<<32-$r(e)+s|n<<s|r,Ss=A+t}else Us=1<<A|n<<s|r,Ss=t}function Nw(t){t.return!==null&&(vi(t,1),ib(t,1,0))}function Pw(t){for(;t===kh;)kh=qo[--Jo],qo[Jo]=null,Rh=qo[--Jo],qo[Jo]=null;for(;t===Gi;)Gi=Fr[--Ur],Fr[Ur]=null,Ss=Fr[--Ur],Fr[Ur]=null,Us=Fr[--Ur],Fr[Ur]=null}var Br=null,vr=null,Et=!1,Wr=null;function ob(t,e){var n=Qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Br=t,vr=kA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Br=t,vr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gi!==null?{id:Us,overflow:Ss}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Br=t,vr=null,!0):!1;default:return!1}}function Mm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vm(t){if(Et){var e=vr;if(e){var n=e;if(!mx(t,e)){if(Mm(t))throw Error(ee(418));e=kA(n.nextSibling);var r=Br;e&&mx(t,e)?ob(r,n):(t.flags=t.flags&-4097|2,Et=!1,Br=t)}}else{if(Mm(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Et=!1,Br=t}}}function wx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Br=t}function ud(t){if(t!==Br)return!1;if(!Et)return wx(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pm(t.type,t.memoizedProps)),e&&(e=vr)){if(Mm(t))throw ab(),Error(ee(418));for(;e;)ob(t,e),e=kA(e.nextSibling)}if(wx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vr=kA(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vr=null}}else vr=Br?kA(t.stateNode.nextSibling):null;return!0}function ab(){for(var t=vr;t;)t=kA(t.nextSibling)}function ma(){vr=Br=null,Et=!1}function Dw(t){Wr===null?Wr=[t]:Wr.push(t)}var O2=qs.ReactCurrentBatchConfig;function vl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var o=s.refs;i===null?delete o[A]:o[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function dd(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vx(t){var e=t._init;return e(t._payload)}function lb(t){function e(C,w){if(t){var _=C.deletions;_===null?(C.deletions=[w],C.flags|=16):_.push(w)}}function n(C,w){if(!t)return null;for(;w!==null;)e(C,w),w=w.sibling;return null}function r(C,w){for(C=new Map;w!==null;)w.key!==null?C.set(w.key,w):C.set(w.index,w),w=w.sibling;return C}function s(C,w){return C=DA(C,w),C.index=0,C.sibling=null,C}function A(C,w,_){return C.index=_,t?(_=C.alternate,_!==null?(_=_.index,_<w?(C.flags|=2,w):_):(C.flags|=2,w)):(C.flags|=1048576,w)}function i(C){return t&&C.alternate===null&&(C.flags|=2),C}function o(C,w,_,S){return w===null||w.tag!==6?(w=Bp(_,C.mode,S),w.return=C,w):(w=s(w,_),w.return=C,w)}function a(C,w,_,S){var U=_.type;return U===jo?d(C,w,_.props.children,S,_.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===fA&&vx(U)===w.type)?(S=s(w,_.props),S.ref=vl(C,w,_),S.return=C,S):(S=Ah(_.type,_.key,_.props,null,C.mode,S),S.ref=vl(C,w,_),S.return=C,S)}function c(C,w,_,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=xp(_,C.mode,S),w.return=C,w):(w=s(w,_.children||[]),w.return=C,w)}function d(C,w,_,S,U){return w===null||w.tag!==7?(w=Li(_,C.mode,S,U),w.return=C,w):(w=s(w,_),w.return=C,w)}function h(C,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Bp(""+w,C.mode,_),w.return=C,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case td:return _=Ah(w.type,w.key,w.props,null,C.mode,_),_.ref=vl(C,null,w),_.return=C,_;case Ho:return w=xp(w,C.mode,_),w.return=C,w;case fA:var S=w._init;return h(C,S(w._payload),_)}if(Nl(w)||fl(w))return w=Li(w,C.mode,_,null),w.return=C,w;dd(C,w)}return null}function f(C,w,_,S){var U=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return U!==null?null:o(C,w,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case td:return _.key===U?a(C,w,_,S):null;case Ho:return _.key===U?c(C,w,_,S):null;case fA:return U=_._init,f(C,w,U(_._payload),S)}if(Nl(_)||fl(_))return U!==null?null:d(C,w,_,S,null);dd(C,_)}return null}function m(C,w,_,S,U){if(typeof S=="string"&&S!==""||typeof S=="number")return C=C.get(_)||null,o(w,C,""+S,U);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case td:return C=C.get(S.key===null?_:S.key)||null,a(w,C,S,U);case Ho:return C=C.get(S.key===null?_:S.key)||null,c(w,C,S,U);case fA:var N=S._init;return m(C,w,_,N(S._payload),U)}if(Nl(S)||fl(S))return C=C.get(_)||null,d(w,C,S,U,null);dd(w,S)}return null}function v(C,w,_,S){for(var U=null,N=null,B=w,x=w=0,I=null;B!==null&&x<_.length;x++){B.index>x?(I=B,B=null):I=B.sibling;var F=f(C,B,_[x],S);if(F===null){B===null&&(B=I);break}t&&B&&F.alternate===null&&e(C,B),w=A(F,w,x),N===null?U=F:N.sibling=F,N=F,B=I}if(x===_.length)return n(C,B),Et&&vi(C,x),U;if(B===null){for(;x<_.length;x++)B=h(C,_[x],S),B!==null&&(w=A(B,w,x),N===null?U=B:N.sibling=B,N=B);return Et&&vi(C,x),U}for(B=r(C,B);x<_.length;x++)I=m(B,C,x,_[x],S),I!==null&&(t&&I.alternate!==null&&B.delete(I.key===null?x:I.key),w=A(I,w,x),N===null?U=I:N.sibling=I,N=I);return t&&B.forEach(function(R){return e(C,R)}),Et&&vi(C,x),U}function y(C,w,_,S){var U=fl(_);if(typeof U!="function")throw Error(ee(150));if(_=U.call(_),_==null)throw Error(ee(151));for(var N=U=null,B=w,x=w=0,I=null,F=_.next();B!==null&&!F.done;x++,F=_.next()){B.index>x?(I=B,B=null):I=B.sibling;var R=f(C,B,F.value,S);if(R===null){B===null&&(B=I);break}t&&B&&R.alternate===null&&e(C,B),w=A(R,w,x),N===null?U=R:N.sibling=R,N=R,B=I}if(F.done)return n(C,B),Et&&vi(C,x),U;if(B===null){for(;!F.done;x++,F=_.next())F=h(C,F.value,S),F!==null&&(w=A(F,w,x),N===null?U=F:N.sibling=F,N=F);return Et&&vi(C,x),U}for(B=r(C,B);!F.done;x++,F=_.next())F=m(B,C,x,F.value,S),F!==null&&(t&&F.alternate!==null&&B.delete(F.key===null?x:F.key),w=A(F,w,x),N===null?U=F:N.sibling=F,N=F);return t&&B.forEach(function(L){return e(C,L)}),Et&&vi(C,x),U}function T(C,w,_,S){if(typeof _=="object"&&_!==null&&_.type===jo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case td:e:{for(var U=_.key,N=w;N!==null;){if(N.key===U){if(U=_.type,U===jo){if(N.tag===7){n(C,N.sibling),w=s(N,_.props.children),w.return=C,C=w;break e}}else if(N.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===fA&&vx(U)===N.type){n(C,N.sibling),w=s(N,_.props),w.ref=vl(C,N,_),w.return=C,C=w;break e}n(C,N);break}else e(C,N);N=N.sibling}_.type===jo?(w=Li(_.props.children,C.mode,S,_.key),w.return=C,C=w):(S=Ah(_.type,_.key,_.props,null,C.mode,S),S.ref=vl(C,w,_),S.return=C,C=S)}return i(C);case Ho:e:{for(N=_.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(C,w.sibling),w=s(w,_.children||[]),w.return=C,C=w;break e}else{n(C,w);break}else e(C,w);w=w.sibling}w=xp(_,C.mode,S),w.return=C,C=w}return i(C);case fA:return N=_._init,T(C,w,N(_._payload),S)}if(Nl(_))return v(C,w,_,S);if(fl(_))return y(C,w,_,S);dd(C,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(C,w.sibling),w=s(w,_),w.return=C,C=w):(n(C,w),w=Bp(_,C.mode,S),w.return=C,C=w),i(C)):n(C,w)}return T}var wa=lb(!0),cb=lb(!1),Nh=si(null),Ph=null,Xo=null,Lw=null;function Ow(){Lw=Xo=Ph=null}function Mw(t){var e=Nh.current;xt(Nh),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){Ph=t,Lw=Xo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sr=!0),t.firstContext=null)}function Lr(t){var e=t._currentValue;if(Lw!==t)if(t={context:t,memoizedValue:e,next:null},Xo===null){if(Ph===null)throw Error(ee(308));Xo=t,Ph.dependencies={lanes:0,firstContext:t}}else Xo=Xo.next=t;return e}var Si=null;function Vw(t){Si===null?Si=[t]:Si.push(t)}function ub(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vw(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hs(t,r)}function Hs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gA=!1;function Hw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function db(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ps(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function RA(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hs(t,n)}return s=r.interleaved,s===null?(e.next=e,Vw(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hs(t,n)}function Zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bw(t,n)}}function yx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,A=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};A===null?s=A=i:A=A.next=i,n=n.next}while(n!==null);A===null?s=A=e:A=A.next=e}else s=A=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dh(t,e,n,r){var s=t.updateQueue;gA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var a=o,c=a.next;a.next=null,i===null?A=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(A!==null){var h=s.baseState;i=0,d=c=a=null,o=A;do{var f=o.lane,m=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(f=e,m=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=Rt({},h,f);break e;case 2:gA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,a=h):d=d.next=m,i|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Wi|=i,t.lanes=i,t.memoizedState=h}}function Bx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var pu={},fs=si(pu),Qc=si(pu),kc=si(pu);function Qi(t){if(t===pu)throw Error(ee(174));return t}function jw(t,e){switch(mt(kc,e),mt(Qc,t),mt(fs,pu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xm(e,t)}xt(fs),mt(fs,e)}function va(){xt(fs),xt(Qc),xt(kc)}function hb(t){Qi(kc.current);var e=Qi(fs.current),n=xm(e,t.type);e!==n&&(mt(Qc,t),mt(fs,n))}function Kw(t){Qc.current===t&&(xt(fs),xt(Qc))}var Ut=si(0);function Lh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gp=[];function Gw(){for(var t=0;t<gp.length;t++)gp[t]._workInProgressVersionPrimary=null;gp.length=0}var eh=qs.ReactCurrentDispatcher,pp=qs.ReactCurrentBatchConfig,zi=0,St=null,rn=null,hn=null,Oh=!1,rc=!1,Rc=0,M2=0;function Fn(){throw Error(ee(321))}function zw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xr(t[n],e[n]))return!1;return!0}function Ww(t,e,n,r,s,A){if(zi=A,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,eh.current=t===null||t.memoizedState===null?K2:G2,t=n(r,s),rc){A=0;do{if(rc=!1,Rc=0,25<=A)throw Error(ee(301));A+=1,hn=rn=null,e.updateQueue=null,eh.current=z2,t=n(r,s)}while(rc)}if(eh.current=Mh,e=rn!==null&&rn.next!==null,zi=0,hn=rn=St=null,Oh=!1,e)throw Error(ee(300));return t}function $w(){var t=Rc!==0;return Rc=0,t}function ns(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?St.memoizedState=hn=t:hn=hn.next=t,hn}function Or(){if(rn===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=rn.next;var e=hn===null?St.memoizedState:hn.next;if(e!==null)hn=e,rn=t;else{if(t===null)throw Error(ee(310));rn=t,t={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},hn===null?St.memoizedState=hn=t:hn=hn.next=t}return hn}function Nc(t,e){return typeof e=="function"?e(t):e}function mp(t){var e=Or(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=rn,s=r.baseQueue,A=n.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}r.baseQueue=s=A,n.pending=null}if(s!==null){A=s.next,r=r.baseState;var o=i=null,a=null,c=A;do{var d=c.lane;if((zi&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,St.lanes|=d,Wi|=d}c=c.next}while(c!==null&&c!==A);a===null?i=r:a.next=o,Xr(r,e.memoizedState)||(sr=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do A=s.lane,St.lanes|=A,Wi|=A,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wp(t){var e=Or(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,A=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);Xr(A,e.memoizedState)||(sr=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),n.lastRenderedState=A}return[A,r]}function fb(){}function gb(t,e){var n=St,r=Or(),s=e(),A=!Xr(r.memoizedState,s);if(A&&(r.memoizedState=s,sr=!0),r=r.queue,qw(wb.bind(null,n,r,t),[t]),r.getSnapshot!==e||A||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,Pc(9,mb.bind(null,n,r,s,e),void 0,null),gn===null)throw Error(ee(349));zi&30||pb(n,e,s)}return s}function pb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mb(t,e,n,r){e.value=n,e.getSnapshot=r,vb(e)&&yb(t)}function wb(t,e,n){return n(function(){vb(e)&&yb(t)})}function vb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xr(t,n)}catch{return!0}}function yb(t){var e=Hs(t,1);e!==null&&qr(e,t,1,-1)}function xx(t){var e=ns();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nc,lastRenderedState:t},e.queue=t,t=t.dispatch=j2.bind(null,St,t),[e.memoizedState,t]}function Pc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Bb(){return Or().memoizedState}function th(t,e,n,r){var s=ns();St.flags|=t,s.memoizedState=Pc(1|e,n,void 0,r===void 0?null:r)}function Nf(t,e,n,r){var s=Or();r=r===void 0?null:r;var A=void 0;if(rn!==null){var i=rn.memoizedState;if(A=i.destroy,r!==null&&zw(r,i.deps)){s.memoizedState=Pc(e,n,A,r);return}}St.flags|=t,s.memoizedState=Pc(1|e,n,A,r)}function Cx(t,e){return th(8390656,8,t,e)}function qw(t,e){return Nf(2048,8,t,e)}function xb(t,e){return Nf(4,2,t,e)}function Cb(t,e){return Nf(4,4,t,e)}function _b(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ib(t,e,n){return n=n!=null?n.concat([t]):null,Nf(4,4,_b.bind(null,e,t),n)}function Jw(){}function Eb(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bb(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Tb(t,e,n){return zi&21?(Xr(n,e)||(n=kE(),St.lanes|=n,Wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sr=!0),t.memoizedState=n)}function V2(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var r=pp.transition;pp.transition={};try{t(!1),e()}finally{dt=n,pp.transition=r}}function Fb(){return Or().memoizedState}function H2(t,e,n){var r=PA(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ub(t))Sb(e,n);else if(n=ub(t,e,n,r),n!==null){var s=Kn();qr(n,t,r,s),Qb(n,e,r)}}function j2(t,e,n){var r=PA(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ub(t))Sb(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,o=A(i,n);if(s.hasEagerState=!0,s.eagerState=o,Xr(o,i)){var a=e.interleaved;a===null?(s.next=s,Vw(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=ub(t,e,s,r),n!==null&&(s=Kn(),qr(n,t,r,s),Qb(n,e,r))}}function Ub(t){var e=t.alternate;return t===St||e!==null&&e===St}function Sb(t,e){rc=Oh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bw(t,n)}}var Mh={readContext:Lr,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},K2={readContext:Lr,useCallback:function(t,e){return ns().memoizedState=[t,e===void 0?null:e],t},useContext:Lr,useEffect:Cx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,th(4194308,4,_b.bind(null,e,t),n)},useLayoutEffect:function(t,e){return th(4194308,4,t,e)},useInsertionEffect:function(t,e){return th(4,2,t,e)},useMemo:function(t,e){var n=ns();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ns();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H2.bind(null,St,t),[r.memoizedState,t]},useRef:function(t){var e=ns();return t={current:t},e.memoizedState=t},useState:xx,useDebugValue:Jw,useDeferredValue:function(t){return ns().memoizedState=t},useTransition:function(){var t=xx(!1),e=t[0];return t=V2.bind(null,t[1]),ns().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=St,s=ns();if(Et){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),gn===null)throw Error(ee(349));zi&30||pb(r,e,n)}s.memoizedState=n;var A={value:n,getSnapshot:e};return s.queue=A,Cx(wb.bind(null,r,A,t),[t]),r.flags|=2048,Pc(9,mb.bind(null,r,A,n,e),void 0,null),n},useId:function(){var t=ns(),e=gn.identifierPrefix;if(Et){var n=Ss,r=Us;n=(r&~(1<<32-$r(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=M2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G2={readContext:Lr,useCallback:Eb,useContext:Lr,useEffect:qw,useImperativeHandle:Ib,useInsertionEffect:xb,useLayoutEffect:Cb,useMemo:bb,useReducer:mp,useRef:Bb,useState:function(){return mp(Nc)},useDebugValue:Jw,useDeferredValue:function(t){var e=Or();return Tb(e,rn.memoizedState,t)},useTransition:function(){var t=mp(Nc)[0],e=Or().memoizedState;return[t,e]},useMutableSource:fb,useSyncExternalStore:gb,useId:Fb,unstable_isNewReconciler:!1},z2={readContext:Lr,useCallback:Eb,useContext:Lr,useEffect:qw,useImperativeHandle:Ib,useInsertionEffect:xb,useLayoutEffect:Cb,useMemo:bb,useReducer:wp,useRef:Bb,useState:function(){return wp(Nc)},useDebugValue:Jw,useDeferredValue:function(t){var e=Or();return rn===null?e.memoizedState=t:Tb(e,rn.memoizedState,t)},useTransition:function(){var t=wp(Nc)[0],e=Or().memoizedState;return[t,e]},useMutableSource:fb,useSyncExternalStore:gb,useId:Fb,unstable_isNewReconciler:!1};function Gr(t,e){if(t&&t.defaultProps){e=Rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pf={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kn(),s=PA(t),A=Ps(r,s);A.payload=e,n!=null&&(A.callback=n),e=RA(t,A,s),e!==null&&(qr(e,t,s,r),Zd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kn(),s=PA(t),A=Ps(r,s);A.tag=1,A.payload=e,n!=null&&(A.callback=n),e=RA(t,A,s),e!==null&&(qr(e,t,s,r),Zd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kn(),r=PA(t),s=Ps(n,r);s.tag=2,e!=null&&(s.callback=e),e=RA(t,s,r),e!==null&&(qr(e,t,r,n),Zd(e,t,r))}};function _x(t,e,n,r,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,A,i):e.prototype&&e.prototype.isPureReactComponent?!Tc(n,r)||!Tc(s,A):!0}function kb(t,e,n){var r=!1,s=KA,A=e.contextType;return typeof A=="object"&&A!==null?A=Lr(A):(s=lr(e)?Ki:Pn.current,r=e.contextTypes,A=(r=r!=null)?pa(t,s):KA),e=new e(n,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function Ix(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pf.enqueueReplaceState(e,e.state,null)}function Km(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Lr(A):(A=lr(e)?Ki:Pn.current,s.context=pa(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(jm(t,e,A,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pf.enqueueReplaceState(s,s.state,null),Dh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ya(t,e){try{var n="",r=e;do n+=yk(r),r=r.return;while(r);var s=n}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function vp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var W2=typeof WeakMap=="function"?WeakMap:Map;function Rb(t,e,n){n=Ps(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hh||(Hh=!0,t0=r),Gm(t,e)},n}function Nb(t,e,n){n=Ps(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Gm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){Gm(t,e),typeof r!="function"&&(NA===null?NA=new Set([this]):NA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Ex(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new W2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=oR.bind(null,t,e,n),e.then(t,t))}function bx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ps(-1,1),e.tag=2,RA(n,e,1))),n.lanes|=1),t)}var $2=qs.ReactCurrentOwner,sr=!1;function Vn(t,e,n,r){e.child=t===null?cb(e,null,n,r):wa(e,t.child,n,r)}function Fx(t,e,n,r,s){n=n.render;var A=e.ref;return ia(e,s),r=Ww(t,e,n,r,A,s),n=$w(),t!==null&&!sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,js(t,e,s)):(Et&&n&&Nw(e),e.flags|=1,Vn(t,e,r,s),e.child)}function Ux(t,e,n,r,s){if(t===null){var A=n.type;return typeof A=="function"&&!sv(A)&&A.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=A,Pb(t,e,A,r,s)):(t=Ah(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(n=n.compare,n=n!==null?n:Tc,n(i,r)&&t.ref===e.ref)return js(t,e,s)}return e.flags|=1,t=DA(A,r),t.ref=e.ref,t.return=e,e.child=t}function Pb(t,e,n,r,s){if(t!==null){var A=t.memoizedProps;if(Tc(A,r)&&t.ref===e.ref)if(sr=!1,e.pendingProps=r=A,(t.lanes&s)!==0)t.flags&131072&&(sr=!0);else return e.lanes=t.lanes,js(t,e,s)}return zm(t,e,n,r,s)}function Db(t,e,n){var r=e.pendingProps,s=r.children,A=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Zo,pr),pr|=n;else{if(!(n&1073741824))return t=A!==null?A.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(Zo,pr),pr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=A!==null?A.baseLanes:n,mt(Zo,pr),pr|=r}else A!==null?(r=A.baseLanes|n,e.memoizedState=null):r=n,mt(Zo,pr),pr|=r;return Vn(t,e,s,n),e.child}function Lb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zm(t,e,n,r,s){var A=lr(n)?Ki:Pn.current;return A=pa(e,A),ia(e,s),n=Ww(t,e,n,r,A,s),r=$w(),t!==null&&!sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,js(t,e,s)):(Et&&r&&Nw(e),e.flags|=1,Vn(t,e,n,s),e.child)}function Sx(t,e,n,r,s){if(lr(n)){var A=!0;Qh(e)}else A=!1;if(ia(e,s),e.stateNode===null)nh(t,e),kb(e,n,r),Km(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Lr(c):(c=lr(n)?Ki:Pn.current,c=pa(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==c)&&Ix(e,i,r,c),gA=!1;var f=e.memoizedState;i.state=f,Dh(e,r,i,s),a=e.memoizedState,o!==r||f!==a||ar.current||gA?(typeof d=="function"&&(jm(e,n,d,r),a=e.memoizedState),(o=gA||_x(e,n,o,r,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,db(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Gr(e.type,o),i.props=c,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Lr(a):(a=lr(n)?Ki:Pn.current,a=pa(e,a));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Ix(e,i,r,a),gA=!1,f=e.memoizedState,i.state=f,Dh(e,r,i,s);var v=e.memoizedState;o!==h||f!==v||ar.current||gA?(typeof m=="function"&&(jm(e,n,m,r),v=e.memoizedState),(c=gA||_x(e,n,c,r,f,v,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,v,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,v,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),i.props=r,i.state=v,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wm(t,e,n,r,A,s)}function Wm(t,e,n,r,s,A){Lb(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&px(e,n,!1),js(t,e,A);r=e.stateNode,$2.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=wa(e,t.child,null,A),e.child=wa(e,null,o,A)):Vn(t,e,o,A),e.memoizedState=r.state,s&&px(e,n,!0),e.child}function Ob(t){var e=t.stateNode;e.pendingContext?gx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gx(t,e.context,!1),jw(t,e.containerInfo)}function Qx(t,e,n,r,s){return ma(),Dw(s),e.flags|=256,Vn(t,e,n,r),e.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mb(t,e,n){var r=e.pendingProps,s=Ut.current,A=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),mt(Ut,s&1),t===null)return Vm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,A?(r=e.mode,A=e.child,i={mode:"hidden",children:i},!(r&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=Of(i,r,0,null),t=Li(t,r,n,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=qm(n),e.memoizedState=$m,t):Xw(e,i));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return q2(t,e,i,r,o,s,n);if(A){A=r.fallback,i=e.mode,s=t.child,o=s.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=DA(s,a),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?A=DA(o,A):(A=Li(A,i,n,null),A.flags|=2),A.return=e,r.return=e,r.sibling=A,e.child=r,r=A,A=e.child,i=t.child.memoizedState,i=i===null?qm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~n,e.memoizedState=$m,r}return A=t.child,t=A.sibling,r=DA(A,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xw(t,e){return e=Of({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hd(t,e,n,r){return r!==null&&Dw(r),wa(e,t.child,null,n),t=Xw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q2(t,e,n,r,s,A,i){if(n)return e.flags&256?(e.flags&=-257,r=vp(Error(ee(422))),hd(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=r.fallback,s=e.mode,r=Of({mode:"visible",children:r.children},s,0,null),A=Li(A,s,i,null),A.flags|=2,r.return=e,A.return=e,r.sibling=A,e.child=r,e.mode&1&&wa(e,t.child,null,i),e.child.memoizedState=qm(i),e.memoizedState=$m,A);if(!(e.mode&1))return hd(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,A=Error(ee(419)),r=vp(A,r,void 0),hd(t,e,i,r)}if(o=(i&t.childLanes)!==0,sr||o){if(r=gn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Hs(t,s),qr(r,t,s,-1))}return rv(),r=vp(Error(ee(421))),hd(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aR.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,vr=kA(s.nextSibling),Br=e,Et=!0,Wr=null,t!==null&&(Fr[Ur++]=Us,Fr[Ur++]=Ss,Fr[Ur++]=Gi,Us=t.id,Ss=t.overflow,Gi=e),e=Xw(e,r.children),e.flags|=4096,e)}function kx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hm(t.return,e,n)}function yp(t,e,n,r,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=r,A.tail=n,A.tailMode=s)}function Vb(t,e,n){var r=e.pendingProps,s=r.revealOrder,A=r.tail;if(Vn(t,e,r.children,n),r=Ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kx(t,n,e);else if(t.tag===19)kx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mt(Ut,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yp(e,!1,s,n,A);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yp(e,!0,n,null,A);break;case"together":yp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function js(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=DA(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=DA(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J2(t,e,n){switch(e.tag){case 3:Ob(e),ma();break;case 5:hb(e);break;case 1:lr(e.type)&&Qh(e);break;case 4:jw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;mt(Nh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mt(Ut,Ut.current&1),e.flags|=128,null):n&e.child.childLanes?Mb(t,e,n):(mt(Ut,Ut.current&1),t=js(t,e,n),t!==null?t.sibling:null);mt(Ut,Ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(Ut,Ut.current),r)break;return null;case 22:case 23:return e.lanes=0,Db(t,e,n)}return js(t,e,n)}var Hb,Jm,jb,Kb;Hb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jm=function(){};jb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qi(fs.current);var A=null;switch(n){case"input":s=wm(t,s),r=wm(t,r),A=[];break;case"select":s=Rt({},s,{value:void 0}),r=Rt({},r,{value:void 0}),A=[];break;case"textarea":s=Bm(t,s),r=Bm(t,r),A=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uh)}Cm(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in r){var a=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(A||(A=[]),A.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(A=A||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(A=A||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&yt("scroll",t),A||o===a||(A=[])):(A=A||[]).push(c,a))}n&&(A=A||[]).push("style",n);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};Kb=function(t,e,n,r){n!==r&&(e.flags|=4)};function yl(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X2(t,e,n){var r=e.pendingProps;switch(Pw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return lr(e.type)&&Sh(),Un(e),null;case 3:return r=e.stateNode,va(),xt(ar),xt(Pn),Gw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ud(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(s0(Wr),Wr=null))),Jm(t,e),Un(e),null;case 5:Kw(e);var s=Qi(kc.current);if(n=e.type,t!==null&&e.stateNode!=null)jb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Un(e),null}if(t=Qi(fs.current),ud(e)){r=e.stateNode,n=e.type;var A=e.memoizedProps;switch(r[rs]=e,r[Sc]=A,t=(e.mode&1)!==0,n){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(s=0;s<Dl.length;s++)yt(Dl[s],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":HB(r,A),yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!A.multiple},yt("invalid",r);break;case"textarea":KB(r,A),yt("invalid",r)}Cm(n,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var o=A[i];i==="children"?typeof o=="string"?r.textContent!==o&&(A.suppressHydrationWarning!==!0&&cd(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(A.suppressHydrationWarning!==!0&&cd(r.textContent,o,t),s=["children",""+o]):Bc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&yt("scroll",r)}switch(n){case"input":nd(r),jB(r,A,!0);break;case"textarea":nd(r),GB(r);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(r.onclick=Uh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[rs]=e,t[Sc]=r,Hb(t,e,!1,!1),e.stateNode=t;e:{switch(i=_m(n,r),n){case"dialog":yt("cancel",t),yt("close",t),s=r;break;case"iframe":case"object":case"embed":yt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Dl.length;s++)yt(Dl[s],t);s=r;break;case"source":yt("error",t),s=r;break;case"img":case"image":case"link":yt("error",t),yt("load",t),s=r;break;case"details":yt("toggle",t),s=r;break;case"input":HB(t,r),s=wm(t,r),yt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Rt({},r,{value:void 0}),yt("invalid",t);break;case"textarea":KB(t,r),s=Bm(t,r),yt("invalid",t);break;default:s=r}Cm(n,s),o=s;for(A in o)if(o.hasOwnProperty(A)){var a=o[A];A==="style"?BE(t,a):A==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&vE(t,a)):A==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&xc(t,a):typeof a=="number"&&xc(t,""+a):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(Bc.hasOwnProperty(A)?a!=null&&A==="onScroll"&&yt("scroll",t):a!=null&&Bw(t,A,a,i))}switch(n){case"input":nd(t),jB(t,r,!1);break;case"textarea":nd(t),GB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jA(r.value));break;case"select":t.multiple=!!r.multiple,A=r.value,A!=null?na(t,!!r.multiple,A,!1):r.defaultValue!=null&&na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)Kb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Qi(kc.current),Qi(fs.current),ud(e)){if(r=e.stateNode,n=e.memoizedProps,r[rs]=e,(A=r.nodeValue!==n)&&(t=Br,t!==null))switch(t.tag){case 3:cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cd(r.nodeValue,n,(t.mode&1)!==0)}A&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rs]=e,e.stateNode=r}return Un(e),null;case 13:if(xt(Ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&vr!==null&&e.mode&1&&!(e.flags&128))ab(),ma(),e.flags|=98560,A=!1;else if(A=ud(e),r!==null&&r.dehydrated!==null){if(t===null){if(!A)throw Error(ee(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(ee(317));A[rs]=e}else ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),A=!1}else Wr!==null&&(s0(Wr),Wr=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?An===0&&(An=3):rv())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return va(),Jm(t,e),t===null&&Fc(e.stateNode.containerInfo),Un(e),null;case 10:return Mw(e.type._context),Un(e),null;case 17:return lr(e.type)&&Sh(),Un(e),null;case 19:if(xt(Ut),A=e.memoizedState,A===null)return Un(e),null;if(r=(e.flags&128)!==0,i=A.rendering,i===null)if(r)yl(A,!1);else{if(An!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Lh(t),i!==null){for(e.flags|=128,yl(A,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)A=n,t=r,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(Ut,Ut.current&1|2),e.child}t=t.sibling}A.tail!==null&&zt()>Ba&&(e.flags|=128,r=!0,yl(A,!1),e.lanes=4194304)}else{if(!r)if(t=Lh(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!Et)return Un(e),null}else 2*zt()-A.renderingStartTime>Ba&&n!==1073741824&&(e.flags|=128,r=!0,yl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(n=A.last,n!==null?n.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=zt(),e.sibling=null,n=Ut.current,mt(Ut,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return nv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pr&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function Y2(t,e){switch(Pw(e),e.tag){case 1:return lr(e.type)&&Sh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return va(),xt(ar),xt(Pn),Gw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kw(e),null;case 13:if(xt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Ut),null;case 4:return va(),null;case 10:return Mw(e.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var fd=!1,Nn=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Yo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dt(t,e,r)}else n.current=null}function Xm(t,e,n){try{n()}catch(r){Dt(t,e,r)}}var Rx=!1;function eR(t,e){if(Rm=bh,t=qE(),Rw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,A=r.focusNode;r=r.focusOffset;try{n.nodeType,A.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(o=i+s),h!==A||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(o=i),f===A&&++d===r&&(a=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nm={focusedElem:t,selectionRange:n},bh=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,T=v.memoizedState,C=e.stateNode,w=C.getSnapshotBeforeUpdate(e.elementType===e.type?y:Gr(e.type,y),T);C.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(S){Dt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return v=Rx,Rx=!1,v}function sc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&Xm(e,n,A)}s=s.next}while(s!==r)}}function Df(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gb(t){var e=t.alternate;e!==null&&(t.alternate=null,Gb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rs],delete e[Sc],delete e[Lm],delete e[P2],delete e[D2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zb(t){return t.tag===5||t.tag===3||t.tag===4}function Nx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uh));else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}function e0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(e0(t,e,n),t=t.sibling;t!==null;)e0(t,e,n),t=t.sibling}var wn=null,zr=!1;function oA(t,e,n){for(n=n.child;n!==null;)Wb(t,e,n),n=n.sibling}function Wb(t,e,n){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(Ff,n)}catch{}switch(n.tag){case 5:Nn||Yo(n,e);case 6:var r=wn,s=zr;wn=null,oA(t,e,n),wn=r,zr=s,wn!==null&&(zr?(t=wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(zr?(t=wn,n=n.stateNode,t.nodeType===8?hp(t.parentNode,n):t.nodeType===1&&hp(t,n),Ec(t)):hp(wn,n.stateNode));break;case 4:r=wn,s=zr,wn=n.stateNode.containerInfo,zr=!0,oA(t,e,n),wn=r,zr=s;break;case 0:case 11:case 14:case 15:if(!Nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&Xm(n,e,i),s=s.next}while(s!==r)}oA(t,e,n);break;case 1:if(!Nn&&(Yo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Dt(n,e,o)}oA(t,e,n);break;case 21:oA(t,e,n);break;case 22:n.mode&1?(Nn=(r=Nn)||n.memoizedState!==null,oA(t,e,n),Nn=r):oA(t,e,n);break;default:oA(t,e,n)}}function Px(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z2),e.forEach(function(r){var s=lR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var A=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:wn=o.stateNode,zr=!1;break e;case 3:wn=o.stateNode.containerInfo,zr=!0;break e;case 4:wn=o.stateNode.containerInfo,zr=!0;break e}o=o.return}if(wn===null)throw Error(ee(160));Wb(A,i,s),wn=null,zr=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Dt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$b(e,t),e=e.sibling}function $b(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jr(e,t),es(t),r&4){try{sc(3,t,t.return),Df(3,t)}catch(y){Dt(t,t.return,y)}try{sc(5,t,t.return)}catch(y){Dt(t,t.return,y)}}break;case 1:jr(e,t),es(t),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(jr(e,t),es(t),r&512&&n!==null&&Yo(n,n.return),t.flags&32){var s=t.stateNode;try{xc(s,"")}catch(y){Dt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=n!==null?n.memoizedProps:A,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&A.type==="radio"&&A.name!=null&&pE(s,A),_m(o,i);var c=_m(o,A);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?BE(s,h):d==="dangerouslySetInnerHTML"?vE(s,h):d==="children"?xc(s,h):Bw(s,d,h,c)}switch(o){case"input":vm(s,A);break;case"textarea":mE(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var m=A.value;m!=null?na(s,!!A.multiple,m,!1):f!==!!A.multiple&&(A.defaultValue!=null?na(s,!!A.multiple,A.defaultValue,!0):na(s,!!A.multiple,A.multiple?[]:"",!1))}s[Sc]=A}catch(y){Dt(t,t.return,y)}}break;case 6:if(jr(e,t),es(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(y){Dt(t,t.return,y)}}break;case 3:if(jr(e,t),es(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ec(e.containerInfo)}catch(y){Dt(t,t.return,y)}break;case 4:jr(e,t),es(t);break;case 13:jr(e,t),es(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(ev=zt())),r&4&&Px(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Nn=(c=Nn)||d,jr(e,t),Nn=c):jr(e,t),es(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(xe=t,d=t.child;d!==null;){for(h=xe=d;xe!==null;){switch(f=xe,m=f.child,f.tag){case 0:case 11:case 14:case 15:sc(4,f,f.return);break;case 1:Yo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Dt(r,n,y)}}break;case 5:Yo(f,f.return);break;case 22:if(f.memoizedState!==null){Lx(h);continue}}m!==null?(m.return=f,xe=m):Lx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=yE("display",i))}catch(y){Dt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Dt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jr(e,t),es(t),r&4&&Px(t);break;case 21:break;default:jr(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zb(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xc(s,""),r.flags&=-33);var A=Nx(t);e0(t,A,s);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Nx(t);Zm(t,o,i);break;default:throw Error(ee(161))}}catch(a){Dt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tR(t,e,n){xe=t,qb(t)}function qb(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var s=xe,A=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||fd;if(!i){var o=s.alternate,a=o!==null&&o.memoizedState!==null||Nn;o=fd;var c=Nn;if(fd=i,(Nn=a)&&!c)for(xe=s;xe!==null;)i=xe,a=i.child,i.tag===22&&i.memoizedState!==null?Ox(s):a!==null?(a.return=i,xe=a):Ox(s);for(;A!==null;)xe=A,qb(A),A=A.sibling;xe=s,fd=o,Nn=c}Dx(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,xe=A):Dx(t)}}function Dx(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nn||Df(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&Bx(e,A,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bx(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ec(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Nn||e.flags&512&&Ym(e)}catch(f){Dt(e,e.return,f)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Lx(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Ox(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Df(4,e)}catch(a){Dt(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){Dt(e,s,a)}}var A=e.return;try{Ym(e)}catch(a){Dt(e,A,a)}break;case 5:var i=e.return;try{Ym(e)}catch(a){Dt(e,i,a)}}}catch(a){Dt(e,e.return,a)}if(e===t){xe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,xe=o;break}xe=e.return}}var nR=Math.ceil,Vh=qs.ReactCurrentDispatcher,Yw=qs.ReactCurrentOwner,Pr=qs.ReactCurrentBatchConfig,rt=0,gn=null,en=null,Cn=0,pr=0,Zo=si(0),An=0,Dc=null,Wi=0,Lf=0,Zw=0,Ac=null,rr=null,ev=0,Ba=1/0,Ts=null,Hh=!1,t0=null,NA=null,gd=!1,xA=null,jh=0,ic=0,n0=null,rh=-1,sh=0;function Kn(){return rt&6?zt():rh!==-1?rh:rh=zt()}function PA(t){return t.mode&1?rt&2&&Cn!==0?Cn&-Cn:O2.transition!==null?(sh===0&&(sh=kE()),sh):(t=dt,t!==0||(t=window.event,t=t===void 0?16:ME(t.type)),t):1}function qr(t,e,n,r){if(50<ic)throw ic=0,n0=null,Error(ee(185));hu(t,n,r),(!(rt&2)||t!==gn)&&(t===gn&&(!(rt&2)&&(Lf|=n),An===4&&wA(t,Cn)),cr(t,r),n===1&&rt===0&&!(e.mode&1)&&(Ba=zt()+500,Rf&&Ai()))}function cr(t,e){var n=t.callbackNode;Ok(t,e);var r=Eh(t,t===gn?Cn:0);if(r===0)n!==null&&$B(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$B(n),e===1)t.tag===0?L2(Mx.bind(null,t)):Ab(Mx.bind(null,t)),R2(function(){!(rt&6)&&Ai()}),n=null;else{switch(RE(r)){case 1:n=Ew;break;case 4:n=SE;break;case 16:n=Ih;break;case 536870912:n=QE;break;default:n=Ih}n=rT(n,Jb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jb(t,e){if(rh=-1,sh=0,rt&6)throw Error(ee(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var r=Eh(t,t===gn?Cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kh(t,r);else{e=r;var s=rt;rt|=2;var A=Yb();(gn!==t||Cn!==e)&&(Ts=null,Ba=zt()+500,Di(t,e));do try{AR();break}catch(o){Xb(t,o)}while(!0);Ow(),Vh.current=A,rt=s,en!==null?e=0:(gn=null,Cn=0,e=An)}if(e!==0){if(e===2&&(s=Fm(t),s!==0&&(r=s,e=r0(t,s))),e===1)throw n=Dc,Di(t,0),wA(t,r),cr(t,zt()),n;if(e===6)wA(t,r);else{if(s=t.current.alternate,!(r&30)&&!rR(s)&&(e=Kh(t,r),e===2&&(A=Fm(t),A!==0&&(r=A,e=r0(t,A))),e===1))throw n=Dc,Di(t,0),wA(t,r),cr(t,zt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:yi(t,rr,Ts);break;case 3:if(wA(t,r),(r&130023424)===r&&(e=ev+500-zt(),10<e)){if(Eh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dm(yi.bind(null,t,rr,Ts),e);break}yi(t,rr,Ts);break;case 4:if(wA(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-$r(r);A=1<<i,i=e[i],i>s&&(s=i),r&=~A}if(r=s,r=zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nR(r/1960))-r,10<r){t.timeoutHandle=Dm(yi.bind(null,t,rr,Ts),r);break}yi(t,rr,Ts);break;case 5:yi(t,rr,Ts);break;default:throw Error(ee(329))}}}return cr(t,zt()),t.callbackNode===n?Jb.bind(null,t):null}function r0(t,e){var n=Ac;return t.current.memoizedState.isDehydrated&&(Di(t,e).flags|=256),t=Kh(t,e),t!==2&&(e=rr,rr=n,e!==null&&s0(e)),t}function s0(t){rr===null?rr=t:rr.push.apply(rr,t)}function rR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],A=s.getSnapshot;s=s.value;try{if(!Xr(A(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wA(t,e){for(e&=~Zw,e&=~Lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$r(e),r=1<<n;t[n]=-1,e&=~r}}function Mx(t){if(rt&6)throw Error(ee(327));oa();var e=Eh(t,0);if(!(e&1))return cr(t,zt()),null;var n=Kh(t,e);if(t.tag!==0&&n===2){var r=Fm(t);r!==0&&(e=r,n=r0(t,r))}if(n===1)throw n=Dc,Di(t,0),wA(t,e),cr(t,zt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yi(t,rr,Ts),cr(t,zt()),null}function tv(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(Ba=zt()+500,Rf&&Ai())}}function $i(t){xA!==null&&xA.tag===0&&!(rt&6)&&oa();var e=rt;rt|=1;var n=Pr.transition,r=dt;try{if(Pr.transition=null,dt=1,t)return t()}finally{dt=r,Pr.transition=n,rt=e,!(rt&6)&&Ai()}}function nv(){pr=Zo.current,xt(Zo)}function Di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,k2(n)),en!==null)for(n=en.return;n!==null;){var r=n;switch(Pw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sh();break;case 3:va(),xt(ar),xt(Pn),Gw();break;case 5:Kw(r);break;case 4:va();break;case 13:xt(Ut);break;case 19:xt(Ut);break;case 10:Mw(r.type._context);break;case 22:case 23:nv()}n=n.return}if(gn=t,en=t=DA(t.current,null),Cn=pr=e,An=0,Dc=null,Zw=Lf=Wi=0,rr=Ac=null,Si!==null){for(e=0;e<Si.length;e++)if(n=Si[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,A=n.pending;if(A!==null){var i=A.next;A.next=s,r.next=i}n.pending=r}Si=null}return t}function Xb(t,e){do{var n=en;try{if(Ow(),eh.current=Mh,Oh){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oh=!1}if(zi=0,hn=rn=St=null,rc=!1,Rc=0,Yw.current=null,n===null||n.return===null){An=1,Dc=e,en=null;break}e:{var A=t,i=n.return,o=n,a=e;if(e=Cn,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=bx(i);if(m!==null){m.flags&=-257,Tx(m,i,o,A,e),m.mode&1&&Ex(A,c,e),e=m,a=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(a),e.updateQueue=y}else v.add(a);break e}else{if(!(e&1)){Ex(A,c,e),rv();break e}a=Error(ee(426))}}else if(Et&&o.mode&1){var T=bx(i);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Tx(T,i,o,A,e),Dw(ya(a,o));break e}}A=a=ya(a,o),An!==4&&(An=2),Ac===null?Ac=[A]:Ac.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var C=Rb(A,a,e);yx(A,C);break e;case 1:o=a;var w=A.type,_=A.stateNode;if(!(A.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(NA===null||!NA.has(_)))){A.flags|=65536,e&=-e,A.lanes|=e;var S=Nb(A,o,e);yx(A,S);break e}}A=A.return}while(A!==null)}eT(n)}catch(U){e=U,en===n&&n!==null&&(en=n=n.return);continue}break}while(!0)}function Yb(){var t=Vh.current;return Vh.current=Mh,t===null?Mh:t}function rv(){(An===0||An===3||An===2)&&(An=4),gn===null||!(Wi&268435455)&&!(Lf&268435455)||wA(gn,Cn)}function Kh(t,e){var n=rt;rt|=2;var r=Yb();(gn!==t||Cn!==e)&&(Ts=null,Di(t,e));do try{sR();break}catch(s){Xb(t,s)}while(!0);if(Ow(),rt=n,Vh.current=r,en!==null)throw Error(ee(261));return gn=null,Cn=0,An}function sR(){for(;en!==null;)Zb(en)}function AR(){for(;en!==null&&!Uk();)Zb(en)}function Zb(t){var e=nT(t.alternate,t,pr);t.memoizedProps=t.pendingProps,e===null?eT(t):en=e,Yw.current=null}function eT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y2(n,e),n!==null){n.flags&=32767,en=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{An=6,en=null;return}}else if(n=X2(n,e,pr),n!==null){en=n;return}if(e=e.sibling,e!==null){en=e;return}en=e=t}while(e!==null);An===0&&(An=5)}function yi(t,e,n){var r=dt,s=Pr.transition;try{Pr.transition=null,dt=1,iR(t,e,n,r)}finally{Pr.transition=s,dt=r}return null}function iR(t,e,n,r){do oa();while(xA!==null);if(rt&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var A=n.lanes|n.childLanes;if(Mk(t,A),t===gn&&(en=gn=null,Cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gd||(gd=!0,rT(Ih,function(){return oa(),null})),A=(n.flags&15990)!==0,n.subtreeFlags&15990||A){A=Pr.transition,Pr.transition=null;var i=dt;dt=1;var o=rt;rt|=4,Yw.current=null,eR(t,n),$b(n,t),E2(Nm),bh=!!Rm,Nm=Rm=null,t.current=n,tR(n),Sk(),rt=o,dt=i,Pr.transition=A}else t.current=n;if(gd&&(gd=!1,xA=t,jh=s),A=t.pendingLanes,A===0&&(NA=null),Rk(n.stateNode),cr(t,zt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hh)throw Hh=!1,t=t0,t0=null,t;return jh&1&&t.tag!==0&&oa(),A=t.pendingLanes,A&1?t===n0?ic++:(ic=0,n0=t):ic=0,Ai(),null}function oa(){if(xA!==null){var t=RE(jh),e=Pr.transition,n=dt;try{if(Pr.transition=null,dt=16>t?16:t,xA===null)var r=!1;else{if(t=xA,xA=null,jh=0,rt&6)throw Error(ee(331));var s=rt;for(rt|=4,xe=t.current;xe!==null;){var A=xe,i=A.child;if(xe.flags&16){var o=A.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(xe=c;xe!==null;){var d=xe;switch(d.tag){case 0:case 11:case 15:sc(8,d,A)}var h=d.child;if(h!==null)h.return=d,xe=h;else for(;xe!==null;){d=xe;var f=d.sibling,m=d.return;if(Gb(d),d===c){xe=null;break}if(f!==null){f.return=m,xe=f;break}xe=m}}}var v=A.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}xe=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,xe=i;else e:for(;xe!==null;){if(A=xe,A.flags&2048)switch(A.tag){case 0:case 11:case 15:sc(9,A,A.return)}var C=A.sibling;if(C!==null){C.return=A.return,xe=C;break e}xe=A.return}}var w=t.current;for(xe=w;xe!==null;){i=xe;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,xe=_;else e:for(i=w;xe!==null;){if(o=xe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Df(9,o)}}catch(U){Dt(o,o.return,U)}if(o===i){xe=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,xe=S;break e}xe=o.return}}if(rt=s,Ai(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(Ff,t)}catch{}r=!0}return r}finally{dt=n,Pr.transition=e}}return!1}function Vx(t,e,n){e=ya(n,e),e=Rb(t,e,1),t=RA(t,e,1),e=Kn(),t!==null&&(hu(t,1,e),cr(t,e))}function Dt(t,e,n){if(t.tag===3)Vx(t,t,n);else for(;e!==null;){if(e.tag===3){Vx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(NA===null||!NA.has(r))){t=ya(n,t),t=Nb(e,t,1),e=RA(e,t,1),t=Kn(),e!==null&&(hu(e,1,t),cr(e,t));break}}e=e.return}}function oR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kn(),t.pingedLanes|=t.suspendedLanes&n,gn===t&&(Cn&n)===n&&(An===4||An===3&&(Cn&130023424)===Cn&&500>zt()-ev?Di(t,0):Zw|=n),cr(t,e)}function tT(t,e){e===0&&(t.mode&1?(e=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):e=1);var n=Kn();t=Hs(t,e),t!==null&&(hu(t,e,n),cr(t,n))}function aR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tT(t,n)}function lR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),tT(t,n)}var nT;nT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ar.current)sr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sr=!1,J2(t,e,n);sr=!!(t.flags&131072)}else sr=!1,Et&&e.flags&1048576&&ib(e,Rh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nh(t,e),t=e.pendingProps;var s=pa(e,Pn.current);ia(e,n),s=Ww(null,e,r,t,s,n);var A=$w();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(r)?(A=!0,Qh(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hw(e),s.updater=Pf,e.stateNode=s,s._reactInternals=e,Km(e,r,t,n),e=Wm(null,e,r,!0,A,n)):(e.tag=0,Et&&A&&Nw(e),Vn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uR(r),t=Gr(r,t),s){case 0:e=zm(null,e,r,t,n);break e;case 1:e=Sx(null,e,r,t,n);break e;case 11:e=Fx(null,e,r,t,n);break e;case 14:e=Ux(null,e,r,Gr(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),zm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),Sx(t,e,r,s,n);case 3:e:{if(Ob(e),t===null)throw Error(ee(387));r=e.pendingProps,A=e.memoizedState,s=A.element,db(t,e),Dh(e,r,null,n);var i=e.memoizedState;if(r=i.element,A.isDehydrated)if(A={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=ya(Error(ee(423)),e),e=Qx(t,e,r,n,s);break e}else if(r!==s){s=ya(Error(ee(424)),e),e=Qx(t,e,r,n,s);break e}else for(vr=kA(e.stateNode.containerInfo.firstChild),Br=e,Et=!0,Wr=null,n=cb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ma(),r===s){e=js(t,e,n);break e}Vn(t,e,r,n)}e=e.child}return e;case 5:return hb(e),t===null&&Vm(e),r=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,Pm(r,s)?i=null:A!==null&&Pm(r,A)&&(e.flags|=32),Lb(t,e),Vn(t,e,i,n),e.child;case 6:return t===null&&Vm(e),null;case 13:return Mb(t,e,n);case 4:return jw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wa(e,null,r,n):Vn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),Fx(t,e,r,s,n);case 7:return Vn(t,e,e.pendingProps,n),e.child;case 8:return Vn(t,e,e.pendingProps.children,n),e.child;case 12:return Vn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,mt(Nh,r._currentValue),r._currentValue=i,A!==null)if(Xr(A.value,i)){if(A.children===s.children&&!ar.current){e=js(t,e,n);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var o=A.dependencies;if(o!==null){i=A.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(A.tag===1){a=Ps(-1,n&-n),a.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}A.lanes|=n,a=A.alternate,a!==null&&(a.lanes|=n),Hm(A.return,n,e),o.lanes|=n;break}a=a.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(ee(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Hm(i,n,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}Vn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ia(e,n),s=Lr(s),r=r(s),e.flags|=1,Vn(t,e,r,n),e.child;case 14:return r=e.type,s=Gr(r,e.pendingProps),s=Gr(r.type,s),Ux(t,e,r,s,n);case 15:return Pb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),nh(t,e),e.tag=1,lr(r)?(t=!0,Qh(e)):t=!1,ia(e,n),kb(e,r,s),Km(e,r,s,n),Wm(null,e,r,!0,t,n);case 19:return Vb(t,e,n);case 22:return Db(t,e,n)}throw Error(ee(156,e.tag))};function rT(t,e){return UE(t,e)}function cR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(t,e,n,r){return new cR(t,e,n,r)}function sv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uR(t){if(typeof t=="function")return sv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cw)return 11;if(t===_w)return 14}return 2}function DA(t,e){var n=t.alternate;return n===null?(n=Qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ah(t,e,n,r,s,A){var i=2;if(r=t,typeof t=="function")sv(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case jo:return Li(n.children,s,A,e);case xw:i=8,s|=8;break;case fm:return t=Qr(12,n,e,s|2),t.elementType=fm,t.lanes=A,t;case gm:return t=Qr(13,n,e,s),t.elementType=gm,t.lanes=A,t;case pm:return t=Qr(19,n,e,s),t.elementType=pm,t.lanes=A,t;case hE:return Of(n,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uE:i=10;break e;case dE:i=9;break e;case Cw:i=11;break e;case _w:i=14;break e;case fA:i=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Qr(i,n,e,s),e.elementType=t,e.type=r,e.lanes=A,e}function Li(t,e,n,r){return t=Qr(7,t,r,e),t.lanes=n,t}function Of(t,e,n,r){return t=Qr(22,t,r,e),t.elementType=hE,t.lanes=n,t.stateNode={isHidden:!1},t}function Bp(t,e,n){return t=Qr(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=Qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=np(0),this.expirationTimes=np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=np(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Av(t,e,n,r,s,A,i,o,a){return t=new dR(t,e,n,o,a),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Qr(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hw(A),t}function hR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sT(t){if(!t)return KA;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(lr(n))return sb(t,n,e)}return e}function AT(t,e,n,r,s,A,i,o,a){return t=Av(n,r,!0,t,s,A,i,o,a),t.context=sT(null),n=t.current,r=Kn(),s=PA(n),A=Ps(r,s),A.callback=e??null,RA(n,A,s),t.current.lanes=s,hu(t,s,r),cr(t,r),t}function Mf(t,e,n,r){var s=e.current,A=Kn(),i=PA(s);return n=sT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ps(A,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=RA(s,e,i),t!==null&&(qr(t,s,i,A),Zd(t,s,i)),i}function Gh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function iv(t,e){Hx(t,e),(t=t.alternate)&&Hx(t,e)}function fR(){return null}var iT=typeof reportError=="function"?reportError:function(t){console.error(t)};function ov(t){this._internalRoot=t}Vf.prototype.render=ov.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Mf(t,e,null,null)};Vf.prototype.unmount=ov.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$i(function(){Mf(null,t,null,null)}),e[Vs]=null}};function Vf(t){this._internalRoot=t}Vf.prototype.unstable_scheduleHydration=function(t){if(t){var e=DE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mA.length&&e!==0&&e<mA[n].priority;n++);mA.splice(n,0,t),n===0&&OE(t)}};function av(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jx(){}function gR(t,e,n,r,s){if(s){if(typeof r=="function"){var A=r;r=function(){var c=Gh(i);A.call(c)}}var i=AT(e,r,t,0,null,!1,!1,"",jx);return t._reactRootContainer=i,t[Vs]=i.current,Fc(t.nodeType===8?t.parentNode:t),$i(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=Gh(a);o.call(c)}}var a=Av(t,0,!1,null,null,!1,!1,"",jx);return t._reactRootContainer=a,t[Vs]=a.current,Fc(t.nodeType===8?t.parentNode:t),$i(function(){Mf(e,a,n,r)}),a}function jf(t,e,n,r,s){var A=n._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var o=s;s=function(){var a=Gh(i);o.call(a)}}Mf(e,i,t,s)}else i=gR(n,e,t,s,r);return Gh(i)}NE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pl(e.pendingLanes);n!==0&&(bw(e,n|1),cr(e,zt()),!(rt&6)&&(Ba=zt()+500,Ai()))}break;case 13:$i(function(){var r=Hs(t,1);if(r!==null){var s=Kn();qr(r,t,1,s)}}),iv(t,1)}};Tw=function(t){if(t.tag===13){var e=Hs(t,134217728);if(e!==null){var n=Kn();qr(e,t,134217728,n)}iv(t,134217728)}};PE=function(t){if(t.tag===13){var e=PA(t),n=Hs(t,e);if(n!==null){var r=Kn();qr(n,t,e,r)}iv(t,e)}};DE=function(){return dt};LE=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};Em=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=kf(r);if(!s)throw Error(ee(90));gE(r),vm(r,s)}}}break;case"textarea":mE(t,n);break;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}};_E=tv;IE=$i;var pR={usingClientEntryPoint:!1,Events:[gu,Wo,kf,xE,CE,tv]},Bl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mR={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TE(t),t===null?null:t.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||fR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{Ff=pd.inject(mR),hs=pd}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pR;_r.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!av(e))throw Error(ee(200));return hR(t,e,null,n)};_r.createRoot=function(t,e){if(!av(t))throw Error(ee(299));var n=!1,r="",s=iT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Av(t,1,!1,null,null,n,!1,r,s),t[Vs]=e.current,Fc(t.nodeType===8?t.parentNode:t),new ov(e)};_r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=TE(e),t=t===null?null:t.stateNode,t};_r.flushSync=function(t){return $i(t)};_r.hydrate=function(t,e,n){if(!Hf(e))throw Error(ee(200));return jf(null,t,e,!0,n)};_r.hydrateRoot=function(t,e,n){if(!av(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,A="",i=iT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(A=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=AT(e,null,t,1,n??null,s,!1,A,i),t[Vs]=e.current,Fc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vf(e)};_r.render=function(t,e,n){if(!Hf(e))throw Error(ee(200));return jf(null,t,e,!1,n)};_r.unmountComponentAtNode=function(t){if(!Hf(t))throw Error(ee(40));return t._reactRootContainer?($i(function(){jf(null,null,t,!1,function(){t._reactRootContainer=null,t[Vs]=null})}),!0):!1};_r.unstable_batchedUpdates=tv;_r.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return jf(t,e,n,!1,r)};_r.version="18.3.1-next-f1338f8080-20240426";function oT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oT)}catch(t){console.error(t)}}oT(),oE.exports=_r;var wR=oE.exports,Kx=wR;dm.createRoot=Kx.createRoot,dm.hydrateRoot=Kx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lc(){return Lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lc.apply(this,arguments)}var CA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(CA||(CA={}));const Gx="popstate";function vR(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:o="",hash:a=""}=co(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),A0("",{pathname:i,search:o,hash:a},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function n(s,A){let i=s.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=s.location.href,c=a.indexOf("#");o=c===-1?a:a.slice(0,c)}return o+"#"+(typeof A=="string"?A:zh(A))}function r(s,A){Kf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return BR(e,n,r,t)}function Qt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yR(){return Math.random().toString(36).substr(2,8)}function zx(t,e){return{usr:t.state,key:t.key,idx:e}}function A0(t,e,n,r){return n===void 0&&(n=null),Lc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:n,key:e&&e.key||r||yR()})}function zh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:A=!1}=r,i=s.history,o=CA.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Lc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=CA.Pop;let T=d(),C=T==null?null:T-c;c=T,a&&a({action:o,location:y.location,delta:C})}function f(T,C){o=CA.Push;let w=A0(y.location,T,C);n&&n(w,T),c=d()+1;let _=zx(w,c),S=y.createHref(w);try{i.pushState(_,"",S)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(S)}A&&a&&a({action:o,location:y.location,delta:1})}function m(T,C){o=CA.Replace;let w=A0(y.location,T,C);n&&n(w,T),c=d();let _=zx(w,c),S=y.createHref(w);i.replaceState(_,"",S),A&&a&&a({action:o,location:y.location,delta:0})}function v(T){let C=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof T=="string"?T:zh(T);return w=w.replace(/ $/,"%20"),Qt(C,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,C)}let y={get action(){return o},get location(){return t(s,i)},listen(T){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Gx,h),a=T,()=>{s.removeEventListener(Gx,h),a=null}},createHref(T){return e(s,T)},createURL:v,encodeLocation(T){let C=v(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:m,go(T){return i.go(T)}};return y}var Wx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wx||(Wx={}));function xR(t,e,n){return n===void 0&&(n="/"),CR(t,e,n)}function CR(t,e,n,r){let s=typeof e=="string"?co(e):e,A=xa(s.pathname||"/",n);if(A==null)return null;let i=aT(t);_R(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let c=NR(A);o=kR(i[a],c)}return o}function aT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(A,i,o)=>{let a={relativePath:o===void 0?A.path||"":o,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};a.relativePath.startsWith("/")&&(Qt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=LA([r,a.relativePath]),d=n.concat(a);A.children&&A.children.length>0&&(Qt(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),aT(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:SR(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var o;if(A.path===""||!((o=A.path)!=null&&o.includes("?")))s(A,i);else for(let a of lT(A.path))s(A,i,a)}),e}function lT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),A=n.replace(/\?$/,"");if(r.length===0)return s?[A,""]:[A];let i=lT(r.join("/")),o=[];return o.push(...i.map(a=>a===""?A:[A,a].join("/"))),s&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function _R(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IR=/^:[\w-]+$/,ER=3,bR=2,TR=1,FR=10,UR=-2,$x=t=>t==="*";function SR(t,e){let n=t.split("/"),r=n.length;return n.some($x)&&(r+=UR),e&&(r+=bR),n.filter(s=>!$x(s)).reduce((s,A)=>s+(IR.test(A)?ER:A===""?TR:FR),r)}function QR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function kR(t,e,n){let{routesMeta:r}=t,s={},A="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=i0({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:LA([A,h.pathname]),pathnameBase:MR(LA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=LA([A,h.pathnameBase]))}return i}function i0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let y=o[h]||"";i=A.slice(0,A.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[h];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function RR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Kf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function NR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const PR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DR=t=>PR.test(t);function LR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?co(t):t,A;if(n)if(DR(n))A=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Kf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?A=qx(n.substring(1),"/"):A=qx(n,e)}else A=e;return{pathname:A,search:VR(r),hash:HR(s)}}function qx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lv(t,e){let n=OR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=co(t):(s=Lc({},t),Qt(!s.pathname||!s.pathname.includes("?"),Cp("?","pathname","search",s)),Qt(!s.pathname||!s.pathname.includes("#"),Cp("#","pathname","hash",s)),Qt(!s.search||!s.search.includes("#"),Cp("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=LR(s,o),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const LA=t=>t.join("/").replace(/\/\/+/g,"/"),MR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cT=["post","put","patch","delete"];new Set(cT);const KR=["get",...cT];new Set(KR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oc(){return Oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oc.apply(this,arguments)}const Gf=k.createContext(null),uT=k.createContext(null),Js=k.createContext(null),zf=k.createContext(null),Xs=k.createContext({outlet:null,matches:[],isDataRoute:!1}),dT=k.createContext(null);function GR(t,e){let{relative:n}=e===void 0?{}:e;Ka()||Qt(!1);let{basename:r,navigator:s}=k.useContext(Js),{hash:A,pathname:i,search:o}=Wf(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:LA([r,i])),s.createHref({pathname:a,search:o,hash:A})}function Ka(){return k.useContext(zf)!=null}function ii(){return Ka()||Qt(!1),k.useContext(zf).location}function hT(t){k.useContext(Js).static||k.useLayoutEffect(t)}function mu(){let{isDataRoute:t}=k.useContext(Xs);return t?iN():zR()}function zR(){Ka()||Qt(!1);let t=k.useContext(Gf),{basename:e,future:n,navigator:r}=k.useContext(Js),{matches:s}=k.useContext(Xs),{pathname:A}=ii(),i=JSON.stringify(lv(s,n.v7_relativeSplatPath)),o=k.useRef(!1);return hT(()=>{o.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=cv(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:LA([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,A,t])}const WR=k.createContext(null);function $R(t){let e=k.useContext(Xs).outlet;return e&&k.createElement(WR.Provider,{value:t},e)}function Wf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Js),{matches:s}=k.useContext(Xs),{pathname:A}=ii(),i=JSON.stringify(lv(s,r.v7_relativeSplatPath));return k.useMemo(()=>cv(t,JSON.parse(i),A,n==="path"),[t,i,A,n])}function qR(t,e){return JR(t,e)}function JR(t,e,n,r){Ka()||Qt(!1);let{navigator:s}=k.useContext(Js),{matches:A}=k.useContext(Xs),i=A[A.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=ii(),d;if(e){var h;let T=typeof e=="string"?co(e):e;a==="/"||(h=T.pathname)!=null&&h.startsWith(a)||Qt(!1),d=T}else d=c;let f=d.pathname||"/",m=f;if(a!=="/"){let T=a.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let v=xR(t,{pathname:m}),y=tN(v&&v.map(T=>Object.assign({},T,{params:Object.assign({},o,T.params),pathname:LA([a,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?a:LA([a,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),A,n,r);return e&&y?k.createElement(zf.Provider,{value:{location:Oc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:CA.Pop}},y):y}function XR(){let t=AN(),e=jR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const YR=k.createElement(XR,null);class ZR extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Xs.Provider,{value:this.props.routeContext},k.createElement(dT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eN(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(Gf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Xs.Provider,{value:e},r)}function tN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var A;if(!n)return null;if(n.errors)t=n.matches;else if((A=r)!=null&&A.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Qt(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,v=!1,y=null,T=null;n&&(m=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||YR,a&&(c<0&&f===0?(oN("route-fallback"),v=!0,T=null):c===f&&(v=!0,T=h.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,f+1)),w=()=>{let _;return m?_=y:v?_=T:h.route.Component?_=k.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,k.createElement(eN,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(ZR,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):w()},null)}var fT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fT||{}),gT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gT||{});function nN(t){let e=k.useContext(Gf);return e||Qt(!1),e}function rN(t){let e=k.useContext(uT);return e||Qt(!1),e}function sN(t){let e=k.useContext(Xs);return e||Qt(!1),e}function pT(t){let e=sN(),n=e.matches[e.matches.length-1];return n.route.id||Qt(!1),n.route.id}function AN(){var t;let e=k.useContext(dT),n=rN(),r=pT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iN(){let{router:t}=nN(fT.UseNavigateStable),e=pT(gT.UseNavigateStable),n=k.useRef(!1);return hT(()=>{n.current=!0}),k.useCallback(function(s,A){A===void 0&&(A={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Oc({fromRouteId:e},A)))},[t,e])}const Jx={};function oN(t,e,n){Jx[t]||(Jx[t]=!0)}function aN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wh(t){let{to:e,replace:n,state:r,relative:s}=t;Ka()||Qt(!1);let{future:A,static:i}=k.useContext(Js),{matches:o}=k.useContext(Xs),{pathname:a}=ii(),c=mu(),d=cv(e,lv(o,A.v7_relativeSplatPath),a,s==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function lN(t){return $R(t.context)}function hr(t){Qt(!1)}function cN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=CA.Pop,navigator:A,static:i=!1,future:o}=t;Ka()&&Qt(!1);let a=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:a,navigator:A,static:i,future:Oc({v7_relativeSplatPath:!1},o)}),[a,o,A,i]);typeof r=="string"&&(r=co(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=r,y=k.useMemo(()=>{let T=xa(d,a);return T==null?null:{location:{pathname:T,search:h,hash:f,state:m,key:v},navigationType:s}},[a,d,h,f,m,v,s]);return y==null?null:k.createElement(Js.Provider,{value:c},k.createElement(zf.Provider,{children:n,value:y}))}function uN(t){let{children:e,location:n}=t;return qR(o0(e),n)}new Promise(()=>{});function o0(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let A=[...e,s];if(r.type===k.Fragment){n.push.apply(n,o0(r.props.children,A));return}r.type!==hr&&Qt(!1),!r.props.index||!r.props.children||Qt(!1);let i={id:r.props.id||A.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=o0(r.props.children,A)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(this,arguments)}function mT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,A;for(A=0;A<r.length;A++)s=r[A],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function dN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hN(t,e){return t.button===0&&(!e||e==="_self")&&!dN(t)}function a0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function fN(t,e){let n=a0(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(A=>{n.append(s,A)})}),n}const gN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mN="6";try{window.__reactRouterVersion=mN}catch{}const wN=k.createContext({isTransitioning:!1}),vN="startTransition",Xx=ok[vN];function yN(t){let{basename:e,children:n,future:r,window:s}=t,A=k.useRef();A.current==null&&(A.current=vR({window:s,v5Compat:!0}));let i=A.current,[o,a]=k.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=k.useCallback(h=>{c&&Xx?Xx(()=>a(h)):a(h)},[a,c]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.useEffect(()=>aN(r),[r]),k.createElement(cN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const BN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CN=k.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:A,replace:i,state:o,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=mT(e,gN),{basename:m}=k.useContext(Js),v,y=!1;if(typeof c=="string"&&xN.test(c)&&(v=c,BN))try{let _=new URL(window.location.href),S=c.startsWith("//")?new URL(_.protocol+c):new URL(c),U=xa(S.pathname,m);S.origin===_.origin&&U!=null?c=U+S.search+S.hash:y=!0}catch{}let T=GR(c,{relative:s}),C=EN(c,{replace:i,state:o,target:a,preventScrollReset:d,relative:s,viewTransition:h});function w(_){r&&r(_),_.defaultPrevented||C(_)}return k.createElement("a",$h({},f,{href:v||T,onClick:y||A?r:w,ref:n,target:a}))}),_N=k.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:A="",end:i=!1,style:o,to:a,viewTransition:c,children:d}=e,h=mT(e,pN),f=Wf(a,{relative:h.relative}),m=ii(),v=k.useContext(uT),{navigator:y,basename:T}=k.useContext(Js),C=v!=null&&TN(f)&&c===!0,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,_=m.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(_=_.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&T&&(S=xa(S,T)||S);const U=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=_===w||!i&&_.startsWith(w)&&_.charAt(U)==="/",B=S!=null&&(S===w||!i&&S.startsWith(w)&&S.charAt(w.length)==="/"),x={isActive:N,isPending:B,isTransitioning:C},I=N?r:void 0,F;typeof A=="function"?F=A(x):F=[A,N?"active":null,B?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(x):o;return k.createElement(CN,$h({},h,{"aria-current":I,className:F,ref:n,style:R,to:a,viewTransition:c}),typeof d=="function"?d(x):d)});var l0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(l0||(l0={}));var Yx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yx||(Yx={}));function IN(t){let e=k.useContext(Gf);return e||Qt(!1),e}function EN(t,e){let{target:n,replace:r,state:s,preventScrollReset:A,relative:i,viewTransition:o}=e===void 0?{}:e,a=mu(),c=ii(),d=Wf(t,{relative:i});return k.useCallback(h=>{if(hN(h,n)){h.preventDefault();let f=r!==void 0?r:zh(c)===zh(d);a(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:o})}},[c,a,d,r,s,n,t,A,i,o])}function bN(t){let e=k.useRef(a0(t)),n=k.useRef(!1),r=ii(),s=k.useMemo(()=>fN(r.search,n.current?null:e.current),[r.search]),A=mu(),i=k.useCallback((o,a)=>{const c=a0(typeof o=="function"?o(s):o);n.current=!0,A("?"+c,a)},[A,s]);return[s,i]}function TN(t,e){e===void 0&&(e={});let n=k.useContext(wN);n==null&&Qt(!1);let{basename:r}=IN(l0.useViewTransitionState),s=Wf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let A=xa(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=xa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return i0(s.pathname,i)!=null||i0(s.pathname,A)!=null}var ce=(t=>(t.First="1 ",t.Second="2 ",t))(ce||{}),wr=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(wr||{});const kn=["","","","",""],ls={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Zx=["","","/","","","",""," "],wT=[{shift:ce.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ce.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ce.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ce.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ce.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ce.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ce.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ce.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ce.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ce.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ce.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ce.Second,period:6,start:"18:50",end:"19:35",day:"default"}],Yt={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ce.First,studentsCount:25},{id:"c2",name:"6",shift:ce.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2ndHalf:[],substitutions:[],bellSchedule:wT,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}};var eC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[n++];e[r++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[n++],i=t[n++],o=t[n++],a=((s&7)<<18|(A&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const A=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},yT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,o=i?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=A>>2,h=(A&3)<<4|o>>4;let f=(o&15)<<2|c>>6,m=c&63;a||(m=64,i||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const A=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,A==null||o==null||c==null||h==null)throw new UN;const f=A<<2|o>>4;if(r.push(f),c!==64){const m=o<<4&240|c>>2;if(r.push(m),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SN=function(t){const e=vT(t);return yT.encodeByteArray(e,!0)},qh=function(t){return SN(t).replace(/\./g,"")},BT=function(t){try{return yT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!QN(n)||(t[n]=Jh(t[n],e[n]));return t}function QN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=()=>xT().__FIREBASE_DEFAULTS__,RN=()=>{if(typeof process>"u"||typeof eC>"u")return;const t=eC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BT(t[1]);return e&&JSON.parse(e)},uv=()=>{try{return kN()||RN()||NN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CT=()=>{var t;return(t=uv())===null||t===void 0?void 0:t.config},PN=t=>{var e;return(e=uv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qh(JSON.stringify(n)),qh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ON(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function dv(){var t;const e=(t=uv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MN(){return typeof window<"u"||_T()}function _T(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function VN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ET(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bT(){return!dv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mc(){try{return typeof indexedDB=="object"}catch{return!1}}function HN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="FirebaseError";class Gn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jN,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uo.prototype.create)}}class uo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?KN(A,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Gn(s,o,r)}}function KN(t,e){return t.replace(GN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const A=t[s],i=e[s];if(nC(A)&&nC(i)){if(!Vc(A,i))return!1}else if(A!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,A]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TT(t,e){const n=new WN(t,e);return n.subscribe.bind(n)}class WN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$N(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_p),s.error===void 0&&(s.error=_p),s.complete===void 0&&(s.complete=_p);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $N(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class ms{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XN(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const A=this.getOrInitializeService({instanceIdentifier:s});r.resolve(A)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[A,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(A);r===o&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),A=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JN(t){return t===Bi?void 0:t}function XN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=[];var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const UT={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},YN=Xe.INFO,ZN={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},eP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let $f=class{constructor(e){this.name=e,this._logLevel=YN,this._logHandler=eP,this._userLogHandler=null,fv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}};function tP(t){fv.forEach(e=>{e.setLogLevel(t)})}function nP(t,e){for(const n of fv){let r=null;e&&e.level&&(r=UT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,A,...i)=>{const o=i.map(a=>{if(a==null)return null;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch{return null}}).filter(a=>a).join(" ");A>=(r??s.logLevel)&&t({level:Xe[A].toLowerCase(),message:o,args:i,type:s.name})}}}const rP=(t,e)=>e.some(n=>t instanceof n);let rC,sC;function sP(){return rC||(rC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AP(){return sC||(sC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ST=new WeakMap,c0=new WeakMap,QT=new WeakMap,Ip=new WeakMap,gv=new WeakMap;function iP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{n(OA(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&ST.set(n,t)}).catch(()=>{}),gv.set(e,t),e}function oP(t){if(c0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});c0.set(t,e)}let u0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return c0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return OA(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aP(t){u0=t(u0)}function lP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ep(this),e,...n);return QT.set(r,e.sort?e.sort():[e]),OA(r)}:AP().includes(t)?function(...e){return t.apply(Ep(this),e),OA(ST.get(this))}:function(...e){return OA(t.apply(Ep(this),e))}}function cP(t){return typeof t=="function"?lP(t):(t instanceof IDBTransaction&&oP(t),rP(t,sP())?new Proxy(t,u0):t)}function OA(t){if(t instanceof IDBRequest)return iP(t);if(Ip.has(t))return Ip.get(t);const e=cP(t);return e!==t&&(Ip.set(t,e),gv.set(e,t)),e}const Ep=t=>gv.get(t);function uP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),o=OA(i);return r&&i.addEventListener("upgradeneeded",a=>{r(OA(i.result),a.oldVersion,a.newVersion,OA(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{A&&a.addEventListener("close",()=>A()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const dP=["get","getKey","getAll","getAllKeys","count"],hP=["put","add","delete","clear"],bp=new Map;function AC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dP.includes(n)))return;const A=async function(i,...o){const a=this.transaction(i,s?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&a.done]))[0]};return bp.set(e,A),A}aP(t=>({...t,get:(e,n,r)=>AC(e,n)||t.get(e,n,r),has:(e,n)=>!!AC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xh="@firebase/app",d0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new $f("@firebase/app"),pP="@firebase/app-compat",mP="@firebase/analytics-compat",wP="@firebase/analytics",vP="@firebase/app-check-compat",yP="@firebase/app-check",BP="@firebase/auth",xP="@firebase/auth-compat",CP="@firebase/database",_P="@firebase/data-connect",IP="@firebase/database-compat",EP="@firebase/functions",bP="@firebase/functions-compat",TP="@firebase/installations",FP="@firebase/installations-compat",UP="@firebase/messaging",SP="@firebase/messaging-compat",QP="@firebase/performance",kP="@firebase/performance-compat",RP="@firebase/remote-config",NP="@firebase/remote-config-compat",PP="@firebase/storage",DP="@firebase/storage-compat",LP="@firebase/firestore",OP="@firebase/vertexai-preview",MP="@firebase/firestore-compat",VP="firebase",HP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="[DEFAULT]",jP={[Xh]:"fire-core",[pP]:"fire-core-compat",[wP]:"fire-analytics",[mP]:"fire-analytics-compat",[yP]:"fire-app-check",[vP]:"fire-app-check-compat",[BP]:"fire-auth",[xP]:"fire-auth-compat",[CP]:"fire-rtdb",[_P]:"fire-data-connect",[IP]:"fire-rtdb-compat",[EP]:"fire-fn",[bP]:"fire-fn-compat",[TP]:"fire-iid",[FP]:"fire-iid-compat",[UP]:"fire-fcm",[SP]:"fire-fcm-compat",[QP]:"fire-perf",[kP]:"fire-perf-compat",[RP]:"fire-rc",[NP]:"fire-rc-compat",[PP]:"fire-gcs",[DP]:"fire-gcs-compat",[LP]:"fire-fst",[MP]:"fire-fst-compat",[OP]:"fire-vertex","fire-js":"fire-js",[VP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Map,Ca=new Map,_a=new Map;function Hc(t,e){try{t.container.addComponent(e)}catch(n){Ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kT(t,e){t.container.addOrOverwriteComponent(e)}function WA(t){const e=t.name;if(_a.has(e))return Ks.debug(`There were multiple attempts to register component ${e}.`),!1;_a.set(e,t);for(const n of zA.values())Hc(n,t);for(const n of Ca.values())Hc(n,t);return!0}function RT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function KP(t,e,n=GA){RT(t,e).clearInstance(n)}function NT(t){return t.options!==void 0}function Lt(t){return t.settings!==void 0}function GP(){_a.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new uo("app","Firebase",zP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PT=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP extends PT{constructor(e,n,r,s){const A=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,i={name:r,automaticDataCollectionEnabled:A};if(e.apiKey!==void 0)super(e,i,s);else{const o=e;super(o.options,i,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:A},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Jr(Xh,d0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){mv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Dr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=HP;function pv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:GA,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Dr.create("bad-app-name",{appName:String(s)});if(n||(n=CT()),!n)throw Dr.create("no-options");const A=zA.get(s);if(A){if(Vc(n,A.options)&&Vc(r,A.config))return A;throw Dr.create("duplicate-app",{appName:s})}const i=new FT(s);for(const a of _a.values())i.addComponent(a);const o=new PT(n,r,i);return zA.set(s,o),o}function $P(t,e){if(MN()&&!_T())throw Dr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;NT(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Dr.create("finalization-registry-not-supported",{});const A=""+s(JSON.stringify(r)),i=Ca.get(A);if(i)return i.incRefCount(e.releaseOnDeref),i;const o=new FT(A);for(const c of _a.values())o.addComponent(c);const a=new WP(n,e,A,o);return Ca.set(A,a),a}function qP(t=GA){const e=zA.get(t);if(!e&&t===GA&&CT())return pv();if(!e)throw Dr.create("no-app",{appName:t});return e}function JP(){return Array.from(zA.values())}async function mv(t){let e=!1;const n=t.name;zA.has(n)?(e=!0,zA.delete(n)):Ca.has(n)&&t.decRefCount()<=0&&(Ca.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Jr(t,e,n){var r;let s=(r=jP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const o=[`Unable to register library "${s}" with version "${e}":`];A&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ks.warn(o.join(" "));return}WA(new ms(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function DT(t,e){if(t!==null&&typeof t!="function")throw Dr.create("invalid-log-argument");nP(t,e)}function LT(t){tP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="firebase-heartbeat-database",YP=1,jc="firebase-heartbeat-store";let Tp=null;function OT(){return Tp||(Tp=uP(XP,YP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dr.create("idb-open",{originalErrorMessage:t.message})})),Tp}async function ZP(t){try{const n=(await OT()).transaction(jc),r=await n.objectStore(jc).get(MT(t));return await n.done,r}catch(e){if(e instanceof Gn)Ks.warn(e.message);else{const n=Dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ks.warn(n.message)}}}async function iC(t,e){try{const r=(await OT()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,MT(t)),await r.done}catch(n){if(n instanceof Gn)Ks.warn(n.message);else{const r=Dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ks.warn(r.message)}}}function MT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1024,tD=30*24*60*60*1e3;class nD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=oC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=tD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ks.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oC(),{heartbeatsToSend:r,unsentEntries:s}=rD(this._heartbeatsCache.heartbeats),A=qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(n){return Ks.warn(n),""}}}function oC(){return new Date().toISOString().substring(0,10)}function rD(t,e=eD){const n=[];let r=t.slice();for(const s of t){const A=n.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),aC(n)>e){A.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),aC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mc()?HN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function aC(t){return qh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){WA(new ms("platform-logger",e=>new fP(e),"PRIVATE")),WA(new ms("heartbeat",e=>new nD(e),"PRIVATE")),Jr(Xh,d0,t),Jr(Xh,d0,"esm2017"),Jr("fire-js","")}AD("");const iD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Gn,SDK_VERSION:oi,_DEFAULT_ENTRY_NAME:GA,_addComponent:Hc,_addOrOverwriteComponent:kT,_apps:zA,_clearComponents:GP,_components:_a,_getProvider:RT,_isFirebaseApp:NT,_isFirebaseServerApp:Lt,_registerComponent:WA,_removeServiceInstance:KP,_serverApps:Ca,deleteApp:mv,getApp:qP,getApps:JP,initializeApp:pv,initializeServerApp:$P,onLog:DT,registerVersion:Jr,setLogLevel:LT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n){this._delegate=e,this.firebase=n,Hc(e,new ms("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),mv(this._delegate)))}_getService(e,n=GA){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=GA){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Hc(this._delegate,e)}_addOrOverwriteComponent(e){kT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},lC=new uo("app-compat","Firebase",aD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t){const e={},n={__esModule:!0,initializeApp:A,app:s,registerVersion:Jr,setLogLevel:LT,onLog:DT,apps:null,SDK_VERSION:oi,INTERNAL:{registerComponent:o,removeApp:r,useAsService:a,modularAPIs:iD}};n.default=n,Object.defineProperty(n,"apps",{get:i});function r(c){delete e[c]}function s(c){if(c=c||GA,!tC(e,c))throw lC.create("no-app",{appName:c});return e[c]}s.App=t;function A(c,d={}){const h=pv(c,d);if(tC(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function i(){return Object.keys(e).map(c=>e[c])}function o(c){const d=c.name,h=d.replace("-compat","");if(WA(c)&&c.type==="PUBLIC"){const f=(m=s())=>{if(typeof m[h]!="function")throw lC.create("invalid-app-argument",{appName:d});return m[h]()};c.serviceProps!==void 0&&Jh(f,c.serviceProps),n[h]=f,t.prototype[h]=function(...m){return this._getService.bind(this,d).apply(this,c.multipleInstances?m:[])}}return c.type==="PUBLIC"?n[h]:null}function a(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){const t=lD(oD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:VT,extendNamespace:e,createSubscribe:TT,ErrorFactory:uo,deepExtend:Jh});function e(n){Jh(t,n)}return t}const cD=VT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new $f("@firebase/app-compat"),uD="@firebase/app-compat",dD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){Jr(uD,dD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=xT();if(t.firebase!==void 0){cC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&cC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ss=cD;hD();var fD="firebase",gD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss.registerVersion(fD,gD,"app-compat");var uC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oi,HT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(B,x){function I(){}I.prototype=x.prototype,B.D=x.prototype,B.prototype=new I,B.prototype.constructor=B,B.C=function(F,R,L){for(var b=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)b[Qe-2]=arguments[Qe];return x.prototype[R].apply(F,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(B,x,I){I||(I=0);var F=Array(16);if(typeof x=="string")for(var R=0;16>R;++R)F[R]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(R=0;16>R;++R)F[R]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=B.g[0],I=B.g[1],R=B.g[2];var L=B.g[3],b=x+(L^I&(R^L))+F[0]+3614090360&4294967295;x=I+(b<<7&4294967295|b>>>25),b=L+(R^x&(I^R))+F[1]+3905402710&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(I^L&(x^I))+F[2]+606105819&4294967295,R=L+(b<<17&4294967295|b>>>15),b=I+(x^R&(L^x))+F[3]+3250441966&4294967295,I=R+(b<<22&4294967295|b>>>10),b=x+(L^I&(R^L))+F[4]+4118548399&4294967295,x=I+(b<<7&4294967295|b>>>25),b=L+(R^x&(I^R))+F[5]+1200080426&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(I^L&(x^I))+F[6]+2821735955&4294967295,R=L+(b<<17&4294967295|b>>>15),b=I+(x^R&(L^x))+F[7]+4249261313&4294967295,I=R+(b<<22&4294967295|b>>>10),b=x+(L^I&(R^L))+F[8]+1770035416&4294967295,x=I+(b<<7&4294967295|b>>>25),b=L+(R^x&(I^R))+F[9]+2336552879&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(I^L&(x^I))+F[10]+4294925233&4294967295,R=L+(b<<17&4294967295|b>>>15),b=I+(x^R&(L^x))+F[11]+2304563134&4294967295,I=R+(b<<22&4294967295|b>>>10),b=x+(L^I&(R^L))+F[12]+1804603682&4294967295,x=I+(b<<7&4294967295|b>>>25),b=L+(R^x&(I^R))+F[13]+4254626195&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(I^L&(x^I))+F[14]+2792965006&4294967295,R=L+(b<<17&4294967295|b>>>15),b=I+(x^R&(L^x))+F[15]+1236535329&4294967295,I=R+(b<<22&4294967295|b>>>10),b=x+(R^L&(I^R))+F[1]+4129170786&4294967295,x=I+(b<<5&4294967295|b>>>27),b=L+(I^R&(x^I))+F[6]+3225465664&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^I&(L^x))+F[11]+643717713&4294967295,R=L+(b<<14&4294967295|b>>>18),b=I+(L^x&(R^L))+F[0]+3921069994&4294967295,I=R+(b<<20&4294967295|b>>>12),b=x+(R^L&(I^R))+F[5]+3593408605&4294967295,x=I+(b<<5&4294967295|b>>>27),b=L+(I^R&(x^I))+F[10]+38016083&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^I&(L^x))+F[15]+3634488961&4294967295,R=L+(b<<14&4294967295|b>>>18),b=I+(L^x&(R^L))+F[4]+3889429448&4294967295,I=R+(b<<20&4294967295|b>>>12),b=x+(R^L&(I^R))+F[9]+568446438&4294967295,x=I+(b<<5&4294967295|b>>>27),b=L+(I^R&(x^I))+F[14]+3275163606&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^I&(L^x))+F[3]+4107603335&4294967295,R=L+(b<<14&4294967295|b>>>18),b=I+(L^x&(R^L))+F[8]+1163531501&4294967295,I=R+(b<<20&4294967295|b>>>12),b=x+(R^L&(I^R))+F[13]+2850285829&4294967295,x=I+(b<<5&4294967295|b>>>27),b=L+(I^R&(x^I))+F[2]+4243563512&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^I&(L^x))+F[7]+1735328473&4294967295,R=L+(b<<14&4294967295|b>>>18),b=I+(L^x&(R^L))+F[12]+2368359562&4294967295,I=R+(b<<20&4294967295|b>>>12),b=x+(I^R^L)+F[5]+4294588738&4294967295,x=I+(b<<4&4294967295|b>>>28),b=L+(x^I^R)+F[8]+2272392833&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^I)+F[11]+1839030562&4294967295,R=L+(b<<16&4294967295|b>>>16),b=I+(R^L^x)+F[14]+4259657740&4294967295,I=R+(b<<23&4294967295|b>>>9),b=x+(I^R^L)+F[1]+2763975236&4294967295,x=I+(b<<4&4294967295|b>>>28),b=L+(x^I^R)+F[4]+1272893353&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^I)+F[7]+4139469664&4294967295,R=L+(b<<16&4294967295|b>>>16),b=I+(R^L^x)+F[10]+3200236656&4294967295,I=R+(b<<23&4294967295|b>>>9),b=x+(I^R^L)+F[13]+681279174&4294967295,x=I+(b<<4&4294967295|b>>>28),b=L+(x^I^R)+F[0]+3936430074&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^I)+F[3]+3572445317&4294967295,R=L+(b<<16&4294967295|b>>>16),b=I+(R^L^x)+F[6]+76029189&4294967295,I=R+(b<<23&4294967295|b>>>9),b=x+(I^R^L)+F[9]+3654602809&4294967295,x=I+(b<<4&4294967295|b>>>28),b=L+(x^I^R)+F[12]+3873151461&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^I)+F[15]+530742520&4294967295,R=L+(b<<16&4294967295|b>>>16),b=I+(R^L^x)+F[2]+3299628645&4294967295,I=R+(b<<23&4294967295|b>>>9),b=x+(R^(I|~L))+F[0]+4096336452&4294967295,x=I+(b<<6&4294967295|b>>>26),b=L+(I^(x|~R))+F[7]+1126891415&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~I))+F[14]+2878612391&4294967295,R=L+(b<<15&4294967295|b>>>17),b=I+(L^(R|~x))+F[5]+4237533241&4294967295,I=R+(b<<21&4294967295|b>>>11),b=x+(R^(I|~L))+F[12]+1700485571&4294967295,x=I+(b<<6&4294967295|b>>>26),b=L+(I^(x|~R))+F[3]+2399980690&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~I))+F[10]+4293915773&4294967295,R=L+(b<<15&4294967295|b>>>17),b=I+(L^(R|~x))+F[1]+2240044497&4294967295,I=R+(b<<21&4294967295|b>>>11),b=x+(R^(I|~L))+F[8]+1873313359&4294967295,x=I+(b<<6&4294967295|b>>>26),b=L+(I^(x|~R))+F[15]+4264355552&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~I))+F[6]+2734768916&4294967295,R=L+(b<<15&4294967295|b>>>17),b=I+(L^(R|~x))+F[13]+1309151649&4294967295,I=R+(b<<21&4294967295|b>>>11),b=x+(R^(I|~L))+F[4]+4149444226&4294967295,x=I+(b<<6&4294967295|b>>>26),b=L+(I^(x|~R))+F[11]+3174756917&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~I))+F[2]+718787259&4294967295,R=L+(b<<15&4294967295|b>>>17),b=I+(L^(R|~x))+F[9]+3951481745&4294967295,B.g[0]=B.g[0]+x&4294967295,B.g[1]=B.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,B.g[2]=B.g[2]+R&4294967295,B.g[3]=B.g[3]+L&4294967295}r.prototype.u=function(B,x){x===void 0&&(x=B.length);for(var I=x-this.blockSize,F=this.B,R=this.h,L=0;L<x;){if(R==0)for(;L<=I;)s(this,B,L),L+=this.blockSize;if(typeof B=="string"){for(;L<x;)if(F[R++]=B.charCodeAt(L++),R==this.blockSize){s(this,F),R=0;break}}else for(;L<x;)if(F[R++]=B[L++],R==this.blockSize){s(this,F),R=0;break}}this.h=R,this.o+=x},r.prototype.v=function(){var B=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);B[0]=128;for(var x=1;x<B.length-8;++x)B[x]=0;var I=8*this.o;for(x=B.length-8;x<B.length;++x)B[x]=I&255,I/=256;for(this.u(B),B=Array(16),x=I=0;4>x;++x)for(var F=0;32>F;F+=8)B[I++]=this.g[x]>>>F&255;return B};function A(B,x){var I=o;return Object.prototype.hasOwnProperty.call(I,B)?I[B]:I[B]=x(B)}function i(B,x){this.h=x;for(var I=[],F=!0,R=B.length-1;0<=R;R--){var L=B[R]|0;F&&L==x||(I[R]=L,F=!1)}this.g=I}var o={};function a(B){return-128<=B&&128>B?A(B,function(x){return new i([x|0],0>x?-1:0)}):new i([B|0],0>B?-1:0)}function c(B){if(isNaN(B)||!isFinite(B))return h;if(0>B)return T(c(-B));for(var x=[],I=1,F=0;B>=I;F++)x[F]=B/I|0,I*=4294967296;return new i(x,0)}function d(B,x){if(B.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(B.charAt(0)=="-")return T(d(B.substring(1),x));if(0<=B.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(x,8)),F=h,R=0;R<B.length;R+=8){var L=Math.min(8,B.length-R),b=parseInt(B.substring(R,R+L),x);8>L?(L=c(Math.pow(x,L)),F=F.j(L).add(c(b))):(F=F.j(I),F=F.add(c(b)))}return F}var h=a(0),f=a(1),m=a(16777216);t=i.prototype,t.m=function(){if(y(this))return-T(this).m();for(var B=0,x=1,I=0;I<this.g.length;I++){var F=this.i(I);B+=(0<=F?F:4294967296+F)*x,x*=4294967296}return B},t.toString=function(B){if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(v(this))return"0";if(y(this))return"-"+T(this).toString(B);for(var x=c(Math.pow(B,6)),I=this,F="";;){var R=S(I,x).g;I=C(I,R.j(x));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(B);if(I=R,v(I))return L+F;for(;6>L.length;)L="0"+L;F=L+F}},t.i=function(B){return 0>B?0:B<this.g.length?this.g[B]:this.h};function v(B){if(B.h!=0)return!1;for(var x=0;x<B.g.length;x++)if(B.g[x]!=0)return!1;return!0}function y(B){return B.h==-1}t.l=function(B){return B=C(this,B),y(B)?-1:v(B)?0:1};function T(B){for(var x=B.g.length,I=[],F=0;F<x;F++)I[F]=~B.g[F];return new i(I,~B.h).add(f)}t.abs=function(){return y(this)?T(this):this},t.add=function(B){for(var x=Math.max(this.g.length,B.g.length),I=[],F=0,R=0;R<=x;R++){var L=F+(this.i(R)&65535)+(B.i(R)&65535),b=(L>>>16)+(this.i(R)>>>16)+(B.i(R)>>>16);F=b>>>16,L&=65535,b&=65535,I[R]=b<<16|L}return new i(I,I[I.length-1]&-2147483648?-1:0)};function C(B,x){return B.add(T(x))}t.j=function(B){if(v(this)||v(B))return h;if(y(this))return y(B)?T(this).j(T(B)):T(T(this).j(B));if(y(B))return T(this.j(T(B)));if(0>this.l(m)&&0>B.l(m))return c(this.m()*B.m());for(var x=this.g.length+B.g.length,I=[],F=0;F<2*x;F++)I[F]=0;for(F=0;F<this.g.length;F++)for(var R=0;R<B.g.length;R++){var L=this.i(F)>>>16,b=this.i(F)&65535,Qe=B.i(R)>>>16,Re=B.i(R)&65535;I[2*F+2*R]+=b*Re,w(I,2*F+2*R),I[2*F+2*R+1]+=L*Re,w(I,2*F+2*R+1),I[2*F+2*R+1]+=b*Qe,w(I,2*F+2*R+1),I[2*F+2*R+2]+=L*Qe,w(I,2*F+2*R+2)}for(F=0;F<x;F++)I[F]=I[2*F+1]<<16|I[2*F];for(F=x;F<2*x;F++)I[F]=0;return new i(I,0)};function w(B,x){for(;(B[x]&65535)!=B[x];)B[x+1]+=B[x]>>>16,B[x]&=65535,x++}function _(B,x){this.g=B,this.h=x}function S(B,x){if(v(x))throw Error("division by zero");if(v(B))return new _(h,h);if(y(B))return x=S(T(B),x),new _(T(x.g),T(x.h));if(y(x))return x=S(B,T(x)),new _(T(x.g),x.h);if(30<B.g.length){if(y(B)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var I=f,F=x;0>=F.l(B);)I=U(I),F=U(F);var R=N(I,1),L=N(F,1);for(F=N(F,2),I=N(I,2);!v(F);){var b=L.add(F);0>=b.l(B)&&(R=R.add(I),L=b),F=N(F,1),I=N(I,1)}return x=C(B,R.j(x)),new _(R,x)}for(R=h;0<=B.l(x);){for(I=Math.max(1,Math.floor(B.m()/x.m())),F=Math.ceil(Math.log(I)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),L=c(I),b=L.j(x);y(b)||0<b.l(B);)I-=F,L=c(I),b=L.j(x);v(L)&&(L=f),R=R.add(L),B=C(B,b)}return new _(R,B)}t.A=function(B){return S(this,B).h},t.and=function(B){for(var x=Math.max(this.g.length,B.g.length),I=[],F=0;F<x;F++)I[F]=this.i(F)&B.i(F);return new i(I,this.h&B.h)},t.or=function(B){for(var x=Math.max(this.g.length,B.g.length),I=[],F=0;F<x;F++)I[F]=this.i(F)|B.i(F);return new i(I,this.h|B.h)},t.xor=function(B){for(var x=Math.max(this.g.length,B.g.length),I=[],F=0;F<x;F++)I[F]=this.i(F)^B.i(F);return new i(I,this.h^B.h)};function U(B){for(var x=B.g.length+1,I=[],F=0;F<x;F++)I[F]=B.i(F)<<1|B.i(F-1)>>>31;return new i(I,B.h)}function N(B,x){var I=x>>5;x%=32;for(var F=B.g.length-I,R=[],L=0;L<F;L++)R[L]=0<x?B.i(L+I)>>>x|B.i(L+I+1)<<32-x:B.i(L+I);return new i(R,B.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HT=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Oi=i}).apply(typeof uC<"u"?uC:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jT,Ol,KT,ih,h0,GT,zT,WT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var p=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var O=u[E];if(!(O in p))break e;p=p[O]}u=u[u.length-1],E=p[u],g=g(E),g!=E&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var p=0,E=!1,O={next:function(){if(!E&&p<u.length){var j=p++;return{value:g(j,u[j]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),u.apply(g,O)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function v(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(E,O,j){for(var ae=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)ae[gt-2]=arguments[gt];return g.prototype[O].apply(E,ae)}}function y(u){const g=u.length;if(0<g){const p=Array(g);for(let E=0;E<g;E++)p[E]=u[E];return p}return[]}function T(u,g){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(a(E)){const O=u.length||0,j=E.length||0;u.length=O+j;for(let ae=0;ae<j;ae++)u[O+ae]=E[ae]}else u.push(E)}}class C{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function S(u){return S[" "](u),u}S[" "]=function(){};var U=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function N(u,g,p){for(const E in u)g.call(p,u[E],E,u)}function B(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function x(u){const g={};for(const p in u)g[p]=u[p];return g}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(u,g){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)u[p]=E[p];for(let j=0;j<I.length;j++)p=I[j],Object.prototype.hasOwnProperty.call(E,p)&&(u[p]=E[p])}}function R(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function L(u){o.setTimeout(()=>{throw u},0)}function b(){var u=Q;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Qe{constructor(){this.h=this.g=null}add(g,p){const E=Re.get();E.set(g,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Re=new C(()=>new $e,u=>u.reset());class $e{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,re=!1,Q=new Qe,V=()=>{const u=o.Promise.resolve(void 0);Se=()=>{u.then(W)}};var W=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(p){L(p)}var g=Re;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}re=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};o.addEventListener("test",p,g),o.removeEventListener("test",p,g)}catch{}return u}();function ie(u,g){if(K.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{S(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:de[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ie.aa.h.call(this)}}v(ie,K);var de={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Ve(u,g,p,E,O){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!E,this.ha=O,this.key=++Be,this.da=this.fa=!1}function he(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Y(u){this.src=u,this.g={},this.h=0}Y.prototype.add=function(u,g,p,E,O){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var ae=we(u,g,E,O);return-1<ae?(g=u[ae],p||(g.fa=!1)):(g=new Ve(g,this.src,j,!!E,O),g.fa=p,u.push(g)),g};function Ce(u,g){var p=g.type;if(p in u.g){var E=u.g[p],O=Array.prototype.indexOf.call(E,g,void 0),j;(j=0<=O)&&Array.prototype.splice.call(E,O,1),j&&(he(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function we(u,g,p,E){for(var O=0;O<u.length;++O){var j=u[O];if(!j.da&&j.listener==g&&j.capture==!!p&&j.ha==E)return O}return-1}var fe="closure_lm_"+(1e6*Math.random()|0),De={};function Oe(u,g,p,E,O){if(Array.isArray(g)){for(var j=0;j<g.length;j++)Oe(u,g[j],p,E,O);return null}return p=Xn(p),u&&u[z]?u.K(g,p,c(E)?!!E.capture:!1,O):qe(u,g,p,!1,E,O)}function qe(u,g,p,E,O,j){if(!g)throw Error("Invalid event type");var ae=c(O)?!!O.capture:!!O,gt=st(u);if(gt||(u[fe]=gt=new Y(u)),p=gt.add(g,p,E,ae,j),p.proxy)return p;if(E=ze(),p.proxy=E,E.src=u,E.listener=p,u.addEventListener)$||(O=ae),O===void 0&&(O=!1),u.addEventListener(g.toString(),E,O);else if(u.attachEvent)u.attachEvent(ct(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ze(){function u(p){return g.call(u.src,u.listener,p)}const g=Ge;return u}function Me(u,g,p,E,O){if(Array.isArray(g))for(var j=0;j<g.length;j++)Me(u,g[j],p,E,O);else E=c(E)?!!E.capture:!!E,p=Xn(p),u&&u[z]?(u=u.i,g=String(g).toString(),g in u.g&&(j=u.g[g],p=we(j,p,E,O),-1<p&&(he(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete u.g[g],u.h--)))):u&&(u=st(u))&&(g=u.g[g.toString()],u=-1,g&&(u=we(g,p,E,O)),(p=-1<u?g[u]:null)&&at(p))}function at(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[z])Ce(g.i,u);else{var p=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(p,E,u.capture):g.detachEvent?g.detachEvent(ct(p),E):g.addListener&&g.removeListener&&g.removeListener(E),(p=st(g))?(Ce(p,u),p.h==0&&(p.src=null,g[fe]=null)):he(u)}}}function ct(u){return u in De?De[u]:De[u]="on"+u}function Ge(u,g){if(u.da)u=!0;else{g=new ie(g,this);var p=u.listener,E=u.ha||u.src;u.fa&&at(u),u=p.call(E,g)}return u}function st(u){return u=u[fe],u instanceof Y?u:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xn(u){return typeof u=="function"?u:(u[ln]||(u[ln]=function(g){return u.handleEvent(g)}),u[ln])}function We(){se.call(this),this.i=new Y(this),this.M=this,this.F=null}v(We,se),We.prototype[z]=!0,We.prototype.removeEventListener=function(u,g,p,E){Me(this,u,g,p,E)};function D(u,g){var p,E=u.F;if(E)for(p=[];E;E=E.F)p.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new K(g,u);else if(g instanceof K)g.target=g.target||u;else{var O=g;g=new K(E,u),F(g,O)}if(O=!0,p)for(var j=p.length-1;0<=j;j--){var ae=g.g=p[j];O=G(ae,E,!0,g)&&O}if(ae=g.g=u,O=G(ae,E,!0,g)&&O,O=G(ae,E,!1,g)&&O,p)for(j=0;j<p.length;j++)ae=g.g=p[j],O=G(ae,E,!1,g)&&O}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],E=0;E<p.length;E++)he(p[E]);delete u.g[g],u.h--}}this.F=null},We.prototype.K=function(u,g,p,E){return this.i.add(String(u),g,!1,p,E)},We.prototype.L=function(u,g,p,E){return this.i.add(String(u),g,!0,p,E)};function G(u,g,p,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,j=0;j<g.length;++j){var ae=g[j];if(ae&&!ae.da&&ae.capture==p){var gt=ae.listener,mn=ae.ha||ae.src;ae.fa&&Ce(u.i,ae),O=gt.call(mn,E)!==!1&&O}}return O&&!E.defaultPrevented}function Ae(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function _e(u){u.g=Ae(()=>{u.g=null,u.i&&(u.i=!1,_e(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ne extends se{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_e(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(u){se.call(this),this.h=u,this.g={}}v(Ie,se);var ge=[];function Pe(u){N(u.g,function(g,p){this.g.hasOwnProperty(p)&&at(g)},u),u.g={}}Ie.prototype.N=function(){Ie.aa.N.call(this),Pe(this)},Ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=o.JSON.stringify,be=o.JSON.parse,Ke=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Ct(){}Ct.prototype.h=null;function ot(u){return u.h||(u.h=u.i())}function Je(){}var Ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){K.call(this,"d")}v(ur,K);function Er(){K.call(this,"c")}v(Er,K);var Yn={},jt=null;function On(){return jt=jt||new We}Yn.La="serverreachability";function P(u){K.call(this,Yn.La,u)}v(P,K);function Z(u){const g=On();D(g,new P(g))}Yn.STAT_EVENT="statevent";function me(u,g){K.call(this,Yn.STAT_EVENT,u),this.stat=g}v(me,K);function oe(u){const g=On();D(g,new me(g,u))}Yn.Ma="timingevent";function te(u,g){K.call(this,Yn.Ma,u),this.size=g}v(te,K);function Te(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Le(){this.g=!0}Le.prototype.xa=function(){this.g=!1};function tn(u,g,p,E,O,j){u.info(function(){if(u.g)if(j)for(var ae="",gt=j.split("&"),mn=0;mn<gt.length;mn++){var At=gt[mn].split("=");if(1<At.length){var bn=At[0];At=At[1];var Tn=bn.split("_");ae=2<=Tn.length&&Tn[1]=="type"?ae+(bn+"="+At+"&"):ae+(bn+"=redacted&")}}else ae=null;else ae=j;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+g+`
`+p+`
`+ae})}function cn(u,g,p,E,O,j,ae){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+g+`
`+p+`
`+j+" "+ae})}function br(u,g,p,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Xy(u,p)+(E?" "+E:"")})}function Zn(u,g){u.info(function(){return"TIMEOUT: "+g})}Le.prototype.info=function(){};function Xy(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var E=p[u];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var j=O[0];if(j!="noop"&&j!="stop"&&j!="close")for(var ae=1;ae<O.length;ae++)O[ae]=""}}}}return Ee(p)}catch{return g}}var vo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vr;function Vu(){}v(Vu,Ct),Vu.prototype.g=function(){return new XMLHttpRequest},Vu.prototype.i=function(){return{}},Vr=new Vu;function sA(u,g,p,E){this.j=u,this.i=g,this.l=p,this.R=E||1,this.U=new Ie(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yy}function Yy(){this.i=null,this.g="",this.h=!1}var Zy={},Mg={};function Vg(u,g,p){u.L=1,u.v=Gu(_s(g)),u.m=p,u.P=!0,eB(u,null)}function eB(u,g){u.F=Date.now(),Hu(u),u.A=_s(u.v);var p=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),fB(p.i,"t",E),u.C=0,p=u.j.J,u.h=new Yy,u.g=QB(u.j,p?g:null,!u.m),0<u.O&&(u.M=new Ne(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,E=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(ge[0]=O.toString()),O=ge);for(var j=0;j<O.length;j++){var ae=Oe(p,O[j],E||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Z(),tn(u.i,u.u,u.A,u.l,u.R,u.m)}sA.prototype.ca=function(u){u=u.target;const g=this.M;g&&Is(u)==3?g.j():this.Y(u)},sA.prototype.Y=function(u){try{if(u==this.g)e:{const Tn=Is(this.g);var g=this.g.Ba();const xo=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||BB(this.g)))){this.J||Tn!=4||g==7||(g==8||0>=xo?Z(3):Z(2)),Hg(this);var p=this.g.Z();this.X=p;t:if(tB(this)){var E=BB(this.g);u="";var O=E.length,j=Is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),il(this);var ae="";break t}this.h.i=new o.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(j&&g==O-1)});E.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=p==200,cn(this.i,this.u,this.A,this.l,this.R,Tn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,mn=this.g;if((gt=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(gt)){var At=gt;break t}}At=null}if(p=At)br(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jg(this,p);else{this.o=!1,this.s=3,oe(12),hi(this),il(this);break e}}if(this.P){p=!0;let Hr;for(;!this.J&&this.C<ae.length;)if(Hr=EQ(this,ae),Hr==Mg){Tn==4&&(this.s=4,oe(14),p=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(Hr==Zy){this.s=4,oe(15),br(this.i,this.l,ae,"[Invalid Chunk]"),p=!1;break}else br(this.i,this.l,Hr,null),jg(this,Hr);if(tB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||ae.length!=0||this.h.h||(this.s=1,oe(16),p=!1),this.o=this.o&&p,!p)br(this.i,this.l,ae,"[Invalid Chunked Response]"),hi(this),il(this);else if(0<ae.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),qg(bn),bn.M=!0,oe(11))}}else br(this.i,this.l,ae,null),jg(this,ae);Tn==4&&hi(this),this.o&&!this.J&&(Tn==4?TB(this.j,this):(this.o=!1,Hu(this)))}else jQ(this.g),p==400&&0<ae.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),hi(this),il(this)}}}catch{}finally{}};function tB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function EQ(u,g){var p=u.C,E=g.indexOf(`
`,p);return E==-1?Mg:(p=Number(g.substring(p,E)),isNaN(p)?Zy:(E+=1,E+p>g.length?Mg:(g=g.slice(E,E+p),u.C=E+p,g)))}sA.prototype.cancel=function(){this.J=!0,hi(this)};function Hu(u){u.S=Date.now()+u.I,nB(u,u.I)}function nB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Te(f(u.ba,u),g)}function Hg(u){u.B&&(o.clearTimeout(u.B),u.B=null)}sA.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Zn(this.i,this.A),this.L!=2&&(Z(),oe(17)),hi(this),this.s=2,il(this)):nB(this,this.S-u)};function il(u){u.j.G==0||u.J||TB(u.j,u)}function hi(u){Hg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Pe(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function jg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||Kg(p.h,u))){if(!u.K&&Kg(p.h,u)&&p.G==3){try{var E=p.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Xu(p),qu(p);else break e;$g(p),oe(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Te(f(p.Za,p),6e3));if(1>=AB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else gi(p,11)}else if((u.K||p.g==u)&&Xu(p),!w(g))for(O=p.Da.g.parse(g),g=0;g<O.length;g++){let At=O[g];if(p.T=At[0],At=At[1],p.G==2)if(At[0]=="c"){p.K=At[1],p.ia=At[2];const bn=At[3];bn!=null&&(p.la=bn,p.j.info("VER="+p.la));const Tn=At[4];Tn!=null&&(p.Aa=Tn,p.j.info("SVER="+p.Aa));const xo=At[5];xo!=null&&typeof xo=="number"&&0<xo&&(E=1.5*xo,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Hr=u.g;if(Hr){const Zu=Hr.g?Hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zu){var j=E.h;j.g||Zu.indexOf("spdy")==-1&&Zu.indexOf("quic")==-1&&Zu.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Gg(j,j.h),j.h=null))}if(E.D){const Jg=Hr.g?Hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Jg&&(E.ya=Jg,vt(E.I,E.D,Jg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var ae=u;if(E.qa=SB(E,E.J?E.ia:null,E.W),ae.K){iB(E.h,ae);var gt=ae,mn=E.L;mn&&(gt.I=mn),gt.B&&(Hg(gt),Hu(gt)),E.g=ae}else EB(E);0<p.i.length&&Ju(p)}else At[0]!="stop"&&At[0]!="close"||gi(p,7);else p.G==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?gi(p,7):Wg(p):At[0]!="noop"&&p.l&&p.l.ta(At),p.v=0)}}Z(4)}catch{}}var bQ=class{constructor(u,g){this.g=u,this.map=g}};function rB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function AB(u){return u.h?1:u.g?u.g.size:0}function Kg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Gg(u,g){u.g?u.g.add(g):u.h=g}function iB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}rB.prototype.cancel=function(){if(this.i=oB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function oB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return y(u.i)}function TQ(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],p=u.length,E=0;E<p;E++)g.push(u[E]);return g}g=[],p=0;for(E in u)g[p++]=u[E];return g}function FQ(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const E in u)g[p++]=E;return g}}}function aB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=FQ(u),E=TQ(u),O=E.length,j=0;j<O;j++)g.call(void 0,E[j],p&&p[j],u)}var lB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UQ(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var E=u[p].indexOf("="),O=null;if(0<=E){var j=u[p].substring(0,E);O=u[p].substring(E+1)}else j=u[p];g(j,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function fi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fi){this.h=u.h,ju(this,u.j),this.o=u.o,this.g=u.g,Ku(this,u.s),this.l=u.l;var g=u.i,p=new ll;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),cB(this,p),this.m=u.m}else u&&(g=String(u).match(lB))?(this.h=!1,ju(this,g[1]||"",!0),this.o=ol(g[2]||""),this.g=ol(g[3]||"",!0),Ku(this,g[4]),this.l=ol(g[5]||"",!0),cB(this,g[6]||"",!0),this.m=ol(g[7]||"")):(this.h=!1,this.i=new ll(null,this.h))}fi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(al(g,uB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(al(g,uB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(al(p,p.charAt(0)=="/"?kQ:QQ,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",al(p,NQ)),u.join("")};function _s(u){return new fi(u)}function ju(u,g,p){u.j=p?ol(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ku(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function cB(u,g,p){g instanceof ll?(u.i=g,PQ(u.i,u.h)):(p||(g=al(g,RQ)),u.i=new ll(g,u.h))}function vt(u,g,p){u.i.set(g,p)}function Gu(u){return vt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ol(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function al(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,SQ),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function SQ(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var uB=/[#\/\?@]/g,QQ=/[#\?:]/g,kQ=/[#\?]/g,RQ=/[#\?@]/g,NQ=/#/g;function ll(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function AA(u){u.g||(u.g=new Map,u.h=0,u.i&&UQ(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=ll.prototype,t.add=function(u,g){AA(this),this.i=null,u=yo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function dB(u,g){AA(u),g=yo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function hB(u,g){return AA(u),g=yo(u,g),u.g.has(g)}t.forEach=function(u,g){AA(this),this.g.forEach(function(p,E){p.forEach(function(O){u.call(g,O,E,this)},this)},this)},t.na=function(){AA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let E=0;E<g.length;E++){const O=u[E];for(let j=0;j<O.length;j++)p.push(g[E])}return p},t.V=function(u){AA(this);let g=[];if(typeof u=="string")hB(this,u)&&(g=g.concat(this.g.get(yo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return AA(this),this.i=null,u=yo(this,u),hB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function fB(u,g,p){dB(u,g),0<p.length&&(u.i=null,u.g.set(yo(u,g),y(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var E=g[p];const j=encodeURIComponent(String(E)),ae=this.V(E);for(E=0;E<ae.length;E++){var O=j;ae[E]!==""&&(O+="="+encodeURIComponent(String(ae[E]))),u.push(O)}}return this.i=u.join("&")};function yo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function PQ(u,g){g&&!u.j&&(AA(u),u.i=null,u.g.forEach(function(p,E){var O=E.toLowerCase();E!=O&&(dB(this,E),fB(this,O,p))},u)),u.j=g}function DQ(u,g){const p=new Le;if(o.Image){const E=new Image;E.onload=m(iA,p,"TestLoadImage: loaded",!0,g,E),E.onerror=m(iA,p,"TestLoadImage: error",!1,g,E),E.onabort=m(iA,p,"TestLoadImage: abort",!1,g,E),E.ontimeout=m(iA,p,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function LQ(u,g){const p=new Le,E=new AbortController,O=setTimeout(()=>{E.abort(),iA(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(j=>{clearTimeout(O),j.ok?iA(p,"TestPingServer: ok",!0,g):iA(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),iA(p,"TestPingServer: error",!1,g)})}function iA(u,g,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function OQ(){this.g=new Ke}function MQ(u,g,p){const E=p||"";try{aB(u,function(O,j){let ae=O;c(O)&&(ae=Ee(O)),g.push(E+j+"="+encodeURIComponent(ae))})}catch(O){throw g.push(E+"type="+encodeURIComponent("_badmap")),O}}function zu(u){this.l=u.Ub||null,this.j=u.eb||!1}v(zu,Ct),zu.prototype.g=function(){return new Wu(this.l,this.j)},zu.prototype.i=function(u){return function(){return u}}({});function Wu(u,g){We.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Wu,We),t=Wu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,ul(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function gB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?cl(this):ul(this),this.readyState==3&&gB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,cl(this))},t.Qa=function(u){this.g&&(this.response=u,cl(this))},t.ga=function(){this.g&&cl(this)};function cl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ul(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function ul(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function pB(u){let g="";return N(u,function(p,E){g+=E,g+=":",g+=p,g+=`\r
`}),g}function zg(u,g,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=pB(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):vt(u,g,p))}function Pt(u){We.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Pt,We);var VQ=/^https?$/i,HQ=["POST","PUT"];t=Pt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vr.g(),this.v=this.o?ot(this.o):ot(Vr),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(j){mB(this,j);return}if(u=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())p.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(HQ,g,void 0))||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ae]of p)this.g.setRequestHeader(j,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yB(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){mB(this,j)}};function mB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,wB(u),$u(u)}function wB(u){u.A||(u.A=!0,D(u,"complete"),D(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,D(this,"complete"),D(this,"abort"),$u(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$u(this,!0)),Pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vB(this):this.bb())},t.bb=function(){vB(this)};function vB(u){if(u.h&&typeof i<"u"&&(!u.v[1]||Is(u)!=4||u.Z()!=2)){if(u.u&&Is(u)==4)Ae(u.Ea,0,u);else if(D(u,"readystatechange"),Is(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var E;if(E=ae===0){var O=String(u.D).match(lB)[1]||null;!O&&o.self&&o.self.location&&(O=o.self.location.protocol.slice(0,-1)),E=!VQ.test(O?O.toLowerCase():"")}p=E}if(p)D(u,"complete"),D(u,"success");else{u.m=6;try{var j=2<Is(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",wB(u)}}finally{$u(u)}}}}function $u(u,g){if(u.g){yB(u);const p=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||D(u,"ready");try{p.onreadystatechange=E}catch{}}}function yB(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Is(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Is(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),be(g)}};function BB(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function jQ(u){const g={};u=(u.g&&2<=Is(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(w(u[E]))continue;var p=R(u[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=g[O]||[];g[O]=j,j.push(p)}B(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function xB(u){this.Aa=0,this.i=[],this.j=new Le,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dl("baseRetryDelayMs",5e3,u),this.cb=dl("retryDelaySeedMs",1e4,u),this.Wa=dl("forwardChannelMaxRetries",2,u),this.wa=dl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rB(u&&u.concurrentRequestLimit),this.Da=new OQ,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xB.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,E){oe(0),this.W=u,this.H=g||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=SB(this,null,this.W),Ju(this)};function Wg(u){if(CB(u),u.G==3){var g=u.U++,p=_s(u.I);if(vt(p,"SID",u.K),vt(p,"RID",g),vt(p,"TYPE","terminate"),hl(u,p),g=new sA(u,u.j,g),g.L=2,g.v=Gu(_s(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&o.Image&&(new Image().src=g.v,p=!0),p||(g.g=QB(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Hu(g)}UB(u)}function qu(u){u.g&&(qg(u),u.g.cancel(),u.g=null)}function CB(u){qu(u),u.u&&(o.clearTimeout(u.u),u.u=null),Xu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function Ju(u){if(!sB(u.h)&&!u.s){u.s=!0;var g=u.Ga;Se||V(),re||(Se(),re=!0),Q.add(g,u),u.B=0}}function KQ(u,g){return AB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Te(f(u.Ga,u,g),FB(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new sA(this,this.j,u);let j=this.o;if(this.S&&(j?(j=x(j),F(j,this.S)):j=this.S),this.m!==null||this.O||(O.H=j,j=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=IB(this,O,g),p=_s(this.I),vt(p,"RID",u),vt(p,"CVER",22),this.D&&vt(p,"X-HTTP-Session-Id",this.D),hl(this,p),j&&(this.O?g="headers="+encodeURIComponent(String(pB(j)))+"&"+g:this.m&&zg(p,this.m,j)),Gg(this.h,O),this.Ua&&vt(p,"TYPE","init"),this.P?(vt(p,"$req",g),vt(p,"SID","null"),O.T=!0,Vg(O,p,null)):Vg(O,p,g),this.G=2}}else this.G==3&&(u?_B(this,u):this.i.length==0||sB(this.h)||_B(this))};function _B(u,g){var p;g?p=g.l:p=u.U++;const E=_s(u.I);vt(E,"SID",u.K),vt(E,"RID",p),vt(E,"AID",u.T),hl(u,E),u.m&&u.o&&zg(E,u.m,u.o),p=new sA(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=IB(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Gg(u.h,p),Vg(p,E,g)}function hl(u,g){u.H&&N(u.H,function(p,E){vt(g,E,p)}),u.l&&aB({},function(p,E){vt(g,E,p)})}function IB(u,g,p){p=Math.min(u.i.length,p);var E=u.l?f(u.l.Na,u.l,u):null;e:{var O=u.i;let j=-1;for(;;){const ae=["count="+p];j==-1?0<p?(j=O[0].g,ae.push("ofs="+j)):j=0:ae.push("ofs="+j);let gt=!0;for(let mn=0;mn<p;mn++){let At=O[mn].g;const bn=O[mn].map;if(At-=j,0>At)j=Math.max(0,O[mn].g-100),gt=!1;else try{MQ(bn,ae,"req"+At+"_")}catch{E&&E(bn)}}if(gt){E=ae.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,E}function EB(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Se||V(),re||(Se(),re=!0),Q.add(g,u),u.v=0}}function $g(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Te(f(u.Fa,u),FB(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,bB(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Te(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),qu(this),bB(this))};function qg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function bB(u){u.g=new sA(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=_s(u.qa);vt(g,"RID","rpc"),vt(g,"SID",u.K),vt(g,"AID",u.T),vt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&vt(g,"TO",u.ja),vt(g,"TYPE","xmlhttp"),hl(u,g),u.m&&u.o&&zg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Gu(_s(g)),p.m=null,p.P=!0,eB(p,u)}t.Za=function(){this.C!=null&&(this.C=null,qu(this),$g(this),oe(19))};function Xu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function TB(u,g){var p=null;if(u.g==g){Xu(u),qg(u),u.g=null;var E=2}else if(Kg(u.h,g))p=g.D,iB(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var O=u.B;E=On(),D(E,new te(E,p)),Ju(u)}else EB(u);else if(O=g.s,O==3||O==0&&0<g.X||!(E==1&&KQ(u,g)||E==2&&$g(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),O){case 1:gi(u,5);break;case 4:gi(u,10);break;case 3:gi(u,6);break;default:gi(u,2)}}}function FB(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function gi(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),E=u.Xa;const O=!E;E=new fi(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ju(E,"https"),Gu(E),O?DQ(E.toString(),p):LQ(E.toString(),p)}else oe(2);u.G=0,u.l&&u.l.sa(g),UB(u),CB(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function UB(u){if(u.G=0,u.ka=[],u.l){const g=oB(u.h);(g.length!=0||u.i.length!=0)&&(T(u.ka,g),T(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function SB(u,g,p){var E=p instanceof fi?_s(p):new fi(p);if(E.g!="")g&&(E.g=g+"."+E.g),Ku(E,E.s);else{var O=o.location;E=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var j=new fi(null);E&&ju(j,E),g&&(j.g=g),O&&Ku(j,O),p&&(j.l=p),E=j}return p=u.D,g=u.ya,p&&g&&vt(E,p,g),vt(E,"VER",u.la),hl(u,E),E}function QB(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Pt(new zu({eb:p})):new Pt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kB(){}t=kB.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yu(){}Yu.prototype.g=function(u,g){return new dr(u,g)};function dr(u,g){We.call(this),this.g=new xB(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Bo(this)}v(dr,We),dr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dr.prototype.close=function(){Wg(this.g)},dr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Ee(u),u=p);g.i.push(new bQ(g.Ya++,u)),g.G==3&&Ju(g)},dr.prototype.N=function(){this.g.l=null,delete this.j,Wg(this.g),delete this.g,dr.aa.N.call(this)};function RB(u){ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}v(RB,ur);function NB(){Er.call(this),this.status=1}v(NB,Er);function Bo(u){this.g=u}v(Bo,kB),Bo.prototype.ua=function(){D(this.g,"a")},Bo.prototype.ta=function(u){D(this.g,new RB(u))},Bo.prototype.sa=function(u){D(this.g,new NB)},Bo.prototype.ra=function(){D(this.g,"b")},Yu.prototype.createWebChannel=Yu.prototype.g,dr.prototype.send=dr.prototype.o,dr.prototype.open=dr.prototype.m,dr.prototype.close=dr.prototype.close,WT=function(){return new Yu},zT=function(){return On()},GT=Yn,h0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vo.NO_ERROR=0,vo.TIMEOUT=8,vo.HTTP_ERROR=6,ih=vo,Mu.COMPLETE="complete",KT=Mu,Je.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",We.prototype.listen=We.prototype.K,Ol=Je,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,jT=Pt}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const dC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new $f("@firebase/firestore");function No(){return $A.logLevel}function pD(t){$A.setLogLevel(t)}function X(t,...e){if($A.logLevel<=Xe.DEBUG){const n=e.map(wv);$A.debug(`Firestore (${za}): ${t}`,...n)}}function Wt(t,...e){if($A.logLevel<=Xe.ERROR){const n=e.map(wv);$A.error(`Firestore (${za}): ${t}`,...n)}}function ws(t,...e){if($A.logLevel<=Xe.WARN){const n=e.map(wv);$A.warn(`Firestore (${za}): ${t}`,...n)}}function wv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t="Unexpected state"){const e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw Wt(e),new Error(e)}function Fe(t,e){t||ye()}function mD(t,e){t||ye()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class vD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yD{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let r=this.i;const s=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let A=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new _n,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const a=A;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},o=a=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new _n)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new $T(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new fn(e)}}class BD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new BD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _D{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const r=A=>{A.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,X("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>r(A))};const s=A=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new CD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ID(40);for(let A=0;A<s.length;++A)r.length<20&&s[A]<n&&(r+=e.charAt(s[A]%e.length))}return r}}function He(t,e){return t<e?-1:t>e?1:0}function Ia(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function JT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Ft(0,0))}static max(){return new Ue(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(),r===void 0?r=e.length-n:r>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const A=e.get(s),i=n.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends Kc{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new et(n)}static emptyPath(){return new et([])}}const ED=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Kc{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return ED.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const A=()=>{if(r.length===0)throw new J(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new J(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new J(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(A(),s++)}if(A(),i)throw new J(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(et.fromString(e))}static fromName(e){return new le(et.fromString(e).popFirst(5))}static empty(){return new le(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function f0(t){return t.fields.find(e=>e.kind===2)}function xi(t){return t.fields.filter(e=>e.kind!==2)}Yh.UNKNOWN_ID=-1;class oh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Gc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Gc(0,Cr.min())}}function XT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new Cr(s,le.empty(),e)}function YT(t){return new Cr(t.readTime,t.key,-1)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(Ue.min(),le.empty(),-1)}static max(){return new Cr(Ue.max(),le.empty(),-1)}}function vv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ai(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==ZT)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(r,s)},this.catchCallback=A=>{this.wrapFailure(n,A).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,A=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++A,i&&A===s&&n()},a=>r(a))}),i=!0,A===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,A)=>{r.push(n.call(this,s,A))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const A=e.length,i=new Array(A);let o=0;for(let a=0;a<A;a++){const c=a;n(e[c]).next(d=>{i[c]=d,++o,o===A&&r(i)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const A=()=>{e()===!0?n().next(()=>{A()},s):r()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new _n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new oc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=yv(r.target.error);this.V.reject(new oc(e,s))}}static open(e,n,r,s){try{return new qf(n,e.transaction(s,r))}catch(A){throw new oc(n,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(X("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new TD(n)}}class gs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,gs.S(Nt())===12.2&&Wt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return X("SimpleDb","Removing database:",e),Ci(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Mc())return!1;if(gs.v())return!0;const e=Nt(),n=gs.S(e),r=0<n&&n<10,s=tF(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(X("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;n(i)},s.onblocked=()=>{r(new oc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?r(new J(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new J(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new oc(e,i))},s.onupgradeneeded=A=>{X("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{X("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const A=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=qf.open(this.db,e,A?"readonly":"readwrite",r),a=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,c=a.name!=="FirebaseError"&&i<3;if(X("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class bD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ci(this.B.delete())}}class oc extends J{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function li(t){return t.name==="IndexedDbTransactionError"}class TD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(X("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(X("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ci(r)}add(e){return X("SimpleDb","ADD",this.store.name,e,e),Ci(this.store.add(e))}get(e){return Ci(this.store.get(e)).next(n=>(n===void 0&&(n=null),X("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return X("SimpleDb","DELETE",this.store.name,e),Ci(this.store.delete(e))}count(){return X("SimpleDb","COUNT",this.store.name),Ci(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(r.range);return new M((i,o)=>{A.onerror=a=>{o(a.target.error)},A.onsuccess=a=>{i(a.target.result)}})}{const A=this.cursor(r),i=[];return this.W(A,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,A)=>{r.onerror=i=>{A(i.target.error)},r.onsuccess=i=>{s(i.target.result)}})}j(e,n){X("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(A,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=A=>{const i=yv(A.target.error);s(i)},n.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new M((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void s();const a=new bD(o),c=n(o.primaryKey,o.value,a);if(c instanceof M){const d=c.catch(h=>(a.done(),M.reject(h)));r.push(d)}a.isDone?s():a.K===null?o.continue():o.continue(a.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ci(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=yv(r.target.error);n(s)}})}let hC=!1;function yv(t){const e=gs.S(Nt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hC||(hC=!0,setTimeout(()=>{throw r},0)),r}}return t}class FD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){X("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{X("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){li(n)?X("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ai(n)}await this.X(6e4)})}}class UD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,A=!0;return M.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return X("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(o=>{s-=o,r.add(i)});A=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(o=>(X("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((s,A)=>{const i=YT(A);vv(i,r)>0&&(r=i)}),new Cr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ar.oe=-1;function wu(t){return t==null}function zc(t){return t===0&&1/t==-1/0}function nF(t){return typeof t=="number"&&Number.isInteger(t)&&!zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fC(e)),e=SD(t.get(n),e);return fC(e)}function SD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const A=t.charAt(s);switch(A){case"\0":n+="";break;case"":n+="";break;default:n+=A}}return n}function fC(t){return t+""}function cs(t){const e=t.length;if(Fe(e>=2),e===2)return Fe(t.charAt(0)===""&&t.charAt(1)===""),et.emptyPath();const n=e-2,r=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>n)&&ye(),t.charAt(i+1)){case"":const o=t.substring(A,i);let a;s.length===0?a=o:(s+=o,a=s,s=""),r.push(a);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:ye()}A=i+2}return new et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t,e){return[t,zn(e)]}function rF(t,e,n){return[t,zn(e),n]}const QD={},kD=["prefixPath","collectionGroup","readTime","documentId"],RD=["prefixPath","collectionGroup","documentId"],ND=["collectionGroup","readTime","prefixPath","documentId"],PD=["canonicalId","targetId"],DD=["targetId","path"],LD=["path","targetId"],OD=["collectionId","parent"],MD=["indexId","uid"],VD=["uid","sequenceNumber"],HD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jD=["indexId","uid","orderedDocumentKey"],KD=["userId","collectionPath","documentId"],GD=["userId","collectionPath","largestBatchId"],zD=["userId","collectionGroup","largestBatchId"],sF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WD=[...sF,"documentOverlays"],AF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iF=AF,Bv=[...iF,"indexConfiguration","indexState","indexEntries"],$D=Bv,qD=[...Bv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends eF{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function an(t,e){const n=ue(t);return gs.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wd(this.root,e,this.comparator,!0)}}class wd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=n?r(e.key,n):1,n&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,r,s,A){this.key=e,this.value=n,this.color=r??yn.RED,this.left=s??yn.EMPTY,this.right=A??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,A){return new yn(e??this.key,n??this.value,r??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const A=r(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,n,r),null):A===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,r,s,A){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _o(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new ir([])}unionWith(e){let n=new ft(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ir(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new aF("Invalid base64 string: "+A):A}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const XD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(t){if(Fe(!!t),typeof t=="string"){let e=0;const n=XD.exec(t);if(Fe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qA(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xv(t){const e=t.mapValue.fields.__previous_value__;return Jf(e)?xv(e):e}function Wc(t){const e=Gs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,r,s,A,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class JA{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new JA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof JA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lh={nullValue:"NULL_VALUE"};function qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jf(t)?4:lF(t)?9007199254740991:Xf(t)?10:11:ye()}function vs(t,e){if(t===e)return!0;const n=qi(t);if(n!==qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wc(t).isEqual(Wc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=Gs(s.timestampValue),o=Gs(A.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return qA(s.bytesValue).isEqual(qA(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return It(s.geoPointValue.latitude)===It(A.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return It(s.integerValue)===It(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=It(s.doubleValue),o=It(A.doubleValue);return i===o?zc(i)===zc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ia(t.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},o=A.mapValue.fields||{};if(pC(i)!==pC(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!vs(i[a],o[a])))return!1;return!0}(t,e);default:return ye()}}function $c(t,e){return(t.values||[]).find(n=>vs(n,e))!==void 0}function XA(t,e){if(t===e)return 0;const n=qi(t),r=qi(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(A,i){const o=It(A.integerValue||A.doubleValue),a=It(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return wC(t.timestampValue,e.timestampValue);case 4:return wC(Wc(t),Wc(e));case 5:return He(t.stringValue,e.stringValue);case 6:return function(A,i){const o=qA(A),a=qA(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const o=A.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const d=He(o[c],a[c]);if(d!==0)return d}return He(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const o=He(It(A.latitude),It(i.latitude));return o!==0?o:He(It(A.longitude),It(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vC(t.arrayValue,e.arrayValue);case 10:return function(A,i){var o,a,c,d;const h=A.fields||{},f=i.fields||{},m=(o=h.value)===null||o===void 0?void 0:o.arrayValue,v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=He(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:vC(m,v)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===_A.mapValue&&i===_A.mapValue)return 0;if(A===_A.mapValue)return 1;if(i===_A.mapValue)return-1;const o=A.fields||{},a=Object.keys(o),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=He(a[h],d[h]);if(f!==0)return f;const m=XA(o[a[h]],c[d[h]]);if(m!==0)return m}return He(a.length,d.length)}(t.mapValue,e.mapValue);default:throw ye()}}function wC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=Gs(t),r=Gs(e),s=He(n.seconds,r.seconds);return s!==0?s:He(n.nanos,r.nanos)}function vC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const A=XA(n[s],r[s]);if(A)return A}return He(n.length,r.length)}function Ea(t){return p0(t)}function p0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qA(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const A of n.values||[])s?s=!1:r+=",",r+=p0(A);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",A=!0;for(const i of r)A?A=!1:s+=",",s+=`${i}:${p0(n.fields[i])}`;return s+"}"}(t.mapValue):ye()}function Ji(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function m0(t){return!!t&&"integerValue"in t}function qc(t){return!!t&&"arrayValue"in t}function yC(t){return!!t&&"nullValue"in t}function BC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ch(t){return!!t&&"mapValue"in t}function Xf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ac(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ho(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ac(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ac(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const cF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function ZD(t){return"nullValue"in t?lh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ji(JA.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Xf(t)?cF:{mapValue:{}}:ye()}function e4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ji(JA.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?cF:"mapValue"in t?Xf(t)?{mapValue:{}}:_A:ye()}function xC(t,e){const n=XA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function CC(t,e){const n=XA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(n)}setAll(e){let n=bt.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=ac(i):s.push(o.lastSegment())});const A=this.getFieldsMap(n);this.applyChanges(A,r,s)}delete(e){const n=this.field(e.popLast());ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ch(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ho(n,(s,A)=>e[s]=A);for(const s of r)delete e[s]}clone(){return new Bn(ac(this.value))}}function uF(t){const e=[];return ho(t.fields,(n,r)=>{const s=new bt([n]);if(ch(r)){const A=uF(r.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,s,A,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=A,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Bt(e,0,Ue.min(),Ue.min(),Ue.min(),Bn.empty(),0)}static newFoundDocument(e,n,r,s){return new Bt(e,1,n,Ue.min(),r,s,0)}static newNoDocument(e,n){return new Bt(e,2,n,Ue.min(),Ue.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,Ue.min(),Ue.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.position=e,this.inclusive=n}}function _C(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?r=le.comparator(le.fromName(i.referenceValue),n.key):r=XA(i,n.data.field(A.field)),A.dir==="desc"&&(r*=-1),r!==0)break}return r}function IC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n="asc"){this.field=e,this.dir=n}}function t4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{}class tt extends dF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new n4(e,n,r):n==="array-contains"?new A4(e,r):n==="in"?new wF(e,r):n==="not-in"?new i4(e,r):n==="array-contains-any"?new o4(e,r):new tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new r4(e,r):new s4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(XA(n,this.value)):n!==null&&qi(this.value)===qi(n)&&this.matchesComparison(XA(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ut extends dF{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ut(e,n)}matches(e){return ba(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ba(t){return t.op==="and"}function w0(t){return t.op==="or"}function Cv(t){return hF(t)&&ba(t)}function hF(t){for(const e of t.filters)if(e instanceof ut)return!1;return!0}function v0(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+Ea(t.value);if(Cv(t))return t.filters.map(e=>v0(e)).join(",");{const e=t.filters.map(n=>v0(n)).join(",");return`${t.op}(${e})`}}function fF(t,e){return t instanceof tt?function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&vs(r.value,s.value)}(t,e):t instanceof ut?function(r,s){return s instanceof ut&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((A,i,o)=>A&&fF(i,s.filters[o]),!0):!1}(t,e):void ye()}function gF(t,e){const n=t.filters.concat(e);return ut.create(n,t.op)}function pF(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ea(n.value)}`}(t):t instanceof ut?function(n){return n.op.toString()+" {"+n.getFilters().map(pF).join(" ,")+"}"}(t):"Filter"}class n4 extends tt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class r4 extends tt{constructor(e,n){super(e,"in",n),this.keys=mF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class s4 extends tt{constructor(e,n){super(e,"not-in",n),this.keys=mF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class A4 extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qc(n)&&$c(n.arrayValue,this.value)}}class wF extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$c(this.value.arrayValue,n)}}class i4 extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$c(this.value.arrayValue,n)}}class o4 extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$c(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n=null,r=[],s=[],A=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=A,this.startAt=i,this.endAt=o,this.ue=null}}function y0(t,e=null,n=[],r=[],s=null,A=null,i=null){return new a4(t,e,n,r,s,A,i)}function Xi(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>v0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(A){return A.field.canonicalString()+A.dir}(r)).join(","),wu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ea(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ea(r)).join(",")),e.ue=n}return e.ue}function vu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IC(t.startAt,e.startAt)&&IC(t.endAt,e.endAt)}function Zh(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ef(t,e){return t.filters.filter(n=>n instanceof tt&&n.field.isEqual(e))}function EC(t,e,n){let r=lh,s=!0;for(const A of ef(t,e)){let i=lh,o=!0;switch(A.op){case"<":case"<=":i=ZD(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,o=!1;break;case"!=":case"not-in":i=lh}xC({value:r,inclusive:s},{value:i,inclusive:o})<0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];xC({value:r,inclusive:s},{value:i,inclusive:n.inclusive})<0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}function bC(t,e,n){let r=_A,s=!0;for(const A of ef(t,e)){let i=_A,o=!0;switch(A.op){case">=":case">":i=e4(A.value),o=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,o=!1;break;case"!=":case"not-in":i=_A}CC({value:r,inclusive:s},{value:i,inclusive:o})>0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];CC({value:r,inclusive:s},{value:i,inclusive:n.inclusive})>0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n=null,r=[],s=[],A=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=A,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vF(t,e,n,r,s,A,i,o){return new Ys(t,e,n,r,s,A,i,o)}function Wa(t){return new Ys(t)}function TC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _v(t){return t.collectionGroup!==null}function aa(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),n.add(A.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new ft(bt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(A=>{n.has(A.canonicalString())||A.isKeyField()||e.ce.push(new Jc(A,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new Jc(bt.keyField(),r))}return e.ce}function Wn(t){const e=ue(t);return e.le||(e.le=l4(e,aa(t))),e.le}function l4(t,e){if(t.limitType==="F")return y0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new Jc(s.field,A)});const n=t.endAt?new YA(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new YA(t.startAt.position,t.startAt.inclusive):null;return y0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function B0(t,e){const n=t.filters.concat([e]);return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tf(t,e,n){return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yu(t,e){return vu(Wn(t),Wn(e))&&t.limitType===e.limitType}function yF(t){return`${Xi(Wn(t))}|lt:${t.limitType}`}function Po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>pF(s)).join(", ")}]`),wu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ea(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ea(s)).join(",")),`Target(${r})`}(Wn(t))}; limitType=${t.limitType})`}function Bu(t,e){return e.isFoundDocument()&&function(r,s){const A=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(A):le.isDocumentKey(r.path)?r.path.isEqual(A):r.path.isImmediateParentOf(A)}(t,e)&&function(r,s){for(const A of aa(r))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const A of r.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,a){const c=_C(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,aa(r),s)||r.endAt&&!function(i,o,a){const c=_C(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,aa(r),s))}(t,e)}function BF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xF(t){return(e,n)=>{let r=!1;for(const s of aa(t)){const A=c4(s,e,n);if(A!==0)return A;r=r||s.field.isKeyField()}return 0}}function c4(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(A,i,o){const a=i.data.field(A),c=o.data.field(A);return a!==null&&c!==null?XA(a,c):ye()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,A]of r)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(n,r)=>{for(const[s,A]of r)e(s,A)})}isEmpty(){return oF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=new wt(le.comparator);function or(){return u4}const CF=new wt(le.comparator);function Ml(...t){let e=CF;for(const n of t)e=e.insert(n.key,n);return e}function _F(t){let e=CF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function us(){return lc()}function IF(){return lc()}function lc(){return new ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const d4=new wt(le.comparator),h4=new ft(le.comparator);function je(...t){let e=h4;for(const n of t)e=e.add(n);return e}const f4=new ft(He);function Iv(){return f4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function EF(t){return{integerValue:""+t}}function bF(t,e){return nF(e)?EF(e):Ev(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this._=void 0}}function g4(t,e,n){return t instanceof Ta?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&Jf(A)&&(A=xv(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(n,e):t instanceof Yi?FF(t,e):t instanceof Zi?UF(t,e):function(s,A){const i=TF(s,A),o=FC(i)+FC(s.Pe);return m0(i)&&m0(s.Pe)?EF(o):Ev(s.serializer,o)}(t,e)}function p4(t,e,n){return t instanceof Yi?FF(t,e):t instanceof Zi?UF(t,e):n}function TF(t,e){return t instanceof Fa?function(r){return m0(r)||function(A){return!!A&&"doubleValue"in A}(r)}(e)?e:{integerValue:0}:null}class Ta extends Yf{}class Yi extends Yf{constructor(e){super(),this.elements=e}}function FF(t,e){const n=SF(e);for(const r of t.elements)n.some(s=>vs(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zi extends Yf{constructor(e){super(),this.elements=e}}function UF(t,e){let n=SF(e);for(const r of t.elements)n=n.filter(s=>!vs(s,r));return{arrayValue:{values:n}}}class Fa extends Yf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function FC(t){return It(t.integerValue||t.doubleValue)}function SF(t){return qc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.field=e,this.transform=n}}function m4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Yi&&s instanceof Yi||r instanceof Zi&&s instanceof Zi?Ia(r.elements,s.elements,vs):r instanceof Fa&&s instanceof Fa?vs(r.Pe,s.Pe):r instanceof Ta&&s instanceof Ta}(t.transform,e.transform)}class w4{constructor(e,n){this.version=e,this.transformResults=n}}class Tt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tt}static exists(e){return new Tt(void 0,e)}static updateTime(e){return new Tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zf{}function QF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qa(t.key,Tt.none()):new $a(t.key,t.data,Tt.none());{const n=t.data,r=Bn.empty();let s=new ft(bt.comparator);for(let A of e.fields)if(!s.has(A)){let i=n.field(A);i===null&&A.length>1&&(A=A.popLast(),i=n.field(A)),i===null?r.delete(A):r.set(A,i),s=s.add(A)}return new Zs(t.key,r,new ir(s.toArray()),Tt.none())}}function v4(t,e,n){t instanceof $a?function(s,A,i){const o=s.value.clone(),a=SC(s.fieldTransforms,A,i.transformResults);o.setAll(a),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Zs?function(s,A,i){if(!uh(s.precondition,A))return void A.convertToUnknownDocument(i.version);const o=SC(s.fieldTransforms,A,i.transformResults),a=A.data;a.setAll(kF(s)),a.setAll(o),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function cc(t,e,n,r){return t instanceof $a?function(A,i,o,a){if(!uh(A.precondition,i))return o;const c=A.value.clone(),d=QC(A.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zs?function(A,i,o,a){if(!uh(A.precondition,i))return o;const c=QC(A.fieldTransforms,a,i),d=i.data;return d.setAll(kF(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(A,i,o){return uh(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function y4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),A=TF(r.transform,s||null);A!=null&&(n===null&&(n=Bn.empty()),n.set(r.field,A))}return n||null}function UC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ia(r,s,(A,i)=>m4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $a extends Zf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zs extends Zf{constructor(e,n,r,s,A=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function kF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function SC(t,e,n){const r=new Map;Fe(t.length===n.length);for(let s=0;s<n.length;s++){const A=t[s],i=A.transform,o=e.data.field(A.field);r.set(A.field,p4(i,o,n[s]))}return r}function QC(t,e,n){const r=new Map;for(const s of t){const A=s.transform,i=n.data.field(s.field);r.set(s.field,g4(A,i,e))}return r}class qa extends Zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bv extends Zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&v4(A,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=IF();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let o=this.applyToLocalView(i,A.mutatedFields);o=n.has(s.key)?null:o;const a=QF(i,o);a!==null&&r.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(n,r)=>UC(n,r))&&Ia(this.baseMutations,e.baseMutations,(n,r)=>UC(n,r))}}class Fv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Fe(e.mutations.length===r.length);let s=function(){return d4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,r[i].version);return new Fv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,nt;function RF(t){switch(t){default:return ye();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function NF(t){if(t===void 0)return Wt("GRPC error has no .code"),H.UNKNOWN;switch(t){case Jt.OK:return H.OK;case Jt.CANCELLED:return H.CANCELLED;case Jt.UNKNOWN:return H.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return H.INTERNAL;case Jt.UNAVAILABLE:return H.UNAVAILABLE;case Jt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Jt.NOT_FOUND:return H.NOT_FOUND;case Jt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Jt.ABORTED:return H.ABORTED;case Jt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Jt.DATA_LOSS:return H.DATA_LOSS;default:return ye()}}(nt=Jt||(Jt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=new Oi([4294967295,4294967295],0);function kC(t){const e=PF().encode(t),n=new HT;return n.update(e),new Uint8Array(n.digest())}function RC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new Oi([n,r],0),new Oi([s,A],0)]}class Sv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(r<0)throw new Vl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Oi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Oi.fromNumber(r)));return s.compare(x4)===1&&(s=new Oi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=kC(e),[r,s]=RC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);if(!this.de(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new Sv(A,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=kC(e),[r,s]=RC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r,s,A){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cu(Ue.min(),s,new wt(He),or(),je())}}class _u{constructor(e,n,r,s,A){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _u(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class DF{constructor(e,n){this.targetId=e,this.me=n}}class LF{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class NC{constructor(){this.fe=0,this.ge=DC(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=je(),n=je(),r=je();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ye()}}),new _u(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=DC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class C4{constructor(e){this.Le=e,this.Be=new Map,this.ke=or(),this.qe=PC(),this.Qe=new wt(He)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const A=s.target;if(Zh(A))if(r===0){const i=new le(A.path);this.Ue(n,i,Bt.newNoDocument(i,Ue.min()))}else Fe(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:A=0}=n;let i,o;try{i=qA(r).toUint8Array()}catch(a){if(a instanceof aF)return ws("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Sv(i,s,A)}catch(a){return ws(a instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(A=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,A,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((A,i)=>{const o=this.Je(i);if(o){if(A.current&&Zh(o.target)){const a=new le(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,Bt.newNoDocument(a,e))}A.be&&(n.set(i,A.ve()),A.Ce())}});let r=je();this.qe.forEach((A,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new Cu(e,n,this.Qe,this.ke,r);return this.ke=or(),this.qe=PC(),this.Qe=new wt(He),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new NC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(He),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new NC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function PC(){return new wt(le.comparator)}function DC(){return new wt(le.comparator)}const _4={asc:"ASCENDING",desc:"DESCENDING"},I4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E4={and:"AND",or:"OR"};class b4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function x0(t,e){return t.useProto3Json||wu(e)?e:{value:e}}function Ua(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T4(t,e){return Ua(t,e.toTimestamp())}function $t(t){return Fe(!!t),Ue.fromTimestamp(function(n){const r=Gs(n);return new Ft(r.seconds,r.nanos)}(t))}function Qv(t,e){return C0(t,e).canonicalString()}function C0(t,e){const n=function(s){return new et(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MF(t){const e=et.fromString(t);return Fe(JF(e)),e}function Xc(t,e){return Qv(t.databaseId,e.path)}function ps(t,e){const n=MF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(jF(n))}function VF(t,e){return Qv(t.databaseId,e)}function HF(t){const e=MF(t);return e.length===4?et.emptyPath():jF(e)}function _0(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jF(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LC(t,e,n){return{name:Xc(t,e),fields:n.value.mapValue.fields}}function KF(t,e,n){const r=ps(t,e.name),s=$t(e.updateTime),A=e.createTime?$t(e.createTime):Ue.min(),i=new Bn({mapValue:{fields:e.fields}}),o=Bt.newFoundDocument(r,s,A,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function F4(t,e){return"found"in e?function(r,s){Fe(!!s.found),s.found.name,s.found.updateTime;const A=ps(r,s.found.name),i=$t(s.found.updateTime),o=s.found.createTime?$t(s.found.createTime):Ue.min(),a=new Bn({mapValue:{fields:s.found.fields}});return Bt.newFoundDocument(A,i,o,a)}(t,e):"missing"in e?function(r,s){Fe(!!s.missing),Fe(!!s.readTime);const A=ps(r,s.missing),i=$t(s.readTime);return Bt.newNoDocument(A,i)}(t,e):ye()}function U4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(Fe(d===void 0||typeof d=="string"),Ot.fromBase64String(d||"")):(Fe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?H.UNKNOWN:NF(c.code);return new J(d,c.message||"")}(i);n=new LF(r,s,A,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ps(t,r.document.name),A=$t(r.document.updateTime),i=r.document.createTime?$t(r.document.createTime):Ue.min(),o=new Bn({mapValue:{fields:r.document.fields}}),a=Bt.newFoundDocument(s,A,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new dh(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ps(t,r.document),A=r.readTime?$t(r.readTime):Ue.min(),i=Bt.newNoDocument(s,A),o=r.removedTargetIds||[];n=new dh([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ps(t,r.document),A=r.removedTargetIds||[];n=new dh([],A,s,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:A}=r,i=new B4(s,A),o=r.targetId;n=new DF(o,i)}}return n}function Yc(t,e){let n;if(e instanceof $a)n={update:LC(t,e.key,e.value)};else if(e instanceof qa)n={delete:Xc(t,e.key)};else if(e instanceof Zs)n={update:LC(t,e.key,e.data),updateMask:P4(e.fieldMask)};else{if(!(e instanceof bv))return ye();n={verify:Xc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(A,i){const o=i.transform;if(o instanceof Ta)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Yi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Zi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Fa)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw ye()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:T4(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:ye()}(t,e.precondition)),n}function I0(t,e){const n=e.currentDocument?function(A){return A.updateTime!==void 0?Tt.updateTime($t(A.updateTime)):A.exists!==void 0?Tt.exists(A.exists):Tt.none()}(e.currentDocument):Tt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)Fe(o.setToServerValue==="REQUEST_TIME"),a=new Ta;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new Yi(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new Zi(d)}else"increment"in o?a=new Fa(i,o.increment):ye();const c=bt.fromServerFormat(o.fieldPath);return new xu(c,a)}(t,s)):[];if(e.update){e.update.name;const s=ps(t,e.update.name),A=new Bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new ir(c.map(d=>bt.fromServerFormat(d)))}(e.updateMask);return new Zs(s,A,i,n,r)}return new $a(s,A,n,r)}if(e.delete){const s=ps(t,e.delete);return new qa(s,n)}if(e.verify){const s=ps(t,e.verify);return new bv(s,n)}return ye()}function S4(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(s,A){let i=s.updateTime?$t(s.updateTime):$t(A);return i.isEqual(Ue.min())&&(i=$t(A)),new w4(i,s.transformResults||[])}(n,e))):[]}function GF(t,e){return{documents:[VF(t,e.path)]}}function zF(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VF(t,s);const A=function(c){if(c.length!==0)return qF(ut.create(c,"and"))}(e.filters);A&&(n.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Do(f.field),direction:k4(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=x0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function WF(t){let e=HF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Fe(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];n.where&&(A=function(h){const f=$F(h);return f instanceof ut&&Cv(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(v){return new Jc(Lo(v.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,wu(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,m=h.values||[];return new YA(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new YA(m,f)}(n.endAt)),vF(e,s,i,A,o,"F",a,c)}function Q4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $F(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lo(n.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Lo(n.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=Lo(n.unaryFilter.field);return tt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Lo(n.unaryFilter.field);return tt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):t.fieldFilter!==void 0?function(n){return tt.create(Lo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ut.create(n.compositeFilter.filters.map(r=>$F(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye()}function k4(t){return _4[t]}function R4(t){return I4[t]}function N4(t){return E4[t]}function Do(t){return{fieldPath:t.canonicalString()}}function Lo(t){return bt.fromServerFormat(t.fieldPath)}function qF(t){return t instanceof tt?function(n){if(n.op==="=="){if(BC(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NAN"}};if(yC(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BC(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NOT_NAN"}};if(yC(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(n.field),op:R4(n.op),value:n.value}}}(t):t instanceof ut?function(n){const r=n.getFilters().map(s=>qF(s));return r.length===1?r[0]:{compositeFilter:{op:N4(n.op),filters:r}}}(t):ye()}function P4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r,s,A=Ue.min(),i=Ue.min(),o=Ot.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.ct=e}}function D4(t,e){let n;if(e.document)n=KF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),s=to(e.noDocument.readTime);n=Bt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=le.fromSegments(e.unknownDocument.path),s=to(e.unknownDocument.version);n=Bt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const A=new Ft(s[0],s[1]);return Ue.fromTimestamp(A)}(e.readTime)),n}function OC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(A,i){return{name:Xc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:Ua(A,i.version.toTimestamp()),createTime:Ua(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:eo(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:n.path.toArray(),version:eo(e.version)}}return r}function nf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function eo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function to(t){const e=new Ft(t.seconds,t.nanoseconds);return Ue.fromTimestamp(e)}function _i(t,e){const n=(e.baseMutations||[]).map(A=>I0(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const o=e.mutations[A+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const r=e.mutations.map(A=>I0(t.ct,A)),s=Ft.fromMillis(e.localWriteTimeMs);return new Tv(e.batchId,s,n,r)}function Hl(t){const e=to(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?to(t.lastLimboFreeSnapshotVersion):Ue.min();let r;return r=function(A){return A.documents!==void 0}(t.query)?function(A){return Fe(A.documents.length===1),Wn(Wa(HF(A.documents[0])))}(t.query):function(A){return Wn(WF(A))}(t.query),new Qs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ot.fromBase64String(t.resumeToken))}function YF(t,e){const n=eo(e.snapshotVersion),r=eo(e.lastLimboFreeSnapshotVersion);let s;s=Zh(e.target)?GF(t.ct,e.target):zF(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xi(e.target),readTime:n,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function kv(t){const e=WF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tf(e,e.limit,"L"):e}function Fp(t,e){return new Uv(e.largestBatchId,I0(t.ct,e.overlayMutation))}function MC(t,e){const n=e.path.lastSegment();return[t,zn(e.path.popLast()),n]}function VC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:eo(r.readTime),documentKey:zn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{getBundleMetadata(e,n){return HC(e).get(n).next(r=>{if(r)return function(A){return{id:A.bundleId,createTime:to(A.createTime),version:A.version}}(r)})}saveBundleMetadata(e,n){return HC(e).put(function(s){return{bundleId:s.id,createTime:eo($t(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return jC(e).get(n).next(r=>{if(r)return function(A){return{name:A.name,query:kv(A.bundledQuery),readTime:to(A.readTime)}}(r)})}saveNamedQuery(e,n){return jC(e).put(function(s){return{name:s.name,readTime:eo($t(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function HC(t){return an(t,"bundles")}function jC(t){return an(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new eg(e,r)}getOverlay(e,n){return xl(e).get(MC(this.userId,n)).next(r=>r?Fp(this.serializer,r):null)}getOverlays(e,n){const r=us();return M.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((A,i)=>{const o=new Uv(n,i);s.push(this.ht(e,o))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(i=>s.add(zn(i.getCollectionPath())));const A=[];return s.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);A.push(xl(e).j("collectionPathOverlayIndex",o))}),M.waitFor(A)}getOverlaysForCollection(e,n,r){const s=us(),A=zn(n),i=IDBKeyRange.bound([this.userId,A,r],[this.userId,A,Number.POSITIVE_INFINITY],!0);return xl(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const c=Fp(this.serializer,a);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const A=us();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xl(e).J({index:"collectionGroupOverlayIndex",range:o},(a,c,d)=>{const h=Fp(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,n){return xl(e).put(function(s,A,i){const[o,a,c]=MC(A,i.mutation.key);return{userId:A,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Yc(s.ct,i.mutation)}}(this.serializer,this.userId,n))}}function xl(t){return an(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{Pt(e){return an(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Ot.fromUint8Array(r):Ot.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(It(e.integerValue));else if("doubleValue"in e){const r=It(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),zc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Gs(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(qA(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?lF(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Xf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ye()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const A=e.fields||{};this.dt(n,53);const i="value",o=((s=(r=A[i].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(It(o)),this.Vt(i,n),this.Tt(A[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),le.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ii.vt=new Ii;function M4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function KC(t){const e=64-function(r){let s=0;for(let A=0;A<8;++A){const i=M4(255&r[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class V4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=KC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=KC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class H4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class j4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Cl{constructor(){this.jt=new V4,this.Ht=new H4(this.jt),this.Jt=new j4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ei(this.indexId,this.documentKey,this.arrayValue,r)}}function aA(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=GC(t.arrayValue,e.arrayValue),n!==0?n:(n=GC(t.directionalValue,e.directionalValue),n!==0?n:le.comparator(t.documentKey,e.documentKey)))}function GC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.Xt=new ft((n,r)=>bt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Fe(e.collectionGroup===this.collectionId),this.nn)return!1;const n=f0(e);if(n!==void 0&&!this.sn(n))return!1;const r=xi(e);let s=new Set,A=0,i=0;for(;A<r.length&&this.sn(r[A]);++A)s=s.add(r[A].fieldPath.canonicalString());if(A===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const a=r[A];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++A}for(;A<r.length;++A){const o=r[A];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new ft(bt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new oh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new oh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new oh(r.field,r.dir==="asc"?0:1)));return new Yh(Yh.UNKNOWN_ID,this.collectionId,n,Gc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){var e,n;if(Fe(t instanceof tt||t instanceof ut),t instanceof tt){if(t instanceof wF){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(A=>tt.create(t.field,"==",A)))||[];return ut.create(s,"or")}return t}const r=t.filters.map(s=>ZF(s));return ut.create(r,t.op)}function K4(t){if(t.getFilters().length===0)return[];const e=T0(ZF(t));return Fe(e1(e)),E0(e)||b0(e)?[e]:e.getFilters()}function E0(t){return t instanceof tt}function b0(t){return t instanceof ut&&Cv(t)}function e1(t){return E0(t)||b0(t)||function(n){if(n instanceof ut&&w0(n)){for(const r of n.getFilters())if(!E0(r)&&!b0(r))return!1;return!0}return!1}(t)}function T0(t){if(Fe(t instanceof tt||t instanceof ut),t instanceof tt)return t;if(t.filters.length===1)return T0(t.filters[0]);const e=t.filters.map(r=>T0(r));let n=ut.create(e,t.op);return n=rf(n),e1(n)?n:(Fe(n instanceof ut),Fe(ba(n)),Fe(n.filters.length>1),n.filters.reduce((r,s)=>Rv(r,s)))}function Rv(t,e){let n;return Fe(t instanceof tt||t instanceof ut),Fe(e instanceof tt||e instanceof ut),n=t instanceof tt?e instanceof tt?function(s,A){return ut.create([s,A],"and")}(t,e):WC(t,e):e instanceof tt?WC(e,t):function(s,A){if(Fe(s.filters.length>0&&A.filters.length>0),ba(s)&&ba(A))return gF(s,A.getFilters());const i=w0(s)?s:A,o=w0(s)?A:s,a=i.filters.map(c=>Rv(c,o));return ut.create(a,"or")}(t,e),rf(n)}function WC(t,e){if(ba(e))return gF(e,t.getFilters());{const n=e.filters.map(r=>Rv(t,r));return ut.create(n,"or")}}function rf(t){if(Fe(t instanceof tt||t instanceof ut),t instanceof tt)return t;const e=t.getFilters();if(e.length===1)return rf(e[0]);if(hF(t))return t;const n=e.map(s=>rf(s)),r=[];return n.forEach(s=>{s instanceof tt?r.push(s):s instanceof ut&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ut.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.un=new Nv}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Cr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Nv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ft(et.comparator),A=!s.has(r);return this.index[n]=s.add(r),A}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ft(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Uint8Array(0);class z4{constructor(e,n){this.databaseId=n,this.cn=new Nv,this.ln=new ci(r=>Xi(r),(r,s)=>vu(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const A={collectionId:r,parent:zn(s)};return $C(e).put(A)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[JT(n),""],!1,!0);return $C(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==n)break;r.push(cs(i.parent))}return r})}addFieldIndex(e,n){const r=_l(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const A=r.add(s);if(n.indexState){const i=Eo(e);return A.next(o=>{i.put(VC(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return A.next()}deleteFieldIndex(e,n){const r=_l(e),s=Eo(e),A=Io(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=_l(e),r=Io(e),s=Eo(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const A=new zC(r).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,n){const r=Io(e);let s=!0;const A=new Map;return M.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{s&&(s=!!o),A.set(i,o)})).next(()=>{if(s){let i=je();const o=[];return M.forEach(A,(a,c)=>{X("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(a)} to execute ${Xi(n)}`);const d=function(_,S){const U=f0(S);if(U===void 0)return null;for(const N of ef(_,U.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,a),h=function(_,S){const U=new Map;for(const N of xi(S))for(const B of ef(_,N.fieldPath))switch(B.op){case"==":case"in":U.set(N.fieldPath.canonicalString(),B.value);break;case"not-in":case"!=":return U.set(N.fieldPath.canonicalString(),B.value),Array.from(U.values())}return null}(c,a),f=function(_,S){const U=[];let N=!0;for(const B of xi(S)){const x=B.kind===0?EC(_,B.fieldPath,_.startAt):bC(_,B.fieldPath,_.startAt);U.push(x.value),N&&(N=x.inclusive)}return new YA(U,N)}(c,a),m=function(_,S){const U=[];let N=!0;for(const B of xi(S)){const x=B.kind===0?bC(_,B.fieldPath,_.endAt):EC(_,B.fieldPath,_.endAt);U.push(x.value),N&&(N=x.inclusive)}return new YA(U,N)}(c,a),v=this.In(a,c,f),y=this.In(a,c,m),T=this.Tn(a,c,h),C=this.En(a.indexId,d,v,f.inclusive,y,m.inclusive,T);return M.forEach(C,w=>r.G(w,n.limit).next(_=>{_.forEach(S=>{const U=le.fromSegments(S.documentKey);i.has(U)||(i=i.add(U),o.push(U))})}))}).next(()=>o)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=K4(ut.create(e.filters,"and")).map(r=>y0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,A,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,A.length),c=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/c]):vd,m=this.An(e,f,r[h%c],s),v=this.Rn(e,f,A[h%c],i),y=o.map(T=>this.An(e,f,T,!0));d.push(...this.createRange(m,v,y))}return d}An(e,n,r,s){const A=new Ei(e,le.empty(),n,r);return s?A:A.Zt()}Rn(e,n,r,s){const A=new Ei(e,le.empty(),n,r);return s?A.Zt():A}Pn(e,n){const r=new zC(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const o of A)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const s=this.hn(n);return M.forEach(s,A=>this.Pn(e,A).next(i=>{i?r!==0&&i.fields.length<function(a){let c=new ft(bt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Cl;for(const s of xi(e)){const A=n.data.field(s.fieldPath);if(A==null)return null;const i=r.Yt(s.kind);Ii.vt.It(A,i)}return r.zt()}dn(e){const n=new Cl;return Ii.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Cl;return Ii.vt.It(Ji(this.databaseId,n),r.Yt(function(A){const i=xi(A);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Cl);let A=0;for(const i of xi(e)){const o=r[A++];for(const a of s)if(this.fn(n,i.fieldPath)&&qc(o))s=this.gn(s,i,o);else{const c=a.Yt(i.kind);Ii.vt.It(o,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],A=[];for(const i of r.arrayValue.values||[])for(const o of s){const a=new Cl;a.seed(o.zt()),Ii.vt.It(i,a.Yt(n.kind)),A.push(a)}return A}fn(e,n){return!!e.filters.find(r=>r instanceof tt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=_l(e),s=Eo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(A=>{const i=[];return M.forEach(A,o=>s.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new Gc(h.sequenceNumber,new Cr(to(h.readTime),new le(cs(h.documentKey)),h.largestBatchId)):Gc.empty(),m=d.fields.map(([v,y])=>new oh(bt.fromServerFormat(v),y));return new Yh(d.indexId,d.collectionGroup,m,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const A=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:He(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=_l(e),A=Eo(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,a=>A.put(VC(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,A)=>{const i=r.get(s.collectionGroup);return(i?M.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(r.set(s.collectionGroup,o),M.forEach(o,a=>this.wn(e,s,a).next(c=>{const d=this.Sn(A,a);return c.isEqual(d)?M.resolve():this.bn(e,A,a,c,d)}))))})}Dn(e,n,r,s){return Io(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return Io(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Io(e);let A=new ft(aA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{A=A.add(new Ei(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>A)}Sn(e,n){let r=new ft(aA);const s=this.Vn(n,e);if(s==null)return r;const A=f0(n);if(A!=null){const i=e.data.field(A.fieldPath);if(qc(i))for(const o of i.arrayValue.values||[])r=r.add(new Ei(n.indexId,e.key,this.dn(o),s))}else r=r.add(new Ei(n.indexId,e.key,vd,s));return r}bn(e,n,r,s,A){X("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,c,d,h,f){const m=a.getIterator(),v=c.getIterator();let y=_o(m),T=_o(v);for(;y||T;){let C=!1,w=!1;if(y&&T){const _=d(y,T);_<0?w=!0:_>0&&(C=!0)}else y!=null?w=!0:C=!0;C?(h(T),T=_o(v)):w?(f(y),y=_o(m)):(y=_o(m),T=_o(v))}}(s,A,aA,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),M.waitFor(i)}yn(e){let n=1;return Eo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,A)=>{A.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>aA(i,o)).filter((i,o,a)=>!o||aA(i,a[o-1])!==0);const s=[];s.push(e);for(const i of r){const o=aA(i,e),a=aA(i,n);if(o===0)s[0]=e.Zt();else if(o>0&&a<0)s.push(i),s.push(i.Zt());else if(a>0)break}s.push(n);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const o=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,vd,[]],a=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,vd,[]];A.push(IDBKeyRange.bound(o,a))}return A}Cn(e,n){return aA(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qC)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ye())).next(qC)}}function $C(t){return an(t,"collectionParents")}function Io(t){return an(t,"indexEntries")}function _l(t){return an(t,"indexConfiguration")}function Eo(t){return an(t,"indexState")}function qC(t){Fe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;vv(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Cr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class er{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));A.push(a.next(()=>{Fe(o===1)}));const c=[];for(const d of n.mutations){const h=rF(e,d.key.path,n.batchId);A.push(s.delete(h)),c.push(d.key)}return M.waitFor(A).next(()=>c)}function sf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(41943040,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);class tg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){Fe(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new tg(A,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lA(e).J({index:"userMutationsIndex",range:r},(s,A,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const A=Oo(e),i=lA(e);return i.add({}).next(o=>{Fe(typeof o=="number");const a=new Tv(o,n,r,s),c=function(m,v,y){const T=y.baseMutations.map(w=>Yc(m.ct,w)),C=y.mutations.map(w=>Yc(m.ct,w));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:T,mutations:C}}(this.serializer,this.userId,a),d=[];let h=new ft((f,m)=>He(f.canonicalString(),m.canonicalString()));for(const f of s){const m=rF(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(m,QD))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),M.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return lA(e).get(n).next(r=>r?(Fe(r.userId===this.userId),_i(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let A=null;return lA(e).J({index:"userMutationsIndex",range:s},(i,o,a)=>{o.userId===this.userId&&(Fe(o.batchId>=r),A=_i(this.serializer,o)),a.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lA(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,A,i)=>{r=A.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lA(e).U("userMutationsIndex",n).next(r=>r.map(s=>_i(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ah(this.userId,n.path),s=IDBKeyRange.lowerBound(r),A=[];return Oo(e).J({range:s},(i,o,a)=>{const[c,d,h]=i,f=cs(d);if(c===this.userId&&n.path.isEqual(f))return lA(e).get(h).next(m=>{if(!m)throw ye();Fe(m.userId===this.userId),A.push(_i(this.serializer,m))});a.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(He);const s=[];return n.forEach(A=>{const i=ah(this.userId,A.path),o=IDBKeyRange.lowerBound(i),a=Oo(e).J({range:o},(c,d,h)=>{const[f,m,v]=c,y=cs(m);f===this.userId&&A.path.isEqual(y)?r=r.add(v):h.done()});s.push(a)}),M.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,A=ah(this.userId,r),i=IDBKeyRange.lowerBound(A);let o=new ft(He);return Oo(e).J({range:i},(a,c,d)=>{const[h,f,m]=a,v=cs(f);h===this.userId&&r.isPrefixOf(v)?v.length===s&&(o=o.add(m)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],s=[];return n.forEach(A=>{s.push(lA(e).get(A).next(i=>{if(i===null)throw ye();Fe(i.userId===this.userId),r.push(_i(this.serializer,i))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return t1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return Oo(e).J({range:r},(A,i,o)=>{if(A[0]===this.userId){const a=cs(A[1]);s.push(a)}else o.done()}).next(()=>{Fe(s.length===0)})})}containsKey(e,n){return n1(e,this.userId,n)}Nn(e){return r1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function n1(t,e,n){const r=ah(e,n.path),s=r[1],A=IDBKeyRange.lowerBound(r);let i=!1;return Oo(t).J({range:A,H:!0},(o,a,c)=>{const[d,h,f]=o;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function lA(t){return an(t,"mutations")}function Oo(t){return an(t,"documentMutations")}function r1(t){return an(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new no(0)}static kn(){return new no(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new no(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ue.fromTimestamp(new Ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>bo(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Fe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const A=[];return bo(e).J((i,o)=>{const a=Hl(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(s++,A.push(this.removeTargetData(e,a)))}).next(()=>M.waitFor(A)).next(()=>s)}forEachTarget(e,n){return bo(e).J((r,s)=>{const A=Hl(s);n(A)})}qn(e){return XC(e).get("targetGlobalKey").next(n=>(Fe(n!==null),n))}Qn(e,n){return XC(e).put("targetGlobalKey",n)}Kn(e,n){return bo(e).put(YF(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Xi(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let A=null;return bo(e).J({range:s,index:"queryTargetsIndex"},(i,o,a)=>{const c=Hl(o);vu(n,c.target)&&(A=c,a.done())}).next(()=>A)}addMatchingKeys(e,n,r){const s=[],A=vA(e);return n.forEach(i=>{const o=zn(i.path);s.push(A.put({targetId:r,path:o})),s.push(this.referenceDelegate.addReference(e,r,i))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=vA(e);return M.forEach(n,A=>{const i=zn(A.path);return M.waitFor([s.delete([r,i]),this.referenceDelegate.removeReference(e,r,A)])})}removeMatchingKeysForTargetId(e,n){const r=vA(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=vA(e);let A=je();return s.J({range:r,H:!0},(i,o,a)=>{const c=cs(i[1]),d=new le(c);A=A.add(d)}).next(()=>A)}containsKey(e,n){const r=zn(n.path),s=IDBKeyRange.bound([r],[JT(r)],!1,!0);let A=0;return vA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,o],a,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,n){return bo(e).get(n).next(r=>r?Hl(r):null)}}function bo(t){return an(t,"targets")}function XC(t){return an(t,"targetGlobal")}function vA(t){return an(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC([t,e],[n,r]){const s=He(t,n);return s===0?He(e,r):s}class $4{constructor(e){this.Un=e,this.buffer=new ft(YC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();YC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class q4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){X("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){li(n)?X("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ai(n)}await this.Hn(3e5)})}}class J4{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Ar.oe);const r=new $4(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(JC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,A,i,o,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(A=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),No()<=Xe.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${A} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function X4(t,e){return new J4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.db=e,this.garbageCollector=X4(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return yd(e,r)}removeReference(e,n,r){return yd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return yd(e,n)}nr(e,n){return function(s,A){let i=!1;return r1(s).Y(o=>n1(s,o,A).next(a=>(a&&(i=!0),M.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(c=>{if(!c)return A++,r.getEntry(e,i).next(()=>(r.removeEntry(i,Ue.min()),vA(e).delete(function(h){return[0,zn(h.path)]}(i))))});s.push(a)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>A)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return yd(e,n)}tr(e,n){const r=vA(e);let s,A=Ar.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:c})=>{i===0?(A!==Ar.oe&&n(new le(cs(s)),A),A=c,s=a):A=Ar.oe}).next(()=>{A!==Ar.oe&&n(new le(cs(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yd(t,e){return vA(t).put(function(r,s){return{targetId:0,path:zn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.changes=new ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return pi(e).put(r)}removeEntry(e,n,r){return pi(e).delete(function(A,i){const o=A.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],nf(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Bt.newInvalidDocument(n);return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Il(n))},(s,A)=>{r=this.ir(n,A)}).next(()=>r)}sr(e,n){let r={size:0,document:Bt.newInvalidDocument(n)};return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Il(n))},(s,A)=>{r={document:this.ir(n,A),size:sf(A)}}).next(()=>r)}getEntries(e,n){let r=or();return this._r(e,n,(s,A)=>{const i=this.ir(s,A);r=r.insert(s,i)}).next(()=>r)}ar(e,n){let r=or(),s=new wt(le.comparator);return this._r(e,n,(A,i)=>{const o=this.ir(A,i);r=r.insert(A,o),s=s.insert(A,sf(i))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let s=new ft(t_);n.forEach(a=>s=s.add(a));const A=IDBKeyRange.bound(Il(s.first()),Il(s.last())),i=s.getIterator();let o=i.getNext();return pi(e).J({index:"documentKeyIndex",range:A},(a,c,d)=>{const h=le.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&t_(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,c),o=i.hasNext()?i.getNext():null),o?d.$(Il(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,A){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),nf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pi(e).U(IDBKeyRange.bound(o,a,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=or();for(const h of c){const f=this.ir(le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Bu(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let A=or();const i=e_(n,r),o=e_(n,Cr.max());return pi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,c,d)=>{const h=this.ir(le.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new eL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ZC(e).get("remoteDocumentGlobalKey").next(n=>(Fe(!!n),n))}rr(e,n){return ZC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=D4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ue.min())))return r}return Bt.newInvalidDocument(e)}}function A1(t){return new Z4(t)}class eL extends s1{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ci(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ft((A,i)=>He(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const o=this.lr.get(A);if(n.push(this.cr.removeEntry(e,A,o.readTime)),i.isValidDocument()){const a=OC(this.cr.serializer,i);s=s.add(A.path.popLast());const c=sf(a);r+=c-o.size,n.push(this.cr.addEntry(e,A,a))}else if(r-=o.size,this.trackRemovals){const a=OC(this.cr.serializer,i.convertToNoDocument(Ue.min()));n.push(this.cr.addEntry(e,A,a))}}),s.forEach(A=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:r.get(A).readTime})}),r))}}function ZC(t){return an(t,"remoteDocumentGlobal")}function pi(t){return an(t,"remoteDocumentsV14")}function Il(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function e_(t,e){const n=e.documentKey.path.toArray();return[t,nf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function t_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let A=0;A<n.length-2&&A<r.length-2;++A)if(s=He(n[A],r[A]),s)return s;return s=He(n.length,r.length),s||(s=He(n[n.length-2],r[r.length-2]),s||He(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&cc(r.mutation,s,ir.empty(),Ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const s=us();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(A=>{let i=Ml();return A.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const s=[];return r.forEach(A=>{n.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let A=or();const i=lc(),o=function(){return lc()}();return n.forEach((a,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Zs)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),cc(d.mutation,c,d.mutation.getFieldMask(),Ft.now())):i.set(c.key,ir.empty())}),this.recalculateAndSaveOverlays(e,A).next(a=>(a.forEach((c,d)=>i.set(c,d)),n.forEach((c,d)=>{var h;return o.set(c,new tL(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=lc();let s=new wt((i,o)=>i-o),A=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let d=r.get(a)||ir.empty();d=o.applyToLocalView(c,d),r.set(a,d);const h=(s.get(o.batchId)||je()).add(a);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,d=a.value,h=IF();d.forEach(f=>{if(!A.has(f)){const m=QF(n.get(f),r.get(f));m!==null&&h.set(f,m),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return le.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_v(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-A.size):M.resolve(us());let o=-1,a=A;return i.next(c=>M.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),A.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,a,c,je())).next(d=>({batchId:o,changes:_F(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let s=Ml();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const A=n.collectionGroup;let i=Ml();return this.indexManager.getCollectionParents(e,A).next(o=>M.forEach(o,a=>{const c=function(h,f){return new Ys(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,A,s))).next(i=>{A.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Bt.newInvalidDocument(d)))});let o=Ml();return i.forEach((a,c)=>{const d=A.get(a);d!==void 0&&cc(d.mutation,c,ir.empty(),Ft.now()),Bu(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:$t(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:kv(s.bundledQuery),readTime:$t(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.overlays=new wt(le.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=us();return M.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,A)=>{this.ht(e,n,A)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=us(),A=n.length+1,i=new le(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===A&&a.largestBatchId>r&&s.set(a.getKey(),a)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let A=new wt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=A.get(c.largestBatchId);d===null&&(d=us(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=us(),a=A.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return M.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Uv(n,r));let A=this.Ir.get(n);A===void 0&&(A=je(),this.Ir.set(n,A)),this.Ir.set(n,A.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Tr=new ft(dn.Er),this.dr=new ft(dn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new et([])),r=new dn(n,e),s=new dn(n,e+1),A=[];return this.dr.forEachInRange([r,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new et([])),r=new dn(n,e),s=new dn(n,e+1);let A=je();return this.dr.forEachInRange([r,s],i=>{A=A.add(i.key)}),A}containsKey(e){const n=new dn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||He(e.wr,n.wr)}static Ar(e,n){return He(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(dn.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Tv(A,n,r,s);this.mutationQueue.push(i);for(const o of s)this.br=this.br.add(new dn(o.key,A)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(i)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),A=s<0?0:s;return M.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dn(n,0),s=new dn(n,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([r,s],i=>{const o=this.Dr(i.wr);A.push(o)}),M.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(He);return n.forEach(s=>{const A=new dn(s,0),i=new dn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],o=>{r=r.add(o.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let A=r;le.isDocumentKey(A)||(A=A.child(""));const i=new dn(new le(A),0);let o=new ft(He);return this.br.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(a.wr)),!0)},i),M.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const A=new dn(s.key,n.batchId);return r=r.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dn(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.Mr=e,this.docs=function(){return new wt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),A=s?s.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const A=this.docs.get(s);r=r.insert(s,A?A.document.mutableCopy():Bt.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let A=or();const i=n.path,o=new le(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||vv(YT(d),r)<=0||(s.has(d.key)||Bu(n,d))&&(A=A.insert(d.key,d.mutableCopy()))}return M.resolve(A)}getAllFromCollectionGroup(e,n,r,s){ye()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oL(this)}getSize(e){return M.resolve(this.size)}}class oL extends s1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.persistence=e,this.Nr=new ci(n=>Xi(n),vu),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pv,this.targetCount=0,this.kr=no.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new no(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const A=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),M.waitFor(A).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,A=[];return s&&n.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),M.waitFor(A)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ar(0),this.Kr=!1,this.Kr=!0,this.$r=new sL,this.referenceDelegate=e(this),this.Ur=new aL(this),this.indexManager=new G4,this.remoteDocumentCache=function(s){return new iL(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new XF(n),this.Gr=new nL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new AL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new lL(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class lL extends eF{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Jr=new Pv,this.Yr=null}static Zr(e){return new ng(e)}get Xr(){if(this.Yr)return this.Yr;throw ye()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=le.fromPath(r);return this.ei(e,s).next(A=>{A||n.removeEntry(s,Ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.serializer=e}O(e,n,r,s){const A=new qf("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0}),a.createObjectStore("documentMutations")}(e),n_(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=M.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),n_(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),r<4&&s>=4&&(r!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return M.waitFor(f)})}(e,A))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(i=i.next(()=>this.ni(A))),r<6&&s>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),r<7&&s>=7&&(i=i.next(()=>this.ii(A))),r<8&&s>=8&&(i=i.next(()=>this.si(e,A))),r<9&&s>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(i=i.next(()=>this.oi(A))),r<11&&s>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:KD});c.createIndex("collectionPathOverlayIndex",GD,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",zD,{unique:!1})})(e)})),r<13&&s>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:kD});c.createIndex("documentKeyIndex",RD),c.createIndex("collectionGroupIndex",ND)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),r<15&&s>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:MD}).createIndex("sequenceNumberIndex",VD,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:HD}).createIndex("documentKeyIndex",jD,{unique:!1})}(e))),r<16&&s>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=sf(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>M.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>M.forEach(o,a=>{Fe(a.userId===A.userId);const c=_i(this.serializer,a);return t1(e,A.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return r.J((i,o)=>{const a=new et(i),c=function(h){return[0,zn(h)]}(a);A.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:zn(h),sequenceNumber:s.highestListenSequenceNumber}))(a)))}).next(()=>M.waitFor(A))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:OD});const r=n.store("collectionParents"),s=new Nv,A=i=>{if(s.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:zn(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new et(i);return A(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],c)=>{const d=cs(o);return A(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const A=Hl(s),i=YF(this.serializer,A);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((A,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new le(et.fromString(h.document.name).popFirst(5)):h.noDocument?le.fromSegments(h.noDocument.path):h.unknownDocument?le.fromSegments(h.unknownDocument.path):ye()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(o.put(c))}).next(()=>M.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=A1(this.serializer),A=new o1(ng.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var c;let d=(c=o.get(a.userId))!==null&&c!==void 0?c:je();_i(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),M.forEach(o,(a,c)=>{const d=new fn(c),h=eg.lt(this.serializer,d),f=A.getIndexManager(d),m=tg.lt(d,this.serializer,f,A.referenceDelegate);return new i1(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new g0(n,Ar.oe),a).next()})})}}function n_(t){t.createObjectStore("targetDocuments",{keyPath:DD}).createIndex("documentTargetsIndex",LD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PD,{unique:!0}),t.createObjectStore("targetGlobal")}const Up="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dv{constructor(e,n,r,s,A,i,o,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=A,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Dv.D())throw new J(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Y4(this,s),this.Ai=n+"main",this.serializer=new XF(a),this.Ri=new gs(this.Ai,this.hi,new cL(this.serializer)),this.$r=new O4,this.Ur=new W4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=A1(this.serializer),this.Gr=new L4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Wt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(H.FAILED_PRECONDITION,Up);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ar(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(li(e))return X("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return El(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return Bd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=an(n,"clientMetadata");return r.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(o=>A.indexOf(o)===-1);return M.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):El(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new J(H.FAILED_PRECONDITION,Up);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bd(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(A||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&X("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new g0(e,Ar.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Bd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return tg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return eg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",A=function(a){return a===17?qD:a===16?$D:a===15?Bv:a===14?iF:a===13?AF:a===12?WD:a===11?sF:void ye()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,o=>(i=new g0(o,this.Qr?this.Qr.next():Ar.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw Wt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new J(H.FAILED_PRECONDITION,ZT);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return El(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(H.FAILED_PRECONDITION,Up)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return El(e).put("owner",n)}static D(){return gs.D()}bi(e){const n=El(e);return n.get("owner").next(r=>this.vi(r)?(X("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Wt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;bT()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return X("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Wt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function El(t){return an(t,"owner")}function Bd(t){return an(t,"clientMetadata")}function Lv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=je(),s=je();for(const A of n.docChanges)switch(A.type){case 0:r=r.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new Ov(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bT()?8:tF(Nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const A={result:null};return this.Yi(e,n).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,n,s,r).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new uL;return this.Xi(e,n,i).next(o=>{if(A.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>A.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(No()<=Xe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(No()<=Xe.DEBUG&&X("QueryEngine","Query:",Po(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(No()<=Xe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):M.resolve())}Yi(e,n){if(TC(n))return M.resolve(null);let r=Wn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tf(n,null,"F"),r=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(A=>{const i=je(...A);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.ts(n,o);return this.ns(n,c,i,a.readTime)?this.Yi(e,tf(n,null,"F")):this.rs(e,c,n,a)}))})))}Zi(e,n,r,s){return TC(n)||s.isEqual(Ue.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(A=>{const i=this.ts(n,A);return this.ns(n,i,r,s)?M.resolve(null):(No()<=Xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Po(n)),this.rs(e,i,n,XT(s,-1)).next(o=>o))})}ts(e,n){let r=new ft(xF(e));return n.forEach((s,A)=>{Bu(e,A)&&(r=r.add(A))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const A=e.limitType==="F"?n.last():n.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,n,r){return No()<=Xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Po(n)),this.Ji.getDocumentsMatchingQuery(e,n,Cr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(A=>(n.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new wt(He),this._s=new ci(A=>Xi(A),vu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function l1(t,e,n,r){return new dL(t,e,n,r)}async function c1(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(A=>(s=A,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(A=>{const i=[],o=[];let a=je();for(const c of s){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of A){o.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function hL(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),A=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(a,v)).next(y=>{const T=c.docVersions.get(v);Fe(T!==null),y.version.compareTo(T)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,A).next(()=>A.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=je();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function u1(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function fL(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(A,d.addedDocuments,h)));let m=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ot.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(y,T,C){return y.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(f,m,d)&&o.push(n.Ur.updateTargetData(A,m))});let a=or(),c=je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(A,d))}),o.push(d1(A,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!r.isEqual(Ue.min())){const d=n.Ur.getLastRemoteSnapshotVersion(A).next(h=>n.Ur.setTargetsMetadata(A,A.currentSequenceNumber,r));o.push(d)}return M.waitFor(o).next(()=>i.apply(A)).next(()=>n.localDocuments.getLocalViewOfDocuments(A,a,c)).next(()=>a)}).then(A=>(n.os=s,A))}function d1(t,e,n){let r=je(),s=je();return n.forEach(A=>r=r.add(A)),e.getEntries(t,r).next(A=>{let i=or();return n.forEach((o,a)=>{const c=A.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),a.isNoDocument()&&a.version.isEqual(Ue.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):X("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:s}})}function gL(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sa(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(A=>A?(s=A,M.resolve(s)):n.Ur.allocateTargetId(r).next(i=>(s=new Qs(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Qa(t,e,n){const r=ue(t),s=r.os.get(e),A=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",A,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!li(i))throw i;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Af(t,e,n){const r=ue(t);let s=Ue.min(),A=je();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=ue(a),f=h._s.get(d);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,i,Wn(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{A=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?s:Ue.min(),n?A:je())).next(o=>(g1(r,BF(e),o),{documents:o,Ts:A})))}function h1(t,e){const n=ue(t),r=ue(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",A=>r.ot(A,e).next(i=>i?i.target:null))}function f1(t,e){const n=ue(t),r=n.us.get(e)||Ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,XT(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(g1(n,e,s),s))}function g1(t,e,n){let r=t.us.get(e)||Ue.min();n.forEach((s,A)=>{A.readTime.compareTo(r)>0&&(r=A.readTime)}),t.us.set(e,r)}async function pL(t,e,n,r){const s=ue(t);let A=je(),i=or();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),a=await Sa(s,function(d){return Wn(Wa(et.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>d1(c,o,i).next(d=>(o.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>s.Ur.addMatchingKeys(c,A,a.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function mL(t,e,n=je()){const r=await Sa(t,Wn(kv(e.bundledQuery))),s=ue(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=$t(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const o=r.withResumeToken(Ot.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(A,o).next(()=>s.Ur.removeMatchingKeysForTargetId(A,r.targetId)).next(()=>s.Ur.addMatchingKeys(A,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function r_(t,e){return`firestore_clients_${t}_${e}`}function s_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Sp(t,e){return`firestore_targets_${t}_${e}`}class of{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new J(s.error.code,s.error.message))),i?new of(e,n,s.state,A):(Wt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,A=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return A&&r.error&&(A=typeof r.error.message=="string"&&typeof r.error.code=="string",A&&(s=new J(r.error.code,r.error.message))),A?new uc(e,r.state,s):(Wt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class af{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,A=Iv();for(let i=0;s&&i<r.activeTargetIds.length;++i)s=nF(r.activeTargetIds[i]),A=A.add(r.activeTargetIds[i]);return s?new af(e,A):(Wt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Mv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Mv(n.clientId,n.onlineState):(Wt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class F0{constructor(){this.activeTargetIds=Iv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qp{constructor(e,n,r,s,A){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new wt(He),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=r_(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new F0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(r_(this.persistenceKey,r));if(s){const A=af.Rs(r,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Sp(this.persistenceKey,e));if(s){const A=uc.Rs(e,s);A&&(r=A.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return X("SharedClientState","READ",e,n),n}setItem(e,n){X("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){X("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(X("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Wt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(A){let i=Ar.oe;if(A!=null)try{const o=JSON.parse(A);Fe(typeof o=="number"),i=o}catch(o){Wt("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==Ar.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new of(this.currentUser,e,n,r),A=s_(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const n=s_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Sp(this.persistenceKey,e),A=new uc(e,n,r);this.setItem(s,A.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return af.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),A=r[2]!==void 0?r[2]:null;return of.Rs(new fn(A),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return uc.Rs(s,n)}Ls(e){return Mv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);X("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(r),i=[],o=[];return A.forEach(a=>{s.has(a)||i.push(a)}),s.forEach(a=>{A.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Iv();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class p1{constructor(){this.so=new F0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new F0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=null;function kp(){return xd===null?xd=function(){return 268435456+Math.round(2147483648*Math.random())}():xd++,"0x"+xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class BL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(n,r,s,A,i){const o=kp(),a=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(n,a,c,s).then(d=>(X("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw ws("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Lo(n,r,s,A,i,o){return this.Mo(n,r,s,A,i)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((A,i)=>n[i]=A),s&&s.headers.forEach((A,i)=>n[i]=A)}xo(n,r){const s=vL[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const A=kp();return new Promise((i,o)=>{const a=new jT;a.setWithCredentials(!0),a.listenOnce(KT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case ih.NO_ERROR:const d=a.getResponseJson();X(Sn,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case ih.TIMEOUT:X(Sn,`RPC '${e}' ${A} timed out`),o(new J(H.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const h=a.getStatus();if(X(Sn,`RPC '${e}' ${A} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(T){const C=T.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(C)>=0?C:H.UNKNOWN}(m.status);o(new J(v,m.message))}else o(new J(H.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new J(H.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{X(Sn,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);X(Sn,`RPC '${e}' ${A} sending request:`,s),a.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=kp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=WT(),o=zT(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=A.join("");X(Sn,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,m=!1;const v=new yL({Io:T=>{m?X(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(f||(X(Sn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),X(Sn,`RPC '${e}' stream ${s} sending:`,T),h.send(T))},To:()=>h.close()}),y=(T,C,w)=>{T.listen(C,_=>{try{w(_)}catch(S){setTimeout(()=>{throw S},0)}})};return y(h,Ol.EventType.OPEN,()=>{m||(X(Sn,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),y(h,Ol.EventType.CLOSE,()=>{m||(m=!0,X(Sn,`RPC '${e}' stream ${s} transport closed`),v.So())}),y(h,Ol.EventType.ERROR,T=>{m||(m=!0,ws(Sn,`RPC '${e}' stream ${s} transport errored:`,T),v.So(new J(H.UNAVAILABLE,"The operation could not be completed")))}),y(h,Ol.EventType.MESSAGE,T=>{var C;if(!m){const w=T.data[0];Fe(!!w);const _=w,S=_.error||((C=_[0])===null||C===void 0?void 0:C.error);if(S){X(Sn,`RPC '${e}' stream ${s} received error:`,S);const U=S.status;let N=function(I){const F=Jt[I];if(F!==void 0)return NF(F)}(U),B=S.message;N===void 0&&(N=H.INTERNAL,B="Unknown error status: "+U+" with message "+S.message),m=!0,v.So(new J(N,B)),h.close()}else X(Sn,`RPC '${e}' stream ${s} received:`,w),v.bo(w)}}),y(o,GT.STAT_EVENT,T=>{T.stat===h0.PROXY?X(Sn,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===h0.NOPROXY&&X(Sn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return typeof window<"u"?window:null}function hh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return new b4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,r=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n,r,s,A,i,o,a){this.ui=e,this.Ho=r,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Wt(n.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new J(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xL extends w1{constructor(e,n,r,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=U4(this.serializer,e),r=function(A){if(!("targetChange"in A))return Ue.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?Ue.min():i.readTime?$t(i.readTime):Ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_0(this.serializer),n.addTarget=function(A,i){let o;const a=i.target;if(o=Zh(a)?{documents:GF(A,a)}:{query:zF(A,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=OF(A,i.resumeToken);const c=x0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ue.min())>0){o.readTime=Ua(A,i.snapshotVersion.toTimestamp());const c=x0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=Q4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_0(this.serializer),n.removeTarget=e,this.a_(n)}}class CL extends w1{constructor(e,n,r,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=S4(e.writeResults,e.commitTime),r=$t(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new J(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,C0(n,r),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new J(H.UNKNOWN,A.toString())})}Lo(e,n,r,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,C0(n,r),s,i,o,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(H.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class IL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wt(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n,r,s,A){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{r.enqueueAndForget(async()=>{ui(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=ue(a);c.L_.add(4),await Ja(c),c.q_.set("Unknown"),c.L_.delete(4),await Eu(c)}(this))})}),this.q_=new IL(r,s)}}async function Eu(t){if(ui(t))for(const e of t.B_)await e(!0)}async function Ja(t){for(const e of t.B_)await e(!1)}function rg(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Kv(n)?jv(n):Ya(n).r_()&&Hv(n,e))}function ka(t,e){const n=ue(t),r=Ya(n);n.N_.delete(e),r.r_()&&v1(n,e),n.N_.size===0&&(r.r_()?r.o_():ui(n)&&n.q_.set("Unknown"))}function Hv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ya(t).A_(e)}function v1(t,e){t.Q_.xe(e),Ya(t).R_(e)}function jv(t){t.Q_=new C4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ya(t).start(),t.q_.v_()}function Kv(t){return ui(t)&&!Ya(t).n_()&&t.N_.size>0}function ui(t){return ue(t).L_.size===0}function y1(t){t.Q_=void 0}async function bL(t){t.q_.set("Online")}async function TL(t){t.N_.forEach((e,n)=>{Hv(t,e)})}async function FL(t,e){y1(t),Kv(t)?(t.q_.M_(e),jv(t)):t.q_.set("Unknown")}async function UL(t,e,n){if(t.q_.set("Online"),e instanceof LF&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const o of A.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lf(t,r)}else if(e instanceof dh?t.Q_.Ke(e):e instanceof DF?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ue.min()))try{const r=await u1(t.localStore);n.compareTo(r)>=0&&await function(A,i){const o=A.Q_.rt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const d=A.N_.get(a);if(!d)return;A.N_.set(a,d.withResumeToken(Ot.EMPTY_BYTE_STRING,d.snapshotVersion)),v1(A,a);const h=new Qs(d.target,a,c,d.sequenceNumber);Hv(A,h)}),A.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await lf(t,r)}}async function lf(t,e,n){if(!li(e))throw e;t.L_.add(1),await Ja(t),t.q_.set("Offline"),n||(n=()=>u1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Eu(t)})}function B1(t,e){return e().catch(n=>lf(t,n,e))}async function Xa(t){const e=ue(t),n=ZA(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SL(e);)try{const s=await gL(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,QL(e,s)}catch(s){await lf(e,s)}x1(e)&&C1(e)}function SL(t){return ui(t)&&t.O_.length<10}function QL(t,e){t.O_.push(e);const n=ZA(t);n.r_()&&n.V_&&n.m_(e.mutations)}function x1(t){return ui(t)&&!ZA(t).n_()&&t.O_.length>0}function C1(t){ZA(t).start()}async function kL(t){ZA(t).p_()}async function RL(t){const e=ZA(t);for(const n of t.O_)e.m_(n.mutations)}async function NL(t,e,n){const r=t.O_.shift(),s=Fv.from(r,e,n);await B1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xa(t)}async function PL(t,e){e&&ZA(t).V_&&await async function(r,s){if(function(i){return RF(i)&&i!==H.ABORTED}(s.code)){const A=r.O_.shift();ZA(r).s_(),await B1(r,()=>r.remoteSyncer.rejectFailedWrite(A.batchId,s)),await Xa(r)}}(t,e),x1(t)&&C1(t)}async function i_(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ui(n);n.L_.add(3),await Ja(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Eu(n)}async function U0(t,e){const n=ue(t);e?(n.L_.delete(2),await Eu(n)):e||(n.L_.add(2),await Ja(n),n.q_.set("Unknown"))}function Ya(t){return t.K_||(t.K_=function(n,r,s){const A=ue(n);return A.w_(),new xL(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:bL.bind(null,t),Ro:TL.bind(null,t),mo:FL.bind(null,t),d_:UL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Kv(t)?jv(t):t.q_.set("Unknown")):(await t.K_.stop(),y1(t))})),t.K_}function ZA(t){return t.U_||(t.U_=function(n,r,s){const A=ue(n);return A.w_(),new CL(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kL.bind(null,t),mo:PL.bind(null,t),f_:RL.bind(null,t),g_:NL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Xa(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,r,s,A){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=A,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,A){const i=Date.now()+r,o=new Gv(e,n,i,s,A);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Za(t,e){if(Wt("AsyncQueue",`${e}: ${t}`),li(t))return new J(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Ml(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new la(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof la)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new la;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.W_=new wt(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ye():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ra{constructor(e,n,r,s,A,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,A){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Ra(e,n,la.emptySet(n),i,r,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class LL{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),A=s.queries;s.queries=a_(),A.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new J(H.ABORTED,"Firestore shutting down"))}}function a_(){return new ci(t=>yF(t),yu)}async function zv(t,e){const n=ue(t);let r=3;const s=e.query;let A=n.queries.get(s);A?!A.H_()&&e.J_()&&(r=2):(A=new DL,r=e.J_()?0:1);try{switch(r){case 0:A.z_=await n.onListen(s,!0);break;case 1:A.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=Za(i,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,A),A.j_.push(e),e.Z_(n.onlineState),A.z_&&e.X_(A.z_)&&$v(n)}async function Wv(t,e){const n=ue(t),r=e.query;let s=3;const A=n.queries.get(r);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OL(t,e){const n=ue(t);let r=!1;for(const s of e){const A=s.query,i=n.queries.get(A);if(i){for(const o of i.j_)o.X_(s)&&(r=!0);i.z_=s}}r&&$v(n)}function ML(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const A of s.j_)A.onError(n);r.queries.delete(e)}function $v(t){t.Y_.forEach(e=>{e.next()})}var S0,l_;(l_=S0||(S0={})).ea="default",l_.Cache="cache";class qv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==S0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.serializer=e}Es(e){return ps(this.serializer,e)}ds(e){return e.metadata.exists?KF(this.serializer,e.document,!1):Bt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return $t(e)}}class HL{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=et.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new c_(this.serializer);for(const s of e)if(s.metadata.queries){const A=r.Es(s.metadata.name);for(const i of s.metadata.queries){const o=(n.get(i)||je()).add(A);n.set(i,o)}}return n}async complete(){const e=await pL(this.localStore,new c_(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await mL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function _1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.key=e}}class E1{constructor(e){this.key=e}}class b1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=je(),this.mutatedKeys=je(),this.Aa=xF(e),this.Ra=new la(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new o_,s=n?n.Ra:this.Ra;let A=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Bu(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;f&&m?f.data.isEqual(m.data)?v!==y&&(r.track({type:3,doc:m}),T=!0):this.ga(f,m)||(r.track({type:2,doc:m}),T=!0,(a&&this.Aa(m,a)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),T=!0):f&&!m&&(r.track({type:1,doc:f}),T=!0,(a||c)&&(o=!0)),T&&(m?(i=i.add(m),A=y?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:A}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,v){const y=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return y(m)-y(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],a=this.da.size===0&&this.current&&!s?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new Ra(this.query,e.Ra,A,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new o_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new E1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new I1(r))}),n}ba(e){this.Ta=e.Ts,this.da=je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ra.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class jL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class KL{constructor(e){this.key=e,this.va=!1}}class GL{constructor(e,n,r,s,A,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new ci(o=>yF(o),yu),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(le.comparator),this.Na=new Map,this.La=new Pv,this.Ba={},this.ka=new Map,this.qa=no.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function zL(t,e,n=!0){const r=sg(t);let s;const A=r.Fa.get(e);return A?(r.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await T1(r,e,n,!0),s}async function WL(t,e){const n=sg(t);await T1(n,e,!0,!1)}async function T1(t,e,n,r){const s=await Sa(t.localStore,Wn(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,n);let o;return r&&(o=await Jv(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&rg(t.remoteStore,s),o}async function Jv(t,e,n,r,s){t.Ka=(h,f,m)=>async function(y,T,C,w){let _=T.view.ma(C);_.ns&&(_=await Af(y.localStore,T.query,!1).then(({documents:B})=>T.view.ma(B,_)));const S=w&&w.targetChanges.get(T.targetId),U=w&&w.targetMismatches.get(T.targetId)!=null,N=T.view.applyChanges(_,y.isPrimaryClient,S,U);return Q0(y,T.targetId,N.wa),N.snapshot}(t,h,f,m);const A=await Af(t.localStore,e,!0),i=new b1(e,A.Ts),o=i.ma(A.documents),a=_u.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=i.applyChanges(o,t.isPrimaryClient,a);Q0(t,n,c.wa);const d=new jL(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function $L(t,e,n){const r=ue(t),s=r.Fa.get(e),A=r.Ma.get(s.targetId);if(A.length>1)return r.Ma.set(s.targetId,A.filter(i=>!yu(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Qa(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ka(r.remoteStore,s.targetId),Na(r,s.targetId)}).catch(ai)):(Na(r,s.targetId),await Qa(r.localStore,s.targetId,!0))}async function qL(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ka(n.remoteStore,r.targetId))}async function JL(t,e,n){const r=ey(t);try{const s=await function(i,o){const a=ue(i),c=Ft.now(),d=o.reduce((m,v)=>m.add(v.key),je());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=or(),y=je();return a.cs.getEntries(m,d).next(T=>{v=T,v.forEach((C,w)=>{w.isValidDocument()||(y=y.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,v)).next(T=>{h=T;const C=[];for(const w of o){const _=y4(w,h.get(w.key).overlayedDocument);_!=null&&C.push(new Zs(w.key,_,uF(_.value.mapValue),Tt.exists(!0)))}return a.mutationQueue.addMutationBatch(m,c,C,o)}).next(T=>{f=T;const C=T.applyToLocalDocumentSet(h,y);return a.documentOverlayCache.saveOverlays(m,T.batchId,C)})}).then(()=>({batchId:f.batchId,changes:_F(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new wt(He)),c=c.insert(o,a),i.Ba[i.currentUser.toKey()]=c}(r,s.batchId,n),await eA(r,s.changes),await Xa(r.remoteStore)}catch(s){const A=Za(s,"Failed to persist write");n.reject(A)}}async function F1(t,e){const n=ue(t);try{const r=await fL(n.localStore,e);e.targetChanges.forEach((s,A)=>{const i=n.Na.get(A);i&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Fe(i.va):s.removedDocuments.size>0&&(Fe(i.va),i.va=!1))}),await eA(n,r,e)}catch(r){await ai(r)}}function u_(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((A,i)=>{const o=i.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const a=ue(i);a.onlineState=o;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&$v(a)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XL(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),A=s&&s.key;if(A){let i=new wt(le.comparator);i=i.insert(A,Bt.newNoDocument(A,Ue.min()));const o=je().add(A),a=new Cu(Ue.min(),new Map,new wt(He),i,o);await F1(r,a),r.Oa=r.Oa.remove(A),r.Na.delete(e),Zv(r)}else await Qa(r.localStore,e,!1).then(()=>Na(r,e,n)).catch(ai)}async function YL(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await hL(n.localStore,e);Yv(n,r,null),Xv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eA(n,s)}catch(s){await ai(s)}}async function ZL(t,e,n){const r=ue(t);try{const s=await function(i,o){const a=ue(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(Fe(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(r.localStore,e);Yv(r,e,n),Xv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await eA(r,s)}catch(s){await ai(s)}}async function eO(t,e){const n=ue(t);ui(n.remoteStore)||X("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=ue(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=Za(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Xv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Yv(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const A=s.get(e);A&&(n?A.reject(n):A.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Na(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||U1(t,r)})}function U1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ka(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Zv(t))}function Q0(t,e,n){for(const r of n)r instanceof I1?(t.La.addReference(r.key,e),tO(t,r)):r instanceof E1?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||U1(t,r.key)):ye()}function tO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Zv(t))}function Zv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(et.fromString(e)),r=t.qa.next();t.Na.set(r,new KL(n)),t.Oa=t.Oa.insert(n,r),rg(t.remoteStore,new Qs(Wn(Wa(n.path)),r,"TargetPurposeLimboResolution",Ar.oe))}}async function eA(t,e,n){const r=ue(t),s=[],A=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Ov.Wi(a.targetId,c);A.push(h)}}))}),await Promise.all(i),r.Ca.d_(s),await async function(a,c){const d=ue(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!li(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(f,y)}}}(r.localStore,A))}async function nO(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await c1(n.localStore,e);n.currentUser=e,function(A,i){A.ka.forEach(o=>{o.forEach(a=>{a.reject(new J(H.CANCELLED,i))})}),A.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eA(n,r.hs)}}function rO(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return je().add(r.key);{let s=je();const A=n.Ma.get(e);if(!A)return s;for(const i of A){const o=n.Fa.get(i);s=s.unionWith(o.view.Va)}return s}}async function sO(t,e){const n=ue(t),r=await Af(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&Q0(n,e.targetId,s.wa),s}async function AO(t,e){const n=ue(t);return f1(n.localStore,e).then(r=>eA(n,r))}async function iO(t,e,n,r){const s=ue(t),A=await function(o,a){const c=ue(o),d=ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);A!==null?(n==="pending"?await Xa(s.remoteStore):n==="acknowledged"||n==="rejected"?(Yv(s,e,r||null),Xv(s,e),function(o,a){ue(ue(o).mutationQueue).On(a)}(s.localStore,e)):ye(),await eA(s,A)):X("SyncEngine","Cannot apply mutation batch with id: "+e)}async function oO(t,e){const n=ue(t);if(sg(n),ey(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await d_(n,r.toArray());n.Qa=!0,await U0(n.remoteStore,!0);for(const A of s)rg(n.remoteStore,A)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((A,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):s=s.then(()=>(Na(n,i),Qa(n.localStore,i,!0))),ka(n.remoteStore,i)}),await s,await d_(n,r),function(i){const o=ue(i);o.Na.forEach((a,c)=>{ka(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new wt(le.comparator)}(n),n.Qa=!1,await U0(n.remoteStore,!1)}}async function d_(t,e,n){const r=ue(t),s=[],A=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await Sa(r.localStore,Wn(a[0]));for(const c of a){const d=r.Fa.get(c),h=await sO(r,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await h1(r.localStore,i);o=await Sa(r.localStore,c),await Jv(r,S1(c),i,!1,o.resumeToken)}s.push(o)}return r.Ca.d_(A),s}function S1(t){return vF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function aO(t){return function(n){return ue(ue(n).persistence).Qi()}(ue(t).localStore)}async function lO(t,e,n,r){const s=ue(t);if(s.Qa)return void X("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(n){case"current":case"not-current":{const i=await f1(s.localStore,BF(A[0])),o=Cu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ot.EMPTY_BYTE_STRING);await eA(s,i,o);break}case"rejected":await Qa(s.localStore,e,!0),Na(s,e,r);break;default:ye()}}async function cO(t,e,n){const r=sg(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){X("SyncEngine","Adding an already active target "+s);continue}const A=await h1(r.localStore,s),i=await Sa(r.localStore,A);await Jv(r,S1(A),i.targetId,!1,i.resumeToken),rg(r.remoteStore,i)}for(const s of n)r.Ma.has(s)&&await Qa(r.localStore,s,!1).then(()=>{ka(r.remoteStore,s),Na(r,s)}).catch(ai)}}function sg(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=F1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XL.bind(null,e),e.Ca.d_=OL.bind(null,e.eventManager),e.Ca.$a=ML.bind(null,e.eventManager),e}function ey(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZL.bind(null,e),e}function uO(t,e,n){const r=ue(t);(async function(A,i,o){try{const a=await i.getMetadata();if(await function(m,v){const y=ue(m),T=$t(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",C=>y.Gr.getBundleMetadata(C,v.id)).then(C=>!!C&&C.createTime.compareTo(T)>=0)}(A.localStore,a))return await i.close(),o._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(_1(a));const c=new HL(a,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await eA(A,h.Ia,void 0),await function(m,v){const y=ue(m);return y.persistence.runTransaction("Save bundle","readwrite",T=>y.Gr.saveBundleMetadata(T,v))}(A.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return ws("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Iu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return l1(this.persistence,new a1,e.initialUser,this.serializer)}Ga(e){return new o1(ng.Zr,this.serializer)}Wa(e){return new p1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class Q1 extends Zc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await ey(this.Ja.syncEngine),await Xa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return l1(this.persistence,new a1,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new q4(r,e.asyncQueue,n)}Ha(e,n){const r=new UD(n,this.persistence);return new FD(e.asyncQueue,r)}Ga(e){const n=Lv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new Dv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,m1(),hh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new p1}}class dO extends Q1{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Qp&&(this.sharedClientState.syncEngine={no:iO.bind(null,n),ro:lO.bind(null,n),io:cO.bind(null,n),Qi:aO.bind(null,n),eo:AO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await oO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=m1();if(!Qp.D(n))throw new J(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Lv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class eu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nO.bind(null,this.syncEngine),await U0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LL}()}createDatastore(e){const n=Iu(e.databaseInfo.databaseId),r=function(A){return new BL(A)}(e.databaseInfo);return function(A,i,o,a){return new _L(A,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,A,i,o){return new EL(r,s,A,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>u_(this.syncEngine,n,0),function(){return A_.D()?new A_:new wL}())}createSyncEngine(e,n){return function(s,A,i,o,a,c,d){const h=new GL(s,A,i,o,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const A=ue(s);X("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Ja(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}eu.provider={build:()=>new eu};function h_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new _n,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new VL(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,A){const i=ue(s),o={documents:A.map(h=>Xc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,et.emptyPath(),o,A.length),c=new Map;a.forEach(h=>{const f=F4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());Fe(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=le.fromPath(r);this.mutations.push(new bv(s,this.precondition(s)))}),await async function(r,s){const A=ue(r),i={writes:s.map(o=>Yc(A.serializer,o))};await A.Mo("Commit",A.serializer.databaseId,et.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ye();n=Ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ue.min())?Tt.exists(!1):Tt.updateTime(n):Tt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ue.min()))throw new J(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tt.updateTime(n)}return Tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,r,s,A){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=A,this._u=r.maxAttempts,this.t_=new Vv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new fO(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!wu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!RF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,s,A){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=qT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(r,async i=>{X("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(X("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Za(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rp(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await c1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function f_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ty(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>i_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>i_(e.remoteStore,s)),t._onlineComponents=e}async function ty(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ws("Error using user provided cache. Falling back to memory cache: "+n),await Rp(t,new Zc)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Rp(t,new Zc);return t._offlineComponents}async function ig(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await f_(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await f_(t,new eu))),t._onlineComponents}function k1(t){return ty(t).then(e=>e.persistence)}function ny(t){return ty(t).then(e=>e.localStore)}function R1(t){return ig(t).then(e=>e.remoteStore)}function ry(t){return ig(t).then(e=>e.syncEngine)}function mO(t){return ig(t).then(e=>e.datastore)}async function Pa(t){const e=await ig(t),n=e.eventManager;return n.onListen=zL.bind(null,e.syncEngine),n.onUnlisten=$L.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qL.bind(null,e.syncEngine),n}function wO(t){return t.asyncQueue.enqueue(async()=>{const e=await k1(t),n=await R1(t);return e.setNetworkEnabled(!0),function(s){const A=ue(s);return A.L_.delete(0),Eu(A)}(n)})}function vO(t){return t.asyncQueue.enqueue(async()=>{const e=await k1(t),n=await R1(t);return e.setNetworkEnabled(!1),async function(s){const A=ue(s);A.L_.add(0),await Ja(A),A.q_.set("Offline")}(n)})}function yO(t,e){const n=new _n;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await function(c,d){const h=ue(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new J(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Za(o,`Failed to get document '${A} from cache`);i.reject(a)}}(await ny(t),e,n)),n.promise}function N1(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new Ag({next:f=>{d.Za(),i.enqueueAndForget(()=>Wv(A,h));const m=f.docs.has(o);!m&&f.fromCache?c.reject(new J(H.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&a&&a.source==="server"?c.reject(new J(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new qv(Wa(o.path),d,{includeMetadataChanges:!0,_a:!0});return zv(A,h)}(await Pa(t),t.asyncQueue,e,n,r)),r.promise}function BO(t,e){const n=new _n;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await Af(s,A,!0),a=new b1(A,o.Ts),c=a.ma(o.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const a=Za(o,`Failed to execute query '${A} against cache`);i.reject(a)}}(await ny(t),e,n)),n.promise}function P1(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new Ag({next:f=>{d.Za(),i.enqueueAndForget(()=>Wv(A,h)),f.fromCache&&a.source==="server"?c.reject(new J(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new qv(o,d,{includeMetadataChanges:!0,_a:!0});return zv(A,h)}(await Pa(t),t.asyncQueue,e,n,r)),r.promise}function xO(t,e){const n=new Ag(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){ue(s).Y_.add(A),A.next()}(await Pa(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){ue(s).Y_.delete(A)}(await Pa(t),n))}}function CO(t,e,n,r){const s=function(i,o){let a;return a=typeof i=="string"?PF().encode(i):i,function(d,h){return new hO(d,h)}(function(d,h){if(d instanceof Uint8Array)return h_(d,h);if(d instanceof ArrayBuffer)return h_(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Iu(e));t.asyncQueue.enqueueAndForget(async()=>{uO(await ry(t),s,r)})}function _O(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const A=ue(r);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await ny(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e,n){if(!n)throw new J(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function L1(t,e,n,r){if(e===!0&&r===!0)throw new J(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p_(t){if(!le.isDocumentKey(t))throw new J(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m_(t){if(le.isDocumentKey(t))throw new J(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function og(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye()}function it(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=og(t);throw new J(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function O1(t,e){if(e<=0)throw new J(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wD;switch(r.type){case"firstParty":return new xD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=g_.get(n);r&&(X("ComponentProvider","Removing Datastore"),g_.delete(n),r.terminate())}(this),Promise.resolve()}}function IO(t,e,n,r={}){var s;const A=(t=it(t,bu))._getSettings(),i=`${e}:${n}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=fn.MOCK_USER;else{o=LN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new J(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new fn(c)}t._authCredentials=new vD(new $T(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $n=class M1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new M1(this.firestore,e,this._query)}},kt=class V1{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new MA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new V1(this.firestore,e,this._key)}},MA=class H1 extends $n{constructor(e,n,r){super(e,n,Wa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new le(e))}withConverter(e){return new H1(this.firestore,e,this._path)}};function j1(t,e,...n){if(t=ke(t),sy("collection","path",e),t instanceof bu){const r=et.fromString(e,...n);return m_(r),new MA(t,null,r)}{if(!(t instanceof kt||t instanceof MA))throw new J(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return m_(r),new MA(t.firestore,null,r)}}function EO(t,e){if(t=it(t,bu),sy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $n(t,null,function(r){return new Ys(et.emptyPath(),r)}(e))}function cf(t,e,...n){if(t=ke(t),arguments.length===1&&(e=qT.newId()),sy("doc","path",e),t instanceof bu){const r=et.fromString(e,...n);return p_(r),new kt(t,null,new le(r))}{if(!(t instanceof kt||t instanceof MA))throw new J(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return p_(r),new kt(t.firestore,t instanceof MA?t.converter:null,new le(r))}}function K1(t,e){return t=ke(t),e=ke(e),(t instanceof kt||t instanceof MA)&&(e instanceof kt||e instanceof MA)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function G1(t,e){return t=ke(t),e=ke(e),t instanceof $n&&e instanceof $n&&t.firestore===e.firestore&&yu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Vv(this,"async_queue_retry"),this.Vu=()=>{const r=hh();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _n;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!li(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Wt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Gv.createAndSchedule(this,e,n,r,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&ye()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function k0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const A of r)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class bO{constructor(){this._progressObserver={},this._taskCompletionResolver=new _n,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=-1;let qt=class extends bu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new v_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v_(e),this._firestoreClient=void 0,await e}}};function Dn(t){if(t._terminated)throw new J(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z1(t),t._firestoreClient}function z1(t){var e,n,r;const s=t._freezeSettings(),A=function(o,a,c,d){return new YD(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,D1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new pO(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function FO(t,e){ws("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return W1(t,eu.provider,{build:r=>new Q1(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function UO(t){ws("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();W1(t,eu.provider,{build:n=>new dO(n,e.cacheSizeBytes)})}function W1(t,e,n){if((t=it(t,qt))._firestoreClient||t._terminated)throw new J(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new J(H.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},z1(t)}function SO(t){if(t._initialized&&!t._terminated)throw new J(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _n;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!gs.D())return Promise.resolve();const s=r+"main";await gs.delete(s)}(Lv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function QO(t){return function(n){const r=new _n;return n.asyncQueue.enqueueAndForget(async()=>eO(await ry(n),r)),r.promise}(Dn(t=it(t,qt)))}function kO(t){return wO(Dn(t=it(t,qt)))}function RO(t){return vO(Dn(t=it(t,qt)))}function NO(t,e){const n=Dn(t=it(t,qt)),r=new bO;return CO(n,t._databaseId,e,r),r}function PO(t,e){return _O(Dn(t=it(t,qt)),e).then(n=>n?new $n(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ys(Ot.fromBase64String(e))}catch(n){throw new J(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ys(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let A=0;A<r.length;++A)if(r[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=/^__.*__$/;class LO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new $a(e,this.data,n,this.fieldTransforms)}}class $1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function q1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class lg{constructor(e,n,r,s,A,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(q1(this.Cu)&&DO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class OO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Iu(e)}Qu(e,n,r,s=!1){return new lg({Cu:e,methodName:n,qu:r,path:bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function go(t){const e=t._freezeSettings(),n=Iu(t._databaseId);return new OO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cg(t,e,n,r,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,n,s);dy("Data must be an object, but it was:",i,r);const o=Y1(r,i);let a,c;if(A.merge)a=new ir(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=R0(e,h,n);if(!i.contains(f))throw new J(H.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);eU(d,f)||d.push(f)}a=new ir(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new LO(new Bn(o),a,c)}class Tu extends fo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tu}}function J1(t,e,n){return new lg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iy extends fo{_toFieldTransform(e){return new xu(e.path,new Ta)}isEqual(e){return e instanceof iy}}class oy extends fo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=J1(this,e,!0),r=this.Ku.map(A=>po(A,n)),s=new Yi(r);return new xu(e.path,s)}isEqual(e){return e instanceof oy&&Vc(this.Ku,e.Ku)}}class ay extends fo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=J1(this,e,!0),r=this.Ku.map(A=>po(A,n)),s=new Zi(r);return new xu(e.path,s)}isEqual(e){return e instanceof ay&&Vc(this.Ku,e.Ku)}}class ly extends fo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Fa(e.serializer,bF(e.serializer,this.$u));return new xu(e.path,n)}isEqual(e){return e instanceof ly&&this.$u===e.$u}}function cy(t,e,n,r){const s=t.Qu(1,e,n);dy("Data must be an object, but it was:",s,r);const A=[],i=Bn.empty();ho(r,(a,c)=>{const d=hy(e,a,n);c=ke(c);const h=s.Nu(d);if(c instanceof Tu)A.push(d);else{const f=po(c,h);f!=null&&(A.push(d),i.set(d,f))}});const o=new ir(A);return new $1(i,o,s.fieldTransforms)}function uy(t,e,n,r,s,A){const i=t.Qu(1,e,n),o=[R0(e,r,n)],a=[s];if(A.length%2!=0)throw new J(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)o.push(R0(e,A[f])),a.push(A[f+1]);const c=[],d=Bn.empty();for(let f=o.length-1;f>=0;--f)if(!eU(c,o[f])){const m=o[f];let v=a[f];v=ke(v);const y=i.Nu(m);if(v instanceof Tu)c.push(m);else{const T=po(v,y);T!=null&&(c.push(m),d.set(m,T))}}const h=new ir(c);return new $1(d,h,i.fieldTransforms)}function X1(t,e,n,r=!1){return po(n,t.Qu(r?4:3,e))}function po(t,e){if(Z1(t=ke(t)))return dy("Unsupported field value:",e,t),Y1(t,e);if(t instanceof fo)return function(r,s){if(!q1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const A=r._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const A=[];let i=0;for(const o of r){let a=po(o,s.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),A.push(a),i++}return{arrayValue:{values:A}}}(t,e)}return function(r,s){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bF(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const A=Ft.fromDate(r);return{timestampValue:Ua(s.serializer,A)}}if(r instanceof Ft){const A=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ua(s.serializer,A)}}if(r instanceof ag)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ys)return{bytesValue:OF(s.serializer,r._byteString)};if(r instanceof kt){const A=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:Qv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ay)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return Ev(o.serializer,a)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${og(r)}`)}(t,e)}function Y1(t,e){const n={};return oF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(t,(r,s)=>{const A=po(s,e.Mu(r));A!=null&&(n[r]=A)}),{mapValue:{fields:n}}}function Z1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof ag||t instanceof ys||t instanceof kt||t instanceof fo||t instanceof Ay)}function dy(t,e,n){if(!Z1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=og(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function R0(t,e,n){if((e=ke(e))instanceof ei)return e._internalPath;if(typeof e=="string")return hy(t,e);throw uf("Field path arguments must be of type string or ",t,!1,void 0,n)}const MO=new RegExp("[~\\*/\\[\\]]");function hy(t,e,n){if(e.search(MO)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ei(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uf(t,e,n,r,s){const A=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(A||i)&&(a+=" (found",A&&(a+=` in field ${r}`),i&&(a+=` in document ${s}`),a+=")"),new J(H.INVALID_ARGUMENT,o+t+a)}function eU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,s,A){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VO extends tu{data(){return super.data()}}function ug(t,e){return typeof e=="string"?hy(t,e):e instanceof ei?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class Fu extends fy{}function cA(t,e,...n){let r=[];e instanceof fy&&r.push(e),r=r.concat(n),function(A){const i=A.filter(a=>a instanceof gy).length,o=A.filter(a=>a instanceof dg).length;if(i>1||i>0&&o>0)throw new J(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class dg extends Fu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dg(e,n,r)}_apply(e){const n=this._parse(e);return rU(e._query,n),new $n(e.firestore,e.converter,B0(e._query,n))}_parse(e){const n=go(e.firestore);return function(A,i,o,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){B_(h,d);const m=[];for(const v of h)m.push(y_(a,A,v));f={arrayValue:{values:m}}}else f=y_(a,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||B_(h,d),f=X1(o,i,h,d==="in"||d==="not-in");return tt.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function HO(t,e,n){const r=e,s=ug("where",t);return dg._create(s,r,n)}class gy extends fy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ut.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,A){let i=s;const o=A.getFlattenedFilters();for(const a of o)rU(i,a),i=B0(i,a)}(e._query,n),new $n(e.firestore,e.converter,B0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends Fu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new py(e,n)}_apply(e){const n=function(s,A,i){if(s.startAt!==null)throw new J(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jc(A,i)}(e._query,this._field,this._direction);return new $n(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new Ys(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function jO(t,e="asc"){const n=e,r=ug("orderBy",t);return py._create(r,n)}class hg extends Fu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hg(e,n,r)}_apply(e){return new $n(e.firestore,e.converter,tf(e._query,this._limit,this._limitType))}}function KO(t){return O1("limit",t),hg._create("limit",t,"F")}function GO(t){return O1("limitToLast",t),hg._create("limitToLast",t,"L")}class fg extends Fu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new fg(e,n,r)}_apply(e){const n=nU(e,this.type,this._docOrFields,this._inclusive);return new $n(e.firestore,e.converter,function(s,A){return new Ys(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,n))}}function zO(...t){return fg._create("startAt",t,!0)}function WO(...t){return fg._create("startAfter",t,!1)}class gg extends Fu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new gg(e,n,r)}_apply(e){const n=nU(e,this.type,this._docOrFields,this._inclusive);return new $n(e.firestore,e.converter,function(s,A){return new Ys(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,n))}}function $O(...t){return gg._create("endBefore",t,!1)}function qO(...t){return gg._create("endAt",t,!0)}function nU(t,e,n,r){if(n[0]=ke(n[0]),n[0]instanceof tu)return function(A,i,o,a,c){if(!a)throw new J(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of aa(A))if(h.field.isKeyField())d.push(Ji(i,a.key));else{const f=a.data.field(h.field);if(Jf(f))throw new J(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new J(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new YA(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=go(t.firestore);return function(i,o,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new J(H.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let v=0;v<d.length;v++){const y=d[v];if(f[v].field.isKeyField()){if(typeof y!="string")throw new J(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!_v(i)&&y.indexOf("/")!==-1)throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const T=i.path.child(et.fromString(y));if(!le.isDocumentKey(T))throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const C=new le(T);m.push(Ji(o,C))}else{const T=X1(a,c,y);m.push(T)}}return new YA(m,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function y_(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new J(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_v(e)&&n.indexOf("/")!==-1)throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(et.fromString(n));if(!le.isDocumentKey(r))throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ji(t,new le(r))}if(n instanceof kt)return Ji(t,n._key);throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${og(n)}.`)}function B_(t,e){if(!Array.isArray(t)||t.length===0)throw new J(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rU(t,e){const n=function(s,A){for(const i of s)for(const o of i.getFlattenedFilters())if(A.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class my{convertValue(e,n="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ho(e,(s,A)=>{r[s]=this.convertValue(A,n)}),r}convertVectorValue(e){var n,r,s;const A=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(i=>It(i.doubleValue));return new Ay(A)}convertGeoPoint(e){return new ag(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){const n=Gs(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);Fe(JF(r));const s=new JA(r.get(1),r.get(3)),A=new le(r.popFirst(5));return s.isEqual(n)||Wt(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class JO extends my{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let zs=class extends tu{constructor(e,n,r,s,A,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ug("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},dc=class extends zs{data(e={}){return super.data(e)}},ti=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ki(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dc(this._firestore,this._userDataWriter,r.key,r,new ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new dc(s._firestore,s._userDataWriter,o.doc.key,o.doc,new ki(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>A||o.type!==3).map(o=>{const a=new dc(s._firestore,s._userDataWriter,o.doc.key,o.doc,new ki(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:XO(o.type),doc:a,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function XO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function sU(t,e){return t instanceof zs&&e instanceof zs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ti&&e instanceof ti&&t._firestore===e._firestore&&G1(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){t=it(t,kt);const e=it(t.firestore,qt);return N1(Dn(e),t._key).then(n=>wy(e,t,n))}class mo extends my{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function ZO(t){t=it(t,kt);const e=it(t.firestore,qt),n=Dn(e),r=new mo(e);return yO(n,t._key).then(s=>new zs(e,r,t._key,s,new ki(s!==null&&s.hasLocalMutations,!0),t.converter))}function eM(t){t=it(t,kt);const e=it(t.firestore,qt);return N1(Dn(e),t._key,{source:"server"}).then(n=>wy(e,t,n))}function tM(t){t=it(t,$n);const e=it(t.firestore,qt),n=Dn(e),r=new mo(e);return tU(t._query),P1(n,t._query).then(s=>new ti(e,r,t,s))}function nM(t){t=it(t,$n);const e=it(t.firestore,qt),n=Dn(e),r=new mo(e);return BO(n,t._query).then(s=>new ti(e,r,t,s))}function rM(t){t=it(t,$n);const e=it(t.firestore,qt),n=Dn(e),r=new mo(e);return P1(n,t._query,{source:"server"}).then(s=>new ti(e,r,t,s))}function x_(t,e,n){t=it(t,kt);const r=it(t.firestore,qt),s=pg(t.converter,e,n);return Uu(r,[cg(go(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Tt.none())])}function C_(t,e,n,...r){t=it(t,kt);const s=it(t.firestore,qt),A=go(s);let i;return i=typeof(e=ke(e))=="string"||e instanceof ei?uy(A,"updateDoc",t._key,e,n,r):cy(A,"updateDoc",t._key,e),Uu(s,[i.toMutation(t._key,Tt.exists(!0))])}function sM(t){return Uu(it(t.firestore,qt),[new qa(t._key,Tt.none())])}function AM(t,e){const n=it(t.firestore,qt),r=cf(t),s=pg(t.converter,e);return Uu(n,[cg(go(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Tt.exists(!1))]).then(()=>r)}function AU(t,...e){var n,r,s;t=ke(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||k0(e[i])||(A=e[i],i++);const o={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(k0(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let a,c,d;if(t instanceof kt)c=it(t.firestore,qt),d=Wa(t._key.path),a={next:h=>{e[i]&&e[i](wy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=it(t,$n);c=it(h.firestore,qt),d=h._query;const f=new mo(c);a={next:m=>{e[i]&&e[i](new ti(c,f,h,m))},error:e[i+1],complete:e[i+2]},tU(t._query)}return function(f,m,v,y){const T=new Ag(y),C=new qv(m,T,v);return f.asyncQueue.enqueueAndForget(async()=>zv(await Pa(f),C)),()=>{T.Za(),f.asyncQueue.enqueueAndForget(async()=>Wv(await Pa(f),C))}}(Dn(c),d,o,a)}function iM(t,e){return xO(Dn(t=it(t,qt)),k0(e)?e:{next:e})}function Uu(t,e){return function(r,s){const A=new _n;return r.asyncQueue.enqueueAndForget(async()=>JL(await ry(r),s,A)),A.promise}(Dn(t),e)}function wy(t,e,n){const r=n.docs.get(e._key),s=new mo(t);return new zs(t,s,e._key,r,new ki(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=go(e)}set(e,n,r){this._verifyNotCommitted();const s=yA(e,this._firestore),A=pg(s.converter,n,r),i=cg(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,Tt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const A=yA(e,this._firestore);let i;return i=typeof(n=ke(n))=="string"||n instanceof ei?uy(this._dataReader,"WriteBatch.update",A._key,n,r,s):cy(this._dataReader,"WriteBatch.update",A._key,n),this._mutations.push(i.toMutation(A._key,Tt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=yA(e,this._firestore);return this._mutations=this._mutations.concat(new qa(n._key,Tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function yA(t,e){if((t=ke(t)).firestore!==e)throw new J(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lM=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=go(n)}get(n){const r=yA(n,this._firestore),s=new JO(this._firestore);return this._transaction.lookup([r._key]).then(A=>{if(!A||A.length!==1)return ye();const i=A[0];if(i.isFoundDocument())return new tu(this._firestore,s,i.key,i,r.converter);if(i.isNoDocument())return new tu(this._firestore,s,r._key,null,r.converter);throw ye()})}set(n,r,s){const A=yA(n,this._firestore),i=pg(A.converter,r,s),o=cg(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,o),this}update(n,r,s,...A){const i=yA(n,this._firestore);let o;return o=typeof(r=ke(r))=="string"||r instanceof ei?uy(this._dataReader,"Transaction.update",i._key,r,s,A):cy(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=yA(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=yA(e,this._firestore),r=new mo(this._firestore);return super.get(e).then(s=>new zs(this._firestore,r,n._key,s._document,new ki(!1,!1),n.converter))}};function cM(t,e,n){t=it(t,qt);const r=Object.assign(Object.assign({},oM),n);return function(A){if(A.maxAttempts<1)throw new J(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(A,i,o){const a=new _n;return A.asyncQueue.enqueueAndForget(async()=>{const c=await mO(A);new gO(A.asyncQueue,c,o,i,a).au()}),a.promise}(Dn(t),s=>e(new lM(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(){return new Tu("deleteField")}function dM(){return new iy("serverTimestamp")}function hM(...t){return new oy("arrayUnion",t)}function fM(...t){return new ay("arrayRemove",t)}function gM(t){return new ly("increment",t)}(function(e,n=!0){(function(s){za=s})(oi),WA(new ms("firestore",(r,{instanceIdentifier:s,options:A})=>{const i=r.getProvider("app").getImmediate(),o=new qt(new yD(r.getProvider("auth-internal")),new _D(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new JA(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:n},A),o._setSettings(A),o},"PUBLIC").setMultipleInstances(!0)),Jr(dC,"4.7.3",e),Jr(dC,"4.7.3","esm2017")})();const pM="@firebase/firestore-compat",mM="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function I_(){if(!JD())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}let iU=class N0{constructor(e){this._delegate=e}static fromBase64String(e){return I_(),new N0(ys.fromBase64String(e))}static fromUint8Array(e){return __(),new N0(ys.fromUint8Array(e))}toBase64(){return I_(),this._delegate.toBase64()}toUint8Array(){return __(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){return wM(t,["next","error","complete"])}function wM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{enableIndexedDbPersistence(e,n){return FO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return UO(e._delegate)}clearIndexedDbPersistence(e){return SO(e._delegate)}}class oU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof JA||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ws("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){IO(this._delegate,e,n,r)}enableNetwork(){return kO(this._delegate)}disableNetwork(){return RO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,L1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return QO(this._delegate)}onSnapshotsInSync(e){return iM(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Da(this,j1(this._delegate,e))}catch(n){throw jn(n,"collection()","Firestore.collection()")}}doc(e){try{return new kr(this,cf(this._delegate,e))}catch(n){throw jn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hn(this,EO(this._delegate,e))}catch(n){throw jn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return cM(this._delegate,n=>e(new aU(this,n)))}batch(){return Dn(this._delegate),new lU(new aM(this._delegate,e=>Uu(this._delegate,e)))}loadBundle(e){return NO(this._delegate,e)}namedQuery(e){return PO(this._delegate,e).then(n=>n?new Hn(this,n):null)}}class mg extends my{constructor(e){super(),this.firestore=e}convertBytes(e){return new iU(new ys(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return kr.forKey(n,this.firestore,null)}}function yM(t){pD(t)}class aU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new mg(e)}get(e){const n=Ri(e);return this._delegate.get(n).then(r=>new nu(this._firestore,new zs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Ri(e);return r?(vy("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=Ri(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=Ri(e);return this._delegate.delete(n),this}}class lU{constructor(e){this._delegate=e}set(e,n,r){const s=Ri(e);return r?(vy("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=Ri(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=Ri(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ro{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new dc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ru(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ro.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let A=s.get(n);return A||(A=new ro(e,new mg(e),n),s.set(n,A)),A}}ro.INSTANCES=new WeakMap;class kr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new mg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new kr(n,new kt(n._delegate,r,new le(e)))}static forKey(e,n,r){return new kr(n,new kt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Da(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Da(this.firestore,j1(this._delegate,e))}catch(n){throw jn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof kt?K1(this._delegate,e):!1}set(e,n){n=vy("DocumentReference.set",n);try{return n?x_(this._delegate,e,n):x_(this._delegate,e)}catch(r){throw jn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?C_(this._delegate,e):C_(this._delegate,e,n,...r)}catch(s){throw jn(s,"updateDoc()","DocumentReference.update()")}}delete(){return sM(this._delegate)}onSnapshot(...e){const n=cU(e),r=uU(e,s=>new nu(this.firestore,new zs(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return AU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=ZO(this._delegate):(e==null?void 0:e.source)==="server"?n=eM(this._delegate):n=YO(this._delegate),n.then(r=>new nu(this.firestore,new zs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new kr(this.firestore,e?this._delegate.withConverter(ro.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jn(t,e,n){return t.message=t.message.replace(e,n),t}function cU(t){for(const e of t)if(typeof e=="object"&&!P0(e))return e;return{}}function uU(t,e){var n,r;let s;return P0(t[0])?s=t[0]:P0(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:A=>{s.next&&s.next(e(A))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class nu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new kr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return sU(this._delegate,e._delegate)}}class ru extends nu{data(e){const n=this._delegate.data(e);return this._delegate._converter||mD(n!==void 0),n}}class Hn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new mg(e)}where(e,n,r){try{return new Hn(this.firestore,cA(this._delegate,HO(e,n,r)))}catch(s){throw jn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Hn(this.firestore,cA(this._delegate,jO(e,n)))}catch(r){throw jn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hn(this.firestore,cA(this._delegate,KO(e)))}catch(n){throw jn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Hn(this.firestore,cA(this._delegate,GO(e)))}catch(n){throw jn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hn(this.firestore,cA(this._delegate,zO(...e)))}catch(n){throw jn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hn(this.firestore,cA(this._delegate,WO(...e)))}catch(n){throw jn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hn(this.firestore,cA(this._delegate,$O(...e)))}catch(n){throw jn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hn(this.firestore,cA(this._delegate,qO(...e)))}catch(n){throw jn(n,"endAt()","Query.endAt()")}}isEqual(e){return G1(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=nM(this._delegate):(e==null?void 0:e.source)==="server"?n=rM(this._delegate):n=tM(this._delegate),n.then(r=>new D0(this.firestore,new ti(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=cU(e),r=uU(e,s=>new D0(this.firestore,new ti(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return AU(this._delegate,n,r)}withConverter(e){return new Hn(this.firestore,e?this._delegate.withConverter(ro.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class BM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ru(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class D0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Hn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ru(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new BM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ru(this._firestore,r))})}isEqual(e){return sU(this._delegate,e._delegate)}}class Da extends Hn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new kr(this.firestore,e):null}doc(e){try{return e===void 0?new kr(this.firestore,cf(this._delegate)):new kr(this.firestore,cf(this._delegate,e))}catch(n){throw jn(n,"doc()","CollectionReference.doc()")}}add(e){return AM(this._delegate,e).then(n=>new kr(this.firestore,n))}isEqual(e){return K1(this._delegate,e._delegate)}withConverter(e){return new Da(this.firestore,e?this._delegate.withConverter(ro.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ri(t){return it(t,kt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(...e){this._delegate=new ei(...e)}static documentId(){return new yy(bt.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof ei?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._delegate=e}static serverTimestamp(){const e=dM();return e._methodName="FieldValue.serverTimestamp",new bi(e)}static delete(){const e=uM();return e._methodName="FieldValue.delete",new bi(e)}static arrayUnion(...e){const n=hM(...e);return n._methodName="FieldValue.arrayUnion",new bi(n)}static arrayRemove(...e){const n=fM(...e);return n._methodName="FieldValue.arrayRemove",new bi(n)}static increment(e){const n=gM(e);return n._methodName="FieldValue.increment",new bi(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM={Firestore:oU,GeoPoint:ag,Timestamp:Ft,Blob:iU,Transaction:aU,WriteBatch:lU,DocumentReference:kr,DocumentSnapshot:nu,Query:Hn,QueryDocumentSnapshot:ru,QuerySnapshot:D0,CollectionReference:Da,FieldPath:yy,FieldValue:bi,setLogLevel:yM,CACHE_SIZE_UNLIMITED:TO};function CM(t,e){t.INTERNAL.registerComponent(new ms("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},xM)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){CM(t,(e,n)=>new oU(e,n,new vM)),t.registerVersion(pM,mM)}_M(ss);function By(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}const bl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},To={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function dU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EM=IM,bM=dU,hU=new uo("auth","Firebase",dU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new $f("@firebase/auth");function TM(t,...e){df.logLevel<=Xe.WARN&&df.warn(`Auth (${oi}): ${t}`,...e)}function fh(t,...e){df.logLevel<=Xe.ERROR&&df.error(`Auth (${oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw Cy(t,...e)}function on(t,...e){return Cy(t,...e)}function xy(t,e,n){const r=Object.assign(Object.assign({},bM()),{[e]:n});return new uo("auth","Firebase",r).create(e,{appName:t.name})}function pn(t){return xy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function el(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&En(t,"argument-error"),xy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hU.create(t,...e)}function ne(t,e,...n){if(!t)throw Cy(e,...n)}function ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fh(e),new Error(e)}function Yr(t,e){t||ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _y(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_y()||IT()||"connection"in navigator)?navigator.onLine:!0}function UM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=ON()||hv()}get(){return FM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new Su(3e4,6e4);function Vt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ht(t,e,n,r,s={}){return gU(t,s,async()=>{let A={},i={};r&&(e==="GET"?i=r:A={body:JSON.stringify(r)});const o=Ga(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},A);return VN()||(c.referrerPolicy="no-referrer"),fU.fetch()(pU(t,t.config.apiHost,n,o),c)})}async function gU(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},SM),e);try{const s=new RM(t),A=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw jl(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const o=A.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw jl(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw jl(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw jl(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xy(t,d,c);En(t,d)}}catch(s){if(s instanceof Gn)throw s;En(t,"network-request-failed",{message:String(s)})}}async function tA(t,e,n,r,s={}){const A=await Ht(t,e,n,r,s);return"mfaPendingCredential"in A&&En(t,"multi-factor-auth-required",{_serverResponse:A}),A}function pU(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Iy(t.config,s):`${t.config.apiScheme}://${s}`}function kM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),QM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){return t!==void 0&&t.getResponse!==void 0}function T_(t){return t!==void 0&&t.enterprise!==void 0}class NM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return kM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t){return(await Ht(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function DM(t,e){return Ht(t,"GET","/v2/recaptchaConfig",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t,e){return Ht(t,"POST","/v1/accounts:delete",e)}async function OM(t,e){return Ht(t,"POST","/v1/accounts:update",e)}async function mU(t,e){return Ht(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MM(t,e=!1){const n=ke(t),r=await n.getIdToken(e),s=wg(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:r,authTime:hc(Np(s.auth_time)),issuedAtTime:hc(Np(s.iat)),expirationTime:hc(Np(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function Np(t){return Number(t)*1e3}function wg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const s=BT(n);return s?JSON.parse(s):(fh("Failed to decode base64 JWT payload"),null)}catch(s){return fh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function F_(t){const e=wg(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gn&&VM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ws(t,mU(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?wU(A.providerUserInfo):[],o=KM(t.providerData,i),a=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:o,metadata:new L0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function jM(t){const e=ke(t);await Au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function wU(t){return t.map(e=>{var{providerId:n}=e,r=By(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(t,e){const n=await gU(t,{},async()=>{const r=Ga({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=pU(t,s,"/v1/token",`key=${A}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",fU.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zM(t,e){return Ht(t,"POST","/v2/accounts:revokeToken",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=F_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:A}=await GM(e,n);this.updateTokensAndExpiration(r,s,Number(A))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:A}=n,i=new ca;return r&&(ne(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(ne(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ks{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,A=By(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new L0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const n=await Ws(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MM(this,e)}reload(){return jM(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Au(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(pn(this.auth));const e=await this.getIdToken();return await Ws(this,LM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,A,i,o,a,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,m=(A=n.phoneNumber)!==null&&A!==void 0?A:void 0,v=(i=n.photoURL)!==null&&i!==void 0?i:void 0,y=(o=n.tenantId)!==null&&o!==void 0?o:void 0,T=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:S,isAnonymous:U,providerData:N,stsTokenManager:B}=n;ne(_&&B,e,"internal-error");const x=ca.fromJSON(this.name,B);ne(typeof _=="string",e,"internal-error"),uA(h,e.name),uA(f,e.name),ne(typeof S=="boolean",e,"internal-error"),ne(typeof U=="boolean",e,"internal-error"),uA(m,e.name),uA(v,e.name),uA(y,e.name),uA(T,e.name),uA(C,e.name),uA(w,e.name);const I=new ks({uid:_,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:U,photoURL:v,phoneNumber:m,tenantId:y,stsTokenManager:x,createdAt:C,lastLoginAt:w});return N&&Array.isArray(N)&&(I.providerData=N.map(F=>Object.assign({},F))),T&&(I._redirectEventId=T),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new ca;s.updateFromServerResponse(n);const A=new ks({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Au(A),A}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?wU(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),o=new ca;o.updateFromIdToken(r);const a=new ks({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function yr(t){Yr(t instanceof Function,"Expected a class definition");let e=U_.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vU.type="NONE";const La=vU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e,n){return`firebase:${t}:${e}:${n}`}class ua{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:A}=this.auth;this.fullUserKey=Mi(this.userKey,s.apiKey,A),this.fullPersistenceKey=Mi("persistence",s.apiKey,A),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ks._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ua(yr(La),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||yr(La);const i=Mi(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(i);if(d){const h=ks._fromJSON(e,d);c!==A&&(o=h),A=c;break}}catch{}const a=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!a.length?new ua(A,e,r):(A=a[0],o&&await A._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new ua(A,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_U(e))return"Blackberry";if(IU(e))return"Webos";if(BU(e))return"Safari";if((e.includes("chrome/")||xU(e))&&!e.includes("edge/"))return"Chrome";if(Qu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yU(t=Nt()){return/firefox\//i.test(t)}function BU(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xU(t=Nt()){return/crios\//i.test(t)}function CU(t=Nt()){return/iemobile/i.test(t)}function Qu(t=Nt()){return/android/i.test(t)}function _U(t=Nt()){return/blackberry/i.test(t)}function IU(t=Nt()){return/webos/i.test(t)}function ku(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WM(t=Nt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function $M(t=Nt()){var e;return ku(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qM(){return ET()&&document.documentMode===10}function EU(t=Nt()){return ku(t)||Qu(t)||IU(t)||_U(t)||/windows phone/i.test(t)||CU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(t,e=[]){let n;switch(t){case"Browser":n=S_(Nt());break;case"Worker":n=`${S_(Nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=A=>new Promise((i,o)=>{try{const a=e(A);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e={}){return Ht(t,"GET","/v2/passwordPolicy",Vt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=6;class ZM{constructor(e){var n,r,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:YM,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,A,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(s=a.containsLowercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(A=a.containsUppercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Q_(this),this.idTokenSubscription=new Q_(this),this.beforeStateQueue=new JM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mU(this,{idToken:e}),r=await ks._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Lt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(s=a.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Au(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(pn(this));const n=e?ke(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(pn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(pn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XM(this),n=new ZM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const A=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(o,this,"internal-error"),o.then(()=>{i||A(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mt(t){return ke(t)}class Q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=TT(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tV(t){Ru=t}function Ey(t){return Ru.loadJS(t)}function nV(){return Ru.recaptchaV2Script}function rV(){return Ru.recaptchaEnterpriseScript}function sV(){return Ru.gapiScript}function TU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const AV="recaptcha-enterprise",iV="NO_RECAPTCHA";class oV{constructor(e){this.type=AV,this.auth=Mt(e)}async verify(e="verify",n=!1){async function r(A){if(!n){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,o)=>{DM(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new NM(a);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(a=>{o(a)})})}function s(A,i,o){const a=window.grecaptcha;T_(a)?a.enterprise.ready(()=>{a.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(iV)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{r(this.auth).then(o=>{if(!n&&T_(window.grecaptcha))s(o,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=rV();a.length!==0&&(a+=o),Ey(a).then(()=>{s(o,A,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function k_(t,e,n,r=!1){const s=new oV(t);let A;try{A=await s.verify(n)}catch{A=await s.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function iu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await k_(t,e,n,n==="getOobCode");return r(t,A)}else return r(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await k_(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(A)})}function aV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lV(t,e,n){const r=Mt(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),A=FU(e),{host:i,port:o}=cV(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${A}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||uV()}function FU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cV(t){const e=FU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const A=s[1];return{host:A,port:R_(r.substr(A.length+1))}}else{const[A,i]=r.split(":");return{host:A,port:R_(i)}}}function R_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,n){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e){return Ht(t,"POST","/v1/accounts:resetPassword",Vt(t,e))}async function dV(t,e){return Ht(t,"POST","/v1/accounts:update",e)}async function hV(t,e){return Ht(t,"POST","/v1/accounts:signUp",e)}async function fV(t,e){return Ht(t,"POST","/v1/accounts:update",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e){return tA(t,"POST","/v1/accounts:signInWithPassword",Vt(t,e))}async function vg(t,e){return Ht(t,"POST","/v1/accounts:sendOobCode",Vt(t,e))}async function pV(t,e){return vg(t,e)}async function mV(t,e){return vg(t,e)}async function wV(t,e){return vg(t,e)}async function vV(t,e){return vg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e){return tA(t,"POST","/v1/accounts:signInWithEmailLink",Vt(t,e))}async function BV(t,e){return tA(t,"POST","/v1/accounts:signInWithEmailLink",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends tl{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ou(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ou(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,n,"signInWithPassword",gV);case"emailLink":return yV(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,r,"signUpPassword",hV);case"emailLink":return BV(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(t,e){return tA(t,"POST","/v1/accounts:signInWithIdp",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV="http://localhost";class Bs extends tl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,A=By(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new Bs(r,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Ds(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ds(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ds(e,n)}buildRequest(){const e={requestUri:xV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ga(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e){return Ht(t,"POST","/v1/accounts:sendVerificationCode",Vt(t,e))}async function _V(t,e){return tA(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,e))}async function IV(t,e){const n=await tA(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,e));if(n.temporaryProof)throw jl(t,"account-exists-with-different-credential",n);return n}const EV={USER_NOT_FOUND:"user-not-found"};async function bV(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return tA(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,n),EV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends tl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Vi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Vi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return _V(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return IV(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return bV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A}=e;return!r&&!n&&!s&&!A?null:new Vi({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FV(t){const e=ea(Ll(t)).link,n=e?ea(Ll(e)).deep_link_id:null,r=ea(Ll(t)).deep_link_id;return(r?ea(Ll(r)).link:null)||r||n||e||t}class yg{constructor(e){var n,r,s,A,i,o;const a=ea(Ll(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=TV((s=a.mode)!==null&&s!==void 0?s:null);ne(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=a.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=FV(e);try{return new yg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.providerId=di.PROVIDER_ID}static credential(e,n){return ou._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yg.parseLink(n);return ne(r,"argument-error"),ou._fromEmailAndCode(e,r.code,r.tenantId)}}di.PROVIDER_ID="password";di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends nA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class da extends nl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ne("providerId"in n&&"signInMethod"in n,"argument-error"),Bs._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ne(e.idToken||e.accessToken,"argument-error"),Bs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return da.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return da.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:A,nonce:i,providerId:o}=e;if(!r&&!s&&!n&&!A||!o)return null;try{return new da(o)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:A})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends nl{constructor(){super("facebook.com")}static credential(e){return Bs._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bs._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return is.credential(n,r)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends nl{constructor(){super("github.com")}static credential(e){return Bs._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="http://localhost";class Oa extends tl{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ds(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ds(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ds(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:A}=n;return!r||!s||!A||r!==s?null:new Oa(r,A)}static _create(e,n){return new Oa(e,n)}buildRequest(){return{requestUri:UV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="saml.";class hf extends nA{constructor(e){ne(e.startsWith(SV),"argument-error"),super(e)}static credentialFromResult(e){return hf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return hf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Oa.fromJSON(e);return ne(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Oa._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends nl{constructor(){super("twitter.com")}static credential(e,n){return Bs._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return as.credential(n,r)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e){return tA(t,"POST","/v1/accounts:signUp",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const A=await ks._fromIdTokenResponse(e,r,s),i=N_(r);return new Mr({user:A,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=N_(r);return new Mr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function N_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t){var e;if(Lt(t.app))return Promise.reject(pn(t));const n=Mt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Mr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await SU(n,{returnSecureToken:!0}),s=await Mr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends Gn{constructor(e,n,r,s){var A;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ff.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ff(e,n,r,s)}}function QU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?ff._fromErrorAndOperation(t,A,e,r):A})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t,e){const n=ke(t);await Bg(!0,n,e);const{providerUserInfo:r}=await OM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=kU(r||[]);return n.providerData=n.providerData.filter(A=>s.has(A.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function by(t,e,n=!1){const r=await Ws(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mr._forOperation(t,"link",r)}async function Bg(t,e,n){await Au(e);const r=kU(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";ne(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(t,e,n=!1){const{auth:r}=t;if(Lt(r.app))return Promise.reject(pn(r));const s="reauthenticate";try{const A=await Ws(t,QU(r,s,e,t),n);ne(A.idToken,r,"internal-error");const i=wg(A.idToken);ne(i,r,"internal-error");const{sub:o}=i;return ne(t.uid===o,r,"user-mismatch"),Mr._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&En(r,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e,n=!1){if(Lt(t.app))return Promise.reject(pn(t));const r="signIn",s=await QU(t,r,e),A=await Mr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(A.user),A}async function xg(t,e){return NU(Mt(t),e)}async function PU(t,e){const n=ke(t);return await Bg(!1,n,e.providerId),by(n,e)}async function DU(t,e){return RU(ke(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e){return tA(t,"POST","/v1/accounts:signInWithCustomToken",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){if(Lt(t.app))return Promise.reject(pn(t));const n=Mt(t),r=await RV(n,{token:e,returnSecureToken:!0}),s=await Mr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ty._fromServerResponse(e,n):"totpInfo"in n?Fy._fromServerResponse(e,n):En(e,"internal-error")}}class Ty extends Nu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ty(n)}}class Fy extends Nu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Fy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e,n){var r;ne(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ne(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ne(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ne(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uy(t){const e=Mt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PV(t,e,n){const r=Mt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Cg(r,s,n),await iu(r,s,"getOobCode",mV)}async function DV(t,e,n){await UU(ke(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uy(t),r})}async function LV(t,e){await fV(ke(t),{oobCode:e})}async function LU(t,e){const n=ke(t),r=await UU(n,{oobCode:e}),s=r.requestType;switch(ne(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(r.mfaInfo,n,"internal-error");default:ne(r.email,n,"internal-error")}let A=null;return r.mfaInfo&&(A=Nu._fromServerResponse(Mt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:A},operation:s}}async function OV(t,e){const{data:n}=await LU(ke(t),e);return n.email}async function MV(t,e,n){if(Lt(t.app))return Promise.reject(pn(t));const r=Mt(t),i=await iu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SU).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Uy(t),a}),o=await Mr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function VV(t,e,n){return Lt(t.app)?Promise.reject(pn(t)):xg(ke(t),di.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uy(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e,n){const r=Mt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function A(i,o){ne(o.handleCodeInApp,r,"argument-error"),o&&Cg(r,i,o)}A(s,n),await iu(r,s,"getOobCode",wV)}function jV(t,e){const n=yg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function KV(t,e,n){if(Lt(t.app))return Promise.reject(pn(t));const r=ke(t),s=di.credentialWithLink(e,n||su());return ne(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),xg(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e){return Ht(t,"POST","/v1/accounts:createAuthUri",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){const n=_y()?su():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await GV(ke(t),r);return s||[]}async function WV(t,e){const n=ke(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Cg(n.auth,s,e);const{email:A}=await pV(n.auth,s);A!==t.email&&await t.reload()}async function $V(t,e,n){const r=ke(t),A={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Cg(r.auth,A,n);const{email:i}=await vV(r.auth,A);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(t,e){return Ht(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ke(t),A={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await Ws(r,qV(r.auth,A));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function XV(t,e){const n=ke(t);return Lt(n.auth.app)?Promise.reject(pn(n.auth)):OU(n,e,null)}function YV(t,e){return OU(ke(t),null,e)}async function OU(t,e,n){const{auth:r}=t,A={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(A.email=e),n&&(A.password=n);const i=await Ws(t,dV(r,A));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},A=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const i=(n=(e=wg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new ha(A,o)}}if(!r)return null;switch(r){case"facebook.com":return new eH(A,s);case"github.com":return new tH(A,s);case"google.com":return new nH(A,s);case"twitter.com":return new rH(A,s,t.screenName||null);case"custom":case"anonymous":return new ha(A,null);default:return new ha(A,r,s)}}class ha{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class MU extends ha{constructor(e,n,r,s){super(e,n,r),this.username=s}}class eH extends ha{constructor(e,n){super(e,"facebook.com",n)}}class tH extends MU{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class nH extends ha{constructor(e,n){super(e,"google.com",n)}}class rH extends MU{constructor(e,n,r){super(e,"twitter.com",n,r)}}function sH(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ZV(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ni("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ni("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ni._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ni._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Mt(e),s=n.customData._serverResponse,A=(s.mfaInfo||[]).map(o=>Nu._fromServerResponse(r,o));ne(s.mfaPendingCredential,r,"internal-error");const i=Ni._fromMfaPendingCredential(s.mfaPendingCredential);return new Sy(i,A,async o=>{const a=await o._process(r,i);delete s.mfaInfo,delete s.mfaPendingCredential;const c=Object.assign(Object.assign({},s),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const d=await Mr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return ne(n.user,r,"internal-error"),Mr._forOperation(n.user,n.operationType,c);default:En(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function AH(t,e){var n;const r=ke(t),s=e;return ne(e.customData.operationType,r,"argument-error"),ne((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Sy._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(t,e){return Ht(t,"POST","/v2/accounts/mfaEnrollment:start",Vt(t,e))}function oH(t,e){return Ht(t,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(t,e))}function aH(t,e){return Ht(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(t,e))}class Qy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Nu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Qy(e)}async getSession(){return Ni._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),A=await Ws(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(A),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Ws(this.user,aH(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:A})=>A!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Pp=new WeakMap;function lH(t){const e=ke(t);return Pp.has(e)||Pp.set(e,Qy._fromUser(e)),Pp.get(e)}const gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=1e3,uH=10;class HU extends VU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},A=this.storage.getItem(r);qM()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,uH):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}HU.type="LOCAL";const ky=HU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU extends VU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jU.type="SESSION";const so=jU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _g(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:A}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async c=>c(n.origin,A)),a=await dH(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_g.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((o,a)=>{const c=Pu("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),o(f.data.response);break;default:clearTimeout(d),clearTimeout(A),a(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return window}function fH(t){Xt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}async function gH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mH(){return Ry()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="firebaseLocalStorageDb",wH=1,pf="firebaseLocalStorage",GU="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ig(t,e){return t.transaction([pf],e?"readwrite":"readonly").objectStore(pf)}function vH(){const t=indexedDB.deleteDatabase(KU);return new Du(t).toPromise()}function O0(){const t=indexedDB.open(KU,wH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pf,{keyPath:GU})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pf)?e(r):(r.close(),await vH(),e(await O0()))})})}async function P_(t,e,n){const r=Ig(t,!0).put({[GU]:e,value:n});return new Du(r).toPromise()}async function yH(t,e){const n=Ig(t,!1).get(e),r=await new Du(n).toPromise();return r===void 0?null:r.value}function D_(t,e){const n=Ig(t,!0).delete(e);return new Du(n).toPromise()}const BH=800,xH=3;class zU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await O0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ry()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_g._getInstance(mH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await gH(),!this.activeServiceWorker)return;this.sender=new hH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await O0();return await P_(e,gf,"1"),await D_(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=Ig(s,!1).getAll();return new Du(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zU.type="LOCAL";const au=zU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(t,e){return Ht(t,"POST","/v2/accounts/mfaSignIn:start",Vt(t,e))}function _H(t,e){return Ht(t,"POST","/v2/accounts/mfaSignIn:finalize",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH=500,EH=6e4,Cd=1e12;class bH{constructor(e){this.auth=e,this.counter=Cd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new TH(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Cd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Cd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Cd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class TH{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ne(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=FH(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},EH)},IH))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function FH(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=TU("rcb"),UH=new Su(3e4,6e4);class SH{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Xt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ne(QH(n),e,"argument-error"),this.shouldResolveImmediately(n)&&b_(Xt().grecaptcha)?Promise.resolve(Xt().grecaptcha):new Promise((r,s)=>{const A=Xt().setTimeout(()=>{s(on(e,"network-request-failed"))},UH.get());Xt()[Dp]=()=>{Xt().clearTimeout(A),delete Xt()[Dp];const o=Xt().grecaptcha;if(!o||!b_(o)){s(on(e,"internal-error"));return}const a=o.render;o.render=(c,d)=>{const h=a(c,d);return this.counter++,h},this.hostLanguage=n,r(o)};const i=`${nV()}?${Ga({onload:Dp,render:"explicit",hl:n})}`;Ey(i).catch(()=>{clearTimeout(A),s(on(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Xt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function QH(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class kH{async load(e){return new bH(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="recaptcha",RH={theme:"light",type:"image"};let NH=class{constructor(e,n,r=Object.assign({},RH)){this.parameters=r,this.type=WU,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mt(e),this.isInvisible=this.parameters.size==="invisible",ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ne(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kH:new SH,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const A=i=>{i&&(this.tokenChangeListeners.delete(A),s(i))};this.tokenChangeListeners.add(A),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Xt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ne(_y()&&!Ry(),this.auth,"internal-error"),await PH(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await PM(this.auth);ne(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function PH(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Vi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function DH(t,e,n){if(Lt(t.app))return Promise.reject(pn(t));const r=Mt(t),s=await Eg(r,e,ke(n));return new Ny(s,A=>xg(r,A))}async function LH(t,e,n){const r=ke(t);await Bg(!1,r,"phone");const s=await Eg(r.auth,e,ke(n));return new Ny(s,A=>PU(r,A))}async function OH(t,e,n){const r=ke(t);if(Lt(r.auth.app))return Promise.reject(pn(r.auth));const s=await Eg(r.auth,e,ke(n));return new Ny(s,A=>DU(r,A))}async function Eg(t,e,n){var r;const s=await n.verify();try{ne(typeof s=="string",t,"argument-error"),ne(n.type===WU,t,"argument-error");let A;if(typeof e=="string"?A={phoneNumber:e}:A=e,"session"in A){const i=A.session;if("phoneNumber"in A)return ne(i.type==="enroll",t,"internal-error"),(await iH(t,{idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{ne(i.type==="signin",t,"internal-error");const o=((r=A.multiFactorHint)===null||r===void 0?void 0:r.uid)||A.multiFactorUid;return ne(o,t,"missing-multi-factor-info"),(await CH(t,{mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:i}=await CV(t,{phoneNumber:A.phoneNumber,recaptchaToken:s});return i}}finally{n._reset()}}async function MH(t,e){const n=ke(t);if(Lt(n.auth.app))return Promise.reject(pn(n.auth));await by(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao=class gh{constructor(e){this.providerId=gh.PROVIDER_ID,this.auth=Mt(e)}verifyPhoneNumber(e,n){return Eg(this.auth,e,ke(n))}static credential(e,n){return Vi._fromVerification(e,n)}static credentialFromResult(e){const n=e;return gh.credentialFromTaggedObject(n)}static credentialFromError(e){return gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Vi._fromTokenResponse(n,r):null}};Ao.PROVIDER_ID="phone";Ao.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,e){return e?yr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends tl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VH(t){return NU(t.auth,new Py(t),t.bypassAuthState)}function HH(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),RU(n,new Py(t),t.bypassAuthState)}async function jH(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),by(n,new Py(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,n,r,s,A=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:A,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VH;case"linkViaPopup":case"linkViaRedirect":return jH;case"reauthViaPopup":case"reauthViaRedirect":return HH;default:En(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH=new Su(2e3,1e4);async function GH(t,e,n){if(Lt(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const r=Mt(t);el(t,e,nA);const s=wo(r,n);return new Rs(r,"signInViaPopup",e,s).executeNotNull()}async function zH(t,e,n){const r=ke(t);if(Lt(r.auth.app))return Promise.reject(on(r.auth,"operation-not-supported-in-this-environment"));el(r.auth,e,nA);const s=wo(r.auth,n);return new Rs(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function WH(t,e,n){const r=ke(t);el(r.auth,e,nA);const s=wo(r.auth,n);return new Rs(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Rs extends $U{constructor(e,n,r,s,A){super(e,n,s,A),this.provider=r,this.authWindow=null,this.pollId=null,Rs.currentPopupAction&&Rs.currentPopupAction.cancel(),Rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Pu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KH.get())};e()}}Rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H="pendingRedirect",fc=new Map;class qH extends $U{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const r=await JH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JH(t,e){const n=JU(e),r=qU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Dy(t,e){return qU(t)._set(JU(e),"true")}function XH(){fc.clear()}function Ly(t,e){fc.set(t._key(),e)}function qU(t){return yr(t._redirectPersistence)}function JU(t){return Mi($H,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(t,e,n){return ZH(t,e,n)}async function ZH(t,e,n){if(Lt(t.app))return Promise.reject(pn(t));const r=Mt(t);el(t,e,nA),await r._initializationPromise;const s=wo(r,n);return await Dy(s,r),s._openRedirect(r,e,"signInViaRedirect")}function ej(t,e,n){return tj(t,e,n)}async function tj(t,e,n){const r=ke(t);if(el(r.auth,e,nA),Lt(r.auth.app))return Promise.reject(pn(r.auth));await r.auth._initializationPromise;const s=wo(r.auth,n);await Dy(s,r.auth);const A=await XU(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",A)}function nj(t,e,n){return rj(t,e,n)}async function rj(t,e,n){const r=ke(t);el(r.auth,e,nA),await r.auth._initializationPromise;const s=wo(r.auth,n);await Bg(!1,r,e.providerId),await Dy(s,r.auth);const A=await XU(r);return s._openRedirect(r.auth,e,"linkViaRedirect",A)}async function sj(t,e){return await Mt(t)._initializationPromise,bg(t,e,!1)}async function bg(t,e,n=!1){if(Lt(t.app))return Promise.reject(pn(t));const r=Mt(t),s=wo(r,e),i=await new qH(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function XU(t){const e=Pu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=10*60*1e3;class YU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ij(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ZU(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Aj&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(e))}saveEventToCache(e){this.cachedEventUids.add(L_(e)),this.lastProcessedEventTime=Date.now()}}function L_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ij(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t,e={}){return Ht(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aj=/^https?/;async function lj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eS(t);for(const n of e)try{if(cj(n))return}catch{}En(t,"unauthorized-domain")}function cj(t){const e=su(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!aj.test(n))return!1;if(oj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new Su(3e4,6e4);function O_(){const t=Xt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dj(t){return new Promise((e,n)=>{var r,s,A;function i(){O_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O_(),n(on(t,"network-request-failed"))},timeout:uj.get()})}if(!((s=(r=Xt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=Xt().gapi)===null||A===void 0)&&A.load)i();else{const o=TU("iframefcb");return Xt()[o]=()=>{gapi.load?i():n(on(t,"network-request-failed"))},Ey(`${sV()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw ph=null,e})}let ph=null;function hj(t){return ph=ph||dj(t),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=new Su(5e3,15e3),gj="__/auth/iframe",pj="emulator/auth/iframe",mj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vj(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Iy(e,pj):`https://${t.config.authDomain}/${gj}`,r={apiKey:e.apiKey,appName:t.name,v:oi},s=wj.get(t.config.apiHost);s&&(r.eid=s);const A=t._getFrameworks();return A.length&&(r.fw=A.join(",")),`${n}?${Ga(r).slice(1)}`}async function yj(t){const e=await hj(t),n=Xt().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:vj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mj,dontclear:!0},r=>new Promise(async(s,A)=>{await r.restyle({setHideOnLeave:!1});const i=on(t,"network-request-failed"),o=Xt().setTimeout(()=>{A(i)},fj.get());function a(){Xt().clearTimeout(o),s(r)}r.ping(a).then(a,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xj=500,Cj=600,_j="_blank",Ij="http://localhost";class M_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ej(t,e,n,r=xj,s=Cj){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},Bj),{width:r.toString(),height:s.toString(),top:A,left:i}),c=Nt().toLowerCase();n&&(o=xU(c)?_j:n),yU(c)&&(e=e||Ij,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if($M(c)&&o!=="_self")return bj(e||"",o),new M_(null);const h=window.open(e||"",o,d);ne(h,t,"popup-blocked");try{h.focus()}catch{}return new M_(h)}function bj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="__/auth/handler",Fj="emulator/auth/handler",Uj=encodeURIComponent("fac");async function M0(t,e,n,r,s,A){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:s};if(e instanceof nA){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",zN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(A||{}))i[d]=h}if(e instanceof nl){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),c=a?`#${Uj}=${encodeURIComponent(a)}`:"";return`${Sj(t)}?${Ga(o).slice(1)}${c}`}function Sj({config:t}){return t.emulator?Iy(t,Fj):`https://${t.authDomain}/${Tj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="webStorageSupport";class Qj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=so,this._completeRedirectFn=bg,this._overrideRedirectResult=Ly}async _openPopup(e,n,r,s){var A;Yr((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await M0(e,n,r,su(),s);return Ej(e,i,Pu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const A=await M0(e,n,r,su(),s);return fH(A),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:A}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(A,"If manager is not set, promise should be"),A)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yj(e),r=new YU(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lp,{type:Lp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[Lp];i!==void 0&&n(!!i),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EU()||BU()||ku()}}const kj=Qj;class Rj{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ds("unexpected MultiFactorSessionType")}}}class Oy extends Rj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Oy(e)}_finalizeEnroll(e,n,r){return oH(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return _H(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class tS{constructor(){}static assertion(e){return Oy._fromCredential(e)}}tS.FACTOR_ID="phone";var V_="@firebase/auth",H_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(t){WA(new ms("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;ne(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bU(t)},c=new eV(r,s,A,a);return aV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),WA(new ms("auth-internal",e=>{const n=Mt(e.getProvider("auth").getImmediate());return(r=>new Nj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(V_,H_,Pj(t)),Jr(V_,H_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=5*60;PN("authIdTokenMaxAge");function Oj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const A=on("internal-error");A.customData=s,n(A)},r.type="text/javascript",r.charset="UTF-8",Oj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=2e3;async function Vj(t,e,n){var r;const{BuildInfo:s}=io();Yr(e.sessionId,"AuthEvent did not contain a session ID");const A=await zj(e.sessionId),i={};return ku()?i.ibi=s.packageName:Qu()?i.apn=s.packageName:En(t,"operation-not-supported-in-this-environment"),s.displayName&&(i.appDisplayName=s.displayName),i.sessionId=A,M0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,i)}async function Hj(t){const{BuildInfo:e}=io(),n={};ku()?n.iosBundleId=e.packageName:Qu()?n.androidPackageName=e.packageName:En(t,"operation-not-supported-in-this-environment"),await eS(t,n)}function jj(t){const{cordova:e}=io();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,WM()?"_blank":"_system","location=yes"),n(s)})})}async function Kj(t,e,n){const{cordova:r}=io();let s=()=>{};try{await new Promise((A,i)=>{let o=null;function a(){var h;A();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{i(on(t,"redirect-cancelled-by-user"))},Mj))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(a),document.addEventListener("resume",c,!1),Qu()&&document.addEventListener("visibilitychange",d,!1),s=()=>{e.removePassiveListener(a),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{s()}}function Gj(t){var e,n,r,s,A,i,o,a,c,d;const h=io();ne(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne(typeof((A=(s=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||A===void 0?void 0:A.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((a=(o=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||o===void 0?void 0:o.browsertab)===null||a===void 0?void 0:a.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function zj(t){const e=Wj(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function Wj(t){if(Yr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=20;class qj extends YU{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Jj(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Zj(),postBody:null,tenantId:t.tenantId,error:on(t,"no-auth-event")}}function Xj(t,e){return V0()._set(H0(t),e)}async function j_(t){const e=await V0()._get(H0(t));return e&&await V0()._remove(H0(t)),e}function Yj(t,e){var n,r;const s=tK(e);if(s.includes("/__/auth/callback")){const A=mh(s),i=A.firebaseError?eK(decodeURIComponent(A.firebaseError)):null,o=(r=(n=i==null?void 0:i.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],a=o?on(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function Zj(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<$j;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function V0(){return yr(ky)}function H0(t){return Mi("authEvent",t.config.apiKey,t.name)}function eK(t){try{return JSON.parse(t)}catch{return null}}function tK(t){const e=mh(t),n=e.link?decodeURIComponent(e.link):void 0,r=mh(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return mh(s).link||s||r||n||t}function mh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ea(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=500;class rK{constructor(){this._redirectPersistence=so,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bg,this._overrideRedirectResult=Ly}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new qj(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){En(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,s){Gj(e);const A=await this._initialize(e);await A.initialized(),A.resetRedirect(),XH(),await this._originValidation(e);const i=Jj(e,r,s);await Xj(e,i);const o=await Vj(e,i,n),a=await jj(o);return Kj(e,A,a)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Hj(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:s,BuildInfo:A}=io(),i=setTimeout(async()=>{await j_(e),n.onEvent(K_())},nK),o=async d=>{clearTimeout(i);const h=await j_(e);let f=null;h&&(d!=null&&d.url)&&(f=Yj(h,d.url)),n.onEvent(f||K_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const a=s,c=`${A.packageName.toLowerCase()}://`;io().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&o({url:d}),typeof a=="function")try{a(d)}catch(h){console.error(h)}}}}const sK=rK;function K_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:on("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(t,e){Mt(t)._logFramework(e)}var iK="@firebase/auth-compat",oK="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=1e3;function gc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function lK(){return gc()==="http:"||gc()==="https:"}function nS(t=Nt()){return!!((gc()==="file:"||gc()==="ionic:"||gc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cK(){return hv()||dv()}function uK(){return ET()&&(document==null?void 0:document.documentMode)===11}function dK(t=Nt()){return/Edge\/\d+/.test(t)}function hK(t=Nt()){return uK()||dK(t)}function rS(){try{const t=self.localStorage,e=Pu();if(t)return t.setItem(e,"1"),t.removeItem(e),hK()?Mc():!0}catch{return My()&&Mc()}return!1}function My(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Op(){return(lK()||IT()||nS())&&!cK()&&rS()&&!My()}function sS(){return nS()&&typeof document<"u"}async function fK(){return sS()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},aK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function gK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr={LOCAL:"local",NONE:"none",SESSION:"session"},Tl=ne,AS="persistence";function pK(t,e){if(Tl(Object.values(mr).includes(e),t,"invalid-persistence-type"),hv()){Tl(e!==mr.SESSION,t,"unsupported-persistence-type");return}if(dv()){Tl(e===mr.NONE,t,"unsupported-persistence-type");return}if(My()){Tl(e===mr.NONE||e===mr.LOCAL&&Mc(),t,"unsupported-persistence-type");return}Tl(e===mr.NONE||rS(),t,"unsupported-persistence-type")}async function j0(t){await t._initializationPromise;const e=iS(),n=Mi(AS,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function mK(t,e){const n=iS();if(!n)return[];const r=Mi(AS,t,e);switch(n.getItem(r)){case mr.NONE:return[La];case mr.LOCAL:return[au,so];case mr.SESSION:return[so];default:return[]}}function iS(){var t;try{return((t=gK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wK=ne;class IA{constructor(){this.browserResolver=yr(kj),this.cordovaResolver=yr(sK),this.underlyingResolver=null,this._redirectPersistence=so,this._completeRedirectFn=bg,this._overrideRedirectResult=Ly}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,s)}async _openRedirect(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await fK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){return t.unwrap()}function vK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(t){return aS(t)}function BK(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new xK(t,AH(t,e))}else if(r){const s=aS(e),A=e;s&&(A.credential=s,A.tenantId=r.tenantId||void 0,A.email=r.email||void 0,A.phoneNumber=r.phoneNumber||void 0)}}function aS(t){const{_tokenResponse:e}=t instanceof Gn?t.customData:t;if(!e)return null;if(!(t instanceof Gn)&&"temporaryProof"in e&&"phoneNumber"in e)return Ao.credentialFromResult(t);const n=e.providerId;if(!n||n===bl.PASSWORD)return null;let r;switch(n){case bl.GOOGLE:r=is;break;case bl.FACEBOOK:r=As;break;case bl.GITHUB:r=os;break;case bl.TWITTER:r=as;break;default:const{oauthIdToken:s,oauthAccessToken:A,oauthTokenSecret:i,pendingToken:o,nonce:a}=e;return!A&&!i&&!s&&!o?null:o?n.startsWith("saml.")?Oa._create(n,o):Bs._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:s,accessToken:A}):new da(n).credential({idToken:s,accessToken:A,rawNonce:a})}return t instanceof Gn?r.credentialFromError(t):r.credentialFromResult(t)}function tr(t,e){return e.catch(n=>{throw n instanceof Gn&&BK(t,n),n}).then(n=>{const r=n.operationType,s=n.user;return{operationType:r,credential:yK(n),additionalUserInfo:sH(n),user:Ns.getOrCreate(s)}})}async function K0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>tr(t,n.confirm(r))}}class xK{constructor(e,n){this.resolver=n,this.auth=vK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return tr(oS(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this._delegate=e,this.multiFactor=lH(e)}static getOrCreate(e){return Ns.USER_MAP.has(e)||Ns.USER_MAP.set(e,new Ns(e)),Ns.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return tr(this.auth,PU(this._delegate,e))}async linkWithPhoneNumber(e,n){return K0(this.auth,LH(this._delegate,e,n))}async linkWithPopup(e){return tr(this.auth,WH(this._delegate,e,IA))}async linkWithRedirect(e){return await j0(Mt(this.auth)),nj(this._delegate,e,IA)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return tr(this.auth,DU(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return K0(this.auth,OH(this._delegate,e,n))}reauthenticateWithPopup(e){return tr(this.auth,zH(this._delegate,e,IA))}async reauthenticateWithRedirect(e){return await j0(Mt(this.auth)),ej(this._delegate,e,IA)}sendEmailVerification(e){return WV(this._delegate,e)}async unlink(e){return await kV(this._delegate,e),this}updateEmail(e){return XV(this._delegate,e)}updatePassword(e){return YV(this._delegate,e)}updatePhoneNumber(e){return MH(this._delegate,e)}updateProfile(e){return JV(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return $V(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ns.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=ne;class G0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Fl(r,"invalid-api-key",{appName:e.name}),Fl(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?IA:void 0;this._delegate=n.initialize({options:{persistence:CK(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(EM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){lV(this._delegate,e,n)}applyActionCode(e){return LV(this._delegate,e)}checkActionCode(e){return LU(this._delegate,e)}confirmPasswordReset(e,n){return DV(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return tr(this._delegate,MV(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return zV(this._delegate,e)}isSignInWithEmailLink(e){return jV(this._delegate,e)}async getRedirectResult(){Fl(Op(),this._delegate,"operation-not-supported-in-this-environment");const e=await sj(this._delegate,IA);return e?tr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){AK(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:s,error:A,complete:i}=G_(e,n,r);return this._delegate.onAuthStateChanged(s,A,i)}onIdTokenChanged(e,n,r){const{next:s,error:A,complete:i}=G_(e,n,r);return this._delegate.onIdTokenChanged(s,A,i)}sendSignInLinkToEmail(e,n){return HV(this._delegate,e,n)}sendPasswordResetEmail(e,n){return PV(this._delegate,e,n||void 0)}async setPersistence(e){pK(this._delegate,e);let n;switch(e){case mr.SESSION:n=so;break;case mr.LOCAL:n=await yr(au)._isAvailable()?au:ky;break;case mr.NONE:n=La;break;default:return En("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return tr(this._delegate,QV(this._delegate))}signInWithCredential(e){return tr(this._delegate,xg(this._delegate,e))}signInWithCustomToken(e){return tr(this._delegate,NV(this._delegate,e))}signInWithEmailAndPassword(e,n){return tr(this._delegate,VV(this._delegate,e,n))}signInWithEmailLink(e,n){return tr(this._delegate,KV(this._delegate,e,n))}signInWithPhoneNumber(e,n){return K0(this._delegate,DH(this._delegate,e,n))}async signInWithPopup(e){return Fl(Op(),this._delegate,"operation-not-supported-in-this-environment"),tr(this._delegate,GH(this._delegate,e,IA))}async signInWithRedirect(e){return Fl(Op(),this._delegate,"operation-not-supported-in-this-environment"),await j0(this._delegate),YH(this._delegate,e,IA)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return OV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}G0.Persistence=mr;function G_(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const s=r;return{next:i=>s(i&&Ns.getOrCreate(i)),error:e,complete:n}}function CK(t,e){const n=mK(t,e);if(typeof self<"u"&&!n.includes(au)&&n.push(au),typeof window<"u")for(const r of[ky,so])n.includes(r)||n.push(r);return n.includes(La)||n.push(La),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.providerId="phone",this._delegate=new Ao(oS(ss.auth()))}static credential(e,n){return Ao.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Vy.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD;Vy.PROVIDER_ID=Ao.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K=ne;class IK{constructor(e,n,r=ss.app()){var s;_K((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new NH(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK="auth-compat";function bK(t){t.INTERNAL.registerComponent(new ms(EK,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new G0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:To.EMAIL_SIGNIN,PASSWORD_RESET:To.PASSWORD_RESET,RECOVER_EMAIL:To.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:To.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:To.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:To.VERIFY_EMAIL}},EmailAuthProvider:di,FacebookAuthProvider:As,GithubAuthProvider:os,GoogleAuthProvider:is,OAuthProvider:da,SAMLAuthProvider:hf,PhoneAuthProvider:Vy,PhoneMultiFactorGenerator:tS,RecaptchaVerifier:IK,TwitterAuthProvider:as,Auth:G0,AuthCredential:tl,Error:Gn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(iK,oK)}bK(ss);const TK="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",FK="zameny-b6c3f.firebaseapp.com",UK="zameny-b6c3f",SK="zameny-b6c3f.firebasestorage.app",QK="323355347910",kK="1:323355347910:web:c81f2813dce5ee9373c0c7",z_={apiKey:TK,authDomain:FK,projectId:UK,storageBucket:SK,messagingSenderId:QK,appId:kK};let W_,fr,nn;if(!z_.apiKey)console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");else try{ss.apps.length?W_=ss.app():W_=ss.initializeApp(z_),fr=ss.firestore(),nn=ss.auth(),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}const Mp="schoolData",Vp="main",Hp="publicSchedules",EA={open:async()=>(console.log("Firestore connected"),{}),save:async t=>{if(!fr){console.error("Database not initialized (missing API key)");return}const e=nn==null?void 0:nn.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :        ( admin@gymnasium22.com).");return}try{const n=JSON.parse(JSON.stringify(t));await fr.collection(Mp).doc(Vp).set(n)}catch(n){throw console.error("   Firebase:",n),n.code==="permission-denied"&&alert(" :       ."),n}},load:async()=>{if(!fr)return console.warn("Database not initialized. Returning initial data."),Yt;try{const t=await fr.collection(Mp).doc(Vp).get();if(t.exists){const e=t.data(),n={...Yt,...e};return e.settings&&(n.settings={...Yt.settings,...e.settings}),n}else return Yt}catch(t){return console.error("   Firebase:",t),t.code==="permission-denied"&&console.error("   .   (allow read: if true)."),Yt}},subscribe:(t,e)=>fr?fr.collection(Mp).doc(Vp).onSnapshot(n=>{if(n.exists){const r=n.data(),s={...Yt,...r};r.settings&&(s.settings={...Yt.settings,...r.settings}),t(s)}else t(Yt)},n=>{console.error("Firestore subscription error:",n),n.code==="permission-denied"&&console.error("    (subscribe)."),e(n)}):(console.warn("Database not initialized. Cannot subscribe."),()=>{}),exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{if(!fr)throw new Error("Database not initialized");const n=nn==null?void 0:nn.currentUser;if(!n||n.email!=="admin@gymnasium22.com")throw new Error("    .");try{const r={subjects:e.subjects,teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",birthDate:void 0,absenceReasons:void 0})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},s=JSON.parse(JSON.stringify(r));await fr.collection(Hp).doc(t).set(s)}catch(r){throw console.error("  :",r),r}},getPublicData:async t=>{if(!fr)return null;try{const e=await fr.collection(Hp).doc(t).get();return e.exists?e.data():null}catch(e){return console.error("   :",e),null}},deletePublicData:async t=>{if(!fr)throw new Error("Database not initialized");const e=nn==null?void 0:nn.currentUser;if(!e||e.email!=="admin@gymnasium22.com")throw new Error("     .");try{await fr.collection(Hp).doc(t).delete()}catch(n){throw console.error("   :",n),n}}},lS=k.createContext(void 0),RK="admin@gymnasium22.com",NK="teacher@gymnasium22.com",PK=({children:t})=>{const[e,n]=k.useState(null),[r,s]=k.useState(null),[A,i]=k.useState(!0);k.useEffect(()=>{if(!nn){console.warn("Firebase Auth is not initialized. Authentication is disabled."),i(!1);return}const c=nn.onAuthStateChanged(d=>{n(d),d?d.email===RK?s("admin"):d.email===NK?s("teacher"):(s(null),nn==null||nn.signOut()):s(null),i(!1)});return()=>c()},[]);const o=async()=>{nn&&await nn.signOut(),s(null)},a=()=>{s("guest"),i(!1)};return l.jsx(lS.Provider,{value:{user:e,role:r,loading:A,logout:o,setGuestRole:a},children:t})},rl=()=>{const t=k.useContext(lS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},cS=k.createContext(void 0),uS=({children:t,initialData:e})=>{const[n,r]=k.useState(Yt),[s,A]=k.useState(!0),[i,o]=k.useState([]),[a,c]=k.useState(-1),{user:d,role:h,loading:f}=rl();k.useEffect(()=>{if(e){r(e),o([e]),c(0),A(!1);return}if(f)return;if(!(d||h==="guest")){r(Yt),A(!1);return}A(!0);const _=EA.subscribe(S=>{const U={...Yt,...S};U.teachers||(U.teachers=[]),U.teachers=U.teachers.map(N=>({shifts:[ce.First,ce.Second],telegramChatId:"",...N})),U.schedule||(U.schedule=[]),U.schedule2ndHalf||(U.schedule2ndHalf=[]),U.substitutions||(U.substitutions=[]),U.bellSchedule||(U.bellSchedule=wT),U.settings?U.settings={...Yt.settings,...U.settings}:U.settings=Yt.settings,r(U),o(N=>N.length===0?[U]:N),c(N=>N===-1?0:N),A(!1)},S=>{console.error("Failed to subscribe to data:",S),r(Yt),A(!1)});return()=>{_&&_()}},[e,d,h,f]);const m=k.useCallback(async(w,_=!0)=>{const S=!d&&h==="guest",U={...n,...w};if(r(U),!e&&d&&!S)try{await EA.save(U)}catch(N){console.error("Save failed silently in background",N)}else S&&console.warn("       .");if(_){const N=i.slice(0,a+1);N.push(U),N.length>50&&N.shift(),o(N),c(N.length-1)}},[n,i,a,d,h,e]),v=k.useCallback(async()=>{if(a>0){const w=i[a-1];c(a-1),r(w),!e&&d&&await EA.save(w)}},[i,a,d,e]),y=k.useCallback(async()=>{if(a<i.length-1){const w=i[a+1];c(a+1),r(w),!e&&d&&await EA.save(w)}},[i,a,d,e]),T=k.useCallback(async()=>{await m(Yt)},[m]),C=k.useMemo(()=>({data:n,isLoading:s,saveData:m,resetData:T,undo:v,redo:y,canUndo:a>0,canRedo:a<i.length-1}),[n,s,m,T,v,y,a]);return l.jsx(cS.Provider,{value:C,children:t})},Tg=()=>{const t=k.useContext(cS);if(!t)throw new Error("useFullData must be used within DataProvider");return t},dS=k.createContext(void 0),hS=k.createContext(void 0),fS=({children:t})=>{const{data:e,saveData:n}=Tg(),r=k.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),s=k.useCallback(async(i,o)=>{await n(i,o)},[n]),A=k.useMemo(()=>({...r,saveStaticData:s}),[r,s]);return l.jsx(dS.Provider,{value:A,children:t})},gS=({children:t})=>{const{data:e,saveData:n}=Tg(),r=new Date().getMonth(),A=r>=0&&r<=4?e.schedule2ndHalf||[]:e.schedule,i=k.useCallback(async(d,h)=>{d===1?await n({schedule:h}):await n({schedule2ndHalf:h})},[n]),o=k.useCallback(async(d,h)=>{await n(d,h)},[n]),a=k.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2ndHalf||[],substitutions:e.substitutions,saveSemesterSchedule:i,saveScheduleData:o}),[A,e.schedule,e.schedule2ndHalf,e.substitutions,i,o]),c=k.useMemo(()=>({...a,saveScheduleData:o}),[a,o]);return l.jsx(hS.Provider,{value:c,children:t})},rA=()=>{const t=k.useContext(dS);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Tg();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},sl=()=>{const t=k.useContext(hS);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Tg();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},DK={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},q=({name:t,size:e=24,className:n="",...r})=>{const s=DK[t];return s?l.jsx(s,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},Ls=({isOpen:t,onClose:e,title:n,children:r,maxWidth:s="max-w-lg"})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(q,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null,LK=({x:t,y:e,onClose:n,actions:r})=>{if(k.useEffect(()=>{const A=()=>n();return window.addEventListener("click",A),()=>window.removeEventListener("click",A)},[n]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:r.map((A,i)=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),A.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${A.color||"text-slate-700 dark:text-slate-200"}`,children:[A.icon&&l.jsx(q,{name:A.icon,size:16}),A.label]},i))})},OK=()=>{const{bellSchedule:t}=rA(),[e,n]=k.useState("..."),[r,s]=k.useState(""),[A,i]=k.useState(0),[o,a]=k.useState("bg-slate-500"),[c,d]=k.useState("");return k.useEffect(()=>{const h=()=>{const m=new Date,v=m.getDay(),T=[null,wr.Monday,wr.Tuesday,wr.Wednesday,wr.Thursday,wr.Friday,null][v];if(d(T||""),!T){n(" "),s(" "),a("bg-slate-400"),i(0);return}const C=m.getHours()*60+m.getMinutes();let w=t.filter(U=>U.day===T);w.length===0&&(w=t.filter(U=>U.day==="default"));let _=null;const S=U=>{const[N,B]=U.split(":").map(Number);return N*60+B};for(const U of w){const N=S(U.start),B=S(U.end);if(C>=N&&C<B){_={...U,duration:B-N,passed:C-N};break}}if(_)n(`${_.period} `),s(`${_.shift===ce.First?"1 ":"2 "}  . ${_.duration-_.passed} `),i(_.passed/_.duration*100),a("bg-indigo-600");else{let U=1/0,N=null;for(const B of w){const x=S(B.start);x>C&&x-C<U&&(U=x-C,N=B)}N&&U<30?(n(""),s(` ${U}  ${N.period} `),a("bg-amber-500"),i(100-U/20*100)):(n(" "),s(" "),a("bg-slate-400"),i(0))}};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center text-${o.replace("bg-","")}`,children:l.jsx(q,{name:"Clock",size:16,className:o.replace("bg-","text-")})})]}),A>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${A}%`}})})]})},jp=({options:t,value:e,onChange:n,placeholder:r,groupBy:s})=>{var m;const[A,i]=k.useState(!1),[o,a]=k.useState(""),c=k.useRef(null);k.useEffect(()=>{const v=y=>{c.current&&!c.current.contains(y.target)&&i(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const h=((m=(s?t.flatMap(v=>v.options):t).find(v=>v.value===e))==null?void 0:m.label)||r,f=s?t.map(v=>({...v,options:v.options.filter(y=>y.label.toLowerCase().includes(o.toLowerCase()))})).filter(v=>v.options.length>0):t.filter(v=>v.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(q,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:o,onChange:v=>a(v.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s?f.map((v,y)=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:v.label}),v.options.map(T=>l.jsx("div",{onClick:()=>{n(T.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===T.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:T.label},T.value))]},y)):f.map(v=>l.jsx("div",{onClick:()=>{n(v.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===v.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:v.label},v.value))]})]})},_d=({children:t,className:e=""})=>{const n=Fi.Children.toArray(t);return l.jsx("div",{className:e,children:n.map((r,s)=>l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:r},s))})},Kp=({items:t,max:e,barClassName:n="bg-indigo-500"})=>l.jsx("div",{className:"space-y-3",children:t.map((r,s)=>l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:r.label,children:r.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${r.value/e*100}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:r.value})]},s))}),MK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,settings:A}=rA(),{schedule:i,substitutions:o}=sl(),a=mu(),[c,d]=k.useState(localStorage.getItem("gym_notes")||""),[h]=k.useState(new Date),[f,m]=k.useState(""),[v,y]=k.useState(null),[T,C]=k.useState(!1),[w,_]=k.useState(""),[S,U]=k.useState(!1),[N,B]=k.useState(""),[x,I]=k.useState(!1);k.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){_("");const Q=setTimeout(()=>_(""),2e3);return()=>clearTimeout(Q)}},[c]);const F=Q=>new Date(Q.getTime()-Q.getTimezoneOffset()*6e4).toISOString().split("T")[0],R=k.useMemo(()=>F(h),[h]),L=k.useMemo(()=>{const Q=h.getDay();return Q===0||Q===6?null:kn[Q-1]},[h]),b=k.useMemo(()=>{const Q=new Date;return Q.setHours(0,0,0,0),e.filter(V=>V.birthDate).map(V=>{const W=new Date(V.birthDate);let se=new Date(Q.getFullYear(),W.getMonth(),W.getDate());se<Q&&se.setFullYear(Q.getFullYear()+1);const K=Math.ceil((se.getTime()-Q.getTime())/(1e3*60*60*24));return{...V,diff:K,age:Q.getFullYear()-W.getFullYear()}}).filter(V=>V.diff<=30).sort((V,W)=>V.diff-W.diff)},[e]),Qe=k.useMemo(()=>{const Q=e.length,V=new Map;e.filter(z=>z.unavailableDates.includes(R)).forEach(z=>{var he;const Ve=((he=z.absenceReasons)==null?void 0:he[R])===" "?" ":"";V.set(z.id,{id:z.id,name:z.name,displayReason:Ve})});const W=o.filter(z=>z.date===R&&z.replacementTeacherId!=="conducted"&&z.replacementTeacherId!==z.originalTeacherId),se=new Map;W.forEach(z=>{if(V.has(z.originalTeacherId))return;const Be=e.find(Y=>Y.id===z.originalTeacherId);if(!Be)return;const Ve=i.find(Y=>Y.id===z.scheduleItemId);if(!Ve)return;se.has(z.originalTeacherId)||se.set(z.originalTeacherId,{teacher:Be,lessons:[]}),se.get(z.originalTeacherId).lessons.push({period:Ve.period,reason:z.lessonAbsenceReason})});const K=Array.from(V.values());se.forEach((z,Be)=>{const Ve=z.lessons.sort((we,fe)=>we.period-fe.period),he=Ve.map(we=>we.period).join(", "),Ce=Ve.some(we=>we.reason===" ")?" ":"";K.push({id:Be,name:z.teacher.name,displayReason:`${he} : ${Ce}`})}),K.sort((z,Be)=>z.name.localeCompare(Be.name));const $=K.length,ie=Q-$;return{presentPercent:Q>0?Math.round(ie/Q*100):0,absentCount:$,totalTeachers:Q,absentTeachersList:K}},[e,R,o,i]),Re=k.useMemo(()=>{const Q=new Date(h);for(Q.setDate(h.getDate()+1);Q.getDay()===0||Q.getDay()===6;)Q.setDate(Q.getDate()+1);const W=[null,"","","","","",null][Q.getDay()];if(!W)return[];const se=[];return n.forEach(K=>{const $=i.filter(ie=>ie.classId===K.id&&ie.day===W);$.length===0?se.push({class:K.name,issue:`   ${W}`}):$.length<4&&se.push({class:K.name,issue:`  (${$.length})`}),$.forEach(ie=>{if(i.some(z=>z.id!==ie.id&&z.day===W&&z.period===ie.period&&z.shift===ie.shift&&z.teacherId===ie.teacherId)&&se.push({class:K.name,issue:`  (${ie.period} )`}),ie.roomId){const z=r.find(Be=>Be.id===ie.roomId);z&&z.capacity<K.studentsCount&&se.push({class:K.name,issue:`: ${z.name} (${ie.period} )`})}})}),se.filter((K,$,ie)=>ie.findIndex(de=>de.class===K.class&&de.issue===K.issue)===$).slice(0,10)},[i,n,e,r,h]),$e=k.useMemo(()=>{if(!L)return 0;let Q=0;const V=i.filter(W=>W.day===L);for(const W of V){const se=e.find(K=>K.id===W.teacherId);se&&se.unavailableDates.includes(R)&&(o.find($=>$.scheduleItemId===W.id&&$.date===R)||Q++)}return Q},[i,e,o,R,L]),Se=()=>{var Ve;if(!f){y(null);return}const Q=new Date,W=[null,wr.Monday,wr.Tuesday,wr.Wednesday,wr.Thursday,wr.Friday,null][Q.getDay()];if(!W){y({status:"",detail:"  ",color:"text-slate-500"});return}const se=he=>{const[Y,Ce]=he.split(":").map(Number);return Y*60+Ce},K=Q.getHours()*60+Q.getMinutes();let $=s.filter(he=>he.day===W);$.length===0&&($=s.filter(he=>he.day==="default"));const ie=$.find(he=>{const Y=se(he.start),Ce=se(he.end);return K>=Y&&K<=Ce}),de=f.toLowerCase(),z=e.find(he=>he.name.toLowerCase().includes(de)),Be=n.find(he=>he.name.toLowerCase().includes(de));if(!z&&!Be){y({status:" ",detail:" ",color:"text-red-500"});return}if(z){if(z.unavailableDates.includes(R)){const fe=((Ve=z.absenceReasons)==null?void 0:Ve[R])===" "?" ":"";y({status:"",detail:fe,color:"text-red-500",icon:"UserX",items:[]});return}if(!ie){y({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const he=i.filter(we=>we.teacherId===z.id&&we.day===W&&we.period===ie.period&&we.shift===ie.shift),Y=o.filter(we=>we.date===R&&we.replacementTeacherId===z.id).map(we=>i.find(fe=>fe.id===we.scheduleItemId)).filter(we=>!!we&&we.day===W&&we.period===ie.period&&we.shift===ie.shift);let Ce=[];he.forEach(we=>{var De,Oe,qe;const fe=o.find(ze=>ze.date===R&&ze.scheduleItemId===we.id);if(!fe||fe.replacementTeacherId===z.id){const ze=((De=r.find(ct=>ct.id===((fe==null?void 0:fe.replacementRoomId)||we.roomId)))==null?void 0:De.name)||(fe==null?void 0:fe.replacementRoomId)||we.roomId||" .",Me=(Oe=t.find(ct=>ct.id===we.subjectId))==null?void 0:Oe.name,at=(qe=n.find(ct=>ct.id===we.classId))==null?void 0:qe.name;Ce.push({room:ze,subject:Me,entityName:at,direction:we.direction,isSubstitution:!!(fe&&fe.replacementTeacherId===z.id),originalTeacherName:null})}}),Y.forEach(we=>{var Me,at,ct;const fe=o.find(Ge=>Ge.date===R&&Ge.scheduleItemId===we.id&&Ge.replacementTeacherId===z.id);if(!fe)return;const De=((Me=r.find(Ge=>Ge.id===(fe.replacementRoomId||we.roomId)))==null?void 0:Me.name)||fe.replacementRoomId||we.roomId||" .",Oe=(at=t.find(Ge=>Ge.id===we.subjectId))==null?void 0:at.name,qe=(ct=n.find(Ge=>Ge.id===we.classId))==null?void 0:ct.name,ze=e.find(Ge=>Ge.id===fe.originalTeacherId);Ce.push({room:De,subject:Oe,entityName:qe,direction:we.direction,isSubstitution:!0,originalTeacherName:ze==null?void 0:ze.name})}),Ce.length>0?y({status:` ${ie.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Ce}):y({status:"",detail:` ( ${ie.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(Be){if(!ie){y({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const he=i.filter(Y=>Y.classId===Be.id&&Y.day===W&&Y.period===ie.period&&Y.shift===ie.shift);if(he.length>0){const Y=he.map(fe=>{var st,ln,Xn,We,D;const De=o.find(G=>G.scheduleItemId===fe.id&&G.date===R);if(De&&De.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(st=t.find(G=>G.id===fe.subjectId))==null?void 0:st.name};const Oe=!!(De&&De.replacementTeacherId!=="conducted"&&De.replacementTeacherId!=="cancelled"),qe=Oe?De.replacementTeacherId:fe.teacherId,ze=(De==null?void 0:De.replacementRoomId)||fe.roomId,Me=(ln=e.find(G=>G.id===qe))==null?void 0:ln.name,at=((Xn=r.find(G=>G.id===ze))==null?void 0:Xn.name)||ze||" .",ct=(We=t.find(G=>G.id===fe.subjectId))==null?void 0:We.name,Ge=Oe?(D=e.find(G=>G.id===De.originalTeacherId))==null?void 0:D.name:null;return{room:at,subject:ct,entityName:Me,direction:fe.direction,isSubstitution:Oe,originalTeacherName:Ge}}),Ce=Y.filter(fe=>!fe.cancelled),we=Y.filter(fe=>!!fe.cancelled);Ce.length>0?y({status:` ${ie.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Ce}):we.length>0?y({status:" ",detail:we.map(fe=>fe.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):y({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else y({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},re=async()=>{if(!N.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}I(!0);const Q=` *   :*

${N}`;try{const W=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:Q,parse_mode:"Markdown"})})).json();if(W.ok)alert("!   ."),U(!1),B("");else throw new Error(W.description)}catch(V){console.error("   Telegram:",V),alert(`   . : ${V}`)}finally{I(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx(q,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(q,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:Q=>m(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&Se(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:Se,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx(q,{name:"Search",size:20})})]}),v&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${v.color}`,children:[l.jsx(q,{name:v.icon||"Info",size:14})," ",v.status]}),v.items&&v.items.length>0?l.jsx("div",{className:"space-y-2",children:v.items.map((Q,V)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[Q.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:Q.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:Q.subject}),Q.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:Q.originalTeacherName?` ( ${Q.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:Q.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:Q.room})]})]},V))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:v.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx(q,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:$e>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:$e}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx(q,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>C(!T),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:T?" ":" ",children:l.jsx(q,{name:T?"PieChart":"List",size:20})})]}),T?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Qe.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Qe.absentTeachersList.map(Q=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:Q.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:Q.displayReason})]},Q.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx(q,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Qe.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Qe.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Qe.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx(q,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:b.length?b.map(Q=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:Q.name}),l.jsx("span",{className:"font-bold text-slate-400",children:Q.diff===0?"!":`${Q.diff} .`})]},Q.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx(q,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:Re.length?Re.map((Q,V)=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:Q.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:Q.issue})]},V)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(q,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:Q=>d(Q.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),w&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx(q,{name:"Save",size:12})," ",w]})]})]})]}),l.jsx(Ls,{isOpen:S,onClose:()=>U(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:N,onChange:Q=>B(Q.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:re,disabled:x,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[x?l.jsx(q,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(q,{name:"Send",size:16}),x?"...":""]})})]})})]})};var pS={},mS={},wS={},Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});function VK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Fg.default=VK;var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});var HK=Fg,jK=" and ";function KK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],s=HK.default(n),A=r;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(jK)}Hy.default=KK;var jy={};Object.defineProperty(jy,"__esModule",{value:!0});function GK(){}jy.default=GK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Fg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=Hy;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=jy;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(wS);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=k,n=wS;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(s){return!0}};var r=function(s){return function(A,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],c=o[1],d=n.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(mS);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=mS;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(pS);const zK=qI(pS),vS=({readOnly:t=!1,semester:e=1})=>{const{subjects:n,teachers:r,classes:s,rooms:A}=rA(),{schedule1:i,schedule2:o,saveSemesterSchedule:a,canUndo:c,canRedo:d,undo:h,redo:f}=sl(),m=e===2?o:i,v=async P=>{await a(e,P)},[y,T]=k.useState(ce.First),[C,w]=k.useState(wr.Monday),[_,S]=k.useState(!1),[U,N]=k.useState({}),[B,x]=k.useState("class"),[I,F]=k.useState(""),[R,L]=k.useState(""),[b,Qe]=k.useState(""),[Re,$e]=k.useState(!1),[Se,re]=k.useState({visible:!1,x:0,y:0,item:null,cell:null}),[Q,V]=k.useState(null),[W,se]=k.useState([]),[K,$]=k.useState(null),[ie,de]=k.useState(null),z=zK({maxWidth:767}),[Be,Ve]=k.useState(!0),[he,Y]=k.useState(!1),[Ce,we]=k.useState({isOpen:!1,type:"",day:"",classId:""}),[fe,De]=k.useState(wr.Monday),[Oe,qe]=k.useState(""),ze=ls[y],Me=()=>B==="week"?ls[y].map(P=>({id:P.toString(),name:`${P} `})):B==="class"?I?s.filter(P=>P.id===I&&P.shift===y):s.filter(P=>P.shift===y):B==="teacher"?I?r.filter(P=>P.id===I):r:B==="subject"?I?n.filter(P=>P.id===I):n:[],at=(P,Z)=>{let me=[];if(B==="week"){const oe=parseInt(P),te=Z;me=m.filter(Te=>Te.shift===y&&Te.period===oe&&Te.day===te),I&&(me=me.filter(Te=>Te.classId===I))}else{const oe=Z;B==="class"&&(me=m.filter(te=>te.classId===P&&te.period===oe&&te.day===C&&te.shift===y)),B==="teacher"&&(me=m.filter(te=>te.teacherId===P&&te.period===oe&&te.day===C&&te.shift===y)),B==="subject"&&(me=m.filter(te=>te.subjectId===P&&te.period===oe&&te.day===C&&te.shift===y))}return R&&(me=me.filter(oe=>{if(!oe.roomId)return!1;const te=A.find(Le=>Le.id===oe.roomId);return(te?te.name:oe.roomId).toLowerCase().includes(R.toLowerCase())})),b&&(me=me.filter(oe=>{var te;return(te=oe.direction)==null?void 0:te.toLowerCase().includes(b.toLowerCase())})),me},ct=P=>{const Z=[],me=m.filter(Te=>Te.id!==P.id&&Te.day===P.day&&Te.period===P.period&&Te.shift===P.shift);return me.find(Te=>Te.teacherId===P.teacherId)&&Z.push("teacher"),me.find(Te=>!(Te.classId!==P.classId||Te.direction&&P.direction&&Te.direction!==P.direction))&&Z.push("class"),P.roomId&&me.find(Le=>Le.roomId===P.roomId)&&Z.push("room"),Z},Ge=(P,Z,me)=>{const oe=[],te=s.find(tn=>tn.id===P),Te=n.find(tn=>tn.id===Z),Le=A.find(tn=>tn.id===me);return Le&&(te&&Le.capacity<te.studentsCount&&oe.push(`  !   ${te.studentsCount} .,     ${Le.capacity}.`),Te&&Te.requiredRoomType&&Te.requiredRoomType!==""&&Le.type!==Te.requiredRoomType&&oe.push(`   !   "${Te.requiredRoomType}",   "${Le.type}".`)),oe},st=P=>{const Z=Ge(P.classId,P.subjectId,P.roomId);se(Z)},ln=P=>{t||(N(P),st(P),S(!0))},Xn=(P,Z,me=C)=>{if(t)return;const oe={period:Z,day:me,shift:y,id:Math.random().toString(36).substr(2,9)};B==="class"&&(oe.classId=P),B==="teacher"&&(oe.teacherId=P),B==="subject"&&(oe.subjectId=P),B==="week"&&(oe.period=parseInt(P),oe.day=me,I&&s.find(te=>te.id===I)&&(oe.classId=I)),N(oe),se([]),S(!0)},We=async()=>{if(!U.subjectId||!U.teacherId||!U.classId)return;let P=[...m];const Z=P.findIndex(me=>me.id===U.id);Z>=0?P[Z]=U:P.push(U),await v(P),S(!1)},D=async P=>{const Z=m.filter(me=>me.id!==(P||U.id));await v(Z),S(!1)},G=(P,Z,me)=>{t||(P.preventDefault(),P.stopPropagation(),re({visible:!0,x:P.clientX,y:P.clientY,item:Z,cell:me}))},Ae=(P,Z)=>{if(t)return;$(Z),P.dataTransfer.effectAllowed="move";const me=P.target;setTimeout(()=>me.classList.add("dragging"),0)},_e=P=>{P.target.classList.remove("dragging"),$(null),de(null)},Ne=(P,Z)=>{P.preventDefault(),!t&&de(`${Z.rowId}-${Z.colKey}`)},Ie=async(P,Z)=>{if(P.preventDefault(),!K||t)return;const me={...K};B==="week"?(me.period=parseInt(Z.rowId),me.day=Z.colKey):(me.period=Z.colKey,me.day=C,B==="class"&&(me.classId=Z.rowId),B==="teacher"&&(me.teacherId=Z.rowId),B==="subject"&&(me.subjectId=Z.rowId));let oe=m.map(te=>te.id===me.id?me:te);await v(oe),$(null),de(null)},ge=[];Se.item?ge.push({label:"",icon:"Copy",onClick:()=>V(Se.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>D(Se.item.id)}):Se.cell&&(Q&&ge.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...Q,id:Math.random().toString(36).substr(2,9),day:C,shift:y,period:Se.cell.colKey};B==="week"&&(P.day=Se.cell.colKey,P.period=parseInt(Se.cell.rowId)),B==="class"?P.classId=Se.cell.rowId:B==="teacher"?P.teacherId=Se.cell.rowId:B==="subject"&&(P.subjectId=Se.cell.rowId);let Z=[...m,P];await v(Z),V(null)}}),ge.push({label:" ",icon:"Plus",onClick:()=>Xn(Se.cell.rowId,Se.cell.colKey,B==="week"?Se.cell.colKey:C)}));const Pe=U.subjectId?r.filter(P=>P.subjectIds.includes(U.subjectId)):[],Ee=U.subjectId?r.filter(P=>!P.subjectIds.includes(U.subjectId)):r,be=k.useMemo(()=>{var Z,me,oe,te;const P=e===2?" (2- )":"";if(I){if(B==="teacher")return((Z=r.find(Te=>Te.id===I))==null?void 0:Z.name)+P;if(B==="class")return((me=s.find(Te=>Te.id===I))==null?void 0:me.name)+P;if(B==="subject")return((oe=n.find(Te=>Te.id===I))==null?void 0:oe.name)+P;if(B==="week")return((te=s.find(Te=>Te.id===I))==null?void 0:te.name)+P}return`  ${C}`+P},[I,B,r,s,n,C,e]),Ke=!!I,Ct=k.useMemo(()=>Ke?kn:ze,[Ke,ze]),ot=k.useMemo(()=>Ke?ls[y].map(P=>({id:P.toString(),name:`${P} `})):Me(),[Ke,y,Me]),Je=(P,Z)=>{if(Ke){const me=parseInt(P),oe=Z;let te=m.filter(Te=>Te.shift===y&&Te.period===me&&Te.day===oe);return B==="class"||B==="week"?te=te.filter(Te=>Te.classId===I):B==="teacher"?te=te.filter(Te=>Te.teacherId===I):B==="subject"&&(te=te.filter(Te=>Te.subjectId===I)),te}else return at(P,Z)},Ln=Me(),ur=B==="week"?kn:ze,Er=(P,Z,me)=>{we({isOpen:!0,type:P,day:Z||"",classId:me||""})},Yn=async()=>{let P=[...m];Ce.type==="clearAll"?P=[]:Ce.type==="clearDay"&&Ce.day?P=P.filter(Z=>Z.day!==Ce.day):Ce.type==="clearClass"&&Ce.classId&&(P=P.filter(Z=>Z.classId!==Ce.classId)),await v(P),we({isOpen:!1,type:"",day:"",classId:""}),Y(!1)},jt=(P,Z,me)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(oe=>{const te=n.find(Zn=>Zn.id===oe.subjectId),Te=r.find(Zn=>Zn.id===oe.teacherId),Le=s.find(Zn=>Zn.id===oe.classId),tn=ct(oe),cn=A.find(Zn=>Zn.id===oe.roomId),br=cn?cn.name:oe.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:Zn=>Ae(Zn,oe),onDragEnd:t?void 0:_e,onClick:t?void 0:()=>ln(oe),onContextMenu:t?void 0:Zn=>G(Zn,oe,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${tn.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:tn.length===0&&(te!=null&&te.color)?{backgroundColor:`${te.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:B==="subject"||B==="week"?Le==null?void 0:Le.name:te==null?void 0:te.name}),oe.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:oe.direction})]}),B==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:te==null?void 0:te.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:Te==null?void 0:Te.name,children:[l.jsx(q,{name:B==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:B==="teacher"?Le==null?void 0:Le.name:Te==null?void 0:Te.name})]}),br&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:cn?`: ${cn.capacity}, : ${cn.type}`:"",children:br})]}),tn.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${tn.join(", ")}`,children:"!"})]},oe.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>Xn(me,Z,B==="week"?Z:C),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(q,{name:"Plus",size:16})})]}),On=()=>{if(!I)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=m.filter(Z=>Z.day===C&&Z.shift===y&&(B==="class"&&Z.classId===I||B==="teacher"&&Z.teacherId===I||B==="subject"&&Z.subjectId===I)).sort((Z,me)=>Z.period-me.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",C,"  ",y,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(Z=>{const me=n.find(cn=>cn.id===Z.subjectId),oe=r.find(cn=>cn.id===Z.teacherId),te=s.find(cn=>cn.id===Z.classId),Te=A.find(cn=>cn.id===Z.roomId),Le=Te?Te.name:Z.roomId,tn=ct(Z);return l.jsxs("div",{onClick:t?void 0:()=>ln(Z),className:`rounded-xl p-4 shadow-sm border ${tn.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[Z.period," "]}),tn.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${tn.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[me==null?void 0:me.name," ",Z.direction&&`(${Z.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[te==null?void 0:te.name,"  ",oe==null?void 0:oe.name]}),Le&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Le]})]},Z.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Se.visible&&l.jsx(LK,{x:Se.x,y:Se.y,onClose:()=>re({...Se,visible:!1}),actions:ge}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>T(ce.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>T(ce.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),B!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:kn.map(P=>l.jsx("button",{onClick:()=>w(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${C===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(q,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(q,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{x("class"),F("")},className:`p-2 rounded-md ${B==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{x("teacher"),F("")},className:`p-2 rounded-md ${B==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{x("subject"),F("")},className:`p-2 rounded-md ${B==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;x("week"),F(((P=s[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${B==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(q,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(q,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:I,onChange:P=>F(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",B==="class"?"":B==="teacher"?"":B==="week"?" ()":""]}),(B==="class"||B==="week")&&s.filter(P=>P.shift===y).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),B==="teacher"&&r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),B==="subject"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:R,onChange:P=>L(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:b,onChange:P=>Qe(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(q,{name:"List",size:16})," . ."]}),(I||B==="week")&&l.jsx("button",{onClick:()=>$e(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(q,{name:"Printer",size:16})})]})]}),z&&!t&&I&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>Ve(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Be?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(q,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>Ve(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Be?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(q,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:z&&Be&&!t&&I?On():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:B==="week"?"":B==="class"?"":B==="teacher"?"":""}),ur.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:B==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Ln.length>0?Ln.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),ur.map(Z=>{const me=at(P.id,Z),oe=`${P.id}-${Z}`;return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${ie===oe?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:te=>G(te,null,{rowId:P.id,colKey:Z}),onDragOver:t?void 0:te=>Ne(te,{rowId:P.id,colKey:Z}),onDrop:t?void 0:te=>Ie(te,{rowId:P.id,colKey:Z}),children:jt(me,Z,P.id)},Z)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(Ls,{isOpen:_,onClose:()=>S(!1),title:U.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",U.day]}),l.jsxs("span",{children:[": ",U.period]}),l.jsxs("span",{children:[": ",U.shift===ce.First?"1 ":"2 "]})]}),W.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:W.map((P,Z)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(q,{name:"AlertTriangle",size:14}),P]},Z))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(jp,{options:s.filter(P=>P.shift===y).map(P=>({value:P.id,label:P.name})),value:U.classId,onChange:P=>{N({...U,classId:P}),st({...U,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(jp,{options:n.map(P=>({value:P.id,label:P.name})),value:U.subjectId,onChange:P=>{N({...U,subjectId:P}),st({...U,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(jp,{options:[{value:"recommend",label:"",options:Pe.map(P=>({value:P.id,label:P.name}))},{value:"others",label:"",options:Ee.map(P=>({value:P.id,label:P.name}))}],value:U.teacherId,onChange:P=>N({...U,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:U.direction||"",onChange:P=>N({...U,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:U.roomId||"",onChange:P=>{N({...U,roomId:P.target.value}),st({...U,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),A.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[U.id&&l.jsx("button",{onClick:()=>D(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:We,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(Ls,{isOpen:he,onClose:()=>Y(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>Er("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:fe,onChange:P=>De(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:kn.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>Er("clearDay",fe),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",fe]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:Oe,onChange:P=>qe(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),s.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{Oe&&Er("clearClass",void 0,Oe)},disabled:!Oe,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(Ls,{isOpen:Ce.isOpen,onClose:()=>we({...Ce,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>we({...Ce,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Yn,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),Re&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(q,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>$e(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:be}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:Ke||B==="week"?"":B==="class"?"":B==="teacher"?"":""}),Ct.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:Ke||B==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:ot.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),Ct.map(Z=>{const me=Je(P.id,Z);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:me.map(oe=>{const te=n.find(Vr=>Vr.id===oe.subjectId),Te=r.find(Vr=>Vr.id===oe.teacherId),Le=s.find(Vr=>Vr.id===oe.classId),tn=A.find(Vr=>Vr.id===oe.roomId),cn=tn?tn.name:oe.roomId,br=B==="teacher",vo=B==="subject"||B==="week"||Ke&&br?Le==null?void 0:Le.name:te==null?void 0:te.name,Mu=br?Le==null?void 0:Le.name:Te==null?void 0:Te.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[vo,oe.direction&&` (${oe.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:Mu}),cn&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:cn})]})]},oe.id)})},Z)})]},P.id))})]})]})})]})]})},WK=()=>{var Se,re;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,saveStaticData:A}=rA(),[i,o]=k.useState("teachers"),[a,c]=k.useState(!1),[d,h]=k.useState(null),[f,m]=k.useState({}),[v,y]=k.useState({}),[T,C]=k.useState({}),[w,_]=k.useState({}),[S,U]=k.useState("default"),[N,B]=k.useState(null),x=Q=>{h(Q||null),i==="teachers"?m(Q?e.find(V=>V.id===Q)??{}:{subjectIds:[],unavailableDates:[],shifts:[ce.First,ce.Second],telegramChatId:""}):i==="subjects"?y(Q?t.find(V=>V.id===Q)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?C(Q?n.find(V=>V.id===Q)??{}:{shift:ce.First,studentsCount:25}):i==="rooms"&&_(Q?r.find(V=>V.id===Q)??{}:{capacity:30,type:""}),c(!0)},I=async()=>{const Q=()=>Math.random().toString(36).substr(2,9),V={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:v,key:"subjects"},classes:{list:n,form:T,key:"classes"},rooms:{list:r,form:w,key:"rooms"}};if(i==="bells"||!(i in V))return;const W=V[i],{list:se,form:K,key:$}=W;if(!K.name)return;let ie=[...se];d?ie=ie.map(de=>de.id===d?{...de,...K}:de):ie.push({...K,id:Q()}),await A({[$]:ie}),c(!1)},F=async Q=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(V=>V.id!==Q)});break;case"subjects":await A({subjects:t.filter(V=>V.id!==Q)});break;case"classes":await A({classes:n.filter(V=>V.id!==Q)});break;case"rooms":await A({rooms:r.filter(V=>V.id!==Q)});break}},R=(Q,V)=>{B(V),Q.dataTransfer.effectAllowed="move"},L=Q=>{Q.preventDefault()},b=async(Q,V)=>{if(!(N===null||N===V)){switch(i){case"teachers":{const W=[...e],[se]=W.splice(N,1);W.splice(V,0,se),await A({teachers:W});break}case"subjects":{const W=[...t],[se]=W.splice(N,1);W.splice(V,0,se),await A({subjects:W});break}case"classes":{const W=[...n],[se]=W.splice(N,1);W.splice(V,0,se),await A({classes:W});break}case"rooms":{const W=[...r],[se]=W.splice(N,1);W.splice(V,0,se),await A({rooms:W});break}}B(null)}},Qe=(Q,V)=>{const W=S;let se=s.find(K=>K.shift===Q&&K.period===V&&K.day===W);if(!se&&W!=="default"){const K=s.find($=>$.shift===Q&&$.period===V&&$.day==="default");return K?{...K,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return se||{start:"",end:""}},Re=async(Q,V,W,se)=>{let K=[...s];const $=S,ie=K.findIndex(de=>de.shift===Q&&de.period===V&&de.day===$);ie>=0?K[ie]={...K[ie],[W]:se}:K.push({shift:Q,period:V,[W]:se,start:"00:00",end:"00:00",day:$}),await A({bellSchedule:K})},$e=Q=>{const V=f.shifts||[];V.includes(Q)?m({...f,shifts:V.filter(W=>W!==Q)}):m({...f,shifts:[...V,Q]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(Q=>l.jsxs("button",{onClick:()=>o(Q.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===Q.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(q,{name:Q.icon,size:18})," ",Q.label]},Q.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>x(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(q,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(_d,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((Q,V)=>{var W,se;return l.jsxs("div",{draggable:!0,onDragStart:K=>R(K,V),onDragOver:L,onDrop:K=>b(K,V),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:Q.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(q,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:Q.birthDate?`: ${new Date(Q.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[((W=Q.shifts)==null?void 0:W.includes(ce.First))&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),((se=Q.shifts)==null?void 0:se.includes(ce.Second))&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:Q.subjectIds.map(K=>{const $=t.find(ie=>ie.id===K);return $?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:$.color,color:"#334155"},children:$.name},K):null})})]},Q.id)})}),i==="subjects"&&l.jsx(_d,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((Q,V)=>l.jsxs("div",{draggable:!0,onDragStart:W=>R(W,V),onDragOver:L,onDrop:W=>b(W,V),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:Q.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:Q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",Q.difficulty,"  ",Q.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:16})})]})]},Q.id))}),i==="classes"&&l.jsx(_d,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((Q,V)=>l.jsxs("div",{draggable:!0,onDragStart:W=>R(W,V),onDragOver:L,onDrop:W=>b(W,V),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(q,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:Q.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[Q.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${Q.shift===ce.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[Q.shift===ce.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:14})})]})]},Q.id))}),i==="rooms"&&l.jsx(_d,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((Q,V)=>l.jsxs("div",{draggable:!0,onDragStart:W=>R(W,V),onDragOver:L,onDrop:W=>b(W,V),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(q,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:Q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",Q.capacity,"  ",Q.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:16})})]})]},Q.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(Q=>l.jsx("button",{onClick:()=>U(Q),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${S===Q?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:Q==="default"?"":Q===""?"":""},Q))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ce.First,ce.Second].map(Q=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${Q===ce.First?"bg-indigo-600":"bg-purple-600"}`,children:Q}),l.jsx("div",{className:"p-6 space-y-3",children:ls[Q].map(V=>{const W=Qe(Q,V);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${W.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:V}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:W.start,onChange:se=>Re(Q,V,"start",se.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:W.end,onChange:se=>Re(Q,V,"end",se.target.value)})]})]},V)})})]},Q))})]})]}),l.jsx(Ls,{isOpen:a,onClose:()=>c(!1),title:"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:Q=>m({...f,name:Q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:Q=>m({...f,birthDate:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:Q=>m({...f,telegramChatId:Q.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Se=f.shifts)==null?void 0:Se.includes(ce.First),onChange:()=>$e(ce.First)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(re=f.shifts)==null?void 0:re.includes(ce.Second),onChange:()=>$e(ce.Second)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(Q=>{var V;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(V=f.subjectIds)==null?void 0:V.includes(Q.id),onChange:W=>{const se=f.subjectIds||[];m({...f,subjectIds:W.target.checked?[...se,Q.id]:se.filter(K=>K!==Q.id)})}}),l.jsx("span",{className:"text-sm dark:text-slate-300",children:Q.name})]},Q.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:v.name||"",onChange:Q=>y({...v,name:Q.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:v.color||"#ffffff",onChange:Q=>y({...v,color:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.difficulty||5,onChange:Q=>y({...v,difficulty:parseInt(Q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.requiredRoomType,onChange:Q=>y({...v,requiredRoomType:Q.target.value}),children:Zx.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:T.name||"",onChange:Q=>C({...T,name:Q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:T.studentsCount||25,onChange:Q=>C({...T,studentsCount:parseInt(Q.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>C({...T,shift:ce.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${T.shift===ce.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>C({...T,shift:ce.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${T.shift===ce.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:w.name||"",onChange:Q=>_({...w,name:Q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.capacity||30,onChange:Q=>_({...w,capacity:parseInt(Q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.type,onChange:Q=>_({...w,type:Q.target.value}),children:Zx.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:I,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},$K=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,saveStaticData:A}=rA(),{schedule1:i,schedule2:o,substitutions:a,saveScheduleData:c}=sl(),d=ii(),[h,f]=k.useState(new Date().toISOString().split("T")[0]),[m,v]=k.useState(!1),[y,T]=k.useState(null),[C,w]=k.useState(!1),[_,S]=k.useState(!1),[U,N]=k.useState(null),[B,x]=k.useState(""),[I,F]=k.useState(!1),[R,L]=k.useState(""),[b,Qe]=k.useState(""),[Re,$e]=k.useState("all"),[Se,re]=k.useState(""),[Q,V]=k.useState(""),[W,se]=k.useState(""),[K,$]=k.useState(""),[ie,de]=k.useState([]),z=k.useMemo(()=>{const D=new Date(h).getMonth();return D>=0&&D<=4?o:i},[h,i,o]);k.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(T(d.state.subParams),se(""),$(""),de([]),v(!0),window.history.replaceState({},document.title))},[d.state]),k.useEffect(()=>{if(m&&y){const D=a.find(G=>G.scheduleItemId===y.scheduleItemId&&G.date===h);D&&D.refusals?de(D.refusals):de([])}},[m,y,a,h]);const Be=k.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:kn[D-1]},[h]),Ve=k.useMemo(()=>e.filter(D=>{const G=D.name.toLowerCase().includes(b.toLowerCase()),Ae=Re==="all"?!0:D.shifts.includes(Re);return G&&Ae}),[e,b,Re]),he=k.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),Y=k.useMemo(()=>{if(!Be)return[];const D=he.map(ge=>ge.id),G=z.filter(ge=>ge.day===Be&&D.includes(ge.teacherId)),_e=a.filter(ge=>ge.date===h).map(ge=>ge.scheduleItemId),Ne=z.filter(ge=>_e.includes(ge.id)),Ie=[...G];return Ne.forEach(ge=>{Ie.find(Pe=>Pe.id===ge.id)||Ie.push(ge)}),Ie.sort((ge,Pe)=>ge.period-Pe.period)},[z,Be,he,a,h]),Ce=D=>{var Ae;const G=e.find(_e=>_e.id===D);N(D),x(((Ae=G==null?void 0:G.absenceReasons)==null?void 0:Ae[h])||""),w(!0)},we=k.useCallback(async()=>{let D=[...e];const G=D.findIndex(_e=>_e.id===U);if(G===-1)return;const Ae={...D[G]};Ae.unavailableDates.includes(h)||(Ae.unavailableDates=[...Ae.unavailableDates,h]),Ae.absenceReasons||(Ae.absenceReasons={}),Ae.absenceReasons[h]=B,D[G]=Ae,await A({teachers:D}),w(!1)},[e,U,h,B,A]),fe=k.useCallback(async D=>{let G=[...e];const Ae=G.findIndex(Ne=>Ne.id===D);if(Ae===-1)return;const _e={...G[Ae]};_e.unavailableDates=_e.unavailableDates.filter(Ne=>Ne!==h),_e.absenceReasons&&delete _e.absenceReasons[h],G[Ae]=_e,await A({teachers:G})},[e,h,A]),De=k.useCallback(async(D,G=!1)=>{if(!y){alert(":   .    . ,   .");return}const Ae=[...a],_e=z.find(ge=>ge.id===y.scheduleItemId);if(!_e){alert(":     . ,       .");return}const Ne=Ae.findIndex(ge=>ge.scheduleItemId===y.scheduleItemId&&ge.date===h),Ie={id:Ne>=0?Ae[Ne].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:y.scheduleItemId,originalTeacherId:_e.teacherId,replacementTeacherId:D,replacementRoomId:W||void 0,isMerger:G,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&K?K:void 0,refusals:ie};Ne>=0?Ae[Ne]=Ie:Ae.push(Ie),await c({substitutions:Ae}),v(!1),re(""),se(""),$(""),de([]),T(null)},[y,h,W,z,a,e,K,ie,c]),Oe=k.useCallback(async D=>{const G=a.filter(Ae=>!(Ae.scheduleItemId===D&&Ae.date===h));await c({substitutions:G})},[a,h,c]),qe=k.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const G=a.some(_e=>_e.date===h&&_e.replacementTeacherId!=="conducted"),Ae=(_e,Ne)=>{const ge=Y.filter(Pe=>Pe.shift===Ne).filter(Pe=>{const Ee=a.find(be=>be.scheduleItemId===Pe.id&&be.date===h);return Ee&&Ee.replacementTeacherId!=="conducted"});ge.length>0&&(D+=`
 *${_e.toUpperCase()}*
`,ge.forEach(Pe=>{var Z,me,oe;const Ee=a.find(te=>te.scheduleItemId===Pe.id&&te.date===h),be=n.find(te=>te.id===Pe.classId),Ke=t.find(te=>te.id===Pe.subjectId),Ct=Ee?e.find(te=>te.id===Ee.replacementTeacherId):null,ot=e.find(te=>te.id===Pe.teacherId),Je=((Z=r.find(te=>te.id===Pe.roomId))==null?void 0:Z.name)||Pe.roomId||"?",Ln=(me=ot==null?void 0:ot.absenceReasons)==null?void 0:me[h],ur=Ee==null?void 0:Ee.lessonAbsenceReason,jt=(ur===" "?ur:null)||(Ln===" "?Ln:null),On=(ot==null?void 0:ot.name)+(jt?` (${jt})`:""),P=Ee!=null&&Ee.replacementRoomId?((oe=r.find(te=>te.id===Ee.replacementRoomId))==null?void 0:oe.name)||Ee.replacementRoomId:null;if(Ee)if(Ee.replacementTeacherId==="cancelled")D+=` ${be==null?void 0:be.name} (${Pe.period} ): ${Ke==null?void 0:Ke.name} (${On}) ->  
`;else if(Ee.replacementTeacherId===Ee.originalTeacherId&&P)D+=` ${be==null?void 0:be.name} (${Pe.period} ): ${Ke==null?void 0:Ke.name} (${ot==null?void 0:ot.name}) ->  ${Je}  ${P}
`;else{let te=` ${be==null?void 0:be.name} (${Pe.period} ): ${Ke==null?void 0:Ke.name} -> ${Ct==null?void 0:Ct.name} ${Ee.isMerger?"() ":""}( ${On})`;P&&(te+=`  . ${P}`),D+=te+`
`}}))};G?(Ae(ce.First,ce.First),Ae(ce.Second,ce.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,a,Y,n,t,e,r]),ze=k.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;a.filter(Ie=>Ie.date===h).forEach(Ie=>{var Yn;const ge=z.find(jt=>jt.id===Ie.scheduleItemId);if(!ge)return;let Pe="Unknown";if(Ie.replacementTeacherId==="cancelled")Pe=" ";else if(Ie.replacementTeacherId==="conducted")Pe=" ";else{const jt=e.find(On=>On.id===Ie.replacementTeacherId);jt&&(Pe=jt.name)}const Ee=t.find(jt=>jt.id===ge.subjectId),be=n.find(jt=>jt.id===ge.classId),Ke=Ie.date.replace(/-/g,""),Ct=e.find(jt=>jt.id===Ie.originalTeacherId),ot=(Yn=Ct==null?void 0:Ct.absenceReasons)==null?void 0:Yn[h],Je=Ie.lessonAbsenceReason,Er=(Je===" "?Je:null)||(ot===" "?ot:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${Ke}
SUMMARY:: ${be==null?void 0:be.name} - ${Ee==null?void 0:Ee.name}
DESCRIPTION:: ${Pe}${Ie.isMerger?" ()":""}${Er?` (: ${Er})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const Ae=new Blob([D],{type:"text/calendar"}),_e=URL.createObjectURL(Ae),Ne=document.createElement("a");Ne.href=_e,Ne.download="substitutions.ics",document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne)},[h,a,z,e,t,n]),Me=k.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,G=!1;const Ae=new Set,_e=[ce.First,ce.Second];for(const Ie of _e){const Pe=Y.filter(Ee=>Ee.shift===Ie).filter(Ee=>a.some(be=>be.scheduleItemId===Ee.id&&be.date===h&&be.replacementTeacherId!=="conducted"));Pe.length>0&&(G=!0,D+=` *${Ie.toUpperCase()}*
`,Pe.forEach(Ee=>{var oe,te,Te;const be=a.find(Le=>Le.scheduleItemId===Ee.id&&Le.date===h);if(!be)return;const Ke=n.find(Le=>Le.id===Ee.classId),Ct=t.find(Le=>Le.id===Ee.subjectId),ot=e.find(Le=>Le.id===be.originalTeacherId),Je=e.find(Le=>Le.id===be.replacementTeacherId),Ln=(oe=ot==null?void 0:ot.absenceReasons)==null?void 0:oe[h],ur=be.lessonAbsenceReason,jt=(ur===" "?ur:null)||(Ln===" "?Ln:null),On=(ot==null?void 0:ot.name)+(jt?` (${jt})`:""),P=((te=r.find(Le=>Le.id===Ee.roomId))==null?void 0:te.name)||Ee.roomId||"",Z=be.replacementRoomId?((Te=r.find(Le=>Le.id===be.replacementRoomId))==null?void 0:Te.name)||be.replacementRoomId:P;let me=`${Ee.period}  (${Ke==null?void 0:Ke.name} ${Ct==null?void 0:Ct.name}${Ee.direction?` ${Ee.direction}`:""}): `;be.replacementTeacherId==="cancelled"?me+=`* * ( ${On})`:be.replacementTeacherId===be.originalTeacherId?me+=`: ${On}.  : ${P}  ${Z}`:(me+=`*${Je==null?void 0:Je.name}* ${be.isMerger?"() ":""}( *${On}*)`,P!==Z?me+=`. : ${P}  ${Z}`:Z!==""&&(me+=`. : ${Z}`)),D+=`${me}
`,ot!=null&&ot.telegramChatId&&Ae.add(ot.telegramChatId),Je!=null&&Je.telegramChatId&&Ae.add(Je.telegramChatId)}),D+=`
`)}if(G||(D+=` .
`),he.forEach(Ie=>{var be;const ge=a.some(Ke=>Ke.date===h&&Ke.originalTeacherId===Ie.id&&Ke.replacementTeacherId!=="cancelled"&&Ke.replacementTeacherId!=="conducted"),Pe=(be=Ie.absenceReasons)==null?void 0:be[h],Ee=Pe===" "?Pe:"";Ie.telegramChatId&&!ge&&Ie.unavailableDates.includes(h)&&(Ae.add(Ie.telegramChatId),G?D+=`_:  ${Ie.name} ${Ee},        /._
`:D+=`_:  ${Ie.name} ${Ee},      ._
`)}),Ae.size===0){alert("    Telegram Chat ID   .");return}const Ne=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const Ie=Array.from(Ae).map(ge=>fetch(Ne,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:ge,text:D,parse_mode:"Markdown"})}));await Promise.all(Ie),alert(`   ${Ae.size} !`)}catch(Ie){console.error("    Telegram:",Ie),alert("     Telegram.     .")}},[h,Y,a,n,t,e,r,he,s==null?void 0:s.telegramToken]),at=k.useMemo(()=>y?new Set(a.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const G=z.find(Ae=>Ae.id===D.scheduleItemId);return G&&G.period===y.period&&G.shift===y.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[a,z,h,y]),ct=k.useMemo(()=>{if(!y||!Be)return[];const D=h.substring(0,7);return e.filter(G=>G.name.toLowerCase().includes(Se.toLowerCase())).map(G=>{const Ae=G.unavailableDates.includes(h),_e=z.some(be=>be.teacherId===G.id&&be.day===Be&&be.period===y.period&&be.shift===y.shift),Ne=at.has(G.id),Ie=_e||Ne,ge=G.subjectIds.includes(y.subjectId),Pe=a.filter(be=>be.replacementTeacherId===G.id&&be.date.startsWith(D)).length;let Ee=0;return Ae&&(Ee-=1e3),Ie&&(Ee-=100),ge&&(Ee+=50),{teacher:G,isAbsent:Ae,isBusy:Ie,isSpecialist:ge,score:Ee,subsCount:Pe}}).sort((G,Ae)=>Ae.score-G.score)},[e,y,h,Se,Be,z,a,at]),Ge=k.useMemo(()=>{var Ie;if(!y)return null;const D=z.find(ge=>ge.id===y.scheduleItemId);if(!D)return null;const G=n.find(ge=>ge.id===D.classId),Ae=t.find(ge=>ge.id===D.subjectId),_e=e.find(ge=>ge.id===D.teacherId),Ne=((Ie=_e==null?void 0:_e.unavailableDates)==null?void 0:Ie.includes(h))||!1;return{className:G==null?void 0:G.name,subjectName:Ae==null?void 0:Ae.name,teacherName:_e==null?void 0:_e.name,teacherId:_e==null?void 0:_e.id,period:D.period,roomId:D.roomId,isTeacherAbsent:Ne}},[y,z,n,t,e,h]),st=k.useMemo(()=>{if(!Be||Q.length<2)return[];const D=Q.toLowerCase(),G=e.filter(Ne=>Ne.name.toLowerCase().includes(D)),Ae=n.filter(Ne=>Ne.name.toLowerCase().includes(D)),_e=[];return G.forEach(Ne=>{z.filter(ge=>ge.teacherId===Ne.id&&ge.day===Be).forEach(ge=>{const Pe=n.find(be=>be.id===ge.classId),Ee=t.find(be=>be.id===ge.subjectId);_e.push({...ge,entityName:Ne.name,subInfo:Pe==null?void 0:Pe.name,subjectName:Ee==null?void 0:Ee.name})})}),Ae.forEach(Ne=>{z.filter(ge=>ge.classId===Ne.id&&ge.day===Be).forEach(ge=>{if(_e.find(be=>be.id===ge.id))return;const Pe=e.find(be=>be.id===ge.teacherId),Ee=t.find(be=>be.id===ge.subjectId);_e.push({...ge,entityName:Ne.name,subInfo:Pe==null?void 0:Pe.name,subjectName:Ee==null?void 0:Ee.name})})}),_e.sort((Ne,Ie)=>Ne.period-Ie.period)},[Q,Be,e,n,z,t]),ln=k.useCallback(async(D,G,Ae,_e,Ne,Ie)=>{const Pe=new Date(Ie).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),Ee=G.shift===ce.First?"1 ":"2 ",be=` *  *
${D.name}

 : ${Pe}
 : ${Ee}
 : ${Ae==null?void 0:Ae.name}
1 : ${G.period}
 : ${_e==null?void 0:_e.name}
 : ${Ne||" "}`;if(s!=null&&s.telegramToken&&D.telegramChatId)try{const Ct=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:be,parse_mode:"Markdown"})})).json();Ct.ok?alert(`   Telegram  ${D.name}!`):Ct.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${Ct.description}`)}catch(Ke){alert("   Telegram (/)."),console.error(Ke)}else navigator.share?navigator.share({title:"",text:be}).catch(()=>{}):(navigator.clipboard.writeText(be),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),Xn=(D,G)=>{let Ae=!1;if(G){if(!window.confirm("     .     ?"))return;Ae=!0}De(D,Ae)},We=(D,G)=>{G.stopPropagation(),ie.includes(D)?de(ie.filter(Ae=>Ae!==D)):de([...ie,D])};return l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>F(!I),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${I?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx(q,{name:"History",size:16})," ",I?" ":" "]})]}),I?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:R,onChange:D=>L(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:a.filter(D=>{var G;return D.date.includes(R)||((G=e.find(Ae=>Ae.id===D.replacementTeacherId))==null?void 0:G.name.toLowerCase().includes(R.toLowerCase()))}).map(D=>{const G=e.find(_e=>_e.id===D.replacementTeacherId),Ae=r.find(_e=>_e.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[(G==null?void 0:G.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),Ae&&l.jsxs("div",{className:"text-indigo-500",children:[". ",Ae.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>$e("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Re==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>$e(ce.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Re===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>$e(ce.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Re===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:b,onChange:D=>Qe(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[Ve.map(D=>{const G=D.unavailableDates.includes(h),Ae=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${G?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${G?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>G?fe(D.id):Ce(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${G?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:G?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(_e=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:_e===ce.First?"1":"2"},_e))}),G&&l.jsxs("div",{className:"flex items-center gap-1",children:[Ae&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:Ae}),l.jsx("button",{onClick:()=>Ce(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(q,{name:"Edit2",size:14})})]})]})]},D.id)}),Ve.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",Y.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:ze,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(q,{name:"Calendar",size:16})," iCal"]}),Y.length>0&&l.jsxs("button",{onClick:qe,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(q,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Me,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{V(""),S(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(q,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:Y.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(q,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):Y.map(D=>{var ot;const G=a.find(Je=>Je.scheduleItemId===D.id&&Je.date===h),Ae=G&&G.replacementTeacherId!=="cancelled"&&G.replacementTeacherId!=="conducted"?e.find(Je=>Je.id===G.replacementTeacherId):null,_e=e.find(Je=>Je.id===D.teacherId),Ne=t.find(Je=>Je.id===D.subjectId),Ie=n.find(Je=>Je.id===D.classId),ge=r.find(Je=>Je.id===D.roomId),Pe=ge?ge.name:D.roomId,Ee=G==null?void 0:G.replacementRoomId,be=Ee?((ot=r.find(Je=>Je.id===Ee))==null?void 0:ot.name)||Ee:null;let Ke=null;if((G==null?void 0:G.replacementTeacherId)==="conducted")Ke=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Oe(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(q,{name:"X",size:16})})]});else if((G==null?void 0:G.replacementTeacherId)==="cancelled")Ke=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Oe(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(q,{name:"X",size:16})})]});else if(Ae||Ee){const Je=(G==null?void 0:G.replacementTeacherId)===(G==null?void 0:G.originalTeacherId)&&Ee;Ke=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Je?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:Je?"  ":Ae==null?void 0:Ae.name}),G.isMerger&&l.jsx("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:""}),G.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",G.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>ln(Ae||_e,D,Ie,Ne,be||Pe,h),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(q,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>Oe(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(q,{name:"UserX",size:18})})]})]})}else Ke=l.jsxs("button",{onClick:()=>{T({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(q,{name:"ArrowRight",size:16})]});const Ct=!he.find(Je=>Je.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:Ie==null?void 0:Ie.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===ce.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:Ne==null?void 0:Ne.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:Ct?"font-semibold":"line-through decoration-red-400 decoration-2",children:_e==null?void 0:_e.name}),Pe&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Pe," ",be&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",be]})]}),(G==null?void 0:G.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",G.lessonAbsenceReason,")"]})]})]})]}),Ke]},D.id)})})]}),l.jsxs(Ls,{isOpen:m,onClose:()=>v(!1),title:" ",children:[Ge&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[Ge.className,"  ",Ge.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:Ge.subjectName}),l.jsx("span",{className:Ge.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:Ge.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:W,onChange:D=>se(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),r.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),Ge&&!Ge.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:K,onChange:D=>$(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>De("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>De("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(Ge==null?void 0:Ge.teacherId)&&!Ge.isTeacherAbsent&&l.jsx("button",{onClick:()=>De(Ge.teacherId),className:"w-full p-3 mb-4 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Se,onChange:D=>re(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[ct.map(({teacher:D,isAbsent:G,isBusy:Ae,isSpecialist:_e,subsCount:Ne})=>{const Ie=ie.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${G?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":Ie?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":Ae?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${_e?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:_e?l.jsx(q,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[_e&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),Ae&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),G&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),Ie&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${Ne>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Ne]})]})]})]}),!G&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ge=>We(D.id,ge),className:`px-3 py-1 text-xs font-bold rounded border ${Ie?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:Ie?"":""}),!Ie&&!Ae&&l.jsx("button",{onClick:()=>Xn(D.id,Ae),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!Ie&&Ae&&l.jsx("button",{onClick:()=>Xn(D.id,Ae),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),ct.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(Ls,{isOpen:_,onClose:()=>S(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:Q,onChange:D=>V(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[st.map(D=>{var G;return l.jsxs("button",{onClick:()=>{S(!1),T({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((G=r.find(Ae=>Ae.id===D.roomId))==null?void 0:G.name)||D.roomId]})]})]},D.id)}),Q.length>1&&st.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(Ls,{isOpen:C,onClose:()=>w(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:B,onChange:D=>x(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:we,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},qK=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:s}=rA(),{schedule1:A,schedule2:i}=sl(),[o,a]=k.useState("teachers"),[c,d]=k.useState(new Date().toISOString().split("T")[0]),[h,f]=k.useState(ce.First),[m,v]=k.useState(1),[y,T]=k.useState(ce.First),[C,w]=k.useState(1),[_,S]=k.useState(""),[U,N]=k.useState(""),B=k.useMemo(()=>{const b=new Date(c).getMonth();return b>=0&&b<=4?i:A},[c,A,i]);k.useEffect(()=>{r&&(S(r.telegramToken||""),N(r.feedbackChatId||""))},[r]),k.useEffect(()=>{v(h===ce.First?1:0)},[h]),k.useEffect(()=>{w(y===ce.First?1:0)},[y]);const x=k.useMemo(()=>{const b=new Date(c).getDay();return b===0||b===6?null:kn[b-1]},[c]),I=ls[h],F=k.useMemo(()=>x?e.filter(b=>b.shifts&&!b.shifts.includes(h)||b.unavailableDates.includes(c)?!1:!B.some(Re=>Re.teacherId===b.id&&Re.day===x&&Re.period>m&&Re.shift===h)).sort((b,Qe)=>b.name.localeCompare(Qe.name)):[],[e,c,x,m,h,B]),R=k.useMemo(()=>{if(!x)return[];const b=new Set;return B.forEach(Re=>{Re.day===x&&Re.period===C&&Re.shift===y&&Re.roomId&&b.add(Re.roomId)}),n.filter(Re=>!b.has(Re.id)).map(Re=>Re.name)},[B,n,x,C,y]),L=async()=>{await s({settings:{...r,telegramToken:_,feedbackChatId:U}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(q,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>a("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>a("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>a("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),o!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:b=>d(b.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),o==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:I.map(b=>l.jsx("button",{onClick:()=>v(b),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${m===b?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:b},b))})]})]}),o==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>T(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>T(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:ls[y].map(b=>l.jsx("button",{onClick:()=>w(b),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${C===b?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:b},b))})]})]}),o==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:_,onChange:b=>S(b.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:U,onChange:b=>N(b.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:L,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Save",size:20}),"  "]})]})]}),o==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[F.map(b=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(q,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:b.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:b.subjectIds.slice(0,2).map(Qe=>{const Re=t.find($e=>$e.id===Qe);return Re?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:Re.name},Qe):null})})]})]},b.id)),F.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",m,"   ",h]})]}),o==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[R.map(b=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(q,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:b}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},b)),R.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(q,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var z0=function(t,e){return z0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},z0(t,e)};function Zr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");z0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var W0=function(){return W0=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(e[A]=n[A])}return e},W0.apply(this,arguments)};function Mn(t,e,n,r){function s(A){return A instanceof n?A:new n(function(i){i(A)})}return new(n||(n=Promise))(function(A,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(o,a)}c((r=r.apply(t,[])).next())})}function Qn(t,e){var n={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},r,s,A,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(A=n.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){n.label=c[1];break}if(c[0]===6&&n.label<A[1]){n.label=A[1],A=c;break}if(A&&n.label<A[2]){n.label=A[2],n.ops.push(c);break}A[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Id(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,A;r<s;r++)(A||!(r in e))&&(A||(A=Array.prototype.slice.call(e,0,r)),A[r]=e[r]);return t.concat(A||e)}var $s=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Ug=function(t,e){return $s.fromClientRect(t,e.getBoundingClientRect())},JK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new $s(0,0,r,s)},Sg=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Gt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},$_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ed=0;Ed<$_.length;Ed++)XK[$_.charCodeAt(Ed)]=Ed;var q_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bd=0;bd<q_.length;bd++)Kl[q_.charCodeAt(bd)]=bd;var YK=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=Kl[t.charCodeAt(r)],i=Kl[t.charCodeAt(r+1)],o=Kl[t.charCodeAt(r+2)],a=Kl[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},ZK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},e3=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Hi=5,Ky=11,Gp=2,t3=Ky-Hi,yS=65536>>Hi,n3=1<<Hi,zp=n3-1,r3=1024>>Hi,s3=yS+r3,A3=s3,i3=32,o3=A3+i3,a3=65536>>Ky,l3=1<<t3,c3=l3-1,J_=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},u3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},d3=function(t,e){var n=YK(t),r=Array.isArray(n)?e3(n):new Uint32Array(n),s=Array.isArray(n)?ZK(n):new Uint16Array(n),A=24,i=J_(s,A/2,r[4]/2),o=r[5]===2?J_(s,(A+r[4])/2):u3(r,Math.ceil((A+r[4])/4));return new h3(r[0],r[1],r[2],r[3],i,o)},h3=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Hi],n=(n<<Gp)+(e&zp),this.data[n];if(e<=65535)return n=this.index[yS+(e-55296>>Hi)],n=(n<<Gp)+(e&zp),this.data[n];if(e<this.highStart)return n=o3-a3+(e>>Ky),n=this.index[n],n+=e>>Hi&c3,n=this.index[n],n=(n<<Gp)+(e&zp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),X_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Td=0;Td<X_.length;Td++)f3[X_.charCodeAt(Td)]=Td;var g3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Y_=50,p3=1,BS=2,xS=3,m3=4,w3=5,Z_=7,CS=8,eI=9,bA=10,$0=11,tI=12,q0=13,v3=14,Gl=15,J0=16,Fd=17,Ul=18,y3=19,nI=20,X0=21,Sl=22,Wp=23,Fo=24,gr=25,zl=26,Wl=27,Uo=28,B3=29,Ti=30,x3=31,Ud=32,Sd=33,Y0=34,Z0=35,ew=36,lu=37,tw=38,wh=39,vh=40,$p=41,_S=42,C3=43,_3=[9001,65288],IS="!",Ze="",Qd="",nw=d3(g3),Es=[Ti,ew],rw=[p3,BS,xS,w3],ES=[bA,CS],rI=[Wl,zl],I3=rw.concat(ES),sI=[tw,wh,vh,Y0,Z0],E3=[Gl,q0],b3=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(A,i){var o=nw.get(A);if(o>Y_?(s.push(!0),o-=Y_):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return r.push(i),n.push(J0);if(o===m3||o===$0){if(i===0)return r.push(i),n.push(Ti);var a=n[i-1];return I3.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(Ti))}if(r.push(i),o===x3)return n.push(e==="strict"?X0:lu);if(o===_S||o===B3)return n.push(Ti);if(o===C3)return A>=131072&&A<=196605||A>=196608&&A<=262141?n.push(lu):n.push(Ti);n.push(o)}),[r,n,s]},qp=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=n;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==bA)break}if(s===bA)for(var A=n;A>0;){A--;var o=r[A];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==bA)break}if(o!==bA)break}return!1},AI=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===bA)n--;else return r}return 0},T3=function(t,e,n,r,s){if(n[r]===0)return Ze;var A=r-1;if(Array.isArray(s)&&s[A]===!0)return Ze;var i=A-1,o=A+1,a=e[A],c=i>=0?e[i]:0,d=e[o];if(a===BS&&d===xS)return Ze;if(rw.indexOf(a)!==-1)return IS;if(rw.indexOf(d)!==-1||ES.indexOf(d)!==-1)return Ze;if(AI(A,e)===CS)return Qd;if(nw.get(t[A])===$0||(a===Ud||a===Sd)&&nw.get(t[o])===$0||a===Z_||d===Z_||a===eI||[bA,q0,Gl].indexOf(a)===-1&&d===eI||[Fd,Ul,y3,Fo,Uo].indexOf(d)!==-1||AI(A,e)===Sl||qp(Wp,Sl,A,e)||qp([Fd,Ul],X0,A,e)||qp(tI,tI,A,e))return Ze;if(a===bA)return Qd;if(a===Wp||d===Wp)return Ze;if(d===J0||a===J0)return Qd;if([q0,Gl,X0].indexOf(d)!==-1||a===v3||c===ew&&E3.indexOf(a)!==-1||a===Uo&&d===ew||d===nI||Es.indexOf(d)!==-1&&a===gr||Es.indexOf(a)!==-1&&d===gr||a===Wl&&[lu,Ud,Sd].indexOf(d)!==-1||[lu,Ud,Sd].indexOf(a)!==-1&&d===zl||Es.indexOf(a)!==-1&&rI.indexOf(d)!==-1||rI.indexOf(a)!==-1&&Es.indexOf(d)!==-1||[Wl,zl].indexOf(a)!==-1&&(d===gr||[Sl,Gl].indexOf(d)!==-1&&e[o+1]===gr)||[Sl,Gl].indexOf(a)!==-1&&d===gr||a===gr&&[gr,Uo,Fo].indexOf(d)!==-1)return Ze;if([gr,Uo,Fo,Fd,Ul].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===gr)return Ze;if([Uo,Fo].indexOf(f)!==-1)h--;else break}if([Wl,zl].indexOf(d)!==-1)for(var h=[Fd,Ul].indexOf(a)!==-1?i:A;h>=0;){var f=e[h];if(f===gr)return Ze;if([Uo,Fo].indexOf(f)!==-1)h--;else break}if(tw===a&&[tw,wh,Y0,Z0].indexOf(d)!==-1||[wh,Y0].indexOf(a)!==-1&&[wh,vh].indexOf(d)!==-1||[vh,Z0].indexOf(a)!==-1&&d===vh||sI.indexOf(a)!==-1&&[nI,zl].indexOf(d)!==-1||sI.indexOf(d)!==-1&&a===Wl||Es.indexOf(a)!==-1&&Es.indexOf(d)!==-1||a===Fo&&Es.indexOf(d)!==-1||Es.concat(gr).indexOf(a)!==-1&&d===Sl&&_3.indexOf(t[o])===-1||Es.concat(gr).indexOf(d)!==-1&&a===Ul)return Ze;if(a===$p&&d===$p){for(var m=n[A],v=1;m>0&&(m--,e[m]===$p);)v++;if(v%2!==0)return Ze}return a===Ud&&d===Sd?Ze:Qd},F3=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=b3(t,e.lineBreak),r=n[0],s=n[1],A=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[gr,Ti,_S].indexOf(o)!==-1?lu:o}));var i=e.wordBreak==="keep-all"?A.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,s,i]},U3=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===IS,this.start=r,this.end=s}return t.prototype.slice=function(){return Gt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),S3=function(t,e){var n=Sg(t),r=F3(n,e),s=r[0],A=r[1],i=r[2],o=n.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=Ze;c<o&&(d=T3(n,A,s,++c,i))===Ze;);if(d!==Ze||c===o){var h=new U3(n,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},Q3=1,k3=2,Lu=4,iI=8,mf=10,oI=47,pc=92,R3=9,N3=32,kd=34,Ql=61,P3=35,D3=36,L3=37,Rd=39,Nd=40,kl=41,O3=95,nr=45,M3=33,V3=60,H3=62,j3=64,K3=91,G3=93,z3=61,W3=123,Pd=63,$3=125,aI=124,q3=126,J3=128,lI=65533,Jp=42,Pi=43,X3=44,Y3=58,Z3=59,cu=46,e5=0,t5=8,n5=11,r5=14,s5=31,A5=127,ts=-1,bS=48,TS=97,FS=101,i5=102,o5=117,a5=122,US=65,SS=69,QS=70,l5=85,c5=90,Rn=function(t){return t>=bS&&t<=57},u5=function(t){return t>=55296&&t<=57343},So=function(t){return Rn(t)||t>=US&&t<=QS||t>=TS&&t<=i5},d5=function(t){return t>=TS&&t<=a5},h5=function(t){return t>=US&&t<=c5},f5=function(t){return d5(t)||h5(t)},g5=function(t){return t>=J3},Dd=function(t){return t===mf||t===R3||t===N3},wf=function(t){return f5(t)||g5(t)||t===O3},cI=function(t){return wf(t)||Rn(t)||t===nr},p5=function(t){return t>=e5&&t<=t5||t===n5||t>=r5&&t<=s5||t===A5},pA=function(t,e){return t!==pc?!1:e!==mf},Ld=function(t,e,n){return t===nr?wf(e)||pA(e,n):wf(t)?!0:!!(t===pc&&pA(t,e))},Xp=function(t,e,n){return t===Pi||t===nr?Rn(e)?!0:e===cu&&Rn(n):Rn(t===cu?e:t)},m5=function(t){var e=0,n=1;(t[e]===Pi||t[e]===nr)&&(t[e]===nr&&(n=-1),e++);for(var r=[];Rn(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Gt.apply(void 0,r),10):0;t[e]===cu&&e++;for(var A=[];Rn(t[e]);)A.push(t[e++]);var i=A.length,o=i?parseInt(Gt.apply(void 0,A),10):0;(t[e]===SS||t[e]===FS)&&e++;var a=1;(t[e]===Pi||t[e]===nr)&&(t[e]===nr&&(a=-1),e++);for(var c=[];Rn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Gt.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,a*d)},w5={type:2},v5={type:3},y5={type:4},B5={type:13},x5={type:8},C5={type:21},_5={type:9},I5={type:10},E5={type:11},b5={type:12},T5={type:14},Od={type:23},F5={type:1},U5={type:25},S5={type:24},Q5={type:26},k5={type:27},R5={type:28},N5={type:29},P5={type:31},sw={type:32},kS=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Sg(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==sw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case kd:return this.consumeStringToken(kd);case P3:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(cI(n)||pA(r,s)){var A=Ld(n,r,s)?k3:Q3,i=this.consumeName();return{type:5,value:i,flags:A}}break;case D3:if(this.peekCodePoint(0)===Ql)return this.consumeCodePoint(),B5;break;case Rd:return this.consumeStringToken(Rd);case Nd:return w5;case kl:return v5;case Jp:if(this.peekCodePoint(0)===Ql)return this.consumeCodePoint(),T5;break;case Pi:if(Xp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case X3:return y5;case nr:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Xp(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Ld(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===nr&&c===H3)return this.consumeCodePoint(),this.consumeCodePoint(),S5;break;case cu:if(Xp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case oI:if(this.peekCodePoint(0)===Jp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Jp&&(d=this.consumeCodePoint(),d===oI))return this.consumeToken();if(d===ts)return this.consumeToken()}break;case Y3:return Q5;case Z3:return k5;case V3:if(this.peekCodePoint(0)===M3&&this.peekCodePoint(1)===nr&&this.peekCodePoint(2)===nr)return this.consumeCodePoint(),this.consumeCodePoint(),U5;break;case j3:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(Ld(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case K3:return R5;case pc:if(pA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case G3:return N5;case z3:if(this.peekCodePoint(0)===Ql)return this.consumeCodePoint(),x5;break;case W3:return E5;case $3:return b5;case o5:case l5:var v=this.peekCodePoint(0),y=this.peekCodePoint(1);return v===Pi&&(So(y)||y===Pd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case aI:if(this.peekCodePoint(0)===Ql)return this.consumeCodePoint(),_5;if(this.peekCodePoint(0)===aI)return this.consumeCodePoint(),C5;break;case q3:if(this.peekCodePoint(0)===Ql)return this.consumeCodePoint(),I5;break;case ts:return sw}return Dd(e)?(this.consumeWhiteSpace(),P5):Rn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):wf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Gt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();So(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Pd&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Gt.apply(void 0,e.map(function(a){return a===Pd?bS:a})),16),A=parseInt(Gt.apply(void 0,e.map(function(a){return a===Pd?QS:a})),16);return{type:30,start:s,end:A}}var i=parseInt(Gt.apply(void 0,e),16);if(this.peekCodePoint(0)===nr&&So(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];So(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var A=parseInt(Gt.apply(void 0,o),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Nd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Nd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ts)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Rd||n===kd){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ts||this.peekCodePoint(0)===kl)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Od)}for(;;){var s=this.consumeCodePoint();if(s===ts||s===kl)return{type:22,value:Gt.apply(void 0,e)};if(Dd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ts||this.peekCodePoint(0)===kl?(this.consumeCodePoint(),{type:22,value:Gt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Od);if(s===kd||s===Rd||s===Nd||p5(s))return this.consumeBadUrlRemnants(),Od;if(s===pc)if(pA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Od;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Dd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===kl||e===ts)return;pA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Gt.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===ts||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===mf)return this._value.splice(0,r),F5;if(s===pc){var A=this._value[r+1];A!==ts&&A!==void 0&&(A===mf?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):pA(s,A)&&(n+=this.consumeStringSlice(r),n+=Gt(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Lu,r=this.peekCodePoint(0);for((r===Pi||r===nr)&&e.push(this.consumeCodePoint());Rn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===cu&&Rn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=iI;Rn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((r===SS||r===FS)&&((s===Pi||s===nr)&&Rn(A)||Rn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=iI;Rn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[m5(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Ld(s,A,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===L3?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(So(e)){for(var n=Gt(e);So(this.peekCodePoint(0))&&n.length<6;)n+=Gt(this.consumeCodePoint());Dd(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||u5(r)||r>1114111?lI:r}return e===ts?lI:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(cI(n))e+=Gt(n);else if(pA(n,this.peekCodePoint(0)))e+=Gt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),RS=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new kS;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||L5(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?sw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Ou=function(t){return t.type===15},Al=function(t){return t.type===17},ht=function(t){return t.type===20},D5=function(t){return t.type===0},Aw=function(t,e){return ht(t)&&t.value===e},NS=function(t){return t.type!==31},Ma=function(t){return t.type!==31&&t.type!==4},xs=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},L5=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ni=function(t){return t.type===17||t.type===15},Zt=function(t){return t.type===16||ni(t)},PS=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},xn={type:17,number:0,flags:Lu},Gy={type:16,number:50,flags:Lu},TA={type:16,number:100,flags:Lu},$l=function(t,e,n){var r=t[0],s=t[1];return[pt(r,e),pt(typeof s<"u"?s:r,n)]},pt=function(t,e){if(t.type===16)return t.number/100*e;if(Ou(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},DS="deg",LS="grad",OS="rad",MS="turn",Qg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case DS:return Math.PI*e.number/180;case LS:return Math.PI/200*e.number;case OS:return e.number;case MS:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},VS=function(t){return t.type===15&&(t.unit===DS||t.unit===LS||t.unit===OS||t.unit===MS)},HS=function(t){var e=t.filter(ht).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[xn,xn];case"to top":case"bottom":return Rr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[xn,TA];case"to right":case"left":return Rr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[TA,TA];case"to bottom":case"top":return Rr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[TA,xn];case"to left":case"right":return Rr(270)}return 0},Rr=function(t){return Math.PI*t/180},VA={name:"color",parse:function(t,e){if(e.type===18){var n=O5[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return FA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return FA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return FA(parseInt(r,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return FA(parseInt(r,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var o=Os[e.value.toUpperCase()];if(typeof o<"u")return o}return Os.TRANSPARENT}},HA=function(t){return(255&t)===0},un=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},FA=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},uI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},dI=function(t,e){var n=e.filter(Ma);if(n.length===3){var r=n.map(uI),s=r[0],A=r[1],i=r[2];return FA(s,A,i,1)}if(n.length===4){var o=n.map(uI),s=o[0],A=o[1],i=o[2],a=o[3];return FA(s,A,i,a)}return 0};function Yp(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var hI=function(t,e){var n=e.filter(Ma),r=n[0],s=n[1],A=n[2],i=n[3],o=(r.type===17?Rr(r.number):Qg.parse(t,r))/(Math.PI*2),a=Zt(s)?s.number/100:0,c=Zt(A)?A.number/100:0,d=typeof i<"u"&&Zt(i)?pt(i,1):1;if(a===0)return FA(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,m=Yp(f,h,o+1/3),v=Yp(f,h,o),y=Yp(f,h,o-1/3);return FA(m*255,v*255,y*255,d)},O5={hsl:hI,hsla:hI,rgb:dI,rgba:dI},mc=function(t,e){return VA.parse(t,RS.create(e).parseComponentValue())},Os={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},M5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ht(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},V5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},kg=function(t,e){var n=VA.parse(t,e[0]),r=e[1];return r&&Zt(r)?{color:n,stop:r}:{color:n,stop:null}},fI=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=xn),r.stop===null&&(r.stop=TA);for(var s=[],A=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=pt(o,e);a>A?s.push(a):s.push(A),A=a}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],m=(d-f)/(h+1),v=1;v<=h;v++)s[c+v-1]=m*v;c=null}}return t.map(function(y,T){var C=y.color;return{color:C,stop:Math.max(Math.min(1,s[T]/e),0)}})},H5=function(t,e,n){var r=e/2,s=n/2,A=pt(t[0],e)-r,i=s-pt(t[1],n);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},j5=function(t,e,n){var r=typeof t=="number"?t:H5(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),A=e/2,i=n/2,o=s/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,A-c,A+c,i-a,i+a]},Kr=function(t,e){return Math.sqrt(t*t+e*e)},gI=function(t,e,n,r,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,o){var a=o[0],c=o[1],d=Kr(n-a,r-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},K5=function(t,e,n,r,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)A=i=Math.min(Kr(e,n),Kr(e,n-s),Kr(e-r,n),Kr(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),a=gI(r,s,e,n,!0),c=a[0],d=a[1];A=Kr(c-e,(d-n)/o),i=o*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)A=i=Math.max(Kr(e,n),Kr(e,n-s),Kr(e-r,n),Kr(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=gI(r,s,e,n,!1),c=h[0],d=h[1];A=Kr(c-e,(d-n)/o),i=o*A}break}return Array.isArray(t.size)&&(A=pt(t.size[0],r),i=t.size.length===2?pt(t.size[1],s):A),[A,i]},G5=function(t,e){var n=Rr(180),r=[];return xs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){n=HS(s);return}else if(VS(i)){n=Qg.parse(t,i);return}}var o=kg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Md=function(t,e){var n=Rr(180),r=[];return xs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=HS(s);return}else if(VS(i)){n=(Qg.parse(t,i)+Rr(270))%Rr(360);return}}var o=kg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},z5=function(t,e){var n=Rr(180),r=[],s=1,A=0,i=3,o=[];return xs(e).forEach(function(a,c){var d=a[0];if(c===0){if(ht(d)&&d.value==="linear"){s=1;return}else if(ht(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=VA.parse(t,d.values[0]);r.push({stop:xn,color:h})}else if(d.name==="to"){var h=VA.parse(t,d.values[0]);r.push({stop:TA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Ma);if(f.length===2){var h=VA.parse(t,f[1]),m=f[0];Al(m)&&r.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),s===1?{angle:(n+Rr(180))%Rr(360),stops:r,type:s}:{size:i,shape:A,stops:r,position:o,type:s}},jS="closest-side",KS="farthest-side",GS="closest-corner",zS="farthest-corner",WS="circle",$S="ellipse",qS="cover",JS="contain",W5=function(t,e){var n=0,r=3,s=[],A=[];return xs(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,f){if(c)if(ht(f))switch(f.value){case"center":return A.push(Gy),h;case"top":case"left":return A.push(xn),h;case"right":case"bottom":return A.push(TA),h}else(Zt(f)||ni(f))&&A.push(f);else if(ht(f))switch(f.value){case WS:return n=0,!1;case $S:return n=1,!1;case"at":return c=!0,!1;case jS:return r=0,!1;case qS:case KS:return r=1,!1;case JS:case GS:return r=2,!1;case zS:return r=3,!1}else if(ni(f)||Zt(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=kg(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:A,type:2}},Vd=function(t,e){var n=0,r=3,s=[],A=[];return xs(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(ht(h))switch(h.value){case"center":return A.push(Gy),!1;case"top":case"left":return A.push(xn),!1;case"right":case"bottom":return A.push(TA),!1}else if(Zt(h)||ni(h))return A.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(ht(h))switch(h.value){case WS:return n=0,!1;case $S:return n=1,!1;case JS:case jS:return r=0,!1;case KS:return r=1,!1;case GS:return r=2,!1;case qS:case zS:return r=3,!1}else if(ni(h)||Zt(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var c=kg(t,i);s.push(c)}}),{size:r,shape:n,stops:s,position:A,type:2}},$5=function(t){return t.type===1},q5=function(t){return t.type===2},zy={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=XS[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function J5(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!XS[t.name])}var XS={"linear-gradient":G5,"-moz-linear-gradient":Md,"-ms-linear-gradient":Md,"-o-linear-gradient":Md,"-webkit-linear-gradient":Md,"radial-gradient":W5,"-moz-radial-gradient":Vd,"-ms-radial-gradient":Vd,"-o-radial-gradient":Vd,"-webkit-radial-gradient":Vd,"-webkit-gradient":z5},X5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Ma(r)&&J5(r)}).map(function(r){return zy.parse(t,r)})}},Y5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ht(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Z5={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return xs(e).map(function(n){return n.filter(Zt)}).map(PS)}},e6={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return xs(e).map(function(n){return n.filter(ht).map(function(r){return r.value}).join(" ")}).map(t6)}},t6=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},fa;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(fa||(fa={}));var n6={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return xs(e).map(function(n){return n.filter(r6)})}},r6=function(t){return ht(t)||Zt(t)},Rg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},s6=Rg("top"),A6=Rg("right"),i6=Rg("bottom"),o6=Rg("left"),Ng=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return PS(n.filter(Zt))}}},a6=Ng("top-left"),l6=Ng("top-right"),c6=Ng("bottom-right"),u6=Ng("bottom-left"),Pg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},d6=Pg("top"),h6=Pg("right"),f6=Pg("bottom"),g6=Pg("left"),Dg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Ou(n)?n.number:0}}},p6=Dg("top"),m6=Dg("right"),w6=Dg("bottom"),v6=Dg("left"),y6={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},B6={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},x6={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).reduce(function(n,r){return n|C6(r.value)},0)}},C6=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},_6={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},I6={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},vf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(vf||(vf={}));var E6={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return vf.STRICT;case"normal":default:return vf.NORMAL}}},b6={name:"line-height",initialValue:"normal",prefix:!1,type:4},pI=function(t,e){return ht(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Zt(t)?pt(t,e):e},T6={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:zy.parse(t,e)}},F6={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},iw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Lg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},U6=Lg("top"),S6=Lg("right"),Q6=Lg("bottom"),k6=Lg("left"),R6={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},N6={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Og=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},P6=Og("top"),D6=Og("right"),L6=Og("bottom"),O6=Og("left"),M6={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},V6={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},H6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Aw(e[0],"none")?[]:xs(e).map(function(n){for(var r={color:Os.TRANSPARENT,offsetX:xn,offsetY:xn,blur:xn},s=0,A=0;A<n.length;A++){var i=n[A];ni(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=VA.parse(t,i)}return r})}},j6={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},K6={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=W6[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},G6=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},z6=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,A,i,o]:null},W6={matrix:G6,matrix3d:z6},mI={type:16,number:50,flags:Lu},$6=[mI,mI],q6={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Zt);return n.length!==2?$6:[n[0],n[1]]}},J6={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},wc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(wc||(wc={}));var X6={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return wc.BREAK_ALL;case"keep-all":return wc.KEEP_ALL;case"normal":default:return wc.NORMAL}}},Y6={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Al(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},YS={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Z6={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Al(e)?e.number:1}},eG={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tG={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},nG={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},rG={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},sG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Al(e))return e.number;if(ht(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},AG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ht).map(function(n){return n.value})}},iG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},sn=function(t,e){return(t&e)!==0},oG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},aG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(NS),A=0;A<s.length;A++){var i=s[A],o=s[A+1];if(i.type===20){var a=o&&Al(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},lG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(NS),s=0;s<r.length;s++){var A=r[s],i=r[s+1];if(ht(A)&&A.value!=="none"){var o=i&&Al(i)?i.number:0;n.push({counter:A.value,reset:o})}}return n}},cG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ou).map(function(n){return YS.parse(t,n)})}},uG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(D5);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,o=s[A+1].value;r.push({open:i,close:o})}return r}},wI=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},dG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Aw(e[0],"none")?[]:xs(e).map(function(n){for(var r={color:255,offsetX:xn,offsetY:xn,blur:xn,spread:xn,inset:!1},s=0,A=0;A<n.length;A++){var i=n[A];Aw(i,"inset")?r.inset=!0:ni(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=VA.parse(t,i)}return r})}},hG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(ht).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},fG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},gG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ou(e)?e.number:0}},pG=function(){function t(e,n){var r,s;this.animationDuration=ve(e,cG,n.animationDuration),this.backgroundClip=ve(e,M5,n.backgroundClip),this.backgroundColor=ve(e,V5,n.backgroundColor),this.backgroundImage=ve(e,X5,n.backgroundImage),this.backgroundOrigin=ve(e,Y5,n.backgroundOrigin),this.backgroundPosition=ve(e,Z5,n.backgroundPosition),this.backgroundRepeat=ve(e,e6,n.backgroundRepeat),this.backgroundSize=ve(e,n6,n.backgroundSize),this.borderTopColor=ve(e,s6,n.borderTopColor),this.borderRightColor=ve(e,A6,n.borderRightColor),this.borderBottomColor=ve(e,i6,n.borderBottomColor),this.borderLeftColor=ve(e,o6,n.borderLeftColor),this.borderTopLeftRadius=ve(e,a6,n.borderTopLeftRadius),this.borderTopRightRadius=ve(e,l6,n.borderTopRightRadius),this.borderBottomRightRadius=ve(e,c6,n.borderBottomRightRadius),this.borderBottomLeftRadius=ve(e,u6,n.borderBottomLeftRadius),this.borderTopStyle=ve(e,d6,n.borderTopStyle),this.borderRightStyle=ve(e,h6,n.borderRightStyle),this.borderBottomStyle=ve(e,f6,n.borderBottomStyle),this.borderLeftStyle=ve(e,g6,n.borderLeftStyle),this.borderTopWidth=ve(e,p6,n.borderTopWidth),this.borderRightWidth=ve(e,m6,n.borderRightWidth),this.borderBottomWidth=ve(e,w6,n.borderBottomWidth),this.borderLeftWidth=ve(e,v6,n.borderLeftWidth),this.boxShadow=ve(e,dG,n.boxShadow),this.color=ve(e,y6,n.color),this.direction=ve(e,B6,n.direction),this.display=ve(e,x6,n.display),this.float=ve(e,_6,n.cssFloat),this.fontFamily=ve(e,nG,n.fontFamily),this.fontSize=ve(e,rG,n.fontSize),this.fontStyle=ve(e,iG,n.fontStyle),this.fontVariant=ve(e,AG,n.fontVariant),this.fontWeight=ve(e,sG,n.fontWeight),this.letterSpacing=ve(e,I6,n.letterSpacing),this.lineBreak=ve(e,E6,n.lineBreak),this.lineHeight=ve(e,b6,n.lineHeight),this.listStyleImage=ve(e,T6,n.listStyleImage),this.listStylePosition=ve(e,F6,n.listStylePosition),this.listStyleType=ve(e,iw,n.listStyleType),this.marginTop=ve(e,U6,n.marginTop),this.marginRight=ve(e,S6,n.marginRight),this.marginBottom=ve(e,Q6,n.marginBottom),this.marginLeft=ve(e,k6,n.marginLeft),this.opacity=ve(e,Z6,n.opacity);var A=ve(e,R6,n.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=ve(e,N6,n.overflowWrap),this.paddingTop=ve(e,P6,n.paddingTop),this.paddingRight=ve(e,D6,n.paddingRight),this.paddingBottom=ve(e,L6,n.paddingBottom),this.paddingLeft=ve(e,O6,n.paddingLeft),this.paintOrder=ve(e,hG,n.paintOrder),this.position=ve(e,V6,n.position),this.textAlign=ve(e,M6,n.textAlign),this.textDecorationColor=ve(e,eG,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=ve(e,tG,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=ve(e,H6,n.textShadow),this.textTransform=ve(e,j6,n.textTransform),this.transform=ve(e,K6,n.transform),this.transformOrigin=ve(e,q6,n.transformOrigin),this.visibility=ve(e,J6,n.visibility),this.webkitTextStrokeColor=ve(e,fG,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=ve(e,gG,n.webkitTextStrokeWidth),this.wordBreak=ve(e,X6,n.wordBreak),this.zIndex=ve(e,Y6,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return HA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return sn(this.display,4)||sn(this.display,33554432)||sn(this.display,268435456)||sn(this.display,536870912)||sn(this.display,67108864)||sn(this.display,134217728)},t}(),mG=function(){function t(e,n){this.content=ve(e,oG,n.content),this.quotes=ve(e,uG,n.quotes)}return t}(),vI=function(){function t(e,n){this.counterIncrement=ve(e,aG,n.counterIncrement),this.counterReset=ve(e,lG,n.counterReset)}return t}(),ve=function(t,e,n){var r=new kS,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var A=new RS(r.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,ht(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return Qg.parse(t,A.parseComponentValue());case"color":return VA.parse(t,A.parseComponentValue());case"image":return zy.parse(t,A.parseComponentValue());case"length":var o=A.parseComponentValue();return ni(o)?o:xn;case"length-percentage":var a=A.parseComponentValue();return Zt(a)?a:xn;case"time":return YS.parse(t,A.parseComponentValue())}break}},wG="data-html2canvas-debug",vG=function(t){var e=t.getAttribute(wG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ow=function(t,e){var n=vG(t);return n===1||e===n},Cs=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ow(n,3))debugger;this.styles=new pG(e,window.getComputedStyle(n,null)),cw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Ug(this.context,n),ow(n,4)&&(this.flags|=16)}return t}(),yG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",yI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ql=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hd=0;Hd<yI.length;Hd++)ql[yI.charCodeAt(Hd)]=Hd;var BG=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=ql[t.charCodeAt(r)],i=ql[t.charCodeAt(r+1)],o=ql[t.charCodeAt(r+2)],a=ql[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},xG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},CG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},ji=5,Wy=11,Zp=2,_G=Wy-ji,ZS=65536>>ji,IG=1<<ji,em=IG-1,EG=1024>>ji,bG=ZS+EG,TG=bG,FG=32,UG=TG+FG,SG=65536>>Wy,QG=1<<_G,kG=QG-1,BI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},RG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},NG=function(t,e){var n=BG(t),r=Array.isArray(n)?CG(n):new Uint32Array(n),s=Array.isArray(n)?xG(n):new Uint16Array(n),A=24,i=BI(s,A/2,r[4]/2),o=r[5]===2?BI(s,(A+r[4])/2):RG(r,Math.ceil((A+r[4])/4));return new PG(r[0],r[1],r[2],r[3],i,o)},PG=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>ji],n=(n<<Zp)+(e&em),this.data[n];if(e<=65535)return n=this.index[ZS+(e-55296>>ji)],n=(n<<Zp)+(e&em),this.data[n];if(e<this.highStart)return n=UG-SG+(e>>Wy),n=this.index[n],n+=e>>ji&kG,n=this.index[n],n=(n<<Zp)+(e&em),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),xI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",DG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jd=0;jd<xI.length;jd++)DG[xI.charCodeAt(jd)]=jd;var LG=1,tm=2,nm=3,CI=4,_I=5,OG=7,II=8,rm=9,sm=10,EI=11,bI=12,TI=13,FI=14,Am=15,MG=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},VG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},HG=NG(yG),Tr="",im="",jG=function(t){return HG.get(t)},KG=function(t,e,n){var r=n-2,s=e[r],A=e[n-1],i=e[n];if(A===tm&&i===nm)return Tr;if(A===tm||A===nm||A===CI||i===tm||i===nm||i===CI)return im;if(A===II&&[II,rm,EI,bI].indexOf(i)!==-1||(A===EI||A===rm)&&(i===rm||i===sm)||(A===bI||A===sm)&&i===sm||i===TI||i===_I||i===OG||A===LG)return Tr;if(A===TI&&i===FI){for(;s===_I;)s=e[--r];if(s===FI)return Tr}if(A===Am&&i===Am){for(var o=0;s===Am;)o++,s=e[--r];if(o%2===0)return Tr}return im},GG=function(t){var e=MG(t),n=e.length,r=0,s=0,A=e.map(jG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=Tr;r<n&&(i=KG(e,A,++r))===Tr;);if(i!==Tr||r===n){var o=VG.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},zG=function(t){for(var e=GG(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},WG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(r),A===e)return!0}}return!1},$G=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=Sg(r.data).map(function(a){return Gt(a)}),A=0,i={},o=s.every(function(a,c){n.setStart(r,A),n.setEnd(r,A+a.length);var d=n.getBoundingClientRect();A+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},qG=function(){return typeof new Image().crossOrigin<"u"},JG=function(){return typeof new XMLHttpRequest().responseType=="string"},XG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},UI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},YG=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,A=e.toDataURL();s.src=A;var i=aw(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),SI(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=n+"px",UI(a)?SI(aw(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),UI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},aw=function(t,e,n,r,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),o=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},SI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},vn={get SUPPORT_RANGE_BOUNDS(){var t=WG(document);return Object.defineProperty(vn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=vn.SUPPORT_RANGE_BOUNDS&&$G(document);return Object.defineProperty(vn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=XG(document);return Object.defineProperty(vn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?YG(document):Promise.resolve(!1);return Object.defineProperty(vn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=qG();return Object.defineProperty(vn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=JG();return Object.defineProperty(vn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(vn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},vc=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),ZG=function(t,e,n,r){var s=n8(e,n),A=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(vn.SUPPORT_RANGE_BOUNDS){var a=QI(r,i,o.length).getClientRects();if(a.length>1){var c=$y(o),d=0;c.forEach(function(f){A.push(new vc(f,$s.fromDOMRectList(t,QI(r,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new vc(o,$s.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);A.push(new vc(o,e8(t,r))),r=h}else vn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),A},e8=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var A=Ug(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),A}}return $s.EMPTY},QI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},$y=function(t){if(vn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return zG(t)},t8=function(t,e){if(vn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return s8(t,e)},n8=function(t,e){return e.letterSpacing!==0?$y(t):t8(t,e)},r8=[32,160,4961,65792,65793,4153,4241],s8=function(t,e){for(var n=S3(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,A=function(){if(s.value){var i=s.value.slice(),o=Sg(i),a="";o.forEach(function(c){r8.indexOf(c)===-1?a+=Gt(c):(a.length&&r.push(a),r.push(Gt(c)),a="")}),a.length&&r.push(a)}};!(s=n.next()).done;)A();return r},A8=function(){function t(e,n,r){this.text=i8(n.data,r.textTransform),this.textBounds=ZG(e,this.text,r,n)}return t}(),i8=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(o8,a8);case 2:return t.toUpperCase();default:return t}},o8=/(^|\s|:|-|\(|\))([a-z])/g,a8=function(t,e,n){return t.length>0?e+n.toUpperCase():t},eQ=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Cs),tQ=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(Cs),nQ=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=new XMLSerializer,i=Ug(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Cs),rQ=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Cs),lw=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(Cs),l8=[{type:15,flags:0,unit:"px",number:3}],c8=[{type:16,flags:0,number:50}],u8=function(t){return t.width>t.height?new $s(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new $s(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},d8=function(t){var e=t.type===h8?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},yf="checkbox",Bf="radio",h8="password",kI=707406591,qy=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=d8(r),(s.type===yf||s.type===Bf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=u8(s.bounds)),s.type){case yf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=l8;break;case Bf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=c8;break}return s}return e}(Cs),sQ=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=r.options[r.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(Cs),AQ=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Cs),iQ=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=aQ(n,r.contentWindow.document.documentElement);var A=r.contentWindow.document.documentElement?mc(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Os.TRANSPARENT,i=r.contentWindow.document.body?mc(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Os.TRANSPARENT;s.backgroundColor=HA(A)?HA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(Cs),f8=["OL","UL","MENU"],yh=function(t,e,n,r){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,lQ(s)&&s.data.trim().length>0)n.textNodes.push(new A8(t,s,n.styles));else if(ta(s))if(hQ(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return yh(t,o,n,r)});else{var i=oQ(t,s);i.styles.isVisible()&&(g8(s,i,r)?i.flags|=4:p8(i.styles)&&(i.flags|=2),f8.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?yh(t,s.shadowRoot,i,r):!xf(s)&&!cQ(s)&&!Cf(s)&&yh(t,s,i,r))}},oQ=function(t,e){return uw(e)?new eQ(t,e):uQ(e)?new tQ(t,e):cQ(e)?new nQ(t,e):m8(e)?new rQ(t,e):w8(e)?new lw(t,e):v8(e)?new qy(t,e):Cf(e)?new sQ(t,e):xf(e)?new AQ(t,e):dQ(e)?new iQ(t,e):new Cs(t,e)},aQ=function(t,e){var n=oQ(t,e);return n.flags|=4,yh(t,e,n,n),n},g8=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Jy(t)&&n.styles.isTransparent()},p8=function(t){return t.isPositioned()||t.isFloating()},lQ=function(t){return t.nodeType===Node.TEXT_NODE},ta=function(t){return t.nodeType===Node.ELEMENT_NODE},cw=function(t){return ta(t)&&typeof t.style<"u"&&!Bh(t)},Bh=function(t){return typeof t.className=="object"},m8=function(t){return t.tagName==="LI"},w8=function(t){return t.tagName==="OL"},v8=function(t){return t.tagName==="INPUT"},y8=function(t){return t.tagName==="HTML"},cQ=function(t){return t.tagName==="svg"},Jy=function(t){return t.tagName==="BODY"},uQ=function(t){return t.tagName==="CANVAS"},RI=function(t){return t.tagName==="VIDEO"},uw=function(t){return t.tagName==="IMG"},dQ=function(t){return t.tagName==="IFRAME"},NI=function(t){return t.tagName==="STYLE"},B8=function(t){return t.tagName==="SCRIPT"},xf=function(t){return t.tagName==="TEXTAREA"},Cf=function(t){return t.tagName==="SELECT"},hQ=function(t){return t.tagName==="SLOT"},PI=function(t){return t.tagName.indexOf("-")>0},x8=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,A=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(A=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return A&&s.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),DI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},LI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},C8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},_8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Qo=function(t,e,n,r,s,A){return t<e||t>n?uu(t,s,A.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+A},fQ=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Kt=function(t,e,n,r,s){var A=n-e+1;return(t<0?"-":"")+(fQ(Math.abs(t),A,r,function(i){return Gt(Math.floor(i%A)+e)})+s)},mi=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return fQ(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Mo=1,dA=2,hA=4,Jl=8,bs=function(t,e,n,r,s,A){if(t<-9999||t>9999)return uu(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&sn(A,Mo)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&sn(A,dA)||c===1&&a===1&&sn(A,hA)&&t>100||c===1&&a>1&&sn(A,Jl)?o=e[c]+(a>0?n[a-1]:"")+o:c===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},OI="",MI="",VI="",om="",uu=function(t,e,n){var r=n?". ":"",s=n?"":"",A=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Kt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return mi(t,"",s);case 6:return Qo(t,1,3999,DI,3,r).toLowerCase();case 7:return Qo(t,1,3999,DI,3,r);case 8:return Kt(t,945,969,!1,r);case 9:return Kt(t,97,122,!1,r);case 10:return Kt(t,65,90,!1,r);case 11:return Kt(t,1632,1641,!0,r);case 12:case 49:return Qo(t,1,9999,LI,3,r);case 35:return Qo(t,1,9999,LI,3,r).toLowerCase();case 13:return Kt(t,2534,2543,!0,r);case 14:case 30:return Kt(t,6112,6121,!0,r);case 15:return mi(t,"",s);case 16:return mi(t,"",s);case 17:case 48:return bs(t,"",OI,"",s,dA|hA|Jl);case 47:return bs(t,"",MI,"",s,Mo|dA|hA|Jl);case 42:return bs(t,"",OI,"",s,dA|hA|Jl);case 41:return bs(t,"",MI,"",s,Mo|dA|hA|Jl);case 26:return bs(t,"","",VI,s,0);case 25:return bs(t,"","",VI,s,Mo|dA|hA);case 31:return bs(t,"","",om,A,Mo|dA|hA);case 33:return bs(t,"","",om,A,0);case 32:return bs(t,"","",om,A,Mo|dA|hA);case 18:return Kt(t,2406,2415,!0,r);case 20:return Qo(t,1,19999,_8,3,r);case 21:return Kt(t,2790,2799,!0,r);case 22:return Kt(t,2662,2671,!0,r);case 22:return Qo(t,1,10999,C8,3,r);case 23:return mi(t,"");case 24:return mi(t,"");case 27:return Kt(t,3302,3311,!0,r);case 28:return mi(t,"",s);case 29:return mi(t,"",s);case 34:return Kt(t,3792,3801,!0,r);case 37:return Kt(t,6160,6169,!0,r);case 38:return Kt(t,4160,4169,!0,r);case 39:return Kt(t,2918,2927,!0,r);case 40:return Kt(t,1776,1785,!0,r);case 43:return Kt(t,3046,3055,!0,r);case 44:return Kt(t,3174,3183,!0,r);case 45:return Kt(t,3664,3673,!0,r);case 46:return Kt(t,3872,3881,!0,r);case 3:default:return Kt(t,48,57,!0,r)}},gQ="data-html2canvas-ignore",HI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new x8,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=I8(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,a=o.document,c=T8(s).then(function(){return Mn(r,void 0,void 0,function(){var d,h;return Qn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(Q8),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,b8(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return s})]:[2,s]}})})});return a.open(),a.write(U8(document.doctype)+"<html></html>"),S8(this.referenceElement.ownerDocument,A,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(ow(e,2))debugger;if(uQ(e))return this.createCanvasClone(e);if(RI(e))return this.createVideoClone(e);if(NI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return uw(n)&&(uw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),PI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return am(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!ta(n)||!B8(n)&&!n.hasAttribute(gQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!ta(n)||!NI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(ta(A)&&hQ(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,A,r)},t.prototype.cloneNode=function(e,n){if(lQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&ta(e)&&(cw(e)||Bh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&cw(s)&&(this.clonedReferenceElement=s),Jy(s)&&N8(s);var a=this.counters.parse(new vI(this.context,A)),c=this.resolvePseudoContent(e,s,i,yc.BEFORE);PI(e)&&(n=!0),RI(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,yc.AFTER);return d&&s.appendChild(d),this.counters.pop(a),(A&&(this.options.copyStyles||Bh(e))&&!dQ(e)||n)&&am(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(xf(e)||Cf(e))&&(xf(s)||Cf(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var A=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new vI(this.context,r));var a=new mG(this.context,r),c=o.createElement("html2canvaspseudoelement");am(r,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(ht);m.length&&c.appendChild(o.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var v=h.values.filter(Ma),y=v[0],T=v[1];if(y&&ht(y)){var C=A.counters.getCounterValue(y.value),w=T&&ht(T)?iw.parse(A.context,T.value):3;c.appendChild(o.createTextNode(uu(C,w,!1)))}}else if(h.name==="counters"){var _=h.values.filter(Ma),y=_[0],S=_[1],T=_[2];if(y&&ht(y)){var U=A.counters.getCounterValues(y.value),N=T&&ht(T)?iw.parse(A.context,T.value):3,B=S&&S.type===0?S.value:"",x=U.map(function(R){return uu(R,N,!1)}).join(B);c.appendChild(o.createTextNode(x))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(wI(a.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(wI(a.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=dw+" "+hw;var d=s===yc.BEFORE?" "+dw:" "+hw;return Bh(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),yc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(yc||(yc={}));var I8=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(gQ,"true"),t.body.appendChild(n),n},E8=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},b8=function(t){return Promise.all([].slice.call(t.images,0).map(E8))},T8=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},F8=["all","d","content"],am=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);F8.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},U8=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},S8=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},Q8=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},k8=":before",R8=":after",dw="___html2canvas___pseudoelement_before",hw="___html2canvas___pseudoelement_after",jI=`{
    content: "" !important;
    display: none !important;
}`,N8=function(t){P8(t,"."+dw+k8+jI+`
         .`+hw+R8+jI)},P8=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},pQ=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),D8=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(cm(e)||V8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Mn(this,void 0,void 0,function(){var n,r,s,A,i=this;return Qn(this,function(o){switch(o.label){case 0:return n=pQ.isSameOrigin(e),r=!lm(e)&&this._options.useCORS===!0&&vn.SUPPORT_CORS_IMAGES&&!n,s=!lm(e)&&!n&&!cm(e)&&typeof this._options.proxy=="string"&&vn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!lm(e)&&!cm(e)&&!s&&!r?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(H8(A)||r)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var o=vn.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")A(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+s+" with status code "+a.status)},a.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}a.send()})},t}(),L8=/^data:image\/svg\+xml/i,O8=/^data:image\/.*;base64,/i,M8=/^data:image\/.*/i,V8=function(t){return vn.SUPPORT_SVG_DRAWING||!j8(t)},lm=function(t){return M8.test(t)},H8=function(t){return O8.test(t)},cm=function(t){return t.substr(0,4)==="blob"},j8=function(t){return t.substr(-3).toLowerCase()==="svg"||L8.test(t)},pe=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),ko=function(t,e,n){return new pe(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Kd=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=ko(this.start,this.startControl,e),s=ko(this.startControl,this.endControl,e),A=ko(this.endControl,this.end,e),i=ko(r,s,e),o=ko(s,A,e),a=ko(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,A,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Sr=function(t){return t.type===1},K8=function(){function t(e){var n=e.styles,r=e.bounds,s=$l(n.borderTopLeftRadius,r.width,r.height),A=s[0],i=s[1],o=$l(n.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],d=$l(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],m=$l(n.borderBottomLeftRadius,r.width,r.height),v=m[0],y=m[1],T=[];T.push((A+a)/r.width),T.push((v+h)/r.width),T.push((i+y)/r.height),T.push((c+f)/r.height);var C=Math.max.apply(Math,T);C>1&&(A/=C,i/=C,a/=C,c/=C,h/=C,f/=C,v/=C,y/=C);var w=r.width-a,_=r.height-f,S=r.width-h,U=r.height-y,N=n.borderTopWidth,B=n.borderRightWidth,x=n.borderBottomWidth,I=n.borderLeftWidth,F=pt(n.paddingTop,e.bounds.width),R=pt(n.paddingRight,e.bounds.width),L=pt(n.paddingBottom,e.bounds.width),b=pt(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?_t(r.left+I/3,r.top+N/3,A-I/3,i-N/3,lt.TOP_LEFT):new pe(r.left+I/3,r.top+N/3),this.topRightBorderDoubleOuterBox=A>0||i>0?_t(r.left+w,r.top+N/3,a-B/3,c-N/3,lt.TOP_RIGHT):new pe(r.left+r.width-B/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?_t(r.left+S,r.top+_,h-B/3,f-x/3,lt.BOTTOM_RIGHT):new pe(r.left+r.width-B/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=v>0||y>0?_t(r.left+I/3,r.top+U,v-I/3,y-x/3,lt.BOTTOM_LEFT):new pe(r.left+I/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?_t(r.left+I*2/3,r.top+N*2/3,A-I*2/3,i-N*2/3,lt.TOP_LEFT):new pe(r.left+I*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?_t(r.left+w,r.top+N*2/3,a-B*2/3,c-N*2/3,lt.TOP_RIGHT):new pe(r.left+r.width-B*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?_t(r.left+S,r.top+_,h-B*2/3,f-x*2/3,lt.BOTTOM_RIGHT):new pe(r.left+r.width-B*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||y>0?_t(r.left+I*2/3,r.top+U,v-I*2/3,y-x*2/3,lt.BOTTOM_LEFT):new pe(r.left+I*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=A>0||i>0?_t(r.left+I/2,r.top+N/2,A-I/2,i-N/2,lt.TOP_LEFT):new pe(r.left+I/2,r.top+N/2),this.topRightBorderStroke=A>0||i>0?_t(r.left+w,r.top+N/2,a-B/2,c-N/2,lt.TOP_RIGHT):new pe(r.left+r.width-B/2,r.top+N/2),this.bottomRightBorderStroke=h>0||f>0?_t(r.left+S,r.top+_,h-B/2,f-x/2,lt.BOTTOM_RIGHT):new pe(r.left+r.width-B/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=v>0||y>0?_t(r.left+I/2,r.top+U,v-I/2,y-x/2,lt.BOTTOM_LEFT):new pe(r.left+I/2,r.top+r.height-x/2),this.topLeftBorderBox=A>0||i>0?_t(r.left,r.top,A,i,lt.TOP_LEFT):new pe(r.left,r.top),this.topRightBorderBox=a>0||c>0?_t(r.left+w,r.top,a,c,lt.TOP_RIGHT):new pe(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?_t(r.left+S,r.top+_,h,f,lt.BOTTOM_RIGHT):new pe(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=v>0||y>0?_t(r.left,r.top+U,v,y,lt.BOTTOM_LEFT):new pe(r.left,r.top+r.height),this.topLeftPaddingBox=A>0||i>0?_t(r.left+I,r.top+N,Math.max(0,A-I),Math.max(0,i-N),lt.TOP_LEFT):new pe(r.left+I,r.top+N),this.topRightPaddingBox=a>0||c>0?_t(r.left+Math.min(w,r.width-B),r.top+N,w>r.width+B?0:Math.max(0,a-B),Math.max(0,c-N),lt.TOP_RIGHT):new pe(r.left+r.width-B,r.top+N),this.bottomRightPaddingBox=h>0||f>0?_t(r.left+Math.min(S,r.width-I),r.top+Math.min(_,r.height-x),Math.max(0,h-B),Math.max(0,f-x),lt.BOTTOM_RIGHT):new pe(r.left+r.width-B,r.top+r.height-x),this.bottomLeftPaddingBox=v>0||y>0?_t(r.left+I,r.top+Math.min(U,r.height-x),Math.max(0,v-I),Math.max(0,y-x),lt.BOTTOM_LEFT):new pe(r.left+I,r.top+r.height-x),this.topLeftContentBox=A>0||i>0?_t(r.left+I+b,r.top+N+F,Math.max(0,A-(I+b)),Math.max(0,i-(N+F)),lt.TOP_LEFT):new pe(r.left+I+b,r.top+N+F),this.topRightContentBox=a>0||c>0?_t(r.left+Math.min(w,r.width+I+b),r.top+N+F,w>r.width+I+b?0:a-I+b,c-(N+F),lt.TOP_RIGHT):new pe(r.left+r.width-(B+R),r.top+N+F),this.bottomRightContentBox=h>0||f>0?_t(r.left+Math.min(S,r.width-(I+b)),r.top+Math.min(_,r.height+N+F),Math.max(0,h-(B+R)),f-(x+L),lt.BOTTOM_RIGHT):new pe(r.left+r.width-(B+R),r.top+r.height-(x+L)),this.bottomLeftContentBox=v>0||y>0?_t(r.left+I+b,r.top+U,Math.max(0,v-(I+b)),y-(x+L),lt.BOTTOM_LEFT):new pe(r.left+I+b,r.top+r.height-(x+L))}return t}(),lt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(lt||(lt={}));var _t=function(t,e,n,r,s){var A=4*((Math.sqrt(2)-1)/3),i=n*A,o=r*A,a=t+n,c=e+r;switch(s){case lt.TOP_LEFT:return new Kd(new pe(t,c),new pe(t,c-o),new pe(a-i,e),new pe(a,e));case lt.TOP_RIGHT:return new Kd(new pe(t,e),new pe(t+i,e),new pe(a,c-o),new pe(a,c));case lt.BOTTOM_RIGHT:return new Kd(new pe(a,e),new pe(a,e+o),new pe(t+i,c),new pe(t,c));case lt.BOTTOM_LEFT:default:return new Kd(new pe(a,c),new pe(a-i,c),new pe(t,e+o),new pe(t,e))}},_f=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},G8=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},If=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},z8=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),Gd=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),W8=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),$8=function(t){return t.type===0},mQ=function(t){return t.type===1},q8=function(t){return t.type===2},KI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},J8=function(t,e,n,r,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,n);case 1:return A.add(e+r,n);case 2:return A.add(e+r,n+s);case 3:return A.add(e,n+s)}return A})},wQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),vQ=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new K8(this.container),this.container.styles.opacity<1&&this.effects.push(new W8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new z8(r,s,A))}if(this.container.styles.overflowX!==0){var i=_f(this.curves),o=If(this.curves);KI(i,o)?this.effects.push(new Gd(i,6)):(this.effects.push(new Gd(i,2)),this.effects.push(new Gd(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var A=r.effects.filter(function(a){return!mQ(a)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,A),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=_f(r.curves),o=If(r.curves);KI(i,o)||s.unshift(new Gd(o,6))}}else s.unshift.apply(s,A);r=r.parent}return s.filter(function(a){return sn(a.target,e)})},t}(),fw=function(t,e,n,r){t.container.elements.forEach(function(s){var A=sn(s.flags,4),i=sn(s.flags,2),o=new vQ(s,t);sn(s.styles.display,2048)&&r.push(o);var a=sn(s.flags,8)?[]:r;if(A||i){var c=A||s.styles.isPositioned()?n:e,d=new wQ(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(v,y){return h>v.element.container.styles.zIndex.order?(f=y,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(v,y){return h>=v.element.container.styles.zIndex.order?(m=y+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);fw(o,d,A?d:n,a)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),fw(o,e,n,a);sn(s.flags,8)&&yQ(s,a)})},yQ=function(t,e){for(var n=t instanceof lw?t.start:1,r=t instanceof lw?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof rQ&&typeof A.container.value=="number"&&A.container.value!==0&&(n=A.container.value),A.listValue=uu(n,A.container.styles.listStyleType,!0),n+=r?-1:1}},X8=function(t){var e=new vQ(t,null),n=new wQ(e),r=[];return fw(e,n,n,r),yQ(e.container,r),n},GI=function(t,e){switch(e){case 0:return Nr(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Nr(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Nr(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Nr(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Y8=function(t,e){switch(e){case 0:return Nr(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Nr(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Nr(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Nr(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Z8=function(t,e){switch(e){case 0:return Nr(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Nr(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Nr(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Nr(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},e9=function(t,e){switch(e){case 0:return zd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return zd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return zd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return zd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},zd=function(t,e){var n=[];return Sr(t)?n.push(t.subdivide(.5,!1)):n.push(t),Sr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Nr=function(t,e,n,r){var s=[];return Sr(t)?s.push(t.subdivide(.5,!1)):s.push(t),Sr(n)?s.push(n.subdivide(.5,!0)):s.push(n),Sr(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Sr(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},BQ=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Ef=function(t){var e=t.styles,n=t.bounds,r=pt(e.paddingLeft,n.width),s=pt(e.paddingRight,n.width),A=pt(e.paddingTop,n.width),i=pt(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},t9=function(t,e){return t===0?e.bounds:t===2?Ef(e):BQ(e)},n9=function(t,e){return t===0?e.bounds:t===2?Ef(e):BQ(e)},um=function(t,e,n){var r=t9(Vo(t.styles.backgroundOrigin,e),t),s=n9(Vo(t.styles.backgroundClip,e),t),A=r9(Vo(t.styles.backgroundSize,e),n,r),i=A[0],o=A[1],a=$l(Vo(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=s9(Vo(t.styles.backgroundRepeat,e),a,A,r,s),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,d,h,i,o]},Ro=function(t){return ht(t)&&t.value===fa.AUTO},Wd=function(t){return typeof t=="number"},r9=function(t,e,n){var r=e[0],s=e[1],A=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Zt(i)&&o&&Zt(o))return[pt(i,n.width),pt(o,n.height)];var a=Wd(A);if(ht(i)&&(i.value===fa.CONTAIN||i.value===fa.COVER)){if(Wd(A)){var c=n.width/n.height;return c<A!=(i.value===fa.COVER)?[n.width,n.width/A]:[n.height*A,n.height]}return[n.width,n.height]}var d=Wd(r),h=Wd(s),f=d||h;if(Ro(i)&&(!o||Ro(o))){if(d&&h)return[r,s];if(!a&&!f)return[n.width,n.height];if(f&&a){var m=d?r:s*A,v=h?s:r/A;return[m,v]}var y=d?r:n.width,T=h?s:n.height;return[y,T]}if(a){var C=0,w=0;return Zt(i)?C=pt(i,n.width):Zt(o)&&(w=pt(o,n.height)),Ro(i)?C=w*A:(!o||Ro(o))&&(w=C/A),[C,w]}var _=null,S=null;if(Zt(i)?_=pt(i,n.width):o&&Zt(o)&&(S=pt(o,n.height)),_!==null&&(!o||Ro(o))&&(S=d&&h?_/r*s:n.height),S!==null&&Ro(i)&&(_=d&&h?S/s*r:n.width),_!==null&&S!==null)return[_,S];throw new Error("Unable to calculate background-size for element")},Vo=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},s9=function(t,e,n,r,s){var A=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new pe(Math.round(r.left),Math.round(r.top+i)),new pe(Math.round(r.left+r.width),Math.round(r.top+i)),new pe(Math.round(r.left+r.width),Math.round(a+r.top+i)),new pe(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new pe(Math.round(r.left+A),Math.round(r.top)),new pe(Math.round(r.left+A+o),Math.round(r.top)),new pe(Math.round(r.left+A+o),Math.round(r.height+r.top)),new pe(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new pe(Math.round(r.left+A),Math.round(r.top+i)),new pe(Math.round(r.left+A+o),Math.round(r.top+i)),new pe(Math.round(r.left+A+o),Math.round(r.top+i+a)),new pe(Math.round(r.left+A),Math.round(r.top+i+a))];default:return[new pe(Math.round(s.left),Math.round(s.top)),new pe(Math.round(s.left+s.width),Math.round(s.top)),new pe(Math.round(s.left+s.width),Math.round(s.height+s.top)),new pe(Math.round(s.left),Math.round(s.height+s.top))]}},A9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",zI="Hidden Text",i9=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=A9,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=n,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(zI)),r.appendChild(A),r.appendChild(s);var o=s.offsetTop-A.offsetTop+2;r.removeChild(A),r.appendChild(this._document.createTextNode(zI)),r.style.lineHeight="normal",s.style.verticalAlign="super";var a=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),xQ=function(){function t(e,n){this.context=e,this.options=n}return t}(),o9=1e4,a9=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new i9(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),q8(n)&&(this.ctx.globalAlpha=n.opacity),$8(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),mQ(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Mn(this,void 0,void 0,function(){var r;return Qn(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Mn(this,void 0,void 0,function(){return Qn(this,function(r){switch(r.label){case 0:if(sn(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var A=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=$y(n.text);i.reduce(function(o,a){return A.ctx.fillText(a,o,n.bounds.top+s),o+A.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=h9(n.fontFamily).join(", "),A=Ou(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(n,r){return Mn(this,void 0,void 0,function(){var s,A,i,o,a,c,d,h,f=this;return Qn(this,function(m){return s=this.createFontStyle(r),A=s[0],i=s[1],o=s[2],this.ctx.font=A,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(v){h.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=un(r.color),f.renderTextWithLetterSpacing(v,r.letterSpacing,c);var T=r.textShadow;T.length&&v.text.trim().length&&(T.slice(0).reverse().forEach(function(C){f.ctx.shadowColor=un(C.color),f.ctx.shadowOffsetX=C.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=C.offsetY.number*f.options.scale,f.ctx.shadowBlur=C.blur.number,f.renderTextWithLetterSpacing(v,r.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=un(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(C){switch(C){case 1:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:f.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+d),v.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&v.text.trim().length&&(f.ctx.strokeStyle=un(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var A=Ef(n),i=If(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Mn(this,void 0,void 0,function(){var r,s,A,i,o,a,w,w,c,d,h,f,S,m,v,U,y,T,C,w,_,S,U;return Qn(this,function(N){switch(N.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,A=r.styles,i=0,o=r.textNodes,N.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof eQ))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return w=N.sent(),this.renderReplacedElement(r,s,w),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof tQ&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof nQ))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return w=N.sent(),this.renderReplacedElement(r,s,w),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof iQ&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=N.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof qy&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===yf?r.checked&&(this.ctx.save(),this.path([new pe(r.bounds.left+h*.39363,r.bounds.top+h*.79),new pe(r.bounds.left+h*.16,r.bounds.top+h*.5549),new pe(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new pe(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new pe(r.bounds.left+h*.72983,r.bounds.top+h*.23),new pe(r.bounds.left+h*.84,r.bounds.top+h*.34085),new pe(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=un(kI),this.ctx.fill(),this.ctx.restore()):r.type===Bf&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=un(kI),this.ctx.fill(),this.ctx.restore())),l9(r)&&r.value.length){switch(f=this.createFontStyle(A),S=f[0],m=f[1],v=this.fontMetrics.getMetrics(S,m).baseline,this.ctx.font=S,this.ctx.fillStyle=un(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=u9(r.styles.textAlign),U=Ef(r),y=0,r.styles.textAlign){case 1:y+=U.width/2;break;case 2:y+=U.width;break}T=U.add(y,0,0,-U.height/2+1),this.ctx.save(),this.path([new pe(U.left,U.top),new pe(U.left+U.width,U.top),new pe(U.left+U.width,U.top+U.height),new pe(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new vc(r.value,T),A.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!sn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(C=r.styles.listStyleImage,C.type!==0)return[3,18];w=void 0,_=C.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=N.sent(),this.ctx.drawImage(w,r.bounds.left-(w.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(S=this.createFontStyle(A)[0],this.ctx.font=S,this.ctx.fillStyle=un(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new $s(r.bounds.left,r.bounds.top+pt(r.styles.paddingTop,r.bounds.width),r.bounds.width,pI(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new vc(n.listValue,U),A.letterSpacing,pI(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Mn(this,void 0,void 0,function(){var r,s,C,A,i,C,o,a,C,c,d,C,h,f,C,m,v,C,y,T,C;return Qn(this,function(w){switch(w.label){case 0:if(sn(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:w.sent(),r=0,s=n.negativeZIndex,w.label=2;case 2:return r<s.length?(C=s[r],[4,this.renderStack(C)]):[3,5];case 3:w.sent(),w.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:w.sent(),A=0,i=n.nonInlineLevel,w.label=7;case 7:return A<i.length?(C=i[A],[4,this.renderNode(C)]):[3,10];case 8:w.sent(),w.label=9;case 9:return A++,[3,7];case 10:o=0,a=n.nonPositionedFloats,w.label=11;case 11:return o<a.length?(C=a[o],[4,this.renderStack(C)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(C=d[c],[4,this.renderStack(C)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,f=n.inlineLevel,w.label=19;case 19:return h<f.length?(C=f[h],[4,this.renderNode(C)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:m=0,v=n.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<v.length?(C=v[m],[4,this.renderStack(C)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:y=0,T=n.positiveZIndex,w.label=27;case 27:return y<T.length?(C=T[y],[4,this.renderStack(C)]):[3,30];case 28:w.sent(),w.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,A){var i=Sr(s)?s.start:s;A===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Sr(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,A){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(n,r,s){var A;if(n.width===r&&n.height===s)return n;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return Mn(this,void 0,void 0,function(){var r,s,A,i,o,a;return Qn(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var h,f,m,F,$e,Se,b,Qe,x,v,F,$e,Se,b,Qe,y,T,C,w,_,S,U,N,B,x,I,F,R,L,b,Qe,Re,$e,Se,re,Q,V,W,se,K,$,ie;return Qn(this,function(de){switch(de.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,de.label=1;case 1:return de.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=de.sent(),[3,4];case 3:return de.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=um(n,r,[h.width,h.height,h.width/h.height]),F=m[0],$e=m[1],Se=m[2],b=m[3],Qe=m[4],x=A.ctx.createPattern(A.resizeImage(h,b,Qe),"repeat"),A.renderRepeat(F,x,$e,Se)),[3,6];case 5:$5(d)?(v=um(n,r,[null,null,null]),F=v[0],$e=v[1],Se=v[2],b=v[3],Qe=v[4],y=j5(d.angle,b,Qe),T=y[0],C=y[1],w=y[2],_=y[3],S=y[4],U=document.createElement("canvas"),U.width=b,U.height=Qe,N=U.getContext("2d"),B=N.createLinearGradient(C,_,w,S),fI(d.stops,T).forEach(function(z){return B.addColorStop(z.stop,un(z.color))}),N.fillStyle=B,N.fillRect(0,0,b,Qe),b>0&&Qe>0&&(x=A.ctx.createPattern(U,"repeat"),A.renderRepeat(F,x,$e,Se))):q5(d)&&(I=um(n,r,[null,null,null]),F=I[0],R=I[1],L=I[2],b=I[3],Qe=I[4],Re=d.position.length===0?[Gy]:d.position,$e=pt(Re[0],b),Se=pt(Re[Re.length-1],Qe),re=K5(d,$e,Se,b,Qe),Q=re[0],V=re[1],Q>0&&V>0&&(W=A.ctx.createRadialGradient(R+$e,L+Se,0,R+$e,L+Se,Q),fI(d.stops,Q*2).forEach(function(z){return W.addColorStop(z.stop,un(z.color))}),A.path(F),A.ctx.fillStyle=W,Q!==V?(se=n.bounds.left+.5*n.bounds.width,K=n.bounds.top+.5*n.bounds.height,$=V/Q,ie=1/$,A.ctx.save(),A.ctx.translate(se,K),A.ctx.transform(1,0,0,$,0,0),A.ctx.translate(-se,-K),A.ctx.fillRect(R,ie*(L-K)+K,b,Qe*ie),A.ctx.restore()):A.ctx.fill())),de.label=6;case 6:return r--,[2]}})},A=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,s(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Mn(this,void 0,void 0,function(){return Qn(this,function(A){return this.path(GI(s,r)),this.ctx.fillStyle=un(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,A){return Mn(this,void 0,void 0,function(){var i,o;return Qn(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,A)]:[3,2];case 1:return a.sent(),[2];case 2:return i=Y8(A,s),this.path(i),this.ctx.fillStyle=un(n),this.ctx.fill(),o=Z8(A,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Mn(this,void 0,void 0,function(){var r,s,A,i,o,a,c,d,h=this;return Qn(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!HA(r.backgroundColor)||r.backgroundImage.length,A=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=c9(Vo(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),HA(r.backgroundColor)||(this.ctx.fillStyle=un(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var v=_f(n.curves),y=m.inset?0:o9,T=J8(v,-y+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(v),h.ctx.clip(),h.mask(T)):(h.mask(v),h.ctx.clip(),h.path(T)),h.ctx.shadowOffsetX=m.offsetX.number+y,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=un(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?un(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,c=A,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!HA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,A,i){return Mn(this,void 0,void 0,function(){var o,a,c,d,h,f,m,v,y,T,C,w,_,S,U,N,U,N;return Qn(this,function(B){return this.ctx.save(),o=e9(A,s),a=GI(A,s),i===2&&(this.path(a),this.ctx.clip()),Sr(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),Sr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),s===0||s===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),v=r<3?r*3:r*2,y=r<3?r*2:r,i===3&&(v=r,y=r),T=!0,m<=v*2?T=!1:m<=v*2+y?(C=m/(2*v+y),v*=C,y*=C):(w=Math.floor((m+y)/(v+y)),_=(m-w*v)/(w-1),S=(m-(w+1)*v)/w,y=S<=0||Math.abs(y-_)<Math.abs(y-S)?_:S),T&&(i===3?this.ctx.setLineDash([0,v+y]):this.ctx.setLineDash([v,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=un(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Sr(a[0])&&(U=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new pe(U.end.x,U.end.y),new pe(N.start.x,N.start.y)]),this.ctx.stroke()),Sr(a[1])&&(U=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new pe(U.end.x,U.end.y),new pe(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Mn(this,void 0,void 0,function(){var r;return Qn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=un(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=X8(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(xQ),l9=function(t){return t instanceof AQ||t instanceof sQ?!0:t instanceof qy&&t.type!==Bf&&t.type!==yf},c9=function(t,e){switch(t){case 0:return _f(e);case 2:return G8(e);case 1:default:return If(e)}},u9=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},d9=["-apple-system","system-ui"],h9=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return d9.indexOf(e)===-1}):t},f9=function(t){Zr(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Mn(this,void 0,void 0,function(){var r,s;return Qn(this,function(A){switch(A.label){case 0:return r=aw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,g9(r)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=un(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(xQ),g9=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},p9=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Id([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Id([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Id([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Id([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),m9=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new p9({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new D8(this,e)}return t.instanceCount=1,t}(),w9=function(t,e){return e===void 0&&(e={}),v9(t,e)};typeof window<"u"&&pQ.setContext(window);var v9=function(t,e){return Mn(void 0,void 0,void 0,function(){var n,r,s,A,i,o,a,c,d,h,f,m,v,y,T,C,w,_,S,U,B,N,B,x,I,F,R,L,b,Qe,Re,$e,Se,re,Q,V,W,se,K,$;return Qn(this,function(ie){switch(ie.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(x=e.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(I=e.imageTimeout)!==null&&I!==void 0?I:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},A=W0({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(b=e.windowHeight)!==null&&b!==void 0?b:r.innerHeight,scrollX:(Qe=e.scrollX)!==null&&Qe!==void 0?Qe:r.pageXOffset,scrollY:(Re=e.scrollY)!==null&&Re!==void 0?Re:r.pageYOffset},o=new $s(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new m9(A,o),c=($e=e.foreignObjectRendering)!==null&&$e!==void 0?$e:!1,d={allowTaint:(Se=e.allowTaint)!==null&&Se!==void 0?Se:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new HI(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=ie.sent(),v=Jy(f)||y8(f)?JK(f.ownerDocument):Ug(a,f),y=v.width,T=v.height,C=v.left,w=v.top,_=y9(a,f,e.backgroundColor),S={canvas:e.canvas,backgroundColor:_,scale:(Q=(re=e.scale)!==null&&re!==void 0?re:r.devicePixelRatio)!==null&&Q!==void 0?Q:1,x:((V=e.x)!==null&&V!==void 0?V:0)+C,y:((W=e.y)!==null&&W!==void 0?W:0)+w,width:(se=e.width)!==null&&se!==void 0?se:Math.ceil(y),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(T)},c?(a.logger.debug("Document cloned, using foreign object rendering"),B=new f9(a,S),[4,B.render(f)]):[3,3];case 2:return U=ie.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+C+","+w+" with size "+y+"x"+T+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=aQ(a,f),_===N.styles.backgroundColor&&(N.styles.backgroundColor=Os.TRANSPARENT),a.logger.debug("Starting renderer for element at "+S.x+","+S.y+" with size "+S.width+"x"+S.height),B=new a9(a,S),[4,B.render(N)];case 4:U=ie.sent(),ie.label=5;case 5:return(!(($=e.removeContainer)!==null&&$!==void 0)||$)&&(HI.destroy(m)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,U]}})})},y9=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?mc(t,getComputedStyle(r.documentElement).backgroundColor):Os.TRANSPARENT,A=r.body?mc(t,getComputedStyle(r.body).backgroundColor):Os.TRANSPARENT,i=typeof n=="string"?mc(t,n):n===null?Os.TRANSPARENT:4294967295;return e===r.documentElement?HA(s)?HA(A)?i:A:s:i},B9=Object.defineProperty,bf=Object.getOwnPropertySymbols,CQ=Object.prototype.hasOwnProperty,_Q=Object.prototype.propertyIsEnumerable,WI=(t,e,n)=>e in t?B9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x9=(t,e)=>{for(var n in e||(e={}))CQ.call(e,n)&&WI(t,n,e[n]);if(bf)for(var n of bf(e))_Q.call(e,n)&&WI(t,n,e[n]);return t},C9=(t,e)=>{var n={};for(var r in t)CQ.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&bf)for(var r of bf(t))e.indexOf(r)<0&&_Q.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var oo;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const T=this.getPenaltyScore();T<v&&(h=y,v=T),this.applyMask(y)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,y;for(v=d;;v++){const _=e.getNumDataCodewords(v,c)*8,S=o.getTotalBits(a,v);if(S<=_){y=S;break}if(v>=h)throw new RangeError("Data too long")}for(const _ of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&y<=e.getNumDataCodewords(v,_)*8&&(c=_);let T=[];for(const _ of a){r(_.mode.modeBits,4,T),r(_.numChars,_.mode.numCharCountBits(v),T);for(const S of _.getData())T.push(S)}A(T.length==y);const C=e.getNumDataCodewords(v,c)*8;A(T.length<=C),r(0,Math.min(4,C-T.length),T),r(0,(8-T.length%8)%8,T),A(T.length%8==0);for(let _=236;T.length<C;_^=253)r(_,8,T);let w=[];for(;w.length*8<T.length;)w.push(0);return T.forEach((_,S)=>w[S>>>3]|=_<<7-(S&7)),new e(v,c,w,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=a+h,v=c+d;0<=m&&m<this.size&&0<=v&&v<this.size&&this.setFunctionModule(m,v,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),v=h-m%h,y=Math.floor(m/h);let T=[];const C=e.reedSolomonComputeDivisor(f);for(let _=0,S=0;_<h;_++){let U=a.slice(S,S+y-f+(_<v?0:1));S+=U.length;const N=e.reedSolomonComputeRemainder(U,C);_<v&&U.push(0),T.push(U.concat(N))}let w=[];for(let _=0;_<T[0].length;_++)T.forEach((S,U)=>{(_!=y-f||U>=v)&&w.push(S[_])});return A(w.length==m),w}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,y=(d+1&2)==0?this.size-1-h:h;!this.isFunction[y][m]&&c<a.length*8&&(this.modules[y][m]=s(a[c>>>3],7-(c&7)),c++)}}A(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let m=!1,v=0,y=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[f][T]==m?(v++,v==5?a+=e.PENALTY_N1:v>5&&a++):(this.finderPenaltyAddHistory(v,y),m||(a+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[f][T],v=1);a+=this.finderPenaltyTerminateAndCount(m,v,y)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,v=0,y=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][f]==m?(v++,v==5?a+=e.PENALTY_N1:v>5&&a++):(this.finderPenaltyAddHistory(v,y),m||(a+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[T][f],v=1);a+=this.finderPenaltyTerminateAndCount(m,v,y)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const v=this.modules[f][m];v==this.modules[f][m+1]&&v==this.modules[f+1][m]&&v==this.modules[f+1][m+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,v)=>m+(v?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),a+=h*e.PENALTY_N4,A(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((m,v)=>d[v]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return A(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];A(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function s(a,c){return(a>>>c&1)!=0}function A(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)r(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,c)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,c);else if(a<16384)r(2,2,c),r(a,14,c);else if(a<1e6)r(6,3,c),r(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(oo||(oo={}));(t=>{(e=>{const n=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(oo||(oo={}));(t=>{(e=>{const n=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(oo||(oo={}));var Xl=oo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var _9={L:Xl.QrCode.Ecc.LOW,M:Xl.QrCode.Ecc.MEDIUM,Q:Xl.QrCode.Ecc.QUARTILE,H:Xl.QrCode.Ecc.HIGH},I9=128,E9="L",b9="#FFFFFF",T9="#000000",F9=!1,IQ=4,U9=.1;function S9(t,e=0){const n=[];return t.forEach(function(r,s){let A=null;r.forEach(function(i,o){if(!i&&A!==null){n.push(`M${A+e} ${s+e}h${o-A}v1H${A+e}z`),A=null;return}if(o===r.length-1){if(!i)return;A===null?n.push(`M${o+e},${s+e} h1v1H${o+e}z`):n.push(`M${A+e},${s+e} h${o+1-A}v1H${A+e}z`);return}i&&A===null&&(A=o)})}),n.join("")}function Q9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function k9(t,e,n,r){if(r==null)return null;const s=n?IQ:0,A=t.length+s*2,i=Math.floor(e*U9),o=A/e,a=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let m=Math.floor(d),v=Math.floor(h),y=Math.ceil(a+d-m),T=Math.ceil(c+h-v);f={x:m,y:v,w:y,h:T}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function R9(t){const e=t,{value:n,size:r=I9,level:s=E9,bgColor:A=b9,fgColor:i=T9,includeMargin:o=F9,imageSettings:a}=e,c=C9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Xl.QrCode.encodeText(n,_9[s]).getModules();const h=o?IQ:0,f=d.length+h*2,m=k9(d,r,o,a);let v=null;a!=null&&m!=null&&(m.excavation!=null&&(d=Q9(d,m.excavation)),v=Fi.createElement("image",{xlinkHref:a.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const y=S9(d,h);return Fi.createElement("svg",x9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),Fi.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Fi.createElement("path",{fill:i,d:y,shapeRendering:"crispEdges"}),v)}const N9=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,saveStaticData:i}=rA(),{schedule1:o,schedule2:a,substitutions:c,saveScheduleData:d}=sl(),h=k.useRef(null),f=k.useRef(null),[m,v]=k.useState(new Date().toISOString().split("T")[0]),[y,T]=k.useState(()=>{const K=new Date().getMonth();return K>=0&&K<=4?2:1}),[C,w]=k.useState(!1),[_,S]=k.useState(!1),[U,N]=k.useState(""),[B,x]=k.useState(""),I=k.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,schedule:o,schedule2ndHalf:a,substitutions:c}),[t,e,n,r,s,A,o,a,c]),F=()=>y===2?a:o,R=K=>{const $=new Date(K).getMonth();return $>=0&&$<=4?a:o},L=K=>{var de;const $=(de=K.target.files)==null?void 0:de[0];if(!$)return;const ie=new FileReader;ie.onload=async z=>{try{const Be=JSON.parse(z.target.result);if(Be.teachers&&(Be.schedule||Be.schedule2ndHalf)){if(window.confirm("    . ?")){const Ve={...Yt,...Be,rooms:Be.rooms||Yt.rooms,classes:Be.classes||[],schedule:Be.schedule||[],schedule2ndHalf:Be.schedule2ndHalf||[],teachers:Be.teachers||[],subjects:Be.subjects||[],substitutions:Be.substitutions||[],settings:{...Yt.settings,...Be.settings}};await i(Ve),await d(Ve),alert("  !")}}else alert("  .")}catch{alert("  .")}},ie.readAsText($)},b=()=>{const K=F();let $=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;kn.forEach(Be=>{$+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${Be}</td></tr>`,[ce.First,ce.Second].forEach(Ve=>{const he=n.filter(Y=>Y.shift===Ve);he.length!==0&&($+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${Ve}</td></tr>`,$+='<tr><th class="header"></th>',ls[Ve].forEach(Y=>$+=`<th class="header">${Y} </th>`),$+="</tr>",he.forEach(Y=>{$+=`<tr><td class="class-cell">${Y.name}</td>`,ls[Ve].forEach(Ce=>{const we=K.filter(fe=>fe.classId===Y.id&&fe.day===Be&&fe.shift===Ve&&fe.period===Ce);$+='<td style="height: 60px;">',we.forEach(fe=>{const De=t.find(Me=>Me.id===fe.subjectId),Oe=e.find(Me=>Me.id===fe.teacherId),qe=r.find(Me=>Me.id===fe.roomId),ze=qe?qe.name:fe.roomId;$+=`<div style="background-color: ${(De==null?void 0:De.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(De==null?void 0:De.name)||""} ${fe.direction||""}</div>
                                <div class="meta">${(Oe==null?void 0:Oe.name)||""} ${ze?`(. ${ze})`:""}</div>
                            </div>`}),$+="</td>"}),$+="</tr>"}))})}),$+="</table></body></html>";const ie=new Blob([$],{type:"application/vnd.ms-excel"}),de=URL.createObjectURL(ie),z=document.createElement("a");z.href=de,z.download=`_22_${y}.xls`,document.body.appendChild(z),z.click(),document.body.removeChild(z)},Qe=()=>{const K=F();let $=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 9px; vertical-align: sub; }
            </style></head><body>
        `;[ce.First,ce.Second].forEach(Be=>{const Ve=ls[Be];$+="<table>",$+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${kn.length*Ve.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,$+="<tr>",kn.forEach(he=>{$+=`<th colspan="${Ve.length}" class="header" style="border: 2px solid #000;">${he}</th>`}),$+="</tr>",$+="<tr>",kn.forEach(()=>{Ve.forEach(he=>$+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),$+="</tr>",$+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${Be}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,kn.forEach(()=>{Ve.forEach(he=>$+=`<th class="header" style="width: 40px;">${he}</th>`)}),$+="</tr>",t.forEach(he=>{const Y=e.filter(we=>we.subjectIds.includes(he.id));if(Y.length===0)return;const Ce=he.color||"#ffffff";Y.forEach((we,fe)=>{$+="<tr>",fe===0&&($+=`<td rowspan="${Y.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${Ce};">${he.name}</td>`),$+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${we.name}</td>`,kn.forEach(De=>{Ve.forEach(Oe=>{const qe=K.find(ze=>ze.teacherId===we.id&&ze.subjectId===he.id&&ze.day===De&&ze.period===Oe&&ze.shift===Be);if(qe){const ze=n.find(ln=>ln.id===qe.classId),Me=r.find(ln=>ln.id===qe.roomId),at=Me?Me.name:qe.roomId,ct=at?`<sub>${at}</sub>`:"",Ge=qe.direction?` <span style="font-size:9px">(${qe.direction})</span>`:"",st=he.color||"#ffffff";$+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${st};">${ze?ze.name:""}${Ge}${ct}</td>`}else $+='<td style="border: 1px solid #000;"></td>'})}),$+="</tr>"}),$+=`<tr><td colspan="${2+kn.length*Ve.length}" style="height: 2px; background-color: #000;"></td></tr>`}),$+="</table><br/><br/>"}),$+="</body></html>";const ie=new Blob([$],{type:"application/vnd.ms-excel"}),de=URL.createObjectURL(ie),z=document.createElement("a");z.href=de,z.download=`__${y}.xls`,document.body.appendChild(z),z.click(),document.body.removeChild(z)},Re=()=>{const K=new Date(m),$=K.getMonth(),ie=K.getFullYear(),de=c.filter(Y=>{const Ce=new Date(Y.date);return Ce.getMonth()===$&&Ce.getFullYear()===ie}).sort((Y,Ce)=>new Date(Y.date).getTime()-new Date(Ce.date).getTime());if(de.length===0){alert("      .");return}let z=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${K.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
        `;de.forEach(Y=>{var Xn;const Ce=o.find(We=>We.id===Y.scheduleItemId)||a.find(We=>We.id===Y.scheduleItemId);if(!Ce)return;const we=new Date(Y.date).toLocaleDateString("ru-RU"),fe=n.find(We=>We.id===Ce.classId),De=t.find(We=>We.id===Ce.subjectId),Oe=e.find(We=>We.id===Y.originalTeacherId);let qe="";if(Y.replacementTeacherId==="conducted")qe=" ";else if(Y.replacementTeacherId==="cancelled")qe=" ";else{const We=e.find(D=>D.id===Y.replacementTeacherId);qe=We?We.name:"",Y.isMerger&&(qe+=" ()")}const ze=Ce.roomId,Me=Y.replacementRoomId,at=Me||ze,ct=r.find(We=>We.id===at),Ge=ct?ct.name:at||"-",st=Me?`${Ge} ( .)`:Ge;let ln=Y.lessonAbsenceReason||((Xn=Oe==null?void 0:Oe.absenceReasons)==null?void 0:Xn[Y.date])||"";Y.replacementTeacherId===Y.originalTeacherId&&Me&&(ln=" "),z+=`
                <tr>
                    <td>${we}</td>
                    <td>${Ce.period}</td>
                    <td>${Ce.shift}</td>
                    <td>${(fe==null?void 0:fe.name)||"?"}</td>
                    <td>${(De==null?void 0:De.name)||"?"}</td>
                    <td>${(Oe==null?void 0:Oe.name)||"?"}</td>
                    <td>${qe}</td>
                    <td>${st}</td>
                    <td>${ln}</td>
                </tr>
            `}),z+="</tbody></table></body></html>";const Be=new Blob([z],{type:"application/vnd.ms-excel"}),Ve=URL.createObjectURL(Be),he=document.createElement("a");he.href=Ve,he.download=`__${K.getMonth()+1}_${K.getFullYear()}.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},$e=()=>{const K=new Date(m),$=K.getMonth(),ie=K.getFullYear(),de=c.filter(Y=>{const Ce=new Date(Y.date),we=Ce.getMonth()===$&&Ce.getFullYear()===ie,fe=Y.refusals&&Y.refusals.length>0;return we&&fe}).sort((Y,Ce)=>new Date(Y.date).getTime()-new Date(Ce.date).getTime());if(de.length===0){alert("      .");return}let z=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${K.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;de.forEach(Y=>{const Ce=o.find(Me=>Me.id===Y.scheduleItemId)||a.find(Me=>Me.id===Y.scheduleItemId);if(!Ce)return;const we=new Date(Y.date).toLocaleDateString("ru-RU"),fe=n.find(Me=>Me.id===Ce.classId),De=t.find(Me=>Me.id===Ce.subjectId),Oe=e.find(Me=>Me.id===Y.originalTeacherId);let qe="";if(Y.replacementTeacherId==="conducted")qe=" ";else if(Y.replacementTeacherId==="cancelled")qe=" ";else{const Me=e.find(at=>at.id===Y.replacementTeacherId);qe=Me?Me.name:""}const ze=(Y.refusals||[]).map(Me=>{const at=e.find(ct=>ct.id===Me);return at?at.name:""}).join(", ");z+=`
                <tr>
                    <td>${we}</td>
                    <td>${Ce.period}</td>
                    <td>${Ce.shift}</td>
                    <td>${(fe==null?void 0:fe.name)||"?"}</td>
                    <td>${(De==null?void 0:De.name)||"?"}</td>
                    <td>${(Oe==null?void 0:Oe.name)||"?"}</td>
                    <td>${qe}</td>
                    <td>${ze}</td>
                </tr>
            `}),z+="</tbody></table></body></html>";const Be=new Blob([z],{type:"application/vnd.ms-excel"}),Ve=URL.createObjectURL(Be),he=document.createElement("a");he.href=Ve,he.download=`__${K.getMonth()+1}_${K.getFullYear()}.xls`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},Se=()=>{const K=F();let $=`							
`;kn.forEach(ie=>{[ce.First,ce.Second].forEach(de=>{n.filter(Be=>Be.shift===de).forEach(Be=>{ls[de].forEach(Ve=>{K.filter(Y=>Y.classId===Be.id&&Y.day===ie&&Y.shift===de&&Y.period===Ve).forEach(Y=>{const Ce=t.find(Oe=>Oe.id===Y.subjectId),we=e.find(Oe=>Oe.id===Y.teacherId),fe=r.find(Oe=>Oe.id===Y.roomId),De=fe?fe.name:Y.roomId||"";$+=`${ie}	${de}	${Be.name}	${Ve}	${(Ce==null?void 0:Ce.name)||""}	${(we==null?void 0:we.name)||""}	${De}	${Y.direction||""}
`})})})})}),navigator.clipboard.writeText($).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},re=async()=>{if(f.current){w(!0);try{const K=await w9(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),$=document.createElement("a");$.download=`_${m}.png`,$.href=K.toDataURL("image/png"),$.click()}catch(K){console.error(K),alert("   ")}w(!1)}},Q=k.useMemo(()=>c.filter(K=>K.date===m),[c,m]),V=K=>{const $=R(m),ie=Q.filter(de=>{const z=$.find(Be=>Be.id===de.scheduleItemId);return z&&z.shift===K}).filter(de=>de.replacementTeacherId!=="conducted");return ie.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:K}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:ie.map(de=>{var Ge;const z=$.find(st=>st.id===de.scheduleItemId);if(!z)return null;const Be=n.find(st=>st.id===z.classId),Ve=t.find(st=>st.id===z.subjectId),he=e.find(st=>st.id===de.originalTeacherId),Y=de.replacementRoomId,Ce=z.roomId?r.find(st=>st.id===z.roomId):null,we=Ce?Ce.name:z.roomId||"",fe=Y?r.find(st=>st.id===Y):null,De=fe?fe.name:Y||"",Oe=de.replacementTeacherId==="cancelled",qe=Oe?{name:" "}:e.find(st=>st.id===de.replacementTeacherId),ze=(Ge=he==null?void 0:he.absenceReasons)==null?void 0:Ge[m],Me=de.lessonAbsenceReason,at=Me===" "?Me:ze===" "?ze:"",ct=de.replacementTeacherId===de.originalTeacherId&&Y;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:z.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:Be==null?void 0:Be.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Ve==null?void 0:Ve.name}),z.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:z.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!ct&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[he==null?void 0:he.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),at&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:at})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${Oe?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:ct?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:he==null?void 0:he.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:qe==null?void 0:qe.name}),de.isMerger&&l.jsx("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:""})]})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Y?"text-indigo-600":"text-slate-700"}`,children:Y&&Y!==z.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:we}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:De})]}):l.jsx("span",{className:"text-xl",children:we})})]},de.id)})})]})]})},W=async()=>{const K=Math.random().toString(36).substr(2,9);await EA.setPublicData(K,I),await i({settings:{...s,publicScheduleId:K}});const $=`${window.location.origin}${window.location.pathname}#/public?id=${K}`;N($),x(K),S(!0)},se=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await EA.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),N(""),x(""))};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>EA.exportJson(I),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:L,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var K;return(K=h.current)==null?void 0:K.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(q,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(q,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:m,onChange:K=>v(K.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:re,disabled:C,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:C?l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Download",size:20}),"  PNG"]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-center",children:l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(m).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),Q.length===0?l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}):l.jsxs(l.Fragment,{children:[V(ce.First),V(ce.Second)]}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:y,onChange:K=>T(Number(K.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:b,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:Qe,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Se,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:Re,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:$e,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(q,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:se,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:W,disabled:C,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(q,{name:"Share2",size:20}),"  "]})]}),l.jsx(Ls,{isOpen:_,onClose:()=>S(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),U&&l.jsxs(l.Fragment,{children:[l.jsx(R9,{value:U,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:U}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(U),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Copy",size:16}),"  "]})]})]})})]})},P9=()=>{var C;const{subjects:t,teachers:e,classes:n}=rA(),{schedule1:r,schedule2:s,substitutions:A}=sl(),[i,o]=k.useState("load"),[a,c]=k.useState(((C=n[0])==null?void 0:C.id)||""),[d,h]=k.useState(()=>{const w=new Date().getMonth();return w>=0&&w<=4?2:1}),f=k.useMemo(()=>d===2?s:r,[d,r,s]),m=k.useMemo(()=>e.map(_=>{const S=f.filter(R=>R.teacherId===_.id),U=S.length,N=U*4,B=A.filter(R=>R.replacementTeacherId===_.id).length,x=A.filter(R=>R.originalTeacherId===_.id).length,I=N+B-x,F={};return S.forEach(R=>{const L=t.find(b=>b.id===R.subjectId);L&&(F[L.name]=(F[L.name]||0)+1)}),{id:_.id,name:_.name,weeklyHours:U,subsTaken:B,subsMissed:x,actualHours:I,subjectBreakdown:F}}).sort((_,S)=>S.actualHours-_.actualHours),[e,f,A,t]),v=k.useMemo(()=>a?kn.map(w=>{const S=f.filter(U=>U.classId===a&&U.day===w).reduce((U,N)=>{const B=t.find(x=>x.id===N.subjectId);return U+((B==null?void 0:B.difficulty)||5)},0);return{label:w,value:S}}):[],[f,t,a]),y=k.useMemo(()=>{const w=e.map(S=>({name:S.name,count:A.filter(U=>U.replacementTeacherId===S.id).length})).sort((S,U)=>U.count-S.count).slice(0,5),_=e.map(S=>({name:S.name,count:S.unavailableDates.length})).sort((S,U)=>U.count-S.count).slice(0,5);return{heroes:w,absentees:_}},[e,A]),T=()=>{let w="";i==="load"?w=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(U=>`"${U.name}",${U.weeklyHours},${U.subsTaken},${U.subsMissed},${U.actualHours},"${Object.entries(U.subjectBreakdown).map(([N,B])=>N+": "+B).join(", ")}"`).join(`
`):i==="sanpin"&&(w=`Day,Score
`+v.map(U=>`${U.label},${U.value}`).join(`
`));const _=new Blob([`\uFEFF${w}`],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(_),S.download=`report_${i}_${d}sem.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(q,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:w=>h(Number(w.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:T,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(q,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>o("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>o("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>o("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(w=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:w.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:w.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",w.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",w.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:w.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.subjectBreakdown).map(([_,S])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[_,": ",S]},_))})})]},w.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:a,onChange:w=>c(w.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))})]}),l.jsx(Kp,{items:v,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Kp,{items:y.heroes.map(w=>({label:w.name,value:w.count})),max:Math.max(...y.heroes.map(w=>w.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Kp,{items:y.absentees.map(w=>({label:w.name,value:w.count})),max:Math.max(...y.absentees.map(w=>w.count),1),barClassName:"bg-red-500"})]})]})]})},D9=()=>{const{setGuestRole:t,role:e,loading:n}=rl(),r=mu(),[s,A]=k.useState("select"),[i,o]=k.useState(""),[a,c]=k.useState(""),[d,h]=k.useState(""),[f,m]=k.useState(!1);k.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const v=async T=>{if(T.preventDefault(),h(""),m(!0),!nn){h("Firebase .  ."),m(!1);return}try{let C=i;s==="teacher"&&(C="teacher@gymnasium22.com"),await nn.signInWithEmailAndPassword(C,a)}catch(C){console.error("Firebase Auth Error:",C);const w=C.code;let _="   .";switch(w){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":_="   .     .";break;case"auth/invalid-email":_="  email .";break;case"auth/too-many-requests":_="   .  .";break;default:_=" .       Firebase."}h(_)}finally{m(!1)}},y=()=>{t(),r("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx(q,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"Gymnasium Manager"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:y,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  (/)"})]})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:v,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(q,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:s==="teacher"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:T=>o(T.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:a,onChange:T=>c(T.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&l.jsx(q,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},wi=({children:t,allowedRoles:e})=>{const{user:n,role:r,loading:s}=rl();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):r?e&&!e.includes(r)?l.jsx(Wh,{to:r==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Wh,{to:"/login",replace:!0})},L9=()=>{const{role:t,loading:e}=rl();return e?null:t==="guest"?l.jsx(Wh,{to:"/schedule",replace:!0}):l.jsx(Wh,{to:"/dashboard",replace:!0})},O9=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(localStorage.getItem("theme")||"light"),{isLoading:s}=rA(),{logout:A,role:i,user:o}=rl();if(k.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),s)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const c=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(d=>d.roles.includes(i||""));return l.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx(q,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0",children:c.map(d=>l.jsxs(_N,{to:d.to,onClick:()=>e(!1),className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${h?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(q,{name:d.icon,size:20}),d.label]},d.to))}),l.jsx(OK,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:o&&o.email||""}),l.jsx("button",{onClick:A,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(q,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors",children:n==="light"?l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx(q,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:l.jsx(lN,{})})]})]})},M9=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!0),[s]=bN(),A=s.get("id");return k.useEffect(()=>{A?(r(!0),EA.getPublicData(A).then(i=>{const o={...Yt,...i,settings:{...Yt.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),r(!1)})):(r(!1),e(null))},[A]),n?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(uS,{initialData:t,children:l.jsx(fS,{children:l.jsx(gS,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(q,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(vS,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(q,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function V9(){return l.jsx(PK,{children:l.jsx(uS,{children:l.jsx(fS,{children:l.jsx(gS,{children:l.jsx(yN,{children:l.jsxs(uN,{children:[l.jsx(hr,{path:"/login",element:l.jsx(D9,{})}),l.jsxs(hr,{path:"/",element:l.jsx(wi,{children:l.jsx(O9,{})}),children:[l.jsx(hr,{index:!0,element:l.jsx(L9,{})}),l.jsx(hr,{path:"dashboard",element:l.jsx(wi,{allowedRoles:["admin","teacher"],children:l.jsx(MK,{})})}),l.jsx(hr,{path:"schedule",element:l.jsx($I,{semester:1})}),l.jsx(hr,{path:"schedule2",element:l.jsx($I,{semester:2})}),l.jsx(hr,{path:"substitutions",element:l.jsx(wi,{allowedRoles:["admin"],children:l.jsx($K,{})})}),l.jsx(hr,{path:"directory",element:l.jsx(wi,{allowedRoles:["admin"],children:l.jsx(WK,{})})}),l.jsx(hr,{path:"admin",element:l.jsx(wi,{allowedRoles:["admin"],children:l.jsx(qK,{})})}),l.jsx(hr,{path:"reports",element:l.jsx(wi,{allowedRoles:["admin"],children:l.jsx(P9,{})})}),l.jsx(hr,{path:"export",element:l.jsx(wi,{allowedRoles:["admin"],children:l.jsx(N9,{})})})]}),l.jsx(hr,{path:"/public",element:l.jsx(M9,{})})]})})})})})})}const $I=({semester:t=1})=>{const{role:e}=rl();return l.jsx(vS,{readOnly:e!=="admin",semester:t})};dm.createRoot(document.getElementById("root")).render(l.jsx(Fi.StrictMode,{children:l.jsx(V9,{})}));
