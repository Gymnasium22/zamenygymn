function KS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const A in r)if(A!=="default"&&!(A in t)){const s=Object.getOwnPropertyDescriptor(r,A);s&&Object.defineProperty(t,A,s.get?s:{enumerable:!0,get:()=>r[A]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))r(A);new MutationObserver(A=>{for(const s of A)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(A){const s={};return A.integrity&&(s.integrity=A.integrity),A.referrerPolicy&&(s.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?s.credentials="include":A.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(A){if(A.ep)return;A.ep=!0;const s=n(A);fetch(A.href,s)}})();function WI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $I={exports:{}},_f={},qI={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),GS=Symbol.for("react.portal"),zS=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),$S=Symbol.for("react.profiler"),qS=Symbol.for("react.provider"),JS=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),YS=Symbol.for("react.suspense"),ZS=Symbol.for("react.memo"),ek=Symbol.for("react.lazy"),NB=Symbol.iterator;function tk(t){return t===null||typeof t!="object"?null:(t=NB&&t[NB]||t["@@iterator"],typeof t=="function"?t:null)}var JI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XI=Object.assign,YI={};function Da(t,e,n){this.props=t,this.context=e,this.refs=YI,this.updater=n||JI}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ZI(){}ZI.prototype=Da.prototype;function hw(t,e,n){this.props=t,this.context=e,this.refs=YI,this.updater=n||JI}var fw=hw.prototype=new ZI;fw.constructor=hw;XI(fw,Da.prototype);fw.isPureReactComponent=!0;var PB=Array.isArray,eE=Object.prototype.hasOwnProperty,gw={current:null},tE={key:!0,ref:!0,__self:!0,__source:!0};function nE(t,e,n){var r,A={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)eE.call(e,r)&&!tE.hasOwnProperty(r)&&(A[r]=e[r]);var o=arguments.length-2;if(o===1)A.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];A.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)A[r]===void 0&&(A[r]=o[r]);return{$$typeof:au,type:t,key:s,ref:i,props:A,_owner:gw.current}}function nk(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pw(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function rk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var DB=/\/+/g;function qg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rk(""+t.key):e.toString(36)}function Kd(t,e,n,r,A){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case au:case GS:i=!0}}if(i)return i=t,A=A(i),t=r===""?"."+qg(i,0):r,PB(A)?(n="",t!=null&&(n=t.replace(DB,"$&/")+"/"),Kd(A,e,n,"",function(c){return c})):A!=null&&(pw(A)&&(A=nk(A,n+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(DB,"$&/")+"/")+t)),e.push(A)),1;if(i=0,r=r===""?".":r+":",PB(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+qg(s,o);i+=Kd(s,e,n,a,A)}else if(a=tk(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+qg(s,o++),i+=Kd(s,e,n,a,A);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Ju(t,e,n){if(t==null)return t;var r=[],A=0;return Kd(t,r,"","",function(s){return e.call(n,s,A++)}),r}function Ak(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gn={current:null},Gd={transition:null},sk={ReactCurrentDispatcher:Gn,ReactCurrentBatchConfig:Gd,ReactCurrentOwner:gw};function rE(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Ju,forEach:function(t,e,n){Ju(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ju(t,function(){e++}),e},toArray:function(t){return Ju(t,function(e){return e})||[]},only:function(t){if(!pw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=Da;He.Fragment=zS;He.Profiler=$S;He.PureComponent=hw;He.StrictMode=WS;He.Suspense=YS;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sk;He.act=rE;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=XI({},t.props),A=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=gw.current),e.key!==void 0&&(A=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)eE.call(e,a)&&!tE.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:au,type:t.type,key:A,ref:s,props:r,_owner:i}};He.createContext=function(t){return t={$$typeof:JS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qS,_context:t},t.Consumer=t};He.createElement=nE;He.createFactory=function(t){var e=nE.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:XS,render:t}};He.isValidElement=pw;He.lazy=function(t){return{$$typeof:ek,_payload:{_status:-1,_result:t},_init:Ak}};He.memo=function(t,e){return{$$typeof:ZS,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=Gd.transition;Gd.transition={};try{t()}finally{Gd.transition=e}};He.unstable_act=rE;He.useCallback=function(t,e){return Gn.current.useCallback(t,e)};He.useContext=function(t){return Gn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return Gn.current.useDeferredValue(t)};He.useEffect=function(t,e){return Gn.current.useEffect(t,e)};He.useId=function(){return Gn.current.useId()};He.useImperativeHandle=function(t,e,n){return Gn.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return Gn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return Gn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return Gn.current.useMemo(t,e)};He.useReducer=function(t,e,n){return Gn.current.useReducer(t,e,n)};He.useRef=function(t){return Gn.current.useRef(t)};He.useState=function(t){return Gn.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return Gn.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return Gn.current.useTransition()};He.version="18.3.1";qI.exports=He;var k=qI.exports;const Ei=WI(k),ik=KS({__proto__:null,default:Ei},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=k,ak=Symbol.for("react.element"),lk=Symbol.for("react.fragment"),ck=Object.prototype.hasOwnProperty,uk=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dk={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var r,A={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)ck.call(e,r)&&!dk.hasOwnProperty(r)&&(A[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)A[r]===void 0&&(A[r]=e[r]);return{$$typeof:ak,type:t,key:s,ref:i,props:A,_owner:uk.current}}_f.Fragment=lk;_f.jsx=AE;_f.jsxs=AE;$I.exports=_f;var l=$I.exports,cm={},sE={exports:{}},pr={},iE={exports:{}},oE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,F){var M=z.length;z.push(F);e:for(;0<M;){var H=M-1>>>1,W=z[H];if(0<A(W,F))z[H]=F,z[M]=W,M=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var F=z[0],M=z.pop();if(M!==F){z[0]=M;e:for(var H=0,W=z.length,G=W>>>1;H<G;){var de=2*(H+1)-1,le=z[de],Ie=de+1,re=z[Ie];if(0>A(le,M))Ie<W&&0>A(re,le)?(z[H]=re,z[Ie]=M,H=Ie):(z[H]=le,z[de]=M,H=de);else if(Ie<W&&0>A(re,M))z[H]=re,z[Ie]=M,H=Ie;else break e}}return F}function A(z,F){var M=z.sortIndex-F.sortIndex;return M!==0?M:z.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],c=[],d=1,h=null,f=3,w=!1,m=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=z)r(c),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(c)}}function R(z){if(C=!1,v(z),!m)if(n(a)!==null)m=!0,ee(S);else{var F=n(c);F!==null&&be(R,F.startTime-z)}}function S(z,F){m=!1,C&&(C=!1,B(x),x=-1),w=!0;var M=f;try{for(v(F),h=n(a);h!==null&&(!(h.expirationTime>F)||z&&!U());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var W=H(h.expirationTime<=F);F=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(a)&&r(a),v(F)}else r(a);h=n(a)}if(h!==null)var G=!0;else{var de=n(c);de!==null&&be(R,de.startTime-F),G=!1}return G}finally{h=null,f=M,w=!1}}var N=!1,I=null,x=-1,b=5,Q=-1;function U(){return!(t.unstable_now()-Q<b)}function D(){if(I!==null){var z=t.unstable_now();Q=z;var F=!0;try{F=I(!0,z)}finally{F?T():(N=!1,I=null)}}else N=!1}var T;if(typeof y=="function")T=function(){y(D)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,et=Te.port2;Te.port1.onmessage=D,T=function(){et.postMessage(null)}}else T=function(){_(D,0)};function ee(z){I=z,N||(N=!0,T())}function be(z,F){x=_(function(){z(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){m||w||(m=!0,ee(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var M=f;f=F;try{return z()}finally{f=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,F){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var M=f;f=z;try{return F()}finally{f=M}},t.unstable_scheduleCallback=function(z,F,M){var H=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?H+M:H):M=H,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=M+W,z={id:d++,callback:F,priorityLevel:z,startTime:M,expirationTime:W,sortIndex:-1},M>H?(z.sortIndex=M,e(c,z),n(a)===null&&z===n(c)&&(C?(B(x),x=-1):C=!0,be(R,M-H))):(z.sortIndex=W,e(a,z),m||w||(m=!0,ee(S))),z},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(z){var F=f;return function(){var M=f;f=F;try{return z.apply(this,arguments)}finally{f=M}}}})(oE);iE.exports=oE;var hk=iE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk=k,fr=hk;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aE=new Set,mc={};function so(t,e){ua(t,e),ua(t+"Capture",e)}function ua(t,e){for(mc[t]=e,t=0;t<e.length;t++)aE.add(e[t])}var PA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=Object.prototype.hasOwnProperty,gk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LB={},OB={};function pk(t){return um.call(OB,t)?!0:um.call(LB,t)?!1:gk.test(t)?OB[t]=!0:(LB[t]=!0,!1)}function mk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wk(t,e,n,r){if(e===null||typeof e>"u"||mk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(t,e,n,r,A,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=A,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yn[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yn[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yn[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yn[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yn[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yn[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yn[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yn[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yn[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var mw=/[\-:]([a-z])/g;function ww(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mw,ww);yn[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mw,ww);yn[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mw,ww);yn[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yn[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});yn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yn[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function vw(t,e,n,r){var A=yn.hasOwnProperty(e)?yn[e]:null;(A!==null?A.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wk(e,n,A,r)&&(n=null),r||A===null?pk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):A.mustUseProperty?t[A.propertyName]=n===null?A.type===3?!1:"":n:(e=A.attributeName,r=A.attributeNamespace,n===null?t.removeAttribute(e):(A=A.type,n=A===3||A===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var GA=fk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),Lo=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),lE=Symbol.for("react.provider"),cE=Symbol.for("react.context"),Bw=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),xw=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),uE=Symbol.for("react.offscreen"),MB=Symbol.iterator;function cl(t){return t===null||typeof t!="object"?null:(t=MB&&t[MB]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,Jg;function Ul(t){if(Jg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jg=e&&e[1]||""}return`
`+Jg+t}var Xg=!1;function Yg(t,e){if(!t||Xg)return"";Xg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var A=c.stack.split(`
`),s=r.stack.split(`
`),i=A.length-1,o=s.length-1;1<=i&&0<=o&&A[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(A[i]!==s[o]){if(i!==1||o!==1)do if(i--,o--,0>o||A[i]!==s[o]){var a=`
`+A[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{Xg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function vk(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=Yg(t.type,!1),t;case 11:return t=Yg(t.type.render,!1),t;case 1:return t=Yg(t.type,!0),t;default:return""}}function gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oo:return"Fragment";case Lo:return"Portal";case dm:return"Profiler";case yw:return"StrictMode";case hm:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cE:return(t.displayName||"Context")+".Consumer";case lE:return(t._context.displayName||"Context")+".Provider";case Bw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xw:return e=t.displayName||null,e!==null?e:gm(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return gm(t(e))}catch{}}return null}function yk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gm(e);case 8:return e===yw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bk(t){var e=dE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var A=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return A.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yu(t){t._valueTracker||(t._valueTracker=Bk(t))}function hE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pm(t,e){var n=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fE(t,e){e=e.checked,e!=null&&vw(t,"checked",e,!1)}function mm(t,e){fE(t,e);var n=Ms(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wm(t,e.type,n):e.hasOwnProperty("defaultValue")&&wm(t,e.type,Ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wm(t,e,n){(e!=="number"||wh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ql=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var A=0;A<n.length;A++)e["$"+n[A]]=!0;for(n=0;n<t.length;n++)A=e.hasOwnProperty("$"+t[n].value),t[n].selected!==A&&(t[n].selected=A),A&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ms(n),e=null,A=0;A<t.length;A++){if(t[A].value===n){t[A].selected=!0,r&&(t[A].defaultSelected=!0);return}e!==null||t[A].disabled||(e=t[A])}e!==null&&(e.selected=!0)}}function vm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Ql(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ms(n)}}function gE(t,e){var n=Ms(e.value),r=Ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function KB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zu,mE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,A){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,A)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xk=["Webkit","ms","Moz","O"];Object.keys($l).forEach(function(t){xk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$l[e]=$l[t]})});function wE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$l.hasOwnProperty(t)&&$l[t]?(""+e).trim():e+"px"}function vE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,A=wE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,A):t[n]=A}}var Ck=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bm(t,e){if(e){if(Ck[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function xm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cm=null;function Cw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _m=null,Zo=null,ea=null;function GB(t){if(t=uu(t)){if(typeof _m!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Ff(e),_m(t.stateNode,t.type,e))}}function yE(t){Zo?ea?ea.push(t):ea=[t]:Zo=t}function BE(){if(Zo){var t=Zo,e=ea;if(ea=Zo=null,GB(t),e)for(t=0;t<e.length;t++)GB(e[t])}}function xE(t,e){return t(e)}function CE(){}var Zg=!1;function _E(t,e,n){if(Zg)return t(e,n);Zg=!0;try{return xE(t,e,n)}finally{Zg=!1,(Zo!==null||ea!==null)&&(CE(),BE())}}function vc(t,e){var n=t.stateNode;if(n===null)return null;var r=Ff(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Im=!1;if(PA)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Im=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Im=!1}function _k(t,e,n,r,A,s,i,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ql=!1,vh=null,yh=!1,Em=null,Ik={onError:function(t){ql=!0,vh=t}};function Ek(t,e,n,r,A,s,i,o,a){ql=!1,vh=null,_k.apply(Ik,arguments)}function bk(t,e,n,r,A,s,i,o,a){if(Ek.apply(this,arguments),ql){if(ql){var c=vh;ql=!1,vh=null}else throw Error(Z(198));yh||(yh=!0,Em=c)}}function io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function IE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zB(t){if(io(t)!==t)throw Error(Z(188))}function Tk(t){var e=t.alternate;if(!e){if(e=io(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var A=n.return;if(A===null)break;var s=A.alternate;if(s===null){if(r=A.return,r!==null){n=r;continue}break}if(A.child===s.child){for(s=A.child;s;){if(s===n)return zB(A),t;if(s===r)return zB(A),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=A,r=s;else{for(var i=!1,o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function EE(t){return t=Tk(t),t!==null?bE(t):null}function bE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bE(t);if(e!==null)return e;t=t.sibling}return null}var TE=fr.unstable_scheduleCallback,WB=fr.unstable_cancelCallback,Fk=fr.unstable_shouldYield,Uk=fr.unstable_requestPaint,Mt=fr.unstable_now,Qk=fr.unstable_getCurrentPriorityLevel,_w=fr.unstable_ImmediatePriority,FE=fr.unstable_UserBlockingPriority,Bh=fr.unstable_NormalPriority,Sk=fr.unstable_LowPriority,UE=fr.unstable_IdlePriority,If=null,aA=null;function kk(t){if(aA&&typeof aA.onCommitFiberRoot=="function")try{aA.onCommitFiberRoot(If,t,void 0,(t.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:Pk,Rk=Math.log,Nk=Math.LN2;function Pk(t){return t>>>=0,t===0?32:31-(Rk(t)/Nk|0)|0}var ed=64,td=4194304;function Sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,A=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~A;o!==0?r=Sl(o):(s&=i,s!==0&&(r=Sl(s)))}else i=n&~A,i!==0?r=Sl(i):s!==0&&(r=Sl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&A)&&(A=r&-r,s=e&-e,A>=s||A===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hr(e),A=1<<n,r|=t[n],e&=~A;return r}function Dk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,A=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Hr(s),o=1<<i,a=A[i];a===-1?(!(o&n)||o&r)&&(A[i]=Dk(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QE(){var t=ed;return ed<<=1,!(ed&4194240)&&(ed=64),t}function ep(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hr(e),t[e]=n}function Ok(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var A=31-Hr(n),s=1<<A;e[A]=0,r[A]=-1,t[A]=-1,n&=~s}}function Iw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hr(n),A=1<<r;A&e|t[r]&e&&(t[r]|=e),n&=~A}}var it=0;function SE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kE,Ew,RE,NE,PE,Tm=!1,nd=[],bs=null,Ts=null,Fs=null,yc=new Map,Bc=new Map,fs=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $B(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(e.pointerId)}}function dl(t,e,n,r,A,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[A]},e!==null&&(e=uu(e),e!==null&&Ew(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,A!==null&&e.indexOf(A)===-1&&e.push(A),t)}function Vk(t,e,n,r,A){switch(e){case"focusin":return bs=dl(bs,t,e,n,r,A),!0;case"dragenter":return Ts=dl(Ts,t,e,n,r,A),!0;case"mouseover":return Fs=dl(Fs,t,e,n,r,A),!0;case"pointerover":var s=A.pointerId;return yc.set(s,dl(yc.get(s)||null,t,e,n,r,A)),!0;case"gotpointercapture":return s=A.pointerId,Bc.set(s,dl(Bc.get(s)||null,t,e,n,r,A)),!0}return!1}function DE(t){var e=bi(t.target);if(e!==null){var n=io(e);if(n!==null){if(e=n.tag,e===13){if(e=IE(n),e!==null){t.blockedOn=e,PE(t.priority,function(){RE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cm=r,n.target.dispatchEvent(r),Cm=null}else return e=uu(n),e!==null&&Ew(e),t.blockedOn=n,!1;e.shift()}return!0}function qB(t,e,n){zd(t)&&n.delete(e)}function Hk(){Tm=!1,bs!==null&&zd(bs)&&(bs=null),Ts!==null&&zd(Ts)&&(Ts=null),Fs!==null&&zd(Fs)&&(Fs=null),yc.forEach(qB),Bc.forEach(qB)}function hl(t,e){t.blockedOn===e&&(t.blockedOn=null,Tm||(Tm=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,Hk)))}function xc(t){function e(A){return hl(A,t)}if(0<nd.length){hl(nd[0],t);for(var n=1;n<nd.length;n++){var r=nd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bs!==null&&hl(bs,t),Ts!==null&&hl(Ts,t),Fs!==null&&hl(Fs,t),yc.forEach(e),Bc.forEach(e),n=0;n<fs.length;n++)r=fs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fs.length&&(n=fs[0],n.blockedOn===null);)DE(n),n.blockedOn===null&&fs.shift()}var ta=GA.ReactCurrentBatchConfig,Ch=!0;function jk(t,e,n,r){var A=it,s=ta.transition;ta.transition=null;try{it=1,bw(t,e,n,r)}finally{it=A,ta.transition=s}}function Kk(t,e,n,r){var A=it,s=ta.transition;ta.transition=null;try{it=4,bw(t,e,n,r)}finally{it=A,ta.transition=s}}function bw(t,e,n,r){if(Ch){var A=Fm(t,e,n,r);if(A===null)cp(t,e,r,_h,n),$B(t,r);else if(Vk(A,t,e,n,r))r.stopPropagation();else if($B(t,r),e&4&&-1<Mk.indexOf(t)){for(;A!==null;){var s=uu(A);if(s!==null&&kE(s),s=Fm(t,e,n,r),s===null&&cp(t,e,r,_h,n),s===A)break;A=s}A!==null&&r.stopPropagation()}else cp(t,e,r,null,n)}}var _h=null;function Fm(t,e,n,r){if(_h=null,t=Cw(r),t=bi(t),t!==null)if(e=io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=IE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _h=t,null}function LE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qk()){case _w:return 1;case FE:return 4;case Bh:case Sk:return 16;case UE:return 536870912;default:return 16}default:return 16}}var ws=null,Tw=null,Wd=null;function OE(){if(Wd)return Wd;var t,e=Tw,n=e.length,r,A="value"in ws?ws.value:ws.textContent,s=A.length;for(t=0;t<n&&e[t]===A[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===A[s-r];r++);return Wd=A.slice(t,1<r?1-r:void 0)}function $d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function JB(){return!1}function mr(t){function e(n,r,A,s,i){this._reactName=n,this._targetInst=A,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rd:JB,this.isPropagationStopped=JB,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fw=mr(La),cu=bt({},La,{view:0,detail:0}),Gk=mr(cu),tp,np,fl,Ef=bt({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fl&&(fl&&t.type==="mousemove"?(tp=t.screenX-fl.screenX,np=t.screenY-fl.screenY):np=tp=0,fl=t),tp)},movementY:function(t){return"movementY"in t?t.movementY:np}}),XB=mr(Ef),zk=bt({},Ef,{dataTransfer:0}),Wk=mr(zk),$k=bt({},cu,{relatedTarget:0}),rp=mr($k),qk=bt({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),Jk=mr(qk),Xk=bt({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yk=mr(Xk),Zk=bt({},La,{data:0}),YB=mr(Zk),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n2[t])?!!e[t]:!1}function Uw(){return r2}var A2=bt({},cu,{key:function(t){if(t.key){var e=e2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uw,charCode:function(t){return t.type==="keypress"?$d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s2=mr(A2),i2=bt({},Ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZB=mr(i2),o2=bt({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uw}),a2=mr(o2),l2=bt({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=mr(l2),u2=bt({},Ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d2=mr(u2),h2=[9,13,27,32],Qw=PA&&"CompositionEvent"in window,Jl=null;PA&&"documentMode"in document&&(Jl=document.documentMode);var f2=PA&&"TextEvent"in window&&!Jl,ME=PA&&(!Qw||Jl&&8<Jl&&11>=Jl),ex=" ",tx=!1;function VE(t,e){switch(t){case"keyup":return h2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function g2(t,e){switch(t){case"compositionend":return HE(e);case"keypress":return e.which!==32?null:(tx=!0,ex);case"textInput":return t=e.data,t===ex&&tx?null:t;default:return null}}function p2(t,e){if(Mo)return t==="compositionend"||!Qw&&VE(t,e)?(t=OE(),Wd=Tw=ws=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ME&&e.locale!=="ko"?null:e.data;default:return null}}var m2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m2[t.type]:e==="textarea"}function jE(t,e,n,r){yE(r),e=Ih(e,"onChange"),0<e.length&&(n=new Fw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xl=null,Cc=null;function w2(t){eb(t,0)}function bf(t){var e=jo(t);if(hE(e))return t}function v2(t,e){if(t==="change")return e}var KE=!1;if(PA){var Ap;if(PA){var sp="oninput"in document;if(!sp){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),sp=typeof rx.oninput=="function"}Ap=sp}else Ap=!1;KE=Ap&&(!document.documentMode||9<document.documentMode)}function Ax(){Xl&&(Xl.detachEvent("onpropertychange",GE),Cc=Xl=null)}function GE(t){if(t.propertyName==="value"&&bf(Cc)){var e=[];jE(e,Cc,t,Cw(t)),_E(w2,e)}}function y2(t,e,n){t==="focusin"?(Ax(),Xl=e,Cc=n,Xl.attachEvent("onpropertychange",GE)):t==="focusout"&&Ax()}function B2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bf(Cc)}function x2(t,e){if(t==="click")return bf(e)}function C2(t,e){if(t==="input"||t==="change")return bf(e)}function _2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gr=typeof Object.is=="function"?Object.is:_2;function _c(t,e){if(Gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var A=n[r];if(!um.call(e,A)||!Gr(t[A],e[A]))return!1}return!0}function sx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ix(t,e){var n=sx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sx(n)}}function zE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function WE(){for(var t=window,e=wh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wh(t.document)}return e}function Sw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I2(t){var e=WE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zE(n.ownerDocument.documentElement,n)){if(r!==null&&Sw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var A=n.textContent.length,s=Math.min(r.start,A);r=r.end===void 0?s:Math.min(r.end,A),!t.extend&&s>r&&(A=r,r=s,s=A),A=ix(n,s);var i=ix(n,r);A&&i&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(A.node,A.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E2=PA&&"documentMode"in document&&11>=document.documentMode,Vo=null,Um=null,Yl=null,Qm=!1;function ox(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qm||Vo==null||Vo!==wh(r)||(r=Vo,"selectionStart"in r&&Sw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&_c(Yl,r)||(Yl=r,r=Ih(Um,"onSelect"),0<r.length&&(e=new Fw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function Ad(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ho={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionend:Ad("Transition","TransitionEnd")},ip={},$E={};PA&&($E=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Tf(t){if(ip[t])return ip[t];if(!Ho[t])return t;var e=Ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $E)return ip[t]=e[n];return t}var qE=Tf("animationend"),JE=Tf("animationiteration"),XE=Tf("animationstart"),YE=Tf("transitionend"),ZE=new Map,ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){ZE.set(t,e),so(e,[t])}for(var op=0;op<ax.length;op++){var ap=ax[op],b2=ap.toLowerCase(),T2=ap[0].toUpperCase()+ap.slice(1);ei(b2,"on"+T2)}ei(qE,"onAnimationEnd");ei(JE,"onAnimationIteration");ei(XE,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(YE,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F2=new Set("cancel close invalid load scroll toggle".split(" ").concat(kl));function lx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bk(r,e,void 0,t),t.currentTarget=null}function eb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],A=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==s&&A.isPropagationStopped())break e;lx(A,o,c),s=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,c=o.currentTarget,o=o.listener,a!==s&&A.isPropagationStopped())break e;lx(A,o,c),s=a}}}if(yh)throw t=Em,yh=!1,Em=null,t}function ft(t,e){var n=e[Pm];n===void 0&&(n=e[Pm]=new Set);var r=t+"__bubble";n.has(r)||(tb(e,t,2,!1),n.add(r))}function lp(t,e,n){var r=0;e&&(r|=4),tb(n,t,r,e)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Ic(t){if(!t[sd]){t[sd]=!0,aE.forEach(function(n){n!=="selectionchange"&&(F2.has(n)||lp(n,!1,t),lp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sd]||(e[sd]=!0,lp("selectionchange",!1,e))}}function tb(t,e,n,r){switch(LE(e)){case 1:var A=jk;break;case 4:A=Kk;break;default:A=bw}n=A.bind(null,e,n,t),A=void 0,!Im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(A=!0),r?A!==void 0?t.addEventListener(e,n,{capture:!0,passive:A}):t.addEventListener(e,n,!0):A!==void 0?t.addEventListener(e,n,{passive:A}):t.addEventListener(e,n,!1)}function cp(t,e,n,r,A){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===A||o.nodeType===8&&o.parentNode===A)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===A||a.nodeType===8&&a.parentNode===A))return;i=i.return}for(;o!==null;){if(i=bi(o),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}o=o.parentNode}}r=r.return}_E(function(){var c=s,d=Cw(n),h=[];e:{var f=ZE.get(t);if(f!==void 0){var w=Fw,m=t;switch(t){case"keypress":if($d(n)===0)break e;case"keydown":case"keyup":w=s2;break;case"focusin":m="focus",w=rp;break;case"focusout":m="blur",w=rp;break;case"beforeblur":case"afterblur":w=rp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=XB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Wk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=a2;break;case qE:case JE:case XE:w=Jk;break;case YE:w=c2;break;case"scroll":w=Gk;break;case"wheel":w=d2;break;case"copy":case"cut":case"paste":w=Yk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ZB}var C=(e&4)!==0,_=!C&&t==="scroll",B=C?f!==null?f+"Capture":null:f;C=[];for(var y=c,v;y!==null;){v=y;var R=v.stateNode;if(v.tag===5&&R!==null&&(v=R,B!==null&&(R=vc(y,B),R!=null&&C.push(Ec(y,R,v)))),_)break;y=y.return}0<C.length&&(f=new w(f,m,null,n,d),h.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&n!==Cm&&(m=n.relatedTarget||n.fromElement)&&(bi(m)||m[DA]))break e;if((w||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,w?(m=n.relatedTarget||n.toElement,w=c,m=m?bi(m):null,m!==null&&(_=io(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(w=null,m=c),w!==m)){if(C=XB,R="onMouseLeave",B="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(C=ZB,R="onPointerLeave",B="onPointerEnter",y="pointer"),_=w==null?f:jo(w),v=m==null?f:jo(m),f=new C(R,y+"leave",w,n,d),f.target=_,f.relatedTarget=v,R=null,bi(d)===c&&(C=new C(B,y+"enter",m,n,d),C.target=v,C.relatedTarget=_,R=C),_=R,w&&m)t:{for(C=w,B=m,y=0,v=C;v;v=vo(v))y++;for(v=0,R=B;R;R=vo(R))v++;for(;0<y-v;)C=vo(C),y--;for(;0<v-y;)B=vo(B),v--;for(;y--;){if(C===B||B!==null&&C===B.alternate)break t;C=vo(C),B=vo(B)}C=null}else C=null;w!==null&&cx(h,f,w,C,!1),m!==null&&_!==null&&cx(h,_,m,C,!0)}}e:{if(f=c?jo(c):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var S=v2;else if(nx(f))if(KE)S=C2;else{S=B2;var N=y2}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=x2);if(S&&(S=S(t,c))){jE(h,S,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&wm(f,"number",f.value)}switch(N=c?jo(c):window,t){case"focusin":(nx(N)||N.contentEditable==="true")&&(Vo=N,Um=c,Yl=null);break;case"focusout":Yl=Um=Vo=null;break;case"mousedown":Qm=!0;break;case"contextmenu":case"mouseup":case"dragend":Qm=!1,ox(h,n,d);break;case"selectionchange":if(E2)break;case"keydown":case"keyup":ox(h,n,d)}var I;if(Qw)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Mo?VE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(ME&&n.locale!=="ko"&&(Mo||x!=="onCompositionStart"?x==="onCompositionEnd"&&Mo&&(I=OE()):(ws=d,Tw="value"in ws?ws.value:ws.textContent,Mo=!0)),N=Ih(c,x),0<N.length&&(x=new YB(x,t,null,n,d),h.push({event:x,listeners:N}),I?x.data=I:(I=HE(n),I!==null&&(x.data=I)))),(I=f2?g2(t,n):p2(t,n))&&(c=Ih(c,"onBeforeInput"),0<c.length&&(d=new YB("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}eb(h,e)})}function Ec(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var A=t,s=A.stateNode;A.tag===5&&s!==null&&(A=s,s=vc(t,n),s!=null&&r.unshift(Ec(t,s,A)),s=vc(t,e),s!=null&&r.push(Ec(t,s,A))),t=t.return}return r}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cx(t,e,n,r,A){for(var s=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,c=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&c!==null&&(o=c,A?(a=vc(n,s),a!=null&&i.unshift(Ec(n,a,o))):A||(a=vc(n,s),a!=null&&i.push(Ec(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var U2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function ux(t){return(typeof t=="string"?t:""+t).replace(U2,`
`).replace(Q2,"")}function id(t,e,n){if(e=ux(e),ux(t)!==e&&n)throw Error(Z(425))}function Eh(){}var Sm=null,km=null;function Rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,S2=typeof clearTimeout=="function"?clearTimeout:void 0,dx=typeof Promise=="function"?Promise:void 0,k2=typeof queueMicrotask=="function"?queueMicrotask:typeof dx<"u"?function(t){return dx.resolve(null).then(t).catch(R2)}:Nm;function R2(t){setTimeout(function(){throw t})}function up(t,e){var n=e,r=0;do{var A=n.nextSibling;if(t.removeChild(n),A&&A.nodeType===8)if(n=A.data,n==="/$"){if(r===0){t.removeChild(A),xc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=A}while(n);xc(e)}function Us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Oa,bc="__reactProps$"+Oa,DA="__reactContainer$"+Oa,Pm="__reactEvents$"+Oa,N2="__reactListeners$"+Oa,P2="__reactHandles$"+Oa;function bi(t){var e=t[Yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[DA]||n[Yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hx(t);t!==null;){if(n=t[Yr])return n;t=hx(t)}return e}t=n,n=t.parentNode}return null}function uu(t){return t=t[Yr]||t[DA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Ff(t){return t[bc]||null}var Dm=[],Ko=-1;function ti(t){return{current:t}}function pt(t){0>Ko||(t.current=Dm[Ko],Dm[Ko]=null,Ko--)}function ut(t,e){Ko++,Dm[Ko]=t.current,t.current=e}var Vs={},Sn=ti(Vs),nr=ti(!1),Vi=Vs;function da(t,e){var n=t.type.contextTypes;if(!n)return Vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var A={},s;for(s in n)A[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=A),A}function rr(t){return t=t.childContextTypes,t!=null}function bh(){pt(nr),pt(Sn)}function fx(t,e,n){if(Sn.current!==Vs)throw Error(Z(168));ut(Sn,e),ut(nr,n)}function nb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var A in r)if(!(A in e))throw Error(Z(108,yk(t)||"Unknown",A));return bt({},n,r)}function Th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vs,Vi=Sn.current,ut(Sn,t),ut(nr,nr.current),!0}function gx(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=nb(t,e,Vi),r.__reactInternalMemoizedMergedChildContext=t,pt(nr),pt(Sn),ut(Sn,t)):pt(nr),ut(nr,n)}var IA=null,Uf=!1,dp=!1;function rb(t){IA===null?IA=[t]:IA.push(t)}function D2(t){Uf=!0,rb(t)}function ni(){if(!dp&&IA!==null){dp=!0;var t=0,e=it;try{var n=IA;for(it=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}IA=null,Uf=!1}catch(A){throw IA!==null&&(IA=IA.slice(t+1)),TE(_w,ni),A}finally{it=e,dp=!1}}return null}var Go=[],zo=0,Fh=null,Uh=0,yr=[],Br=0,Hi=null,EA=1,bA="";function pi(t,e){Go[zo++]=Uh,Go[zo++]=Fh,Fh=t,Uh=e}function Ab(t,e,n){yr[Br++]=EA,yr[Br++]=bA,yr[Br++]=Hi,Hi=t;var r=EA;t=bA;var A=32-Hr(r)-1;r&=~(1<<A),n+=1;var s=32-Hr(e)+A;if(30<s){var i=A-A%5;s=(r&(1<<i)-1).toString(32),r>>=i,A-=i,EA=1<<32-Hr(e)+A|n<<A|r,bA=s+t}else EA=1<<s|n<<A|r,bA=t}function kw(t){t.return!==null&&(pi(t,1),Ab(t,1,0))}function Rw(t){for(;t===Fh;)Fh=Go[--zo],Go[zo]=null,Uh=Go[--zo],Go[zo]=null;for(;t===Hi;)Hi=yr[--Br],yr[Br]=null,bA=yr[--Br],yr[Br]=null,EA=yr[--Br],yr[Br]=null}var hr=null,ur=null,vt=!1,Vr=null;function sb(t,e){var n=Cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function px(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,ur=Us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hi!==null?{id:EA,overflow:bA}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,ur=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(vt){var e=ur;if(e){var n=e;if(!px(t,e)){if(Lm(t))throw Error(Z(418));e=Us(n.nextSibling);var r=hr;e&&px(t,e)?sb(r,n):(t.flags=t.flags&-4097|2,vt=!1,hr=t)}}else{if(Lm(t))throw Error(Z(418));t.flags=t.flags&-4097|2,vt=!1,hr=t}}}function mx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function od(t){if(t!==hr)return!1;if(!vt)return mx(t),vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rm(t.type,t.memoizedProps)),e&&(e=ur)){if(Lm(t))throw ib(),Error(Z(418));for(;e;)sb(t,e),e=Us(e.nextSibling)}if(mx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=Us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=hr?Us(t.stateNode.nextSibling):null;return!0}function ib(){for(var t=ur;t;)t=Us(t.nextSibling)}function ha(){ur=hr=null,vt=!1}function Nw(t){Vr===null?Vr=[t]:Vr.push(t)}var L2=GA.ReactCurrentBatchConfig;function gl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var A=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var o=A.refs;i===null?delete o[s]:o[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ad(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wx(t){var e=t._init;return e(t._payload)}function ob(t){function e(B,y){if(t){var v=B.deletions;v===null?(B.deletions=[y],B.flags|=16):v.push(y)}}function n(B,y){if(!t)return null;for(;y!==null;)e(B,y),y=y.sibling;return null}function r(B,y){for(B=new Map;y!==null;)y.key!==null?B.set(y.key,y):B.set(y.index,y),y=y.sibling;return B}function A(B,y){return B=Rs(B,y),B.index=0,B.sibling=null,B}function s(B,y,v){return B.index=v,t?(v=B.alternate,v!==null?(v=v.index,v<y?(B.flags|=2,y):v):(B.flags|=2,y)):(B.flags|=1048576,y)}function i(B){return t&&B.alternate===null&&(B.flags|=2),B}function o(B,y,v,R){return y===null||y.tag!==6?(y=vp(v,B.mode,R),y.return=B,y):(y=A(y,v),y.return=B,y)}function a(B,y,v,R){var S=v.type;return S===Oo?d(B,y,v.props.children,R,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===us&&wx(S)===y.type)?(R=A(y,v.props),R.ref=gl(B,y,v),R.return=B,R):(R=th(v.type,v.key,v.props,null,B.mode,R),R.ref=gl(B,y,v),R.return=B,R)}function c(B,y,v,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=yp(v,B.mode,R),y.return=B,y):(y=A(y,v.children||[]),y.return=B,y)}function d(B,y,v,R,S){return y===null||y.tag!==7?(y=Ni(v,B.mode,R,S),y.return=B,y):(y=A(y,v),y.return=B,y)}function h(B,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=vp(""+y,B.mode,v),y.return=B,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xu:return v=th(y.type,y.key,y.props,null,B.mode,v),v.ref=gl(B,null,y),v.return=B,v;case Lo:return y=yp(y,B.mode,v),y.return=B,y;case us:var R=y._init;return h(B,R(y._payload),v)}if(Ql(y)||cl(y))return y=Ni(y,B.mode,v,null),y.return=B,y;ad(B,y)}return null}function f(B,y,v,R){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:o(B,y,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:return v.key===S?a(B,y,v,R):null;case Lo:return v.key===S?c(B,y,v,R):null;case us:return S=v._init,f(B,y,S(v._payload),R)}if(Ql(v)||cl(v))return S!==null?null:d(B,y,v,R,null);ad(B,v)}return null}function w(B,y,v,R,S){if(typeof R=="string"&&R!==""||typeof R=="number")return B=B.get(v)||null,o(y,B,""+R,S);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Xu:return B=B.get(R.key===null?v:R.key)||null,a(y,B,R,S);case Lo:return B=B.get(R.key===null?v:R.key)||null,c(y,B,R,S);case us:var N=R._init;return w(B,y,v,N(R._payload),S)}if(Ql(R)||cl(R))return B=B.get(v)||null,d(y,B,R,S,null);ad(y,R)}return null}function m(B,y,v,R){for(var S=null,N=null,I=y,x=y=0,b=null;I!==null&&x<v.length;x++){I.index>x?(b=I,I=null):b=I.sibling;var Q=f(B,I,v[x],R);if(Q===null){I===null&&(I=b);break}t&&I&&Q.alternate===null&&e(B,I),y=s(Q,y,x),N===null?S=Q:N.sibling=Q,N=Q,I=b}if(x===v.length)return n(B,I),vt&&pi(B,x),S;if(I===null){for(;x<v.length;x++)I=h(B,v[x],R),I!==null&&(y=s(I,y,x),N===null?S=I:N.sibling=I,N=I);return vt&&pi(B,x),S}for(I=r(B,I);x<v.length;x++)b=w(I,B,x,v[x],R),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?x:b.key),y=s(b,y,x),N===null?S=b:N.sibling=b,N=b);return t&&I.forEach(function(U){return e(B,U)}),vt&&pi(B,x),S}function C(B,y,v,R){var S=cl(v);if(typeof S!="function")throw Error(Z(150));if(v=S.call(v),v==null)throw Error(Z(151));for(var N=S=null,I=y,x=y=0,b=null,Q=v.next();I!==null&&!Q.done;x++,Q=v.next()){I.index>x?(b=I,I=null):b=I.sibling;var U=f(B,I,Q.value,R);if(U===null){I===null&&(I=b);break}t&&I&&U.alternate===null&&e(B,I),y=s(U,y,x),N===null?S=U:N.sibling=U,N=U,I=b}if(Q.done)return n(B,I),vt&&pi(B,x),S;if(I===null){for(;!Q.done;x++,Q=v.next())Q=h(B,Q.value,R),Q!==null&&(y=s(Q,y,x),N===null?S=Q:N.sibling=Q,N=Q);return vt&&pi(B,x),S}for(I=r(B,I);!Q.done;x++,Q=v.next())Q=w(I,B,x,Q.value,R),Q!==null&&(t&&Q.alternate!==null&&I.delete(Q.key===null?x:Q.key),y=s(Q,y,x),N===null?S=Q:N.sibling=Q,N=Q);return t&&I.forEach(function(D){return e(B,D)}),vt&&pi(B,x),S}function _(B,y,v,R){if(typeof v=="object"&&v!==null&&v.type===Oo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:e:{for(var S=v.key,N=y;N!==null;){if(N.key===S){if(S=v.type,S===Oo){if(N.tag===7){n(B,N.sibling),y=A(N,v.props.children),y.return=B,B=y;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===us&&wx(S)===N.type){n(B,N.sibling),y=A(N,v.props),y.ref=gl(B,N,v),y.return=B,B=y;break e}n(B,N);break}else e(B,N);N=N.sibling}v.type===Oo?(y=Ni(v.props.children,B.mode,R,v.key),y.return=B,B=y):(R=th(v.type,v.key,v.props,null,B.mode,R),R.ref=gl(B,y,v),R.return=B,B=R)}return i(B);case Lo:e:{for(N=v.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(B,y.sibling),y=A(y,v.children||[]),y.return=B,B=y;break e}else{n(B,y);break}else e(B,y);y=y.sibling}y=yp(v,B.mode,R),y.return=B,B=y}return i(B);case us:return N=v._init,_(B,y,N(v._payload),R)}if(Ql(v))return m(B,y,v,R);if(cl(v))return C(B,y,v,R);ad(B,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(B,y.sibling),y=A(y,v),y.return=B,B=y):(n(B,y),y=vp(v,B.mode,R),y.return=B,B=y),i(B)):n(B,y)}return _}var fa=ob(!0),ab=ob(!1),Qh=ti(null),Sh=null,Wo=null,Pw=null;function Dw(){Pw=Wo=Sh=null}function Lw(t){var e=Qh.current;pt(Qh),t._currentValue=e}function Mm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function na(t,e){Sh=t,Pw=Wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Fr(t){var e=t._currentValue;if(Pw!==t)if(t={context:t,memoizedValue:e,next:null},Wo===null){if(Sh===null)throw Error(Z(308));Wo=t,Sh.dependencies={lanes:0,firstContext:t}}else Wo=Wo.next=t;return e}var Ti=null;function Ow(t){Ti===null?Ti=[t]:Ti.push(t)}function lb(t,e,n,r){var A=e.interleaved;return A===null?(n.next=n,Ow(e)):(n.next=A.next,A.next=n),e.interleaved=n,LA(t,r)}function LA(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ds=!1;function Mw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function SA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var A=r.pending;return A===null?e.next=e:(e.next=A.next,A.next=e),r.pending=e,LA(t,n)}return A=r.interleaved,A===null?(e.next=e,Ow(r)):(e.next=A.next,A.next=e),r.interleaved=e,LA(t,n)}function qd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iw(t,n)}}function vx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var A=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?A=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?A=s=e:s=s.next=e}else A=s=e;n={baseState:r.baseState,firstBaseUpdate:A,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kh(t,e,n,r){var A=t.updateQueue;ds=!1;var s=A.firstBaseUpdate,i=A.lastBaseUpdate,o=A.shared.pending;if(o!==null){A.shared.pending=null;var a=o,c=a.next;a.next=null,i===null?s=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(s!==null){var h=A.baseState;i=0,d=c=a=null,o=s;do{var f=o.lane,w=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,C=o;switch(f=e,w=n,C.tag){case 1:if(m=C.payload,typeof m=="function"){h=m.call(w,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=C.payload,f=typeof m=="function"?m.call(w,h,f):m,f==null)break e;h=bt({},h,f);break e;case 2:ds=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=A.effects,f===null?A.effects=[o]:f.push(o))}else w={eventTime:w,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=w,a=h):d=d.next=w,i|=f;if(o=o.next,o===null){if(o=A.shared.pending,o===null)break;f=o,o=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(d===null&&(a=h),A.baseState=a,A.firstBaseUpdate=c,A.lastBaseUpdate=d,e=A.shared.interleaved,e!==null){A=e;do i|=A.lane,A=A.next;while(A!==e)}else s===null&&(A.shared.lanes=0);Ki|=i,t.lanes=i,t.memoizedState=h}}function yx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],A=r.callback;if(A!==null){if(r.callback=null,r=n,typeof A!="function")throw Error(Z(191,A));A.call(r)}}}var du={},lA=ti(du),Tc=ti(du),Fc=ti(du);function Fi(t){if(t===du)throw Error(Z(174));return t}function Vw(t,e){switch(ut(Fc,e),ut(Tc,t),ut(lA,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ym(e,t)}pt(lA),ut(lA,e)}function ga(){pt(lA),pt(Tc),pt(Fc)}function ub(t){Fi(Fc.current);var e=Fi(lA.current),n=ym(e,t.type);e!==n&&(ut(Tc,t),ut(lA,n))}function Hw(t){Tc.current===t&&(pt(lA),pt(Tc))}var Ct=ti(0);function Rh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hp=[];function jw(){for(var t=0;t<hp.length;t++)hp[t]._workInProgressVersionPrimary=null;hp.length=0}var Jd=GA.ReactCurrentDispatcher,fp=GA.ReactCurrentBatchConfig,ji=0,_t=null,Xt=null,on=null,Nh=!1,Zl=!1,Uc=0,O2=0;function In(){throw Error(Z(321))}function Kw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gr(t[n],e[n]))return!1;return!0}function Gw(t,e,n,r,A,s){if(ji=s,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jd.current=t===null||t.memoizedState===null?j2:K2,t=n(r,A),Zl){s=0;do{if(Zl=!1,Uc=0,25<=s)throw Error(Z(301));s+=1,on=Xt=null,e.updateQueue=null,Jd.current=G2,t=n(r,A)}while(Zl)}if(Jd.current=Ph,e=Xt!==null&&Xt.next!==null,ji=0,on=Xt=_t=null,Nh=!1,e)throw Error(Z(300));return t}function zw(){var t=Uc!==0;return Uc=0,t}function Xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?_t.memoizedState=on=t:on=on.next=t,on}function Ur(){if(Xt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=on===null?_t.memoizedState:on.next;if(e!==null)on=e,Xt=t;else{if(t===null)throw Error(Z(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},on===null?_t.memoizedState=on=t:on=on.next=t}return on}function Qc(t,e){return typeof e=="function"?e(t):e}function gp(t){var e=Ur(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Xt,A=r.baseQueue,s=n.pending;if(s!==null){if(A!==null){var i=A.next;A.next=s.next,s.next=i}r.baseQueue=A=s,n.pending=null}if(A!==null){s=A.next,r=r.baseState;var o=i=null,a=null,c=s;do{var d=c.lane;if((ji&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,_t.lanes|=d,Ki|=d}c=c.next}while(c!==null&&c!==s);a===null?i=r:a.next=o,Gr(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){A=t;do s=A.lane,_t.lanes|=s,Ki|=s,A=A.next;while(A!==t)}else A===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pp(t){var e=Ur(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,A=n.pending,s=e.memoizedState;if(A!==null){n.pending=null;var i=A=A.next;do s=t(s,i.action),i=i.next;while(i!==A);Gr(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function db(){}function hb(t,e){var n=_t,r=Ur(),A=e(),s=!Gr(r.memoizedState,A);if(s&&(r.memoizedState=A,Yn=!0),r=r.queue,Ww(pb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||on!==null&&on.memoizedState.tag&1){if(n.flags|=2048,Sc(9,gb.bind(null,n,r,A,e),void 0,null),ln===null)throw Error(Z(349));ji&30||fb(n,e,A)}return A}function fb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gb(t,e,n,r){e.value=n,e.getSnapshot=r,mb(e)&&wb(t)}function pb(t,e,n){return n(function(){mb(e)&&wb(t)})}function mb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gr(t,n)}catch{return!0}}function wb(t){var e=LA(t,1);e!==null&&jr(e,t,1,-1)}function Bx(t){var e=Xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:t},e.queue=t,t=t.dispatch=H2.bind(null,_t,t),[e.memoizedState,t]}function Sc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vb(){return Ur().memoizedState}function Xd(t,e,n,r){var A=Xr();_t.flags|=t,A.memoizedState=Sc(1|e,n,void 0,r===void 0?null:r)}function Qf(t,e,n,r){var A=Ur();r=r===void 0?null:r;var s=void 0;if(Xt!==null){var i=Xt.memoizedState;if(s=i.destroy,r!==null&&Kw(r,i.deps)){A.memoizedState=Sc(e,n,s,r);return}}_t.flags|=t,A.memoizedState=Sc(1|e,n,s,r)}function xx(t,e){return Xd(8390656,8,t,e)}function Ww(t,e){return Qf(2048,8,t,e)}function yb(t,e){return Qf(4,2,t,e)}function Bb(t,e){return Qf(4,4,t,e)}function xb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cb(t,e,n){return n=n!=null?n.concat([t]):null,Qf(4,4,xb.bind(null,e,t),n)}function $w(){}function _b(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ib(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Eb(t,e,n){return ji&21?(Gr(n,e)||(n=QE(),_t.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function M2(t,e){var n=it;it=n!==0&&4>n?n:4,t(!0);var r=fp.transition;fp.transition={};try{t(!1),e()}finally{it=n,fp.transition=r}}function bb(){return Ur().memoizedState}function V2(t,e,n){var r=ks(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tb(t))Fb(e,n);else if(n=lb(t,e,n,r),n!==null){var A=Mn();jr(n,t,r,A),Ub(n,e,r)}}function H2(t,e,n){var r=ks(t),A={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tb(t))Fb(e,A);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,o=s(i,n);if(A.hasEagerState=!0,A.eagerState=o,Gr(o,i)){var a=e.interleaved;a===null?(A.next=A,Ow(e)):(A.next=a.next,a.next=A),e.interleaved=A;return}}catch{}finally{}n=lb(t,e,A,r),n!==null&&(A=Mn(),jr(n,t,r,A),Ub(n,e,r))}}function Tb(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function Fb(t,e){Zl=Nh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ub(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iw(t,n)}}var Ph={readContext:Fr,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},j2={readContext:Fr,useCallback:function(t,e){return Xr().memoizedState=[t,e===void 0?null:e],t},useContext:Fr,useEffect:xx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xd(4194308,4,xb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xd(4,2,t,e)},useMemo:function(t,e){var n=Xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V2.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=Xr();return t={current:t},e.memoizedState=t},useState:Bx,useDebugValue:$w,useDeferredValue:function(t){return Xr().memoizedState=t},useTransition:function(){var t=Bx(!1),e=t[0];return t=M2.bind(null,t[1]),Xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,A=Xr();if(vt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),ln===null)throw Error(Z(349));ji&30||fb(r,e,n)}A.memoizedState=n;var s={value:n,getSnapshot:e};return A.queue=s,xx(pb.bind(null,r,s,t),[t]),r.flags|=2048,Sc(9,gb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xr(),e=ln.identifierPrefix;if(vt){var n=bA,r=EA;n=(r&~(1<<32-Hr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=O2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K2={readContext:Fr,useCallback:_b,useContext:Fr,useEffect:Ww,useImperativeHandle:Cb,useInsertionEffect:yb,useLayoutEffect:Bb,useMemo:Ib,useReducer:gp,useRef:vb,useState:function(){return gp(Qc)},useDebugValue:$w,useDeferredValue:function(t){var e=Ur();return Eb(e,Xt.memoizedState,t)},useTransition:function(){var t=gp(Qc)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:db,useSyncExternalStore:hb,useId:bb,unstable_isNewReconciler:!1},G2={readContext:Fr,useCallback:_b,useContext:Fr,useEffect:Ww,useImperativeHandle:Cb,useInsertionEffect:yb,useLayoutEffect:Bb,useMemo:Ib,useReducer:pp,useRef:vb,useState:function(){return pp(Qc)},useDebugValue:$w,useDeferredValue:function(t){var e=Ur();return Xt===null?e.memoizedState=t:Eb(e,Xt.memoizedState,t)},useTransition:function(){var t=pp(Qc)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:db,useSyncExternalStore:hb,useId:bb,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sf={isMounted:function(t){return(t=t._reactInternals)?io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),A=ks(t),s=SA(r,A);s.payload=e,n!=null&&(s.callback=n),e=Qs(t,s,A),e!==null&&(jr(e,t,A,r),qd(e,t,A))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),A=ks(t),s=SA(r,A);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qs(t,s,A),e!==null&&(jr(e,t,A,r),qd(e,t,A))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=ks(t),A=SA(n,r);A.tag=2,e!=null&&(A.callback=e),e=Qs(t,A,r),e!==null&&(jr(e,t,r,n),qd(e,t,r))}};function Cx(t,e,n,r,A,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!_c(n,r)||!_c(A,s):!0}function Qb(t,e,n){var r=!1,A=Vs,s=e.contextType;return typeof s=="object"&&s!==null?s=Fr(s):(A=rr(e)?Vi:Sn.current,r=e.contextTypes,s=(r=r!=null)?da(t,A):Vs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=s),e}function _x(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sf.enqueueReplaceState(e,e.state,null)}function Hm(t,e,n,r){var A=t.stateNode;A.props=n,A.state=t.memoizedState,A.refs={},Mw(t);var s=e.contextType;typeof s=="object"&&s!==null?A.context=Fr(s):(s=rr(e)?Vi:Sn.current,A.context=da(t,s)),A.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vm(t,e,s,n),A.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(e=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),e!==A.state&&Sf.enqueueReplaceState(A,A.state,null),kh(t,n,A,r),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function pa(t,e){try{var n="",r=e;do n+=vk(r),r=r.return;while(r);var A=n}catch(s){A=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:A,digest:null}}function mp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z2=typeof WeakMap=="function"?WeakMap:Map;function Sb(t,e,n){n=SA(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Lh||(Lh=!0,Zm=r),jm(t,e)},n}function kb(t,e,n){n=SA(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var A=e.value;n.payload=function(){return r(A)},n.callback=function(){jm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jm(t,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Ix(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z2;var A=new Set;r.set(e,A)}else A=r.get(e),A===void 0&&(A=new Set,r.set(e,A));A.has(n)||(A.add(n),t=iR.bind(null,t,e,n),e.then(t,t))}function Ex(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bx(t,e,n,r,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=SA(-1,1),e.tag=2,Qs(n,e,1))),n.lanes|=1),t)}var W2=GA.ReactCurrentOwner,Yn=!1;function Dn(t,e,n,r){e.child=t===null?ab(e,null,n,r):fa(e,t.child,n,r)}function Tx(t,e,n,r,A){n=n.render;var s=e.ref;return na(e,A),r=Gw(t,e,n,r,s,A),n=zw(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,OA(t,e,A)):(vt&&n&&kw(e),e.flags|=1,Dn(t,e,r,A),e.child)}function Fx(t,e,n,r,A){if(t===null){var s=n.type;return typeof s=="function"&&!nv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Rb(t,e,s,r,A)):(t=th(n.type,null,r,e,e.mode,A),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&A)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:_c,n(i,r)&&t.ref===e.ref)return OA(t,e,A)}return e.flags|=1,t=Rs(s,r),t.ref=e.ref,t.return=e,e.child=t}function Rb(t,e,n,r,A){if(t!==null){var s=t.memoizedProps;if(_c(s,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=s,(t.lanes&A)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,OA(t,e,A)}return Km(t,e,n,r,A)}function Nb(t,e,n){var r=e.pendingProps,A=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(qo,ar),ar|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(qo,ar),ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ut(qo,ar),ar|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ut(qo,ar),ar|=r;return Dn(t,e,A,n),e.child}function Pb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Km(t,e,n,r,A){var s=rr(n)?Vi:Sn.current;return s=da(e,s),na(e,A),n=Gw(t,e,n,r,s,A),r=zw(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,OA(t,e,A)):(vt&&r&&kw(e),e.flags|=1,Dn(t,e,n,A),e.child)}function Ux(t,e,n,r,A){if(rr(n)){var s=!0;Th(e)}else s=!1;if(na(e,A),e.stateNode===null)Yd(t,e),Qb(e,n,r),Hm(e,n,r,A),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fr(c):(c=rr(n)?Vi:Sn.current,c=da(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==c)&&_x(e,i,r,c),ds=!1;var f=e.memoizedState;i.state=f,kh(e,r,i,A),a=e.memoizedState,o!==r||f!==a||nr.current||ds?(typeof d=="function"&&(Vm(e,n,d,r),a=e.memoizedState),(o=ds||Cx(e,n,o,r,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,cb(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Or(e.type,o),i.props=c,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Fr(a):(a=rr(n)?Vi:Sn.current,a=da(e,a));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&_x(e,i,r,a),ds=!1,f=e.memoizedState,i.state=f,kh(e,r,i,A);var m=e.memoizedState;o!==h||f!==m||nr.current||ds?(typeof w=="function"&&(Vm(e,n,w,r),m=e.memoizedState),(c=ds||Cx(e,n,c,r,f,m,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,m,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,m,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),i.props=r,i.state=m,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Gm(t,e,n,r,s,A)}function Gm(t,e,n,r,A,s){Pb(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return A&&gx(e,n,!1),OA(t,e,s);r=e.stateNode,W2.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=fa(e,t.child,null,s),e.child=fa(e,null,o,s)):Dn(t,e,o,s),e.memoizedState=r.state,A&&gx(e,n,!0),e.child}function Db(t){var e=t.stateNode;e.pendingContext?fx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fx(t,e.context,!1),Vw(t,e.containerInfo)}function Qx(t,e,n,r,A){return ha(),Nw(A),e.flags|=256,Dn(t,e,n,r),e.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lb(t,e,n){var r=e.pendingProps,A=Ct.current,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(A&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),ut(Ct,A&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Nf(i,r,0,null),t=Ni(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wm(n),e.memoizedState=zm,t):qw(e,i));if(A=t.memoizedState,A!==null&&(o=A.dehydrated,o!==null))return $2(t,e,i,r,o,A,n);if(s){s=r.fallback,i=e.mode,A=t.child,o=A.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==A?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Rs(A,a),r.subtreeFlags=A.subtreeFlags&14680064),o!==null?s=Rs(o,s):(s=Ni(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?Wm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=zm,r}return s=t.child,t=s.sibling,r=Rs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qw(t,e){return e=Nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ld(t,e,n,r){return r!==null&&Nw(r),fa(e,t.child,null,n),t=qw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $2(t,e,n,r,A,s,i){if(n)return e.flags&256?(e.flags&=-257,r=mp(Error(Z(422))),ld(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,A=e.mode,r=Nf({mode:"visible",children:r.children},A,0,null),s=Ni(s,A,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fa(e,t.child,null,i),e.child.memoizedState=Wm(i),e.memoizedState=zm,s);if(!(e.mode&1))return ld(t,e,i,null);if(A.data==="$!"){if(r=A.nextSibling&&A.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Z(419)),r=mp(s,r,void 0),ld(t,e,i,r)}if(o=(i&t.childLanes)!==0,Yn||o){if(r=ln,r!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(r.suspendedLanes|i)?0:A,A!==0&&A!==s.retryLane&&(s.retryLane=A,LA(t,A),jr(r,t,A,-1))}return tv(),r=mp(Error(Z(421))),ld(t,e,i,r)}return A.data==="$?"?(e.flags|=128,e.child=t.child,e=oR.bind(null,t),A._reactRetry=e,null):(t=s.treeContext,ur=Us(A.nextSibling),hr=e,vt=!0,Vr=null,t!==null&&(yr[Br++]=EA,yr[Br++]=bA,yr[Br++]=Hi,EA=t.id,bA=t.overflow,Hi=e),e=qw(e,r.children),e.flags|=4096,e)}function Sx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mm(t.return,e,n)}function wp(t,e,n,r,A){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:A}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=A)}function Ob(t,e,n){var r=e.pendingProps,A=r.revealOrder,s=r.tail;if(Dn(t,e,r.children,n),r=Ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sx(t,n,e);else if(t.tag===19)Sx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ut(Ct,r),!(e.mode&1))e.memoizedState=null;else switch(A){case"forwards":for(n=e.child,A=null;n!==null;)t=n.alternate,t!==null&&Rh(t)===null&&(A=n),n=n.sibling;n=A,n===null?(A=e.child,e.child=null):(A=n.sibling,n.sibling=null),wp(e,!1,A,n,s);break;case"backwards":for(n=null,A=e.child,e.child=null;A!==null;){if(t=A.alternate,t!==null&&Rh(t)===null){e.child=A;break}t=A.sibling,A.sibling=n,n=A,A=t}wp(e,!0,n,null,s);break;case"together":wp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function OA(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function q2(t,e,n){switch(e.tag){case 3:Db(e),ha();break;case 5:ub(e);break;case 1:rr(e.type)&&Th(e);break;case 4:Vw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,A=e.memoizedProps.value;ut(Qh,r._currentValue),r._currentValue=A;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ut(Ct,Ct.current&1),e.flags|=128,null):n&e.child.childLanes?Lb(t,e,n):(ut(Ct,Ct.current&1),t=OA(t,e,n),t!==null?t.sibling:null);ut(Ct,Ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ob(t,e,n);e.flags|=128}if(A=e.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ut(Ct,Ct.current),r)break;return null;case 22:case 23:return e.lanes=0,Nb(t,e,n)}return OA(t,e,n)}var Mb,$m,Vb,Hb;Mb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};Vb=function(t,e,n,r){var A=t.memoizedProps;if(A!==r){t=e.stateNode,Fi(lA.current);var s=null;switch(n){case"input":A=pm(t,A),r=pm(t,r),s=[];break;case"select":A=bt({},A,{value:void 0}),r=bt({},r,{value:void 0}),s=[];break;case"textarea":A=vm(t,A),r=vm(t,r),s=[];break;default:typeof A.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eh)}Bm(n,r);var i;n=null;for(c in A)if(!r.hasOwnProperty(c)&&A.hasOwnProperty(c)&&A[c]!=null)if(c==="style"){var o=A[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(o=A!=null?A[c]:void 0,r.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ft("scroll",t),s||o===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Hb=function(t,e,n,r){n!==r&&(e.flags|=4)};function pl(t,e){if(!vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function En(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags&14680064,r|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags,r|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function J2(t,e,n){var r=e.pendingProps;switch(Rw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(e),null;case 1:return rr(e.type)&&bh(),En(e),null;case 3:return r=e.stateNode,ga(),pt(nr),pt(Sn),jw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(od(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vr!==null&&(n0(Vr),Vr=null))),$m(t,e),En(e),null;case 5:Hw(e);var A=Fi(Fc.current);if(n=e.type,t!==null&&e.stateNode!=null)Vb(t,e,n,r,A),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return En(e),null}if(t=Fi(lA.current),od(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yr]=e,r[bc]=s,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(A=0;A<kl.length;A++)ft(kl[A],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":VB(r,s),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ft("invalid",r);break;case"textarea":jB(r,s),ft("invalid",r)}Bm(n,s),A=null;for(var i in s)if(s.hasOwnProperty(i)){var o=s[i];i==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&id(r.textContent,o,t),A=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&id(r.textContent,o,t),A=["children",""+o]):mc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ft("scroll",r)}switch(n){case"input":Yu(r),HB(r,s,!0);break;case"textarea":Yu(r),KB(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Eh)}r=A,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Yr]=e,t[bc]=r,Mb(t,e,!1,!1),e.stateNode=t;e:{switch(i=xm(n,r),n){case"dialog":ft("cancel",t),ft("close",t),A=r;break;case"iframe":case"object":case"embed":ft("load",t),A=r;break;case"video":case"audio":for(A=0;A<kl.length;A++)ft(kl[A],t);A=r;break;case"source":ft("error",t),A=r;break;case"img":case"image":case"link":ft("error",t),ft("load",t),A=r;break;case"details":ft("toggle",t),A=r;break;case"input":VB(t,r),A=pm(t,r),ft("invalid",t);break;case"option":A=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},A=bt({},r,{value:void 0}),ft("invalid",t);break;case"textarea":jB(t,r),A=vm(t,r),ft("invalid",t);break;default:A=r}Bm(n,A),o=A;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?vE(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&mE(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&wc(t,a):typeof a=="number"&&wc(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mc.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ft("scroll",t):a!=null&&vw(t,s,a,i))}switch(n){case"input":Yu(t),HB(t,r,!1);break;case"textarea":Yu(t),KB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ms(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=Eh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return En(e),null;case 6:if(t&&e.stateNode!=null)Hb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Fi(Fc.current),Fi(lA.current),od(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yr]=e,(s=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:id(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&id(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yr]=e,e.stateNode=r}return En(e),null;case 13:if(pt(Ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&ur!==null&&e.mode&1&&!(e.flags&128))ib(),ha(),e.flags|=98560,s=!1;else if(s=od(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Yr]=e}else ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;En(e),s=!1}else Vr!==null&&(n0(Vr),Vr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ct.current&1?Zt===0&&(Zt=3):tv())),e.updateQueue!==null&&(e.flags|=4),En(e),null);case 4:return ga(),$m(t,e),t===null&&Ic(e.stateNode.containerInfo),En(e),null;case 10:return Lw(e.type._context),En(e),null;case 17:return rr(e.type)&&bh(),En(e),null;case 19:if(pt(Ct),s=e.memoizedState,s===null)return En(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)pl(s,!1);else{if(Zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Rh(t),i!==null){for(e.flags|=128,pl(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ut(Ct,Ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&Mt()>ma&&(e.flags|=128,r=!0,pl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rh(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!vt)return En(e),null}else 2*Mt()-s.renderingStartTime>ma&&n!==1073741824&&(e.flags|=128,r=!0,pl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Mt(),e.sibling=null,n=Ct.current,ut(Ct,r?n&1|2:n&1),e):(En(e),null);case 22:case 23:return ev(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ar&1073741824&&(En(e),e.subtreeFlags&6&&(e.flags|=8192)):En(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function X2(t,e){switch(Rw(e),e.tag){case 1:return rr(e.type)&&bh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),pt(nr),pt(Sn),jw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hw(e),null;case 13:if(pt(Ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));ha()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(Ct),null;case 4:return ga(),null;case 10:return Lw(e.type._context),null;case 22:case 23:return ev(),null;case 24:return null;default:return null}}var cd=!1,Qn=!1,Y2=typeof WeakSet=="function"?WeakSet:Set,Be=null;function $o(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ut(t,e,r)}else n.current=null}function qm(t,e,n){try{n()}catch(r){Ut(t,e,r)}}var kx=!1;function Z2(t,e){if(Sm=Ch,t=WE(),Sw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var A=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var w;h!==n||A!==0&&h.nodeType!==3||(o=i+A),h!==s||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)f=h,h=w;for(;;){if(h===t)break t;if(f===n&&++c===A&&(o=i),f===s&&++d===r&&(a=i),(w=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=w}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:t,selectionRange:n},Ch=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var C=m.memoizedProps,_=m.memoizedState,B=e.stateNode,y=B.getSnapshotBeforeUpdate(e.elementType===e.type?C:Or(e.type,C),_);B.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(R){Ut(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return m=kx,kx=!1,m}function ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var A=r=r.next;do{if((A.tag&t)===t){var s=A.destroy;A.destroy=void 0,s!==void 0&&qm(e,n,s)}A=A.next}while(A!==r)}}function kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jb(t){var e=t.alternate;e!==null&&(t.alternate=null,jb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yr],delete e[bc],delete e[Pm],delete e[N2],delete e[P2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kb(t){return t.tag===5||t.tag===3||t.tag===4}function Rx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eh));else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}var hn=null,Mr=!1;function As(t,e,n){for(n=n.child;n!==null;)Gb(t,e,n),n=n.sibling}function Gb(t,e,n){if(aA&&typeof aA.onCommitFiberUnmount=="function")try{aA.onCommitFiberUnmount(If,n)}catch{}switch(n.tag){case 5:Qn||$o(n,e);case 6:var r=hn,A=Mr;hn=null,As(t,e,n),hn=r,Mr=A,hn!==null&&(Mr?(t=hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hn.removeChild(n.stateNode));break;case 18:hn!==null&&(Mr?(t=hn,n=n.stateNode,t.nodeType===8?up(t.parentNode,n):t.nodeType===1&&up(t,n),xc(t)):up(hn,n.stateNode));break;case 4:r=hn,A=Mr,hn=n.stateNode.containerInfo,Mr=!0,As(t,e,n),hn=r,Mr=A;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){A=r=r.next;do{var s=A,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&qm(n,e,i),A=A.next}while(A!==r)}As(t,e,n);break;case 1:if(!Qn&&($o(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ut(n,e,o)}As(t,e,n);break;case 21:As(t,e,n);break;case 22:n.mode&1?(Qn=(r=Qn)||n.memoizedState!==null,As(t,e,n),Qn=r):As(t,e,n);break;default:As(t,e,n)}}function Nx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Y2),e.forEach(function(r){var A=aR.bind(null,t,r);n.has(r)||(n.add(r),r.then(A,A))})}}function Dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var A=n[r];try{var s=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:hn=o.stateNode,Mr=!1;break e;case 3:hn=o.stateNode.containerInfo,Mr=!0;break e;case 4:hn=o.stateNode.containerInfo,Mr=!0;break e}o=o.return}if(hn===null)throw Error(Z(160));Gb(s,i,A),hn=null,Mr=!1;var a=A.alternate;a!==null&&(a.return=null),A.return=null}catch(c){Ut(A,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zb(e,t),e=e.sibling}function zb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),qr(t),r&4){try{ec(3,t,t.return),kf(3,t)}catch(C){Ut(t,t.return,C)}try{ec(5,t,t.return)}catch(C){Ut(t,t.return,C)}}break;case 1:Dr(e,t),qr(t),r&512&&n!==null&&$o(n,n.return);break;case 5:if(Dr(e,t),qr(t),r&512&&n!==null&&$o(n,n.return),t.flags&32){var A=t.stateNode;try{wc(A,"")}catch(C){Ut(t,t.return,C)}}if(r&4&&(A=t.stateNode,A!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&fE(A,s),xm(o,i);var c=xm(o,s);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?vE(A,h):d==="dangerouslySetInnerHTML"?mE(A,h):d==="children"?wc(A,h):vw(A,d,h,c)}switch(o){case"input":mm(A,s);break;case"textarea":gE(A,s);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Yo(A,!!s.multiple,w,!1):f!==!!s.multiple&&(s.defaultValue!=null?Yo(A,!!s.multiple,s.defaultValue,!0):Yo(A,!!s.multiple,s.multiple?[]:"",!1))}A[bc]=s}catch(C){Ut(t,t.return,C)}}break;case 6:if(Dr(e,t),qr(t),r&4){if(t.stateNode===null)throw Error(Z(162));A=t.stateNode,s=t.memoizedProps;try{A.nodeValue=s}catch(C){Ut(t,t.return,C)}}break;case 3:if(Dr(e,t),qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xc(e.containerInfo)}catch(C){Ut(t,t.return,C)}break;case 4:Dr(e,t),qr(t);break;case 13:Dr(e,t),qr(t),A=t.child,A.flags&8192&&(s=A.memoizedState!==null,A.stateNode.isHidden=s,!s||A.alternate!==null&&A.alternate.memoizedState!==null||(Yw=Mt())),r&4&&Nx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Qn=(c=Qn)||d,Dr(e,t),Qn=c):Dr(e,t),qr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Be=t,d=t.child;d!==null;){for(h=Be=d;Be!==null;){switch(f=Be,w=f.child,f.tag){case 0:case 11:case 14:case 15:ec(4,f,f.return);break;case 1:$o(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(C){Ut(r,n,C)}}break;case 5:$o(f,f.return);break;case 22:if(f.memoizedState!==null){Dx(h);continue}}w!==null?(w.return=f,Be=w):Dx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{A=h.stateNode,c?(s=A.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=wE("display",i))}catch(C){Ut(t,t.return,C)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(C){Ut(t,t.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dr(e,t),qr(t),r&4&&Nx(t);break;case 21:break;default:Dr(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Kb(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var A=r.stateNode;r.flags&32&&(wc(A,""),r.flags&=-33);var s=Rx(t);Ym(t,s,A);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Rx(t);Xm(t,o,i);break;default:throw Error(Z(161))}}catch(a){Ut(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eR(t,e,n){Be=t,Wb(t)}function Wb(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var A=Be,s=A.child;if(A.tag===22&&r){var i=A.memoizedState!==null||cd;if(!i){var o=A.alternate,a=o!==null&&o.memoizedState!==null||Qn;o=cd;var c=Qn;if(cd=i,(Qn=a)&&!c)for(Be=A;Be!==null;)i=Be,a=i.child,i.tag===22&&i.memoizedState!==null?Lx(A):a!==null?(a.return=i,Be=a):Lx(A);for(;s!==null;)Be=s,Wb(s),s=s.sibling;Be=A,cd=o,Qn=c}Px(t)}else A.subtreeFlags&8772&&s!==null?(s.return=A,Be=s):Px(t)}}function Px(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qn||kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(n===null)r.componentDidMount();else{var A=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(A,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yx(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yx(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Qn||e.flags&512&&Jm(e)}catch(f){Ut(e,e.return,f)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Dx(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Lx(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kf(4,e)}catch(a){Ut(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var A=e.return;try{r.componentDidMount()}catch(a){Ut(e,A,a)}}var s=e.return;try{Jm(e)}catch(a){Ut(e,s,a)}break;case 5:var i=e.return;try{Jm(e)}catch(a){Ut(e,i,a)}}}catch(a){Ut(e,e.return,a)}if(e===t){Be=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Be=o;break}Be=e.return}}var tR=Math.ceil,Dh=GA.ReactCurrentDispatcher,Jw=GA.ReactCurrentOwner,br=GA.ReactCurrentBatchConfig,qe=0,ln=null,$t=null,wn=0,ar=0,qo=ti(0),Zt=0,kc=null,Ki=0,Rf=0,Xw=0,tc=null,Xn=null,Yw=0,ma=1/0,_A=null,Lh=!1,Zm=null,Ss=null,ud=!1,vs=null,Oh=0,nc=0,e0=null,Zd=-1,eh=0;function Mn(){return qe&6?Mt():Zd!==-1?Zd:Zd=Mt()}function ks(t){return t.mode&1?qe&2&&wn!==0?wn&-wn:L2.transition!==null?(eh===0&&(eh=QE()),eh):(t=it,t!==0||(t=window.event,t=t===void 0?16:LE(t.type)),t):1}function jr(t,e,n,r){if(50<nc)throw nc=0,e0=null,Error(Z(185));lu(t,n,r),(!(qe&2)||t!==ln)&&(t===ln&&(!(qe&2)&&(Rf|=n),Zt===4&&gs(t,wn)),Ar(t,r),n===1&&qe===0&&!(e.mode&1)&&(ma=Mt()+500,Uf&&ni()))}function Ar(t,e){var n=t.callbackNode;Lk(t,e);var r=xh(t,t===ln?wn:0);if(r===0)n!==null&&WB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WB(n),e===1)t.tag===0?D2(Ox.bind(null,t)):rb(Ox.bind(null,t)),k2(function(){!(qe&6)&&ni()}),n=null;else{switch(SE(r)){case 1:n=_w;break;case 4:n=FE;break;case 16:n=Bh;break;case 536870912:n=UE;break;default:n=Bh}n=tT(n,$b.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $b(t,e){if(Zd=-1,eh=0,qe&6)throw Error(Z(327));var n=t.callbackNode;if(ra()&&t.callbackNode!==n)return null;var r=xh(t,t===ln?wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mh(t,r);else{e=r;var A=qe;qe|=2;var s=Jb();(ln!==t||wn!==e)&&(_A=null,ma=Mt()+500,Ri(t,e));do try{AR();break}catch(o){qb(t,o)}while(!0);Dw(),Dh.current=s,qe=A,$t!==null?e=0:(ln=null,wn=0,e=Zt)}if(e!==0){if(e===2&&(A=bm(t),A!==0&&(r=A,e=t0(t,A))),e===1)throw n=kc,Ri(t,0),gs(t,r),Ar(t,Mt()),n;if(e===6)gs(t,r);else{if(A=t.current.alternate,!(r&30)&&!nR(A)&&(e=Mh(t,r),e===2&&(s=bm(t),s!==0&&(r=s,e=t0(t,s))),e===1))throw n=kc,Ri(t,0),gs(t,r),Ar(t,Mt()),n;switch(t.finishedWork=A,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:mi(t,Xn,_A);break;case 3:if(gs(t,r),(r&130023424)===r&&(e=Yw+500-Mt(),10<e)){if(xh(t,0)!==0)break;if(A=t.suspendedLanes,(A&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=Nm(mi.bind(null,t,Xn,_A),e);break}mi(t,Xn,_A);break;case 4:if(gs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,A=-1;0<r;){var i=31-Hr(r);s=1<<i,i=e[i],i>A&&(A=i),r&=~s}if(r=A,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tR(r/1960))-r,10<r){t.timeoutHandle=Nm(mi.bind(null,t,Xn,_A),r);break}mi(t,Xn,_A);break;case 5:mi(t,Xn,_A);break;default:throw Error(Z(329))}}}return Ar(t,Mt()),t.callbackNode===n?$b.bind(null,t):null}function t0(t,e){var n=tc;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=Mh(t,e),t!==2&&(e=Xn,Xn=n,e!==null&&n0(e)),t}function n0(t){Xn===null?Xn=t:Xn.push.apply(Xn,t)}function nR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var A=n[r],s=A.getSnapshot;A=A.value;try{if(!Gr(s(),A))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gs(t,e){for(e&=~Xw,e&=~Rf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hr(e),r=1<<n;t[n]=-1,e&=~r}}function Ox(t){if(qe&6)throw Error(Z(327));ra();var e=xh(t,0);if(!(e&1))return Ar(t,Mt()),null;var n=Mh(t,e);if(t.tag!==0&&n===2){var r=bm(t);r!==0&&(e=r,n=t0(t,r))}if(n===1)throw n=kc,Ri(t,0),gs(t,e),Ar(t,Mt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Xn,_A),Ar(t,Mt()),null}function Zw(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(ma=Mt()+500,Uf&&ni())}}function Gi(t){vs!==null&&vs.tag===0&&!(qe&6)&&ra();var e=qe;qe|=1;var n=br.transition,r=it;try{if(br.transition=null,it=1,t)return t()}finally{it=r,br.transition=n,qe=e,!(qe&6)&&ni()}}function ev(){ar=qo.current,pt(qo)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S2(n)),$t!==null)for(n=$t.return;n!==null;){var r=n;switch(Rw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:ga(),pt(nr),pt(Sn),jw();break;case 5:Hw(r);break;case 4:ga();break;case 13:pt(Ct);break;case 19:pt(Ct);break;case 10:Lw(r.type._context);break;case 22:case 23:ev()}n=n.return}if(ln=t,$t=t=Rs(t.current,null),wn=ar=e,Zt=0,kc=null,Xw=Rf=Ki=0,Xn=tc=null,Ti!==null){for(e=0;e<Ti.length;e++)if(n=Ti[e],r=n.interleaved,r!==null){n.interleaved=null;var A=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=A,r.next=i}n.pending=r}Ti=null}return t}function qb(t,e){do{var n=$t;try{if(Dw(),Jd.current=Ph,Nh){for(var r=_t.memoizedState;r!==null;){var A=r.queue;A!==null&&(A.pending=null),r=r.next}Nh=!1}if(ji=0,on=Xt=_t=null,Zl=!1,Uc=0,Jw.current=null,n===null||n.return===null){Zt=1,kc=e,$t=null;break}e:{var s=t,i=n.return,o=n,a=e;if(e=wn,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Ex(i);if(w!==null){w.flags&=-257,bx(w,i,o,s,e),w.mode&1&&Ix(s,c,e),e=w,a=c;var m=e.updateQueue;if(m===null){var C=new Set;C.add(a),e.updateQueue=C}else m.add(a);break e}else{if(!(e&1)){Ix(s,c,e),tv();break e}a=Error(Z(426))}}else if(vt&&o.mode&1){var _=Ex(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),bx(_,i,o,s,e),Nw(pa(a,o));break e}}s=a=pa(a,o),Zt!==4&&(Zt=2),tc===null?tc=[s]:tc.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var B=Sb(s,a,e);vx(s,B);break e;case 1:o=a;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ss===null||!Ss.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=kb(s,o,e);vx(s,R);break e}}s=s.return}while(s!==null)}Yb(n)}catch(S){e=S,$t===n&&n!==null&&($t=n=n.return);continue}break}while(!0)}function Jb(){var t=Dh.current;return Dh.current=Ph,t===null?Ph:t}function tv(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),ln===null||!(Ki&268435455)&&!(Rf&268435455)||gs(ln,wn)}function Mh(t,e){var n=qe;qe|=2;var r=Jb();(ln!==t||wn!==e)&&(_A=null,Ri(t,e));do try{rR();break}catch(A){qb(t,A)}while(!0);if(Dw(),qe=n,Dh.current=r,$t!==null)throw Error(Z(261));return ln=null,wn=0,Zt}function rR(){for(;$t!==null;)Xb($t)}function AR(){for(;$t!==null&&!Fk();)Xb($t)}function Xb(t){var e=eT(t.alternate,t,ar);t.memoizedProps=t.pendingProps,e===null?Yb(t):$t=e,Jw.current=null}function Yb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=X2(n,e),n!==null){n.flags&=32767,$t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zt=6,$t=null;return}}else if(n=J2(n,e,ar),n!==null){$t=n;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Zt===0&&(Zt=5)}function mi(t,e,n){var r=it,A=br.transition;try{br.transition=null,it=1,sR(t,e,n,r)}finally{br.transition=A,it=r}return null}function sR(t,e,n,r){do ra();while(vs!==null);if(qe&6)throw Error(Z(327));n=t.finishedWork;var A=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ok(t,s),t===ln&&($t=ln=null,wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ud||(ud=!0,tT(Bh,function(){return ra(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=br.transition,br.transition=null;var i=it;it=1;var o=qe;qe|=4,Jw.current=null,Z2(t,n),zb(n,t),I2(km),Ch=!!Sm,km=Sm=null,t.current=n,eR(n),Uk(),qe=o,it=i,br.transition=s}else t.current=n;if(ud&&(ud=!1,vs=t,Oh=A),s=t.pendingLanes,s===0&&(Ss=null),kk(n.stateNode),Ar(t,Mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)A=e[n],r(A.value,{componentStack:A.stack,digest:A.digest});if(Lh)throw Lh=!1,t=Zm,Zm=null,t;return Oh&1&&t.tag!==0&&ra(),s=t.pendingLanes,s&1?t===e0?nc++:(nc=0,e0=t):nc=0,ni(),null}function ra(){if(vs!==null){var t=SE(Oh),e=br.transition,n=it;try{if(br.transition=null,it=16>t?16:t,vs===null)var r=!1;else{if(t=vs,vs=null,Oh=0,qe&6)throw Error(Z(331));var A=qe;for(qe|=4,Be=t.current;Be!==null;){var s=Be,i=s.child;if(Be.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(Be=c;Be!==null;){var d=Be;switch(d.tag){case 0:case 11:case 15:ec(8,d,s)}var h=d.child;if(h!==null)h.return=d,Be=h;else for(;Be!==null;){d=Be;var f=d.sibling,w=d.return;if(jb(d),d===c){Be=null;break}if(f!==null){f.return=w,Be=f;break}Be=w}}}var m=s.alternate;if(m!==null){var C=m.child;if(C!==null){m.child=null;do{var _=C.sibling;C.sibling=null,C=_}while(C!==null)}}Be=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Be=i;else e:for(;Be!==null;){if(s=Be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ec(9,s,s.return)}var B=s.sibling;if(B!==null){B.return=s.return,Be=B;break e}Be=s.return}}var y=t.current;for(Be=y;Be!==null;){i=Be;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Be=v;else e:for(i=y;Be!==null;){if(o=Be,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:kf(9,o)}}catch(S){Ut(o,o.return,S)}if(o===i){Be=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,Be=R;break e}Be=o.return}}if(qe=A,ni(),aA&&typeof aA.onPostCommitFiberRoot=="function")try{aA.onPostCommitFiberRoot(If,t)}catch{}r=!0}return r}finally{it=n,br.transition=e}}return!1}function Mx(t,e,n){e=pa(n,e),e=Sb(t,e,1),t=Qs(t,e,1),e=Mn(),t!==null&&(lu(t,1,e),Ar(t,e))}function Ut(t,e,n){if(t.tag===3)Mx(t,t,n);else for(;e!==null;){if(e.tag===3){Mx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){t=pa(n,t),t=kb(e,t,1),e=Qs(e,t,1),t=Mn(),e!==null&&(lu(e,1,t),Ar(e,t));break}}e=e.return}}function iR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,ln===t&&(wn&n)===n&&(Zt===4||Zt===3&&(wn&130023424)===wn&&500>Mt()-Yw?Ri(t,0):Xw|=n),Ar(t,e)}function Zb(t,e){e===0&&(t.mode&1?(e=td,td<<=1,!(td&130023424)&&(td=4194304)):e=1);var n=Mn();t=LA(t,e),t!==null&&(lu(t,e,n),Ar(t,n))}function oR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zb(t,n)}function aR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,A=t.memoizedState;A!==null&&(n=A.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),Zb(t,n)}var eT;eT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nr.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,q2(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,vt&&e.flags&1048576&&Ab(e,Uh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yd(t,e),t=e.pendingProps;var A=da(e,Sn.current);na(e,n),A=Gw(null,e,r,t,A,n);var s=zw();return e.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(r)?(s=!0,Th(e)):s=!1,e.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Mw(e),A.updater=Sf,e.stateNode=A,A._reactInternals=e,Hm(e,r,t,n),e=Gm(null,e,r,!0,s,n)):(e.tag=0,vt&&s&&kw(e),Dn(null,e,A,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yd(t,e),t=e.pendingProps,A=r._init,r=A(r._payload),e.type=r,A=e.tag=cR(r),t=Or(r,t),A){case 0:e=Km(null,e,r,t,n);break e;case 1:e=Ux(null,e,r,t,n);break e;case 11:e=Tx(null,e,r,t,n);break e;case 14:e=Fx(null,e,r,Or(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Or(r,A),Km(t,e,r,A,n);case 1:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Or(r,A),Ux(t,e,r,A,n);case 3:e:{if(Db(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,A=s.element,cb(t,e),kh(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){A=pa(Error(Z(423)),e),e=Qx(t,e,r,n,A);break e}else if(r!==A){A=pa(Error(Z(424)),e),e=Qx(t,e,r,n,A);break e}else for(ur=Us(e.stateNode.containerInfo.firstChild),hr=e,vt=!0,Vr=null,n=ab(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ha(),r===A){e=OA(t,e,n);break e}Dn(t,e,r,n)}e=e.child}return e;case 5:return ub(e),t===null&&Om(e),r=e.type,A=e.pendingProps,s=t!==null?t.memoizedProps:null,i=A.children,Rm(r,A)?i=null:s!==null&&Rm(r,s)&&(e.flags|=32),Pb(t,e),Dn(t,e,i,n),e.child;case 6:return t===null&&Om(e),null;case 13:return Lb(t,e,n);case 4:return Vw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fa(e,null,r,n):Dn(t,e,r,n),e.child;case 11:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Or(r,A),Tx(t,e,r,A,n);case 7:return Dn(t,e,e.pendingProps,n),e.child;case 8:return Dn(t,e,e.pendingProps.children,n),e.child;case 12:return Dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,A=e.pendingProps,s=e.memoizedProps,i=A.value,ut(Qh,r._currentValue),r._currentValue=i,s!==null)if(Gr(s.value,i)){if(s.children===A.children&&!nr.current){e=OA(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){i=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=SA(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Mm(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Z(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Mm(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Dn(t,e,A.children,n),e=e.child}return e;case 9:return A=e.type,r=e.pendingProps.children,na(e,n),A=Fr(A),r=r(A),e.flags|=1,Dn(t,e,r,n),e.child;case 14:return r=e.type,A=Or(r,e.pendingProps),A=Or(r.type,A),Fx(t,e,r,A,n);case 15:return Rb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Or(r,A),Yd(t,e),e.tag=1,rr(r)?(t=!0,Th(e)):t=!1,na(e,n),Qb(e,r,A),Hm(e,r,A,n),Gm(null,e,r,!0,t,n);case 19:return Ob(t,e,n);case 22:return Nb(t,e,n)}throw Error(Z(156,e.tag))};function tT(t,e){return TE(t,e)}function lR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,e,n,r){return new lR(t,e,n,r)}function nv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cR(t){if(typeof t=="function")return nv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bw)return 11;if(t===xw)return 14}return 2}function Rs(t,e){var n=t.alternate;return n===null?(n=Cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function th(t,e,n,r,A,s){var i=2;if(r=t,typeof t=="function")nv(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Oo:return Ni(n.children,A,s,e);case yw:i=8,A|=8;break;case dm:return t=Cr(12,n,e,A|2),t.elementType=dm,t.lanes=s,t;case hm:return t=Cr(13,n,e,A),t.elementType=hm,t.lanes=s,t;case fm:return t=Cr(19,n,e,A),t.elementType=fm,t.lanes=s,t;case uE:return Nf(n,A,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lE:i=10;break e;case cE:i=9;break e;case Bw:i=11;break e;case xw:i=14;break e;case us:i=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Cr(i,n,e,A),e.elementType=t,e.type=r,e.lanes=s,e}function Ni(t,e,n,r){return t=Cr(7,t,r,e),t.lanes=n,t}function Nf(t,e,n,r){return t=Cr(22,t,r,e),t.elementType=uE,t.lanes=n,t.stateNode={isHidden:!1},t}function vp(t,e,n){return t=Cr(6,t,null,e),t.lanes=n,t}function yp(t,e,n){return e=Cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uR(t,e,n,r,A){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ep(0),this.expirationTimes=ep(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ep(0),this.identifierPrefix=r,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function rv(t,e,n,r,A,s,i,o,a){return t=new uR(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mw(s),t}function dR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nT(t){if(!t)return Vs;t=t._reactInternals;e:{if(io(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(rr(n))return nb(t,n,e)}return e}function rT(t,e,n,r,A,s,i,o,a){return t=rv(n,r,!0,t,A,s,i,o,a),t.context=nT(null),n=t.current,r=Mn(),A=ks(n),s=SA(r,A),s.callback=e??null,Qs(n,s,A),t.current.lanes=A,lu(t,A,r),Ar(t,r),t}function Pf(t,e,n,r){var A=e.current,s=Mn(),i=ks(A);return n=nT(n),e.context===null?e.context=n:e.pendingContext=n,e=SA(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qs(A,e,i),t!==null&&(jr(t,A,i,s),qd(t,A,i)),i}function Vh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Av(t,e){Vx(t,e),(t=t.alternate)&&Vx(t,e)}function hR(){return null}var AT=typeof reportError=="function"?reportError:function(t){console.error(t)};function sv(t){this._internalRoot=t}Df.prototype.render=sv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Pf(t,e,null,null)};Df.prototype.unmount=sv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gi(function(){Pf(null,t,null,null)}),e[DA]=null}};function Df(t){this._internalRoot=t}Df.prototype.unstable_scheduleHydration=function(t){if(t){var e=NE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fs.length&&e!==0&&e<fs[n].priority;n++);fs.splice(n,0,t),n===0&&DE(t)}};function iv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hx(){}function fR(t,e,n,r,A){if(A){if(typeof r=="function"){var s=r;r=function(){var c=Vh(i);s.call(c)}}var i=rT(e,r,t,0,null,!1,!1,"",Hx);return t._reactRootContainer=i,t[DA]=i.current,Ic(t.nodeType===8?t.parentNode:t),Gi(),i}for(;A=t.lastChild;)t.removeChild(A);if(typeof r=="function"){var o=r;r=function(){var c=Vh(a);o.call(c)}}var a=rv(t,0,!1,null,null,!1,!1,"",Hx);return t._reactRootContainer=a,t[DA]=a.current,Ic(t.nodeType===8?t.parentNode:t),Gi(function(){Pf(e,a,n,r)}),a}function Of(t,e,n,r,A){var s=n._reactRootContainer;if(s){var i=s;if(typeof A=="function"){var o=A;A=function(){var a=Vh(i);o.call(a)}}Pf(e,i,t,A)}else i=fR(n,e,t,A,r);return Vh(i)}kE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sl(e.pendingLanes);n!==0&&(Iw(e,n|1),Ar(e,Mt()),!(qe&6)&&(ma=Mt()+500,ni()))}break;case 13:Gi(function(){var r=LA(t,1);if(r!==null){var A=Mn();jr(r,t,1,A)}}),Av(t,1)}};Ew=function(t){if(t.tag===13){var e=LA(t,134217728);if(e!==null){var n=Mn();jr(e,t,134217728,n)}Av(t,134217728)}};RE=function(t){if(t.tag===13){var e=ks(t),n=LA(t,e);if(n!==null){var r=Mn();jr(n,t,e,r)}Av(t,e)}};NE=function(){return it};PE=function(t,e){var n=it;try{return it=t,e()}finally{it=n}};_m=function(t,e,n){switch(e){case"input":if(mm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var A=Ff(r);if(!A)throw Error(Z(90));hE(r),mm(r,A)}}}break;case"textarea":gE(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};xE=Zw;CE=Gi;var gR={usingClientEntryPoint:!1,Events:[uu,jo,Ff,yE,BE,Zw]},ml={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pR={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:GA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=EE(t),t===null?null:t.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||hR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{If=dd.inject(pR),aA=dd}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR;pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iv(e))throw Error(Z(200));return dR(t,e,null,n)};pr.createRoot=function(t,e){if(!iv(t))throw Error(Z(299));var n=!1,r="",A=AT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=rv(t,1,!1,null,null,n,!1,r,A),t[DA]=e.current,Ic(t.nodeType===8?t.parentNode:t),new sv(e)};pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=EE(e),t=t===null?null:t.stateNode,t};pr.flushSync=function(t){return Gi(t)};pr.hydrate=function(t,e,n){if(!Lf(e))throw Error(Z(200));return Of(null,t,e,!0,n)};pr.hydrateRoot=function(t,e,n){if(!iv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,A=!1,s="",i=AT;if(n!=null&&(n.unstable_strictMode===!0&&(A=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=rT(e,null,t,1,n??null,A,!1,s,i),t[DA]=e.current,Ic(t),r)for(t=0;t<r.length;t++)n=r[t],A=n._getVersion,A=A(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,A]:e.mutableSourceEagerHydrationData.push(n,A);return new Df(e)};pr.render=function(t,e,n){if(!Lf(e))throw Error(Z(200));return Of(null,t,e,!1,n)};pr.unmountComponentAtNode=function(t){if(!Lf(t))throw Error(Z(40));return t._reactRootContainer?(Gi(function(){Of(null,null,t,!1,function(){t._reactRootContainer=null,t[DA]=null})}),!0):!1};pr.unstable_batchedUpdates=Zw;pr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lf(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Of(t,e,n,!1,r)};pr.version="18.3.1-next-f1338f8080-20240426";function sT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sT)}catch(t){console.error(t)}}sT(),sE.exports=pr;var mR=sE.exports,jx=mR;cm.createRoot=jx.createRoot,cm.hydrateRoot=jx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(this,arguments)}var ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ys||(ys={}));const Kx="popstate";function wR(t){t===void 0&&(t={});function e(A,s){let{pathname:i="/",search:o="",hash:a=""}=oo(A.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),r0("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(A,s){let i=A.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=A.location.href,c=a.indexOf("#");o=c===-1?a:a.slice(0,c)}return o+"#"+(typeof s=="string"?s:Hh(s))}function r(A,s){Mf(A.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return yR(e,n,r,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vR(){return Math.random().toString(36).substr(2,8)}function Gx(t,e){return{usr:t.state,key:t.key,idx:e}}function r0(t,e,n,r){return n===void 0&&(n=null),Rc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oo(e):e,{state:n,key:e&&e.key||r||vR()})}function Hh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yR(t,e,n,r){r===void 0&&(r={});let{window:A=document.defaultView,v5Compat:s=!1}=r,i=A.history,o=ys.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Rc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=ys.Pop;let _=d(),B=_==null?null:_-c;c=_,a&&a({action:o,location:C.location,delta:B})}function f(_,B){o=ys.Push;let y=r0(C.location,_,B);n&&n(y,_),c=d()+1;let v=Gx(y,c),R=C.createHref(y);try{i.pushState(v,"",R)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;A.location.assign(R)}s&&a&&a({action:o,location:C.location,delta:1})}function w(_,B){o=ys.Replace;let y=r0(C.location,_,B);n&&n(y,_),c=d();let v=Gx(y,c),R=C.createHref(y);i.replaceState(v,"",R),s&&a&&a({action:o,location:C.location,delta:0})}function m(_){let B=A.location.origin!=="null"?A.location.origin:A.location.href,y=typeof _=="string"?_:Hh(_);return y=y.replace(/ $/,"%20"),It(B,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,B)}let C={get action(){return o},get location(){return t(A,i)},listen(_){if(a)throw new Error("A history only accepts one active listener");return A.addEventListener(Kx,h),a=_,()=>{A.removeEventListener(Kx,h),a=null}},createHref(_){return e(A,_)},createURL:m,encodeLocation(_){let B=m(_);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:f,replace:w,go(_){return i.go(_)}};return C}var zx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zx||(zx={}));function BR(t,e,n){return n===void 0&&(n="/"),xR(t,e,n)}function xR(t,e,n,r){let A=typeof e=="string"?oo(e):e,s=wa(A.pathname||"/",n);if(s==null)return null;let i=iT(t);CR(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let c=RR(s);o=SR(i[a],c)}return o}function iT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let A=(s,i,o)=>{let a={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};a.relativePath.startsWith("/")&&(It(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=Ns([r,a.relativePath]),d=n.concat(a);s.children&&s.children.length>0&&(It(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),iT(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:UR(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))A(s,i);else for(let a of oT(s.path))A(s,i,a)}),e}function oT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,A=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return A?[s,""]:[s];let i=oT(r.join("/")),o=[];return o.push(...i.map(a=>a===""?s:[s,a].join("/"))),A&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function CR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _R=/^:[\w-]+$/,IR=3,ER=2,bR=1,TR=10,FR=-2,Wx=t=>t==="*";function UR(t,e){let n=t.split("/"),r=n.length;return n.some(Wx)&&(r+=FR),e&&(r+=ER),n.filter(A=>!Wx(A)).reduce((A,s)=>A+(_R.test(s)?IR:s===""?bR:TR),r)}function QR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,A)=>r===e[A])?t[t.length-1]-e[e.length-1]:0}function SR(t,e,n){let{routesMeta:r}=t,A={},s="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=A0({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(A,h.params),i.push({params:A,pathname:Ns([s,h.pathname]),pathnameBase:OR(Ns([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Ns([s,h.pathnameBase]))}return i}function A0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kR(t.path,t.caseSensitive,t.end),A=e.match(n);if(!A)return null;let s=A[0],i=s.replace(/(.)\/+$/,"$1"),o=A.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:w}=d;if(f==="*"){let C=o[h]||"";i=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const m=o[h];return w&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function kR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],A="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),A+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?A+="\\/*$":t!==""&&t!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,e?void 0:"i"),r]}function RR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const NR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PR=t=>NR.test(t);function DR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:A=""}=typeof t=="string"?oo(t):t,s;if(n)if(PR(n))s=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Mf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?s=$x(n.substring(1),"/"):s=$x(n,e)}else s=e;return{pathname:s,search:MR(r),hash:VR(A)}}function $x(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(A=>{A===".."?n.length>1&&n.pop():A!=="."&&n.push(A)}),n.length>1?n.join("/"):"/"}function Bp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ov(t,e){let n=LR(t);return e?n.map((r,A)=>A===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function av(t,e,n,r){r===void 0&&(r=!1);let A;typeof t=="string"?A=oo(t):(A=Rc({},t),It(!A.pathname||!A.pathname.includes("?"),Bp("?","pathname","search",A)),It(!A.pathname||!A.pathname.includes("#"),Bp("#","pathname","hash",A)),It(!A.search||!A.search.includes("#"),Bp("#","search","hash",A)));let s=t===""||A.pathname==="",i=s?"/":A.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;A.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=DR(A,o),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const Ns=t=>t.join("/").replace(/\/\/+/g,"/"),OR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aT=["post","put","patch","delete"];new Set(aT);const jR=["get",...aT];new Set(jR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}const Vf=k.createContext(null),lT=k.createContext(null),zA=k.createContext(null),Hf=k.createContext(null),WA=k.createContext({outlet:null,matches:[],isDataRoute:!1}),cT=k.createContext(null);function KR(t,e){let{relative:n}=e===void 0?{}:e;Ma()||It(!1);let{basename:r,navigator:A}=k.useContext(zA),{hash:s,pathname:i,search:o}=jf(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:Ns([r,i])),A.createHref({pathname:a,search:o,hash:s})}function Ma(){return k.useContext(Hf)!=null}function ri(){return Ma()||It(!1),k.useContext(Hf).location}function uT(t){k.useContext(zA).static||k.useLayoutEffect(t)}function hu(){let{isDataRoute:t}=k.useContext(WA);return t?sN():GR()}function GR(){Ma()||It(!1);let t=k.useContext(Vf),{basename:e,future:n,navigator:r}=k.useContext(zA),{matches:A}=k.useContext(WA),{pathname:s}=ri(),i=JSON.stringify(ov(A,n.v7_relativeSplatPath)),o=k.useRef(!1);return uT(()=>{o.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=av(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ns([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,s,t])}const zR=k.createContext(null);function WR(t){let e=k.useContext(WA).outlet;return e&&k.createElement(zR.Provider,{value:t},e)}function jf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(zA),{matches:A}=k.useContext(WA),{pathname:s}=ri(),i=JSON.stringify(ov(A,r.v7_relativeSplatPath));return k.useMemo(()=>av(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function $R(t,e){return qR(t,e)}function qR(t,e,n,r){Ma()||It(!1);let{navigator:A}=k.useContext(zA),{matches:s}=k.useContext(WA),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=ri(),d;if(e){var h;let _=typeof e=="string"?oo(e):e;a==="/"||(h=_.pathname)!=null&&h.startsWith(a)||It(!1),d=_}else d=c;let f=d.pathname||"/",w=f;if(a!=="/"){let _=a.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let m=BR(t,{pathname:w}),C=eN(m&&m.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Ns([a,A.encodeLocation?A.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:Ns([a,A.encodeLocation?A.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&C?k.createElement(Hf.Provider,{value:{location:Nc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ys.Pop}},C):C}function JR(){let t=AN(),e=HR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:A},n):null,null)}const XR=k.createElement(JR,null);class YR extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(WA.Provider,{value:this.props.routeContext},k.createElement(cT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZR(t){let{routeContext:e,match:n,children:r}=t,A=k.useContext(Vf);return A&&A.static&&A.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(WA.Provider,{value:e},r)}function eN(t,e,n,r){var A;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(A=n)==null?void 0:A.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||It(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:w}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||m){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let w,m=!1,C=null,_=null;n&&(w=o&&h.route.id?o[h.route.id]:void 0,C=h.route.errorElement||XR,a&&(c<0&&f===0?(iN("route-fallback"),m=!0,_=null):c===f&&(m=!0,_=h.route.hydrateFallbackElement||null)));let B=e.concat(i.slice(0,f+1)),y=()=>{let v;return w?v=C:m?v=_:h.route.Component?v=k.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,k.createElement(ZR,{match:h,routeContext:{outlet:d,matches:B,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(YR,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:y(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):y()},null)}var dT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dT||{}),hT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hT||{});function tN(t){let e=k.useContext(Vf);return e||It(!1),e}function nN(t){let e=k.useContext(lT);return e||It(!1),e}function rN(t){let e=k.useContext(WA);return e||It(!1),e}function fT(t){let e=rN(),n=e.matches[e.matches.length-1];return n.route.id||It(!1),n.route.id}function AN(){var t;let e=k.useContext(cT),n=nN(),r=fT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sN(){let{router:t}=tN(dT.UseNavigateStable),e=fT(hT.UseNavigateStable),n=k.useRef(!1);return uT(()=>{n.current=!0}),k.useCallback(function(A,s){s===void 0&&(s={}),n.current&&(typeof A=="number"?t.navigate(A):t.navigate(A,Nc({fromRouteId:e},s)))},[t,e])}const qx={};function iN(t,e,n){qx[t]||(qx[t]=!0)}function oN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function jh(t){let{to:e,replace:n,state:r,relative:A}=t;Ma()||It(!1);let{future:s,static:i}=k.useContext(zA),{matches:o}=k.useContext(WA),{pathname:a}=ri(),c=hu(),d=av(e,ov(o,s.v7_relativeSplatPath),a,A==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:A}),[c,h,A,n,r]),null}function aN(t){return WR(t.context)}function wr(t){It(!1)}function lN(t){let{basename:e="/",children:n=null,location:r,navigationType:A=ys.Pop,navigator:s,static:i=!1,future:o}=t;Ma()&&It(!1);let a=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:a,navigator:s,static:i,future:Nc({v7_relativeSplatPath:!1},o)}),[a,o,s,i]);typeof r=="string"&&(r=oo(r));let{pathname:d="/",search:h="",hash:f="",state:w=null,key:m="default"}=r,C=k.useMemo(()=>{let _=wa(d,a);return _==null?null:{location:{pathname:_,search:h,hash:f,state:w,key:m},navigationType:A}},[a,d,h,f,w,m,A]);return C==null?null:k.createElement(zA.Provider,{value:c},k.createElement(Hf.Provider,{children:n,value:C}))}function cN(t){let{children:e,location:n}=t;return $R(s0(e),n)}new Promise(()=>{});function s0(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,A)=>{if(!k.isValidElement(r))return;let s=[...e,A];if(r.type===k.Fragment){n.push.apply(n,s0(r.props.children,s));return}r.type!==wr&&It(!1),!r.props.index||!r.props.children||It(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=s0(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(this,arguments)}function gT(t,e){if(t==null)return{};var n={},r=Object.keys(t),A,s;for(s=0;s<r.length;s++)A=r[s],!(e.indexOf(A)>=0)&&(n[A]=t[A]);return n}function uN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dN(t,e){return t.button===0&&(!e||e==="_self")&&!uN(t)}function i0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(A=>[n,A]):[[n,r]])},[]))}function hN(t,e){let n=i0(t);return e&&e.forEach((r,A)=>{n.has(A)||e.getAll(A).forEach(s=>{n.append(A,s)})}),n}const fN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pN="6";try{window.__reactRouterVersion=pN}catch{}const mN=k.createContext({isTransitioning:!1}),wN="startTransition",Jx=ik[wN];function vN(t){let{basename:e,children:n,future:r,window:A}=t,s=k.useRef();s.current==null&&(s.current=wR({window:A,v5Compat:!0}));let i=s.current,[o,a]=k.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=k.useCallback(h=>{c&&Jx?Jx(()=>a(h)):a(h)},[a,c]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.useEffect(()=>oN(r),[r]),k.createElement(lN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const yN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xN=k.forwardRef(function(e,n){let{onClick:r,relative:A,reloadDocument:s,replace:i,state:o,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=gT(e,fN),{basename:w}=k.useContext(zA),m,C=!1;if(typeof c=="string"&&BN.test(c)&&(m=c,yN))try{let v=new URL(window.location.href),R=c.startsWith("//")?new URL(v.protocol+c):new URL(c),S=wa(R.pathname,w);R.origin===v.origin&&S!=null?c=S+R.search+R.hash:C=!0}catch{}let _=KR(c,{relative:A}),B=IN(c,{replace:i,state:o,target:a,preventScrollReset:d,relative:A,viewTransition:h});function y(v){r&&r(v),v.defaultPrevented||B(v)}return k.createElement("a",Kh({},f,{href:m||_,onClick:C||s?r:y,ref:n,target:a}))}),CN=k.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:A=!1,className:s="",end:i=!1,style:o,to:a,viewTransition:c,children:d}=e,h=gT(e,gN),f=jf(a,{relative:h.relative}),w=ri(),m=k.useContext(lT),{navigator:C,basename:_}=k.useContext(zA),B=m!=null&&bN(f)&&c===!0,y=C.encodeLocation?C.encodeLocation(f).pathname:f.pathname,v=w.pathname,R=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;A||(v=v.toLowerCase(),R=R?R.toLowerCase():null,y=y.toLowerCase()),R&&_&&(R=wa(R,_)||R);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let N=v===y||!i&&v.startsWith(y)&&v.charAt(S)==="/",I=R!=null&&(R===y||!i&&R.startsWith(y)&&R.charAt(y.length)==="/"),x={isActive:N,isPending:I,isTransitioning:B},b=N?r:void 0,Q;typeof s=="function"?Q=s(x):Q=[s,N?"active":null,I?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(x):o;return k.createElement(xN,Kh({},h,{"aria-current":b,className:Q,ref:n,style:U,to:a,viewTransition:c}),typeof d=="function"?d(x):d)});var o0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(o0||(o0={}));var Xx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xx||(Xx={}));function _N(t){let e=k.useContext(Vf);return e||It(!1),e}function IN(t,e){let{target:n,replace:r,state:A,preventScrollReset:s,relative:i,viewTransition:o}=e===void 0?{}:e,a=hu(),c=ri(),d=jf(t,{relative:i});return k.useCallback(h=>{if(dN(h,n)){h.preventDefault();let f=r!==void 0?r:Hh(c)===Hh(d);a(t,{replace:f,state:A,preventScrollReset:s,relative:i,viewTransition:o})}},[c,a,d,r,A,n,t,s,i,o])}function EN(t){let e=k.useRef(i0(t)),n=k.useRef(!1),r=ri(),A=k.useMemo(()=>hN(r.search,n.current?null:e.current),[r.search]),s=hu(),i=k.useCallback((o,a)=>{const c=i0(typeof o=="function"?o(A):o);n.current=!0,s("?"+c,a)},[s,A]);return[A,i]}function bN(t,e){e===void 0&&(e={});let n=k.useContext(mN);n==null&&It(!1);let{basename:r}=_N(o0.useViewTransitionState),A=jf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=wa(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=wa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return A0(A.pathname,i)!=null||A0(A.pathname,s)!=null}var ce=(t=>(t.First="1 ",t.Second="2 ",t))(ce||{}),cr=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(cr||{});const Fn=["","","","",""],AA={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Yx=["","","/","","","",""," "],pT=[{shift:ce.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ce.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ce.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ce.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ce.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ce.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ce.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ce.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ce.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ce.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ce.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ce.Second,period:6,start:"18:50",end:"19:35",day:"default"}],zt={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ce.First,studentsCount:25},{id:"c2",name:"6",shift:ce.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],substitutions:[],bellSchedule:pT,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}};var Zx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let A=t.charCodeAt(r);A<128?e[n++]=A:A<2048?(e[n++]=A>>6|192,e[n++]=A&63|128):(A&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(A=65536+((A&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=A>>18|240,e[n++]=A>>12&63|128,e[n++]=A>>6&63|128,e[n++]=A&63|128):(e[n++]=A>>12|224,e[n++]=A>>6&63|128,e[n++]=A&63|128)}return e},TN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const A=t[n++];if(A<128)e[r++]=String.fromCharCode(A);else if(A>191&&A<224){const s=t[n++];e[r++]=String.fromCharCode((A&31)<<6|s&63)}else if(A>239&&A<365){const s=t[n++],i=t[n++],o=t[n++],a=((A&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],i=t[n++];e[r++]=String.fromCharCode((A&15)<<12|(s&63)<<6|i&63)}}return e.join("")},wT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let A=0;A<t.length;A+=3){const s=t[A],i=A+1<t.length,o=i?t[A+1]:0,a=A+2<t.length,c=a?t[A+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,w=c&63;a||(w=64,i||(f=64)),r.push(n[d],n[h],n[f],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let A=0;A<t.length;){const s=n[t.charAt(A++)],o=A<t.length?n[t.charAt(A)]:0;++A;const c=A<t.length?n[t.charAt(A)]:64;++A;const h=A<t.length?n[t.charAt(A)]:64;if(++A,s==null||o==null||c==null||h==null)throw new FN;const f=s<<2|o>>4;if(r.push(f),c!==64){const w=o<<4&240|c>>2;if(r.push(w),h!==64){const m=c<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UN=function(t){const e=mT(t);return wT.encodeByteArray(e,!0)},Gh=function(t){return UN(t).replace(/\./g,"")},vT=function(t){try{return wT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!QN(n)||(t[n]=zh(t[n],e[n]));return t}function QN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=()=>yT().__FIREBASE_DEFAULTS__,kN=()=>{if(typeof process>"u"||typeof Zx>"u")return;const t=Zx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vT(t[1]);return e&&JSON.parse(e)},lv=()=>{try{return SN()||kN()||RN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BT=()=>{var t;return(t=lv())===null||t===void 0?void 0:t.config},NN=t=>{var e;return(e=lv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",A=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:A,exp:A+3600,auth_time:A,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gh(JSON.stringify(n)),Gh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function cv(){var t;const e=(t=lv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ON(){return typeof window<"u"||xT()}function xT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function MN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _T(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IT(){return!cv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pc(){try{return typeof indexedDB=="object"}catch{return!1}}function VN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(r);A.onsuccess=()=>{A.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},A.onupgradeneeded=()=>{n=!1},A.onerror=()=>{var s;e(((s=A.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HN,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ao.prototype.create)}}class ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},A=`${this.service}/${e}`,s=this.errors[e],i=s?jN(s,r):"Error",o=`${this.serviceName}: ${i} (${A}).`;return new Vn(A,o,r)}}function jN(t,e){return t.replace(KN,(n,r)=>{const A=e[r];return A!=null?String(A):`<${r}?>`})}const KN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function GN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const A of n){if(!r.includes(A))return!1;const s=t[A],i=e[A];if(tC(s)&&tC(i)){if(!Dc(s,i))return!1}else if(s!==i)return!1}for(const A of r)if(!n.includes(A))return!1;return!0}function tC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(A=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[A,s]=r.split("=");e[decodeURIComponent(A)]=decodeURIComponent(s)}}),e}function Rl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ET(t,e){const n=new zN(t,e);return n.subscribe.bind(n)}class zN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let A;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WN(e,["next","error","complete"])?A=e:A={next:e,error:n,complete:r},A.next===void 0&&(A.next=xp),A.error===void 0&&(A.error=xp),A.complete===void 0&&(A.complete=xp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class dA{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:n});A&&r.resolve(A)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),A=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(A)return null;throw s}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JN(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:A});r.resolve(s)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(A)}return A}onInit(e,n){var r;const A=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(A))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(A,s);const i=this.instances.get(A);return i&&e(i,A),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const A of r)try{A(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qN(t){return t===wi?void 0:t}function JN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $N(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=[];var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const TT={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},XN=Ve.INFO,YN={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},ZN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),A=YN[e];if(A)console[A](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Kf=class{constructor(e){this.name=e,this._logLevel=XN,this._logHandler=ZN,this._userLogHandler=null,dv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}};function eP(t){dv.forEach(e=>{e.setLogLevel(t)})}function tP(t,e){for(const n of dv){let r=null;e&&e.level&&(r=TT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(A,s,...i)=>{const o=i.map(a=>{if(a==null)return null;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch{return null}}).filter(a=>a).join(" ");s>=(r??A.logLevel)&&t({level:Ve[s].toLowerCase(),message:o,args:i,type:A.name})}}}const nP=(t,e)=>e.some(n=>t instanceof n);let nC,rC;function rP(){return nC||(nC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AP(){return rC||(rC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FT=new WeakMap,a0=new WeakMap,UT=new WeakMap,Cp=new WeakMap,hv=new WeakMap;function sP(t){const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(Ps(t.result)),A()},i=()=>{r(t.error),A()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&FT.set(n,t)}).catch(()=>{}),hv.set(e,t),e}function iP(t){if(a0.has(t))return;const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),A()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),A()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});a0.set(t,e)}let l0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oP(t){l0=t(l0)}function aP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_p(this),e,...n);return UT.set(r,e.sort?e.sort():[e]),Ps(r)}:AP().includes(t)?function(...e){return t.apply(_p(this),e),Ps(FT.get(this))}:function(...e){return Ps(t.apply(_p(this),e))}}function lP(t){return typeof t=="function"?aP(t):(t instanceof IDBTransaction&&iP(t),nP(t,rP())?new Proxy(t,l0):t)}function Ps(t){if(t instanceof IDBRequest)return sP(t);if(Cp.has(t))return Cp.get(t);const e=lP(t);return e!==t&&(Cp.set(t,e),hv.set(e,t)),e}const _p=t=>hv.get(t);function cP(t,e,{blocked:n,upgrade:r,blocking:A,terminated:s}={}){const i=indexedDB.open(t,e),o=Ps(i);return r&&i.addEventListener("upgradeneeded",a=>{r(Ps(i.result),a.oldVersion,a.newVersion,Ps(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),A&&a.addEventListener("versionchange",c=>A(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const uP=["get","getKey","getAll","getAllKeys","count"],dP=["put","add","delete","clear"],Ip=new Map;function AC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ip.get(e))return Ip.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,A=dP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(A||uP.includes(n)))return;const s=async function(i,...o){const a=this.transaction(i,A?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),A&&a.done]))[0]};return Ip.set(e,s),s}oP(t=>({...t,get:(e,n,r)=>AC(e,n)||t.get(e,n,r),has:(e,n)=>!!AC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",c0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new Kf("@firebase/app"),gP="@firebase/app-compat",pP="@firebase/analytics-compat",mP="@firebase/analytics",wP="@firebase/app-check-compat",vP="@firebase/app-check",yP="@firebase/auth",BP="@firebase/auth-compat",xP="@firebase/database",CP="@firebase/data-connect",_P="@firebase/database-compat",IP="@firebase/functions",EP="@firebase/functions-compat",bP="@firebase/installations",TP="@firebase/installations-compat",FP="@firebase/messaging",UP="@firebase/messaging-compat",QP="@firebase/performance",SP="@firebase/performance-compat",kP="@firebase/remote-config",RP="@firebase/remote-config-compat",NP="@firebase/storage",PP="@firebase/storage-compat",DP="@firebase/firestore",LP="@firebase/vertexai-preview",OP="@firebase/firestore-compat",MP="firebase",VP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]",HP={[Wh]:"fire-core",[gP]:"fire-core-compat",[mP]:"fire-analytics",[pP]:"fire-analytics-compat",[vP]:"fire-app-check",[wP]:"fire-app-check-compat",[yP]:"fire-auth",[BP]:"fire-auth-compat",[xP]:"fire-rtdb",[CP]:"fire-data-connect",[_P]:"fire-rtdb-compat",[IP]:"fire-fn",[EP]:"fire-fn-compat",[bP]:"fire-iid",[TP]:"fire-iid-compat",[FP]:"fire-fcm",[UP]:"fire-fcm-compat",[QP]:"fire-perf",[SP]:"fire-perf-compat",[kP]:"fire-rc",[RP]:"fire-rc-compat",[NP]:"fire-gcs",[PP]:"fire-gcs-compat",[DP]:"fire-fst",[OP]:"fire-fst-compat",[LP]:"fire-vertex","fire-js":"fire-js",[MP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Map,va=new Map,ya=new Map;function Lc(t,e){try{t.container.addComponent(e)}catch(n){MA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function QT(t,e){t.container.addOrOverwriteComponent(e)}function Ks(t){const e=t.name;if(ya.has(e))return MA.debug(`There were multiple attempts to register component ${e}.`),!1;ya.set(e,t);for(const n of js.values())Lc(n,t);for(const n of va.values())Lc(n,t);return!0}function ST(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jP(t,e,n=Hs){ST(t,e).clearInstance(n)}function kT(t){return t.options!==void 0}function Qt(t){return t.settings!==void 0}function KP(){ya.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new ao("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RT=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP extends RT{constructor(e,n,r,A){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,i={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,i,A);else{const o=e;super(o.options,i,A)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Kr(Wh,c0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){gv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Tr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=VP;function fv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hs,automaticDataCollectionEnabled:!1},e),A=r.name;if(typeof A!="string"||!A)throw Tr.create("bad-app-name",{appName:String(A)});if(n||(n=BT()),!n)throw Tr.create("no-options");const s=js.get(A);if(s){if(Dc(n,s.options)&&Dc(r,s.config))return s;throw Tr.create("duplicate-app",{appName:A})}const i=new bT(A);for(const a of ya.values())i.addComponent(a);const o=new RT(n,r,i);return js.set(A,o),o}function WP(t,e){if(ON()&&!xT())throw Tr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;kT(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const A=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Tr.create("finalization-registry-not-supported",{});const s=""+A(JSON.stringify(r)),i=va.get(s);if(i)return i.incRefCount(e.releaseOnDeref),i;const o=new bT(s);for(const c of ya.values())o.addComponent(c);const a=new zP(n,e,s,o);return va.set(s,a),a}function $P(t=Hs){const e=js.get(t);if(!e&&t===Hs&&BT())return fv();if(!e)throw Tr.create("no-app",{appName:t});return e}function qP(){return Array.from(js.values())}async function gv(t){let e=!1;const n=t.name;js.has(n)?(e=!0,js.delete(n)):va.has(n)&&t.decRefCount()<=0&&(va.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Kr(t,e,n){var r;let A=(r=HP[t])!==null&&r!==void 0?r:t;n&&(A+=`-${n}`);const s=A.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${A}" with version "${e}":`];s&&o.push(`library name "${A}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),MA.warn(o.join(" "));return}Ks(new dA(`${A}-version`,()=>({library:A,version:e}),"VERSION"))}function NT(t,e){if(t!==null&&typeof t!="function")throw Tr.create("invalid-log-argument");tP(t,e)}function PT(t){eP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="firebase-heartbeat-database",XP=1,Oc="firebase-heartbeat-store";let Ep=null;function DT(){return Ep||(Ep=cP(JP,XP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),Ep}async function YP(t){try{const n=(await DT()).transaction(Oc),r=await n.objectStore(Oc).get(LT(t));return await n.done,r}catch(e){if(e instanceof Vn)MA.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});MA.warn(n.message)}}}async function sC(t,e){try{const r=(await DT()).transaction(Oc,"readwrite");await r.objectStore(Oc).put(e,LT(t)),await r.done}catch(n){if(n instanceof Vn)MA.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});MA.warn(r.message)}}}function LT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=1024,eD=30*24*60*60*1e3;class tD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const A=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=iC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:A}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=eD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){MA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iC(),{heartbeatsToSend:r,unsentEntries:A}=nD(this._heartbeatsCache.heartbeats),s=Gh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return MA.warn(n),""}}}function iC(){return new Date().toISOString().substring(0,10)}function nD(t,e=ZP){const n=[];let r=t.slice();for(const A of t){const s=n.find(i=>i.agent===A.agent);if(s){if(s.dates.push(A.date),oC(n)>e){s.dates.pop();break}}else if(n.push({agent:A.agent,dates:[A.date]}),oC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pc()?VN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return sC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return sC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}else return}}function oC(t){return Gh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){Ks(new dA("platform-logger",e=>new hP(e),"PRIVATE")),Ks(new dA("heartbeat",e=>new tD(e),"PRIVATE")),Kr(Wh,c0,t),Kr(Wh,c0,"esm2017"),Kr("fire-js","")}AD("");const sD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Vn,SDK_VERSION:Ai,_DEFAULT_ENTRY_NAME:Hs,_addComponent:Lc,_addOrOverwriteComponent:QT,_apps:js,_clearComponents:KP,_components:ya,_getProvider:ST,_isFirebaseApp:kT,_isFirebaseServerApp:Qt,_registerComponent:Ks,_removeServiceInstance:jP,_serverApps:va,deleteApp:gv,getApp:$P,getApps:qP,initializeApp:fv,initializeServerApp:WP,onLog:NT,registerVersion:Kr,setLogLevel:PT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this._delegate=e,this.firebase=n,Lc(e,new dA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),gv(this._delegate)))}_getService(e,n=Hs){var r;this._delegate.checkDestroyed();const A=this._delegate.container.getProvider(e);return!A.isInitialized()&&((r=A.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&A.initialize(),A.getImmediate({identifier:n})}_removeServiceInstance(e,n=Hs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Lc(this._delegate,e)}_addOrOverwriteComponent(e){QT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},aC=new ao("app-compat","Firebase",oD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){const e={},n={__esModule:!0,initializeApp:s,app:A,registerVersion:Kr,setLogLevel:PT,onLog:NT,apps:null,SDK_VERSION:Ai,INTERNAL:{registerComponent:o,removeApp:r,useAsService:a,modularAPIs:sD}};n.default=n,Object.defineProperty(n,"apps",{get:i});function r(c){delete e[c]}function A(c){if(c=c||Hs,!eC(e,c))throw aC.create("no-app",{appName:c});return e[c]}A.App=t;function s(c,d={}){const h=fv(c,d);if(eC(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function i(){return Object.keys(e).map(c=>e[c])}function o(c){const d=c.name,h=d.replace("-compat","");if(Ks(c)&&c.type==="PUBLIC"){const f=(w=A())=>{if(typeof w[h]!="function")throw aC.create("invalid-app-argument",{appName:d});return w[h]()};c.serviceProps!==void 0&&zh(f,c.serviceProps),n[h]=f,t.prototype[h]=function(...w){return this._getService.bind(this,d).apply(this,c.multipleInstances?w:[])}}return c.type==="PUBLIC"?n[h]:null}function a(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){const t=aD(iD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:OT,extendNamespace:e,createSubscribe:ET,ErrorFactory:ao,deepExtend:zh});function e(n){zh(t,n)}return t}const lD=OT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Kf("@firebase/app-compat"),cD="@firebase/app-compat",uD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){Kr(cD,uD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=yT();if(t.firebase!==void 0){lC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&lC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Zr=lD;dD();var hD="firebase",fD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr.registerVersion(hD,fD,"app-compat");var cC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,MT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function b(){}b.prototype=x.prototype,I.D=x.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(Q,U,D){for(var T=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)T[Te-2]=arguments[Te];return x.prototype[U].apply(Q,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(I,x,b){b||(b=0);var Q=Array(16);if(typeof x=="string")for(var U=0;16>U;++U)Q[U]=x.charCodeAt(b++)|x.charCodeAt(b++)<<8|x.charCodeAt(b++)<<16|x.charCodeAt(b++)<<24;else for(U=0;16>U;++U)Q[U]=x[b++]|x[b++]<<8|x[b++]<<16|x[b++]<<24;x=I.g[0],b=I.g[1],U=I.g[2];var D=I.g[3],T=x+(D^b&(U^D))+Q[0]+3614090360&4294967295;x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+Q[1]+3905402710&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+Q[2]+606105819&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+Q[3]+3250441966&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+Q[4]+4118548399&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+Q[5]+1200080426&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+Q[6]+2821735955&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+Q[7]+4249261313&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+Q[8]+1770035416&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+Q[9]+2336552879&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+Q[10]+4294925233&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+Q[11]+2304563134&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+Q[12]+1804603682&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+Q[13]+4254626195&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+Q[14]+2792965006&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+Q[15]+1236535329&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(U^D&(b^U))+Q[1]+4129170786&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+Q[6]+3225465664&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+Q[11]+643717713&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+Q[0]+3921069994&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+Q[5]+3593408605&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+Q[10]+38016083&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+Q[15]+3634488961&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+Q[4]+3889429448&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+Q[9]+568446438&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+Q[14]+3275163606&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+Q[3]+4107603335&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+Q[8]+1163531501&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+Q[13]+2850285829&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+Q[2]+4243563512&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+Q[7]+1735328473&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+Q[12]+2368359562&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(b^U^D)+Q[5]+4294588738&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+Q[8]+2272392833&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+Q[11]+1839030562&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+Q[14]+4259657740&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+Q[1]+2763975236&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+Q[4]+1272893353&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+Q[7]+4139469664&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+Q[10]+3200236656&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+Q[13]+681279174&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+Q[0]+3936430074&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+Q[3]+3572445317&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+Q[6]+76029189&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+Q[9]+3654602809&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+Q[12]+3873151461&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+Q[15]+530742520&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+Q[2]+3299628645&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(U^(b|~D))+Q[0]+4096336452&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+Q[7]+1126891415&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+Q[14]+2878612391&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+Q[5]+4237533241&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+Q[12]+1700485571&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+Q[3]+2399980690&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+Q[10]+4293915773&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+Q[1]+2240044497&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+Q[8]+1873313359&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+Q[15]+4264355552&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+Q[6]+2734768916&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+Q[13]+1309151649&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+Q[4]+4149444226&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+Q[11]+3174756917&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+Q[2]+718787259&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+Q[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(U+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var b=x-this.blockSize,Q=this.B,U=this.h,D=0;D<x;){if(U==0)for(;D<=b;)A(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<x;)if(Q[U++]=I.charCodeAt(D++),U==this.blockSize){A(this,Q),U=0;break}}else for(;D<x;)if(Q[U++]=I[D++],U==this.blockSize){A(this,Q),U=0;break}}this.h=U,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var b=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=b&255,b/=256;for(this.u(I),I=Array(16),x=b=0;4>x;++x)for(var Q=0;32>Q;Q+=8)I[b++]=this.g[x]>>>Q&255;return I};function s(I,x){var b=o;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=x(I)}function i(I,x){this.h=x;for(var b=[],Q=!0,U=I.length-1;0<=U;U--){var D=I[U]|0;Q&&D==x||(b[U]=D,Q=!1)}this.g=b}var o={};function a(I){return-128<=I&&128>I?s(I,function(x){return new i([x|0],0>x?-1:0)}):new i([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return _(c(-I));for(var x=[],b=1,Q=0;I>=b;Q++)x[Q]=I/b|0,b*=4294967296;return new i(x,0)}function d(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return _(d(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(x,8)),Q=h,U=0;U<I.length;U+=8){var D=Math.min(8,I.length-U),T=parseInt(I.substring(U,U+D),x);8>D?(D=c(Math.pow(x,D)),Q=Q.j(D).add(c(T))):(Q=Q.j(b),Q=Q.add(c(T)))}return Q}var h=a(0),f=a(1),w=a(16777216);t=i.prototype,t.m=function(){if(C(this))return-_(this).m();for(var I=0,x=1,b=0;b<this.g.length;b++){var Q=this.i(b);I+=(0<=Q?Q:4294967296+Q)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(m(this))return"0";if(C(this))return"-"+_(this).toString(I);for(var x=c(Math.pow(I,6)),b=this,Q="";;){var U=R(b,x).g;b=B(b,U.j(x));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=U,m(b))return D+Q;for(;6>D.length;)D="0"+D;Q=D+Q}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function m(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=B(this,I),C(I)?-1:m(I)?0:1};function _(I){for(var x=I.g.length,b=[],Q=0;Q<x;Q++)b[Q]=~I.g[Q];return new i(b,~I.h).add(f)}t.abs=function(){return C(this)?_(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],Q=0,U=0;U<=x;U++){var D=Q+(this.i(U)&65535)+(I.i(U)&65535),T=(D>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);Q=T>>>16,D&=65535,T&=65535,b[U]=T<<16|D}return new i(b,b[b.length-1]&-2147483648?-1:0)};function B(I,x){return I.add(_(x))}t.j=function(I){if(m(this)||m(I))return h;if(C(this))return C(I)?_(this).j(_(I)):_(_(this).j(I));if(C(I))return _(this.j(_(I)));if(0>this.l(w)&&0>I.l(w))return c(this.m()*I.m());for(var x=this.g.length+I.g.length,b=[],Q=0;Q<2*x;Q++)b[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var U=0;U<I.g.length;U++){var D=this.i(Q)>>>16,T=this.i(Q)&65535,Te=I.i(U)>>>16,et=I.i(U)&65535;b[2*Q+2*U]+=T*et,y(b,2*Q+2*U),b[2*Q+2*U+1]+=D*et,y(b,2*Q+2*U+1),b[2*Q+2*U+1]+=T*Te,y(b,2*Q+2*U+1),b[2*Q+2*U+2]+=D*Te,y(b,2*Q+2*U+2)}for(Q=0;Q<x;Q++)b[Q]=b[2*Q+1]<<16|b[2*Q];for(Q=x;Q<2*x;Q++)b[Q]=0;return new i(b,0)};function y(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function v(I,x){this.g=I,this.h=x}function R(I,x){if(m(x))throw Error("division by zero");if(m(I))return new v(h,h);if(C(I))return x=R(_(I),x),new v(_(x.g),_(x.h));if(C(x))return x=R(I,_(x)),new v(_(x.g),x.h);if(30<I.g.length){if(C(I)||C(x))throw Error("slowDivide_ only works with positive integers.");for(var b=f,Q=x;0>=Q.l(I);)b=S(b),Q=S(Q);var U=N(b,1),D=N(Q,1);for(Q=N(Q,2),b=N(b,2);!m(Q);){var T=D.add(Q);0>=T.l(I)&&(U=U.add(b),D=T),Q=N(Q,1),b=N(b,1)}return x=B(I,U.j(x)),new v(U,x)}for(U=h;0<=I.l(x);){for(b=Math.max(1,Math.floor(I.m()/x.m())),Q=Math.ceil(Math.log(b)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),D=c(b),T=D.j(x);C(T)||0<T.l(I);)b-=Q,D=c(b),T=D.j(x);m(D)&&(D=f),U=U.add(D),I=B(I,T)}return new v(U,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],Q=0;Q<x;Q++)b[Q]=this.i(Q)&I.i(Q);return new i(b,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],Q=0;Q<x;Q++)b[Q]=this.i(Q)|I.i(Q);return new i(b,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],Q=0;Q<x;Q++)b[Q]=this.i(Q)^I.i(Q);return new i(b,this.h^I.h)};function S(I){for(var x=I.g.length+1,b=[],Q=0;Q<x;Q++)b[Q]=I.i(Q)<<1|I.i(Q-1)>>>31;return new i(b,I.h)}function N(I,x){var b=x>>5;x%=32;for(var Q=I.g.length-b,U=[],D=0;D<Q;D++)U[D]=0<x?I.i(D+b)>>>x|I.i(D+b+1)<<32-x:I.i(D+b);return new i(U,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MT=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Pi=i}).apply(typeof cC<"u"?cC:typeof self<"u"?self:typeof window<"u"?window:{});var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VT,Nl,HT,nh,u0,jT,KT,GT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hd=="object"&&hd];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function A(u,g){if(g)e:{var p=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var O=u[E];if(!(O in p))break e;p=p[O]}u=u[u.length-1],E=p[u],g=g(E),g!=E&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var p=0,E=!1,O={next:function(){if(!E&&p<u.length){var K=p++;return{value:g(K,u[K]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}A("Array.prototype.values",function(u){return u||function(){return s(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),u.apply(g,O)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function w(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function m(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(E,O,K){for(var ie=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ie[lt-2]=arguments[lt];return g.prototype[O].apply(E,ie)}}function C(u){const g=u.length;if(0<g){const p=Array(g);for(let E=0;E<g;E++)p[E]=u[E];return p}return[]}function _(u,g){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(a(E)){const O=u.length||0,K=E.length||0;u.length=O+K;for(let ie=0;ie<K;ie++)u[O+ie]=E[ie]}else u.push(E)}}class B{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function y(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var S=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function N(u,g,p){for(const E in u)g.call(p,u[E],E,u)}function I(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function x(u){const g={};for(const p in u)g[p]=u[p];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,g){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)u[p]=E[p];for(let K=0;K<b.length;K++)p=b[K],Object.prototype.hasOwnProperty.call(E,p)&&(u[p]=E[p])}}function U(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function D(u){o.setTimeout(()=>{throw u},0)}function T(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Te{constructor(){this.h=this.g=null}add(g,p){const E=et.get();E.set(g,p),this.h?this.h.next=E:this.g=E,this.h=E}}var et=new B(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let be,z=!1,F=new Te,M=()=>{const u=o.Promise.resolve(void 0);be=()=>{u.then(H)}};var H=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){D(p)}var g=et;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};o.addEventListener("test",p,g),o.removeEventListener("test",p,g)}catch{}return u}();function le(u,g){if(G.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(S){e:{try{R(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ie[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&le.aa.h.call(this)}}m(le,G);var Ie={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),Re=0;function We(u,g,p,E,O){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!E,this.ha=O,this.key=++Re,this.da=this.fa=!1}function Se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pe(u){this.src=u,this.g={},this.h=0}Pe.prototype.add=function(u,g,p,E,O){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ie=Qe(u,g,E,O);return-1<ie?(g=u[ie],p||(g.fa=!1)):(g=new We(g,this.src,K,!!E,O),g.fa=p,u.push(g)),g};function Je(u,g){var p=g.type;if(p in u.g){var E=u.g[p],O=Array.prototype.indexOf.call(E,g,void 0),K;(K=0<=O)&&Array.prototype.splice.call(E,O,1),K&&(Se(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Qe(u,g,p,E){for(var O=0;O<u.length;++O){var K=u[O];if(!K.da&&K.listener==g&&K.capture==!!p&&K.ha==E)return O}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),Le={};function Pt(u,g,p,E,O){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Pt(u,g[K],p,E,O);return null}return p=me(p),u&&u[re]?u.K(g,p,c(E)?!!E.capture:!1,O):Wn(u,g,p,!1,E,O)}function Wn(u,g,p,E,O,K){if(!g)throw Error("Invalid event type");var ie=c(O)?!!O.capture:!!O,lt=$(u);if(lt||(u[ke]=lt=new Pe(u)),p=lt.add(g,p,E,ie,K),p.proxy)return p;if(E=nt(),p.proxy=E,E.src=u,E.listener=p,u.addEventListener)de||(O=ie),O===void 0&&(O=!1),u.addEventListener(g.toString(),E,O);else if(u.attachEvent)u.attachEvent(nn(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function nt(){function u(p){return g.call(u.src,u.listener,p)}const g=L;return u}function un(u,g,p,E,O){if(Array.isArray(g))for(var K=0;K<g.length;K++)un(u,g[K],p,E,O);else E=c(E)?!!E.capture:!!E,p=me(p),u&&u[re]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],p=Qe(K,p,E,O),-1<p&&(Se(K[p]),Array.prototype.splice.call(K,p,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=$(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Qe(g,p,E,O)),(p=-1<u?g[u]:null)&&Rn(p))}function Rn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[re])Je(g.i,u);else{var p=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(p,E,u.capture):g.detachEvent?g.detachEvent(nn(p),E):g.addListener&&g.removeListener&&g.removeListener(E),(p=$(g))?(Je(p,u),p.h==0&&(p.src=null,g[ke]=null)):Se(u)}}}function nn(u){return u in Le?Le[u]:Le[u]="on"+u}function L(u,g){if(u.da)u=!0;else{g=new le(g,this);var p=u.listener,E=u.ha||u.src;u.fa&&Rn(u),u=p.call(E,g)}return u}function $(u){return u=u[ke],u instanceof Pe?u:null}var ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(u){return typeof u=="function"?u:(u[ne]||(u[ne]=function(g){return u.handleEvent(g)}),u[ne])}function we(){W.call(this),this.i=new Pe(this),this.M=this,this.F=null}m(we,W),we.prototype[re]=!0,we.prototype.removeEventListener=function(u,g,p,E){un(this,u,g,p,E)};function fe(u,g){var p,E=u.F;if(E)for(p=[];E;E=E.F)p.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new G(g,u);else if(g instanceof G)g.target=g.target||u;else{var O=g;g=new G(E,u),Q(g,O)}if(O=!0,p)for(var K=p.length-1;0<=K;K--){var ie=g.g=p[K];O=se(ie,E,!0,g)&&O}if(ie=g.g=u,O=se(ie,E,!0,g)&&O,O=se(ie,E,!1,g)&&O,p)for(K=0;K<p.length;K++)ie=g.g=p[K],O=se(ie,E,!1,g)&&O}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],E=0;E<p.length;E++)Se(p[E]);delete u.g[g],u.h--}}this.F=null},we.prototype.K=function(u,g,p,E){return this.i.add(String(u),g,!1,p,E)},we.prototype.L=function(u,g,p,E){return this.i.add(String(u),g,!0,p,E)};function se(u,g,p,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,K=0;K<g.length;++K){var ie=g[K];if(ie&&!ie.da&&ie.capture==p){var lt=ie.listener,dn=ie.ha||ie.src;ie.fa&&Je(u.i,ie),O=lt.call(dn,E)!==!1&&O}}return O&&!E.defaultPrevented}function Fe(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function Ce(u){u.g=Fe(()=>{u.g=null,u.i&&(u.i=!1,Ce(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class xe extends W{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(u){W.call(this),this.h=u,this.g={}}m(Me,W);var rt=[];function Xe(u){N(u.g,function(g,p){this.g.hasOwnProperty(p)&&Rn(g)},u),u.g={}}Me.prototype.N=function(){Me.aa.N.call(this),Xe(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,$r=o.JSON.parse,Sr=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function kr(){}kr.prototype.h=null;function Rr(u){return u.h||(u.h=u.i())}function Dt(){}var xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){G.call(this,"d")}m(Nn,G);function P(){G.call(this,"c")}m(P,G);var Y={},ye=null;function Ae(){return ye=ye||new we}Y.La="serverreachability";function oe(u){G.call(this,Y.La,u)}m(oe,G);function ge(u){const g=Ae();fe(g,new oe(g))}Y.STAT_EVENT="statevent";function At(u,g){G.call(this,Y.STAT_EVENT,u),this.stat=g}m(At,G);function $e(u){const g=Ae();fe(g,new At(g,u))}Y.Ma="timingevent";function qt(u,g){G.call(this,Y.Ma,u),this.size=g}m(qt,G);function Nr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function rn(){this.g=!0}rn.prototype.xa=function(){this.g=!1};function qy(u,g,p,E,O,K){u.info(function(){if(u.g)if(K)for(var ie="",lt=K.split("&"),dn=0;dn<lt.length;dn++){var Ye=lt[dn].split("=");if(1<Ye.length){var Cn=Ye[0];Ye=Ye[1];var _n=Cn.split("_");ie=2<=_n.length&&_n[1]=="type"?ie+(Cn+"="+Ye+"&"):ie+(Cn+"=redacted&")}}else ie=null;else ie=K;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+g+`
`+p+`
`+ie})}function Pg(u,g,p,E,O,K,ie){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+g+`
`+p+`
`+K+" "+ie})}function es(u,g,p,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+_S(u,p)+(E?" "+E:"")})}function vA(u,g){u.info(function(){return"TIMEOUT: "+g})}rn.prototype.info=function(){};function _S(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var E=p[u];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var K=O[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ie=1;ie<O.length;ie++)O[ie]=""}}}}return Oe(p)}catch{return g}}var Pu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dg;function Du(){}m(Du,kr),Du.prototype.g=function(){return new XMLHttpRequest},Du.prototype.i=function(){return{}},Dg=new Du;function ts(u,g,p,E){this.j=u,this.i=g,this.l=p,this.R=E||1,this.U=new Me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var Yy={},Lg={};function Og(u,g,p){u.L=1,u.v=Vu(yA(g)),u.m=p,u.P=!0,Zy(u,null)}function Zy(u,g){u.F=Date.now(),Lu(u),u.A=yA(u.v);var p=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),hB(p.i,"t",E),u.C=0,p=u.j.J,u.h=new Xy,u.g=QB(u.j,p?g:null,!u.m),0<u.O&&(u.M=new xe(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,E=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(rt[0]=O.toString()),O=rt);for(var K=0;K<O.length;K++){var ie=Pt(p,O[K],E||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ge(),qy(u.i,u.u,u.A,u.l,u.R,u.m)}ts.prototype.ca=function(u){u=u.target;const g=this.M;g&&BA(u)==3?g.j():this.Y(u)},ts.prototype.Y=function(u){try{if(u==this.g)e:{const _n=BA(this.g);var g=this.g.Ba();const wo=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||yB(this.g)))){this.J||_n!=4||g==7||(g==8||0>=wo?ge(3):ge(2)),Mg(this);var p=this.g.Z();this.X=p;t:if(eB(this)){var E=yB(this.g);u="";var O=E.length,K=BA(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),nl(this);var ie="";break t}this.h.i=new o.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(K&&g==O-1)});E.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=p==200,Pg(this.i,this.u,this.A,this.l,this.R,_n,p),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,dn=this.g;if((lt=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(lt)){var Ye=lt;break t}}Ye=null}if(p=Ye)es(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vg(this,p);else{this.o=!1,this.s=3,$e(12),ci(this),nl(this);break e}}if(this.P){p=!0;let Pr;for(;!this.J&&this.C<ie.length;)if(Pr=IS(this,ie),Pr==Lg){_n==4&&(this.s=4,$e(14),p=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==Yy){this.s=4,$e(15),es(this.i,this.l,ie,"[Invalid Chunk]"),p=!1;break}else es(this.i,this.l,Pr,null),Vg(this,Pr);if(eB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||ie.length!=0||this.h.h||(this.s=1,$e(16),p=!1),this.o=this.o&&p,!p)es(this.i,this.l,ie,"[Invalid Chunked Response]"),ci(this),nl(this);else if(0<ie.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Wg(Cn),Cn.M=!0,$e(11))}}else es(this.i,this.l,ie,null),Vg(this,ie);_n==4&&ci(this),this.o&&!this.J&&(_n==4?bB(this.j,this):(this.o=!1,Lu(this)))}else HS(this.g),p==400&&0<ie.indexOf("Unknown SID")?(this.s=3,$e(12)):(this.s=0,$e(13)),ci(this),nl(this)}}}catch{}finally{}};function eB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function IS(u,g){var p=u.C,E=g.indexOf(`
`,p);return E==-1?Lg:(p=Number(g.substring(p,E)),isNaN(p)?Yy:(E+=1,E+p>g.length?Lg:(g=g.slice(E,E+p),u.C=E+p,g)))}ts.prototype.cancel=function(){this.J=!0,ci(this)};function Lu(u){u.S=Date.now()+u.I,tB(u,u.I)}function tB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Nr(f(u.ba,u),g)}function Mg(u){u.B&&(o.clearTimeout(u.B),u.B=null)}ts.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(vA(this.i,this.A),this.L!=2&&(ge(),$e(17)),ci(this),this.s=2,nl(this)):tB(this,this.S-u)};function nl(u){u.j.G==0||u.J||bB(u.j,u)}function ci(u){Mg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Xe(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Vg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||Hg(p.h,u))){if(!u.K&&Hg(p.h,u)&&p.G==3){try{var E=p.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Wu(p),Gu(p);else break e;zg(p),$e(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Nr(f(p.Za,p),6e3));if(1>=AB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else di(p,11)}else if((u.K||p.g==u)&&Wu(p),!y(g))for(O=p.Da.g.parse(g),g=0;g<O.length;g++){let Ye=O[g];if(p.T=Ye[0],Ye=Ye[1],p.G==2)if(Ye[0]=="c"){p.K=Ye[1],p.ia=Ye[2];const Cn=Ye[3];Cn!=null&&(p.la=Cn,p.j.info("VER="+p.la));const _n=Ye[4];_n!=null&&(p.Aa=_n,p.j.info("SVER="+p.Aa));const wo=Ye[5];wo!=null&&typeof wo=="number"&&0<wo&&(E=1.5*wo,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Pr=u.g;if(Pr){const qu=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qu){var K=E.h;K.g||qu.indexOf("spdy")==-1&&qu.indexOf("quic")==-1&&qu.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(jg(K,K.h),K.h=null))}if(E.D){const $g=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;$g&&(E.ya=$g,ht(E.I,E.D,$g))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var ie=u;if(E.qa=UB(E,E.J?E.ia:null,E.W),ie.K){sB(E.h,ie);var lt=ie,dn=E.L;dn&&(lt.I=dn),lt.B&&(Mg(lt),Lu(lt)),E.g=ie}else IB(E);0<p.i.length&&zu(p)}else Ye[0]!="stop"&&Ye[0]!="close"||di(p,7);else p.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?di(p,7):Gg(p):Ye[0]!="noop"&&p.l&&p.l.ta(Ye),p.v=0)}}ge(4)}catch{}}var ES=class{constructor(u,g){this.g=u,this.map=g}};function nB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function AB(u){return u.h?1:u.g?u.g.size:0}function Hg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function jg(u,g){u.g?u.g.add(g):u.h=g}function sB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}nB.prototype.cancel=function(){if(this.i=iB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function iB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return C(u.i)}function bS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],p=u.length,E=0;E<p;E++)g.push(u[E]);return g}g=[],p=0;for(E in u)g[p++]=u[E];return g}function TS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const E in u)g[p++]=E;return g}}}function oB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=TS(u),E=bS(u),O=E.length,K=0;K<O;K++)g.call(void 0,E[K],p&&p[K],u)}var aB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FS(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var E=u[p].indexOf("="),O=null;if(0<=E){var K=u[p].substring(0,E);O=u[p].substring(E+1)}else K=u[p];g(K,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ui(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ui){this.h=u.h,Ou(this,u.j),this.o=u.o,this.g=u.g,Mu(this,u.s),this.l=u.l;var g=u.i,p=new sl;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),lB(this,p),this.m=u.m}else u&&(g=String(u).match(aB))?(this.h=!1,Ou(this,g[1]||"",!0),this.o=rl(g[2]||""),this.g=rl(g[3]||"",!0),Mu(this,g[4]),this.l=rl(g[5]||"",!0),lB(this,g[6]||"",!0),this.m=rl(g[7]||"")):(this.h=!1,this.i=new sl(null,this.h))}ui.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Al(g,cB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Al(g,cB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Al(p,p.charAt(0)=="/"?SS:QS,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Al(p,RS)),u.join("")};function yA(u){return new ui(u)}function Ou(u,g,p){u.j=p?rl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Mu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function lB(u,g,p){g instanceof sl?(u.i=g,NS(u.i,u.h)):(p||(g=Al(g,kS)),u.i=new sl(g,u.h))}function ht(u,g,p){u.i.set(g,p)}function Vu(u){return ht(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function rl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Al(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,US),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function US(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var cB=/[#\/\?@]/g,QS=/[#\?:]/g,SS=/[#\?]/g,kS=/[#\?@]/g,RS=/#/g;function sl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ns(u){u.g||(u.g=new Map,u.h=0,u.i&&FS(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=sl.prototype,t.add=function(u,g){ns(this),this.i=null,u=po(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function uB(u,g){ns(u),g=po(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function dB(u,g){return ns(u),g=po(u,g),u.g.has(g)}t.forEach=function(u,g){ns(this),this.g.forEach(function(p,E){p.forEach(function(O){u.call(g,O,E,this)},this)},this)},t.na=function(){ns(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let E=0;E<g.length;E++){const O=u[E];for(let K=0;K<O.length;K++)p.push(g[E])}return p},t.V=function(u){ns(this);let g=[];if(typeof u=="string")dB(this,u)&&(g=g.concat(this.g.get(po(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return ns(this),this.i=null,u=po(this,u),dB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function hB(u,g,p){uB(u,g),0<p.length&&(u.i=null,u.g.set(po(u,g),C(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var E=g[p];const K=encodeURIComponent(String(E)),ie=this.V(E);for(E=0;E<ie.length;E++){var O=K;ie[E]!==""&&(O+="="+encodeURIComponent(String(ie[E]))),u.push(O)}}return this.i=u.join("&")};function po(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function NS(u,g){g&&!u.j&&(ns(u),u.i=null,u.g.forEach(function(p,E){var O=E.toLowerCase();E!=O&&(uB(this,E),hB(this,O,p))},u)),u.j=g}function PS(u,g){const p=new rn;if(o.Image){const E=new Image;E.onload=w(rs,p,"TestLoadImage: loaded",!0,g,E),E.onerror=w(rs,p,"TestLoadImage: error",!1,g,E),E.onabort=w(rs,p,"TestLoadImage: abort",!1,g,E),E.ontimeout=w(rs,p,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function DS(u,g){const p=new rn,E=new AbortController,O=setTimeout(()=>{E.abort(),rs(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(K=>{clearTimeout(O),K.ok?rs(p,"TestPingServer: ok",!0,g):rs(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),rs(p,"TestPingServer: error",!1,g)})}function rs(u,g,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function LS(){this.g=new Sr}function OS(u,g,p){const E=p||"";try{oB(u,function(O,K){let ie=O;c(O)&&(ie=Oe(O)),g.push(E+K+"="+encodeURIComponent(ie))})}catch(O){throw g.push(E+"type="+encodeURIComponent("_badmap")),O}}function Hu(u){this.l=u.Ub||null,this.j=u.eb||!1}m(Hu,kr),Hu.prototype.g=function(){return new ju(this.l,this.j)},Hu.prototype.i=function(u){return function(){return u}}({});function ju(u,g){we.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(ju,we),t=ju.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,ol(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,il(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function fB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?il(this):ol(this),this.readyState==3&&fB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,il(this))},t.Qa=function(u){this.g&&(this.response=u,il(this))},t.ga=function(){this.g&&il(this)};function il(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ol(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function ol(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ju.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gB(u){let g="";return N(u,function(p,E){g+=E,g+=":",g+=p,g+=`\r
`}),g}function Kg(u,g,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=gB(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):ht(u,g,p))}function Ft(u){we.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ft,we);var MS=/^https?$/i,VS=["POST","PUT"];t=Ft.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dg.g(),this.v=this.o?Rr(this.o):Rr(Dg),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){pB(this,K);return}if(u=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const K of E.keys())p.set(K,E.get(K));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(K=>K.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(VS,g,void 0))||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ie]of p)this.g.setRequestHeader(K,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vB(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){pB(this,K)}};function pB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,mB(u),Ku(u)}function mB(u){u.A||(u.A=!0,fe(u,"complete"),fe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,fe(this,"complete"),fe(this,"abort"),Ku(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ku(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wB(this):this.bb())},t.bb=function(){wB(this)};function wB(u){if(u.h&&typeof i<"u"&&(!u.v[1]||BA(u)!=4||u.Z()!=2)){if(u.u&&BA(u)==4)Fe(u.Ea,0,u);else if(fe(u,"readystatechange"),BA(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var E;if(E=ie===0){var O=String(u.D).match(aB)[1]||null;!O&&o.self&&o.self.location&&(O=o.self.location.protocol.slice(0,-1)),E=!MS.test(O?O.toLowerCase():"")}p=E}if(p)fe(u,"complete"),fe(u,"success");else{u.m=6;try{var K=2<BA(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",mB(u)}}finally{Ku(u)}}}}function Ku(u,g){if(u.g){vB(u);const p=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||fe(u,"ready");try{p.onreadystatechange=E}catch{}}}function vB(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function BA(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<BA(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),$r(g)}};function yB(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HS(u){const g={};u=(u.g&&2<=BA(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(y(u[E]))continue;var p=U(u[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const K=g[O]||[];g[O]=K,K.push(p)}I(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function al(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function BB(u){this.Aa=0,this.i=[],this.j=new rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=al("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=al("baseRetryDelayMs",5e3,u),this.cb=al("retryDelaySeedMs",1e4,u),this.Wa=al("forwardChannelMaxRetries",2,u),this.wa=al("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new nB(u&&u.concurrentRequestLimit),this.Da=new LS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=BB.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,E){$e(0),this.W=u,this.H=g||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=UB(this,null,this.W),zu(this)};function Gg(u){if(xB(u),u.G==3){var g=u.U++,p=yA(u.I);if(ht(p,"SID",u.K),ht(p,"RID",g),ht(p,"TYPE","terminate"),ll(u,p),g=new ts(u,u.j,g),g.L=2,g.v=Vu(yA(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&o.Image&&(new Image().src=g.v,p=!0),p||(g.g=QB(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Lu(g)}FB(u)}function Gu(u){u.g&&(Wg(u),u.g.cancel(),u.g=null)}function xB(u){Gu(u),u.u&&(o.clearTimeout(u.u),u.u=null),Wu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function zu(u){if(!rB(u.h)&&!u.s){u.s=!0;var g=u.Ga;be||M(),z||(be(),z=!0),F.add(g,u),u.B=0}}function jS(u,g){return AB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Nr(f(u.Ga,u,g),TB(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new ts(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),Q(K,this.S)):K=this.S),this.m!==null||this.O||(O.H=K,K=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=_B(this,O,g),p=yA(this.I),ht(p,"RID",u),ht(p,"CVER",22),this.D&&ht(p,"X-HTTP-Session-Id",this.D),ll(this,p),K&&(this.O?g="headers="+encodeURIComponent(String(gB(K)))+"&"+g:this.m&&Kg(p,this.m,K)),jg(this.h,O),this.Ua&&ht(p,"TYPE","init"),this.P?(ht(p,"$req",g),ht(p,"SID","null"),O.T=!0,Og(O,p,null)):Og(O,p,g),this.G=2}}else this.G==3&&(u?CB(this,u):this.i.length==0||rB(this.h)||CB(this))};function CB(u,g){var p;g?p=g.l:p=u.U++;const E=yA(u.I);ht(E,"SID",u.K),ht(E,"RID",p),ht(E,"AID",u.T),ll(u,E),u.m&&u.o&&Kg(E,u.m,u.o),p=new ts(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=_B(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),jg(u.h,p),Og(p,E,g)}function ll(u,g){u.H&&N(u.H,function(p,E){ht(g,E,p)}),u.l&&oB({},function(p,E){ht(g,E,p)})}function _B(u,g,p){p=Math.min(u.i.length,p);var E=u.l?f(u.l.Na,u.l,u):null;e:{var O=u.i;let K=-1;for(;;){const ie=["count="+p];K==-1?0<p?(K=O[0].g,ie.push("ofs="+K)):K=0:ie.push("ofs="+K);let lt=!0;for(let dn=0;dn<p;dn++){let Ye=O[dn].g;const Cn=O[dn].map;if(Ye-=K,0>Ye)K=Math.max(0,O[dn].g-100),lt=!1;else try{OS(Cn,ie,"req"+Ye+"_")}catch{E&&E(Cn)}}if(lt){E=ie.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,E}function IB(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;be||M(),z||(be(),z=!0),F.add(g,u),u.v=0}}function zg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Nr(f(u.Fa,u),TB(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,EB(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Nr(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$e(10),Gu(this),EB(this))};function Wg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function EB(u){u.g=new ts(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=yA(u.qa);ht(g,"RID","rpc"),ht(g,"SID",u.K),ht(g,"AID",u.T),ht(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&ht(g,"TO",u.ja),ht(g,"TYPE","xmlhttp"),ll(u,g),u.m&&u.o&&Kg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Vu(yA(g)),p.m=null,p.P=!0,Zy(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Gu(this),zg(this),$e(19))};function Wu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function bB(u,g){var p=null;if(u.g==g){Wu(u),Wg(u),u.g=null;var E=2}else if(Hg(u.h,g))p=g.D,sB(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var O=u.B;E=Ae(),fe(E,new qt(E,p)),zu(u)}else IB(u);else if(O=g.s,O==3||O==0&&0<g.X||!(E==1&&jS(u,g)||E==2&&zg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),O){case 1:di(u,5);break;case 4:di(u,10);break;case 3:di(u,6);break;default:di(u,2)}}}function TB(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function di(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),E=u.Xa;const O=!E;E=new ui(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ou(E,"https"),Vu(E),O?PS(E.toString(),p):DS(E.toString(),p)}else $e(2);u.G=0,u.l&&u.l.sa(g),FB(u),xB(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function FB(u){if(u.G=0,u.ka=[],u.l){const g=iB(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function UB(u,g,p){var E=p instanceof ui?yA(p):new ui(p);if(E.g!="")g&&(E.g=g+"."+E.g),Mu(E,E.s);else{var O=o.location;E=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var K=new ui(null);E&&Ou(K,E),g&&(K.g=g),O&&Mu(K,O),p&&(K.l=p),E=K}return p=u.D,g=u.ya,p&&g&&ht(E,p,g),ht(E,"VER",u.la),ll(u,E),E}function QB(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ft(new Hu({eb:p})):new Ft(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SB(){}t=SB.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $u(){}$u.prototype.g=function(u,g){return new sr(u,g)};function sr(u,g){we.call(this),this.g=new BB(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!y(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!y(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new mo(this)}m(sr,we),sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sr.prototype.close=function(){Gg(this.g)},sr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Oe(u),u=p);g.i.push(new ES(g.Ya++,u)),g.G==3&&zu(g)},sr.prototype.N=function(){this.g.l=null,delete this.j,Gg(this.g),delete this.g,sr.aa.N.call(this)};function kB(u){Nn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}m(kB,Nn);function RB(){P.call(this),this.status=1}m(RB,P);function mo(u){this.g=u}m(mo,SB),mo.prototype.ua=function(){fe(this.g,"a")},mo.prototype.ta=function(u){fe(this.g,new kB(u))},mo.prototype.sa=function(u){fe(this.g,new RB)},mo.prototype.ra=function(){fe(this.g,"b")},$u.prototype.createWebChannel=$u.prototype.g,sr.prototype.send=sr.prototype.o,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,GT=function(){return new $u},KT=function(){return Ae()},jT=Y,u0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pu.NO_ERROR=0,Pu.TIMEOUT=8,Pu.HTTP_ERROR=6,nh=Pu,Jy.COMPLETE="complete",HT=Jy,Dt.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",we.prototype.listen=we.prototype.K,Nl=Dt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,VT=Ft}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});const uC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Kf("@firebase/firestore");function Qo(){return Gs.logLevel}function gD(t){Gs.setLogLevel(t)}function X(t,...e){if(Gs.logLevel<=Ve.DEBUG){const n=e.map(pv);Gs.debug(`Firestore (${Ha}): ${t}`,...n)}}function Vt(t,...e){if(Gs.logLevel<=Ve.ERROR){const n=e.map(pv);Gs.error(`Firestore (${Ha}): ${t}`,...n)}}function hA(t,...e){if(Gs.logLevel<=Ve.WARN){const n=e.map(pv);Gs.warn(`Firestore (${Ha}): ${t}`,...n)}}function pv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: `+t;throw Vt(e),new Error(e)}function _e(t,e){t||ve()}function pD(t,e){t||ve()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(an.UNAUTHENTICATED))}shutdown(){}}class wD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vD{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const A=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vn,e.enqueueRetryable(()=>A(this.currentUser))};const i=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await A(this.currentUser)})},o=a=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vn)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new zT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new an(e)}}class yD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const A=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>A(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?A(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new xD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const A=_D(40);for(let s=0;s<A.length;++s)r.length<20&&A[s]<n&&(r+=e.charAt(A[s]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function Ba(t,e,n){return t.length===e.length&&t.every((r,A)=>n(r,e[A]))}function $T(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new xt(0,0))}static max(){return new Ee(new xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let A=0;A<r;A++){const s=e.get(A),i=n.get(A);if(s<i)return-1;if(s>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ke extends Mc{construct(e,n,r){return new Ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(A=>A.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const ID=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Mc{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return ID.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let r="",A=0;const s=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;A<e.length;){const o=e[A];if(o==="\\"){if(A+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[A+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,A+=2}else o==="`"?(i=!i,A++):o!=="."||i?(r+=o,A++):(s(),A++)}if(s(),i)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ke.fromString(e))}static fromName(e){return new ae(Ke.fromString(e).popFirst(5))}static empty(){return new ae(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,r,A){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=A}}function d0(t){return t.fields.find(e=>e.kind===2)}function vi(t){return t.fields.filter(e=>e.kind!==2)}$h.UNKNOWN_ID=-1;class rh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Vc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Vc(0,gr.min())}}function qT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,A=Ee.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new gr(A,ae.empty(),e)}function JT(t){return new gr(t.readTime,t.key,-1)}class gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gr(Ee.min(),ae.empty(),-1)}static max(){return new gr(Ee.max(),ae.empty(),-1)}}function mv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==XT)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,A)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,A)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,A)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let A=0,s=0,i=!1;e.forEach(o=>{++A,o.next(()=>{++s,i&&s===A&&n()},a=>r(a))}),i=!0,s===A&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(A=>A?V.resolve(A):r());return n}static forEach(e,n){const r=[];return e.forEach((A,s)=>{r.push(n.call(this,A,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,A)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;n(e[c]).next(d=>{i[c]=d,++o,o===s&&r(i)},d=>A(d))}})}static doWhile(e,n){return new V((r,A)=>{const s=()=>{e()===!0?n().next(()=>{s()},A):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new vn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new rc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const A=wv(r.target.error);this.V.reject(new rc(e,A))}}static open(e,n,r,A){try{return new Gf(n,e.transaction(A,r))}catch(s){throw new rc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(X("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new bD(n)}}class cA{constructor(e,n,r){this.name=e,this.version=n,this.p=r,cA.S(Tt())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return X("SimpleDb","Removing database:",e),yi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pc())return!1;if(cA.v())return!0;const e=Tt(),n=cA.S(e),r=0<n&&n<10,A=ZT(e),s=0<A&&A<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(X("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const A=indexedDB.open(this.name,this.version);A.onsuccess=s=>{const i=s.target.result;n(i)},A.onblocked=()=>{r(new rc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=s=>{const i=s.target.error;i.name==="VersionError"?r(new J(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new J(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new rc(e,i))},A.onupgradeneeded=s=>{X("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,A.transaction,s.oldVersion,this.version).next(()=>{X("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,A){const s=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=Gf.open(this.db,e,s?"readonly":"readwrite",r),a=A(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),V.reject(c))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,c=a.name!=="FirebaseError"&&i<3;if(X("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ED{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yi(this.B.delete())}}class rc extends J{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ii(t){return t.name==="IndexedDbTransactionError"}class bD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(X("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(X("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yi(r)}add(e){return X("SimpleDb","ADD",this.store.name,e,e),yi(this.store.add(e))}get(e){return yi(this.store.get(e)).next(n=>(n===void 0&&(n=null),X("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return X("SimpleDb","DELETE",this.store.name,e),yi(this.store.delete(e))}count(){return X("SimpleDb","COUNT",this.store.name),yi(this.store.count())}U(e,n){const r=this.options(e,n),A=r.index?this.store.index(r.index):this.store;if(typeof A.getAll=="function"){const s=A.getAll(r.range);return new V((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}{const s=this.cursor(r),i=[];return this.W(s,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((A,s)=>{r.onerror=i=>{s(i.target.error)},r.onsuccess=i=>{A(i.target.result)}})}j(e,n){X("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const A=this.cursor(r);return this.W(A,(s,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const A=this.cursor(r);return this.W(A,n)}Y(e){const n=this.cursor({});return new V((r,A)=>{n.onerror=s=>{const i=wv(s.target.error);A(i)},n.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new V((A,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void A();const a=new ED(o),c=n(o.primaryKey,o.value,a);if(c instanceof V){const d=c.catch(h=>(a.done(),V.reject(h)));r.push(d)}a.isDone?A():a.K===null?o.continue():o.continue(a.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function yi(t){return new V((e,n)=>{t.onsuccess=r=>{const A=r.target.result;e(A)},t.onerror=r=>{const A=wv(r.target.error);n(A)}})}let dC=!1;function wv(t){const e=cA.S(Tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dC||(dC=!0,setTimeout(()=>{throw r},0)),r}}return t}class TD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){X("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{X("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ii(n)?X("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await si(n)}await this.X(6e4)})}}class FD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let A=n,s=!0;return V.doWhile(()=>s===!0&&A>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return X("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,A).next(o=>{A-=o,r.add(i)});s=!1})).next(()=>n-A)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(A=>this.localStore.localDocuments.getNextDocuments(e,n,A,r).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(A,s)).next(o=>(X("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((A,s)=>{const i=JT(s);mv(i,r)>0&&(r=i)}),new gr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zn.oe=-1;function fu(t){return t==null}function Hc(t){return t===0&&1/t==-1/0}function eF(t){return typeof t=="number"&&Number.isInteger(t)&&!Hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hC(e)),e=UD(t.get(n),e);return hC(e)}function UD(t,e){let n=e;const r=t.length;for(let A=0;A<r;A++){const s=t.charAt(A);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function hC(t){return t+""}function sA(t){const e=t.length;if(_e(e>=2),e===2)return _e(t.charAt(0)===""&&t.charAt(1)===""),Ke.emptyPath();const n=e-2,r=[];let A="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>n)&&ve(),t.charAt(i+1)){case"":const o=t.substring(s,i);let a;A.length===0?a=o:(A+=o,a=A,A=""),r.push(a);break;case"":A+=t.substring(s,i),A+="\0";break;case"":A+=t.substring(s,i+1);break;default:ve()}s=i+2}return new Ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t,e){return[t,Hn(e)]}function tF(t,e,n){return[t,Hn(e),n]}const QD={},SD=["prefixPath","collectionGroup","readTime","documentId"],kD=["prefixPath","collectionGroup","documentId"],RD=["collectionGroup","readTime","prefixPath","documentId"],ND=["canonicalId","targetId"],PD=["targetId","path"],DD=["path","targetId"],LD=["collectionId","parent"],OD=["indexId","uid"],MD=["uid","sequenceNumber"],VD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HD=["indexId","uid","orderedDocumentKey"],jD=["userId","collectionPath","documentId"],KD=["userId","collectionPath","largestBatchId"],GD=["userId","collectionGroup","largestBatchId"],nF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zD=[...nF,"documentOverlays"],rF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],AF=rF,vv=[...AF,"indexConfiguration","indexState","indexEntries"],WD=vv,$D=[...vv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends YT{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function tn(t,e){const n=ue(t);return cA.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const A=this.comparator(e,r.key);if(A===0)return n+r.left.size;A<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,n,r,A){this.isReverse=A,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&A&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,A,s){this.key=e,this.value=n,this.color=r??gn.RED,this.left=A??gn.EMPTY,this.right=s??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,A,s){return new gn(e??this.key,n??this.value,r??this.color,A??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let A=this;const s=r(e,A.key);return A=s<0?A.copy(null,null,null,A.left.insert(e,n,r),null):s===0?A.copy(null,n,null,null,null):A.copy(null,null,null,null,A.right.insert(e,n,r)),A.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,A=this;if(n(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,n),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),n(e,A.key)===0){if(A.right.isEmpty())return gn.EMPTY;r=A.right.min(),A=A.copy(r.key,r.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,n))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,A,s){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const A=r.getNext();if(this.comparator(A.key,e[1])>=0)return;n(A.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pC(this.data.getIterator())}getIteratorFrom(e){return new pC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(this.comparator(A,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class pC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new er([])}unionWith(e){let n=new at(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(A){try{return atob(A)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iF("Invalid base64 string: "+s):s}}(e);return new St(n)}static fromUint8Array(e){const n=function(A){let s="";for(let i=0;i<A.length;++i)s+=String.fromCharCode(A[i]);return s}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let A=0;A<n.length;A++)r[A]=n.charCodeAt(A);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const JD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function VA(t){if(_e(!!t),typeof t=="string"){let e=0;const n=JD.exec(t);if(_e(!!n),n[1]){let A=n[1];A=(A+"000000000").substr(0,9),e=Number(A)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zs(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function yv(t){const e=t.mapValue.fields.__previous_value__;return zf(e)?yv(e):e}function jc(t){const e=VA(t.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r,A,s,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=A,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ws{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ws("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ws&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sh={nullValue:"NULL_VALUE"};function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zf(t)?4:oF(t)?9007199254740991:Wf(t)?10:11:ve()}function fA(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jc(t).isEqual(jc(e));case 3:return function(A,s){if(typeof A.timestampValue=="string"&&typeof s.timestampValue=="string"&&A.timestampValue.length===s.timestampValue.length)return A.timestampValue===s.timestampValue;const i=VA(A.timestampValue),o=VA(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(A,s){return zs(A.bytesValue).isEqual(zs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(A,s){return wt(A.geoPointValue.latitude)===wt(s.geoPointValue.latitude)&&wt(A.geoPointValue.longitude)===wt(s.geoPointValue.longitude)}(t,e);case 2:return function(A,s){if("integerValue"in A&&"integerValue"in s)return wt(A.integerValue)===wt(s.integerValue);if("doubleValue"in A&&"doubleValue"in s){const i=wt(A.doubleValue),o=wt(s.doubleValue);return i===o?Hc(i)===Hc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ba(t.arrayValue.values||[],e.arrayValue.values||[],fA);case 10:case 11:return function(A,s){const i=A.mapValue.fields||{},o=s.mapValue.fields||{};if(gC(i)!==gC(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!fA(i[a],o[a])))return!1;return!0}(t,e);default:return ve()}}function Kc(t,e){return(t.values||[]).find(n=>fA(n,e))!==void 0}function $s(t,e){if(t===e)return 0;const n=zi(t),r=zi(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=wt(s.integerValue||s.doubleValue),a=wt(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return mC(t.timestampValue,e.timestampValue);case 4:return mC(jc(t),jc(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(s,i){const o=zs(s),a=zs(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const d=Ne(o[c],a[c]);if(d!==0)return d}return Ne(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Ne(wt(s.latitude),wt(i.latitude));return o!==0?o:Ne(wt(s.longitude),wt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wC(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,a,c,d;const h=s.fields||{},f=i.fields||{},w=(o=h.value)===null||o===void 0?void 0:o.arrayValue,m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,C=Ne(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:wC(w,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Bs.mapValue&&i===Bs.mapValue)return 0;if(s===Bs.mapValue)return 1;if(i===Bs.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=Ne(a[h],d[h]);if(f!==0)return f;const w=$s(o[a[h]],c[d[h]]);if(w!==0)return w}return Ne(a.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function mC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=VA(t),r=VA(e),A=Ne(n.seconds,r.seconds);return A!==0?A:Ne(n.nanos,r.nanos)}function wC(t,e){const n=t.values||[],r=e.values||[];for(let A=0;A<n.length&&A<r.length;++A){const s=$s(n[A],r[A]);if(s)return s}return Ne(n.length,r.length)}function xa(t){return f0(t)}function f0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=VA(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",A=!0;for(const s of n.values||[])A?A=!1:r+=",",r+=f0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let A="{",s=!0;for(const i of r)s?s=!1:A+=",",A+=`${i}:${f0(n.fields[i])}`;return A+"}"}(t.mapValue):ve()}function Wi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g0(t){return!!t&&"integerValue"in t}function Gc(t){return!!t&&"arrayValue"in t}function vC(t){return!!t&&"nullValue"in t}function yC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ih(t){return!!t&&"mapValue"in t}function Wf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ac(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ac(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ac(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const aF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function YD(t){return"nullValue"in t?sh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wi(Ws.empty(),ae.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Wf(t)?aF:{mapValue:{}}:ve()}function ZD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wi(Ws.empty(),ae.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?aF:"mapValue"in t?Wf(t)?{mapValue:{}}:Bs:ve()}function BC(t,e){const n=$s(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xC(t,e){const n=$s(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ac(n)}setAll(e){let n=yt.emptyPath(),r={},A=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,A),r={},A=[],n=o.popLast()}i?r[o.lastSegment()]=Ac(i):A.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,A)}delete(e){const n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fA(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let A=n.mapValue.fields[e.get(r)];ih(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=A),n=A}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(A,s)=>e[A]=s);for(const A of r)delete e[A]}clone(){return new pn(Ac(this.value))}}function lF(t){const e=[];return lo(t.fields,(n,r)=>{const A=new yt([n]);if(ih(r)){const s=lF(r.mapValue).fields;if(s.length===0)e.push(A);else for(const i of s)e.push(A.child(i))}else e.push(A)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,A,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=A,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new gt(e,0,Ee.min(),Ee.min(),Ee.min(),pn.empty(),0)}static newFoundDocument(e,n,r,A){return new gt(e,1,n,Ee.min(),r,A,0)}static newNoDocument(e,n){return new gt(e,2,n,Ee.min(),Ee.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,Ee.min(),Ee.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.position=e,this.inclusive=n}}function CC(t,e,n){let r=0;for(let A=0;A<t.position.length;A++){const s=e[A],i=t.position[A];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(i.referenceValue),n.key):r=$s(i,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _C(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fA(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function e4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{}class Ge extends cF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new t4(e,n,r):n==="array-contains"?new A4(e,r):n==="in"?new pF(e,r):n==="not-in"?new s4(e,r):n==="array-contains-any"?new i4(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new n4(e,r):new r4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($s(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison($s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends cF{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new st(e,n)}matches(e){return Ca(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ca(t){return t.op==="and"}function p0(t){return t.op==="or"}function Bv(t){return uF(t)&&Ca(t)}function uF(t){for(const e of t.filters)if(e instanceof st)return!1;return!0}function m0(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+xa(t.value);if(Bv(t))return t.filters.map(e=>m0(e)).join(",");{const e=t.filters.map(n=>m0(n)).join(",");return`${t.op}(${e})`}}function dF(t,e){return t instanceof Ge?function(r,A){return A instanceof Ge&&r.op===A.op&&r.field.isEqual(A.field)&&fA(r.value,A.value)}(t,e):t instanceof st?function(r,A){return A instanceof st&&r.op===A.op&&r.filters.length===A.filters.length?r.filters.reduce((s,i,o)=>s&&dF(i,A.filters[o]),!0):!1}(t,e):void ve()}function hF(t,e){const n=t.filters.concat(e);return st.create(n,t.op)}function fF(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${xa(n.value)}`}(t):t instanceof st?function(n){return n.op.toString()+" {"+n.getFilters().map(fF).join(" ,")+"}"}(t):"Filter"}class t4 extends Ge{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class n4 extends Ge{constructor(e,n){super(e,"in",n),this.keys=gF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class r4 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=gF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class A4 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gc(n)&&Kc(n.arrayValue,this.value)}}class pF extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kc(this.value.arrayValue,n)}}class s4 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Kc(this.value.arrayValue,n)}}class i4 extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n=null,r=[],A=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=A,this.limit=s,this.startAt=i,this.endAt=o,this.ue=null}}function w0(t,e=null,n=[],r=[],A=null,s=null,i=null){return new o4(t,e,n,r,A,s,i)}function $i(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>m0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xa(r)).join(",")),e.ue=n}return e.ue}function gu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!e4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_C(t.startAt,e.startAt)&&_C(t.endAt,e.endAt)}function qh(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Jh(t,e){return t.filters.filter(n=>n instanceof Ge&&n.field.isEqual(e))}function IC(t,e,n){let r=sh,A=!0;for(const s of Jh(t,e)){let i=sh,o=!0;switch(s.op){case"<":case"<=":i=YD(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,o=!1;break;case"!=":case"not-in":i=sh}BC({value:r,inclusive:A},{value:i,inclusive:o})<0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];BC({value:r,inclusive:A},{value:i,inclusive:n.inclusive})<0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}function EC(t,e,n){let r=Bs,A=!0;for(const s of Jh(t,e)){let i=Bs,o=!0;switch(s.op){case">=":case">":i=ZD(s.value),o=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,o=!1;break;case"!=":case"not-in":i=Bs}xC({value:r,inclusive:A},{value:i,inclusive:o})>0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];xC({value:r,inclusive:A},{value:i,inclusive:n.inclusive})>0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n=null,r=[],A=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=A,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mF(t,e,n,r,A,s,i,o){return new $A(t,e,n,r,A,s,i,o)}function ja(t){return new $A(t)}function bC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xv(t){return t.collectionGroup!==null}function Aa(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new at(yt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zc(s,r))}),n.has(yt.keyField().canonicalString())||e.ce.push(new zc(yt.keyField(),r))}return e.ce}function jn(t){const e=ue(t);return e.le||(e.le=a4(e,Aa(t))),e.le}function a4(t,e){if(t.limitType==="F")return w0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(A=>{const s=A.dir==="desc"?"asc":"desc";return new zc(A.field,s)});const n=t.endAt?new qs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qs(t.startAt.position,t.startAt.inclusive):null;return w0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function v0(t,e){const n=t.filters.concat([e]);return new $A(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xh(t,e,n){return new $A(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pu(t,e){return gu(jn(t),jn(e))&&t.limitType===e.limitType}function wF(t){return`${$i(jn(t))}|lt:${t.limitType}`}function So(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(A=>fF(A)).join(", ")}]`),fu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(A=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(A)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(A=>xa(A)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(A=>xa(A)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function mu(t,e){return e.isFoundDocument()&&function(r,A){const s=A.key.path;return r.collectionGroup!==null?A.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,A){for(const s of Aa(r))if(!s.field.isKeyField()&&A.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,A){for(const s of r.filters)if(!s.matches(A))return!1;return!0}(t,e)&&function(r,A){return!(r.startAt&&!function(i,o,a){const c=CC(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,Aa(r),A)||r.endAt&&!function(i,o,a){const c=CC(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,Aa(r),A))}(t,e)}function vF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yF(t){return(e,n)=>{let r=!1;for(const A of Aa(t)){const s=l4(A,e,n);if(s!==0)return s;r=r||A.field.isKeyField()}return 0}}function l4(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?$s(a,c):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[A,s]of r)if(this.equalsFn(A,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),A=this.inner[r];if(A===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<A.length;s++)if(this.equalsFn(A[s][0],e))return void(A[s]=[e,n]);A.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let A=0;A<r.length;A++)if(this.equalsFn(r[A][0],e))return r.length===1?delete this.inner[n]:r.splice(A,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[A,s]of r)e(A,s)})}isEmpty(){return sF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new dt(ae.comparator);function tr(){return c4}const BF=new dt(ae.comparator);function Pl(...t){let e=BF;for(const n of t)e=e.insert(n.key,n);return e}function xF(t){let e=BF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function iA(){return sc()}function CF(){return sc()}function sc(){return new oi(t=>t.toString(),(t,e)=>t.isEqual(e))}const u4=new dt(ae.comparator),d4=new at(ae.comparator);function De(...t){let e=d4;for(const n of t)e=e.add(n);return e}const h4=new at(Ne);function Cv(){return h4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function _F(t){return{integerValue:""+t}}function IF(t,e){return eF(e)?_F(e):_v(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function f4(t,e,n){return t instanceof _a?function(A,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return s&&zf(s)&&(s=yv(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof qi?bF(t,e):t instanceof Ji?TF(t,e):function(A,s){const i=EF(A,s),o=TC(i)+TC(A.Pe);return g0(i)&&g0(A.Pe)?_F(o):_v(A.serializer,o)}(t,e)}function g4(t,e,n){return t instanceof qi?bF(t,e):t instanceof Ji?TF(t,e):n}function EF(t,e){return t instanceof Ia?function(r){return g0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class _a extends $f{}class qi extends $f{constructor(e){super(),this.elements=e}}function bF(t,e){const n=FF(e);for(const r of t.elements)n.some(A=>fA(A,r))||n.push(r);return{arrayValue:{values:n}}}class Ji extends $f{constructor(e){super(),this.elements=e}}function TF(t,e){let n=FF(e);for(const r of t.elements)n=n.filter(A=>!fA(A,r));return{arrayValue:{values:n}}}class Ia extends $f{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function TC(t){return wt(t.integerValue||t.doubleValue)}function FF(t){return Gc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.field=e,this.transform=n}}function p4(t,e){return t.field.isEqual(e.field)&&function(r,A){return r instanceof qi&&A instanceof qi||r instanceof Ji&&A instanceof Ji?Ba(r.elements,A.elements,fA):r instanceof Ia&&A instanceof Ia?fA(r.Pe,A.Pe):r instanceof _a&&A instanceof _a}(t.transform,e.transform)}class m4{constructor(e,n){this.version=e,this.transformResults=n}}class Bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function UF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ga(t.key,Bt.none()):new Ka(t.key,t.data,Bt.none());{const n=t.data,r=pn.empty();let A=new at(yt.comparator);for(let s of e.fields)if(!A.has(s)){let i=n.field(s);i===null&&s.length>1&&(s=s.popLast(),i=n.field(s)),i===null?r.delete(s):r.set(s,i),A=A.add(s)}return new qA(t.key,r,new er(A.toArray()),Bt.none())}}function w4(t,e,n){t instanceof Ka?function(A,s,i){const o=A.value.clone(),a=UC(A.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof qA?function(A,s,i){if(!oh(A.precondition,s))return void s.convertToUnknownDocument(i.version);const o=UC(A.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(QF(A)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(A,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ic(t,e,n,r){return t instanceof Ka?function(s,i,o,a){if(!oh(s.precondition,i))return o;const c=s.value.clone(),d=QC(s.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof qA?function(s,i,o,a){if(!oh(s.precondition,i))return o;const c=QC(s.fieldTransforms,a,i),d=i.data;return d.setAll(QF(s)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,i,o){return oh(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function v4(t,e){let n=null;for(const r of t.fieldTransforms){const A=e.data.field(r.field),s=EF(r.transform,A||null);s!=null&&(n===null&&(n=pn.empty()),n.set(r.field,s))}return n||null}function FC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,A){return r===void 0&&A===void 0||!(!r||!A)&&Ba(r,A,(s,i)=>p4(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends qf{constructor(e,n,r,A=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class qA extends qf{constructor(e,n,r,A,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=A,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function QF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function UC(t,e,n){const r=new Map;_e(t.length===n.length);for(let A=0;A<n.length;A++){const s=t[A],i=s.transform,o=e.data.field(s.field);r.set(s.field,g4(i,o,n[A]))}return r}function QC(t,e,n){const r=new Map;for(const A of t){const s=A.transform,i=n.data.field(A.field);r.set(A.field,f4(s,i,e))}return r}class Ga extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Iv extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r,A){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=A}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let A=0;A<this.mutations.length;A++){const s=this.mutations[A];s.key.isEqual(e.key)&&w4(s,e,r[A])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CF();return this.mutations.forEach(A=>{const s=e.get(A.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=n.has(A.key)?null:o;const a=UF(i,o);a!==null&&r.set(A.key,a),i.isValidDocument()||i.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),De())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(n,r)=>FC(n,r))&&Ba(this.baseMutations,e.baseMutations,(n,r)=>FC(n,r))}}class bv{constructor(e,n,r,A){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=A}static from(e,n,r){_e(e.mutations.length===r.length);let A=function(){return u4}();const s=e.mutations;for(let i=0;i<s.length;i++)A=A.insert(s[i].key,r[i].version);return new bv(e,n,r,A)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,ze;function SF(t){switch(t){default:return ve();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function kF(t){if(t===void 0)return Vt("GRPC error has no .code"),j.UNKNOWN;switch(t){case Kt.OK:return j.OK;case Kt.CANCELLED:return j.CANCELLED;case Kt.UNKNOWN:return j.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return j.INTERNAL;case Kt.UNAVAILABLE:return j.UNAVAILABLE;case Kt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Kt.NOT_FOUND:return j.NOT_FOUND;case Kt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Kt.ABORTED:return j.ABORTED;case Kt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Kt.DATA_LOSS:return j.DATA_LOSS;default:return ve()}}(ze=Kt||(Kt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new Pi([4294967295,4294967295],0);function SC(t){const e=RF().encode(t),n=new MT;return n.update(e),new Uint8Array(n.digest())}function kC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),A=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([A,s],0)]}class Fv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dl(`Invalid padding: ${n}`);if(r<0)throw new Dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pi.fromNumber(this.Ie)}Ee(e,n,r){let A=e.add(n.multiply(Pi.fromNumber(r)));return A.compare(B4)===1&&(A=new Pi([A.getBits(0),A.getBits(1)],0)),A.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=SC(e),[r,A]=kC(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);if(!this.de(i))return!1}return!0}static create(e,n,r){const A=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Fv(s,A,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=SC(e),[r,A]=kC(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,A,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=A,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const A=new Map;return A.set(e,yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vu(Ee.min(),A,new dt(Ne),tr(),De())}}class yu{constructor(e,n,r,A,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=A,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yu(r,n,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,A){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=A}}class NF{constructor(e,n){this.targetId=e,this.me=n}}class PF{constructor(e,n,r=St.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=A}}class RC{constructor(){this.fe=0,this.ge=PC(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),n=De(),r=De();return this.ge.forEach((A,s)=>{switch(s){case 0:e=e.add(A);break;case 2:n=n.add(A);break;case 1:r=r.add(A);break;default:ve()}}),new yu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=PC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x4{constructor(e){this.Le=e,this.Be=new Map,this.ke=tr(),this.qe=NC(),this.Qe=new dt(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,A)=>{this.ze(A)&&n(A)})}He(e){const n=e.targetId,r=e.me.count,A=this.Je(n);if(A){const s=A.target;if(qh(s))if(r===0){const i=new ae(s.path);this.Ue(n,i,gt.newNoDocument(i,Ee.min()))}else _e(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:A=0},hashCount:s=0}=n;let i,o;try{i=zs(r).toUint8Array()}catch(a){if(a instanceof iF)return hA("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Fv(i,A,s)}catch(a){return hA(a instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let A=0;return r.forEach(s=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),A++)}),A}rt(e){const n=new Map;this.Be.forEach((s,i)=>{const o=this.Je(i);if(o){if(s.current&&qh(o.target)){const a=new ae(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,gt.newNoDocument(a,e))}s.be&&(n.set(i,s.ve()),s.Ce())}});let r=De();this.qe.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const A=new vu(e,n,this.Qe,this.ke,r);return this.ke=tr(),this.qe=NC(),this.Qe=new dt(Ne),A}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const A=this.Ge(e);this.it(e,n)?A.Fe(n,1):A.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new RC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new at(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new RC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function NC(){return new dt(ae.comparator)}function PC(){return new dt(ae.comparator)}const C4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I4={and:"AND",or:"OR"};class E4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function y0(t,e){return t.useProto3Json||fu(e)?e:{value:e}}function Ea(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b4(t,e){return Ea(t,e.toTimestamp())}function Ht(t){return _e(!!t),Ee.fromTimestamp(function(n){const r=VA(n);return new xt(r.seconds,r.nanos)}(t))}function Uv(t,e){return B0(t,e).canonicalString()}function B0(t,e){const n=function(A){return new Ke(["projects",A.projectId,"databases",A.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LF(t){const e=Ke.fromString(t);return _e($F(e)),e}function Wc(t,e){return Uv(t.databaseId,e.path)}function uA(t,e){const n=LF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(VF(n))}function OF(t,e){return Uv(t.databaseId,e)}function MF(t){const e=LF(t);return e.length===4?Ke.emptyPath():VF(e)}function x0(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VF(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function DC(t,e,n){return{name:Wc(t,e),fields:n.value.mapValue.fields}}function HF(t,e,n){const r=uA(t,e.name),A=Ht(e.updateTime),s=e.createTime?Ht(e.createTime):Ee.min(),i=new pn({mapValue:{fields:e.fields}}),o=gt.newFoundDocument(r,A,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function T4(t,e){return"found"in e?function(r,A){_e(!!A.found),A.found.name,A.found.updateTime;const s=uA(r,A.found.name),i=Ht(A.found.updateTime),o=A.found.createTime?Ht(A.found.createTime):Ee.min(),a=new pn({mapValue:{fields:A.found.fields}});return gt.newFoundDocument(s,i,o,a)}(t,e):"missing"in e?function(r,A){_e(!!A.missing),_e(!!A.readTime);const s=uA(r,A.missing),i=Ht(A.readTime);return gt.newNoDocument(s,i)}(t,e):ve()}function F4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(_e(d===void 0||typeof d=="string"),St.fromBase64String(d||"")):(_e(d===void 0||d instanceof Buffer||d instanceof Uint8Array),St.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?j.UNKNOWN:kF(c.code);return new J(d,c.message||"")}(i);n=new PF(r,A,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const A=uA(t,r.document.name),s=Ht(r.document.updateTime),i=r.document.createTime?Ht(r.document.createTime):Ee.min(),o=new pn({mapValue:{fields:r.document.fields}}),a=gt.newFoundDocument(A,s,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ah(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const A=uA(t,r.document),s=r.readTime?Ht(r.readTime):Ee.min(),i=gt.newNoDocument(A,s),o=r.removedTargetIds||[];n=new ah([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const A=uA(t,r.document),s=r.removedTargetIds||[];n=new ah([],s,A,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:A=0,unchangedNames:s}=r,i=new y4(A,s),o=r.targetId;n=new NF(o,i)}}return n}function $c(t,e){let n;if(e instanceof Ka)n={update:DC(t,e.key,e.value)};else if(e instanceof Ga)n={delete:Wc(t,e.key)};else if(e instanceof qA)n={update:DC(t,e.key,e.data),updateMask:N4(e.fieldMask)};else{if(!(e instanceof Iv))return ve();n={verify:Wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof _a)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ji)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ia)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(A,s){return s.updateTime!==void 0?{updateTime:b4(A,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve()}(t,e.precondition)),n}function C0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Bt.updateTime(Ht(s.updateTime)):s.exists!==void 0?Bt.exists(s.exists):Bt.none()}(e.currentDocument):Bt.none(),r=e.updateTransforms?e.updateTransforms.map(A=>function(i,o){let a=null;if("setToServerValue"in o)_e(o.setToServerValue==="REQUEST_TIME"),a=new _a;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new qi(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new Ji(d)}else"increment"in o?a=new Ia(i,o.increment):ve();const c=yt.fromServerFormat(o.fieldPath);return new wu(c,a)}(t,A)):[];if(e.update){e.update.name;const A=uA(t,e.update.name),s=new pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new er(c.map(d=>yt.fromServerFormat(d)))}(e.updateMask);return new qA(A,s,i,n,r)}return new Ka(A,s,n,r)}if(e.delete){const A=uA(t,e.delete);return new Ga(A,n)}if(e.verify){const A=uA(t,e.verify);return new Iv(A,n)}return ve()}function U4(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(A,s){let i=A.updateTime?Ht(A.updateTime):Ht(s);return i.isEqual(Ee.min())&&(i=Ht(s)),new m4(i,A.transformResults||[])}(n,e))):[]}function jF(t,e){return{documents:[OF(t,e.path)]}}function KF(t,e){const n={structuredQuery:{}},r=e.path;let A;e.collectionGroup!==null?(A=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OF(t,A);const s=function(c){if(c.length!==0)return WF(st.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:ko(f.field),direction:S4(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=y0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:A}}function GF(t){let e=MF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let A=null;if(r>0){_e(r===1);const d=n.from[0];d.allDescendants?A=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=zF(h);return f instanceof st&&Bv(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(m){return new zc(Ro(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,fu(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,w=h.values||[];return new qs(w,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,w=h.values||[];return new qs(w,f)}(n.endAt)),mF(e,A,i,s,o,"F",a,c)}function Q4(t,e){const n=function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ro(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const A=Ro(n.unaryFilter.field);return Ge.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ro(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ro(n.unaryFilter.field);return Ge.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Ro(n.fieldFilter.field),function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return st.create(n.compositeFilter.filters.map(r=>zF(r)),function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function S4(t){return C4[t]}function k4(t){return _4[t]}function R4(t){return I4[t]}function ko(t){return{fieldPath:t.canonicalString()}}function Ro(t){return yt.fromServerFormat(t.fieldPath)}function WF(t){return t instanceof Ge?function(n){if(n.op==="=="){if(yC(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NAN"}};if(vC(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yC(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NAN"}};if(vC(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(n.field),op:k4(n.op),value:n.value}}}(t):t instanceof st?function(n){const r=n.getFilters().map(A=>WF(A));return r.length===1?r[0]:{compositeFilter:{op:R4(n.op),filters:r}}}(t):ve()}function N4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $F(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,r,A,s=Ee.min(),i=Ee.min(),o=St.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=A,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new TA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new TA(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e){this.ct=e}}function P4(t,e){let n;if(e.document)n=HF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),A=Yi(e.noDocument.readTime);n=gt.newNoDocument(r,A),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve();{const r=ae.fromSegments(e.unknownDocument.path),A=Yi(e.unknownDocument.version);n=gt.newUnknownDocument(r,A)}}return e.readTime&&n.setReadTime(function(A){const s=new xt(A[0],A[1]);return Ee.fromTimestamp(s)}(e.readTime)),n}function LC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:Wc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:Ea(s,i.version.toTimestamp()),createTime:Ea(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Xi(e.version)};else{if(!e.isUnknownDocument())return ve();r.unknownDocument={path:n.path.toArray(),version:Xi(e.version)}}return r}function Yh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yi(t){const e=new xt(t.seconds,t.nanoseconds);return Ee.fromTimestamp(e)}function Bi(t,e){const n=(e.baseMutations||[]).map(s=>C0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>C0(t.ct,s)),A=xt.fromMillis(e.localWriteTimeMs);return new Ev(e.batchId,A,n,r)}function Ll(t){const e=Yi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Yi(t.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return _e(s.documents.length===1),jn(ja(MF(s.documents[0])))}(t.query):function(s){return jn(GF(s))}(t.query),new TA(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,St.fromBase64String(t.resumeToken))}function JF(t,e){const n=Xi(e.snapshotVersion),r=Xi(e.lastLimboFreeSnapshotVersion);let A;A=qh(e.target)?jF(t.ct,e.target):KF(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$i(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:A}}function Qv(t){const e=GF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xh(e,e.limit,"L"):e}function bp(t,e){return new Tv(e.largestBatchId,C0(t.ct,e.overlayMutation))}function OC(t,e){const n=e.path.lastSegment();return[t,Hn(e.path.popLast()),n]}function MC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Xi(r.readTime),documentKey:Hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{getBundleMetadata(e,n){return VC(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Yi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return VC(e).put(function(A){return{bundleId:A.id,createTime:Xi(Ht(A.createTime)),version:A.version}}(n))}getNamedQuery(e,n){return HC(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Qv(s.bundledQuery),readTime:Yi(s.readTime)}}(r)})}saveNamedQuery(e,n){return HC(e).put(function(A){return{name:A.name,readTime:Xi(Ht(A.readTime)),bundledQuery:A.bundledQuery}}(n))}}function VC(t){return tn(t,"bundles")}function HC(t){return tn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Jf(e,r)}getOverlay(e,n){return wl(e).get(OC(this.userId,n)).next(r=>r?bp(this.serializer,r):null)}getOverlays(e,n){const r=iA();return V.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){const A=[];return r.forEach((s,i)=>{const o=new Tv(n,i);A.push(this.ht(e,o))}),V.waitFor(A)}removeOverlaysForBatchId(e,n,r){const A=new Set;n.forEach(i=>A.add(Hn(i.getCollectionPath())));const s=[];return A.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);s.push(wl(e).j("collectionPathOverlayIndex",o))}),V.waitFor(s)}getOverlaysForCollection(e,n,r){const A=iA(),s=Hn(n),i=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return wl(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const c=bp(this.serializer,a);A.set(c.getKey(),c)}return A})}getOverlaysForCollectionGroup(e,n,r,A){const s=iA();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wl(e).J({index:"collectionGroupOverlayIndex",range:o},(a,c,d)=>{const h=bp(this.serializer,c);s.size()<A||h.largestBatchId===i?(s.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return wl(e).put(function(A,s,i){const[o,a,c]=OC(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:$c(A.ct,i.mutation)}}(this.serializer,this.userId,n))}}function wl(t){return tn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{Pt(e){return tn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(wt(e.integerValue));else if("doubleValue"in e){const r=wt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Hc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=VA(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(zs(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?oF(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Wf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ve()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const A of Object.keys(r))this.Vt(A,n),this.Tt(r[A],n)}wt(e,n){var r,A;const s=e.fields||{};this.dt(n,53);const i="value",o=((A=(r=s[i].arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.length)||0;this.dt(n,15),n.At(wt(o)),this.Vt(i,n),this.Tt(s[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const A of r)this.Tt(A,n)}yt(e,n){this.dt(n,37),ae.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}xi.vt=new xi;function O4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function jC(t){const e=64-function(r){let A=0;for(let s=0;s<8;++s){const i=O4(255&r[s]);if(A+=i,i!==8)break}return A}(t);return Math.ceil(e/8)}class M4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const A=n.codePointAt(0);this.Ft(240|A>>>18),this.Ft(128|63&A>>>12),this.Ft(128|63&A>>>6),this.Ft(128|63&A)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const A=n.codePointAt(0);this.Ot(240|A>>>18),this.Ot(128|63&A>>>12),this.Ot(128|63&A>>>6),this.Ot(128|63&A)}}this.Nt()}kt(e){const n=this.qt(e),r=jC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=255&n[A]}Kt(e){const n=this.qt(e),r=jC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=~(255&n[A])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let A=1;A<n.length;++A)n[A]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const A=new Uint8Array(r);A.set(this.buffer),this.buffer=A}}class V4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class H4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class vl{constructor(){this.jt=new M4,this.Ht=new V4(this.jt),this.Jt=new H4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n,r,A){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=A}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ci(this.indexId,this.documentKey,this.arrayValue,r)}}function ss(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=KC(t.arrayValue,e.arrayValue),n!==0?n:(n=KC(t.directionalValue,e.directionalValue),n!==0?n:ae.comparator(t.documentKey,e.documentKey)))}function KC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.Xt=new at((n,r)=>yt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(_e(e.collectionGroup===this.collectionId),this.nn)return!1;const n=d0(e);if(n!==void 0&&!this.sn(n))return!1;const r=vi(e);let A=new Set,s=0,i=0;for(;s<r.length&&this.sn(r[s]);++s)A=A.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!A.has(o.field.canonicalString())){const a=r[s];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++s}for(;s<r.length;++s){const o=r[s];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new at(yt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new rh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new rh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new rh(r.field,r.dir==="asc"?0:1)));return new $h($h.UNKNOWN_ID,this.collectionId,n,Vc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){var e,n;if(_e(t instanceof Ge||t instanceof st),t instanceof Ge){if(t instanceof pF){const A=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ge.create(t.field,"==",s)))||[];return st.create(A,"or")}return t}const r=t.filters.map(A=>XF(A));return st.create(r,t.op)}function j4(t){if(t.getFilters().length===0)return[];const e=E0(XF(t));return _e(YF(e)),_0(e)||I0(e)?[e]:e.getFilters()}function _0(t){return t instanceof Ge}function I0(t){return t instanceof st&&Bv(t)}function YF(t){return _0(t)||I0(t)||function(n){if(n instanceof st&&p0(n)){for(const r of n.getFilters())if(!_0(r)&&!I0(r))return!1;return!0}return!1}(t)}function E0(t){if(_e(t instanceof Ge||t instanceof st),t instanceof Ge)return t;if(t.filters.length===1)return E0(t.filters[0]);const e=t.filters.map(r=>E0(r));let n=st.create(e,t.op);return n=Zh(n),YF(n)?n:(_e(n instanceof st),_e(Ca(n)),_e(n.filters.length>1),n.filters.reduce((r,A)=>Sv(r,A)))}function Sv(t,e){let n;return _e(t instanceof Ge||t instanceof st),_e(e instanceof Ge||e instanceof st),n=t instanceof Ge?e instanceof Ge?function(A,s){return st.create([A,s],"and")}(t,e):zC(t,e):e instanceof Ge?zC(e,t):function(A,s){if(_e(A.filters.length>0&&s.filters.length>0),Ca(A)&&Ca(s))return hF(A,s.getFilters());const i=p0(A)?A:s,o=p0(A)?s:A,a=i.filters.map(c=>Sv(c,o));return st.create(a,"or")}(t,e),Zh(n)}function zC(t,e){if(Ca(e))return hF(e,t.getFilters());{const n=e.filters.map(r=>Sv(t,r));return st.create(n,"or")}}function Zh(t){if(_e(t instanceof Ge||t instanceof st),t instanceof Ge)return t;const e=t.getFilters();if(e.length===1)return Zh(e[0]);if(uF(t))return t;const n=e.map(A=>Zh(A)),r=[];return n.forEach(A=>{A instanceof Ge?r.push(A):A instanceof st&&(A.op===t.op?r.push(...A.filters):r.push(A))}),r.length===1?r[0]:st.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.un=new kv}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(gr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class kv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n]||new at(Ke.comparator),s=!A.has(r);return this.index[n]=A.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n];return A&&A.has(r)}getEntries(e){return(this.index[e]||new at(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Uint8Array(0);class G4{constructor(e,n){this.databaseId=n,this.cn=new kv,this.ln=new oi(r=>$i(r),(r,A)=>gu(r,A)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),A=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Hn(A)};return WC(e).put(s)}return V.resolve()}getCollectionParents(e,n){const r=[],A=IDBKeyRange.bound([n,""],[$T(n),""],!1,!0);return WC(e).U(A).next(s=>{for(const i of s){if(i.collectionId!==n)break;r.push(sA(i.parent))}return r})}addFieldIndex(e,n){const r=yl(e),A=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete A.indexId;const s=r.add(A);if(n.indexState){const i=xo(e);return s.next(o=>{i.put(MC(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=yl(e),A=xo(e),s=Bo(e);return r.delete(n.indexId).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=yl(e),r=Bo(e),A=xo(e);return n.j().next(()=>r.j()).next(()=>A.j())}createTargetIndexes(e,n){return V.forEach(this.hn(n),r=>this.getIndexType(e,r).next(A=>{if(A===0||A===1){const s=new GC(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Bo(e);let A=!0;const s=new Map;return V.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{A&&(A=!!o),s.set(i,o)})).next(()=>{if(A){let i=De();const o=[];return V.forEach(s,(a,c)=>{X("IndexedDbIndexManager",`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(a)} to execute ${$i(n)}`);const d=function(v,R){const S=d0(R);if(S===void 0)return null;for(const N of Jh(v,S.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,a),h=function(v,R){const S=new Map;for(const N of vi(R))for(const I of Jh(v,N.fieldPath))switch(I.op){case"==":case"in":S.set(N.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return S.set(N.fieldPath.canonicalString(),I.value),Array.from(S.values())}return null}(c,a),f=function(v,R){const S=[];let N=!0;for(const I of vi(R)){const x=I.kind===0?IC(v,I.fieldPath,v.startAt):EC(v,I.fieldPath,v.startAt);S.push(x.value),N&&(N=x.inclusive)}return new qs(S,N)}(c,a),w=function(v,R){const S=[];let N=!0;for(const I of vi(R)){const x=I.kind===0?EC(v,I.fieldPath,v.endAt):IC(v,I.fieldPath,v.endAt);S.push(x.value),N&&(N=x.inclusive)}return new qs(S,N)}(c,a),m=this.In(a,c,f),C=this.In(a,c,w),_=this.Tn(a,c,h),B=this.En(a.indexId,d,m,f.inclusive,C,w.inclusive,_);return V.forEach(B,y=>r.G(y,n.limit).next(v=>{v.forEach(R=>{const S=ae.fromSegments(R.documentKey);i.has(S)||(i=i.add(S),o.push(S))})}))}).next(()=>o)}return V.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=j4(st.create(e.filters,"and")).map(r=>w0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,A,s,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,s.length),c=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/c]):gd,w=this.An(e,f,r[h%c],A),m=this.Rn(e,f,s[h%c],i),C=o.map(_=>this.An(e,f,_,!0));d.push(...this.createRange(w,m,C))}return d}An(e,n,r,A){const s=new Ci(e,ae.empty(),n,r);return A?s:s.Zt()}Rn(e,n,r,A){const s=new Ci(e,ae.empty(),n,r);return A?s.Zt():s}Pn(e,n){const r=new GC(n),A=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,A).next(s=>{let i=null;for(const o of s)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const A=this.hn(n);return V.forEach(A,s=>this.Pn(e,s).next(i=>{i?r!==0&&i.fields.length<function(a){let c=new at(yt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&A.length>1&&r===2?1:r)}Vn(e,n){const r=new vl;for(const A of vi(e)){const s=n.data.field(A.fieldPath);if(s==null)return null;const i=r.Yt(A.kind);xi.vt.It(s,i)}return r.zt()}dn(e){const n=new vl;return xi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new vl;return xi.vt.It(Wi(this.databaseId,n),r.Yt(function(s){const i=vi(s);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let A=[];A.push(new vl);let s=0;for(const i of vi(e)){const o=r[s++];for(const a of A)if(this.fn(n,i.fieldPath)&&Gc(o))A=this.gn(A,i,o);else{const c=a.Yt(i.kind);xi.vt.It(o,c)}}return this.pn(A)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const A=[...e],s=[];for(const i of r.arrayValue.values||[])for(const o of A){const a=new vl;a.seed(o.zt()),xi.vt.It(i,a.Yt(n.kind)),s.push(a)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof Ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=yl(e),A=xo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const i=[];return V.forEach(s,o=>A.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new Vc(h.sequenceNumber,new gr(Yi(h.readTime),new ae(sA(h.documentKey)),h.largestBatchId)):Vc.empty(),w=d.fields.map(([m,C])=>new rh(yt.fromServerFormat(m),C));return new $h(d.indexId,d.collectionGroup,w,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,A)=>{const s=r.indexState.sequenceNumber-A.indexState.sequenceNumber;return s!==0?s:Ne(r.collectionGroup,A.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const A=yl(e),s=xo(e);return this.yn(e).next(i=>A.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>V.forEach(o,a=>s.put(MC(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(A,s)=>{const i=r.get(A.collectionGroup);return(i?V.resolve(i):this.getFieldIndexes(e,A.collectionGroup)).next(o=>(r.set(A.collectionGroup,o),V.forEach(o,a=>this.wn(e,A,a).next(c=>{const d=this.Sn(s,a);return c.isEqual(d)?V.resolve():this.bn(e,s,a,c,d)}))))})}Dn(e,n,r,A){return Bo(e).put({indexId:A.indexId,uid:this.uid,arrayValue:A.arrayValue,directionalValue:A.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,A){return Bo(e).delete([A.indexId,this.uid,A.arrayValue,A.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const A=Bo(e);let s=new at(ss);return A.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{s=s.add(new Ci(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,n){let r=new at(ss);const A=this.Vn(n,e);if(A==null)return r;const s=d0(n);if(s!=null){const i=e.data.field(s.fieldPath);if(Gc(i))for(const o of i.arrayValue.values||[])r=r.add(new Ci(n.indexId,e.key,this.dn(o),A))}else r=r.add(new Ci(n.indexId,e.key,gd,A));return r}bn(e,n,r,A,s){X("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,c,d,h,f){const w=a.getIterator(),m=c.getIterator();let C=yo(w),_=yo(m);for(;C||_;){let B=!1,y=!1;if(C&&_){const v=d(C,_);v<0?y=!0:v>0&&(B=!0)}else C!=null?y=!0:B=!0;B?(h(_),_=yo(m)):y?(f(C),C=yo(w)):(C=yo(w),_=yo(m))}}(A,s,ss,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),V.waitFor(i)}yn(e){let n=1;return xo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,A,s)=>{s.done(),n=A.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>ss(i,o)).filter((i,o,a)=>!o||ss(i,a[o-1])!==0);const A=[];A.push(e);for(const i of r){const o=ss(i,e),a=ss(i,n);if(o===0)A[0]=e.Zt();else if(o>0&&a<0)A.push(i),A.push(i.Zt());else if(a>0)break}A.push(n);const s=[];for(let i=0;i<A.length;i+=2){if(this.Cn(A[i],A[i+1]))return[];const o=[A[i].indexId,this.uid,A[i].arrayValue,A[i].directionalValue,gd,[]],a=[A[i+1].indexId,this.uid,A[i+1].arrayValue,A[i+1].directionalValue,gd,[]];s.push(IDBKeyRange.bound(o,a))}return s}Cn(e,n){return ss(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($C)}getMinOffset(e,n){return V.mapArray(this.hn(n),r=>this.Pn(e,r).next(A=>A||ve())).next($C)}}function WC(t){return tn(t,"collectionParents")}function Bo(t){return tn(t,"indexEntries")}function yl(t){return tn(t,"indexConfiguration")}function xo(t){return tn(t,"indexState")}function $C(t){_e(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const A=t[r].indexState.offset;mv(A,e)<0&&(e=A),n<A.largestBatchId&&(n=A.largestBatchId)}return new gr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $n{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t,e,n){const r=t.store("mutations"),A=t.store("documentMutations"),s=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));s.push(a.next(()=>{_e(o===1)}));const c=[];for(const d of n.mutations){const h=tF(e,d.key.path,n.batchId);s.push(A.delete(h)),c.push(d.key)}return V.waitFor(s).next(()=>c)}function ef(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ve();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(41943040,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);class Xf{constructor(e,n,r,A){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=A,this.Fn={}}static lt(e,n,r,A){_e(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Xf(s,n,r,A)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return is(e).J({index:"userMutationsIndex",range:r},(A,s,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,A){const s=No(e),i=is(e);return i.add({}).next(o=>{_e(typeof o=="number");const a=new Ev(o,n,r,A),c=function(w,m,C){const _=C.baseMutations.map(y=>$c(w.ct,y)),B=C.mutations.map(y=>$c(w.ct,y));return{userId:m,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:_,mutations:B}}(this.serializer,this.userId,a),d=[];let h=new at((f,w)=>Ne(f.canonicalString(),w.canonicalString()));for(const f of A){const w=tF(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(s.put(w,QD))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),V.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return is(e).get(n).next(r=>r?(_e(r.userId===this.userId),Bi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?V.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const A=r.keys();return this.Fn[n]=A,A}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return is(e).J({index:"userMutationsIndex",range:A},(i,o,a)=>{o.userId===this.userId&&(_e(o.batchId>=r),s=Bi(this.serializer,o)),a.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return is(e).J({index:"userMutationsIndex",range:n,reverse:!0},(A,s,i)=>{r=s.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return is(e).U("userMutationsIndex",n).next(r=>r.map(A=>Bi(this.serializer,A)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ah(this.userId,n.path),A=IDBKeyRange.lowerBound(r),s=[];return No(e).J({range:A},(i,o,a)=>{const[c,d,h]=i,f=sA(d);if(c===this.userId&&n.path.isEqual(f))return is(e).get(h).next(w=>{if(!w)throw ve();_e(w.userId===this.userId),s.push(Bi(this.serializer,w))});a.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(Ne);const A=[];return n.forEach(s=>{const i=Ah(this.userId,s.path),o=IDBKeyRange.lowerBound(i),a=No(e).J({range:o},(c,d,h)=>{const[f,w,m]=c,C=sA(w);f===this.userId&&s.path.isEqual(C)?r=r.add(m):h.done()});A.push(a)}),V.waitFor(A).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1,s=Ah(this.userId,r),i=IDBKeyRange.lowerBound(s);let o=new at(Ne);return No(e).J({range:i},(a,c,d)=>{const[h,f,w]=a,m=sA(f);h===this.userId&&r.isPrefixOf(m)?m.length===A&&(o=o.add(w)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],A=[];return n.forEach(s=>{A.push(is(e).get(s).next(i=>{if(i===null)throw ve();_e(i.userId===this.userId),r.push(Bi(this.serializer,i))}))}),V.waitFor(A).next(()=>r)}removeMutationBatch(e,n){return ZF(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),V.forEach(r,A=>this.referenceDelegate.markPotentiallyOrphaned(e,A))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),A=[];return No(e).J({range:r},(s,i,o)=>{if(s[0]===this.userId){const a=sA(s[1]);A.push(a)}else o.done()}).next(()=>{_e(A.length===0)})})}containsKey(e,n){return e1(e,this.userId,n)}Nn(e){return t1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function e1(t,e,n){const r=Ah(e,n.path),A=r[1],s=IDBKeyRange.lowerBound(r);let i=!1;return No(t).J({range:s,H:!0},(o,a,c)=>{const[d,h,f]=o;d===e&&h===A&&(i=!0),c.done()}).next(()=>i)}function is(t){return tn(t,"mutations")}function No(t){return tn(t,"documentMutations")}function t1(t){return tn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zi(0)}static kn(){return new Zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Zi(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ee.fromTimestamp(new xt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(A=>(A.highestListenSequenceNumber=n,r&&(A.lastRemoteSnapshotVersion=r.toTimestamp()),n>A.highestListenSequenceNumber&&(A.highestListenSequenceNumber=n),this.Qn(e,A)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Co(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(_e(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let A=0;const s=[];return Co(e).J((i,o)=>{const a=Ll(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(A++,s.push(this.removeTargetData(e,a)))}).next(()=>V.waitFor(s)).next(()=>A)}forEachTarget(e,n){return Co(e).J((r,A)=>{const s=Ll(A);n(s)})}qn(e){return JC(e).get("targetGlobalKey").next(n=>(_e(n!==null),n))}Qn(e,n){return JC(e).put("targetGlobalKey",n)}Kn(e,n){return Co(e).put(JF(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$i(n),A=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Co(e).J({range:A,index:"queryTargetsIndex"},(i,o,a)=>{const c=Ll(o);gu(n,c.target)&&(s=c,a.done())}).next(()=>s)}addMatchingKeys(e,n,r){const A=[],s=ps(e);return n.forEach(i=>{const o=Hn(i.path);A.push(s.put({targetId:r,path:o})),A.push(this.referenceDelegate.addReference(e,r,i))}),V.waitFor(A)}removeMatchingKeys(e,n,r){const A=ps(e);return V.forEach(n,s=>{const i=Hn(s.path);return V.waitFor([A.delete([r,i]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ps(e),A=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(A)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),A=ps(e);let s=De();return A.J({range:r,H:!0},(i,o,a)=>{const c=sA(i[1]),d=new ae(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Hn(n.path),A=IDBKeyRange.bound([r],[$T(r)],!1,!0);let s=0;return ps(e).J({index:"documentTargetsIndex",H:!0,range:A},([i,o],a,c)=>{i!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return Co(e).get(n).next(r=>r?Ll(r):null)}}function Co(t){return tn(t,"targets")}function JC(t){return tn(t,"targetGlobal")}function ps(t){return tn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC([t,e],[n,r]){const A=Ne(t,n);return A===0?Ne(e,r):A}class W4{constructor(e){this.Un=e,this.buffer=new at(XC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){X("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ii(n)?X("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await si(n)}await this.Hn(3e5)})}}class q4{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Zn.oe);const r=new W4(n);return this.Jn.forEachTarget(e,A=>r.zn(A.sequenceNumber)).next(()=>this.Jn.Zn(e,A=>r.zn(A))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(qC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,A,s,i,o,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),A=this.params.maximumSequenceNumbersToCollect):A=h,i=Date.now(),this.nthSequenceNumber(e,A))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Qo()<=Ve.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${A} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:s,documentsRemoved:h})))}}function J4(t,e){return new q4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.db=e,this.garbageCollector=J4(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(A=>r+A))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,A)=>n(A))}addReference(e,n,r){return pd(e,r)}removeReference(e,n,r){return pd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pd(e,n)}nr(e,n){return function(A,s){let i=!1;return t1(A).Y(o=>e1(A,o,s).next(a=>(a&&(i=!0),V.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),A=[];let s=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(c=>{if(!c)return s++,r.getEntry(e,i).next(()=>(r.removeEntry(i,Ee.min()),ps(e).delete(function(h){return[0,Hn(h.path)]}(i))))});A.push(a)}}).next(()=>V.waitFor(A)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pd(e,n)}tr(e,n){const r=ps(e);let A,s=Zn.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:c})=>{i===0?(s!==Zn.oe&&n(new ae(sA(A)),s),s=c,A=a):s=Zn.oe}).next(()=>{s!==Zn.oe&&n(new ae(sA(A)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pd(t,e){return ps(t).put(function(r,A){return{targetId:0,path:Hn(r.path),sequenceNumber:A}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.changes=new oi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return hi(e).put(r)}removeEntry(e,n,r){return hi(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Yh(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=gt.newInvalidDocument(n);return hi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bl(n))},(A,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:gt.newInvalidDocument(n)};return hi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bl(n))},(A,s)=>{r={document:this.ir(n,s),size:ef(s)}}).next(()=>r)}getEntries(e,n){let r=tr();return this._r(e,n,(A,s)=>{const i=this.ir(A,s);r=r.insert(A,i)}).next(()=>r)}ar(e,n){let r=tr(),A=new dt(ae.comparator);return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o),A=A.insert(s,ef(i))}).next(()=>({documents:r,ur:A}))}_r(e,n,r){if(n.isEmpty())return V.resolve();let A=new at(e_);n.forEach(a=>A=A.add(a));const s=IDBKeyRange.bound(Bl(A.first()),Bl(A.last())),i=A.getIterator();let o=i.getNext();return hi(e).J({index:"documentKeyIndex",range:s},(a,c,d)=>{const h=ae.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&e_(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,c),o=i.hasNext()?i.getNext():null),o?d.$(Bl(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,A,s){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),Yh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hi(e).U(IDBKeyRange.bound(o,a,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=tr();for(const h of c){const f=this.ir(ae.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(mu(n,f)||A.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,A){let s=tr();const i=ZC(n,r),o=ZC(n,gr.max());return hi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,c,d)=>{const h=this.ir(ae.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===A&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Z4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return YC(e).get("remoteDocumentGlobalKey").next(n=>(_e(!!n),n))}rr(e,n){return YC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=P4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return gt.newInvalidDocument(e)}}function r1(t){return new Y4(t)}class Z4 extends n1{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new oi(r=>r.toString(),(r,A)=>r.isEqual(A))}applyChanges(e){const n=[];let r=0,A=new at((s,i)=>Ne(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=LC(this.cr.serializer,i);A=A.add(s.path.popLast());const c=ef(a);r+=c-o.size,n.push(this.cr.addEntry(e,s,a))}else if(r-=o.size,this.trackRemovals){const a=LC(this.cr.serializer,i.convertToNoDocument(Ee.min()));n.push(this.cr.addEntry(e,s,a))}}),A.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:A})=>(A.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:r.get(s).readTime})}),r))}}function YC(t){return tn(t,"remoteDocumentGlobal")}function hi(t){return tn(t,"remoteDocumentsV14")}function Bl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZC(t,e){const n=e.documentKey.path.toArray();return[t,Yh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function e_(t,e){const n=t.path.toArray(),r=e.path.toArray();let A=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(A=Ne(n[s],r[s]),A)return A;return A=Ne(n.length,r.length),A||(A=Ne(n[n.length-2],r[r.length-2]),A||Ne(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r,A){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=A}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(A=>(r=A,this.remoteDocumentCache.getEntry(e,n))).next(A=>(r!==null&&ic(r.mutation,A,er.empty(),xt.now()),A))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,n,r=De()){const A=iA();return this.populateOverlays(e,A,n).next(()=>this.computeViews(e,n,A,r).next(s=>{let i=Pl();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=iA();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,De()))}populateOverlays(e,n,r){const A=[];return r.forEach(s=>{n.has(s)||A.push(s)}),this.documentOverlayCache.getOverlays(e,A).next(s=>{s.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,A){let s=tr();const i=sc(),o=function(){return sc()}();return n.forEach((a,c)=>{const d=r.get(c.key);A.has(c.key)&&(d===void 0||d.mutation instanceof qA)?s=s.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),ic(d.mutation,c,d.mutation.getFieldMask(),xt.now())):i.set(c.key,er.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,d)=>i.set(c,d)),n.forEach((c,d)=>{var h;return o.set(c,new eL(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=sc();let A=new dt((i,o)=>i-o),s=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let d=r.get(a)||er.empty();d=o.applyToLocalView(c,d),r.set(a,d);const h=(A.get(o.batchId)||De()).add(a);A=A.insert(o.batchId,h)})}).next(()=>{const i=[],o=A.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,d=a.value,h=CF();d.forEach(f=>{if(!s.has(f)){const w=UF(n.get(f),r.get(f));w!==null&&h.set(f,w),s=s.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,A){return function(i){return ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,A):this.getDocumentsMatchingCollectionQuery(e,n,r,A)}getNextDocuments(e,n,r,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,A).next(s=>{const i=A-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,A-s.size):V.resolve(iA());let o=-1,a=s;return i.next(c=>V.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,De())).next(d=>({batchId:o,changes:xF(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let A=Pl();return r.isFoundDocument()&&(A=A.insert(r.key,r)),A})}getDocumentsMatchingCollectionGroupQuery(e,n,r,A){const s=n.collectionGroup;let i=Pl();return this.indexManager.getCollectionParents(e,s).next(o=>V.forEach(o,a=>{const c=function(h,f){return new $A(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,A).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,A){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,A))).next(i=>{s.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,gt.newInvalidDocument(d)))});let o=Pl();return i.forEach((a,c)=>{const d=s.get(a);d!==void 0&&ic(d.mutation,c,er.empty(),xt.now()),mu(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(A){return{id:A.id,version:A.version,createTime:Ht(A.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(A){return{name:A.name,query:Qv(A.bundledQuery),readTime:Ht(A.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.overlays=new dt(ae.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=iA();return V.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((A,s)=>{this.ht(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const A=this.Ir.get(r);return A!==void 0&&(A.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const A=iA(),s=n.length+1,i=new ae(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&A.set(a.getKey(),a)}return V.resolve(A)}getOverlaysForCollectionGroup(e,n,r,A){let s=new dt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=iA(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=iA(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=A)););return V.resolve(o)}ht(e,n,r){const A=this.overlays.get(r.key);if(A!==null){const i=this.Ir.get(A.largestBatchId).delete(r.key);this.Ir.set(A.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Tv(n,r));let s=this.Ir.get(n);s===void 0&&(s=De(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.Tr=new at(sn.Er),this.dr=new at(sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new sn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new sn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new Ke([])),r=new sn(n,e),A=new sn(n,e+1),s=[];return this.dr.forEachInRange([r,A],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new Ke([])),r=new sn(n,e),A=new sn(n,e+1);let s=De();return this.dr.forEachInRange([r,A],i=>{s=s.add(i.key)}),s}containsKey(e){const n=new sn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new at(sn.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,A){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ev(s,n,r,A);this.mutationQueue.push(i);for(const o of A)this.br=this.br.add(new sn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return V.resolve(i)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=this.vr(r),s=A<0?0:A;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sn(n,0),A=new sn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,A],i=>{const o=this.Dr(i.wr);s.push(o)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(Ne);return n.forEach(A=>{const s=new sn(A,0),i=new sn(A,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],o=>{r=r.add(o.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const i=new sn(new ae(s),0);let o=new at(Ne);return this.br.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===A&&(o=o.add(a.wr)),!0)},i),V.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const A=this.Dr(r);A!==null&&n.push(A)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,A=>{const s=new sn(A.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new sn(n,0),A=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.Mr=e,this.docs=function(){return new dt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,A=this.docs.get(r),s=A?A.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(A=>{const s=this.docs.get(A);r=r.insert(A,s?s.document.mutableCopy():gt.newInvalidDocument(A))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,A){let s=tr();const i=n.path,o=new ae(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||mv(JT(d),r)<=0||(A.has(d.key)||mu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,A){ve()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new iL(this)}getSize(e){return V.resolve(this.size)}}class iL extends n1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,A)=>{A.isValidDocument()?n.push(this.cr.addEntry(e,A)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.persistence=e,this.Nr=new oi(n=>$i(n),gu),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rv,this.targetCount=0,this.kr=Zi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,A)=>n(A)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let A=0;const s=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),A++)}),V.waitFor(s).next(()=>A)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const A=this.persistence.referenceDelegate,s=[];return A&&n.forEach(i=>{s.push(A.markPotentiallyOrphaned(e,i))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zn(0),this.Kr=!1,this.Kr=!0,this.$r=new rL,this.referenceDelegate=e(this),this.Ur=new oL(this),this.indexManager=new K4,this.remoteDocumentCache=function(A){return new sL(A)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new qF(n),this.Gr=new tL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new AL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const A=new aL(this.Qr.next());return this.referenceDelegate.zr(),r(A).next(s=>this.referenceDelegate.jr(A).next(()=>s)).toPromise().then(s=>(A.raiseOnCommittedEvent(),s))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class aL extends YT{constructor(e){super(),this.currentSequenceNumber=e}}class Yf{constructor(e){this.persistence=e,this.Jr=new Rv,this.Yr=null}static Zr(e){return new Yf(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(A=>this.Xr.add(A.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(A=>{A.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const A=ae.fromPath(r);return this.ei(e,A).next(s=>{s||n.removeEntry(A,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.serializer=e}O(e,n,r,A){const s=new Gf("createOrUpgrade",n);r<1&&A>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fC,{unique:!0}),a.createObjectStore("documentMutations")}(e),t_(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=V.resolve();return r<3&&A>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),t_(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&A>=4&&(r!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fC,{unique:!0});const h=c.store("mutations"),f=d.map(w=>h.put(w));return V.waitFor(f)})}(e,s))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&A>=5&&(i=i.next(()=>this.ni(s))),r<6&&A>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&A>=7&&(i=i.next(()=>this.ii(s))),r<8&&A>=8&&(i=i.next(()=>this.si(e,s))),r<9&&A>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&A>=10&&(i=i.next(()=>this.oi(s))),r<11&&A>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&A>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:jD});c.createIndex("collectionPathOverlayIndex",KD,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",GD,{unique:!1})})(e)})),r<13&&A>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:SD});c.createIndex("documentKeyIndex",kD),c.createIndex("collectionGroupIndex",RD)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&A>=14&&(i=i.next(()=>this.ai(e,s))),r<15&&A>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:OD}).createIndex("sequenceNumberIndex",MD,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:VD}).createIndex("documentKeyIndex",HD,{unique:!1})}(e))),r<16&&A>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&A>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,A)=>{n+=ef(A)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(A=>V.forEach(A,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>V.forEach(o,a=>{_e(a.userId===s.userId);const c=Bi(this.serializer,a);return ZF(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(A=>{const s=[];return r.J((i,o)=>{const a=new Ke(i),c=function(h){return[0,Hn(h)]}(a);s.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:Hn(h),sequenceNumber:A.highestListenSequenceNumber}))(a)))}).next(()=>V.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:LD});const r=n.store("collectionParents"),A=new kv,s=i=>{if(A.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:Hn(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new Ke(i);return s(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],c)=>{const d=sA(o);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,A)=>{const s=Ll(A),i=JF(this.serializer,s);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),A=[];return r.J((s,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new ae(Ke.fromString(h.document.name).popFirst(5)):h.noDocument?ae.fromSegments(h.noDocument.path):h.unknownDocument?ae.fromSegments(h.unknownDocument.path):ve()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};A.push(o.put(c))}).next(()=>V.waitFor(A))}ai(e,n){const r=n.store("mutations"),A=r1(this.serializer),s=new s1(Yf.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var c;let d=(c=o.get(a.userId))!==null&&c!==void 0?c:De();Bi(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),V.forEach(o,(a,c)=>{const d=new an(c),h=Jf.lt(this.serializer,d),f=s.getIndexManager(d),w=Xf.lt(d,this.serializer,f,s.referenceDelegate);return new A1(A,w,h,f).recalculateAndSaveOverlaysForDocumentKeys(new h0(n,Zn.oe),a).next()})})}}function t_(t){t.createObjectStore("targetDocuments",{keyPath:PD}).createIndex("documentTargetsIndex",DD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ND,{unique:!0}),t.createObjectStore("targetGlobal")}const Tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Nv{constructor(e,n,r,A,s,i,o,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Nv.D())throw new J(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new X4(this,A),this.Ai=n+"main",this.serializer=new qF(a),this.Ri=new cA(this.Ai,this.hi,new lL(this.serializer)),this.$r=new L4,this.Ur=new z4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=r1(this.serializer),this.Gr=new D4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(j.FAILED_PRECONDITION,Tp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Zn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>md(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ii(e))return X("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return xl(e).get("owner").next(n=>V.resolve(this.vi(n)))}Ci(e){return md(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=tn(n,"clientMetadata");return r.U().next(A=>{const s=this.xi(A,18e5),i=A.filter(o=>s.indexOf(o)===-1);return V.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?V.resolve(!0):xl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new J(j.FAILED_PRECONDITION,Tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||md(e).U().next(r=>this.xi(r,5e3).find(A=>{if(this.clientId!==A.clientId){const s=!this.networkEnabled&&A.networkEnabled,i=!this.inForeground&&A.inForeground,o=this.networkEnabled===A.networkEnabled;if(s||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&X("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new h0(e,Zn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>md(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Xf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new G4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Jf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("IndexedDbPersistence","Starting transaction:",e);const A=n==="readonly"?"readonly":"readwrite",s=function(a){return a===17?$D:a===16?WD:a===15?vv:a===14?AF:a===13?rF:a===12?zD:a===11?nF:void ve()}(this.hi);let i;return this.Ri.runTransaction(e,A,s,o=>(i=new h0(o,this.Qr?this.Qr.next():Zn.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new J(j.FAILED_PRECONDITION,XT);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return xl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(j.FAILED_PRECONDITION,Tp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xl(e).put("owner",n)}static D(){return cA.D()}bi(e){const n=xl(e);return n.get("owner").next(r=>this.vi(r)?(X("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;IT()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return X("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xl(t){return tn(t,"owner")}function md(t){return tn(t,"clientMetadata")}function Pv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n,r,A){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=A}static Wi(e,n){let r=De(),A=De();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:A=A.add(s.doc.key)}return new Dv(e,n.fromCache,r,A)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return IT()?8:ZT(Tt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,A){const s={result:null};return this.Yi(e,n).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,n,A,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new cL;return this.Xi(e,n,i).next(o=>{if(s.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>s.result)}es(e,n,r,A){return r.documentReadCount<this.ji?(Qo()<=Ve.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Qo()<=Ve.DEBUG&&X("QueryEngine","Query:",So(n),"scans",r.documentReadCount,"local documents and returns",A,"documents as results."),r.documentReadCount>this.Hi*A?(Qo()<=Ve.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):V.resolve())}Yi(e,n){if(bC(n))return V.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(A=>A===0?null:(n.limit!==null&&A===1&&(n=Xh(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=De(...s);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.ts(n,o);return this.ns(n,c,i,a.readTime)?this.Yi(e,Xh(n,null,"F")):this.rs(e,c,n,a)}))})))}Zi(e,n,r,A){return bC(n)||A.isEqual(Ee.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const i=this.ts(n,s);return this.ns(n,i,r,A)?V.resolve(null):(Qo()<=Ve.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),So(n)),this.rs(e,i,n,qT(A,-1)).next(o=>o))})}ts(e,n){let r=new at(yF(e));return n.forEach((A,s)=>{mu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,A){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(A)>0)}Xi(e,n,r){return Qo()<=Ve.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",So(n)),this.Ji.getDocumentsMatchingQuery(e,n,gr.min(),r)}rs(e,n,r,A){return this.Ji.getDocumentsMatchingQuery(e,r,A).next(s=>(n.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n,r,A){this.persistence=e,this.ss=n,this.serializer=A,this.os=new dt(Ne),this._s=new oi(s=>$i(s),gu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function o1(t,e,n,r){return new uL(t,e,n,r)}async function a1(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let A;return n.mutationQueue.getAllMutationBatches(r).next(s=>(A=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=De();for(const c of A){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of s){o.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function dL(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const A=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,c,d){const h=c.batch,f=h.keys();let w=V.resolve();return f.forEach(m=>{w=w.next(()=>d.getEntry(a,m)).next(C=>{const _=c.docVersions.get(m);_e(_!==null),C.version.compareTo(_)<0&&(h.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),d.addEntry(C)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,A,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=De();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,A))})}function l1(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function hL(t,e){const n=ue(t),r=e.snapshotVersion;let A=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});A=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=A.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let w=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(St.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),A=A.insert(h,w),function(C,_,B){return C.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(f,w,d)&&o.push(n.Ur.updateTargetData(s,w))});let a=tr(),c=De();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(c1(s,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!r.isEqual(Ee.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return V.waitFor(o).next(()=>i.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(n.os=A,s))}function c1(t,e,n){let r=De(),A=De();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=tr();return n.forEach((o,a)=>{const c=s.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(A=A.add(o)),a.isNoDocument()&&a.version.isEqual(Ee.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):X("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:A}})}function fL(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ba(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let A;return n.Ur.getTargetData(r,e).next(s=>s?(A=s,V.resolve(A)):n.Ur.allocateTargetId(r).next(i=>(A=new TA(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,A).next(()=>A))))}).then(r=>{const A=n.os.get(r.targetId);return(A===null||r.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ta(t,e,n){const r=ue(t),A=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,A))}catch(i){if(!ii(i))throw i;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(A.target)}function tf(t,e,n){const r=ue(t);let A=Ee.min(),s=De();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=ue(a),f=h._s.get(d);return f!==void 0?V.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,i,jn(e)).next(o=>{if(o)return A=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?A:Ee.min(),n?s:De())).next(o=>(h1(r,vF(e),o),{documents:o,Ts:s})))}function u1(t,e){const n=ue(t),r=ue(n.Ur),A=n.os.get(e);return A?Promise.resolve(A.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(i=>i?i.target:null))}function d1(t,e){const n=ue(t),r=n.us.get(e)||Ee.min();return n.persistence.runTransaction("Get new document changes","readonly",A=>n.cs.getAllFromCollectionGroup(A,e,qT(r,-1),Number.MAX_SAFE_INTEGER)).then(A=>(h1(n,e,A),A))}function h1(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((A,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function gL(t,e,n,r){const A=ue(t);let s=De(),i=tr();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=A.cs.newChangeBuffer({trackRemovals:!0}),a=await ba(A,function(d){return jn(ja(Ke.fromString(`__bundle__/docs/${d}`)))}(r));return A.persistence.runTransaction("Apply bundle documents","readwrite",c=>c1(c,o,i).next(d=>(o.apply(c),d)).next(d=>A.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>A.Ur.addMatchingKeys(c,s,a.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function pL(t,e,n=De()){const r=await ba(t,jn(Qv(e.bundledQuery))),A=ue(t);return A.persistence.runTransaction("Save named query","readwrite",s=>{const i=Ht(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return A.Gr.saveNamedQuery(s,e);const o=r.withResumeToken(St.EMPTY_BYTE_STRING,i);return A.os=A.os.insert(o.targetId,o),A.Ur.updateTargetData(s,o).next(()=>A.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>A.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>A.Gr.saveNamedQuery(s,e))})}function n_(t,e){return`firestore_clients_${t}_${e}`}function r_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fp(t,e){return`firestore_targets_${t}_${e}`}class nf{constructor(e,n,r,A){this.user=e,this.batchId=n,this.state=r,this.error=A}static Rs(e,n,r){const A=JSON.parse(r);let s,i=typeof A=="object"&&["pending","acknowledged","rejected"].indexOf(A.state)!==-1&&(A.error===void 0||typeof A.error=="object");return i&&A.error&&(i=typeof A.error.message=="string"&&typeof A.error.code=="string",i&&(s=new J(A.error.code,A.error.message))),i?new nf(e,n,A.state,s):(Vt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let A,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(A=new J(r.error.code,r.error.message))),s?new oc(e,r.state,A):(Vt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let A=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Cv();for(let i=0;A&&i<r.activeTargetIds.length;++i)A=eF(r.activeTargetIds[i]),s=s.add(r.activeTargetIds[i]);return A?new rf(e,s):(Vt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Lv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Lv(n.clientId,n.onlineState):(Vt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class b0{constructor(){this.activeTargetIds=Cv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Up{constructor(e,n,r,A,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=A,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new dt(Ne),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=n_(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new b0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const A=this.getItem(n_(this.persistenceKey,r));if(A){const s=rf.Rs(r,A);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,A)=>{A.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(Fp(this.persistenceKey,e));if(A){const s=oc.Rs(e,A);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(A=>{this.Qs(A)}),this.currentUser=e,r.forEach(A=>{this.addPendingMutation(A)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return X("SharedClientState","READ",e,n),n}setItem(e,n){X("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){X("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(X("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let i=Zn.oe;if(s!=null)try{const o=JSON.parse(s);_e(typeof o=="number"),i=o}catch(o){Vt("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==Zn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(A=>this.syncEngine.eo(A)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const A=new nf(this.currentUser,e,n,r),s=r_(this.persistenceKey,this.currentUser,e);this.setItem(s,A.Vs())}Qs(e){const n=r_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const A=Fp(this.persistenceKey,e),s=new oc(e,n,r);this.setItem(A,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return rf.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),A=Number(r[1]),s=r[2]!==void 0?r[2]:null;return nf.Rs(new an(s),A,n)}Ys(e,n){const r=this.Ms.exec(e),A=Number(r[1]);return oc.Rs(A,n)}Ls(e){return Lv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);X("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),A=this.ks(this.Ss),s=this.ks(r),i=[],o=[];return s.forEach(a=>{A.has(a)||i.push(a)}),A.forEach(a=>{s.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Cv();return e.forEach((r,A)=>{n=n.unionWith(A.activeTargetIds)}),n}}class f1{constructor(){this.so=new b0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new b0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd=null;function Qp(){return wd===null?wd=function(){return 268435456+Math.round(2147483648*Math.random())}():wd++,"0x"+wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class yL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${A}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${A}`:`project_id=${A}&database_id=${s}`}get Fo(){return!1}Mo(n,r,A,s,i){const o=Qp(),a=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${o}:`,a,A);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,i),this.No(n,a,c,A).then(d=>(X("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw hA("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",A),d})}Lo(n,r,A,s,i,o){return this.Mo(n,r,A,s,i)}Oo(n,r,A){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>n[i]=s),A&&A.headers.forEach((s,i)=>n[i]=s)}xo(n,r){const A=wL[n];return`${this.Do}/v1/${r}:${A}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,A){const s=Qp();return new Promise((i,o)=>{const a=new VT;a.setWithCredentials(!0),a.listenOnce(HT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case nh.NO_ERROR:const d=a.getResponseJson();X(bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case nh.TIMEOUT:X(bn,`RPC '${e}' ${s} timed out`),o(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const h=a.getStatus();if(X(bn,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const m=function(_){const B=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(B)>=0?B:j.UNKNOWN}(w.status);o(new J(m,w.message))}else o(new J(j.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new J(j.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{X(bn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(A);X(bn,`RPC '${e}' ${s} sending request:`,A),a.send(n,"POST",c,r,15)})}Bo(e,n,r){const A=Qp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=GT(),o=KT(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=s.join("");X(bn,`Creating RPC '${e}' stream ${A}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,w=!1;const m=new vL({Io:_=>{w?X(bn,`Not sending because RPC '${e}' stream ${A} is closed:`,_):(f||(X(bn,`Opening RPC '${e}' stream ${A} transport.`),h.open(),f=!0),X(bn,`RPC '${e}' stream ${A} sending:`,_),h.send(_))},To:()=>h.close()}),C=(_,B,y)=>{_.listen(B,v=>{try{y(v)}catch(R){setTimeout(()=>{throw R},0)}})};return C(h,Nl.EventType.OPEN,()=>{w||(X(bn,`RPC '${e}' stream ${A} transport opened.`),m.yo())}),C(h,Nl.EventType.CLOSE,()=>{w||(w=!0,X(bn,`RPC '${e}' stream ${A} transport closed`),m.So())}),C(h,Nl.EventType.ERROR,_=>{w||(w=!0,hA(bn,`RPC '${e}' stream ${A} transport errored:`,_),m.So(new J(j.UNAVAILABLE,"The operation could not be completed")))}),C(h,Nl.EventType.MESSAGE,_=>{var B;if(!w){const y=_.data[0];_e(!!y);const v=y,R=v.error||((B=v[0])===null||B===void 0?void 0:B.error);if(R){X(bn,`RPC '${e}' stream ${A} received error:`,R);const S=R.status;let N=function(b){const Q=Kt[b];if(Q!==void 0)return kF(Q)}(S),I=R.message;N===void 0&&(N=j.INTERNAL,I="Unknown error status: "+S+" with message "+R.message),w=!0,m.So(new J(N,I)),h.close()}else X(bn,`RPC '${e}' stream ${A} received:`,y),m.bo(y)}}),C(o,jT.STAT_EVENT,_=>{_.stat===u0.PROXY?X(bn,`RPC '${e}' stream ${A} detected buffering proxy`):_.stat===u0.NOPROXY&&X(bn,`RPC '${e}' stream ${A} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof window<"u"?window:null}function lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){return new E4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r=1e3,A=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=A,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),A=Math.max(0,n-r);A>0&&X("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,A,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,r,A,s,i,o,a){this.ui=e,this.Ho=r,this.Jo=A,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ov(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Vt(n.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,A])=>{this.Yo===n&&this.P_(r,A)},r=>{e(()=>{const A=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(A)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(A=>{r(()=>this.I_(A))}),this.stream.onMessage(A=>{r(()=>++this.e_==1?this.E_(A):this.onNext(A))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BL extends p1{constructor(e,n,r,A,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=F4(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ee.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Ee.min():i.readTime?Ht(i.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=x0(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=qh(a)?{documents:jF(s,a)}:{query:KF(s,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=DF(s,i.resumeToken);const c=y0(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ee.min())>0){o.readTime=Ea(s,i.snapshotVersion.toTimestamp());const c=y0(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=Q4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=x0(this.serializer),n.removeTarget=e,this.a_(n)}}class xL extends p1{constructor(e,n,r,A,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=U4(e.writeResults,e.commitTime),r=Ht(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=x0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$c(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL extends class{}{constructor(e,n,r,A){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=A,this.y_=!1}w_(){if(this.y_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,B0(n,r),A,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(j.UNKNOWN,s.toString())})}Lo(e,n,r,A,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,B0(n,r),A,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(j.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _L{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vt(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,r,A,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{r.enqueueAndForget(async()=>{ai(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=ue(a);c.L_.add(4),await za(c),c.q_.set("Unknown"),c.L_.delete(4),await xu(c)}(this))})}),this.q_=new _L(r,A)}}async function xu(t){if(ai(t))for(const e of t.B_)await e(!0)}async function za(t){for(const e of t.B_)await e(!1)}function Zf(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Hv(n)?Vv(n):$a(n).r_()&&Mv(n,e))}function Fa(t,e){const n=ue(t),r=$a(n);n.N_.delete(e),r.r_()&&m1(n,e),n.N_.size===0&&(r.r_()?r.o_():ai(n)&&n.q_.set("Unknown"))}function Mv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$a(t).A_(e)}function m1(t,e){t.Q_.xe(e),$a(t).R_(e)}function Vv(t){t.Q_=new x4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),$a(t).start(),t.q_.v_()}function Hv(t){return ai(t)&&!$a(t).n_()&&t.N_.size>0}function ai(t){return ue(t).L_.size===0}function w1(t){t.Q_=void 0}async function EL(t){t.q_.set("Online")}async function bL(t){t.N_.forEach((e,n)=>{Mv(t,e)})}async function TL(t,e){w1(t),Hv(t)?(t.q_.M_(e),Vv(t)):t.q_.set("Unknown")}async function FL(t,e,n){if(t.q_.set("Online"),e instanceof PF&&e.state===2&&e.cause)try{await async function(A,s){const i=s.cause;for(const o of s.targetIds)A.N_.has(o)&&(await A.remoteSyncer.rejectListen(o,i),A.N_.delete(o),A.Q_.removeTarget(o))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Af(t,r)}else if(e instanceof ah?t.Q_.Ke(e):e instanceof NF?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await l1(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Q_.rt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const d=s.N_.get(a);if(!d)return;s.N_.set(a,d.withResumeToken(St.EMPTY_BYTE_STRING,d.snapshotVersion)),m1(s,a);const h=new TA(d.target,a,c,d.sequenceNumber);Mv(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Af(t,r)}}async function Af(t,e,n){if(!ii(e))throw e;t.L_.add(1),await za(t),t.q_.set("Offline"),n||(n=()=>l1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xu(t)})}function v1(t,e){return e().catch(n=>Af(t,n,e))}async function Wa(t){const e=ue(t),n=Js(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UL(e);)try{const A=await fL(e.localStore,r);if(A===null){e.O_.length===0&&n.o_();break}r=A.batchId,QL(e,A)}catch(A){await Af(e,A)}y1(e)&&B1(e)}function UL(t){return ai(t)&&t.O_.length<10}function QL(t,e){t.O_.push(e);const n=Js(t);n.r_()&&n.V_&&n.m_(e.mutations)}function y1(t){return ai(t)&&!Js(t).n_()&&t.O_.length>0}function B1(t){Js(t).start()}async function SL(t){Js(t).p_()}async function kL(t){const e=Js(t);for(const n of t.O_)e.m_(n.mutations)}async function RL(t,e,n){const r=t.O_.shift(),A=bv.from(r,e,n);await v1(t,()=>t.remoteSyncer.applySuccessfulWrite(A)),await Wa(t)}async function NL(t,e){e&&Js(t).V_&&await async function(r,A){if(function(i){return SF(i)&&i!==j.ABORTED}(A.code)){const s=r.O_.shift();Js(r).s_(),await v1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,A)),await Wa(r)}}(t,e),y1(t)&&B1(t)}async function s_(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ai(n);n.L_.add(3),await za(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xu(n)}async function T0(t,e){const n=ue(t);e?(n.L_.delete(2),await xu(n)):e||(n.L_.add(2),await za(n),n.q_.set("Unknown"))}function $a(t){return t.K_||(t.K_=function(n,r,A){const s=ue(n);return s.w_(),new BL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:EL.bind(null,t),Ro:bL.bind(null,t),mo:TL.bind(null,t),d_:FL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Hv(t)?Vv(t):t.q_.set("Unknown")):(await t.K_.stop(),w1(t))})),t.K_}function Js(t){return t.U_||(t.U_=function(n,r,A){const s=ue(n);return s.w_(),new xL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SL.bind(null,t),mo:NL.bind(null,t),f_:kL.bind(null,t),g_:RL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wa(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,r,A,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=A,this.removalCallback=s,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,A,s){const i=Date.now()+r,o=new jv(e,n,i,A,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qa(t,e){if(Vt("AsyncQueue",`${e}: ${t}`),ii(t))return new J(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Pl(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new sa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(!A.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.W_=new dt(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ua{constructor(e,n,r,A,s,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=A,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,A,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Ua(e,n,sa.emptySet(n),i,r,A,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let A=0;A<n.length;A++)if(n[A].type!==r[A].type||!n[A].doc.isEqual(r[A].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class DL{constructor(){this.queries=o_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const A=ue(n),s=A.queries;A.queries=o_(),s.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new J(j.ABORTED,"Firestore shutting down"))}}function o_(){return new oi(t=>wF(t),pu)}async function Kv(t,e){const n=ue(t);let r=3;const A=e.query;let s=n.queries.get(A);s?!s.H_()&&e.J_()&&(r=2):(s=new PL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(A,!0);break;case 1:s.z_=await n.onListen(A,!1);break;case 2:await n.onFirstRemoteStoreListen(A)}}catch(i){const o=qa(i,`Initialization of query '${So(e.query)}' failed`);return void e.onError(o)}n.queries.set(A,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&zv(n)}async function Gv(t,e){const n=ue(t),r=e.query;let A=3;const s=n.queries.get(r);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?A=e.J_()?0:1:!s.H_()&&e.J_()&&(A=2))}switch(A){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LL(t,e){const n=ue(t);let r=!1;for(const A of e){const s=A.query,i=n.queries.get(s);if(i){for(const o of i.j_)o.X_(A)&&(r=!0);i.z_=A}}r&&zv(n)}function OL(t,e,n){const r=ue(t),A=r.queries.get(e);if(A)for(const s of A.j_)s.onError(n);r.queries.delete(e)}function zv(t){t.Y_.forEach(e=>{e.next()})}var F0,a_;(a_=F0||(F0={})).ea="default",a_.Cache="cache";class Wv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const A of e.docChanges)A.type!==3&&r.push(A);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==F0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.serializer=e}Es(e){return uA(this.serializer,e)}ds(e){return e.metadata.exists?HF(this.serializer,e.document,!1):gt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ht(e)}}class VL{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=x1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ke.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new l_(this.serializer);for(const A of e)if(A.metadata.queries){const s=r.Es(A.metadata.name);for(const i of A.metadata.queries){const o=(n.get(i)||De()).add(s);n.set(i,o)}}return n}async complete(){const e=await gL(this.localStore,new l_(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await pL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function x1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.key=e}}class _1{constructor(e){this.key=e}}class I1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=yF(e),this.Ra=new sa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new i_,A=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,i=A,o=!1;const a=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,c=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal((d,h)=>{const f=A.get(d),w=mu(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;f&&w?f.data.isEqual(w.data)?m!==C&&(r.track({type:3,doc:w}),_=!0):this.ga(f,w)||(r.track({type:2,doc:w}),_=!0,(a&&this.Aa(w,a)>0||c&&this.Aa(w,c)<0)&&(o=!0)):!f&&w?(r.track({type:0,doc:w}),_=!0):f&&!w&&(r.track({type:1,doc:f}),_=!0,(a||c)&&(o=!0)),_&&(w?(i=i.add(w),s=C?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,A){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(w,m){const C=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return C(w)-C(m)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),A=A!=null&&A;const o=n&&!A?this.ya():[],a=this.da.size===0&&this.current&&!A?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new Ua(this.query,e.Ra,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new i_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new C1(r))}),n}ba(e){this.Ta=e.Ts,this.da=De();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ua.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class HL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jL{constructor(e){this.key=e,this.va=!1}}class KL{constructor(e,n,r,A,s,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=A,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new oi(o=>wF(o),pu),this.Ma=new Map,this.xa=new Set,this.Oa=new dt(ae.comparator),this.Na=new Map,this.La=new Rv,this.Ba={},this.ka=new Map,this.qa=Zi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function GL(t,e,n=!0){const r=eg(t);let A;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),A=s.view.Da()):A=await E1(r,e,n,!0),A}async function zL(t,e){const n=eg(t);await E1(n,e,!0,!1)}async function E1(t,e,n,r){const A=await ba(t.localStore,jn(e)),s=A.targetId,i=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await $v(t,e,s,i==="current",A.resumeToken)),t.isPrimaryClient&&n&&Zf(t.remoteStore,A),o}async function $v(t,e,n,r,A){t.Ka=(h,f,w)=>async function(C,_,B,y){let v=_.view.ma(B);v.ns&&(v=await tf(C.localStore,_.query,!1).then(({documents:I})=>_.view.ma(I,v)));const R=y&&y.targetChanges.get(_.targetId),S=y&&y.targetMismatches.get(_.targetId)!=null,N=_.view.applyChanges(v,C.isPrimaryClient,R,S);return U0(C,_.targetId,N.wa),N.snapshot}(t,h,f,w);const s=await tf(t.localStore,e,!0),i=new I1(e,s.Ts),o=i.ma(s.documents),a=yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",A),c=i.applyChanges(o,t.isPrimaryClient,a);U0(t,n,c.wa);const d=new HL(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function WL(t,e,n){const r=ue(t),A=r.Fa.get(e),s=r.Ma.get(A.targetId);if(s.length>1)return r.Ma.set(A.targetId,s.filter(i=>!pu(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(A.targetId),r.sharedClientState.isActiveQueryTarget(A.targetId)||await Ta(r.localStore,A.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(A.targetId),n&&Fa(r.remoteStore,A.targetId),Qa(r,A.targetId)}).catch(si)):(Qa(r,A.targetId),await Ta(r.localStore,A.targetId,!0))}async function $L(t,e){const n=ue(t),r=n.Fa.get(e),A=n.Ma.get(r.targetId);n.isPrimaryClient&&A.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fa(n.remoteStore,r.targetId))}async function qL(t,e,n){const r=Yv(t);try{const A=await function(i,o){const a=ue(i),c=xt.now(),d=o.reduce((w,m)=>w.add(m.key),De());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",w=>{let m=tr(),C=De();return a.cs.getEntries(w,d).next(_=>{m=_,m.forEach((B,y)=>{y.isValidDocument()||(C=C.add(B))})}).next(()=>a.localDocuments.getOverlayedDocuments(w,m)).next(_=>{h=_;const B=[];for(const y of o){const v=v4(y,h.get(y.key).overlayedDocument);v!=null&&B.push(new qA(y.key,v,lF(v.value.mapValue),Bt.exists(!0)))}return a.mutationQueue.addMutationBatch(w,c,B,o)}).next(_=>{f=_;const B=_.applyToLocalDocumentSet(h,C);return a.documentOverlayCache.saveOverlays(w,_.batchId,B)})}).then(()=>({batchId:f.batchId,changes:xF(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(A.batchId),function(i,o,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new dt(Ne)),c=c.insert(o,a),i.Ba[i.currentUser.toKey()]=c}(r,A.batchId,n),await JA(r,A.changes),await Wa(r.remoteStore)}catch(A){const s=qa(A,"Failed to persist write");n.reject(s)}}async function b1(t,e){const n=ue(t);try{const r=await hL(n.localStore,e);e.targetChanges.forEach((A,s)=>{const i=n.Na.get(s);i&&(_e(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1),A.addedDocuments.size>0?i.va=!0:A.modifiedDocuments.size>0?_e(i.va):A.removedDocuments.size>0&&(_e(i.va),i.va=!1))}),await JA(n,r,e)}catch(r){await si(r)}}function c_(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const A=[];r.Fa.forEach((s,i)=>{const o=i.view.Z_(e);o.snapshot&&A.push(o.snapshot)}),function(i,o){const a=ue(i);a.onlineState=o;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&zv(a)}(r.eventManager,e),A.length&&r.Ca.d_(A),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JL(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const A=r.Na.get(e),s=A&&A.key;if(s){let i=new dt(ae.comparator);i=i.insert(s,gt.newNoDocument(s,Ee.min()));const o=De().add(s),a=new vu(Ee.min(),new Map,new dt(Ne),i,o);await b1(r,a),r.Oa=r.Oa.remove(s),r.Na.delete(e),Xv(r)}else await Ta(r.localStore,e,!1).then(()=>Qa(r,e,n)).catch(si)}async function XL(t,e){const n=ue(t),r=e.batch.batchId;try{const A=await dL(n.localStore,e);Jv(n,r,null),qv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await JA(n,A)}catch(A){await si(A)}}async function YL(t,e,n){const r=ue(t);try{const A=await function(i,o){const a=ue(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(_e(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(r.localStore,e);Jv(r,e,n),qv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await JA(r,A)}catch(A){await si(A)}}async function ZL(t,e){const n=ue(t);ai(n.remoteStore)||X("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=ue(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const A=n.ka.get(r)||[];A.push(e),n.ka.set(r,A)}catch(r){const A=qa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(A)}}function qv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Jv(t,e,n){const r=ue(t);let A=r.Ba[r.currentUser.toKey()];if(A){const s=A.get(e);s&&(n?s.reject(n):s.resolve(),A=A.remove(e)),r.Ba[r.currentUser.toKey()]=A}}function Qa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||T1(t,r)})}function T1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Fa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Xv(t))}function U0(t,e,n){for(const r of n)r instanceof C1?(t.La.addReference(r.key,e),eO(t,r)):r instanceof _1?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||T1(t,r.key)):ve()}function eO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Xv(t))}function Xv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(Ke.fromString(e)),r=t.qa.next();t.Na.set(r,new jL(n)),t.Oa=t.Oa.insert(n,r),Zf(t.remoteStore,new TA(jn(ja(n.path)),r,"TargetPurposeLimboResolution",Zn.oe))}}async function JA(t,e,n){const r=ue(t),A=[],s=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){A.push(c);const h=Dv.Wi(a.targetId,c);s.push(h)}}))}),await Promise.all(i),r.Ca.d_(A),await async function(a,c){const d=ue(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.$i,w=>d.persistence.referenceDelegate.addReference(h,f.targetId,w)).next(()=>V.forEach(f.Ui,w=>d.persistence.referenceDelegate.removeReference(h,f.targetId,w)))))}catch(h){if(!ii(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const w=d.os.get(f),m=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(f,C)}}}(r.localStore,s))}async function tO(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await a1(n.localStore,e);n.currentUser=e,function(s,i){s.ka.forEach(o=>{o.forEach(a=>{a.reject(new J(j.CANCELLED,i))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await JA(n,r.hs)}}function nO(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return De().add(r.key);{let A=De();const s=n.Ma.get(e);if(!s)return A;for(const i of s){const o=n.Fa.get(i);A=A.unionWith(o.view.Va)}return A}}async function rO(t,e){const n=ue(t),r=await tf(n.localStore,e.query,!0),A=e.view.ba(r);return n.isPrimaryClient&&U0(n,e.targetId,A.wa),A}async function AO(t,e){const n=ue(t);return d1(n.localStore,e).then(r=>JA(n,r))}async function sO(t,e,n,r){const A=ue(t),s=await function(o,a){const c=ue(o),d=ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(A.localStore,e);s!==null?(n==="pending"?await Wa(A.remoteStore):n==="acknowledged"||n==="rejected"?(Jv(A,e,r||null),qv(A,e),function(o,a){ue(ue(o).mutationQueue).On(a)}(A.localStore,e)):ve(),await JA(A,s)):X("SyncEngine","Cannot apply mutation batch with id: "+e)}async function iO(t,e){const n=ue(t);if(eg(n),Yv(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),A=await u_(n,r.toArray());n.Qa=!0,await T0(n.remoteStore,!0);for(const s of A)Zf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let A=Promise.resolve();n.Ma.forEach((s,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):A=A.then(()=>(Qa(n,i),Ta(n.localStore,i,!0))),Fa(n.remoteStore,i)}),await A,await u_(n,r),function(i){const o=ue(i);o.Na.forEach((a,c)=>{Fa(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new dt(ae.comparator)}(n),n.Qa=!1,await T0(n.remoteStore,!1)}}async function u_(t,e,n){const r=ue(t),A=[],s=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await ba(r.localStore,jn(a[0]));for(const c of a){const d=r.Fa.get(c),h=await rO(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await u1(r.localStore,i);o=await ba(r.localStore,c),await $v(r,F1(c),i,!1,o.resumeToken)}A.push(o)}return r.Ca.d_(s),A}function F1(t){return mF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oO(t){return function(n){return ue(ue(n).persistence).Qi()}(ue(t).localStore)}async function aO(t,e,n,r){const A=ue(t);if(A.Qa)return void X("SyncEngine","Ignoring unexpected query state notification.");const s=A.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const i=await d1(A.localStore,vF(s[0])),o=vu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",St.EMPTY_BYTE_STRING);await JA(A,i,o);break}case"rejected":await Ta(A.localStore,e,!0),Qa(A,e,r);break;default:ve()}}async function lO(t,e,n){const r=eg(t);if(r.Qa){for(const A of e){if(r.Ma.has(A)&&r.sharedClientState.isActiveQueryTarget(A)){X("SyncEngine","Adding an already active target "+A);continue}const s=await u1(r.localStore,A),i=await ba(r.localStore,s);await $v(r,F1(s),i.targetId,!1,i.resumeToken),Zf(r.remoteStore,i)}for(const A of n)r.Ma.has(A)&&await Ta(r.localStore,A,!1).then(()=>{Fa(r.remoteStore,A),Qa(r,A)}).catch(si)}}function eg(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JL.bind(null,e),e.Ca.d_=LL.bind(null,e.eventManager),e.Ca.$a=OL.bind(null,e.eventManager),e}function Yv(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YL.bind(null,e),e}function cO(t,e,n){const r=ue(t);(async function(s,i,o){try{const a=await i.getMetadata();if(await function(w,m){const C=ue(w),_=Ht(m.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",B=>C.Gr.getBundleMetadata(B,m.id)).then(B=>!!B&&B.createTime.compareTo(_)>=0)}(s.localStore,a))return await i.close(),o._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(x1(a));const c=new VL(a,s.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await JA(s,h.Ia,void 0),await function(w,m){const C=ue(w);return C.persistence.runTransaction("Save bundle","readwrite",_=>C.Gr.saveBundleMetadata(_,m))}(s.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return hA("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(A=>{r.sharedClientState.notifyBundleLoaded(A)})}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return o1(this.persistence,new i1,e.initialUser,this.serializer)}Ga(e){return new s1(Yf.Zr,this.serializer)}Wa(e){return new f1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class U1 extends qc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Yv(this.Ja.syncEngine),await Wa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return o1(this.persistence,new i1,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new $4(r,e.asyncQueue,n)}Ha(e,n){const r=new FD(n,this.persistence);return new TD(e.asyncQueue,r)}Ga(e){const n=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new Nv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,g1(),lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new f1}}class uO extends U1{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Up&&(this.sharedClientState.syncEngine={no:sO.bind(null,n),ro:aO.bind(null,n),io:lO.bind(null,n),Qi:oO.bind(null,n),eo:AO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await iO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=g1();if(!Up.D(n))throw new J(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Up(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>c_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tO.bind(null,this.syncEngine),await T0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DL}()}createDatastore(e){const n=Bu(e.databaseInfo.databaseId),r=function(s){return new yL(s)}(e.databaseInfo);return function(s,i,o,a){return new CL(s,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,A,s,i,o){return new IL(r,A,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>c_(this.syncEngine,n,0),function(){return A_.D()?new A_:new mL}())}createSyncEngine(e,n){return function(A,s,i,o,a,c,d){const h=new KL(A,s,i,o,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(A){const s=ue(A);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await za(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jc.provider={build:()=>new Jc};function d_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new vn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const A=await this.iu(r);return new ML(JSON.parse(A),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(A,s){const i=ue(A),o={documents:s.map(h=>Wc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Ke.emptyPath(),o,s.length),c=new Map;a.forEach(h=>{const f=T4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());_e(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ga(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const A=ae.fromPath(r);this.mutations.push(new Iv(A,this.precondition(A)))}),await async function(r,A){const s=ue(r),i={writes:A.map(o=>$c(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,Ke.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ve();n=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ee.min())?Bt.exists(!1):Bt.updateTime(n):Bt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ee.min()))throw new J(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bt.updateTime(n)}return Bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,r,A,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=A,this.deferred=s,this._u=r.maxAttempts,this.t_=new Ov(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new hO(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(A=>{this.lu(A)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!fu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!SF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,r,A,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=A,this.user=an.UNAUTHENTICATED,this.clientId=WT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{X("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(X("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qa(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sp(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async A=>{r.isEqual(A)||(await a1(e.localStore,A),r=A)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function h_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Zv(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>s_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,A)=>s_(e.remoteStore,A)),t._onlineComponents=e}async function Zv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(A){return A.name==="FirebaseError"?A.code===j.FAILED_PRECONDITION||A.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11}(n))throw n;hA("Error using user provided cache. Falling back to memory cache: "+n),await Sp(t,new qc)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Sp(t,new qc);return t._offlineComponents}async function ng(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await h_(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await h_(t,new Jc))),t._onlineComponents}function Q1(t){return Zv(t).then(e=>e.persistence)}function ey(t){return Zv(t).then(e=>e.localStore)}function S1(t){return ng(t).then(e=>e.remoteStore)}function ty(t){return ng(t).then(e=>e.syncEngine)}function pO(t){return ng(t).then(e=>e.datastore)}async function Sa(t){const e=await ng(t),n=e.eventManager;return n.onListen=GL.bind(null,e.syncEngine),n.onUnlisten=WL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$L.bind(null,e.syncEngine),n}function mO(t){return t.asyncQueue.enqueue(async()=>{const e=await Q1(t),n=await S1(t);return e.setNetworkEnabled(!0),function(A){const s=ue(A);return s.L_.delete(0),xu(s)}(n)})}function wO(t){return t.asyncQueue.enqueue(async()=>{const e=await Q1(t),n=await S1(t);return e.setNetworkEnabled(!1),async function(A){const s=ue(A);s.L_.add(0),await za(s),s.q_.set("Offline")}(n)})}function vO(t,e){const n=new vn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await function(c,d){const h=ue(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(A,s);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new J(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=qa(o,`Failed to get document '${s} from cache`);i.reject(a)}}(await ey(t),e,n)),n.promise}function k1(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const d=new tg({next:f=>{d.Za(),i.enqueueAndForget(()=>Gv(s,h));const w=f.docs.has(o);!w&&f.fromCache?c.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&a&&a.source==="server"?c.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Wv(ja(o.path),d,{includeMetadataChanges:!0,_a:!0});return Kv(s,h)}(await Sa(t),t.asyncQueue,e,n,r)),r.promise}function yO(t,e){const n=new vn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await tf(A,s,!0),a=new I1(s,o.Ts),c=a.ma(o.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const a=qa(o,`Failed to execute query '${s} against cache`);i.reject(a)}}(await ey(t),e,n)),n.promise}function R1(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const d=new tg({next:f=>{d.Za(),i.enqueueAndForget(()=>Gv(s,h)),f.fromCache&&a.source==="server"?c.reject(new J(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Wv(o,d,{includeMetadataChanges:!0,_a:!0});return Kv(s,h)}(await Sa(t),t.asyncQueue,e,n,r)),r.promise}function BO(t,e){const n=new tg(e);return t.asyncQueue.enqueueAndForget(async()=>function(A,s){ue(A).Y_.add(s),s.next()}(await Sa(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(A,s){ue(A).Y_.delete(s)}(await Sa(t),n))}}function xO(t,e,n,r){const A=function(i,o){let a;return a=typeof i=="string"?RF().encode(i):i,function(d,h){return new dO(d,h)}(function(d,h){if(d instanceof Uint8Array)return d_(d,h);if(d instanceof ArrayBuffer)return d_(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Bu(e));t.asyncQueue.enqueueAndForget(async()=>{cO(await ty(t),A,r)})}function CO(t,e){return t.asyncQueue.enqueue(async()=>function(r,A){const s=ue(r);return s.persistence.runTransaction("Get named query","readonly",i=>s.Gr.getNamedQuery(i,A))}(await ey(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P1(t,e,n,r){if(e===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function g_(t){if(!ae.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function p_(t){if(ae.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function Ze(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rg(t);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function D1(t,e){if(e<=0)throw new J(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,A){return r.timeoutSeconds===A.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cu{constructor(e,n,r,A){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mD;switch(r.type){case"firstParty":return new BD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=f_.get(n);r&&(X("ComponentProvider","Removing Datastore"),f_.delete(n),r.terminate())}(this),Promise.resolve()}}function _O(t,e,n,r={}){var A;const s=(t=Ze(t,Cu))._getSettings(),i=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&hA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=an.MOCK_USER;else{o=DN(r.mockUserToken,(A=t._app)===null||A===void 0?void 0:A.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new an(c)}t._authCredentials=new wD(new zT(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kn=class L1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new L1(this.firestore,e,this._query)}},Et=class O1{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new O1(this.firestore,e,this._key)}},Ds=class M1 extends Kn{constructor(e,n,r){super(e,n,ja(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new ae(e))}withConverter(e){return new M1(this.firestore,e,this._path)}};function V1(t,e,...n){if(t=Ue(t),ny("collection","path",e),t instanceof Cu){const r=Ke.fromString(e,...n);return p_(r),new Ds(t,null,r)}{if(!(t instanceof Et||t instanceof Ds))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return p_(r),new Ds(t.firestore,null,r)}}function IO(t,e){if(t=Ze(t,Cu),ny("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kn(t,null,function(r){return new $A(Ke.emptyPath(),r)}(e))}function sf(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=WT.newId()),ny("doc","path",e),t instanceof Cu){const r=Ke.fromString(e,...n);return g_(r),new Et(t,null,new ae(r))}{if(!(t instanceof Et||t instanceof Ds))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return g_(r),new Et(t.firestore,t instanceof Ds?t.converter:null,new ae(r))}}function H1(t,e){return t=Ue(t),e=Ue(e),(t instanceof Et||t instanceof Ds)&&(e instanceof Et||e instanceof Ds)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function j1(t,e){return t=Ue(t),e=Ue(e),t instanceof Kn&&e instanceof Kn&&t.firestore===e.firestore&&pu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ov(this,"async_queue_retry"),this.Vu=()=>{const r=lh();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=lh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=lh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new vn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ii(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const A=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Vt("INTERNAL UNHANDLED ERROR: ",A),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const A=jv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(A),A}fu(){this.Eu&&ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Q0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const A=n;for(const s of r)if(s in A&&typeof A[s]=="function")return!0;return!1}(t,["next","error","complete"])}class EO{constructor(){this._progressObserver={},this._taskCompletionResolver=new vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=-1;let jt=class extends Cu{constructor(e,n,r,A){super(e,n,r,A),this.type="firestore",this._queue=new w_,this._persistenceKey=(A==null?void 0:A.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new w_(e),this._firestoreClient=void 0,await e}}};function kn(t){if(t._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K1(t),t._firestoreClient}function K1(t){var e,n,r;const A=t._freezeSettings(),s=function(o,a,c,d){return new XD(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,N1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,A);t._componentsProvider||!((n=A.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=A.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:A.localCache._offlineComponentProvider,_online:A.localCache._onlineComponentProvider}),t._firestoreClient=new gO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function TO(t,e){hA("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return G1(t,Jc.provider,{build:r=>new U1(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function FO(t){hA("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();G1(t,Jc.provider,{build:n=>new uO(n,e.cacheSizeBytes)})}function G1(t,e,n){if((t=Ze(t,jt))._firestoreClient||t._terminated)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new J(j.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},K1(t)}function UO(t){if(t._initialized&&!t._terminated)throw new J(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!cA.D())return Promise.resolve();const A=r+"main";await cA.delete(A)}(Pv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function QO(t){return function(n){const r=new vn;return n.asyncQueue.enqueueAndForget(async()=>ZL(await ty(n),r)),r.promise}(kn(t=Ze(t,jt)))}function SO(t){return mO(kn(t=Ze(t,jt)))}function kO(t){return wO(kn(t=Ze(t,jt)))}function RO(t,e){const n=kn(t=Ze(t,jt)),r=new EO;return xO(n,t._databaseId,e,r),r}function NO(t,e){return CO(kn(t=Ze(t,jt)),e).then(n=>n?new Kn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gA(St.fromBase64String(e))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gA(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,A){if(r.length!==A.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==A[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=/^__.*__$/;class DO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qA(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ka(e,this.data,n,this.fieldTransforms)}}class z1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qA(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function W1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class sg{constructor(e,n,r,A,s,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=A,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.Ou(e),A}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.vu(),A}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return of(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(W1(this.Cu)&&PO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class LO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bu(e)}Qu(e,n,r,A=!1){return new sg({Cu:e,methodName:n,qu:r,path:yt.emptyPath(),xu:!1,ku:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uo(t){const e=t._freezeSettings(),n=Bu(t._databaseId);return new LO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ig(t,e,n,r,A,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,n,A);cy("Data must be an object, but it was:",i,r);const o=J1(r,i);let a,c;if(s.merge)a=new er(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=S0(e,h,n);if(!i.contains(f))throw new J(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Y1(d,f)||d.push(f)}a=new er(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new DO(new pn(o),a,c)}class _u extends co{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _u}}function $1(t,e,n){return new sg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ay extends co{_toFieldTransform(e){return new wu(e.path,new _a)}isEqual(e){return e instanceof Ay}}class sy extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$1(this,e,!0),r=this.Ku.map(s=>ho(s,n)),A=new qi(r);return new wu(e.path,A)}isEqual(e){return e instanceof sy&&Dc(this.Ku,e.Ku)}}class iy extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$1(this,e,!0),r=this.Ku.map(s=>ho(s,n)),A=new Ji(r);return new wu(e.path,A)}isEqual(e){return e instanceof iy&&Dc(this.Ku,e.Ku)}}class oy extends co{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ia(e.serializer,IF(e.serializer,this.$u));return new wu(e.path,n)}isEqual(e){return e instanceof oy&&this.$u===e.$u}}function ay(t,e,n,r){const A=t.Qu(1,e,n);cy("Data must be an object, but it was:",A,r);const s=[],i=pn.empty();lo(r,(a,c)=>{const d=uy(e,a,n);c=Ue(c);const h=A.Nu(d);if(c instanceof _u)s.push(d);else{const f=ho(c,h);f!=null&&(s.push(d),i.set(d,f))}});const o=new er(s);return new z1(i,o,A.fieldTransforms)}function ly(t,e,n,r,A,s){const i=t.Qu(1,e,n),o=[S0(e,r,n)],a=[A];if(s.length%2!=0)throw new J(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(S0(e,s[f])),a.push(s[f+1]);const c=[],d=pn.empty();for(let f=o.length-1;f>=0;--f)if(!Y1(c,o[f])){const w=o[f];let m=a[f];m=Ue(m);const C=i.Nu(w);if(m instanceof _u)c.push(w);else{const _=ho(m,C);_!=null&&(c.push(w),d.set(w,_))}}const h=new er(c);return new z1(d,h,i.fieldTransforms)}function q1(t,e,n,r=!1){return ho(n,t.Qu(r?4:3,e))}function ho(t,e){if(X1(t=Ue(t)))return cy("Unsupported field value:",e,t),J1(t,e);if(t instanceof co)return function(r,A){if(!W1(A.Cu))throw A.Bu(`${r._methodName}() can only be used with update() and set()`);if(!A.path)throw A.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(A);s&&A.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,A){const s=[];let i=0;for(const o of r){let a=ho(o,A.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,A){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IF(A.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=xt.fromDate(r);return{timestampValue:Ea(A.serializer,s)}}if(r instanceof xt){const s=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ea(A.serializer,s)}}if(r instanceof Ag)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gA)return{bytesValue:DF(A.serializer,r._byteString)};if(r instanceof Et){const s=A.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw A.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Uv(r.firestore._databaseId||A.databaseId,r._key.path)}}if(r instanceof ry)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return _v(o.serializer,a)})}}}}}}(r,A);throw A.Bu(`Unsupported field value: ${rg(r)}`)}(t,e)}function J1(t,e){const n={};return sF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,A)=>{const s=ho(A,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function X1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof Ag||t instanceof gA||t instanceof Et||t instanceof co||t instanceof ry)}function cy(t,e,n){if(!X1(n)||!function(A){return typeof A=="object"&&A!==null&&(Object.getPrototypeOf(A)===Object.prototype||Object.getPrototypeOf(A)===null)}(n)){const r=rg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function S0(t,e,n){if((e=Ue(e))instanceof Xs)return e._internalPath;if(typeof e=="string")return uy(t,e);throw of("Field path arguments must be of type string or ",t,!1,void 0,n)}const OO=new RegExp("[~\\*/\\[\\]]");function uy(t,e,n){if(e.search(OO)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xs(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function of(t,e,n,r,A){const s=r&&!r.isEmpty(),i=A!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${A}`),a+=")"),new J(j.INVALID_ARGUMENT,o+t+a)}function Y1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,r,A,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=A,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MO extends Xc{data(){return super.data()}}function og(t,e){return typeof e=="string"?uy(t,e):e instanceof Xs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class Iu extends dy{}function os(t,e,...n){let r=[];e instanceof dy&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof hy).length,o=s.filter(a=>a instanceof ag).length;if(i>1||i>0&&o>0)throw new J(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const A of r)t=A._apply(t);return t}class ag extends Iu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ag(e,n,r)}_apply(e){const n=this._parse(e);return tU(e._query,n),new Kn(e.firestore,e.converter,v0(e._query,n))}_parse(e){const n=uo(e.firestore);return function(s,i,o,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){y_(h,d);const w=[];for(const m of h)w.push(v_(a,s,m));f={arrayValue:{values:w}}}else f=v_(a,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||y_(h,d),f=q1(o,i,h,d==="in"||d==="not-in");return Ge.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function VO(t,e,n){const r=e,A=og("where",t);return ag._create(A,r,n)}class hy extends dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:st.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(A,s){let i=A;const o=s.getFlattenedFilters();for(const a of o)tU(i,a),i=v0(i,a)}(e._query,n),new Kn(e.firestore,e.converter,v0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fy extends Iu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fy(e,n)}_apply(e){const n=function(A,s,i){if(A.startAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(A.endAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(s,i)}(e._query,this._field,this._direction);return new Kn(e.firestore,e.converter,function(A,s){const i=A.explicitOrderBy.concat([s]);return new $A(A.path,A.collectionGroup,i,A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e._query,n))}}function HO(t,e="asc"){const n=e,r=og("orderBy",t);return fy._create(r,n)}class lg extends Iu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lg(e,n,r)}_apply(e){return new Kn(e.firestore,e.converter,Xh(e._query,this._limit,this._limitType))}}function jO(t){return D1("limit",t),lg._create("limit",t,"F")}function KO(t){return D1("limitToLast",t),lg._create("limitToLast",t,"L")}class cg extends Iu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new cg(e,n,r)}_apply(e){const n=eU(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,function(A,s){return new $A(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,s,A.endAt)}(e._query,n))}}function GO(...t){return cg._create("startAt",t,!0)}function zO(...t){return cg._create("startAfter",t,!1)}class ug extends Iu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new ug(e,n,r)}_apply(e){const n=eU(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,function(A,s){return new $A(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,s)}(e._query,n))}}function WO(...t){return ug._create("endBefore",t,!1)}function $O(...t){return ug._create("endAt",t,!0)}function eU(t,e,n,r){if(n[0]=Ue(n[0]),n[0]instanceof Xc)return function(s,i,o,a,c){if(!a)throw new J(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of Aa(s))if(h.field.isKeyField())d.push(Wi(i,a.key));else{const f=a.data.field(h.field);if(zf(f))throw new J(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const w=h.field.canonicalString();throw new J(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(f)}return new qs(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const A=uo(t.firestore);return function(i,o,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new J(j.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let m=0;m<d.length;m++){const C=d[m];if(f[m].field.isKeyField()){if(typeof C!="string")throw new J(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof C}`);if(!xv(i)&&C.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${C}' contains a slash.`);const _=i.path.child(Ke.fromString(C));if(!ae.isDocumentKey(_))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const B=new ae(_);w.push(Wi(o,B))}else{const _=q1(a,c,C);w.push(_)}}return new qs(w,h)}(t._query,t.firestore._databaseId,A,e,n,r)}}function v_(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new J(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xv(e)&&n.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ke.fromString(n));if(!ae.isDocumentKey(r))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wi(t,new ae(r))}if(n instanceof Et)return Wi(t,n._key);throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(n)}.`)}function y_(t,e){if(!Array.isArray(t)||t.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tU(t,e){const n=function(A,s){for(const i of A)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gy{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(A,s)=>{r[A]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,A;const s=(A=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.map(i=>wt(i.doubleValue));return new ry(s)}convertGeoPoint(e){return new Ag(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const n=VA(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ke.fromString(e);_e($F(r));const A=new Ws(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return A.isEqual(n)||Vt(`Document ${s} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qO extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new gA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let HA=class extends Xc{constructor(e,n,r,A,s,i){super(e,n,r,A,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(og("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ac=class extends HA{data(e={}){return super.data(e)}},Ys=class{constructor(e,n,r,A){this._firestore=e,this._userDataWriter=n,this._snapshot=A,this.metadata=new Ui(A.hasPendingWrites,A.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ac(this._firestore,this._userDataWriter,r.key,r,new Ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(A,s){if(A._snapshot.oldDocs.isEmpty()){let i=0;return A._snapshot.docChanges.map(o=>{const a=new ac(A._firestore,A._userDataWriter,o.doc.key,o.doc,new Ui(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=A._snapshot.oldDocs;return A._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new ac(A._firestore,A._userDataWriter,o.doc.key,o.doc,new Ui(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:JO(o.type),doc:a,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function JO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function nU(t,e){return t instanceof HA&&e instanceof HA?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ys&&e instanceof Ys&&t._firestore===e._firestore&&j1(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){t=Ze(t,Et);const e=Ze(t.firestore,jt);return k1(kn(e),t._key).then(n=>py(e,t,n))}class fo extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new gA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function YO(t){t=Ze(t,Et);const e=Ze(t.firestore,jt),n=kn(e),r=new fo(e);return vO(n,t._key).then(A=>new HA(e,r,t._key,A,new Ui(A!==null&&A.hasLocalMutations,!0),t.converter))}function ZO(t){t=Ze(t,Et);const e=Ze(t.firestore,jt);return k1(kn(e),t._key,{source:"server"}).then(n=>py(e,t,n))}function eM(t){t=Ze(t,Kn);const e=Ze(t.firestore,jt),n=kn(e),r=new fo(e);return Z1(t._query),R1(n,t._query).then(A=>new Ys(e,r,t,A))}function tM(t){t=Ze(t,Kn);const e=Ze(t.firestore,jt),n=kn(e),r=new fo(e);return yO(n,t._query).then(A=>new Ys(e,r,t,A))}function nM(t){t=Ze(t,Kn);const e=Ze(t.firestore,jt),n=kn(e),r=new fo(e);return R1(n,t._query,{source:"server"}).then(A=>new Ys(e,r,t,A))}function B_(t,e,n){t=Ze(t,Et);const r=Ze(t.firestore,jt),A=dg(t.converter,e,n);return Eu(r,[ig(uo(r),"setDoc",t._key,A,t.converter!==null,n).toMutation(t._key,Bt.none())])}function x_(t,e,n,...r){t=Ze(t,Et);const A=Ze(t.firestore,jt),s=uo(A);let i;return i=typeof(e=Ue(e))=="string"||e instanceof Xs?ly(s,"updateDoc",t._key,e,n,r):ay(s,"updateDoc",t._key,e),Eu(A,[i.toMutation(t._key,Bt.exists(!0))])}function rM(t){return Eu(Ze(t.firestore,jt),[new Ga(t._key,Bt.none())])}function AM(t,e){const n=Ze(t.firestore,jt),r=sf(t),A=dg(t.converter,e);return Eu(n,[ig(uo(t.firestore),"addDoc",r._key,A,t.converter!==null,{}).toMutation(r._key,Bt.exists(!1))]).then(()=>r)}function rU(t,...e){var n,r,A;t=Ue(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Q0(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Q0(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(A=h.complete)===null||A===void 0?void 0:A.bind(h)}let a,c,d;if(t instanceof Et)c=Ze(t.firestore,jt),d=ja(t._key.path),a={next:h=>{e[i]&&e[i](py(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=Ze(t,Kn);c=Ze(h.firestore,jt),d=h._query;const f=new fo(c);a={next:w=>{e[i]&&e[i](new Ys(c,f,h,w))},error:e[i+1],complete:e[i+2]},Z1(t._query)}return function(f,w,m,C){const _=new tg(C),B=new Wv(w,_,m);return f.asyncQueue.enqueueAndForget(async()=>Kv(await Sa(f),B)),()=>{_.Za(),f.asyncQueue.enqueueAndForget(async()=>Gv(await Sa(f),B))}}(kn(c),d,o,a)}function sM(t,e){return BO(kn(t=Ze(t,jt)),Q0(e)?e:{next:e})}function Eu(t,e){return function(r,A){const s=new vn;return r.asyncQueue.enqueueAndForget(async()=>qL(await ty(r),A,s)),s.promise}(kn(t),e)}function py(t,e,n){const r=n.docs.get(e._key),A=new fo(t);return new HA(t,A,e._key,r,new Ui(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uo(e)}set(e,n,r){this._verifyNotCommitted();const A=ms(e,this._firestore),s=dg(A.converter,n,r),i=ig(this._dataReader,"WriteBatch.set",A._key,s,A.converter!==null,r);return this._mutations.push(i.toMutation(A._key,Bt.none())),this}update(e,n,r,...A){this._verifyNotCommitted();const s=ms(e,this._firestore);let i;return i=typeof(n=Ue(n))=="string"||n instanceof Xs?ly(this._dataReader,"WriteBatch.update",s._key,n,r,A):ay(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(i.toMutation(s._key,Bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ms(e,this._firestore);return this._mutations=this._mutations.concat(new Ga(n._key,Bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ms(t,e){if((t=Ue(t)).firestore!==e)throw new J(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aM=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=uo(n)}get(n){const r=ms(n,this._firestore),A=new qO(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return ve();const i=s[0];if(i.isFoundDocument())return new Xc(this._firestore,A,i.key,i,r.converter);if(i.isNoDocument())return new Xc(this._firestore,A,r._key,null,r.converter);throw ve()})}set(n,r,A){const s=ms(n,this._firestore),i=dg(s.converter,r,A),o=ig(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,A);return this._transaction.set(s._key,o),this}update(n,r,A,...s){const i=ms(n,this._firestore);let o;return o=typeof(r=Ue(r))=="string"||r instanceof Xs?ly(this._dataReader,"Transaction.update",i._key,r,A,s):ay(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=ms(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ms(e,this._firestore),r=new fo(this._firestore);return super.get(e).then(A=>new HA(this._firestore,r,n._key,A._document,new Ui(!1,!1),n.converter))}};function lM(t,e,n){t=Ze(t,jt);const r=Object.assign(Object.assign({},iM),n);return function(s){if(s.maxAttempts<1)throw new J(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,i,o){const a=new vn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await pO(s);new fO(s.asyncQueue,c,o,i,a).au()}),a.promise}(kn(t),A=>e(new aM(t,A)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){return new _u("deleteField")}function uM(){return new Ay("serverTimestamp")}function dM(...t){return new sy("arrayUnion",t)}function hM(...t){return new iy("arrayRemove",t)}function fM(t){return new oy("increment",t)}(function(e,n=!0){(function(A){Ha=A})(Ai),Ks(new dA("firestore",(r,{instanceIdentifier:A,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new jt(new vD(r.getProvider("auth-internal")),new CD(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ws(c.options.projectId,d)}(i,A),i);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Kr(uC,"4.7.3",e),Kr(uC,"4.7.3","esm2017")})();const gM="@firebase/firestore-compat",pM="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function __(){if(!qD())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}let AU=class k0{constructor(e){this._delegate=e}static fromBase64String(e){return __(),new k0(gA.fromBase64String(e))}static fromUint8Array(e){return C_(),new k0(gA.fromUint8Array(e))}toBase64(){return __(),this._delegate.toBase64()}toUint8Array(){return C_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){return mM(t,["next","error","complete"])}function mM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{enableIndexedDbPersistence(e,n){return TO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return FO(e._delegate)}clearIndexedDbPersistence(e){return UO(e._delegate)}}class sU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ws||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&hA("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){_O(this._delegate,e,n,r)}enableNetwork(){return SO(this._delegate)}disableNetwork(){return kO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,P1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return QO(this._delegate)}onSnapshotsInSync(e){return sM(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ka(this,V1(this._delegate,e))}catch(n){throw On(n,"collection()","Firestore.collection()")}}doc(e){try{return new _r(this,sf(this._delegate,e))}catch(n){throw On(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ln(this,IO(this._delegate,e))}catch(n){throw On(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return lM(this._delegate,n=>e(new iU(this,n)))}batch(){return kn(this._delegate),new oU(new oM(this._delegate,e=>Eu(this._delegate,e)))}loadBundle(e){return RO(this._delegate,e)}namedQuery(e){return NO(this._delegate,e).then(n=>n?new Ln(this,n):null)}}class hg extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new AU(new gA(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return _r.forKey(n,this.firestore,null)}}function vM(t){gD(t)}class iU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}get(e){const n=Qi(e);return this._delegate.get(n).then(r=>new Yc(this._firestore,new HA(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const A=Qi(e);return r?(my("Transaction.set",r),this._delegate.set(A,n,r)):this._delegate.set(A,n),this}update(e,n,r,...A){const s=Qi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...A),this}delete(e){const n=Qi(e);return this._delegate.delete(n),this}}class oU{constructor(e){this._delegate=e}set(e,n,r){const A=Qi(e);return r?(my("WriteBatch.set",r),this._delegate.set(A,n,r)):this._delegate.set(A,n),this}update(e,n,r,...A){const s=Qi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...A),this}delete(e){const n=Qi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class eo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new ac(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=eo.INSTANCES;let A=r.get(e);A||(A=new WeakMap,r.set(e,A));let s=A.get(n);return s||(s=new eo(e,new hg(e),n),A.set(n,s)),s}}eo.INSTANCES=new WeakMap;class _r{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _r(n,new Et(n._delegate,r,new ae(e)))}static forKey(e,n,r){return new _r(n,new Et(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ka(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ka(this.firestore,V1(this._delegate,e))}catch(n){throw On(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ue(e),e instanceof Et?H1(this._delegate,e):!1}set(e,n){n=my("DocumentReference.set",n);try{return n?B_(this._delegate,e,n):B_(this._delegate,e)}catch(r){throw On(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?x_(this._delegate,e):x_(this._delegate,e,n,...r)}catch(A){throw On(A,"updateDoc()","DocumentReference.update()")}}delete(){return rM(this._delegate)}onSnapshot(...e){const n=aU(e),r=lU(e,A=>new Yc(this.firestore,new HA(this.firestore._delegate,this._userDataWriter,A._key,A._document,A.metadata,this._delegate.converter)));return rU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=YO(this._delegate):(e==null?void 0:e.source)==="server"?n=ZO(this._delegate):n=XO(this._delegate),n.then(r=>new Yc(this.firestore,new HA(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _r(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function On(t,e,n){return t.message=t.message.replace(e,n),t}function aU(t){for(const e of t)if(typeof e=="object"&&!R0(e))return e;return{}}function lU(t,e){var n,r;let A;return R0(t[0])?A=t[0]:R0(t[1])?A=t[1]:typeof t[0]=="function"?A={next:t[0],error:t[1],complete:t[2]}:A={next:t[1],error:t[2],complete:t[3]},{next:s=>{A.next&&A.next(e(s))},error:(n=A.error)===null||n===void 0?void 0:n.bind(A),complete:(r=A.complete)===null||r===void 0?void 0:r.bind(A)}}class Yc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new _r(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return nU(this._delegate,e._delegate)}}class Zc extends Yc{data(e){const n=this._delegate.data(e);return this._delegate._converter||pD(n!==void 0),n}}class Ln{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}where(e,n,r){try{return new Ln(this.firestore,os(this._delegate,VO(e,n,r)))}catch(A){throw On(A,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ln(this.firestore,os(this._delegate,HO(e,n)))}catch(r){throw On(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ln(this.firestore,os(this._delegate,jO(e)))}catch(n){throw On(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ln(this.firestore,os(this._delegate,KO(e)))}catch(n){throw On(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ln(this.firestore,os(this._delegate,GO(...e)))}catch(n){throw On(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ln(this.firestore,os(this._delegate,zO(...e)))}catch(n){throw On(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ln(this.firestore,os(this._delegate,WO(...e)))}catch(n){throw On(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ln(this.firestore,os(this._delegate,$O(...e)))}catch(n){throw On(n,"endAt()","Query.endAt()")}}isEqual(e){return j1(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=tM(this._delegate):(e==null?void 0:e.source)==="server"?n=nM(this._delegate):n=eM(this._delegate),n.then(r=>new N0(this.firestore,new Ys(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=aU(e),r=lU(e,A=>new N0(this.firestore,new Ys(this.firestore._delegate,this._userDataWriter,this._delegate,A._snapshot)));return rU(this._delegate,n,r)}withConverter(e){return new Ln(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class yM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Zc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class N0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ln(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new yM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Zc(this._firestore,r))})}isEqual(e){return nU(this._delegate,e._delegate)}}class ka extends Ln{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _r(this.firestore,e):null}doc(e){try{return e===void 0?new _r(this.firestore,sf(this._delegate)):new _r(this.firestore,sf(this._delegate,e))}catch(n){throw On(n,"doc()","CollectionReference.doc()")}}add(e){return AM(this._delegate,e).then(n=>new _r(this.firestore,n))}isEqual(e){return H1(this._delegate,e._delegate)}withConverter(e){return new ka(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qi(t){return Ze(t,Et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(...e){this._delegate=new Xs(...e)}static documentId(){return new wy(yt.keyField().canonicalString())}isEqual(e){return e=Ue(e),e instanceof Xs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._delegate=e}static serverTimestamp(){const e=uM();return e._methodName="FieldValue.serverTimestamp",new _i(e)}static delete(){const e=cM();return e._methodName="FieldValue.delete",new _i(e)}static arrayUnion(...e){const n=dM(...e);return n._methodName="FieldValue.arrayUnion",new _i(n)}static arrayRemove(...e){const n=hM(...e);return n._methodName="FieldValue.arrayRemove",new _i(n)}static increment(e){const n=fM(e);return n._methodName="FieldValue.increment",new _i(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={Firestore:sU,GeoPoint:Ag,Timestamp:xt,Blob:AU,Transaction:iU,WriteBatch:oU,DocumentReference:_r,DocumentSnapshot:Yc,Query:Ln,QueryDocumentSnapshot:Zc,QuerySnapshot:N0,CollectionReference:ka,FieldPath:wy,FieldValue:_i,setLogLevel:vM,CACHE_SIZE_UNLIMITED:bO};function xM(t,e){t.INTERNAL.registerComponent(new dA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),A=n.getProvider("firestore").getImmediate();return e(r,A)},"PUBLIC").setServiceProps(Object.assign({},BM)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){xM(t,(e,n)=>new sU(e,n,new wM)),t.registerVersion(gM,pM)}CM(Zr);function vy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,r=Object.getOwnPropertySymbols(t);A<r.length;A++)e.indexOf(r[A])<0&&Object.prototype.propertyIsEnumerable.call(t,r[A])&&(n[r[A]]=t[r[A]]);return n}const Cl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},_o={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function cU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IM=_M,EM=cU,uU=new ao("auth","Firebase",cU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Kf("@firebase/auth");function bM(t,...e){af.logLevel<=Ve.WARN&&af.warn(`Auth (${Ai}): ${t}`,...e)}function ch(t,...e){af.logLevel<=Ve.ERROR&&af.error(`Auth (${Ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw By(t,...e)}function en(t,...e){return By(t,...e)}function yy(t,e,n){const r=Object.assign(Object.assign({},EM()),{[e]:n});return new ao("auth","Firebase",r).create(e,{appName:t.name})}function cn(t){return yy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ja(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Bn(t,"argument-error"),yy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function By(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uU.create(t,...e)}function te(t,e,...n){if(!t)throw By(e,...n)}function oA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ch(e),new Error(e)}function zr(t,e){t||oA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xy(){return I_()==="http:"||I_()==="https:"}function I_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xy()||CT()||"connection"in navigator)?navigator.onLine:!0}function FM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,zr(n>e,"Short delay should be less than long delay!"),this.isMobile=LN()||uv()}get(){return TM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t,e){zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new bu(3e4,6e4);function Rt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nt(t,e,n,r,A={}){return hU(t,A,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=Va(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},s);return MN()||(c.referrerPolicy="no-referrer"),dU.fetch()(fU(t,t.config.apiHost,n,o),c)})}async function hU(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},UM),e);try{const A=new kM(t),s=await Promise.race([n(),A.promise]);A.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Ol(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ol(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Ol(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Ol(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw yy(t,d,c);Bn(t,d)}}catch(A){if(A instanceof Vn)throw A;Bn(t,"network-request-failed",{message:String(A)})}}async function XA(t,e,n,r,A={}){const s=await Nt(t,e,n,r,A);return"mfaPendingCredential"in s&&Bn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fU(t,e,n,r){const A=`${e}${n}?${r}`;return t.config.emulator?Cy(t.config,A):`${t.config.apiScheme}://${A}`}function SM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),QM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ol(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const A=en(t,e,r);return A.customData._tokenResponse=n,A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){return t!==void 0&&t.getResponse!==void 0}function b_(t){return t!==void 0&&t.enterprise!==void 0}class RM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t){return(await Nt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function PM(t,e){return Nt(t,"GET","/v2/recaptchaConfig",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,e){return Nt(t,"POST","/v1/accounts:delete",e)}async function LM(t,e){return Nt(t,"POST","/v1/accounts:update",e)}async function gU(t,e){return Nt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OM(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),A=fg(r);te(A&&A.exp&&A.auth_time&&A.iat,n.auth,"internal-error");const s=typeof A.firebase=="object"?A.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:A,token:r,authTime:lc(kp(A.auth_time)),issuedAtTime:lc(kp(A.iat)),expirationTime:lc(kp(A.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function kp(t){return Number(t)*1e3}function fg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ch("JWT malformed, contained fewer than 3 sections"),null;try{const A=vT(n);return A?JSON.parse(A):(ch("Failed to decode base64 JWT payload"),null)}catch(A){return ch("Caught error parsing JWT payload as JSON",A==null?void 0:A.toString()),null}}function T_(t){const e=fg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&MM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const A=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t){var e;const n=t.auth,r=await t.getIdToken(),A=await jA(t,gU(n,{idToken:r}));te(A==null?void 0:A.users.length,n,"internal-error");const s=A.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pU(s.providerUserInfo):[],o=jM(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new P0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function HM(t){const e=Ue(t);await tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jM(t,e){return[...t.filter(r=>!e.some(A=>A.providerId===r.providerId)),...e]}function pU(t){return t.map(e=>{var{providerId:n}=e,r=vy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){const n=await hU(t,{},async()=>{const r=Va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:s}=t.config,i=fU(t,A,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",dU.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GM(t,e){return Nt(t,"POST","/v2/accounts:revokeToken",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=T_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:A,expiresIn:s}=await KM(e,n);this.updateTokensAndExpiration(r,A,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:A,expirationTime:s}=n,i=new ia;return r&&(te(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),A&&(te(typeof A=="string","internal-error",{appName:e}),i.accessToken=A),s&&(te(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return oA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class FA{constructor(e){var{uid:n,auth:r,stsTokenManager:A}=e,s=vy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new P0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jA(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OM(this,e)}reload(){return HM(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new FA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(cn(this.auth));const e=await this.getIdToken();return await jA(this,DM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,A,s,i,o,a,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(A=n.email)!==null&&A!==void 0?A:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=n.photoURL)!==null&&i!==void 0?i:void 0,C=(o=n.tenantId)!==null&&o!==void 0?o:void 0,_=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,B=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:R,isAnonymous:S,providerData:N,stsTokenManager:I}=n;te(v&&I,e,"internal-error");const x=ia.fromJSON(this.name,I);te(typeof v=="string",e,"internal-error"),as(h,e.name),as(f,e.name),te(typeof R=="boolean",e,"internal-error"),te(typeof S=="boolean",e,"internal-error"),as(w,e.name),as(m,e.name),as(C,e.name),as(_,e.name),as(B,e.name),as(y,e.name);const b=new FA({uid:v,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:S,photoURL:m,phoneNumber:w,tenantId:C,stsTokenManager:x,createdAt:B,lastLoginAt:y});return N&&Array.isArray(N)&&(b.providerData=N.map(Q=>Object.assign({},Q))),_&&(b._redirectEventId=_),b}static async _fromIdTokenResponse(e,n,r=!1){const A=new ia;A.updateFromServerResponse(n);const s=new FA({uid:n.localId,auth:e,stsTokenManager:A,isAnonymous:r});return await tu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const A=n.users[0];te(A.localId!==void 0,"internal-error");const s=A.providerUserInfo!==void 0?pU(A.providerUserInfo):[],i=!(A.email&&A.passwordHash)&&!(s!=null&&s.length),o=new ia;o.updateFromIdToken(r);const a=new FA({uid:A.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:s,metadata:new P0(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;function dr(t){zr(t instanceof Function,"Expected a class definition");let e=F_.get(t);return e?(zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,F_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mU.type="NONE";const Ra=mU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e,n){return`firebase:${t}:${e}:${n}`}class oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:A,name:s}=this.auth;this.fullUserKey=Di(this.userKey,A.apiKey,s),this.fullPersistenceKey=Di("persistence",A.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?FA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oa(dr(Ra),e,r);const A=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=A[0]||dr(Ra);const i=Di(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(i);if(d){const h=FA._fromJSON(e,d);c!==s&&(o=h),s=c;break}}catch{}const a=A.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new oa(s,e,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new oa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xU(e))return"Blackberry";if(CU(e))return"Webos";if(vU(e))return"Safari";if((e.includes("chrome/")||yU(e))&&!e.includes("edge/"))return"Chrome";if(Tu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wU(t=Tt()){return/firefox\//i.test(t)}function vU(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yU(t=Tt()){return/crios\//i.test(t)}function BU(t=Tt()){return/iemobile/i.test(t)}function Tu(t=Tt()){return/android/i.test(t)}function xU(t=Tt()){return/blackberry/i.test(t)}function CU(t=Tt()){return/webos/i.test(t)}function Fu(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zM(t=Tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function WM(t=Tt()){var e;return Fu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $M(){return _T()&&document.documentMode===10}function _U(t=Tt()){return Fu(t)||Tu(t)||CU(t)||xU(t)||/windows phone/i.test(t)||BU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t,e=[]){let n;switch(t){case"Browser":n=U_(Tt());break;case"Worker":n=`${U_(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const A of n)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e={}){return Nt(t,"GET","/v2/passwordPolicy",Rt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=6;class YM{constructor(e){var n,r,A,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:XM,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(A=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&A!==void 0?A:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,A,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(A=a.containsLowercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),A&&(n.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let A=0;A<e.length;A++)r=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,A,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,A){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Q_(this),this.idTokenSubscription=new Q_(this),this.beforeStateQueue=new qM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{var r,A;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((A=this.currentUser)===null||A===void 0?void 0:A.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gU(this,{idToken:e}),r=await FA._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let A=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=A==null?void 0:A._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(A=a.user,s=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(A)}catch(i){A=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(cn(this));const n=e?Ue(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JM(this),n=new YM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,A){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,A);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const A=await this._getAppCheckToken();return A&&(n["X-Firebase-AppCheck"]=A),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kt(t){return Ue(t)}class Q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=ET(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eV(t){Uu=t}function _y(t){return Uu.loadJS(t)}function tV(){return Uu.recaptchaV2Script}function nV(){return Uu.recaptchaEnterpriseScript}function rV(){return Uu.gapiScript}function EU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const AV="recaptcha-enterprise",sV="NO_RECAPTCHA";class iV{constructor(e){this.type=AV,this.auth=kt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{PM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new RM(a);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(a=>{o(a)})})}function A(s,i,o){const a=window.grecaptcha;b_(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(sV)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{r(this.auth).then(o=>{if(!n&&b_(window.grecaptcha))A(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=nV();a.length!==0&&(a+=o),_y(a).then(()=>{A(o,s,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function S_(t,e,n,r=!1){const A=new iV(t);let s;try{s=await A.verify(n)}catch{s=await A.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function nu(t,e,n,r){var A;if(!((A=t._getRecaptchaConfig())===null||A===void 0)&&A.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await S_(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await S_(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(s)})}function oV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aV(t,e,n){const r=kt(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const A=!!(n!=null&&n.disableWarnings),s=bU(e),{host:i,port:o}=lV(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||cV()}function bU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lV(t){const e=bU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(r);if(A){const s=A[1];return{host:s,port:k_(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:k_(i)}}}function k_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oA("not implemented")}_getIdTokenResponse(e){return oA("not implemented")}_linkToIdToken(e,n){return oA("not implemented")}_getReauthenticationResolver(e){return oA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TU(t,e){return Nt(t,"POST","/v1/accounts:resetPassword",Rt(t,e))}async function uV(t,e){return Nt(t,"POST","/v1/accounts:update",e)}async function dV(t,e){return Nt(t,"POST","/v1/accounts:signUp",e)}async function hV(t,e){return Nt(t,"POST","/v1/accounts:update",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV(t,e){return XA(t,"POST","/v1/accounts:signInWithPassword",Rt(t,e))}async function gg(t,e){return Nt(t,"POST","/v1/accounts:sendOobCode",Rt(t,e))}async function gV(t,e){return gg(t,e)}async function pV(t,e){return gg(t,e)}async function mV(t,e){return gg(t,e)}async function wV(t,e){return gg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e){return XA(t,"POST","/v1/accounts:signInWithEmailLink",Rt(t,e))}async function yV(t,e){return XA(t,"POST","/v1/accounts:signInWithEmailLink",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Xa{constructor(e,n,r,A=null){super("password",r),this._email=e,this._password=n,this._tenantId=A}static _fromEmailAndPassword(e,n){return new ru(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ru(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nu(e,n,"signInWithPassword",fV);case"emailLink":return vV(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nu(e,r,"signUpPassword",dV);case"emailLink":return yV(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(t,e){return XA(t,"POST","/v1/accounts:signInWithIdp",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="http://localhost";class pA extends Xa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:A}=n,s=vy(n,["providerId","signInMethod"]);if(!r||!A)return null;const i=new pA(r,A);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return kA(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,kA(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kA(e,n)}buildRequest(){const e={requestUri:BV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Va(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(t,e){return Nt(t,"POST","/v1/accounts:sendVerificationCode",Rt(t,e))}async function CV(t,e){return XA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,e))}async function _V(t,e){const n=await XA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,e));if(n.temporaryProof)throw Ol(t,"account-exists-with-different-credential",n);return n}const IV={USER_NOT_FOUND:"user-not-found"};async function EV(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return XA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,n),IV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Xa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Li({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Li({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return CV(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return _V(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return EV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:A}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:A}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:A,temporaryProof:s}=e;return!r&&!n&&!A&&!s?null:new Li({verificationId:n,verificationCode:r,phoneNumber:A,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TV(t){const e=Jo(Rl(t)).link,n=e?Jo(Rl(e)).deep_link_id:null,r=Jo(Rl(t)).deep_link_id;return(r?Jo(Rl(r)).link:null)||r||n||e||t}class pg{constructor(e){var n,r,A,s,i,o;const a=Jo(Rl(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=bV((A=a.mode)!==null&&A!==void 0?A:null);te(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=TV(e);try{return new pg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.providerId=li.PROVIDER_ID}static credential(e,n){return ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pg.parseLink(n);return te(r,"argument-error"),ru._fromEmailAndCode(e,r.code,r.tenantId)}}li.PROVIDER_ID="password";li.EMAIL_PASSWORD_SIGN_IN_METHOD="password";li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends YA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class aa extends Ya{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return te("providerId"in n&&"signInMethod"in n,"argument-error"),pA._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),pA._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return aa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return aa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:A,pendingToken:s,nonce:i,providerId:o}=e;if(!r&&!A&&!n&&!s||!o)return null;try{return new aa(o)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Ya{constructor(){super("facebook.com")}static credential(e){return pA._fromParams({providerId:eA.PROVIDER_ID,signInMethod:eA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eA.credentialFromTaggedObject(e)}static credentialFromError(e){return eA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eA.credential(e.oauthAccessToken)}catch{return null}}}eA.FACEBOOK_SIGN_IN_METHOD="facebook.com";eA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pA._fromParams({providerId:tA.PROVIDER_ID,signInMethod:tA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tA.credentialFromTaggedObject(e)}static credentialFromError(e){return tA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tA.credential(n,r)}catch{return null}}}tA.GOOGLE_SIGN_IN_METHOD="google.com";tA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA extends Ya{constructor(){super("github.com")}static credential(e){return pA._fromParams({providerId:nA.PROVIDER_ID,signInMethod:nA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nA.credentialFromTaggedObject(e)}static credentialFromError(e){return nA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nA.credential(e.oauthAccessToken)}catch{return null}}}nA.GITHUB_SIGN_IN_METHOD="github.com";nA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="http://localhost";class Na extends Xa{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return kA(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,kA(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kA(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:A,pendingToken:s}=n;return!r||!A||!s||r!==A?null:new Na(r,s)}static _create(e,n){return new Na(e,n)}buildRequest(){return{requestUri:FV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="saml.";class lf extends YA{constructor(e){te(e.startsWith(UV),"argument-error"),super(e)}static credentialFromResult(e){return lf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Na.fromJSON(e);return te(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Na._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA extends Ya{constructor(){super("twitter.com")}static credential(e,n){return pA._fromParams({providerId:rA.PROVIDER_ID,signInMethod:rA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rA.credentialFromTaggedObject(e)}static credentialFromError(e){return rA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rA.credential(n,r)}catch{return null}}}rA.TWITTER_SIGN_IN_METHOD="twitter.com";rA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){return XA(t,"POST","/v1/accounts:signUp",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,A=!1){const s=await FA._fromIdTokenResponse(e,r,A),i=R_(r);return new Qr({user:s,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const A=R_(r);return new Qr({user:e,providerId:A,_tokenResponse:r,operationType:n})}}function R_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t){var e;if(Qt(t.app))return Promise.reject(cn(t));const n=kt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Qr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await FU(n,{returnSecureToken:!0}),A=await Qr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(A.user),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends Vn{constructor(e,n,r,A){var s;super(n.code,n.message),this.operationType=r,this.user=A,Object.setPrototypeOf(this,cf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,A){return new cf(e,n,r,A)}}function UU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cf._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SV(t,e){const n=Ue(t);await mg(!0,n,e);const{providerUserInfo:r}=await LM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),A=QU(r||[]);return n.providerData=n.providerData.filter(s=>A.has(s.providerId)),A.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Iy(t,e,n=!1){const r=await jA(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qr._forOperation(t,"link",r)}async function mg(t,e,n){await tu(e);const r=QU(e.providerData),A=t===!1?"provider-already-linked":"no-such-provider";te(r.has(n)===t,e.auth,A)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(cn(r));const A="reauthenticate";try{const s=await jA(t,UU(r,A,e,t),n);te(s.idToken,r,"internal-error");const i=fg(s.idToken);te(i,r,"internal-error");const{sub:o}=i;return te(t.uid===o,r,"user-mismatch"),Qr._forOperation(t,A,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e,n=!1){if(Qt(t.app))return Promise.reject(cn(t));const r="signIn",A=await UU(t,r,e),s=await Qr._fromIdTokenResponse(t,r,A);return n||await t._updateCurrentUser(s.user),s}async function wg(t,e){return kU(kt(t),e)}async function RU(t,e){const n=Ue(t);return await mg(!1,n,e.providerId),Iy(n,e)}async function NU(t,e){return SU(Ue(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t,e){return XA(t,"POST","/v1/accounts:signInWithCustomToken",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e){if(Qt(t.app))return Promise.reject(cn(t));const n=kt(t),r=await kV(n,{token:e,returnSecureToken:!0}),A=await Qr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(A.user),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ey._fromServerResponse(e,n):"totpInfo"in n?by._fromServerResponse(e,n):Bn(e,"internal-error")}}class Ey extends Qu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ey(n)}}class by extends Qu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new by(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e,n){var r;te(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),te(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(te(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(te(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ty(t){const e=kt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NV(t,e,n){const r=kt(t),A={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&vg(r,A,n),await nu(r,A,"getOobCode",pV)}async function PV(t,e,n){await TU(Ue(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ty(t),r})}async function DV(t,e){await hV(Ue(t),{oobCode:e})}async function PU(t,e){const n=Ue(t),r=await TU(n,{oobCode:e}),A=r.requestType;switch(te(A,n,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,n,"internal-error");default:te(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Qu._fromServerResponse(kt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:A}}async function LV(t,e){const{data:n}=await PU(Ue(t),e);return n.email}async function OV(t,e,n){if(Qt(t.app))return Promise.reject(cn(t));const r=kt(t),i=await nu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FU).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Ty(t),a}),o=await Qr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function MV(t,e,n){return Qt(t.app)?Promise.reject(cn(t)):wg(Ue(t),li.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ty(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(t,e,n){const r=kt(t),A={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(i,o){te(o.handleCodeInApp,r,"argument-error"),o&&vg(r,i,o)}s(A,n),await nu(r,A,"getOobCode",mV)}function HV(t,e){const n=pg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function jV(t,e,n){if(Qt(t.app))return Promise.reject(cn(t));const r=Ue(t),A=li.credentialWithLink(e,n||eu());return te(A._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),wg(r,A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(t,e){return Nt(t,"POST","/v1/accounts:createAuthUri",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e){const n=xy()?eu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:A}=await KV(Ue(t),r);return A||[]}async function zV(t,e){const n=Ue(t),A={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&vg(n.auth,A,e);const{email:s}=await gV(n.auth,A);s!==t.email&&await t.reload()}async function WV(t,e,n){const r=Ue(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&vg(r.auth,s,n);const{email:i}=await wV(r.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $V(t,e){return Nt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ue(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await jA(r,$V(r.auth,s));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function JV(t,e){const n=Ue(t);return Qt(n.auth.app)?Promise.reject(cn(n.auth)):DU(n,e,null)}function XV(t,e){return DU(Ue(t),null,e)}async function DU(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const i=await jA(t,uV(r,s));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){var e,n;if(!t)return null;const{providerId:r}=t,A=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const i=(n=(e=fg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new la(s,o)}}if(!r)return null;switch(r){case"facebook.com":return new ZV(s,A);case"github.com":return new eH(s,A);case"google.com":return new tH(s,A);case"twitter.com":return new nH(s,A,t.screenName||null);case"custom":case"anonymous":return new la(s,null);default:return new la(s,r,A)}}class la{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class LU extends la{constructor(e,n,r,A){super(e,n,r),this.username=A}}class ZV extends la{constructor(e,n){super(e,"facebook.com",n)}}class eH extends LU{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class tH extends la{constructor(e,n){super(e,"google.com",n)}}class nH extends LU{constructor(e,n,r){super(e,"twitter.com",n,r)}}function rH(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:YV(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Si("enroll",e,n)}static _fromMfaPendingCredential(e){return new Si("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Si._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Si._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=kt(e),A=n.customData._serverResponse,s=(A.mfaInfo||[]).map(o=>Qu._fromServerResponse(r,o));te(A.mfaPendingCredential,r,"internal-error");const i=Si._fromMfaPendingCredential(A.mfaPendingCredential);return new Fy(i,s,async o=>{const a=await o._process(r,i);delete A.mfaInfo,delete A.mfaPendingCredential;const c=Object.assign(Object.assign({},A),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const d=await Qr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return te(n.user,r,"internal-error"),Qr._forOperation(n.user,n.operationType,c);default:Bn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function AH(t,e){var n;const r=Ue(t),A=e;return te(e.customData.operationType,r,"argument-error"),te((n=A.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Fy._fromError(r,A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:start",Rt(t,e))}function iH(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(t,e))}function oH(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(t,e))}class Uy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Qu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Uy(e)}async getSession(){return Si._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,A=await this.getSession(),s=await jA(this.user,r._process(this.user.auth,A,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const A=await jA(this.user,oH(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(A),await this.user.reload()}catch(A){throw A}}}const Rp=new WeakMap;function aH(t){const e=Ue(t);return Rp.has(e)||Rp.set(e,Uy._fromUser(e)),Rp.get(e)}const uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH=1e3,cH=10;class MU extends OU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_U(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),A=this.localCache[n];r!==A&&e(n,A,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const A=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);$M()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,cH):A()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MU.type="LOCAL";const Qy=MU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU extends OU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VU.type="SESSION";const to=VU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(A=>A.isListeningto(e));if(n)return n;const r=new yg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:A,data:s}=n.data,i=this.handlersMap[A];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:A});const o=Array.from(i).map(async c=>c(n.origin,s)),a=await uH(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:A,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=Su("",20);A.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:A,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(d),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),A.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[A.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return window}function hH(t){Gt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(){return typeof Gt().WorkerGlobalScope<"u"&&typeof Gt().importScripts=="function"}async function fH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pH(){return Sy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU="firebaseLocalStorageDb",mH=1,df="firebaseLocalStorage",jU="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bg(t,e){return t.transaction([df],e?"readwrite":"readonly").objectStore(df)}function wH(){const t=indexedDB.deleteDatabase(HU);return new ku(t).toPromise()}function D0(){const t=indexedDB.open(HU,mH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(df,{keyPath:jU})}catch(A){n(A)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(df)?e(r):(r.close(),await wH(),e(await D0()))})})}async function N_(t,e,n){const r=Bg(t,!0).put({[jU]:e,value:n});return new ku(r).toPromise()}async function vH(t,e){const n=Bg(t,!1).get(e),r=await new ku(n).toPromise();return r===void 0?null:r.value}function P_(t,e){const n=Bg(t,!0).delete(e);return new ku(n).toPromise()}const yH=800,BH=3;class KU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yg._getInstance(pH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fH(),!this.activeServiceWorker)return;this.sender=new dH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await N_(e,uf,"1"),await P_(e,uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>N_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>P_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const s=Bg(A,!1).getAll();return new ku(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:A,value:s}of e)r.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(s)&&(this.notifyListeners(A,s),n.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!r.has(A)&&(this.notifyListeners(A,null),n.push(A));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KU.type="LOCAL";const Au=KU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t,e){return Nt(t,"POST","/v2/accounts/mfaSignIn:start",Rt(t,e))}function CH(t,e){return Nt(t,"POST","/v2/accounts/mfaSignIn:finalize",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H=500,IH=6e4,vd=1e12;class EH{constructor(e){this.auth=e,this.counter=vd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new bH(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||vd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||vd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||vd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class bH{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A=typeof e=="string"?document.getElementById(e):e;te(A,"argument-error",{appName:n}),this.container=A,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=TH(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},IH)},_H))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function TH(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=EU("rcb"),FH=new bu(3e4,6e4);class UH{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Gt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(QH(n),e,"argument-error"),this.shouldResolveImmediately(n)&&E_(Gt().grecaptcha)?Promise.resolve(Gt().grecaptcha):new Promise((r,A)=>{const s=Gt().setTimeout(()=>{A(en(e,"network-request-failed"))},FH.get());Gt()[Np]=()=>{Gt().clearTimeout(s),delete Gt()[Np];const o=Gt().grecaptcha;if(!o||!E_(o)){A(en(e,"internal-error"));return}const a=o.render;o.render=(c,d)=>{const h=a(c,d);return this.counter++,h},this.hostLanguage=n,r(o)};const i=`${tV()}?${Va({onload:Np,render:"explicit",hl:n})}`;_y(i).catch(()=>{clearTimeout(s),A(en(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Gt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function QH(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class SH{async load(e){return new EH(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="recaptcha",kH={theme:"light",type:"image"};let RH=class{constructor(e,n,r=Object.assign({},kH)){this.parameters=r,this.type=GU,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kt(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A=typeof n=="string"?document.getElementById(n):n;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new SH:new UH,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(A=>{const s=i=>{i&&(this.tokenChangeListeners.delete(s),A(i))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Gt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(xy()&&!Sy(),this.auth,"internal-error"),await NH(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await NM(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function NH(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Li._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function PH(t,e,n){if(Qt(t.app))return Promise.reject(cn(t));const r=kt(t),A=await xg(r,e,Ue(n));return new ky(A,s=>wg(r,s))}async function DH(t,e,n){const r=Ue(t);await mg(!1,r,"phone");const A=await xg(r.auth,e,Ue(n));return new ky(A,s=>RU(r,s))}async function LH(t,e,n){const r=Ue(t);if(Qt(r.auth.app))return Promise.reject(cn(r.auth));const A=await xg(r.auth,e,Ue(n));return new ky(A,s=>NU(r,s))}async function xg(t,e,n){var r;const A=await n.verify();try{te(typeof A=="string",t,"argument-error"),te(n.type===GU,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s)return te(i.type==="enroll",t,"internal-error"),(await sH(t,{idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return te(o,t,"missing-multi-factor-info"),(await xH(t,{mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:i}=await xV(t,{phoneNumber:s.phoneNumber,recaptchaToken:A});return i}}finally{n._reset()}}async function OH(t,e){const n=Ue(t);if(Qt(n.auth.app))return Promise.reject(cn(n.auth));await Iy(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=class uh{constructor(e){this.providerId=uh.PROVIDER_ID,this.auth=kt(e)}verifyPhoneNumber(e,n){return xg(this.auth,e,Ue(n))}static credential(e,n){return Li._fromVerification(e,n)}static credentialFromResult(e){const n=e;return uh.credentialFromTaggedObject(n)}static credentialFromError(e){return uh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Li._fromTokenResponse(n,r):null}};no.PROVIDER_ID="phone";no.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e){return e?dr(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Xa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kA(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kA(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kA(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MH(t){return kU(t.auth,new Ry(t),t.bypassAuthState)}function VH(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),SU(n,new Ry(t),t.bypassAuthState)}async function HH(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Iy(n,new Ry(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n,r,A,s=!1){this.auth=e,this.resolver=r,this.user=A,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:A,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MH;case"linkViaPopup":case"linkViaRedirect":return HH;case"reauthViaPopup":case"reauthViaRedirect":return VH;default:Bn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH=new bu(2e3,1e4);async function KH(t,e,n){if(Qt(t.app))return Promise.reject(en(t,"operation-not-supported-in-this-environment"));const r=kt(t);Ja(t,e,YA);const A=go(r,n);return new UA(r,"signInViaPopup",e,A).executeNotNull()}async function GH(t,e,n){const r=Ue(t);if(Qt(r.auth.app))return Promise.reject(en(r.auth,"operation-not-supported-in-this-environment"));Ja(r.auth,e,YA);const A=go(r.auth,n);return new UA(r.auth,"reauthViaPopup",e,A,r).executeNotNull()}async function zH(t,e,n){const r=Ue(t);Ja(r.auth,e,YA);const A=go(r.auth,n);return new UA(r.auth,"linkViaPopup",e,A,r).executeNotNull()}class UA extends zU{constructor(e,n,r,A,s){super(e,n,A,s),this.provider=r,this.authWindow=null,this.pollId=null,UA.currentPopupAction&&UA.currentPopupAction.cancel(),UA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Su();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,UA.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jH.get())};e()}}UA.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH="pendingRedirect",cc=new Map;class $H extends zU{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cc.get(this.auth._key());if(!e){try{const r=await qH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cc.set(this.auth._key(),e)}return this.bypassAuthState||cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qH(t,e){const n=$U(e),r=WU(t);if(!await r._isAvailable())return!1;const A=await r._get(n)==="true";return await r._remove(n),A}async function Ny(t,e){return WU(t)._set($U(e),"true")}function JH(){cc.clear()}function Py(t,e){cc.set(t._key(),e)}function WU(t){return dr(t._redirectPersistence)}function $U(t){return Di(WH,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(t,e,n){return YH(t,e,n)}async function YH(t,e,n){if(Qt(t.app))return Promise.reject(cn(t));const r=kt(t);Ja(t,e,YA),await r._initializationPromise;const A=go(r,n);return await Ny(A,r),A._openRedirect(r,e,"signInViaRedirect")}function ZH(t,e,n){return ej(t,e,n)}async function ej(t,e,n){const r=Ue(t);if(Ja(r.auth,e,YA),Qt(r.auth.app))return Promise.reject(cn(r.auth));await r.auth._initializationPromise;const A=go(r.auth,n);await Ny(A,r.auth);const s=await qU(r);return A._openRedirect(r.auth,e,"reauthViaRedirect",s)}function tj(t,e,n){return nj(t,e,n)}async function nj(t,e,n){const r=Ue(t);Ja(r.auth,e,YA),await r.auth._initializationPromise;const A=go(r.auth,n);await mg(!1,r,e.providerId),await Ny(A,r.auth);const s=await qU(r);return A._openRedirect(r.auth,e,"linkViaRedirect",s)}async function rj(t,e){return await kt(t)._initializationPromise,Cg(t,e,!1)}async function Cg(t,e,n=!1){if(Qt(t.app))return Promise.reject(cn(t));const r=kt(t),A=go(r,e),i=await new $H(r,A,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function qU(t){const e=Su(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=10*60*1e3;class JU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XU(e)){const A=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,A))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Aj&&this.cachedEventUids.clear(),this.cachedEventUids.has(D_(e))}saveEventToCache(e){this.cachedEventUids.add(D_(e)),this.lastProcessedEventTime=Date.now()}}function D_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(t,e={}){return Nt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oj=/^https?/;async function aj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YU(t);for(const n of e)try{if(lj(n))return}catch{}Bn(t,"unauthorized-domain")}function lj(t){const e=eu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!oj.test(n))return!1;if(ij.test(t))return r===t;const A=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=new bu(3e4,6e4);function L_(){const t=Gt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uj(t){return new Promise((e,n)=>{var r,A,s;function i(){L_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L_(),n(en(t,"network-request-failed"))},timeout:cj.get()})}if(!((A=(r=Gt().gapi)===null||r===void 0?void 0:r.iframes)===null||A===void 0)&&A.Iframe)e(gapi.iframes.getContext());else if(!((s=Gt().gapi)===null||s===void 0)&&s.load)i();else{const o=EU("iframefcb");return Gt()[o]=()=>{gapi.load?i():n(en(t,"network-request-failed"))},_y(`${rV()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw dh=null,e})}let dh=null;function dj(t){return dh=dh||uj(t),dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new bu(5e3,15e3),fj="__/auth/iframe",gj="emulator/auth/iframe",pj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wj(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cy(e,gj):`https://${t.config.authDomain}/${fj}`,r={apiKey:e.apiKey,appName:t.name,v:Ai},A=mj.get(t.config.apiHost);A&&(r.eid=A);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Va(r).slice(1)}`}async function vj(t){const e=await dj(t),n=Gt().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:wj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pj,dontclear:!0},r=>new Promise(async(A,s)=>{await r.restyle({setHideOnLeave:!1});const i=en(t,"network-request-failed"),o=Gt().setTimeout(()=>{s(i)},hj.get());function a(){Gt().clearTimeout(o),A(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bj=500,xj=600,Cj="_blank",_j="http://localhost";class O_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ij(t,e,n,r=Bj,A=xj){const s=Math.max((window.screen.availHeight-A)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},yj),{width:r.toString(),height:A.toString(),top:s,left:i}),c=Tt().toLowerCase();n&&(o=yU(c)?Cj:n),wU(c)&&(e=e||_j,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[w,m])=>`${f}${w}=${m},`,"");if(WM(c)&&o!=="_self")return Ej(e||"",o),new O_(null);const h=window.open(e||"",o,d);te(h,t,"popup-blocked");try{h.focus()}catch{}return new O_(h)}function Ej(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="__/auth/handler",Tj="emulator/auth/handler",Fj=encodeURIComponent("fac");async function L0(t,e,n,r,A,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ai,eventId:A};if(e instanceof YA){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",GN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))i[d]=h}if(e instanceof Ya){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),c=a?`#${Fj}=${encodeURIComponent(a)}`:"";return`${Uj(t)}?${Va(o).slice(1)}${c}`}function Uj({config:t}){return t.emulator?Cy(t,Tj):`https://${t.authDomain}/${bj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="webStorageSupport";class Qj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=to,this._completeRedirectFn=Cg,this._overrideRedirectResult=Py}async _openPopup(e,n,r,A){var s;zr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await L0(e,n,r,eu(),A);return Ij(e,i,Su())}async _openRedirect(e,n,r,A){await this._originValidation(e);const s=await L0(e,n,r,eu(),A);return hH(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:A,promise:s}=this.eventManagers[n];return A?Promise.resolve(A):(zr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vj(e),r=new JU(e);return n.register("authEvent",A=>(te(A==null?void 0:A.authEvent,e,"invalid-auth-event"),{status:r.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pp,{type:Pp},A=>{var s;const i=(s=A==null?void 0:A[0])===null||s===void 0?void 0:s[Pp];i!==void 0&&n(!!i),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _U()||vU()||Fu()}}const Sj=Qj;class kj{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return oA("unexpected MultiFactorSessionType")}}}class Dy extends kj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Dy(e)}_finalizeEnroll(e,n,r){return iH(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return CH(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ZU{constructor(){}static assertion(e){return Dy._fromCredential(e)}}ZU.FACTOR_ID="phone";var M_="@firebase/auth",V_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Pj(t){Ks(new dA("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;te(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IU(t)},c=new ZM(r,A,s,a);return oV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new dA("auth-internal",e=>{const n=kt(e.getProvider("auth").getImmediate());return(r=>new Rj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(M_,V_,Nj(t)),Kr(M_,V_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=5*60;NN("authIdTokenMaxAge");function Lj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}eV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=A=>{const s=en("internal-error");s.customData=A,n(s)},r.type="text/javascript",r.charset="UTF-8",Lj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Pj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=2e3;async function Mj(t,e,n){var r;const{BuildInfo:A}=ro();zr(e.sessionId,"AuthEvent did not contain a session ID");const s=await Gj(e.sessionId),i={};return Fu()?i.ibi=A.packageName:Tu()?i.apn=A.packageName:Bn(t,"operation-not-supported-in-this-environment"),A.displayName&&(i.appDisplayName=A.displayName),i.sessionId=s,L0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,i)}async function Vj(t){const{BuildInfo:e}=ro(),n={};Fu()?n.iosBundleId=e.packageName:Tu()?n.androidPackageName=e.packageName:Bn(t,"operation-not-supported-in-this-environment"),await YU(t,n)}function Hj(t){const{cordova:e}=ro();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let A=null;r?e.plugins.browsertab.openUrl(t):A=e.InAppBrowser.open(t,zM()?"_blank":"_system","location=yes"),n(A)})})}async function jj(t,e,n){const{cordova:r}=ro();let A=()=>{};try{await new Promise((s,i)=>{let o=null;function a(){var h;s();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{i(en(t,"redirect-cancelled-by-user"))},Oj))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(a),document.addEventListener("resume",c,!1),Tu()&&document.addEventListener("visibilitychange",d,!1),A=()=>{e.removePassiveListener(a),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{A()}}function Kj(t){var e,n,r,A,s,i,o,a,c,d;const h=ro();te(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof((s=(A=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||A===void 0?void 0:A.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((a=(o=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||o===void 0?void 0:o.browsertab)===null||a===void 0?void 0:a.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Gj(t){const e=zj(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(A=>A.toString(16).padStart(2,"0")).join("")}function zj(t){if(zr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=20;class $j extends JU{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function qj(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Yj(),postBody:null,tenantId:t.tenantId,error:en(t,"no-auth-event")}}function Jj(t,e){return O0()._set(M0(t),e)}async function H_(t){const e=await O0()._get(M0(t));return e&&await O0()._remove(M0(t)),e}function Xj(t,e){var n,r;const A=eK(e);if(A.includes("/__/auth/callback")){const s=hh(A),i=s.firebaseError?Zj(decodeURIComponent(s.firebaseError)):null,o=(r=(n=i==null?void 0:i.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],a=o?en(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:A,postBody:null}}return null}function Yj(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Wj;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function O0(){return dr(Qy)}function M0(t){return Di("authEvent",t.config.apiKey,t.name)}function Zj(t){try{return JSON.parse(t)}catch{return null}}function eK(t){const e=hh(t),n=e.link?decodeURIComponent(e.link):void 0,r=hh(n).link,A=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return hh(A).link||A||r||n||t}function hh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Jo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK=500;class nK{constructor(){this._redirectPersistence=to,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cg,this._overrideRedirectResult=Py}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new $j(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Bn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,A){Kj(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),JH(),await this._originValidation(e);const i=qj(e,r,A);await Jj(e,i);const o=await Mj(e,i,n),a=await Hj(o);return jj(e,s,a)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Vj(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:A,BuildInfo:s}=ro(),i=setTimeout(async()=>{await H_(e),n.onEvent(j_())},tK),o=async d=>{clearTimeout(i);const h=await H_(e);let f=null;h&&(d!=null&&d.url)&&(f=Xj(h,d.url)),n.onEvent(f||j_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const a=A,c=`${s.packageName.toLowerCase()}://`;ro().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&o({url:d}),typeof a=="function")try{a(d)}catch(h){console.error(h)}}}}const rK=nK;function j_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(t,e){kt(t)._logFramework(e)}var sK="@firebase/auth-compat",iK="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK=1e3;function uc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function aK(){return uc()==="http:"||uc()==="https:"}function eQ(t=Tt()){return!!((uc()==="file:"||uc()==="ionic:"||uc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lK(){return uv()||cv()}function cK(){return _T()&&(document==null?void 0:document.documentMode)===11}function uK(t=Tt()){return/Edge\/\d+/.test(t)}function dK(t=Tt()){return cK()||uK(t)}function tQ(){try{const t=self.localStorage,e=Su();if(t)return t.setItem(e,"1"),t.removeItem(e),dK()?Pc():!0}catch{return Ly()&&Pc()}return!1}function Ly(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dp(){return(aK()||CT()||eQ())&&!lK()&&tQ()&&!Ly()}function nQ(){return eQ()&&typeof document<"u"}async function hK(){return nQ()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},oK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function fK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr={LOCAL:"local",NONE:"none",SESSION:"session"},_l=te,rQ="persistence";function gK(t,e){if(_l(Object.values(lr).includes(e),t,"invalid-persistence-type"),uv()){_l(e!==lr.SESSION,t,"unsupported-persistence-type");return}if(cv()){_l(e===lr.NONE,t,"unsupported-persistence-type");return}if(Ly()){_l(e===lr.NONE||e===lr.LOCAL&&Pc(),t,"unsupported-persistence-type");return}_l(e===lr.NONE||tQ(),t,"unsupported-persistence-type")}async function V0(t){await t._initializationPromise;const e=AQ(),n=Di(rQ,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function pK(t,e){const n=AQ();if(!n)return[];const r=Di(rQ,t,e);switch(n.getItem(r)){case lr.NONE:return[Ra];case lr.LOCAL:return[Au,to];case lr.SESSION:return[to];default:return[]}}function AQ(){var t;try{return((t=fK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=te;class xs{constructor(){this.browserResolver=dr(Sj),this.cordovaResolver=dr(rK),this.underlyingResolver=null,this._redirectPersistence=to,this._completeRedirectFn=Cg,this._overrideRedirectResult=Py}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,A){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,A)}async _openRedirect(e,n,r,A){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,A)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return nQ()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await hK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(t){return t.unwrap()}function wK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(t){return iQ(t)}function yK(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const A=e;A.resolver=new BK(t,AH(t,e))}else if(r){const A=iQ(e),s=e;A&&(s.credential=A,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function iQ(t){const{_tokenResponse:e}=t instanceof Vn?t.customData:t;if(!e)return null;if(!(t instanceof Vn)&&"temporaryProof"in e&&"phoneNumber"in e)return no.credentialFromResult(t);const n=e.providerId;if(!n||n===Cl.PASSWORD)return null;let r;switch(n){case Cl.GOOGLE:r=tA;break;case Cl.FACEBOOK:r=eA;break;case Cl.GITHUB:r=nA;break;case Cl.TWITTER:r=rA;break;default:const{oauthIdToken:A,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:o,nonce:a}=e;return!s&&!i&&!A&&!o?null:o?n.startsWith("saml.")?Na._create(n,o):pA._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:A,accessToken:s}):new aa(n).credential({idToken:A,accessToken:s,rawNonce:a})}return t instanceof Vn?r.credentialFromError(t):r.credentialFromResult(t)}function qn(t,e){return e.catch(n=>{throw n instanceof Vn&&yK(t,n),n}).then(n=>{const r=n.operationType,A=n.user;return{operationType:r,credential:vK(n),additionalUserInfo:rH(n),user:QA.getOrCreate(A)}})}async function H0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>qn(t,n.confirm(r))}}class BK{constructor(e,n){this.resolver=n,this.auth=wK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return qn(sQ(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this._delegate=e,this.multiFactor=aH(e)}static getOrCreate(e){return QA.USER_MAP.has(e)||QA.USER_MAP.set(e,new QA(e)),QA.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return qn(this.auth,RU(this._delegate,e))}async linkWithPhoneNumber(e,n){return H0(this.auth,DH(this._delegate,e,n))}async linkWithPopup(e){return qn(this.auth,zH(this._delegate,e,xs))}async linkWithRedirect(e){return await V0(kt(this.auth)),tj(this._delegate,e,xs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return qn(this.auth,NU(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return H0(this.auth,LH(this._delegate,e,n))}reauthenticateWithPopup(e){return qn(this.auth,GH(this._delegate,e,xs))}async reauthenticateWithRedirect(e){return await V0(kt(this.auth)),ZH(this._delegate,e,xs)}sendEmailVerification(e){return zV(this._delegate,e)}async unlink(e){return await SV(this._delegate,e),this}updateEmail(e){return JV(this._delegate,e)}updatePassword(e){return XV(this._delegate,e)}updatePhoneNumber(e){return OH(this._delegate,e)}updateProfile(e){return qV(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return WV(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}QA.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=te;class j0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Il(r,"invalid-api-key",{appName:e.name}),Il(r,"invalid-api-key",{appName:e.name});const A=typeof window<"u"?xs:void 0;this._delegate=n.initialize({options:{persistence:xK(r,e.name),popupRedirectResolver:A}}),this._delegate._updateErrorMap(IM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?QA.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){aV(this._delegate,e,n)}applyActionCode(e){return DV(this._delegate,e)}checkActionCode(e){return PU(this._delegate,e)}confirmPasswordReset(e,n){return PV(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return qn(this._delegate,OV(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return GV(this._delegate,e)}isSignInWithEmailLink(e){return HV(this._delegate,e)}async getRedirectResult(){Il(Dp(),this._delegate,"operation-not-supported-in-this-environment");const e=await rj(this._delegate,xs);return e?qn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){AK(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:A,error:s,complete:i}=K_(e,n,r);return this._delegate.onAuthStateChanged(A,s,i)}onIdTokenChanged(e,n,r){const{next:A,error:s,complete:i}=K_(e,n,r);return this._delegate.onIdTokenChanged(A,s,i)}sendSignInLinkToEmail(e,n){return VV(this._delegate,e,n)}sendPasswordResetEmail(e,n){return NV(this._delegate,e,n||void 0)}async setPersistence(e){gK(this._delegate,e);let n;switch(e){case lr.SESSION:n=to;break;case lr.LOCAL:n=await dr(Au)._isAvailable()?Au:Qy;break;case lr.NONE:n=Ra;break;default:return Bn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return qn(this._delegate,QV(this._delegate))}signInWithCredential(e){return qn(this._delegate,wg(this._delegate,e))}signInWithCustomToken(e){return qn(this._delegate,RV(this._delegate,e))}signInWithEmailAndPassword(e,n){return qn(this._delegate,MV(this._delegate,e,n))}signInWithEmailLink(e,n){return qn(this._delegate,jV(this._delegate,e,n))}signInWithPhoneNumber(e,n){return H0(this._delegate,PH(this._delegate,e,n))}async signInWithPopup(e){return Il(Dp(),this._delegate,"operation-not-supported-in-this-environment"),qn(this._delegate,KH(this._delegate,e,xs))}async signInWithRedirect(e){return Il(Dp(),this._delegate,"operation-not-supported-in-this-environment"),await V0(this._delegate),XH(this._delegate,e,xs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return LV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}j0.Persistence=lr;function K_(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const A=r;return{next:i=>A(i&&QA.getOrCreate(i)),error:e,complete:n}}function xK(t,e){const n=pK(t,e);if(typeof self<"u"&&!n.includes(Au)&&n.push(Au),typeof window<"u")for(const r of[Qy,to])n.includes(r)||n.push(r);return n.includes(Ra)||n.push(Ra),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.providerId="phone",this._delegate=new no(sQ(Zr.auth()))}static credential(e,n){return no.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Oy.PHONE_SIGN_IN_METHOD=no.PHONE_SIGN_IN_METHOD;Oy.PROVIDER_ID=no.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=te;class _K{constructor(e,n,r=Zr.app()){var A;CK((A=r.options)===null||A===void 0?void 0:A.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new RH(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK="auth-compat";function EK(t){t.INTERNAL.registerComponent(new dA(IK,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new j0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_o.EMAIL_SIGNIN,PASSWORD_RESET:_o.PASSWORD_RESET,RECOVER_EMAIL:_o.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:_o.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:_o.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:_o.VERIFY_EMAIL}},EmailAuthProvider:li,FacebookAuthProvider:eA,GithubAuthProvider:nA,GoogleAuthProvider:tA,OAuthProvider:aa,SAMLAuthProvider:lf,PhoneAuthProvider:Oy,PhoneMultiFactorGenerator:ZU,RecaptchaVerifier:_K,TwitterAuthProvider:rA,Auth:j0,AuthCredential:Xa,Error:Vn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(sK,iK)}EK(Zr);const bK="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",TK="zameny-b6c3f.firebaseapp.com",FK="zameny-b6c3f",UK="zameny-b6c3f.firebasestorage.app",QK="323355347910",SK="1:323355347910:web:c81f2813dce5ee9373c0c7",G_={apiKey:bK,authDomain:TK,projectId:FK,storageBucket:UK,messagingSenderId:QK,appId:SK};let z_,ir,Jt;if(!G_.apiKey)console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");else try{Zr.apps.length?z_=Zr.app():z_=Zr.initializeApp(G_),ir=Zr.firestore(),Jt=Zr.auth(),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}const Lp="schoolData",Op="main",Mp="publicSchedules",Cs={open:async()=>(console.log("Firestore connected"),{}),save:async t=>{if(!ir){console.error("Database not initialized (missing API key)");return}const e=Jt==null?void 0:Jt.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :        ( admin@gymnasium22.com).");return}try{const n=JSON.parse(JSON.stringify(t));await ir.collection(Lp).doc(Op).set(n)}catch(n){throw console.error("   Firebase:",n),n.code==="permission-denied"&&alert(" :       ."),n}},load:async()=>{if(!ir)return console.warn("Database not initialized. Returning initial data."),zt;try{const t=await ir.collection(Lp).doc(Op).get();if(t.exists){const e=t.data(),n={...zt,...e};return e.settings&&(n.settings={...zt.settings,...e.settings}),n}else return zt}catch(t){return console.error("   Firebase:",t),t.code==="permission-denied"&&console.error("   .   (allow read: if true)."),zt}},subscribe:(t,e)=>ir?ir.collection(Lp).doc(Op).onSnapshot(n=>{if(n.exists){const r=n.data(),A={...zt,...r};r.settings&&(A.settings={...zt.settings,...r.settings}),t(A)}else t(zt)},n=>{console.error("Firestore subscription error:",n),n.code==="permission-denied"&&console.error("    (subscribe)."),e(n)}):(console.warn("Database not initialized. Cannot subscribe."),()=>{}),exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{if(!ir)throw new Error("Database not initialized");const n=Jt==null?void 0:Jt.currentUser;if(!n||n.email!=="admin@gymnasium22.com")throw new Error("    .");try{const r={subjects:e.subjects,teachers:e.teachers.map(s=>({id:s.id,name:s.name,subjectIds:s.subjectIds,shifts:s.shifts,unavailableDates:[],telegramChatId:"",birthDate:void 0,absenceReasons:void 0})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},A=JSON.parse(JSON.stringify(r));await ir.collection(Mp).doc(t).set(A)}catch(r){throw console.error("  :",r),r}},getPublicData:async t=>{if(!ir)return null;try{const e=await ir.collection(Mp).doc(t).get();return e.exists?e.data():null}catch(e){return console.error("   :",e),null}},deletePublicData:async t=>{if(!ir)throw new Error("Database not initialized");const e=Jt==null?void 0:Jt.currentUser;if(!e||e.email!=="admin@gymnasium22.com")throw new Error("     .");try{await ir.collection(Mp).doc(t).delete()}catch(n){throw console.error("   :",n),n}}},oQ=k.createContext(void 0),kK="admin@gymnasium22.com",RK="teacher@gymnasium22.com",NK=({children:t})=>{const[e,n]=k.useState(null),[r,A]=k.useState(null),[s,i]=k.useState(!0);k.useEffect(()=>{if(!Jt){console.warn("Firebase Auth is not initialized. Authentication is disabled."),i(!1);return}const c=Jt.onAuthStateChanged(d=>{n(d),d?d.email===kK?A("admin"):d.email===RK?A("teacher"):(A(null),Jt==null||Jt.signOut()):A(null),i(!1)});return()=>c()},[]);const o=async()=>{Jt&&await Jt.signOut(),A(null)},a=()=>{A("guest"),i(!1)};return l.jsx(oQ.Provider,{value:{user:e,role:r,loading:s,logout:o,setGuestRole:a},children:t})},Za=()=>{const t=k.useContext(oQ);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},aQ=k.createContext(void 0),lQ=({children:t,initialData:e})=>{const[n,r]=k.useState(zt),[A,s]=k.useState(!0),[i,o]=k.useState([]),[a,c]=k.useState(-1),{user:d,role:h,loading:f}=Za();k.useEffect(()=>{if(e){r(e),o([e]),c(0),s(!1);return}if(f)return;if(!(d||h==="guest")){r(zt),s(!1);return}s(!0);const v=Cs.subscribe(R=>{const S={...zt,...R};S.teachers||(S.teachers=[]),S.teachers=S.teachers.map(N=>({shifts:[ce.First,ce.Second],telegramChatId:"",...N})),S.schedule||(S.schedule=[]),S.substitutions||(S.substitutions=[]),S.bellSchedule||(S.bellSchedule=pT),S.settings?S.settings={...zt.settings,...S.settings}:S.settings=zt.settings,r(S),o(N=>N.length===0?[S]:N),c(N=>N===-1?0:N),s(!1)},R=>{console.error("Failed to subscribe to data:",R),r(zt),s(!1)});return()=>{v&&v()}},[e,d,h,f]);const w=k.useCallback(async(y,v=!0)=>{const R=!d&&h==="guest",S={...n,...y};if(r(S),!e&&d&&!R)try{await Cs.save(S)}catch(N){console.error("Save failed silently in background",N)}else R&&console.warn("       .");if(v){const N=i.slice(0,a+1);N.push(S),N.length>50&&N.shift(),o(N),c(N.length-1)}},[n,i,a,d,h,e]),m=k.useCallback(async()=>{if(a>0){const y=i[a-1];c(a-1),r(y),!e&&d&&await Cs.save(y)}},[i,a,d,e]),C=k.useCallback(async()=>{if(a<i.length-1){const y=i[a+1];c(a+1),r(y),!e&&d&&await Cs.save(y)}},[i,a,d,e]),_=k.useCallback(async()=>{await w(zt)},[w]),B=k.useMemo(()=>({data:n,isLoading:A,saveData:w,resetData:_,undo:m,redo:C,canUndo:a>0,canRedo:a<i.length-1}),[n,A,w,_,m,C,a]);return l.jsx(aQ.Provider,{value:B,children:t})},_g=()=>{const t=k.useContext(aQ);if(!t)throw new Error("useFullData must be used within DataProvider");return t},cQ=k.createContext(void 0),uQ=k.createContext(void 0),dQ=({children:t})=>{const{data:e,saveData:n}=_g(),r=k.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),A=k.useCallback(async(i,o)=>{await n(i,o)},[n]),s=k.useMemo(()=>({...r,saveStaticData:A}),[r,A]);return l.jsx(cQ.Provider,{value:s,children:t})},hQ=({children:t})=>{const{data:e,saveData:n}=_g(),r=k.useMemo(()=>({schedule:e.schedule,substitutions:e.substitutions}),[e.schedule,e.substitutions]),A=k.useCallback(async(i,o)=>{await n(i,o)},[n]),s=k.useMemo(()=>({...r,saveScheduleData:A}),[r,A]);return l.jsx(uQ.Provider,{value:s,children:t})},ZA=()=>{const t=k.useContext(cQ);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=_g();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},el=()=>{const t=k.useContext(uQ);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=_g();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},PK={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},q=({name:t,size:e=24,className:n="",...r})=>{const A=PK[t];return A?l.jsx(A,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},RA=({isOpen:t,onClose:e,title:n,children:r,maxWidth:A="max-w-lg"})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${A} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(q,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null,DK=({x:t,y:e,onClose:n,actions:r})=>{if(k.useEffect(()=>{const s=()=>n();return window.addEventListener("click",s),()=>window.removeEventListener("click",s)},[n]),t===null||e===null)return null;const A={top:e,left:t};return window.innerWidth-t<200&&(A.left=t-200),l.jsx("div",{className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:A,children:r.map((s,i)=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),s.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${s.color||"text-slate-700 dark:text-slate-200"}`,children:[s.icon&&l.jsx(q,{name:s.icon,size:16}),s.label]},i))})},LK=()=>{const{bellSchedule:t}=ZA(),[e,n]=k.useState("..."),[r,A]=k.useState(""),[s,i]=k.useState(0),[o,a]=k.useState("bg-slate-500"),[c,d]=k.useState("");return k.useEffect(()=>{const h=()=>{const w=new Date,m=w.getDay(),_=[null,cr.Monday,cr.Tuesday,cr.Wednesday,cr.Thursday,cr.Friday,null][m];if(d(_||""),!_){n(" "),A(" "),a("bg-slate-400"),i(0);return}const B=w.getHours()*60+w.getMinutes();let y=t.filter(S=>S.day===_);y.length===0&&(y=t.filter(S=>S.day==="default"));let v=null;const R=S=>{const[N,I]=S.split(":").map(Number);return N*60+I};for(const S of y){const N=R(S.start),I=R(S.end);if(B>=N&&B<I){v={...S,duration:I-N,passed:B-N};break}}if(v)n(`${v.period} `),A(`${v.shift===ce.First?"1 ":"2 "}  . ${v.duration-v.passed} `),i(v.passed/v.duration*100),a("bg-indigo-600");else{let S=1/0,N=null;for(const I of y){const x=R(I.start);x>B&&x-B<S&&(S=x-B,N=I)}N&&S<30?(n(""),A(` ${S}  ${N.period} `),a("bg-amber-500"),i(100-S/20*100)):(n(" "),A(" "),a("bg-slate-400"),i(0))}};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center text-${o.replace("bg-","")}`,children:l.jsx(q,{name:"Clock",size:16,className:o.replace("bg-","text-")})})]}),s>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${s}%`}})})]})},Vp=({options:t,value:e,onChange:n,placeholder:r,groupBy:A})=>{var w;const[s,i]=k.useState(!1),[o,a]=k.useState(""),c=k.useRef(null);k.useEffect(()=>{const m=C=>{c.current&&!c.current.contains(C.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const h=((w=(A?t.flatMap(m=>m.options):t).find(m=>m.value===e))==null?void 0:w.label)||r,f=A?t.map(m=>({...m,options:m.options.filter(C=>C.label.toLowerCase().includes(o.toLowerCase()))})).filter(m=>m.options.length>0):t.filter(m=>m.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!s),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(q,{name:"Filter",size:14,className:"text-slate-400"})]}),s&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:o,onChange:m=>a(m.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),A?f.map((m,C)=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:m.label}),m.options.map(_=>l.jsx("div",{onClick:()=>{n(_.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===_.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:_.label},_.value))]},C)):f.map(m=>l.jsx("div",{onClick:()=>{n(m.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===m.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:m.label},m.value))]})]})},yd=({children:t,className:e=""})=>{const n=Ei.Children.toArray(t);return l.jsx("div",{className:e,children:n.map((r,A)=>l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${A*.05}s`,opacity:0},children:r},A))})},Hp=({items:t,max:e,barClassName:n="bg-indigo-500"})=>l.jsx("div",{className:"space-y-3",children:t.map((r,A)=>l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:r.label,children:r.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${r.value/e*100}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:r.value})]},A))}),OK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,settings:s}=ZA(),{schedule:i,substitutions:o}=el(),a=hu(),[c,d]=k.useState(localStorage.getItem("gym_notes")||""),[h]=k.useState(new Date),[f,w]=k.useState(""),[m,C]=k.useState(null),[_,B]=k.useState(!1),[y,v]=k.useState(""),[R,S]=k.useState(!1),[N,I]=k.useState(""),[x,b]=k.useState(!1);k.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){v("");const F=setTimeout(()=>v(""),2e3);return()=>clearTimeout(F)}},[c]);const Q=F=>new Date(F.getTime()-F.getTimezoneOffset()*6e4).toISOString().split("T")[0],U=k.useMemo(()=>Q(h),[h]),D=k.useMemo(()=>{const F=h.getDay();return F===0||F===6?null:Fn[F-1]},[h]),T=k.useMemo(()=>{const F=new Date;return F.setHours(0,0,0,0),e.filter(M=>M.birthDate).map(M=>{const H=new Date(M.birthDate);let W=new Date(F.getFullYear(),H.getMonth(),H.getDate());W<F&&W.setFullYear(F.getFullYear()+1);const G=Math.ceil((W.getTime()-F.getTime())/(1e3*60*60*24));return{...M,diff:G,age:F.getFullYear()-H.getFullYear()}}).filter(M=>M.diff<=30).sort((M,H)=>M.diff-H.diff)},[e]),Te=k.useMemo(()=>{const F=e.length,M=new Map;e.filter(re=>re.unavailableDates.includes(U)).forEach(re=>{var Se;const We=((Se=re.absenceReasons)==null?void 0:Se[U])===" "?" ":"";M.set(re.id,{id:re.id,name:re.name,displayReason:We})});const H=o.filter(re=>re.date===U&&re.replacementTeacherId!=="conducted"&&re.replacementTeacherId!==re.originalTeacherId),W=new Map;H.forEach(re=>{if(M.has(re.originalTeacherId))return;const Re=e.find(Pe=>Pe.id===re.originalTeacherId);if(!Re)return;const We=i.find(Pe=>Pe.id===re.scheduleItemId);if(!We)return;W.has(re.originalTeacherId)||W.set(re.originalTeacherId,{teacher:Re,lessons:[]}),W.get(re.originalTeacherId).lessons.push({period:We.period,reason:re.lessonAbsenceReason})});const G=Array.from(M.values());W.forEach((re,Re)=>{const We=re.lessons.sort((Qe,ke)=>Qe.period-ke.period),Se=We.map(Qe=>Qe.period).join(", "),Je=We.some(Qe=>Qe.reason===" ")?" ":"";G.push({id:Re,name:re.teacher.name,displayReason:`${Se} : ${Je}`})}),G.sort((re,Re)=>re.name.localeCompare(Re.name));const de=G.length,le=F-de;return{presentPercent:F>0?Math.round(le/F*100):0,absentCount:de,totalTeachers:F,absentTeachersList:G}},[e,U,o,i]),et=k.useMemo(()=>{const F=new Date(h);for(F.setDate(h.getDate()+1);F.getDay()===0||F.getDay()===6;)F.setDate(F.getDate()+1);const H=[null,"","","","","",null][F.getDay()];if(!H)return[];const W=[];return n.forEach(G=>{const de=i.filter(le=>le.classId===G.id&&le.day===H);de.length===0?W.push({class:G.name,issue:`   ${H}`}):de.length<4&&W.push({class:G.name,issue:`  (${de.length})`}),de.forEach(le=>{if(i.some(re=>re.id!==le.id&&re.day===H&&re.period===le.period&&re.shift===le.shift&&re.teacherId===le.teacherId)&&W.push({class:G.name,issue:`  (${le.period} )`}),le.roomId){const re=r.find(Re=>Re.id===le.roomId);re&&re.capacity<G.studentsCount&&W.push({class:G.name,issue:`: ${re.name} (${le.period} )`})}})}),W.filter((G,de,le)=>le.findIndex(Ie=>Ie.class===G.class&&Ie.issue===G.issue)===de).slice(0,10)},[i,n,e,r,h]),ee=k.useMemo(()=>{if(!D)return 0;let F=0;const M=i.filter(H=>H.day===D);for(const H of M){const W=e.find(G=>G.id===H.teacherId);if(W&&W.unavailableDates.includes(U)){const G=o.find(de=>de.scheduleItemId===H.id&&de.date===U);(!G||G.replacementTeacherId==="cancelled"||G.replacementTeacherId==="conducted")&&F++}}return F},[i,e,o,U,D]),be=()=>{var We;if(!f){C(null);return}const F=new Date,H=[null,cr.Monday,cr.Tuesday,cr.Wednesday,cr.Thursday,cr.Friday,null][F.getDay()];if(!H){C({status:"",detail:"  ",color:"text-slate-500"});return}const W=Se=>{const[Pe,Je]=Se.split(":").map(Number);return Pe*60+Je},G=F.getHours()*60+F.getMinutes();let de=A.filter(Se=>Se.day===H);de.length===0&&(de=A.filter(Se=>Se.day==="default"));const le=de.find(Se=>{const Pe=W(Se.start),Je=W(Se.end);return G>=Pe&&G<=Je}),Ie=f.toLowerCase(),re=e.find(Se=>Se.name.toLowerCase().includes(Ie)),Re=n.find(Se=>Se.name.toLowerCase().includes(Ie));if(!re&&!Re){C({status:" ",detail:" ",color:"text-red-500"});return}if(re){if(re.unavailableDates.includes(U)){const ke=((We=re.absenceReasons)==null?void 0:We[U])===" "?" ":"";C({status:"",detail:ke,color:"text-red-500",icon:"UserX",items:[]});return}if(!le){C({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Se=i.filter(Qe=>Qe.teacherId===re.id&&Qe.day===H&&Qe.period===le.period&&Qe.shift===le.shift),Pe=o.filter(Qe=>Qe.date===U&&Qe.replacementTeacherId===re.id).map(Qe=>i.find(ke=>ke.id===Qe.scheduleItemId)).filter(Qe=>!!Qe&&Qe.day===H&&Qe.period===le.period&&Qe.shift===le.shift);let Je=[];Se.forEach(Qe=>{var Le,Pt,Wn;const ke=o.find(nt=>nt.date===U&&nt.scheduleItemId===Qe.id);if(!ke||ke.replacementTeacherId===re.id){const nt=((Le=r.find(nn=>nn.id===((ke==null?void 0:ke.replacementRoomId)||Qe.roomId)))==null?void 0:Le.name)||(ke==null?void 0:ke.replacementRoomId)||Qe.roomId||" .",un=(Pt=t.find(nn=>nn.id===Qe.subjectId))==null?void 0:Pt.name,Rn=(Wn=n.find(nn=>nn.id===Qe.classId))==null?void 0:Wn.name;Je.push({room:nt,subject:un,entityName:Rn,direction:Qe.direction,isSubstitution:!!(ke&&ke.replacementTeacherId===re.id),originalTeacherName:null})}}),Pe.forEach(Qe=>{var un,Rn,nn;const ke=o.find(L=>L.date===U&&L.scheduleItemId===Qe.id&&L.replacementTeacherId===re.id);if(!ke)return;const Le=((un=r.find(L=>L.id===(ke.replacementRoomId||Qe.roomId)))==null?void 0:un.name)||ke.replacementRoomId||Qe.roomId||" .",Pt=(Rn=t.find(L=>L.id===Qe.subjectId))==null?void 0:Rn.name,Wn=(nn=n.find(L=>L.id===Qe.classId))==null?void 0:nn.name,nt=e.find(L=>L.id===ke.originalTeacherId);Je.push({room:Le,subject:Pt,entityName:Wn,direction:Qe.direction,isSubstitution:!0,originalTeacherName:nt==null?void 0:nt.name})}),Je.length>0?C({status:` ${le.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Je}):C({status:"",detail:` ( ${le.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(Re){if(!le){C({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Se=i.filter(Pe=>Pe.classId===Re.id&&Pe.day===H&&Pe.period===le.period&&Pe.shift===le.shift);if(Se.length>0){const Pe=Se.map(ke=>{var $,ne,me,we,fe;const Le=o.find(se=>se.scheduleItemId===ke.id&&se.date===U);if(Le&&Le.replacementTeacherId==="cancelled")return{cancelled:!0,subject:($=t.find(se=>se.id===ke.subjectId))==null?void 0:$.name};const Pt=!!(Le&&Le.replacementTeacherId!=="conducted"&&Le.replacementTeacherId!=="cancelled"),Wn=Pt?Le.replacementTeacherId:ke.teacherId,nt=(Le==null?void 0:Le.replacementRoomId)||ke.roomId,un=(ne=e.find(se=>se.id===Wn))==null?void 0:ne.name,Rn=((me=r.find(se=>se.id===nt))==null?void 0:me.name)||nt||" .",nn=(we=t.find(se=>se.id===ke.subjectId))==null?void 0:we.name,L=Pt?(fe=e.find(se=>se.id===Le.originalTeacherId))==null?void 0:fe.name:null;return{room:Rn,subject:nn,entityName:un,direction:ke.direction,isSubstitution:Pt,originalTeacherName:L}}),Je=Pe.filter(ke=>!ke.cancelled),Qe=Pe.filter(ke=>!!ke.cancelled);Je.length>0?C({status:` ${le.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Je}):Qe.length>0?C({status:" ",detail:Qe.map(ke=>ke.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):C({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else C({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},z=async()=>{if(!N.trim()){alert(",   .");return}if(!(s!=null&&s.telegramToken)||!(s!=null&&s.feedbackChatId)){alert("     .");return}b(!0);const F=` *   :*

${N}`;try{const H=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:F,parse_mode:"Markdown"})})).json();if(H.ok)alert("!   ."),S(!1),I("");else throw new Error(H.description)}catch(M){console.error("   Telegram:",M),alert(`   . : ${M}`)}finally{b(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx(q,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(q,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:F=>w(F.target.value),onKeyDown:F=>F.key==="Enter"&&be(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:be,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx(q,{name:"Search",size:20})})]}),m&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${m.color}`,children:[l.jsx(q,{name:m.icon||"Info",size:14})," ",m.status]}),m.items&&m.items.length>0?l.jsx("div",{className:"space-y-2",children:m.items.map((F,M)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[F.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:F.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.subject}),F.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:F.originalTeacherName?` ( ${F.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:F.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:F.room})]})]},M))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:m.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx(q,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:ee>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:ee}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx(q,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>B(!_),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:_?" ":" ",children:l.jsx(q,{name:_?"PieChart":"List",size:20})})]}),_?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Te.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Te.absentTeachersList.map(F=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:F.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:F.displayReason})]},F.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx(q,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Te.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Te.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Te.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx(q,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(F=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.name}),l.jsx("span",{className:"font-bold text-slate-400",children:F.diff===0?"!":`${F.diff} .`})]},F.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx(q,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:et.length?et.map((F,M)=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:F.issue})]},M)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(q,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:F=>d(F.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),y&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx(q,{name:"Save",size:12})," ",y]})]})]})]}),l.jsx(RA,{isOpen:R,onClose:()=>S(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:N,onChange:F=>I(F.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:z,disabled:x,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[x?l.jsx(q,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(q,{name:"Send",size:16}),x?"...":""]})})]})})]})};var fQ={},gQ={},pQ={},Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});function MK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Ig.default=MK;var My={};Object.defineProperty(My,"__esModule",{value:!0});var VK=Ig,HK=" and ";function jK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],A=VK.default(n),s=r;return typeof s=="boolean"?s?A:"not "+A:(typeof s=="number"&&/[height|width]$/.test(A)&&(s=s+"px"),"("+A+": "+s+")")}).join(HK)}My.default=jK;var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});function KK(){}Vy.default=KK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Ig;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=My;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=Vy;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(pQ);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=k,n=pQ;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(A){return!0}};var r=function(A){return function(s,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],c=o[1],d=n.queryObjectToString(s);return A(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),w=function(){h&&c(!!f.matches)};return f.addListener(w),c(f.matches),function(){h=!1,f.removeListener(w)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(gQ);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=gQ;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(fQ);const GK=WI(fQ),mQ=({readOnly:t=!1})=>{const{subjects:e,teachers:n,classes:r,rooms:A}=ZA(),{schedule:s,saveScheduleData:i,canUndo:o,canRedo:a,undo:c,redo:d}=el(),[h,f]=k.useState(ce.First),[w,m]=k.useState(cr.Monday),[C,_]=k.useState(!1),[B,y]=k.useState({}),[v,R]=k.useState("class"),[S,N]=k.useState(""),[I,x]=k.useState(""),[b,Q]=k.useState(""),[U,D]=k.useState(!1),[T,Te]=k.useState({visible:!1,x:0,y:0,item:null,cell:null}),[et,ee]=k.useState(null),[be,z]=k.useState([]),[F,M]=k.useState(null),[H,W]=k.useState(null),G=GK({maxWidth:767}),[de,le]=k.useState(!0),[Ie,re]=k.useState(!1),[Re,We]=k.useState({isOpen:!1,type:"",day:"",classId:""}),[Se,Pe]=k.useState(cr.Monday),[Je,Qe]=k.useState(""),ke=AA[h],Le=()=>v==="week"?AA[h].map(P=>({id:P.toString(),name:`${P} `})):v==="class"?S?r.filter(P=>P.id===S&&P.shift===h):r.filter(P=>P.shift===h):v==="teacher"?S?n.filter(P=>P.id===S):n:v==="subject"?S?e.filter(P=>P.id===S):e:[],Pt=(P,Y)=>{let ye=[];if(v==="week"){const Ae=parseInt(P),oe=Y;ye=s.filter(ge=>ge.shift===h&&ge.period===Ae&&ge.day===oe),S&&(ye=ye.filter(ge=>ge.classId===S))}else{const Ae=Y;v==="class"&&(ye=s.filter(oe=>oe.classId===P&&oe.period===Ae&&oe.day===w&&oe.shift===h)),v==="teacher"&&(ye=s.filter(oe=>oe.teacherId===P&&oe.period===Ae&&oe.day===w&&oe.shift===h)),v==="subject"&&(ye=s.filter(oe=>oe.subjectId===P&&oe.period===Ae&&oe.day===w&&oe.shift===h))}return I&&(ye=ye.filter(Ae=>{if(!Ae.roomId)return!1;const oe=A.find(At=>At.id===Ae.roomId);return(oe?oe.name:Ae.roomId).toLowerCase().includes(I.toLowerCase())})),b&&(ye=ye.filter(Ae=>{var oe;return(oe=Ae.direction)==null?void 0:oe.toLowerCase().includes(b.toLowerCase())})),ye},Wn=P=>{const Y=[],ye=s.filter(ge=>ge.id!==P.id&&ge.day===P.day&&ge.period===P.period&&ge.shift===P.shift);return ye.find(ge=>ge.teacherId===P.teacherId)&&Y.push("teacher"),ye.find(ge=>!(ge.classId!==P.classId||ge.direction&&P.direction&&ge.direction!==P.direction))&&Y.push("class"),P.roomId&&ye.find(At=>At.roomId===P.roomId)&&Y.push("room"),Y},nt=(P,Y,ye)=>{const Ae=[],oe=r.find($e=>$e.id===P),ge=e.find($e=>$e.id===Y),At=A.find($e=>$e.id===ye);return At&&(oe&&At.capacity<oe.studentsCount&&Ae.push(`  !   ${oe.studentsCount} .,     ${At.capacity}.`),ge&&ge.requiredRoomType&&ge.requiredRoomType!==""&&At.type!==ge.requiredRoomType&&Ae.push(`   !   "${ge.requiredRoomType}",   "${At.type}".`)),Ae},un=P=>{const Y=nt(P.classId,P.subjectId,P.roomId);z(Y)},Rn=P=>{t||(y(P),un(P),_(!0))},nn=(P,Y,ye=w)=>{if(t)return;const Ae={period:Y,day:ye,shift:h,id:Math.random().toString(36).substr(2,9)};v==="class"&&(Ae.classId=P),v==="teacher"&&(Ae.teacherId=P),v==="subject"&&(Ae.subjectId=P),v==="week"&&(Ae.period=parseInt(P),Ae.day=ye,S&&r.find(oe=>oe.id===S)&&(Ae.classId=S)),y(Ae),z([]),_(!0)},L=async()=>{if(!B.subjectId||!B.teacherId||!B.classId)return;let P=[...s];const Y=P.findIndex(ye=>ye.id===B.id);Y>=0?P[Y]=B:P.push(B),await i({schedule:P}),_(!1)},$=async P=>{const Y=s.filter(ye=>ye.id!==(P||B.id));await i({schedule:Y}),_(!1)},ne=(P,Y,ye)=>{t||(P.preventDefault(),P.stopPropagation(),Te({visible:!0,x:P.clientX,y:P.clientY,item:Y,cell:ye}))},me=(P,Y)=>{if(t)return;M(Y),P.dataTransfer.effectAllowed="move";const ye=P.target;setTimeout(()=>ye.classList.add("dragging"),0)},we=P=>{P.target.classList.remove("dragging"),M(null),W(null)},fe=(P,Y)=>{P.preventDefault(),!t&&W(`${Y.rowId}-${Y.colKey}`)},se=async(P,Y)=>{if(P.preventDefault(),!F||t)return;const ye={...F};v==="week"?(ye.period=parseInt(Y.rowId),ye.day=Y.colKey):(ye.period=Y.colKey,ye.day=w,v==="class"&&(ye.classId=Y.rowId),v==="teacher"&&(ye.teacherId=Y.rowId),v==="subject"&&(ye.subjectId=Y.rowId));let Ae=s.map(oe=>oe.id===ye.id?ye:oe);await i({schedule:Ae}),M(null),W(null)},Fe=[];T.item?Fe.push({label:"",icon:"Copy",onClick:()=>ee(T.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>$(T.item.id)}):T.cell&&(et&&Fe.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...et,id:Math.random().toString(36).substr(2,9),day:w,shift:h,period:T.cell.colKey};v==="week"&&(P.day=T.cell.colKey,P.period=parseInt(T.cell.rowId)),v==="class"?P.classId=T.cell.rowId:v==="teacher"?P.teacherId=T.cell.rowId:v==="subject"&&(P.subjectId=T.cell.rowId);let Y=[...s,P];await i({schedule:Y}),ee(null)}}),Fe.push({label:" ",icon:"Plus",onClick:()=>nn(T.cell.rowId,T.cell.colKey,v==="week"?T.cell.colKey:w)}));const Ce=B.subjectId?n.filter(P=>P.subjectIds.includes(B.subjectId)):[],xe=B.subjectId?n.filter(P=>!P.subjectIds.includes(B.subjectId)):n,Me=k.useMemo(()=>{var P,Y,ye,Ae;if(S){if(v==="teacher")return(P=n.find(oe=>oe.id===S))==null?void 0:P.name;if(v==="class")return(Y=r.find(oe=>oe.id===S))==null?void 0:Y.name;if(v==="subject")return(ye=e.find(oe=>oe.id===S))==null?void 0:ye.name;if(v==="week")return(Ae=r.find(oe=>oe.id===S))==null?void 0:Ae.name}return`  ${w}`},[S,v,n,r,e,w]),rt=!!S,Xe=k.useMemo(()=>rt?Fn:ke,[rt,ke]),Oe=k.useMemo(()=>rt?AA[h].map(P=>({id:P.toString(),name:`${P} `})):Le(),[rt,h,Le]),$r=(P,Y)=>{if(rt){const ye=parseInt(P),Ae=Y;let oe=s.filter(ge=>ge.shift===h&&ge.period===ye&&ge.day===Ae);return v==="class"||v==="week"?oe=oe.filter(ge=>ge.classId===S):v==="teacher"?oe=oe.filter(ge=>ge.teacherId===S):v==="subject"&&(oe=oe.filter(ge=>ge.subjectId===S)),oe}else return Pt(P,Y)},Sr=Le(),kr=v==="week"?Fn:ke,Rr=(P,Y,ye)=>{We({isOpen:!0,type:P,day:Y||"",classId:ye||""})},Dt=async()=>{let P=[...s];Re.type==="clearAll"?P=[]:Re.type==="clearDay"&&Re.day?P=P.filter(Y=>Y.day!==Re.day):Re.type==="clearClass"&&Re.classId&&(P=P.filter(Y=>Y.classId!==Re.classId)),await i({schedule:P}),We({isOpen:!1,type:"",day:"",classId:""}),re(!1)},xn=(P,Y,ye)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(Ae=>{const oe=e.find(rn=>rn.id===Ae.subjectId),ge=n.find(rn=>rn.id===Ae.teacherId),At=r.find(rn=>rn.id===Ae.classId),$e=Wn(Ae),qt=A.find(rn=>rn.id===Ae.roomId),Nr=qt?qt.name:Ae.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:rn=>me(rn,Ae),onDragEnd:t?void 0:we,onClick:t?void 0:()=>Rn(Ae),onContextMenu:t?void 0:rn=>ne(rn,Ae,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${$e.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:$e.length===0&&(oe!=null&&oe.color)?{backgroundColor:`${oe.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:v==="subject"||v==="week"?At==null?void 0:At.name:oe==null?void 0:oe.name}),Ae.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Ae.direction})]}),v==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:oe==null?void 0:oe.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:ge==null?void 0:ge.name,children:[l.jsx(q,{name:v==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:v==="teacher"?At==null?void 0:At.name:ge==null?void 0:ge.name})]}),Nr&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:qt?`: ${qt.capacity}, : ${qt.type}`:"",children:Nr})]}),$e.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${$e.join(", ")}`,children:"!"})]},Ae.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>nn(ye,Y,v==="week"?Y:w),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(q,{name:"Plus",size:16})})]}),Nn=()=>{if(!S)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=s.filter(Y=>Y.day===w&&Y.shift===h&&(v==="class"&&Y.classId===S||v==="teacher"&&Y.teacherId===S||v==="subject"&&Y.subjectId===S)).sort((Y,ye)=>Y.period-ye.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",w,"  ",h,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(Y=>{const ye=e.find(qt=>qt.id===Y.subjectId),Ae=n.find(qt=>qt.id===Y.teacherId),oe=r.find(qt=>qt.id===Y.classId),ge=A.find(qt=>qt.id===Y.roomId),At=ge?ge.name:Y.roomId,$e=Wn(Y);return l.jsxs("div",{onClick:t?void 0:()=>Rn(Y),className:`rounded-xl p-4 shadow-sm border ${$e.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[Y.period," "]}),$e.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${$e.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ye==null?void 0:ye.name," ",Y.direction&&`(${Y.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[oe==null?void 0:oe.name,"  ",Ae==null?void 0:Ae.name]}),At&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",At]})]},Y.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[T.visible&&l.jsx(DK,{x:T.x,y:T.y,onClose:()=>Te({...T,visible:!1}),actions:Fe}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ce.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ce.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),v!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Fn.map(P=>l.jsx("button",{onClick:()=>m(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${w===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:c,disabled:!o,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(q,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:d,disabled:!a,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(q,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{R("class"),N("")},className:`p-2 rounded-md ${v==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{R("teacher"),N("")},className:`p-2 rounded-md ${v==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{R("subject"),N("")},className:`p-2 rounded-md ${v==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;R("week"),N(((P=r[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${v==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(q,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(q,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:S,onChange:P=>N(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",v==="class"?"":v==="teacher"?"":v==="week"?" ()":""]}),(v==="class"||v==="week")&&r.filter(P=>P.shift===h).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="teacher"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="subject"&&e.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:I,onChange:P=>x(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:b,onChange:P=>Q(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>re(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(q,{name:"List",size:16})," . ."]}),(S||v==="week")&&l.jsx("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(q,{name:"Printer",size:16})})]})]}),G&&!t&&S&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>le(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${de?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(q,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>le(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${de?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(q,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:G&&de&&!t&&S?Nn():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:v==="week"?"":v==="class"?"":v==="teacher"?"":""}),kr.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Sr.length>0?Sr.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),kr.map(Y=>{const ye=Pt(P.id,Y),Ae=`${P.id}-${Y}`;return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${H===Ae?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:oe=>ne(oe,null,{rowId:P.id,colKey:Y}),onDragOver:t?void 0:oe=>fe(oe,{rowId:P.id,colKey:Y}),onDrop:t?void 0:oe=>se(oe,{rowId:P.id,colKey:Y}),children:xn(ye,Y,P.id)},Y)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(RA,{isOpen:C,onClose:()=>_(!1),title:B.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",B.day]}),l.jsxs("span",{children:[": ",B.period]}),l.jsxs("span",{children:[": ",B.shift===ce.First?"1 ":"2 "]})]}),be.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:be.map((P,Y)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(q,{name:"AlertTriangle",size:14}),P]},Y))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Vp,{options:r.filter(P=>P.shift===h).map(P=>({value:P.id,label:P.name})),value:B.classId,onChange:P=>{y({...B,classId:P}),un({...B,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Vp,{options:e.map(P=>({value:P.id,label:P.name})),value:B.subjectId,onChange:P=>{y({...B,subjectId:P}),un({...B,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Vp,{options:[{value:"recommend",label:"",options:Ce.map(P=>({value:P.id,label:P.name}))},{value:"others",label:"",options:xe.map(P=>({value:P.id,label:P.name}))}],value:B.teacherId,onChange:P=>y({...B,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:B.direction||"",onChange:P=>y({...B,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:B.roomId||"",onChange:P=>{y({...B,roomId:P.target.value}),un({...B,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),A.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[B.id&&l.jsx("button",{onClick:()=>$(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:L,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(RA,{isOpen:Ie,onClose:()=>re(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>Rr("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:Se,onChange:P=>Pe(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Fn.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>Rr("clearDay",Se),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",Se]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:Je,onChange:P=>Qe(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{Je&&Rr("clearClass",void 0,Je)},disabled:!Je,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(RA,{isOpen:Re.isOpen,onClose:()=>We({...Re,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>We({...Re,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Dt,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),U&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(q,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:Me}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:rt||v==="week"?"":v==="class"?"":v==="teacher"?"":""}),Xe.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:rt||v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:Oe.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),Xe.map(Y=>{const ye=$r(P.id,Y);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ye.map(Ae=>{const oe=e.find(vA=>vA.id===Ae.subjectId),ge=n.find(vA=>vA.id===Ae.teacherId),At=r.find(vA=>vA.id===Ae.classId),$e=A.find(vA=>vA.id===Ae.roomId),qt=$e?$e.name:Ae.roomId,Nr=v==="teacher",Pg=v==="subject"||v==="week"||rt&&Nr?At==null?void 0:At.name:oe==null?void 0:oe.name,es=Nr?At==null?void 0:At.name:ge==null?void 0:ge.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Pg,Ae.direction&&` (${Ae.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:es}),qt&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:qt})]})]},Ae.id)})},Y)})]},P.id))})]})]})})]})]})},zK=()=>{var be,z;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,saveStaticData:s}=ZA(),[i,o]=k.useState("teachers"),[a,c]=k.useState(!1),[d,h]=k.useState(null),[f,w]=k.useState({}),[m,C]=k.useState({}),[_,B]=k.useState({}),[y,v]=k.useState({}),[R,S]=k.useState("default"),[N,I]=k.useState(null),x=F=>{h(F||null),i==="teachers"?w(F?e.find(M=>M.id===F)??{}:{subjectIds:[],unavailableDates:[],shifts:[ce.First,ce.Second],telegramChatId:""}):i==="subjects"?C(F?t.find(M=>M.id===F)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?B(F?n.find(M=>M.id===F)??{}:{shift:ce.First,studentsCount:25}):i==="rooms"&&v(F?r.find(M=>M.id===F)??{}:{capacity:30,type:""}),c(!0)},b=async()=>{const F=()=>Math.random().toString(36).substr(2,9),M={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:m,key:"subjects"},classes:{list:n,form:_,key:"classes"},rooms:{list:r,form:y,key:"rooms"}};if(i==="bells"||!(i in M))return;const H=M[i],{list:W,form:G,key:de}=H;if(!G.name)return;let le=[...W];d?le=le.map(Ie=>Ie.id===d?{...Ie,...G}:Ie):le.push({...G,id:F()}),await s({[de]:le}),c(!1)},Q=async F=>{if(window.confirm(" ?"))switch(i){case"teachers":await s({teachers:e.filter(M=>M.id!==F)});break;case"subjects":await s({subjects:t.filter(M=>M.id!==F)});break;case"classes":await s({classes:n.filter(M=>M.id!==F)});break;case"rooms":await s({rooms:r.filter(M=>M.id!==F)});break}},U=(F,M)=>{I(M),F.dataTransfer.effectAllowed="move"},D=F=>{F.preventDefault()},T=async(F,M)=>{if(!(N===null||N===M)){switch(i){case"teachers":{const H=[...e],[W]=H.splice(N,1);H.splice(M,0,W),await s({teachers:H});break}case"subjects":{const H=[...t],[W]=H.splice(N,1);H.splice(M,0,W),await s({subjects:H});break}case"classes":{const H=[...n],[W]=H.splice(N,1);H.splice(M,0,W),await s({classes:H});break}case"rooms":{const H=[...r],[W]=H.splice(N,1);H.splice(M,0,W),await s({rooms:H});break}}I(null)}},Te=(F,M)=>{const H=R;let W=A.find(G=>G.shift===F&&G.period===M&&G.day===H);if(!W&&H!=="default"){const G=A.find(de=>de.shift===F&&de.period===M&&de.day==="default");return G?{...G,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return W||{start:"",end:""}},et=async(F,M,H,W)=>{let G=[...A];const de=R,le=G.findIndex(Ie=>Ie.shift===F&&Ie.period===M&&Ie.day===de);le>=0?G[le]={...G[le],[H]:W}:G.push({shift:F,period:M,[H]:W,start:"00:00",end:"00:00",day:de}),await s({bellSchedule:G})},ee=F=>{const M=f.shifts||[];M.includes(F)?w({...f,shifts:M.filter(H=>H!==F)}):w({...f,shifts:[...M,F]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(F=>l.jsxs("button",{onClick:()=>o(F.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===F.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(q,{name:F.icon,size:18})," ",F.label]},F.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>x(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(q,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(yd,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((F,M)=>{var H,W;return l.jsxs("div",{draggable:!0,onDragStart:G=>U(G,M),onDragOver:D,onDrop:G=>T(G,M),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:F.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(q,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:F.birthDate?`: ${new Date(F.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[((H=F.shifts)==null?void 0:H.includes(ce.First))&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),((W=F.shifts)==null?void 0:W.includes(ce.Second))&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:F.subjectIds.map(G=>{const de=t.find(le=>le.id===G);return de?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:de.color,color:"#334155"},children:de.name},G):null})})]},F.id)})}),i==="subjects"&&l.jsx(yd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((F,M)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,M),onDragOver:D,onDrop:H=>T(H,M),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:F.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.difficulty,"  ",F.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:16})})]})]},F.id))}),i==="classes"&&l.jsx(yd,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((F,M)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,M),onDragOver:D,onDrop:H=>T(H,M),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(q,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[F.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${F.shift===ce.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[F.shift===ce.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:14})})]})]},F.id))}),i==="rooms"&&l.jsx(yd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((F,M)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,M),onDragOver:D,onDrop:H=>T(H,M),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(q,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.capacity,"  ",F.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:16})})]})]},F.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(F=>l.jsx("button",{onClick:()=>S(F),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${R===F?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:F==="default"?"":F===""?"":""},F))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ce.First,ce.Second].map(F=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${F===ce.First?"bg-indigo-600":"bg-purple-600"}`,children:F}),l.jsx("div",{className:"p-6 space-y-3",children:AA[F].map(M=>{const H=Te(F,M);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${H.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:M}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.start,onChange:W=>et(F,M,"start",W.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.end,onChange:W=>et(F,M,"end",W.target.value)})]})]},M)})})]},F))})]})]}),l.jsx(RA,{isOpen:a,onClose:()=>c(!1),title:"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:F=>w({...f,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:F=>w({...f,birthDate:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:F=>w({...f,telegramChatId:F.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(be=f.shifts)==null?void 0:be.includes(ce.First),onChange:()=>ee(ce.First)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(z=f.shifts)==null?void 0:z.includes(ce.Second),onChange:()=>ee(ce.Second)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(F=>{var M;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(M=f.subjectIds)==null?void 0:M.includes(F.id),onChange:H=>{const W=f.subjectIds||[];w({...f,subjectIds:H.target.checked?[...W,F.id]:W.filter(G=>G!==F.id)})}}),l.jsx("span",{className:"text-sm dark:text-slate-300",children:F.name})]},F.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:m.name||"",onChange:F=>C({...m,name:F.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:m.color||"#ffffff",onChange:F=>C({...m,color:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.difficulty||5,onChange:F=>C({...m,difficulty:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.requiredRoomType,onChange:F=>C({...m,requiredRoomType:F.target.value}),children:Yx.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:_.name||"",onChange:F=>B({..._,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:_.studentsCount||25,onChange:F=>B({..._,studentsCount:parseInt(F.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>B({..._,shift:ce.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ce.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>B({..._,shift:ce.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ce.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:y.name||"",onChange:F=>v({...y,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.capacity||30,onChange:F=>v({...y,capacity:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.type,onChange:F=>v({...y,type:F.target.value}),children:Yx.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:b,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},WK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:A,saveStaticData:s}=ZA(),{schedule:i,substitutions:o,saveScheduleData:a}=el(),c=ri(),[d,h]=k.useState(new Date().toISOString().split("T")[0]),[f,w]=k.useState(!1),[m,C]=k.useState(null),[_,B]=k.useState(!1),[y,v]=k.useState(!1),[R,S]=k.useState(null),[N,I]=k.useState(""),[x,b]=k.useState(!1),[Q,U]=k.useState(""),[D,T]=k.useState(""),[Te,et]=k.useState("all"),[ee,be]=k.useState(""),[z,F]=k.useState(""),[M,H]=k.useState(""),[W,G]=k.useState("");k.useEffect(()=>{var L;(L=c.state)!=null&&L.subParams&&(C(c.state.subParams),H(""),G(""),w(!0),window.history.replaceState({},document.title))},[c.state]);const de=k.useMemo(()=>{const L=new Date(d).getDay();return L===0||L===6?null:Fn[L-1]},[d]),le=k.useMemo(()=>e.filter(L=>{const $=L.name.toLowerCase().includes(D.toLowerCase()),ne=Te==="all"?!0:L.shifts.includes(Te);return $&&ne}),[e,D,Te]),Ie=k.useMemo(()=>e.filter(L=>L.unavailableDates.includes(d)),[e,d]),re=k.useMemo(()=>{if(!de)return[];const L=Ie.map(se=>se.id),$=i.filter(se=>se.day===de&&L.includes(se.teacherId)),me=o.filter(se=>se.date===d).map(se=>se.scheduleItemId),we=i.filter(se=>me.includes(se.id)),fe=[...$];return we.forEach(se=>{fe.find(Fe=>Fe.id===se.id)||fe.push(se)}),fe.sort((se,Fe)=>se.period-Fe.period)},[i,de,Ie,o,d]),Re=L=>{var ne;const $=e.find(me=>me.id===L);S(L),I(((ne=$==null?void 0:$.absenceReasons)==null?void 0:ne[d])||""),B(!0)},We=k.useCallback(async()=>{let L=[...e];const $=L.findIndex(me=>me.id===R);if($===-1)return;const ne={...L[$]};ne.unavailableDates.includes(d)||(ne.unavailableDates=[...ne.unavailableDates,d]),ne.absenceReasons||(ne.absenceReasons={}),ne.absenceReasons[d]=N,L[$]=ne,await s({teachers:L}),B(!1)},[e,R,d,N,s]),Se=k.useCallback(async L=>{let $=[...e];const ne=$.findIndex(we=>we.id===L);if(ne===-1)return;const me={...$[ne]};me.unavailableDates=me.unavailableDates.filter(we=>we!==d),me.absenceReasons&&delete me.absenceReasons[d],$[ne]=me,await s({teachers:$})},[e,d,s]),Pe=k.useCallback(async(L,$=!1)=>{if(!m){alert(":   .    . ,   ."),console.error("assignSubstitution: currentSubParams is null, returning.");return}const ne=[...o],me=i.find(se=>se.id===m.scheduleItemId);if(!me){alert(":     . ,   ."),console.error("assignSubstitution: Schedule item not found for ID:",m.scheduleItemId);return}const we=ne.findIndex(se=>se.scheduleItemId===m.scheduleItemId&&se.date===d),fe={id:we>=0?ne[we].id:Math.random().toString(36).substr(2,9),date:d,scheduleItemId:m.scheduleItemId,originalTeacherId:me.teacherId,replacementTeacherId:L,replacementRoomId:M||void 0,isMerger:$,lessonAbsenceReason:L!=="conducted"&&L!=="cancelled"&&W?W:void 0};we>=0?ne[we]=fe:ne.push(fe),await a({substitutions:ne}),w(!1),be(""),H(""),G(""),C(null)},[m,d,M,i,o,e,W,a]),Je=k.useCallback(async L=>{const $=o.filter(ne=>!(ne.scheduleItemId===L&&ne.date===d));await a({substitutions:$})},[o,d,a]),Qe=k.useCallback(()=>{let L=`*  ${new Date(d).toLocaleDateString("ru-RU")}*
`;const $=o.some(me=>me.date===d&&me.replacementTeacherId!=="conducted"),ne=(me,we)=>{const se=re.filter(Fe=>Fe.shift===we).filter(Fe=>{const Ce=o.find(xe=>xe.scheduleItemId===Fe.id&&xe.date===d);return Ce&&Ce.replacementTeacherId!=="conducted"});se.length>0&&(L+=`
 *${me.toUpperCase()}*
`,se.forEach(Fe=>{var P,Y,ye;const Ce=o.find(Ae=>Ae.scheduleItemId===Fe.id&&Ae.date===d),xe=n.find(Ae=>Ae.id===Fe.classId),Me=t.find(Ae=>Ae.id===Fe.subjectId),rt=Ce?e.find(Ae=>Ae.id===Ce.replacementTeacherId):null,Xe=e.find(Ae=>Ae.id===Fe.teacherId),Oe=((P=r.find(Ae=>Ae.id===Fe.roomId))==null?void 0:P.name)||Fe.roomId||"?",$r=(Y=Xe==null?void 0:Xe.absenceReasons)==null?void 0:Y[d],Sr=Ce==null?void 0:Ce.lessonAbsenceReason,Dt=(Sr===" "?Sr:null)||($r===" "?$r:null),xn=(Xe==null?void 0:Xe.name)+(Dt?` (${Dt})`:""),Nn=Ce!=null&&Ce.replacementRoomId?((ye=r.find(Ae=>Ae.id===Ce.replacementRoomId))==null?void 0:ye.name)||Ce.replacementRoomId:null;if(Ce)if(Ce.replacementTeacherId==="cancelled")L+=` ${xe==null?void 0:xe.name} (${Fe.period} ): ${Me==null?void 0:Me.name} (${xn}) ->  
`;else if(Ce.replacementTeacherId===Ce.originalTeacherId&&Nn)L+=` ${xe==null?void 0:xe.name} (${Fe.period} ): ${Me==null?void 0:Me.name} (${Xe==null?void 0:Xe.name}) ->  ${Oe}  ${Nn}
`;else{let Ae=` ${xe==null?void 0:xe.name} (${Fe.period} ): ${Me==null?void 0:Me.name} -> ${rt==null?void 0:rt.name} ${Ce.isMerger?"() ":""}( ${xn})`;Nn&&(Ae+=`  . ${Nn}`),L+=Ae+`
`}}))};$?(ne(ce.First,ce.First),ne(ce.Second,ce.Second)):L+=`
 .`,navigator.clipboard.writeText(L),alert("     !")},[d,o,re,n,t,e,r]),ke=k.useCallback(()=>{let L=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(fe=>fe.date===d).forEach(fe=>{var Rr;const se=i.find(Dt=>Dt.id===fe.scheduleItemId);if(!se)return;let Fe="Unknown";if(fe.replacementTeacherId==="cancelled")Fe=" ";else if(fe.replacementTeacherId==="conducted")Fe=" ";else{const Dt=e.find(xn=>xn.id===fe.replacementTeacherId);Dt&&(Fe=Dt.name)}const Ce=t.find(Dt=>Dt.id===se.subjectId),xe=n.find(Dt=>Dt.id===se.classId),Me=fe.date.replace(/-/g,""),rt=e.find(Dt=>Dt.id===fe.originalTeacherId),Xe=(Rr=rt==null?void 0:rt.absenceReasons)==null?void 0:Rr[d],Oe=fe.lessonAbsenceReason,kr=(Oe===" "?Oe:null)||(Xe===" "?Xe:null);L+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${Me}
SUMMARY:: ${xe==null?void 0:xe.name} - ${Ce==null?void 0:Ce.name}
DESCRIPTION:: ${Fe}${fe.isMerger?" ()":""}${kr?` (: ${kr})`:""}
END:VEVENT
`}),L+="END:VCALENDAR";const ne=new Blob([L],{type:"text/calendar"}),me=URL.createObjectURL(ne),we=document.createElement("a");we.href=me,we.download="substitutions.ics",document.body.appendChild(we),we.click(),document.body.removeChild(we)},[d,o,i,e,t,n]),Le=k.useCallback(async()=>{if(!(A!=null&&A.telegramToken)){alert(" Telegram      ''.");return}let L=`*  ${new Date(d).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,$=!1;const ne=new Set,me=[ce.First,ce.Second];for(const fe of me){const Fe=re.filter(Ce=>Ce.shift===fe).filter(Ce=>o.some(xe=>xe.scheduleItemId===Ce.id&&xe.date===d&&xe.replacementTeacherId!=="conducted"));Fe.length>0&&($=!0,L+=` *${fe.toUpperCase()}*
`,Fe.forEach(Ce=>{var ye,Ae,oe;const xe=o.find(ge=>ge.scheduleItemId===Ce.id&&ge.date===d);if(!xe)return;const Me=n.find(ge=>ge.id===Ce.classId),rt=t.find(ge=>ge.id===Ce.subjectId),Xe=e.find(ge=>ge.id===xe.originalTeacherId),Oe=e.find(ge=>ge.id===xe.replacementTeacherId),$r=(ye=Xe==null?void 0:Xe.absenceReasons)==null?void 0:ye[d],Sr=xe.lessonAbsenceReason,Dt=(Sr===" "?Sr:null)||($r===" "?$r:null),xn=(Xe==null?void 0:Xe.name)+(Dt?` (${Dt})`:""),Nn=((Ae=r.find(ge=>ge.id===Ce.roomId))==null?void 0:Ae.name)||Ce.roomId||"",P=xe.replacementRoomId?((oe=r.find(ge=>ge.id===xe.replacementRoomId))==null?void 0:oe.name)||xe.replacementRoomId:Nn;let Y=`${Ce.period}  (${Me==null?void 0:Me.name} ${rt==null?void 0:rt.name}${Ce.direction?` ${Ce.direction}`:""}): `;xe.replacementTeacherId==="cancelled"?Y+=`* * ( ${xn})`:xe.replacementTeacherId===xe.originalTeacherId?Y+=`: ${xn}.  : ${Nn}  ${P}`:(Y+=`*${Oe==null?void 0:Oe.name}* ${xe.isMerger?"() ":""}( *${xn}*)`,Nn!==P?Y+=`. : ${Nn}  ${P}`:P!==""&&(Y+=`. : ${P}`)),L+=`${Y}
`,Xe!=null&&Xe.telegramChatId&&ne.add(Xe.telegramChatId),Oe!=null&&Oe.telegramChatId&&ne.add(Oe.telegramChatId)}),L+=`
`)}if($||(L+=` .
`),Ie.forEach(fe=>{var xe;const se=o.some(Me=>Me.date===d&&Me.originalTeacherId===fe.id&&Me.replacementTeacherId!=="cancelled"&&Me.replacementTeacherId!=="conducted"),Fe=(xe=fe.absenceReasons)==null?void 0:xe[d],Ce=Fe===" "?Fe:"";fe.telegramChatId&&!se&&fe.unavailableDates.includes(d)&&(ne.add(fe.telegramChatId),$?L+=`_:  ${fe.name} ${Ce},        /._
`:L+=`_:  ${fe.name} ${Ce},      ._
`)}),ne.size===0){alert("    Telegram Chat ID   .");return}const we=`https://api.telegram.org/bot${A.telegramToken}/sendMessage`;try{const fe=Array.from(ne).map(se=>fetch(we,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:se,text:L,parse_mode:"Markdown"})}));await Promise.all(fe),alert(`   ${ne.size} !`)}catch(fe){console.error("    Telegram:",fe),alert("     Telegram.     .")}},[d,re,o,n,t,e,r,Ie,A==null?void 0:A.telegramToken]),Pt=k.useMemo(()=>m?new Set(o.filter(L=>L.date===d&&L.replacementTeacherId!=="conducted"&&L.replacementTeacherId!=="cancelled").map(L=>{const $=i.find(ne=>ne.id===L.scheduleItemId);return $&&$.period===m.period&&$.shift===m.shift?L.replacementTeacherId:null}).filter(L=>!!L)):new Set,[o,i,d,m]),Wn=k.useMemo(()=>{if(!m||!de)return[];const L=d.substring(0,7);return e.filter($=>$.name.toLowerCase().includes(ee.toLowerCase())).map($=>{const ne=$.unavailableDates.includes(d),me=i.some(xe=>xe.teacherId===$.id&&xe.day===de&&xe.period===m.period&&xe.shift===m.shift),we=Pt.has($.id),fe=me||we,se=$.subjectIds.includes(m.subjectId),Fe=o.filter(xe=>xe.replacementTeacherId===$.id&&xe.date.startsWith(L)).length;let Ce=0;return ne&&(Ce-=1e3),fe&&(Ce-=100),se&&(Ce+=50),{teacher:$,isAbsent:ne,isBusy:fe,isSpecialist:se,score:Ce,subsCount:Fe}}).sort(($,ne)=>ne.score-$.score)},[e,m,d,ee,de,i,o,Pt]),nt=k.useMemo(()=>{var fe;if(!m)return null;const L=i.find(se=>se.id===m.scheduleItemId);if(!L)return null;const $=n.find(se=>se.id===L.classId),ne=t.find(se=>se.id===L.subjectId),me=e.find(se=>se.id===L.teacherId),we=((fe=me==null?void 0:me.unavailableDates)==null?void 0:fe.includes(d))||!1;return{className:$==null?void 0:$.name,subjectName:ne==null?void 0:ne.name,teacherName:me==null?void 0:me.name,teacherId:me==null?void 0:me.id,period:L.period,roomId:L.roomId,isTeacherAbsent:we}},[m,i,n,t,e,d]),un=k.useMemo(()=>{if(!de||z.length<2)return[];const L=z.toLowerCase(),$=e.filter(we=>we.name.toLowerCase().includes(L)),ne=n.filter(we=>we.name.toLowerCase().includes(L)),me=[];return $.forEach(we=>{i.filter(se=>se.teacherId===we.id&&se.day===de).forEach(se=>{const Fe=n.find(xe=>xe.id===se.classId),Ce=t.find(xe=>xe.id===se.subjectId);me.push({...se,entityName:we.name,subInfo:Fe==null?void 0:Fe.name,subjectName:Ce==null?void 0:Ce.name})})}),ne.forEach(we=>{i.filter(se=>se.classId===we.id&&se.day===de).forEach(se=>{if(me.find(xe=>xe.id===se.id))return;const Fe=e.find(xe=>xe.id===se.teacherId),Ce=t.find(xe=>xe.id===se.subjectId);me.push({...se,entityName:we.name,subInfo:Fe==null?void 0:Fe.name,subjectName:Ce==null?void 0:Ce.name})})}),me.sort((we,fe)=>we.period-fe.period)},[z,de,e,n,i,t]),Rn=k.useCallback(async(L,$,ne,me,we,fe)=>{const Fe=new Date(fe).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),Ce=$.shift===ce.First?"1 ":"2 ",xe=` *  *
${L.name}

 : ${Fe}
 : ${Ce}
 : ${ne==null?void 0:ne.name}
1 : ${$.period}
 : ${me==null?void 0:me.name}
 : ${we||" "}`;if(A!=null&&A.telegramToken&&L.telegramChatId)try{const rt=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:L.telegramChatId,text:xe,parse_mode:"Markdown"})})).json();rt.ok?alert(`   Telegram  ${L.name}!`):rt.description.includes("chat not found")?alert(` Telegram:   .

  ${L.name}       "" (/start).`):alert(` Telegram: ${rt.description}`)}catch(Me){alert("   Telegram (/)."),console.error(Me)}else navigator.share?navigator.share({title:"",text:xe}).catch(()=>{}):(navigator.clipboard.writeText(xe),alert(" ! (Telegram     Chat ID)"))},[A==null?void 0:A.telegramToken]),nn=(L,$)=>{let ne=!1;if($){if(!window.confirm("     .     ?"))return;ne=!0}Pe(L,ne)};return l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:d,onChange:L=>h(L.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>b(!x),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${x?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx(q,{name:"History",size:16})," ",x?" ":" "]})]}),x?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:Q,onChange:L=>U(L.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(L=>{var $;return L.date.includes(Q)||(($=e.find(ne=>ne.id===L.replacementTeacherId))==null?void 0:$.name.toLowerCase().includes(Q.toLowerCase()))}).map(L=>{const $=e.find(me=>me.id===L.replacementTeacherId),ne=r.find(me=>me.id===L.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:L.date}),l.jsxs("div",{children:[($==null?void 0:$.name)||(L.replacementTeacherId==="cancelled"?"":""),L.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),ne&&l.jsxs("div",{className:"text-indigo-500",children:[". ",ne.name]})]},L.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>et("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Te==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>et(ce.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Te===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>et(ce.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Te===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:D,onChange:L=>T(L.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[le.map(L=>{const $=L.unavailableDates.includes(d),ne=L.absenceReasons?L.absenceReasons[d]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${$?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${$?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:L.name}),l.jsx("button",{onClick:()=>$?Se(L.id):Re(L.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${$?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:$?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:L.shifts.map(me=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:me===ce.First?"1":"2"},me))}),$&&l.jsxs("div",{className:"flex items-center gap-1",children:[ne&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:ne}),l.jsx("button",{onClick:()=>Re(L.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(q,{name:"Edit2",size:14})})]})]})]},L.id)}),le.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",re.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(q,{name:"Calendar",size:16})," iCal"]}),re.length>0&&l.jsxs("button",{onClick:Qe,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(q,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Le,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{F(""),v(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(q,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:re.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(q,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):re.map(L=>{var Xe;const $=o.find(Oe=>Oe.scheduleItemId===L.id&&Oe.date===d),ne=$&&$.replacementTeacherId!=="cancelled"&&$.replacementTeacherId!=="conducted"?e.find(Oe=>Oe.id===$.replacementTeacherId):null,me=e.find(Oe=>Oe.id===L.teacherId),we=t.find(Oe=>Oe.id===L.subjectId),fe=n.find(Oe=>Oe.id===L.classId),se=r.find(Oe=>Oe.id===L.roomId),Fe=se?se.name:L.roomId,Ce=$==null?void 0:$.replacementRoomId,xe=Ce?((Xe=r.find(Oe=>Oe.id===Ce))==null?void 0:Xe.name)||Ce:null;let Me=null;if(($==null?void 0:$.replacementTeacherId)==="conducted")Me=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Je(L.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(q,{name:"X",size:16})})]});else if(($==null?void 0:$.replacementTeacherId)==="cancelled")Me=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Je(L.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(q,{name:"X",size:16})})]});else if(ne||Ce){const Oe=($==null?void 0:$.replacementTeacherId)===($==null?void 0:$.originalTeacherId)&&Ce;Me=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Oe?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:Oe?"  ":ne==null?void 0:ne.name}),$.isMerger&&l.jsx("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:""}),$.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",$.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>Rn(ne||me,L,fe,we,xe||Fe,d),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(q,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>Je(L.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(q,{name:"UserX",size:18})})]})]})}else Me=l.jsxs("button",{onClick:()=>{C({scheduleItemId:L.id,subjectId:L.subjectId,period:L.period,shift:L.shift,classId:L.classId,teacherId:L.teacherId,roomId:L.roomId,day:L.day}),w(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(q,{name:"ArrowRight",size:16})]});const rt=!Ie.find(Oe=>Oe.id===L.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:L.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:fe==null?void 0:fe.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:L.shift===ce.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:we==null?void 0:we.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:rt?"font-semibold":"line-through decoration-red-400 decoration-2",children:me==null?void 0:me.name}),Fe&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Fe," ",xe&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",xe]})]}),($==null?void 0:$.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",$.lessonAbsenceReason,")"]})]})]})]}),Me]},L.id)})})]}),l.jsxs(RA,{isOpen:f,onClose:()=>w(!1),title:" ",children:[nt&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[nt.className,"  ",nt.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:nt.subjectName}),l.jsx("span",{className:nt.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:nt.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:M,onChange:L=>H(L.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),r.map(L=>l.jsxs("option",{value:L.id,children:[L.name," (",L.capacity," )"]},L.id))]})]}),nt&&!nt.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:W,onChange:L=>G(L.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Pe("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Pe("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(nt==null?void 0:nt.teacherId)&&!nt.isTeacherAbsent&&l.jsx("button",{onClick:()=>Pe(nt.teacherId),className:"w-full p-3 mb-4 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:ee,onChange:L=>be(L.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[Wn.map(({teacher:L,isAbsent:$,isBusy:ne,isSpecialist:me,subsCount:we})=>l.jsxs("button",{disabled:$,onClick:()=>nn(L.id,ne),title:$?" ":ne?" ":"",className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${$?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":ne?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md cursor-pointer":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${me?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:me?l.jsx(q,{name:"Star",size:14,fill:"currentColor"}):L.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[me&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),ne&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),$&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${we>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",we]})]})]})]}),!$&&!ne&&l.jsx("div",{className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),ne&&!$&&l.jsx("div",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]},L.id)),Wn.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(RA,{isOpen:y,onClose:()=>v(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:z,onChange:L=>F(L.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[un.map(L=>{var $;return l.jsxs("button",{onClick:()=>{v(!1),C({scheduleItemId:L.id,subjectId:L.subjectId,period:L.period,shift:L.shift,classId:L.classId,teacherId:L.teacherId,roomId:L.roomId,day:L.day}),w(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[L.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",L.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[L.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:L.subjectName}),L.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",(($=r.find(ne=>ne.id===L.roomId))==null?void 0:$.name)||L.roomId]})]})]},L.id)}),z.length>1&&un.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",d,")"]})]})]}),l.jsx(RA,{isOpen:_,onClose:()=>B(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:N,onChange:L=>I(L.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:We,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},$K=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:A}=ZA(),{schedule:s}=el(),[i,o]=k.useState("teachers"),[a,c]=k.useState(new Date().toISOString().split("T")[0]),[d,h]=k.useState(ce.First),[f,w]=k.useState(1),[m,C]=k.useState(ce.First),[_,B]=k.useState(1),[y,v]=k.useState(""),[R,S]=k.useState("");k.useEffect(()=>{r&&(v(r.telegramToken||""),S(r.feedbackChatId||""))},[r]),k.useEffect(()=>{w(d===ce.First?1:0)},[d]),k.useEffect(()=>{B(m===ce.First?1:0)},[m]);const N=k.useMemo(()=>{const U=new Date(a).getDay();return U===0||U===6?null:Fn[U-1]},[a]),I=AA[d],x=k.useMemo(()=>N?e.filter(U=>U.shifts&&!U.shifts.includes(d)||U.unavailableDates.includes(a)?!1:!s.some(T=>T.teacherId===U.id&&T.day===N&&T.period>f&&T.shift===d)).sort((U,D)=>U.name.localeCompare(D.name)):[],[e,a,N,f,d,s]),b=k.useMemo(()=>{if(!N)return[];const U=new Set;return s.forEach(T=>{T.day===N&&T.period===_&&T.shift===m&&T.roomId&&U.add(T.roomId)}),n.filter(T=>!U.has(T.id)).map(T=>T.name)},[s,n,N,_,m]),Q=async()=>{await A({settings:{...r,telegramToken:y,feedbackChatId:R}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(q,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),i!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:a,onChange:U=>c(U.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),i==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>h(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>h(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:I.map(U=>l.jsx("button",{onClick:()=>w(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${f===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>C(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${m===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>C(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${m===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:AA[m].map(U=>l.jsx("button",{onClick:()=>B(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${_===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:y,onChange:U=>v(U.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:R,onChange:U=>S(U.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Save",size:20}),"  "]})]})]}),i==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[x.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(q,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:U.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:U.subjectIds.slice(0,2).map(D=>{const T=t.find(Te=>Te.id===D);return T?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:T.name},D):null})})]})]},U.id)),x.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",f,"   ",d]})]}),i==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[b.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(q,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:U}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},U)),b.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(q,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K0=function(t,e){return K0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(n[A]=r[A])},K0(t,e)};function Wr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");K0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var G0=function(){return G0=Object.assign||function(e){for(var n,r=1,A=arguments.length;r<A;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},G0.apply(this,arguments)};function Pn(t,e,n,r){function A(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):A(d.value).then(o,a)}c((r=r.apply(t,[])).next())})}function Tn(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,A,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,A&&(s=c[0]&2?A.return:c[0]?A.throw||((s=A.return)&&s.call(A),0):A.next)&&!(s=s.call(A,c[1])).done)return s;switch(A=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,A=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],A=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Bd(t,e,n){if(arguments.length===2)for(var r=0,A=e.length,s;r<A;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var KA=function(){function t(e,n,r,A){this.left=e,this.top=n,this.width=r,this.height=A}return t.prototype.add=function(e,n,r,A){return new t(this.left+e,this.top+n,this.width+r,this.height+A)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(A){return A.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Eg=function(t,e){return KA.fromClientRect(t,e.getBoundingClientRect())},qK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),A=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new KA(0,0,r,A)},bg=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},Ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},W_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xd=0;xd<W_.length;xd++)JK[W_.charCodeAt(xd)]=xd;var $_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ml=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cd=0;Cd<$_.length;Cd++)Ml[$_.charCodeAt(Cd)]=Cd;var XK=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)s=Ml[t.charCodeAt(r)],i=Ml[t.charCodeAt(r+1)],o=Ml[t.charCodeAt(r+2)],a=Ml[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return c},YK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},ZK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Oi=5,Hy=11,jp=2,e3=Hy-Oi,wQ=65536>>Oi,t3=1<<Oi,Kp=t3-1,n3=1024>>Oi,r3=wQ+n3,A3=r3,s3=32,i3=A3+s3,o3=65536>>Hy,a3=1<<e3,l3=a3-1,q_=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},c3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},u3=function(t,e){var n=XK(t),r=Array.isArray(n)?ZK(n):new Uint32Array(n),A=Array.isArray(n)?YK(n):new Uint16Array(n),s=24,i=q_(A,s/2,r[4]/2),o=r[5]===2?q_(A,(s+r[4])/2):c3(r,Math.ceil((s+r[4])/4));return new d3(r[0],r[1],r[2],r[3],i,o)},d3=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Oi],n=(n<<jp)+(e&Kp),this.data[n];if(e<=65535)return n=this.index[wQ+(e-55296>>Oi)],n=(n<<jp)+(e&Kp),this.data[n];if(e<this.highStart)return n=i3-o3+(e>>Hy),n=this.index[n],n+=e>>Oi&l3,n=this.index[n],n=(n<<jp)+(e&Kp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),J_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _d=0;_d<J_.length;_d++)h3[J_.charCodeAt(_d)]=_d;var f3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",X_=50,g3=1,vQ=2,yQ=3,p3=4,m3=5,Y_=7,BQ=8,Z_=9,_s=10,z0=11,eI=12,W0=13,w3=14,Vl=15,$0=16,Id=17,El=18,v3=19,tI=20,q0=21,bl=22,Gp=23,Io=24,or=25,Hl=26,jl=27,Eo=28,y3=29,Ii=30,B3=31,Ed=32,bd=33,J0=34,X0=35,Y0=36,su=37,Z0=38,fh=39,gh=40,zp=41,xQ=42,x3=43,C3=[9001,65288],CQ="!",je="",Td="",ew=u3(f3),xA=[Ii,Y0],tw=[g3,vQ,yQ,m3],_Q=[_s,BQ],nI=[jl,Hl],_3=tw.concat(_Q),rI=[Z0,fh,gh,J0,X0],I3=[Vl,W0],E3=function(t,e){e===void 0&&(e="strict");var n=[],r=[],A=[];return t.forEach(function(s,i){var o=ew.get(s);if(o>X_?(A.push(!0),o-=X_):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),n.push($0);if(o===p3||o===z0){if(i===0)return r.push(i),n.push(Ii);var a=n[i-1];return _3.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(Ii))}if(r.push(i),o===B3)return n.push(e==="strict"?q0:su);if(o===xQ||o===y3)return n.push(Ii);if(o===x3)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(su):n.push(Ii);n.push(o)}),[r,n,A]},Wp=function(t,e,n,r){var A=r[n];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var s=n;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==_s)break}if(A===_s)for(var s=n;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==_s)break}if(o!==_s)break}return!1},AI=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===_s)n--;else return r}return 0},b3=function(t,e,n,r,A){if(n[r]===0)return je;var s=r-1;if(Array.isArray(A)&&A[s]===!0)return je;var i=s-1,o=s+1,a=e[s],c=i>=0?e[i]:0,d=e[o];if(a===vQ&&d===yQ)return je;if(tw.indexOf(a)!==-1)return CQ;if(tw.indexOf(d)!==-1||_Q.indexOf(d)!==-1)return je;if(AI(s,e)===BQ)return Td;if(ew.get(t[s])===z0||(a===Ed||a===bd)&&ew.get(t[o])===z0||a===Y_||d===Y_||a===Z_||[_s,W0,Vl].indexOf(a)===-1&&d===Z_||[Id,El,v3,Io,Eo].indexOf(d)!==-1||AI(s,e)===bl||Wp(Gp,bl,s,e)||Wp([Id,El],q0,s,e)||Wp(eI,eI,s,e))return je;if(a===_s)return Td;if(a===Gp||d===Gp)return je;if(d===$0||a===$0)return Td;if([W0,Vl,q0].indexOf(d)!==-1||a===w3||c===Y0&&I3.indexOf(a)!==-1||a===Eo&&d===Y0||d===tI||xA.indexOf(d)!==-1&&a===or||xA.indexOf(a)!==-1&&d===or||a===jl&&[su,Ed,bd].indexOf(d)!==-1||[su,Ed,bd].indexOf(a)!==-1&&d===Hl||xA.indexOf(a)!==-1&&nI.indexOf(d)!==-1||nI.indexOf(a)!==-1&&xA.indexOf(d)!==-1||[jl,Hl].indexOf(a)!==-1&&(d===or||[bl,Vl].indexOf(d)!==-1&&e[o+1]===or)||[bl,Vl].indexOf(a)!==-1&&d===or||a===or&&[or,Eo,Io].indexOf(d)!==-1)return je;if([or,Eo,Io,Id,El].indexOf(d)!==-1)for(var h=s;h>=0;){var f=e[h];if(f===or)return je;if([Eo,Io].indexOf(f)!==-1)h--;else break}if([jl,Hl].indexOf(d)!==-1)for(var h=[Id,El].indexOf(a)!==-1?i:s;h>=0;){var f=e[h];if(f===or)return je;if([Eo,Io].indexOf(f)!==-1)h--;else break}if(Z0===a&&[Z0,fh,J0,X0].indexOf(d)!==-1||[fh,J0].indexOf(a)!==-1&&[fh,gh].indexOf(d)!==-1||[gh,X0].indexOf(a)!==-1&&d===gh||rI.indexOf(a)!==-1&&[tI,Hl].indexOf(d)!==-1||rI.indexOf(d)!==-1&&a===jl||xA.indexOf(a)!==-1&&xA.indexOf(d)!==-1||a===Io&&xA.indexOf(d)!==-1||xA.concat(or).indexOf(a)!==-1&&d===bl&&C3.indexOf(t[o])===-1||xA.concat(or).indexOf(d)!==-1&&a===El)return je;if(a===zp&&d===zp){for(var w=n[s],m=1;w>0&&(w--,e[w]===zp);)m++;if(m%2!==0)return je}return a===Ed&&d===bd?je:Td},T3=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=E3(t,e.lineBreak),r=n[0],A=n[1],s=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(o){return[or,Ii,xQ].indexOf(o)!==-1?su:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,A,i]},F3=function(){function t(e,n,r,A){this.codePoints=e,this.required=n===CQ,this.start=r,this.end=A}return t.prototype.slice=function(){return Ot.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),U3=function(t,e){var n=bg(t),r=T3(n,e),A=r[0],s=r[1],i=r[2],o=n.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=je;c<o&&(d=b3(n,s,A,++c,i))===je;);if(d!==je||c===o){var h=new F3(n,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},Q3=1,S3=2,Ru=4,sI=8,hf=10,iI=47,dc=92,k3=9,R3=32,Fd=34,Tl=61,N3=35,P3=36,D3=37,Ud=39,Qd=40,Fl=41,L3=95,Jn=45,O3=33,M3=60,V3=62,H3=64,j3=91,K3=93,G3=61,z3=123,Sd=63,W3=125,oI=124,$3=126,q3=128,aI=65533,$p=42,ki=43,J3=44,X3=58,Y3=59,iu=46,Z3=0,e5=8,t5=11,n5=14,r5=31,A5=127,Jr=-1,IQ=48,EQ=97,bQ=101,s5=102,i5=117,o5=122,TQ=65,FQ=69,UQ=70,a5=85,l5=90,Un=function(t){return t>=IQ&&t<=57},c5=function(t){return t>=55296&&t<=57343},bo=function(t){return Un(t)||t>=TQ&&t<=UQ||t>=EQ&&t<=s5},u5=function(t){return t>=EQ&&t<=o5},d5=function(t){return t>=TQ&&t<=l5},h5=function(t){return u5(t)||d5(t)},f5=function(t){return t>=q3},kd=function(t){return t===hf||t===k3||t===R3},ff=function(t){return h5(t)||f5(t)||t===L3},lI=function(t){return ff(t)||Un(t)||t===Jn},g5=function(t){return t>=Z3&&t<=e5||t===t5||t>=n5&&t<=r5||t===A5},hs=function(t,e){return t!==dc?!1:e!==hf},Rd=function(t,e,n){return t===Jn?ff(e)||hs(e,n):ff(t)?!0:!!(t===dc&&hs(t,e))},qp=function(t,e,n){return t===ki||t===Jn?Un(e)?!0:e===iu&&Un(n):Un(t===iu?e:t)},p5=function(t){var e=0,n=1;(t[e]===ki||t[e]===Jn)&&(t[e]===Jn&&(n=-1),e++);for(var r=[];Un(t[e]);)r.push(t[e++]);var A=r.length?parseInt(Ot.apply(void 0,r),10):0;t[e]===iu&&e++;for(var s=[];Un(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(Ot.apply(void 0,s),10):0;(t[e]===FQ||t[e]===bQ)&&e++;var a=1;(t[e]===ki||t[e]===Jn)&&(t[e]===Jn&&(a=-1),e++);for(var c=[];Un(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Ot.apply(void 0,c),10):0;return n*(A+o*Math.pow(10,-i))*Math.pow(10,a*d)},m5={type:2},w5={type:3},v5={type:4},y5={type:13},B5={type:8},x5={type:21},C5={type:9},_5={type:10},I5={type:11},E5={type:12},b5={type:14},Nd={type:23},T5={type:1},F5={type:25},U5={type:24},Q5={type:26},S5={type:27},k5={type:28},R5={type:29},N5={type:31},nw={type:32},QQ=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(bg(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==nw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Fd:return this.consumeStringToken(Fd);case N3:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),A=this.peekCodePoint(2);if(lI(n)||hs(r,A)){var s=Rd(n,r,A)?S3:Q3,i=this.consumeName();return{type:5,value:i,flags:s}}break;case P3:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),y5;break;case Ud:return this.consumeStringToken(Ud);case Qd:return m5;case Fl:return w5;case $p:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),b5;break;case ki:if(qp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case J3:return v5;case Jn:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(qp(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Rd(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===Jn&&c===V3)return this.consumeCodePoint(),this.consumeCodePoint(),U5;break;case iu:if(qp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case iI:if(this.peekCodePoint(0)===$p)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===$p&&(d=this.consumeCodePoint(),d===iI))return this.consumeToken();if(d===Jr)return this.consumeToken()}break;case X3:return Q5;case Y3:return S5;case M3:if(this.peekCodePoint(0)===O3&&this.peekCodePoint(1)===Jn&&this.peekCodePoint(2)===Jn)return this.consumeCodePoint(),this.consumeCodePoint(),F5;break;case H3:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),w=this.peekCodePoint(2);if(Rd(h,f,w)){var i=this.consumeName();return{type:7,value:i}}break;case j3:return k5;case dc:if(hs(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case K3:return R5;case G3:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),B5;break;case z3:return I5;case W3:return E5;case i5:case a5:var m=this.peekCodePoint(0),C=this.peekCodePoint(1);return m===ki&&(bo(C)||C===Sd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case oI:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),C5;if(this.peekCodePoint(0)===oI)return this.consumeCodePoint(),x5;break;case $3:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),_5;break;case Jr:return nw}return kd(e)?(this.consumeWhiteSpace(),N5):Un(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):ff(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ot(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();bo(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Sd&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var A=parseInt(Ot.apply(void 0,e.map(function(a){return a===Sd?IQ:a})),16),s=parseInt(Ot.apply(void 0,e.map(function(a){return a===Sd?UQ:a})),16);return{type:30,start:A,end:s}}var i=parseInt(Ot.apply(void 0,e),16);if(this.peekCodePoint(0)===Jn&&bo(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];bo(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var s=parseInt(Ot.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Qd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Qd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jr)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Ud||n===Fd){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jr||this.peekCodePoint(0)===Fl)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Nd)}for(;;){var A=this.consumeCodePoint();if(A===Jr||A===Fl)return{type:22,value:Ot.apply(void 0,e)};if(kd(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Jr||this.peekCodePoint(0)===Fl?(this.consumeCodePoint(),{type:22,value:Ot.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Nd);if(A===Fd||A===Ud||A===Qd||g5(A))return this.consumeBadUrlRemnants(),Nd;if(A===dc)if(hs(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Nd;else e.push(A)}},t.prototype.consumeWhiteSpace=function(){for(;kd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Fl||e===Jr)return;hs(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var A=Math.min(n,e);r+=Ot.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var A=this._value[r];if(A===Jr||A===void 0||A===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(A===hf)return this._value.splice(0,r),T5;if(A===dc){var s=this._value[r+1];s!==Jr&&s!==void 0&&(s===hf?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):hs(A,s)&&(n+=this.consumeStringSlice(r),n+=Ot(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Ru,r=this.peekCodePoint(0);for((r===ki||r===Jn)&&e.push(this.consumeCodePoint());Un(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(r===iu&&Un(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=sI;Un(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),A=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===FQ||r===bQ)&&((A===ki||A===Jn)&&Un(s)||Un(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=sI;Un(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[p5(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],A=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Rd(A,s,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return A===D3?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(bo(e)){for(var n=Ot(e);bo(this.peekCodePoint(0))&&n.length<6;)n+=Ot(this.consumeCodePoint());kd(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||c5(r)||r>1114111?aI:r}return e===Jr?aI:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(lI(n))e+=Ot(n);else if(hs(n,this.peekCodePoint(0)))e+=Ot(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),SQ=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new QQ;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||D5(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?nw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Nu=function(t){return t.type===15},tl=function(t){return t.type===17},ot=function(t){return t.type===20},P5=function(t){return t.type===0},rw=function(t,e){return ot(t)&&t.value===e},kQ=function(t){return t.type!==31},Pa=function(t){return t.type!==31&&t.type!==4},mA=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},D5=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Zs=function(t){return t.type===17||t.type===15},Wt=function(t){return t.type===16||Zs(t)},RQ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},mn={type:17,number:0,flags:Ru},jy={type:16,number:50,flags:Ru},Is={type:16,number:100,flags:Ru},Kl=function(t,e,n){var r=t[0],A=t[1];return[ct(r,e),ct(typeof A<"u"?A:r,n)]},ct=function(t,e){if(t.type===16)return t.number/100*e;if(Nu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},NQ="deg",PQ="grad",DQ="rad",LQ="turn",Tg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case NQ:return Math.PI*e.number/180;case PQ:return Math.PI/200*e.number;case DQ:return e.number;case LQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},OQ=function(t){return t.type===15&&(t.unit===NQ||t.unit===PQ||t.unit===DQ||t.unit===LQ)},MQ=function(t){var e=t.filter(ot).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[mn,mn];case"to top":case"bottom":return Ir(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[mn,Is];case"to right":case"left":return Ir(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Is,Is];case"to bottom":case"top":return Ir(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Is,mn];case"to left":case"right":return Ir(270)}return 0},Ir=function(t){return Math.PI*t/180},Ls={name:"color",parse:function(t,e){if(e.type===18){var n=L5[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3);return Es(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Es(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6);return Es(parseInt(r,16),parseInt(A,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Es(parseInt(r,16),parseInt(A,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=NA[e.value.toUpperCase()];if(typeof o<"u")return o}return NA.TRANSPARENT}},Os=function(t){return(255&t)===0},An=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,A=255&t>>24;return e<255?"rgba("+A+","+r+","+n+","+e/255+")":"rgb("+A+","+r+","+n+")"},Es=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},cI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},uI=function(t,e){var n=e.filter(Pa);if(n.length===3){var r=n.map(cI),A=r[0],s=r[1],i=r[2];return Es(A,s,i,1)}if(n.length===4){var o=n.map(cI),A=o[0],s=o[1],i=o[2],a=o[3];return Es(A,s,i,a)}return 0};function Jp(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var dI=function(t,e){var n=e.filter(Pa),r=n[0],A=n[1],s=n[2],i=n[3],o=(r.type===17?Ir(r.number):Tg.parse(t,r))/(Math.PI*2),a=Wt(A)?A.number/100:0,c=Wt(s)?s.number/100:0,d=typeof i<"u"&&Wt(i)?ct(i,1):1;if(a===0)return Es(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,w=Jp(f,h,o+1/3),m=Jp(f,h,o),C=Jp(f,h,o-1/3);return Es(w*255,m*255,C*255,d)},L5={hsl:dI,hsla:dI,rgb:uI,rgba:uI},hc=function(t,e){return Ls.parse(t,SQ.create(e).parseComponentValue())},NA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},O5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ot(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},M5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fg=function(t,e){var n=Ls.parse(t,e[0]),r=e[1];return r&&Wt(r)?{color:n,stop:r}:{color:n,stop:null}},hI=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=mn),r.stop===null&&(r.stop=Is);for(var A=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=ct(o,e);a>s?A.push(a):A.push(s),s=a}else A.push(null)}for(var c=null,i=0;i<A.length;i++){var d=A[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=A[c-1],w=(d-f)/(h+1),m=1;m<=h;m++)A[c+m-1]=w*m;c=null}}return t.map(function(C,_){var B=C.color;return{color:B,stop:Math.max(Math.min(1,A[_]/e),0)}})},V5=function(t,e,n){var r=e/2,A=n/2,s=ct(t[0],e)-r,i=A-ct(t[1],n);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},H5=function(t,e,n){var r=typeof t=="number"?t:V5(t,e,n),A=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,i=n/2,o=A/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[A,s-c,s+c,i-a,i+a]},Lr=function(t,e){return Math.sqrt(t*t+e*e)},fI=function(t,e,n,r,A){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],c=o[1],d=Lr(n-a,r-c);return(A?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},j5=function(t,e,n,r,A){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-A)));break;case 2:if(t.shape===0)s=i=Math.min(Lr(e,n),Lr(e,n-A),Lr(e-r,n),Lr(e-r,n-A));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-A))/Math.min(Math.abs(e),Math.abs(e-r)),a=fI(r,A,e,n,!0),c=a[0],d=a[1];s=Lr(c-e,(d-n)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-A)));break;case 3:if(t.shape===0)s=i=Math.max(Lr(e,n),Lr(e,n-A),Lr(e-r,n),Lr(e-r,n-A));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-A))/Math.max(Math.abs(e),Math.abs(e-r)),h=fI(r,A,e,n,!1),c=h[0],d=h[1];s=Lr(c-e,(d-n)/o),i=o*s}break}return Array.isArray(t.size)&&(s=ct(t.size[0],r),i=t.size.length===2?ct(t.size[1],A):s),[s,i]},K5=function(t,e){var n=Ir(180),r=[];return mA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&i.value==="to"){n=MQ(A);return}else if(OQ(i)){n=Tg.parse(t,i);return}}var o=Fg(t,A);r.push(o)}),{angle:n,stops:r,type:1}},Pd=function(t,e){var n=Ir(180),r=[];return mA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=MQ(A);return}else if(OQ(i)){n=(Tg.parse(t,i)+Ir(270))%Ir(360);return}}var o=Fg(t,A);r.push(o)}),{angle:n,stops:r,type:1}},G5=function(t,e){var n=Ir(180),r=[],A=1,s=0,i=3,o=[];return mA(e).forEach(function(a,c){var d=a[0];if(c===0){if(ot(d)&&d.value==="linear"){A=1;return}else if(ot(d)&&d.value==="radial"){A=2;return}}if(d.type===18){if(d.name==="from"){var h=Ls.parse(t,d.values[0]);r.push({stop:mn,color:h})}else if(d.name==="to"){var h=Ls.parse(t,d.values[0]);r.push({stop:Is,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Pa);if(f.length===2){var h=Ls.parse(t,f[1]),w=f[0];tl(w)&&r.push({stop:{type:16,number:w.number*100,flags:w.flags},color:h})}}}}),A===1?{angle:(n+Ir(180))%Ir(360),stops:r,type:A}:{size:i,shape:s,stops:r,position:o,type:A}},VQ="closest-side",HQ="farthest-side",jQ="closest-corner",KQ="farthest-corner",GQ="circle",zQ="ellipse",WQ="cover",$Q="contain",z5=function(t,e){var n=0,r=3,A=[],s=[];return mA(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,f){if(c)if(ot(f))switch(f.value){case"center":return s.push(jy),h;case"top":case"left":return s.push(mn),h;case"right":case"bottom":return s.push(Is),h}else(Wt(f)||Zs(f))&&s.push(f);else if(ot(f))switch(f.value){case GQ:return n=0,!1;case zQ:return n=1,!1;case"at":return c=!0,!1;case VQ:return r=0,!1;case WQ:case HQ:return r=1,!1;case $Q:case jQ:return r=2,!1;case KQ:return r=3,!1}else if(Zs(f)||Wt(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=Fg(t,i);A.push(d)}}),{size:r,shape:n,stops:A,position:s,type:2}},Dd=function(t,e){var n=0,r=3,A=[],s=[];return mA(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(ot(h))switch(h.value){case"center":return s.push(jy),!1;case"top":case"left":return s.push(mn),!1;case"right":case"bottom":return s.push(Is),!1}else if(Wt(h)||Zs(h))return s.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(ot(h))switch(h.value){case GQ:return n=0,!1;case zQ:return n=1,!1;case $Q:case VQ:return r=0,!1;case HQ:return r=1,!1;case jQ:return r=2,!1;case WQ:case KQ:return r=3,!1}else if(Zs(h)||Wt(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var c=Fg(t,i);A.push(c)}}),{size:r,shape:n,stops:A,position:s,type:2}},W5=function(t){return t.type===1},$5=function(t){return t.type===2},Ky={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=qQ[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function q5(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!qQ[t.name])}var qQ={"linear-gradient":K5,"-moz-linear-gradient":Pd,"-ms-linear-gradient":Pd,"-o-linear-gradient":Pd,"-webkit-linear-gradient":Pd,"radial-gradient":z5,"-moz-radial-gradient":Dd,"-ms-radial-gradient":Dd,"-o-radial-gradient":Dd,"-webkit-radial-gradient":Dd,"-webkit-gradient":G5},J5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Pa(r)&&q5(r)}).map(function(r){return Ky.parse(t,r)})}},X5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ot(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Y5={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return mA(e).map(function(n){return n.filter(Wt)}).map(RQ)}},Z5={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return mA(e).map(function(n){return n.filter(ot).map(function(r){return r.value}).join(" ")}).map(e6)}},e6=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ca;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ca||(ca={}));var t6={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return mA(e).map(function(n){return n.filter(n6)})}},n6=function(t){return ot(t)||Wt(t)},Ug=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},r6=Ug("top"),A6=Ug("right"),s6=Ug("bottom"),i6=Ug("left"),Qg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return RQ(n.filter(Wt))}}},o6=Qg("top-left"),a6=Qg("top-right"),l6=Qg("bottom-right"),c6=Qg("bottom-left"),Sg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},u6=Sg("top"),d6=Sg("right"),h6=Sg("bottom"),f6=Sg("left"),kg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Nu(n)?n.number:0}}},g6=kg("top"),p6=kg("right"),m6=kg("bottom"),w6=kg("left"),v6={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},y6={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},B6={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ot).reduce(function(n,r){return n|x6(r.value)},0)}},x6=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},C6={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},_6={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},gf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(gf||(gf={}));var I6={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return gf.STRICT;case"normal":default:return gf.NORMAL}}},E6={name:"line-height",initialValue:"normal",prefix:!1,type:4},gI=function(t,e){return ot(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Wt(t)?ct(t,e):e},b6={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Ky.parse(t,e)}},T6={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Aw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Rg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},F6=Rg("top"),U6=Rg("right"),Q6=Rg("bottom"),S6=Rg("left"),k6={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ot).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},R6={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ng=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},N6=Ng("top"),P6=Ng("right"),D6=Ng("bottom"),L6=Ng("left"),O6={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},M6={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},V6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rw(e[0],"none")?[]:mA(e).map(function(n){for(var r={color:NA.TRANSPARENT,offsetX:mn,offsetY:mn,blur:mn},A=0,s=0;s<n.length;s++){var i=n[s];Zs(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:r.blur=i,A++):r.color=Ls.parse(t,i)}return r})}},H6={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},j6={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=z6[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},K6=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},G6=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var A=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,A,s,i,o]:null},z6={matrix:K6,matrix3d:G6},pI={type:16,number:50,flags:Ru},W6=[pI,pI],$6={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Wt);return n.length!==2?W6:[n[0],n[1]]}},q6={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},fc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(fc||(fc={}));var J6={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return fc.BREAK_ALL;case"keep-all":return fc.KEEP_ALL;case"normal":default:return fc.NORMAL}}},X6={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(tl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},JQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Y6={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return tl(e)?e.number:1}},Z6={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},eG={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ot).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},tG={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(A){switch(A.type){case 20:case 0:n.push(A.value);break;case 17:n.push(A.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},nG={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},rG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(tl(e))return e.number;if(ot(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},AG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ot).map(function(n){return n.value})}},sG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Yt=function(t,e){return(t&e)!==0},iG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},oG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],A=e.filter(kQ),s=0;s<A.length;s++){var i=A[s],o=A[s+1];if(i.type===20){var a=o&&tl(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},aG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(kQ),A=0;A<r.length;A++){var s=r[A],i=r[A+1];if(ot(s)&&s.value!=="none"){var o=i&&tl(i)?i.number:0;n.push({counter:s.value,reset:o})}}return n}},lG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Nu).map(function(n){return JQ.parse(t,n)})}},cG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],A=e.filter(P5);if(A.length%2!==0)return null;for(var s=0;s<A.length;s+=2){var i=A[s].value,o=A[s+1].value;r.push({open:i,close:o})}return r}},mI=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},uG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rw(e[0],"none")?[]:mA(e).map(function(n){for(var r={color:255,offsetX:mn,offsetY:mn,blur:mn,spread:mn,inset:!1},A=0,s=0;s<n.length;s++){var i=n[s];rw(i,"inset")?r.inset=!0:Zs(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:A===2?r.blur=i:r.spread=i,A++):r.color=Ls.parse(t,i)}return r})}},dG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(ot).forEach(function(A){switch(A.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(A){r.indexOf(A)===-1&&r.push(A)}),r}},hG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Nu(e)?e.number:0}},gG=function(){function t(e,n){var r,A;this.animationDuration=pe(e,lG,n.animationDuration),this.backgroundClip=pe(e,O5,n.backgroundClip),this.backgroundColor=pe(e,M5,n.backgroundColor),this.backgroundImage=pe(e,J5,n.backgroundImage),this.backgroundOrigin=pe(e,X5,n.backgroundOrigin),this.backgroundPosition=pe(e,Y5,n.backgroundPosition),this.backgroundRepeat=pe(e,Z5,n.backgroundRepeat),this.backgroundSize=pe(e,t6,n.backgroundSize),this.borderTopColor=pe(e,r6,n.borderTopColor),this.borderRightColor=pe(e,A6,n.borderRightColor),this.borderBottomColor=pe(e,s6,n.borderBottomColor),this.borderLeftColor=pe(e,i6,n.borderLeftColor),this.borderTopLeftRadius=pe(e,o6,n.borderTopLeftRadius),this.borderTopRightRadius=pe(e,a6,n.borderTopRightRadius),this.borderBottomRightRadius=pe(e,l6,n.borderBottomRightRadius),this.borderBottomLeftRadius=pe(e,c6,n.borderBottomLeftRadius),this.borderTopStyle=pe(e,u6,n.borderTopStyle),this.borderRightStyle=pe(e,d6,n.borderRightStyle),this.borderBottomStyle=pe(e,h6,n.borderBottomStyle),this.borderLeftStyle=pe(e,f6,n.borderLeftStyle),this.borderTopWidth=pe(e,g6,n.borderTopWidth),this.borderRightWidth=pe(e,p6,n.borderRightWidth),this.borderBottomWidth=pe(e,m6,n.borderBottomWidth),this.borderLeftWidth=pe(e,w6,n.borderLeftWidth),this.boxShadow=pe(e,uG,n.boxShadow),this.color=pe(e,v6,n.color),this.direction=pe(e,y6,n.direction),this.display=pe(e,B6,n.display),this.float=pe(e,C6,n.cssFloat),this.fontFamily=pe(e,tG,n.fontFamily),this.fontSize=pe(e,nG,n.fontSize),this.fontStyle=pe(e,sG,n.fontStyle),this.fontVariant=pe(e,AG,n.fontVariant),this.fontWeight=pe(e,rG,n.fontWeight),this.letterSpacing=pe(e,_6,n.letterSpacing),this.lineBreak=pe(e,I6,n.lineBreak),this.lineHeight=pe(e,E6,n.lineHeight),this.listStyleImage=pe(e,b6,n.listStyleImage),this.listStylePosition=pe(e,T6,n.listStylePosition),this.listStyleType=pe(e,Aw,n.listStyleType),this.marginTop=pe(e,F6,n.marginTop),this.marginRight=pe(e,U6,n.marginRight),this.marginBottom=pe(e,Q6,n.marginBottom),this.marginLeft=pe(e,S6,n.marginLeft),this.opacity=pe(e,Y6,n.opacity);var s=pe(e,k6,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=pe(e,R6,n.overflowWrap),this.paddingTop=pe(e,N6,n.paddingTop),this.paddingRight=pe(e,P6,n.paddingRight),this.paddingBottom=pe(e,D6,n.paddingBottom),this.paddingLeft=pe(e,L6,n.paddingLeft),this.paintOrder=pe(e,dG,n.paintOrder),this.position=pe(e,M6,n.position),this.textAlign=pe(e,O6,n.textAlign),this.textDecorationColor=pe(e,Z6,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=pe(e,eG,(A=n.textDecorationLine)!==null&&A!==void 0?A:n.textDecoration),this.textShadow=pe(e,V6,n.textShadow),this.textTransform=pe(e,H6,n.textTransform),this.transform=pe(e,j6,n.transform),this.transformOrigin=pe(e,$6,n.transformOrigin),this.visibility=pe(e,q6,n.visibility),this.webkitTextStrokeColor=pe(e,hG,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=pe(e,fG,n.webkitTextStrokeWidth),this.wordBreak=pe(e,J6,n.wordBreak),this.zIndex=pe(e,X6,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Os(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Yt(this.display,4)||Yt(this.display,33554432)||Yt(this.display,268435456)||Yt(this.display,536870912)||Yt(this.display,67108864)||Yt(this.display,134217728)},t}(),pG=function(){function t(e,n){this.content=pe(e,iG,n.content),this.quotes=pe(e,cG,n.quotes)}return t}(),wI=function(){function t(e,n){this.counterIncrement=pe(e,oG,n.counterIncrement),this.counterReset=pe(e,aG,n.counterReset)}return t}(),pe=function(t,e,n){var r=new QQ,A=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(A);var s=new SQ(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,ot(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Tg.parse(t,s.parseComponentValue());case"color":return Ls.parse(t,s.parseComponentValue());case"image":return Ky.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Zs(o)?o:mn;case"length-percentage":var a=s.parseComponentValue();return Wt(a)?a:mn;case"time":return JQ.parse(t,s.parseComponentValue())}break}},mG="data-html2canvas-debug",wG=function(t){var e=t.getAttribute(mG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},sw=function(t,e){var n=wG(t);return n===1||e===n},wA=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,sw(n,3))debugger;this.styles=new gG(e,window.getComputedStyle(n,null)),aw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Eg(this.context,n),sw(n,4)&&(this.flags|=16)}return t}(),vG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ld=0;Ld<vI.length;Ld++)Gl[vI.charCodeAt(Ld)]=Ld;var yG=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)s=Gl[t.charCodeAt(r)],i=Gl[t.charCodeAt(r+1)],o=Gl[t.charCodeAt(r+2)],a=Gl[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return c},BG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},xG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Mi=5,Gy=11,Xp=2,CG=Gy-Mi,XQ=65536>>Mi,_G=1<<Mi,Yp=_G-1,IG=1024>>Mi,EG=XQ+IG,bG=EG,TG=32,FG=bG+TG,UG=65536>>Gy,QG=1<<CG,SG=QG-1,yI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},kG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},RG=function(t,e){var n=yG(t),r=Array.isArray(n)?xG(n):new Uint32Array(n),A=Array.isArray(n)?BG(n):new Uint16Array(n),s=24,i=yI(A,s/2,r[4]/2),o=r[5]===2?yI(A,(s+r[4])/2):kG(r,Math.ceil((s+r[4])/4));return new NG(r[0],r[1],r[2],r[3],i,o)},NG=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Mi],n=(n<<Xp)+(e&Yp),this.data[n];if(e<=65535)return n=this.index[XQ+(e-55296>>Mi)],n=(n<<Xp)+(e&Yp),this.data[n];if(e<this.highStart)return n=FG-UG+(e>>Gy),n=this.index[n],n+=e>>Mi&SG,n=this.index[n],n=(n<<Xp)+(e&Yp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),BI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Od=0;Od<BI.length;Od++)PG[BI.charCodeAt(Od)]=Od;var DG=1,Zp=2,em=3,xI=4,CI=5,LG=7,_I=8,tm=9,nm=10,II=11,EI=12,bI=13,TI=14,rm=15,OG=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},MG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},VG=RG(vG),vr="",Am="",HG=function(t){return VG.get(t)},jG=function(t,e,n){var r=n-2,A=e[r],s=e[n-1],i=e[n];if(s===Zp&&i===em)return vr;if(s===Zp||s===em||s===xI||i===Zp||i===em||i===xI)return Am;if(s===_I&&[_I,tm,II,EI].indexOf(i)!==-1||(s===II||s===tm)&&(i===tm||i===nm)||(s===EI||s===nm)&&i===nm||i===bI||i===CI||i===LG||s===DG)return vr;if(s===bI&&i===TI){for(;A===CI;)A=e[--r];if(A===TI)return vr}if(s===rm&&i===rm){for(var o=0;A===rm;)o++,A=e[--r];if(o%2===0)return vr}return Am},KG=function(t){var e=OG(t),n=e.length,r=0,A=0,s=e.map(HG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=vr;r<n&&(i=jG(e,s,++r))===vr;);if(i!==vr||r===n){var o=MG.apply(null,e.slice(A,r));return A=r,{value:o,done:!1}}return{done:!0,value:null}}}},GG=function(t){for(var e=KG(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},zG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var A=n.getBoundingClientRect(),s=Math.round(A.height);if(t.body.removeChild(r),s===e)return!0}}return!1},WG=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,A=bg(r.data).map(function(a){return Ot(a)}),s=0,i={},o=A.every(function(a,c){n.setStart(r,s),n.setEnd(r,s+a.length);var d=n.getBoundingClientRect();s+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},$G=function(){return typeof new Image().crossOrigin<"u"},qG=function(){return typeof new XMLHttpRequest().responseType=="string"},JG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},FI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},XG=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var A=new Image,s=e.toDataURL();A.src=s;var i=iw(n,n,0,0,A);return r.fillStyle="red",r.fillRect(0,0,n,n),UI(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=n+"px",FI(a)?UI(iw(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),FI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},iw=function(t,e,n,r,A){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(A),i},UI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},fn={get SUPPORT_RANGE_BOUNDS(){var t=zG(document);return Object.defineProperty(fn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=fn.SUPPORT_RANGE_BOUNDS&&WG(document);return Object.defineProperty(fn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=JG(document);return Object.defineProperty(fn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?XG(document):Promise.resolve(!1);return Object.defineProperty(fn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=$G();return Object.defineProperty(fn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=qG();return Object.defineProperty(fn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(fn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(fn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},gc=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),YG=function(t,e,n,r){var A=t8(e,n),s=[],i=0;return A.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(fn.SUPPORT_RANGE_BOUNDS){var a=QI(r,i,o.length).getClientRects();if(a.length>1){var c=zy(o),d=0;c.forEach(function(f){s.push(new gc(f,KA.fromDOMRectList(t,QI(r,d+i,f.length).getClientRects()))),d+=f.length})}else s.push(new gc(o,KA.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new gc(o,ZG(t,r))),r=h}else fn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},ZG=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(r,e);var s=Eg(t,r);return r.firstChild&&A.replaceChild(r.firstChild,r),s}}return KA.EMPTY},QI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var A=r.createRange();return A.setStart(t,e),A.setEnd(t,e+n),A},zy=function(t){if(fn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return GG(t)},e8=function(t,e){if(fn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return r8(t,e)},t8=function(t,e){return e.letterSpacing!==0?zy(t):e8(t,e)},n8=[32,160,4961,65792,65793,4153,4241],r8=function(t,e){for(var n=U3(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],A,s=function(){if(A.value){var i=A.value.slice(),o=bg(i),a="";o.forEach(function(c){n8.indexOf(c)===-1?a+=Ot(c):(a.length&&r.push(a),r.push(Ot(c)),a="")}),a.length&&r.push(a)}};!(A=n.next()).done;)s();return r},A8=function(){function t(e,n,r){this.text=s8(n.data,r.textTransform),this.textBounds=YG(e,this.text,r,n)}return t}(),s8=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(i8,o8);case 2:return t.toUpperCase();default:return t}},i8=/(^|\s|:|-|\(|\))([a-z])/g,o8=function(t,e,n){return t.length>0?e+n.toUpperCase():t},YQ=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.src=r.currentSrc||r.src,A.intrinsicWidth=r.naturalWidth,A.intrinsicHeight=r.naturalHeight,A.context.cache.addImage(A.src),A}return e}(wA),ZQ=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r,A.intrinsicWidth=r.width,A.intrinsicHeight=r.height,A}return e}(wA),eS=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=new XMLSerializer,i=Eg(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),A.intrinsicWidth=r.width.baseVal.value,A.intrinsicHeight=r.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e}(wA),tS=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(wA),ow=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.start=r.start,A.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,A}return e}(wA),a8=[{type:15,flags:0,unit:"px",number:3}],l8=[{type:16,flags:0,number:50}],c8=function(t){return t.width>t.height?new KA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new KA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},u8=function(t){var e=t.type===d8?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},pf="checkbox",mf="radio",d8="password",SI=707406591,Wy=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;switch(A.type=r.type.toLowerCase(),A.checked=r.checked,A.value=u8(r),(A.type===pf||A.type===mf)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=c8(A.bounds)),A.type){case pf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=a8;break;case mf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=l8;break}return A}return e}(wA),nS=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=r.options[r.selectedIndex||0];return A.value=s&&s.text||"",A}return e}(wA),rS=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(wA),AS=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;A.src=r.src,A.width=parseInt(r.width,10)||0,A.height=parseInt(r.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){A.tree=iS(n,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?hc(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):NA.TRANSPARENT,i=r.contentWindow.document.body?hc(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):NA.TRANSPARENT;A.backgroundColor=Os(s)?Os(i)?A.styles.backgroundColor:i:s}}catch{}return A}return e}(wA),h8=["OL","UL","MENU"],ph=function(t,e,n,r){for(var A=e.firstChild,s=void 0;A;A=s)if(s=A.nextSibling,oS(A)&&A.data.trim().length>0)n.textNodes.push(new A8(t,A,n.styles));else if(Xo(A))if(uS(A)&&A.assignedNodes)A.assignedNodes().forEach(function(o){return ph(t,o,n,r)});else{var i=sS(t,A);i.styles.isVisible()&&(f8(A,i,r)?i.flags|=4:g8(i.styles)&&(i.flags|=2),h8.indexOf(A.tagName)!==-1&&(i.flags|=8),n.elements.push(i),A.slot,A.shadowRoot?ph(t,A.shadowRoot,i,r):!wf(A)&&!aS(A)&&!vf(A)&&ph(t,A,i,r))}},sS=function(t,e){return lw(e)?new YQ(t,e):lS(e)?new ZQ(t,e):aS(e)?new eS(t,e):p8(e)?new tS(t,e):m8(e)?new ow(t,e):w8(e)?new Wy(t,e):vf(e)?new nS(t,e):wf(e)?new rS(t,e):cS(e)?new AS(t,e):new wA(t,e)},iS=function(t,e){var n=sS(t,e);return n.flags|=4,ph(t,e,n,n),n},f8=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||$y(t)&&n.styles.isTransparent()},g8=function(t){return t.isPositioned()||t.isFloating()},oS=function(t){return t.nodeType===Node.TEXT_NODE},Xo=function(t){return t.nodeType===Node.ELEMENT_NODE},aw=function(t){return Xo(t)&&typeof t.style<"u"&&!mh(t)},mh=function(t){return typeof t.className=="object"},p8=function(t){return t.tagName==="LI"},m8=function(t){return t.tagName==="OL"},w8=function(t){return t.tagName==="INPUT"},v8=function(t){return t.tagName==="HTML"},aS=function(t){return t.tagName==="svg"},$y=function(t){return t.tagName==="BODY"},lS=function(t){return t.tagName==="CANVAS"},kI=function(t){return t.tagName==="VIDEO"},lw=function(t){return t.tagName==="IMG"},cS=function(t){return t.tagName==="IFRAME"},RI=function(t){return t.tagName==="STYLE"},y8=function(t){return t.tagName==="SCRIPT"},wf=function(t){return t.tagName==="TEXTAREA"},vf=function(t){return t.tagName==="SELECT"},uS=function(t){return t.tagName==="SLOT"},NI=function(t){return t.tagName.indexOf("-")>0},B8=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,A=e.counterReset,s=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(s=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return s&&A.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),PI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},DI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},x8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},C8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},To=function(t,e,n,r,A,s){return t<e||t>n?ou(t,A,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},dS=function(t,e,n,r){var A="";do n||t--,A=r(t)+A,t/=e;while(t*e>=e);return A},Lt=function(t,e,n,r,A){var s=n-e+1;return(t<0?"-":"")+(dS(Math.abs(t),s,r,function(i){return Ot(Math.floor(i%s)+e)})+A)},fi=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return dS(Math.abs(t),r,!1,function(A){return e[Math.floor(A%r)]})+n},Po=1,ls=2,cs=4,zl=8,CA=function(t,e,n,r,A,s){if(t<-9999||t>9999)return ou(t,4,A.length>0);var i=Math.abs(t),o=A;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&Yt(s,Po)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&Yt(s,ls)||c===1&&a===1&&Yt(s,cs)&&t>100||c===1&&a>1&&Yt(s,zl)?o=e[c]+(a>0?n[a-1]:"")+o:c===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},LI="",OI="",MI="",sm="",ou=function(t,e,n){var r=n?". ":"",A=n?"":"",s=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Lt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return fi(t,"",A);case 6:return To(t,1,3999,PI,3,r).toLowerCase();case 7:return To(t,1,3999,PI,3,r);case 8:return Lt(t,945,969,!1,r);case 9:return Lt(t,97,122,!1,r);case 10:return Lt(t,65,90,!1,r);case 11:return Lt(t,1632,1641,!0,r);case 12:case 49:return To(t,1,9999,DI,3,r);case 35:return To(t,1,9999,DI,3,r).toLowerCase();case 13:return Lt(t,2534,2543,!0,r);case 14:case 30:return Lt(t,6112,6121,!0,r);case 15:return fi(t,"",A);case 16:return fi(t,"",A);case 17:case 48:return CA(t,"",LI,"",A,ls|cs|zl);case 47:return CA(t,"",OI,"",A,Po|ls|cs|zl);case 42:return CA(t,"",LI,"",A,ls|cs|zl);case 41:return CA(t,"",OI,"",A,Po|ls|cs|zl);case 26:return CA(t,"","",MI,A,0);case 25:return CA(t,"","",MI,A,Po|ls|cs);case 31:return CA(t,"","",sm,s,Po|ls|cs);case 33:return CA(t,"","",sm,s,0);case 32:return CA(t,"","",sm,s,Po|ls|cs);case 18:return Lt(t,2406,2415,!0,r);case 20:return To(t,1,19999,C8,3,r);case 21:return Lt(t,2790,2799,!0,r);case 22:return Lt(t,2662,2671,!0,r);case 22:return To(t,1,10999,x8,3,r);case 23:return fi(t,"");case 24:return fi(t,"");case 27:return Lt(t,3302,3311,!0,r);case 28:return fi(t,"",A);case 29:return fi(t,"",A);case 34:return Lt(t,3792,3801,!0,r);case 37:return Lt(t,6160,6169,!0,r);case 38:return Lt(t,4160,4169,!0,r);case 39:return Lt(t,2918,2927,!0,r);case 40:return Lt(t,1776,1785,!0,r);case 43:return Lt(t,3046,3055,!0,r);case 44:return Lt(t,3174,3183,!0,r);case 45:return Lt(t,3664,3673,!0,r);case 46:return Lt(t,3872,3881,!0,r);case 3:default:return Lt(t,48,57,!0,r)}},hS="data-html2canvas-ignore",VI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new B8,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,A=_8(e,n);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=A.contentWindow,a=o.document,c=b8(A).then(function(){return Pn(r,void 0,void 0,function(){var d,h;return Tn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(Q8),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,E8(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return A})]:[2,A]}})})});return a.open(),a.write(F8(document.doctype)+"<html></html>"),U8(this.referenceElement.ownerDocument,s,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(sw(e,2))debugger;if(lS(e))return this.createCanvasClone(e);if(kI(e))return this.createVideoClone(e);if(RI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return lw(n)&&(lw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),NI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return im(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),A=e.cloneNode(!1);return A.textContent=r,A}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var s=e.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},t.prototype.appendChildNode=function(e,n,r){(!Xo(n)||!y8(n)&&!n.hasAttribute(hS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Xo(n)||!RI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var A=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Xo(s)&&uS(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return A.appendChildNode(n,o,r)})}else this.appendChildNode(n,s,r)},t.prototype.cloneNode=function(e,n){if(oS(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Xo(e)&&(aw(e)||mh(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&aw(A)&&(this.clonedReferenceElement=A),$y(A)&&R8(A);var a=this.counters.parse(new wI(this.context,s)),c=this.resolvePseudoContent(e,A,i,pc.BEFORE);NI(e)&&(n=!0),kI(e)||this.cloneChildNodes(e,A,n),c&&A.insertBefore(c,A.firstChild);var d=this.resolvePseudoContent(e,A,o,pc.AFTER);return d&&A.appendChild(d),this.counters.pop(a),(s&&(this.options.copyStyles||mh(e))&&!cS(e)||n)&&im(s,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(wf(e)||vf(e))&&(wf(A)||vf(A))&&(A.value=e.value),A}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,A){var s=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new wI(this.context,r));var a=new pG(this.context,r),c=o.createElement("html2canvaspseudoelement");im(r,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var w=h.values.filter(ot);w.length&&c.appendChild(o.createTextNode(e.getAttribute(w[0].value)||""))}else if(h.name==="counter"){var m=h.values.filter(Pa),C=m[0],_=m[1];if(C&&ot(C)){var B=s.counters.getCounterValue(C.value),y=_&&ot(_)?Aw.parse(s.context,_.value):3;c.appendChild(o.createTextNode(ou(B,y,!1)))}}else if(h.name==="counters"){var v=h.values.filter(Pa),C=v[0],R=v[1],_=v[2];if(C&&ot(C)){var S=s.counters.getCounterValues(C.value),N=_&&ot(_)?Aw.parse(s.context,_.value):3,I=R&&R.type===0?R.value:"",x=S.map(function(U){return ou(U,N,!1)}).join(I);c.appendChild(o.createTextNode(x))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(mI(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(mI(a.quotes,--s.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=cw+" "+uw;var d=A===pc.BEFORE?" "+cw:" "+uw;return mh(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),pc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(pc||(pc={}));var _8=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(hS,"true"),t.body.appendChild(n),n},I8=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},E8=function(t){return Promise.all([].slice.call(t.images,0).map(I8))},b8=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var A=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},T8=["all","d","content"],im=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);T8.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},F8=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},U8=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},Q8=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},S8=":before",k8=":after",cw="___html2canvas___pseudoelement_before",uw="___html2canvas___pseudoelement_after",HI=`{
    content: "" !important;
    display: none !important;
}`,R8=function(t){N8(t,"."+cw+S8+HI+`
         .`+uw+k8+HI)},N8=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},fS=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),P8=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(am(e)||M8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Pn(this,void 0,void 0,function(){var n,r,A,s,i=this;return Tn(this,function(o){switch(o.label){case 0:return n=fS.isSameOrigin(e),r=!om(e)&&this._options.useCORS===!0&&fn.SUPPORT_CORS_IMAGES&&!n,A=!om(e)&&!n&&!am(e)&&typeof this._options.proxy=="string"&&fn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!om(e)&&!am(e)&&!A&&!r?[2]:(s=e,A?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(V8(s)||r)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(s,i){var o=fn.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")s(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+A+" with status code "+a.status)},a.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+A)}}a.send()})},t}(),D8=/^data:image\/svg\+xml/i,L8=/^data:image\/.*;base64,/i,O8=/^data:image\/.*/i,M8=function(t){return fn.SUPPORT_SVG_DRAWING||!H8(t)},om=function(t){return O8.test(t)},V8=function(t){return L8.test(t)},am=function(t){return t.substr(0,4)==="blob"},H8=function(t){return t.substr(-3).toLowerCase()==="svg"||D8.test(t)},he=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Fo=function(t,e,n){return new he(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Md=function(){function t(e,n,r,A){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=A}return t.prototype.subdivide=function(e,n){var r=Fo(this.start,this.startControl,e),A=Fo(this.startControl,this.endControl,e),s=Fo(this.endControl,this.end,e),i=Fo(r,A,e),o=Fo(A,s,e),a=Fo(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),xr=function(t){return t.type===1},j8=function(){function t(e){var n=e.styles,r=e.bounds,A=Kl(n.borderTopLeftRadius,r.width,r.height),s=A[0],i=A[1],o=Kl(n.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],d=Kl(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],w=Kl(n.borderBottomLeftRadius,r.width,r.height),m=w[0],C=w[1],_=[];_.push((s+a)/r.width),_.push((m+h)/r.width),_.push((i+C)/r.height),_.push((c+f)/r.height);var B=Math.max.apply(Math,_);B>1&&(s/=B,i/=B,a/=B,c/=B,h/=B,f/=B,m/=B,C/=B);var y=r.width-a,v=r.height-f,R=r.width-h,S=r.height-C,N=n.borderTopWidth,I=n.borderRightWidth,x=n.borderBottomWidth,b=n.borderLeftWidth,Q=ct(n.paddingTop,e.bounds.width),U=ct(n.paddingRight,e.bounds.width),D=ct(n.paddingBottom,e.bounds.width),T=ct(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?mt(r.left+b/3,r.top+N/3,s-b/3,i-N/3,tt.TOP_LEFT):new he(r.left+b/3,r.top+N/3),this.topRightBorderDoubleOuterBox=s>0||i>0?mt(r.left+y,r.top+N/3,a-I/3,c-N/3,tt.TOP_RIGHT):new he(r.left+r.width-I/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?mt(r.left+R,r.top+v,h-I/3,f-x/3,tt.BOTTOM_RIGHT):new he(r.left+r.width-I/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=m>0||C>0?mt(r.left+b/3,r.top+S,m-b/3,C-x/3,tt.BOTTOM_LEFT):new he(r.left+b/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?mt(r.left+b*2/3,r.top+N*2/3,s-b*2/3,i-N*2/3,tt.TOP_LEFT):new he(r.left+b*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?mt(r.left+y,r.top+N*2/3,a-I*2/3,c-N*2/3,tt.TOP_RIGHT):new he(r.left+r.width-I*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?mt(r.left+R,r.top+v,h-I*2/3,f-x*2/3,tt.BOTTOM_RIGHT):new he(r.left+r.width-I*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||C>0?mt(r.left+b*2/3,r.top+S,m-b*2/3,C-x*2/3,tt.BOTTOM_LEFT):new he(r.left+b*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=s>0||i>0?mt(r.left+b/2,r.top+N/2,s-b/2,i-N/2,tt.TOP_LEFT):new he(r.left+b/2,r.top+N/2),this.topRightBorderStroke=s>0||i>0?mt(r.left+y,r.top+N/2,a-I/2,c-N/2,tt.TOP_RIGHT):new he(r.left+r.width-I/2,r.top+N/2),this.bottomRightBorderStroke=h>0||f>0?mt(r.left+R,r.top+v,h-I/2,f-x/2,tt.BOTTOM_RIGHT):new he(r.left+r.width-I/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=m>0||C>0?mt(r.left+b/2,r.top+S,m-b/2,C-x/2,tt.BOTTOM_LEFT):new he(r.left+b/2,r.top+r.height-x/2),this.topLeftBorderBox=s>0||i>0?mt(r.left,r.top,s,i,tt.TOP_LEFT):new he(r.left,r.top),this.topRightBorderBox=a>0||c>0?mt(r.left+y,r.top,a,c,tt.TOP_RIGHT):new he(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?mt(r.left+R,r.top+v,h,f,tt.BOTTOM_RIGHT):new he(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=m>0||C>0?mt(r.left,r.top+S,m,C,tt.BOTTOM_LEFT):new he(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?mt(r.left+b,r.top+N,Math.max(0,s-b),Math.max(0,i-N),tt.TOP_LEFT):new he(r.left+b,r.top+N),this.topRightPaddingBox=a>0||c>0?mt(r.left+Math.min(y,r.width-I),r.top+N,y>r.width+I?0:Math.max(0,a-I),Math.max(0,c-N),tt.TOP_RIGHT):new he(r.left+r.width-I,r.top+N),this.bottomRightPaddingBox=h>0||f>0?mt(r.left+Math.min(R,r.width-b),r.top+Math.min(v,r.height-x),Math.max(0,h-I),Math.max(0,f-x),tt.BOTTOM_RIGHT):new he(r.left+r.width-I,r.top+r.height-x),this.bottomLeftPaddingBox=m>0||C>0?mt(r.left+b,r.top+Math.min(S,r.height-x),Math.max(0,m-b),Math.max(0,C-x),tt.BOTTOM_LEFT):new he(r.left+b,r.top+r.height-x),this.topLeftContentBox=s>0||i>0?mt(r.left+b+T,r.top+N+Q,Math.max(0,s-(b+T)),Math.max(0,i-(N+Q)),tt.TOP_LEFT):new he(r.left+b+T,r.top+N+Q),this.topRightContentBox=a>0||c>0?mt(r.left+Math.min(y,r.width+b+T),r.top+N+Q,y>r.width+b+T?0:a-b+T,c-(N+Q),tt.TOP_RIGHT):new he(r.left+r.width-(I+U),r.top+N+Q),this.bottomRightContentBox=h>0||f>0?mt(r.left+Math.min(R,r.width-(b+T)),r.top+Math.min(v,r.height+N+Q),Math.max(0,h-(I+U)),f-(x+D),tt.BOTTOM_RIGHT):new he(r.left+r.width-(I+U),r.top+r.height-(x+D)),this.bottomLeftContentBox=m>0||C>0?mt(r.left+b+T,r.top+S,Math.max(0,m-(b+T)),C-(x+D),tt.BOTTOM_LEFT):new he(r.left+b+T,r.top+r.height-(x+D))}return t}(),tt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(tt||(tt={}));var mt=function(t,e,n,r,A){var s=4*((Math.sqrt(2)-1)/3),i=n*s,o=r*s,a=t+n,c=e+r;switch(A){case tt.TOP_LEFT:return new Md(new he(t,c),new he(t,c-o),new he(a-i,e),new he(a,e));case tt.TOP_RIGHT:return new Md(new he(t,e),new he(t+i,e),new he(a,c-o),new he(a,c));case tt.BOTTOM_RIGHT:return new Md(new he(a,e),new he(a,e+o),new he(t+i,c),new he(t,c));case tt.BOTTOM_LEFT:default:return new Md(new he(a,c),new he(a-i,c),new he(t,e+o),new he(t,e))}},yf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},K8=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Bf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},G8=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),Vd=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),z8=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),W8=function(t){return t.type===0},gS=function(t){return t.type===1},$8=function(t){return t.type===2},jI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},q8=function(t,e,n,r,A){return t.map(function(s,i){switch(i){case 0:return s.add(e,n);case 1:return s.add(e+r,n);case 2:return s.add(e+r,n+A);case 3:return s.add(e,n+A)}return s})},pS=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),mS=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new j8(this.container),this.container.styles.opacity<1&&this.effects.push(new z8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new G8(r,A,s))}if(this.container.styles.overflowX!==0){var i=yf(this.curves),o=Bf(this.curves);jI(i,o)?this.effects.push(new Vd(i,6)):(this.effects.push(new Vd(i,2)),this.effects.push(new Vd(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,A=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!gS(a)});if(n||r.container.styles.position!==0||!r.parent){if(A.unshift.apply(A,s),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=yf(r.curves),o=Bf(r.curves);jI(i,o)||A.unshift(new Vd(o,6))}}else A.unshift.apply(A,s);r=r.parent}return A.filter(function(a){return Yt(a.target,e)})},t}(),dw=function(t,e,n,r){t.container.elements.forEach(function(A){var s=Yt(A.flags,4),i=Yt(A.flags,2),o=new mS(A,t);Yt(A.styles.display,2048)&&r.push(o);var a=Yt(A.flags,8)?[]:r;if(s||i){var c=s||A.styles.isPositioned()?n:e,d=new pS(o);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var h=A.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(m,C){return h>m.element.container.styles.zIndex.order?(f=C,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var w=0;c.positiveZIndex.some(function(m,C){return h>=m.element.container.styles.zIndex.order?(w=C+1,!1):w>0}),c.positiveZIndex.splice(w,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else A.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);dw(o,d,s?d:n,a)}else A.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),dw(o,e,n,a);Yt(A.flags,8)&&wS(A,a)})},wS=function(t,e){for(var n=t instanceof ow?t.start:1,r=t instanceof ow?t.reversed:!1,A=0;A<e.length;A++){var s=e[A];s.container instanceof tS&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=ou(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},J8=function(t){var e=new mS(t,null),n=new pS(e),r=[];return dw(e,n,n,r),wS(e.container,r),n},KI=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},X8=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Er(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Y8=function(t,e){switch(e){case 0:return Er(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},Z8=function(t,e){switch(e){case 0:return Hd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Hd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Hd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Hd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Hd=function(t,e){var n=[];return xr(t)?n.push(t.subdivide(.5,!1)):n.push(t),xr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Er=function(t,e,n,r){var A=[];return xr(t)?A.push(t.subdivide(.5,!1)):A.push(t),xr(n)?A.push(n.subdivide(.5,!0)):A.push(n),xr(r)?A.push(r.subdivide(.5,!0).reverse()):A.push(r),xr(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},vS=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},xf=function(t){var e=t.styles,n=t.bounds,r=ct(e.paddingLeft,n.width),A=ct(e.paddingRight,n.width),s=ct(e.paddingTop,n.width),i=ct(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+A),-(e.borderTopWidth+e.borderBottomWidth+s+i))},e9=function(t,e){return t===0?e.bounds:t===2?xf(e):vS(e)},t9=function(t,e){return t===0?e.bounds:t===2?xf(e):vS(e)},lm=function(t,e,n){var r=e9(Do(t.styles.backgroundOrigin,e),t),A=t9(Do(t.styles.backgroundClip,e),t),s=n9(Do(t.styles.backgroundSize,e),n,r),i=s[0],o=s[1],a=Kl(Do(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=r9(Do(t.styles.backgroundRepeat,e),a,s,r,A),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,d,h,i,o]},Uo=function(t){return ot(t)&&t.value===ca.AUTO},jd=function(t){return typeof t=="number"},n9=function(t,e,n){var r=e[0],A=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Wt(i)&&o&&Wt(o))return[ct(i,n.width),ct(o,n.height)];var a=jd(s);if(ot(i)&&(i.value===ca.CONTAIN||i.value===ca.COVER)){if(jd(s)){var c=n.width/n.height;return c<s!=(i.value===ca.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=jd(r),h=jd(A),f=d||h;if(Uo(i)&&(!o||Uo(o))){if(d&&h)return[r,A];if(!a&&!f)return[n.width,n.height];if(f&&a){var w=d?r:A*s,m=h?A:r/s;return[w,m]}var C=d?r:n.width,_=h?A:n.height;return[C,_]}if(a){var B=0,y=0;return Wt(i)?B=ct(i,n.width):Wt(o)&&(y=ct(o,n.height)),Uo(i)?B=y*s:(!o||Uo(o))&&(y=B/s),[B,y]}var v=null,R=null;if(Wt(i)?v=ct(i,n.width):o&&Wt(o)&&(R=ct(o,n.height)),v!==null&&(!o||Uo(o))&&(R=d&&h?v/r*A:n.height),R!==null&&Uo(i)&&(v=d&&h?R/A*r:n.width),v!==null&&R!==null)return[v,R];throw new Error("Unable to calculate background-size for element")},Do=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},r9=function(t,e,n,r,A){var s=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new he(Math.round(r.left),Math.round(r.top+i)),new he(Math.round(r.left+r.width),Math.round(r.top+i)),new he(Math.round(r.left+r.width),Math.round(a+r.top+i)),new he(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new he(Math.round(r.left+s),Math.round(r.top)),new he(Math.round(r.left+s+o),Math.round(r.top)),new he(Math.round(r.left+s+o),Math.round(r.height+r.top)),new he(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new he(Math.round(r.left+s),Math.round(r.top+i)),new he(Math.round(r.left+s+o),Math.round(r.top+i)),new he(Math.round(r.left+s+o),Math.round(r.top+i+a)),new he(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new he(Math.round(A.left),Math.round(A.top)),new he(Math.round(A.left+A.width),Math.round(A.top)),new he(Math.round(A.left+A.width),Math.round(A.height+A.top)),new he(Math.round(A.left),Math.round(A.height+A.top))]}},A9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",GI="Hidden Text",s9=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),A=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),A.src=A9,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(GI)),r.appendChild(s),r.appendChild(A);var o=A.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(GI)),r.style.lineHeight="normal",A.style.verticalAlign="super";var a=A.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),yS=function(){function t(e,n){this.context=e,this.options=n}return t}(),i9=1e4,o9=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A._activeEffects=[],A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),r.canvas||(A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px"),A.fontMetrics=new s9(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),A}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(A){return r.applyEffect(A)})},e.prototype.applyEffect=function(n){this.ctx.save(),$8(n)&&(this.ctx.globalAlpha=n.opacity),W8(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),gS(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Pn(this,void 0,void 0,function(){var r;return Tn(this,function(A){switch(A.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Pn(this,void 0,void 0,function(){return Tn(this,function(r){switch(r.label){case 0:if(Yt(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,A){var s=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+A);else{var i=zy(n.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,n.bounds.top+A),o+s.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=d9(n.fontFamily).join(", "),s=Nu(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,s,A].join(" "),A,s]},e.prototype.renderTextNode=function(n,r){return Pn(this,void 0,void 0,function(){var A,s,i,o,a,c,d,h,f=this;return Tn(this,function(w){return A=this.createFontStyle(r),s=A[0],i=A[1],o=A[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(m){h.forEach(function(C){switch(C){case 0:f.ctx.fillStyle=An(r.color),f.renderTextWithLetterSpacing(m,r.letterSpacing,c);var _=r.textShadow;_.length&&m.text.trim().length&&(_.slice(0).reverse().forEach(function(B){f.ctx.shadowColor=An(B.color),f.ctx.shadowOffsetX=B.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=B.offsetY.number*f.options.scale,f.ctx.shadowBlur=B.blur.number,f.renderTextWithLetterSpacing(m,r.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=An(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(B){switch(B){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+c),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=An(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,A){if(A&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=xf(n),i=Bf(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Pn(this,void 0,void 0,function(){var r,A,s,i,o,a,y,y,c,d,h,f,R,w,m,S,C,_,B,y,v,R,S;return Tn(this,function(N){switch(N.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,A=n.curves,s=r.styles,i=0,o=r.textNodes,N.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof YQ))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return y=N.sent(),this.renderReplacedElement(r,A,y),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof ZQ&&this.renderReplacedElement(r,A,r.canvas),!(r instanceof eS))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return y=N.sent(),this.renderReplacedElement(r,A,y),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof AS&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=N.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof Wy&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===pf?r.checked&&(this.ctx.save(),this.path([new he(r.bounds.left+h*.39363,r.bounds.top+h*.79),new he(r.bounds.left+h*.16,r.bounds.top+h*.5549),new he(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new he(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new he(r.bounds.left+h*.72983,r.bounds.top+h*.23),new he(r.bounds.left+h*.84,r.bounds.top+h*.34085),new he(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=An(SI),this.ctx.fill(),this.ctx.restore()):r.type===mf&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=An(SI),this.ctx.fill(),this.ctx.restore())),a9(r)&&r.value.length){switch(f=this.createFontStyle(s),R=f[0],w=f[1],m=this.fontMetrics.getMetrics(R,w).baseline,this.ctx.font=R,this.ctx.fillStyle=An(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=c9(r.styles.textAlign),S=xf(r),C=0,r.styles.textAlign){case 1:C+=S.width/2;break;case 2:C+=S.width;break}_=S.add(C,0,0,-S.height/2+1),this.ctx.save(),this.path([new he(S.left,S.top),new he(S.left+S.width,S.top),new he(S.left+S.width,S.top+S.height),new he(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gc(r.value,_),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Yt(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(B=r.styles.listStyleImage,B.type!==0)return[3,18];y=void 0,v=B.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return y=N.sent(),this.ctx.drawImage(y,r.bounds.left-(y.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(R=this.createFontStyle(s)[0],this.ctx.font=R,this.ctx.fillStyle=An(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new KA(r.bounds.left,r.bounds.top+ct(r.styles.paddingTop,r.bounds.width),r.bounds.width,gI(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gc(n.listValue,S),s.letterSpacing,gI(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Pn(this,void 0,void 0,function(){var r,A,B,s,i,B,o,a,B,c,d,B,h,f,B,w,m,B,C,_,B;return Tn(this,function(y){switch(y.label){case 0:if(Yt(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:y.sent(),r=0,A=n.negativeZIndex,y.label=2;case 2:return r<A.length?(B=A[r],[4,this.renderStack(B)]):[3,5];case 3:y.sent(),y.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:y.sent(),s=0,i=n.nonInlineLevel,y.label=7;case 7:return s<i.length?(B=i[s],[4,this.renderNode(B)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:o=0,a=n.nonPositionedFloats,y.label=11;case 11:return o<a.length?(B=a[o],[4,this.renderStack(B)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,y.label=15;case 15:return c<d.length?(B=d[c],[4,this.renderStack(B)]):[3,18];case 16:y.sent(),y.label=17;case 17:return c++,[3,15];case 18:h=0,f=n.inlineLevel,y.label=19;case 19:return h<f.length?(B=f[h],[4,this.renderNode(B)]):[3,22];case 20:y.sent(),y.label=21;case 21:return h++,[3,19];case 22:w=0,m=n.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return w<m.length?(B=m[w],[4,this.renderStack(B)]):[3,26];case 24:y.sent(),y.label=25;case 25:return w++,[3,23];case 26:C=0,_=n.positiveZIndex,y.label=27;case 27:return C<_.length?(B=_[C],[4,this.renderStack(B)]):[3,30];case 28:y.sent(),y.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(A,s){var i=xr(A)?A.start:A;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),xr(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(n,r,A,s){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(A,s),this.ctx.fill(),this.ctx.translate(-A,-s)},e.prototype.resizeImage=function(n,r,A){var s;if(n.width===r&&n.height===A)return n;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,A);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,A),o},e.prototype.renderBackgroundImage=function(n){return Pn(this,void 0,void 0,function(){var r,A,s,i,o,a;return Tn(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,A=function(d){var h,f,w,Q,ee,be,T,Te,x,m,Q,ee,be,T,Te,C,_,B,y,v,R,S,N,I,x,b,Q,U,D,T,Te,et,ee,be,z,F,M,H,W,G,de,le;return Tn(this,function(Ie){switch(Ie.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ie.label=1;case 1:return Ie.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return h=Ie.sent(),[3,4];case 3:return Ie.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(w=lm(n,r,[h.width,h.height,h.width/h.height]),Q=w[0],ee=w[1],be=w[2],T=w[3],Te=w[4],x=s.ctx.createPattern(s.resizeImage(h,T,Te),"repeat"),s.renderRepeat(Q,x,ee,be)),[3,6];case 5:W5(d)?(m=lm(n,r,[null,null,null]),Q=m[0],ee=m[1],be=m[2],T=m[3],Te=m[4],C=H5(d.angle,T,Te),_=C[0],B=C[1],y=C[2],v=C[3],R=C[4],S=document.createElement("canvas"),S.width=T,S.height=Te,N=S.getContext("2d"),I=N.createLinearGradient(B,v,y,R),hI(d.stops,_).forEach(function(re){return I.addColorStop(re.stop,An(re.color))}),N.fillStyle=I,N.fillRect(0,0,T,Te),T>0&&Te>0&&(x=s.ctx.createPattern(S,"repeat"),s.renderRepeat(Q,x,ee,be))):$5(d)&&(b=lm(n,r,[null,null,null]),Q=b[0],U=b[1],D=b[2],T=b[3],Te=b[4],et=d.position.length===0?[jy]:d.position,ee=ct(et[0],T),be=ct(et[et.length-1],Te),z=j5(d,ee,be,T,Te),F=z[0],M=z[1],F>0&&M>0&&(H=s.ctx.createRadialGradient(U+ee,D+be,0,U+ee,D+be,F),hI(d.stops,F*2).forEach(function(re){return H.addColorStop(re.stop,An(re.color))}),s.path(Q),s.ctx.fillStyle=H,F!==M?(W=n.bounds.left+.5*n.bounds.width,G=n.bounds.top+.5*n.bounds.height,de=M/F,le=1/de,s.ctx.save(),s.ctx.translate(W,G),s.ctx.transform(1,0,0,de,0,0),s.ctx.translate(-W,-G),s.ctx.fillRect(U,le*(D-G)+G,T,Te*le),s.ctx.restore()):s.ctx.fill())),Ie.label=6;case 6:return r--,[2]}})},s=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,A(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,A){return Pn(this,void 0,void 0,function(){return Tn(this,function(s){return this.path(KI(A,r)),this.ctx.fillStyle=An(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,A,s){return Pn(this,void 0,void 0,function(){var i,o;return Tn(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,A,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=X8(s,A),this.path(i),this.ctx.fillStyle=An(n),this.ctx.fill(),o=Y8(s,A),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Pn(this,void 0,void 0,function(){var r,A,s,i,o,a,c,d,h=this;return Tn(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,A=!Os(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=l9(Do(r.backgroundClip,0),n.curves),A||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Os(r.backgroundColor)||(this.ctx.fillStyle=An(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(w){h.ctx.save();var m=yf(n.curves),C=w.inset?0:i9,_=q8(m,-C+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(h.path(m),h.ctx.clip(),h.mask(_)):(h.mask(m),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=w.offsetX.number+C,h.ctx.shadowOffsetY=w.offsetY.number,h.ctx.shadowColor=An(w.color),h.ctx.shadowBlur=w.blur.number,h.ctx.fillStyle=w.inset?An(w.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,c=s,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!Os(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,A,s,i){return Pn(this,void 0,void 0,function(){var o,a,c,d,h,f,w,m,C,_,B,y,v,R,S,N,S,N;return Tn(this,function(I){return this.ctx.save(),o=Z8(s,A),a=KI(s,A),i===2&&(this.path(a),this.ctx.clip()),xr(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),xr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),A===0||A===2?w=Math.abs(c-h):w=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),m=r<3?r*3:r*2,C=r<3?r*2:r,i===3&&(m=r,C=r),_=!0,w<=m*2?_=!1:w<=m*2+C?(B=w/(2*m+C),m*=B,C*=B):(y=Math.floor((w+C)/(m+C)),v=(w-y*m)/(y-1),R=(w-(y+1)*m)/y,C=R<=0||Math.abs(C-v)<Math.abs(C-R)?v:R),_&&(i===3?this.ctx.setLineDash([0,m+C]):this.ctx.setLineDash([m,C])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=An(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(xr(a[0])&&(S=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new he(S.end.x,S.end.y),new he(N.start.x,N.start.y)]),this.ctx.stroke()),xr(a[1])&&(S=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new he(S.end.x,S.end.y),new he(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Pn(this,void 0,void 0,function(){var r;return Tn(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=An(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=J8(n),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(yS),a9=function(t){return t instanceof rS||t instanceof nS?!0:t instanceof Wy&&t.type!==mf&&t.type!==pf},l9=function(t,e){switch(t){case 0:return yf(e);case 2:return K8(e);case 1:default:return Bf(e)}},c9=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},u9=["-apple-system","system-ui"],d9=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return u9.indexOf(e)===-1}):t},h9=function(t){Wr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=r,A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),A}return e.prototype.render=function(n){return Pn(this,void 0,void 0,function(){var r,A;return Tn(this,function(s){switch(s.label){case 0:return r=iw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,f9(r)];case 1:return A=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=An(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(yS),f9=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},g9=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Bd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Bd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Bd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Bd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),p9=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new g9({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new P8(this,e)}return t.instanceCount=1,t}(),m9=function(t,e){return e===void 0&&(e={}),w9(t,e)};typeof window<"u"&&fS.setContext(window);var w9=function(t,e){return Pn(void 0,void 0,void 0,function(){var n,r,A,s,i,o,a,c,d,h,f,w,m,C,_,B,y,v,R,S,I,N,I,x,b,Q,U,D,T,Te,et,ee,be,z,F,M,H,W,G,de;return Tn(this,function(le){switch(le.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return A={allowTaint:(x=e.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(b=e.imageTimeout)!==null&&b!==void 0?b:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=G0({logging:(U=e.logging)!==null&&U!==void 0?U:!0,cache:e.cache},A),i={windowWidth:(D=e.windowWidth)!==null&&D!==void 0?D:r.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(Te=e.scrollX)!==null&&Te!==void 0?Te:r.pageXOffset,scrollY:(et=e.scrollY)!==null&&et!==void 0?et:r.pageYOffset},o=new KA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new p9(s,o),c=(ee=e.foreignObjectRendering)!==null&&ee!==void 0?ee:!1,d={allowTaint:(be=e.allowTaint)!==null&&be!==void 0?be:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new VI(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=le.sent(),m=$y(f)||v8(f)?qK(f.ownerDocument):Eg(a,f),C=m.width,_=m.height,B=m.left,y=m.top,v=v9(a,f,e.backgroundColor),R={canvas:e.canvas,backgroundColor:v,scale:(F=(z=e.scale)!==null&&z!==void 0?z:r.devicePixelRatio)!==null&&F!==void 0?F:1,x:((M=e.x)!==null&&M!==void 0?M:0)+B,y:((H=e.y)!==null&&H!==void 0?H:0)+y,width:(W=e.width)!==null&&W!==void 0?W:Math.ceil(C),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(_)},c?(a.logger.debug("Document cloned, using foreign object rendering"),I=new h9(a,R),[4,I.render(f)]):[3,3];case 2:return S=le.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+B+","+y+" with size "+C+"x"+_+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=iS(a,f),v===N.styles.backgroundColor&&(N.styles.backgroundColor=NA.TRANSPARENT),a.logger.debug("Starting renderer for element at "+R.x+","+R.y+" with size "+R.width+"x"+R.height),I=new o9(a,R),[4,I.render(N)];case 4:S=le.sent(),le.label=5;case 5:return(!((de=e.removeContainer)!==null&&de!==void 0)||de)&&(VI.destroy(w)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,S]}})})},v9=function(t,e,n){var r=e.ownerDocument,A=r.documentElement?hc(t,getComputedStyle(r.documentElement).backgroundColor):NA.TRANSPARENT,s=r.body?hc(t,getComputedStyle(r.body).backgroundColor):NA.TRANSPARENT,i=typeof n=="string"?hc(t,n):n===null?NA.TRANSPARENT:4294967295;return e===r.documentElement?Os(A)?Os(s)?i:s:A:i},y9=Object.defineProperty,Cf=Object.getOwnPropertySymbols,BS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,zI=(t,e,n)=>e in t?y9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B9=(t,e)=>{for(var n in e||(e={}))BS.call(e,n)&&zI(t,n,e[n]);if(Cf)for(var n of Cf(e))xS.call(e,n)&&zI(t,n,e[n]);return t},x9=(t,e)=>{var n={};for(var r in t)BS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Cf)for(var r of Cf(t))e.indexOf(r)<0&&xS.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ao;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let m=0;m<this.size;m++)f.push(!1);for(let m=0;m<this.size;m++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(d);if(this.drawCodewords(w),h==-1){let m=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const _=this.getPenaltyScore();_<m&&(h=C,m=_),this.applyMask(C)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,w=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let m,C;for(m=d;;m++){const v=e.getNumDataCodewords(m,c)*8,R=o.getTotalBits(a,m);if(R<=v){C=R;break}if(m>=h)throw new RangeError("Data too long")}for(const v of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])w&&C<=e.getNumDataCodewords(m,v)*8&&(c=v);let _=[];for(const v of a){r(v.mode.modeBits,4,_),r(v.numChars,v.mode.numCharCountBits(m),_);for(const R of v.getData())_.push(R)}s(_.length==C);const B=e.getNumDataCodewords(m,c)*8;s(_.length<=B),r(0,Math.min(4,B-_.length),_),r(0,(8-_.length%8)%8,_),s(_.length%8==0);for(let v=236;_.length<B;v^=253)r(v,8,_);let y=[];for(;y.length*8<_.length;)y.push(0);return _.forEach((v,R)=>y[R>>>3]|=v<<7-(R&7)),new e(m,c,y,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,A(h,f));this.setFunctionModule(8,7,A(h,6)),this.setFunctionModule(8,8,A(h,7)),this.setFunctionModule(7,8,A(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,A(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,A(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,A(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;s(c>>>18==0);for(let d=0;d<18;d++){const h=A(c,d),f=this.size-11+d%3,w=Math.floor(d/3);this.setFunctionModule(f,w,h),this.setFunctionModule(w,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),w=a+h,m=c+d;0<=w&&w<this.size&&0<=m&&m<this.size&&this.setFunctionModule(w,m,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],w=Math.floor(e.getNumRawDataModules(c)/8),m=h-w%h,C=Math.floor(w/h);let _=[];const B=e.reedSolomonComputeDivisor(f);for(let v=0,R=0;v<h;v++){let S=a.slice(R,R+C-f+(v<m?0:1));R+=S.length;const N=e.reedSolomonComputeRemainder(S,B);v<m&&S.push(0),_.push(S.concat(N))}let y=[];for(let v=0;v<_[0].length;v++)_.forEach((R,S)=>{(v!=C-f||S>=m)&&y.push(R[v])});return s(y.length==w),y}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const w=d-f,C=(d+1&2)==0?this.size-1-h:h;!this.isFunction[C][w]&&c<a.length*8&&(this.modules[C][w]=A(a[c>>>3],7-(c&7)),c++)}}s(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let w=!1,m=0,C=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==w?(m++,m==5?a+=e.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,C),w||(a+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),w=this.modules[f][_],m=1);a+=this.finderPenaltyTerminateAndCount(w,m,C)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let w=!1,m=0,C=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==w?(m++,m==5?a+=e.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,C),w||(a+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),w=this.modules[_][f],m=1);a+=this.finderPenaltyTerminateAndCount(w,m,C)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let w=0;w<this.size-1;w++){const m=this.modules[f][w];m==this.modules[f][w+1]&&m==this.modules[f+1][w]&&m==this.modules[f+1][w+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((w,m)=>w+(m?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),a+=h*e.PENALTY_N4,s(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((w,m)=>d[m]^=e.reedSolomonMultiply(w,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return s(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];s(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function A(a,c){return(a>>>c&1)!=0}function s(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)r(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,c)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,c);else if(a<16384)r(2,2,c),r(a,14,c);else if(a<1e6)r(6,3,c),r(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(Ao||(Ao={}));(t=>{(e=>{const n=class{constructor(A,s){this.ordinal=A,this.formatBits=s}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Ao||(Ao={}));(t=>{(e=>{const n=class{constructor(A,s){this.modeBits=A,this.numBitsCharCount=s}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Ao||(Ao={}));var Wl=Ao;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var C9={L:Wl.QrCode.Ecc.LOW,M:Wl.QrCode.Ecc.MEDIUM,Q:Wl.QrCode.Ecc.QUARTILE,H:Wl.QrCode.Ecc.HIGH},_9=128,I9="L",E9="#FFFFFF",b9="#000000",T9=!1,CS=4,F9=.1;function U9(t,e=0){const n=[];return t.forEach(function(r,A){let s=null;r.forEach(function(i,o){if(!i&&s!==null){n.push(`M${s+e} ${A+e}h${o-s}v1H${s+e}z`),s=null;return}if(o===r.length-1){if(!i)return;s===null?n.push(`M${o+e},${A+e} h1v1H${o+e}z`):n.push(`M${s+e},${A+e} h${o+1-s}v1H${s+e}z`);return}i&&s===null&&(s=o)})}),n.join("")}function Q9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((A,s)=>s<e.x||s>=e.x+e.w?A:!1))}function S9(t,e,n,r){if(r==null)return null;const A=n?CS:0,s=t.length+A*2,i=Math.floor(e*F9),o=s/e,a=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let w=Math.floor(d),m=Math.floor(h),C=Math.ceil(a+d-w),_=Math.ceil(c+h-m);f={x:w,y:m,w:C,h:_}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function k9(t){const e=t,{value:n,size:r=_9,level:A=I9,bgColor:s=E9,fgColor:i=b9,includeMargin:o=T9,imageSettings:a}=e,c=x9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Wl.QrCode.encodeText(n,C9[A]).getModules();const h=o?CS:0,f=d.length+h*2,w=S9(d,r,o,a);let m=null;a!=null&&w!=null&&(w.excavation!=null&&(d=Q9(d,w.excavation)),m=Ei.createElement("image",{xlinkHref:a.src,height:w.h,width:w.w,x:w.x+h,y:w.y+h,preserveAspectRatio:"none"}));const C=U9(d,h);return Ei.createElement("svg",B9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),Ei.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Ei.createElement("path",{fill:i,d:C,shapeRendering:"crispEdges"}),m)}const R9=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,saveStaticData:i}=ZA(),{schedule:o,substitutions:a,saveScheduleData:c}=el(),d=k.useRef(null),h=k.useRef(null),[f,w]=k.useState(new Date().toISOString().split("T")[0]),[m,C]=k.useState(!1),[_,B]=k.useState(!1),[y,v]=k.useState(""),[R,S]=k.useState(""),N=k.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,schedule:o,substitutions:a}),[t,e,n,r,A,s,o,a]),I=ee=>{var F;const be=(F=ee.target.files)==null?void 0:F[0];if(!be)return;const z=new FileReader;z.onload=async M=>{try{const H=JSON.parse(M.target.result);if(H.teachers&&H.schedule){if(window.confirm("    . ?")){const W={...zt,...H,rooms:H.rooms||zt.rooms,classes:H.classes||[],schedule:H.schedule||[],teachers:H.teachers||[],subjects:H.subjects||[],substitutions:H.substitutions||[],settings:{...zt.settings,...H.settings}};await i(W),await c(W),alert("  !")}}else alert("  .")}catch{alert("  .")}},z.readAsText(be)},x=()=>{let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Fn.forEach(M=>{ee+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${M}</td></tr>`,[ce.First,ce.Second].forEach(H=>{const W=n.filter(G=>G.shift===H);W.length!==0&&(ee+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${H}</td></tr>`,ee+='<tr><th class="header"></th>',AA[H].forEach(G=>ee+=`<th class="header">${G} </th>`),ee+="</tr>",W.forEach(G=>{ee+=`<tr><td class="class-cell">${G.name}</td>`,AA[H].forEach(de=>{const le=o.filter(Ie=>Ie.classId===G.id&&Ie.day===M&&Ie.shift===H&&Ie.period===de);ee+='<td style="height: 60px;">',le.forEach(Ie=>{const re=t.find(Pe=>Pe.id===Ie.subjectId),Re=e.find(Pe=>Pe.id===Ie.teacherId),We=r.find(Pe=>Pe.id===Ie.roomId),Se=We?We.name:Ie.roomId;ee+=`<div style="background-color: ${(re==null?void 0:re.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(re==null?void 0:re.name)||""} ${Ie.direction||""}</div>
                                <div class="meta">${(Re==null?void 0:Re.name)||""} ${Se?`(. ${Se})`:""}</div>
                            </div>`}),ee+="</td>"}),ee+="</tr>"}))})}),ee+="</table></body></html>";const be=new Blob([ee],{type:"application/vnd.ms-excel"}),z=URL.createObjectURL(be),F=document.createElement("a");F.href=z,F.download="_22.xls",document.body.appendChild(F),F.click(),document.body.removeChild(F)},b=()=>{let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 9px; vertical-align: sub; }
            </style></head><body>
        `;[ce.First,ce.Second].forEach(M=>{const H=AA[M];ee+="<table>",ee+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${Fn.length*H.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,ee+="<tr>",Fn.forEach(W=>{ee+=`<th colspan="${H.length}" class="header" style="border: 2px solid #000;">${W}</th>`}),ee+="</tr>",ee+="<tr>",Fn.forEach(()=>{H.forEach(W=>ee+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),ee+="</tr>",ee+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${M}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,Fn.forEach(()=>{H.forEach(W=>ee+=`<th class="header" style="width: 40px;">${W}</th>`)}),ee+="</tr>",t.forEach(W=>{const G=e.filter(le=>le.subjectIds.includes(W.id));if(G.length===0)return;const de=W.color||"#ffffff";G.forEach((le,Ie)=>{ee+="<tr>",Ie===0&&(ee+=`<td rowspan="${G.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${de};">${W.name}</td>`),ee+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${le.name}</td>`,Fn.forEach(re=>{H.forEach(Re=>{const We=o.find(Se=>Se.teacherId===le.id&&Se.subjectId===W.id&&Se.day===re&&Se.period===Re&&Se.shift===M);if(We){const Se=n.find(Pt=>Pt.id===We.classId),Pe=r.find(Pt=>Pt.id===We.roomId),Je=Pe?Pe.name:We.roomId,Qe=Je?`<sub>${Je}</sub>`:"",ke=We.direction?` <span style="font-size:9px">(${We.direction})</span>`:"",Le=W.color||"#ffffff";ee+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${Le};">${Se?Se.name:""}${ke}${Qe}</td>`}else ee+='<td style="border: 1px solid #000;"></td>'})}),ee+="</tr>"}),ee+=`<tr><td colspan="${2+Fn.length*H.length}" style="height: 2px; background-color: #000;"></td></tr>`}),ee+="</table><br/><br/>"}),ee+="</body></html>";const be=new Blob([ee],{type:"application/vnd.ms-excel"}),z=URL.createObjectURL(be),F=document.createElement("a");F.href=z,F.download="_.xls",document.body.appendChild(F),F.click(),document.body.removeChild(F)},Q=()=>{let ee=`							
`;Fn.forEach(be=>{[ce.First,ce.Second].forEach(z=>{n.filter(M=>M.shift===z).forEach(M=>{AA[z].forEach(H=>{o.filter(G=>G.classId===M.id&&G.day===be&&G.shift===z&&G.period===H).forEach(G=>{const de=t.find(Re=>Re.id===G.subjectId),le=e.find(Re=>Re.id===G.teacherId),Ie=r.find(Re=>Re.id===G.roomId),re=Ie?Ie.name:G.roomId||"";ee+=`${be}	${z}	${M.name}	${H}	${(de==null?void 0:de.name)||""}	${(le==null?void 0:le.name)||""}	${re}	${G.direction||""}
`})})})})}),navigator.clipboard.writeText(ee).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},U=async()=>{if(h.current){C(!0);try{const ee=await m9(h.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),be=document.createElement("a");be.download=`_${f}.png`,be.href=ee.toDataURL("image/png"),be.click()}catch(ee){console.error(ee),alert("   ")}C(!1)}},D=k.useMemo(()=>a.filter(ee=>ee.date===f),[a,f]),T=ee=>{const be=D.filter(z=>{const F=o.find(M=>M.id===z.scheduleItemId);return F&&F.shift===ee}).filter(z=>z.replacementTeacherId!=="conducted");return be.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:ee}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:be.map(z=>{var ke;const F=o.find(Le=>Le.id===z.scheduleItemId);if(!F)return null;const M=n.find(Le=>Le.id===F.classId),H=t.find(Le=>Le.id===F.subjectId),W=e.find(Le=>Le.id===z.originalTeacherId),G=z.replacementRoomId,de=F.roomId?r.find(Le=>Le.id===F.roomId):null,le=de?de.name:F.roomId||"",Ie=G?r.find(Le=>Le.id===G):null,re=Ie?Ie.name:G||"",Re=z.replacementTeacherId==="cancelled",We=Re?{name:" "}:e.find(Le=>Le.id===z.replacementTeacherId),Se=(ke=W==null?void 0:W.absenceReasons)==null?void 0:ke[f],Pe=z.lessonAbsenceReason,Je=Pe===" "?Pe:Se===" "?Se:"",Qe=z.replacementTeacherId===z.originalTeacherId&&G;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:F.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:M==null?void 0:M.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:H==null?void 0:H.name}),F.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:F.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!Qe&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[W==null?void 0:W.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),Je&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:Je})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${Re?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Qe?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:W==null?void 0:W.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:We==null?void 0:We.name}),z.isMerger&&l.jsx("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:""})]})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${G?"text-indigo-600":"text-slate-700"}`,children:G&&G!==F.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:le}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:re})]}):l.jsx("span",{className:"text-xl",children:le})})]},z.id)})})]})]})},Te=async()=>{const ee=Math.random().toString(36).substr(2,9);await Cs.setPublicData(ee,N),await i({settings:{...A,publicScheduleId:ee}});const be=`${window.location.origin}${window.location.pathname}#/public?id=${ee}`;v(be),S(ee),B(!0)},et=async()=>{!A.publicScheduleId||!window.confirm(" ,     ?      .")||(await Cs.deletePublicData(A.publicScheduleId),await i({settings:{...A,publicScheduleId:null}}),alert("  ."),v(""),S(""))};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>Cs.exportJson(N),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:d,onChange:I,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var ee;return(ee=d.current)==null?void 0:ee.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(q,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(q,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:f,onChange:ee=>w(ee.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:U,disabled:m,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:m?l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Download",size:20}),"  PNG"]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-center",children:l.jsxs("div",{ref:h,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:"   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(f).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),D.length===0?l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}):l.jsxs(l.Fragment,{children:[T(ce.First),T(ce.Second)]}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:x,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:b,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Clipboard",size:20}),"   Google Sheets"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),A.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.publicScheduleId})]}),l.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(q,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:et,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:Te,disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(q,{name:"Share2",size:20}),"  "]})]}),l.jsx(RA,{isOpen:_,onClose:()=>B(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),y&&l.jsxs(l.Fragment,{children:[l.jsx(k9,{value:y,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:y}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(y),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Copy",size:16}),"  "]})]})]})})]})},N9=()=>{var w;const{subjects:t,teachers:e,classes:n}=ZA(),{schedule:r,substitutions:A}=el(),[s,i]=k.useState("load"),[o,a]=k.useState(((w=n[0])==null?void 0:w.id)||""),c=k.useMemo(()=>e.map(C=>{const _=r.filter(I=>I.teacherId===C.id),B=_.length,y=B*4,v=A.filter(I=>I.replacementTeacherId===C.id).length,R=A.filter(I=>I.originalTeacherId===C.id).length,S=y+v-R,N={};return _.forEach(I=>{const x=t.find(b=>b.id===I.subjectId);x&&(N[x.name]=(N[x.name]||0)+1)}),{id:C.id,name:C.name,weeklyHours:B,subsTaken:v,subsMissed:R,actualHours:S,subjectBreakdown:N}}).sort((C,_)=>_.actualHours-C.actualHours),[e,r,A,t]),d=k.useMemo(()=>o?Fn.map(m=>{const _=r.filter(B=>B.classId===o&&B.day===m).reduce((B,y)=>{const v=t.find(R=>R.id===y.subjectId);return B+((v==null?void 0:v.difficulty)||5)},0);return{label:m,value:_}}):[],[r,t,o]),h=k.useMemo(()=>{const m=e.map(_=>({name:_.name,count:A.filter(B=>B.replacementTeacherId===_.id).length})).sort((_,B)=>B.count-_.count).slice(0,5),C=e.map(_=>({name:_.name,count:_.unavailableDates.length})).sort((_,B)=>B.count-_.count).slice(0,5);return{heroes:m,absentees:C}},[e,A]),f=()=>{let m="";s==="load"?m=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+c.map(B=>`"${B.name}",${B.weeklyHours},${B.subsTaken},${B.subsMissed},${B.actualHours},"${Object.entries(B.subjectBreakdown).map(([y,v])=>y+": "+v).join(", ")}"`).join(`
`):s==="sanpin"&&(m=`Day,Score
`+d.map(B=>`${B.label},${B.value}`).join(`
`));const C=new Blob([`\uFEFF${m}`],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(C),_.download=`report_${s}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(q,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("button",{onClick:f,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",size:16}),"  CSV"]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>i("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),s==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:c.map(m=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:m.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:m.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",m.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",m.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:m.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(m.subjectBreakdown).map(([C,_])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[C,": ",_]},C))})})]},m.id))})]})}),s==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:m=>a(m.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(m=>l.jsx("option",{value:m.id,children:m.name},m.id))})]}),l.jsx(Hp,{items:d,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),s==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Hp,{items:h.heroes.map(m=>({label:m.name,value:m.count})),max:Math.max(...h.heroes.map(m=>m.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Hp,{items:h.absentees.map(m=>({label:m.name,value:m.count})),max:Math.max(...h.absentees.map(m=>m.count),1),barClassName:"bg-red-500"})]})]})]})},P9=()=>{const{setGuestRole:t,role:e,loading:n}=Za(),r=hu(),[A,s]=k.useState("select"),[i,o]=k.useState(""),[a,c]=k.useState(""),[d,h]=k.useState(""),[f,w]=k.useState(!1);k.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const m=async _=>{if(_.preventDefault(),h(""),w(!0),!Jt){h("Firebase .  ."),w(!1);return}try{let B=i;A==="teacher"&&(B="teacher@gymnasium22.com"),await Jt.signInWithEmailAndPassword(B,a)}catch(B){console.error("Firebase Auth Error:",B);const y=B.code;let v="   .";switch(y){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":v="   .     .";break;case"auth/invalid-email":v="  email .";break;case"auth/too-many-requests":v="   .  .";break;default:v=" .       Firebase."}h(v)}finally{w(!1)}},C=()=>{t(),r("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx(q,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"Gymnasium Manager"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),A==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:C,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>s("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>s("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  (/)"})]})]})]}),A!=="select"&&l.jsxs("form",{onSubmit:m,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{s("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(q,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:A==="teacher"?"  ":"  "})]}),A==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:_=>o(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:a,onChange:_=>c(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&l.jsx(q,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},gi=({children:t,allowedRoles:e})=>{const{user:n,role:r,loading:A}=Za();return A?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):r?e&&!e.includes(r)?l.jsx(jh,{to:r==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(jh,{to:"/login",replace:!0})},D9=()=>{const{role:t,loading:e}=Za();return e?null:t==="guest"?l.jsx(jh,{to:"/schedule",replace:!0}):l.jsx(jh,{to:"/dashboard",replace:!0})},L9=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(localStorage.getItem("theme")||"light"),{isLoading:A}=ZA(),{logout:s,role:i,user:o}=Za();if(k.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),A)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const c=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:"",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(d=>d.roles.includes(i||""));return l.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx(q,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0",children:c.map(d=>l.jsxs(CN,{to:d.to,onClick:()=>e(!1),className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${h?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(q,{name:d.icon,size:20}),d.label]},d.to))}),l.jsx(LK,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:o&&o.email||""}),l.jsx("button",{onClick:s,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(q,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors",children:n==="light"?l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx(q,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:l.jsx(aN,{})})]})]})},O9=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!0),[A]=EN(),s=A.get("id");return k.useEffect(()=>{s?(r(!0),Cs.getPublicData(s).then(i=>{const o={...zt,...i,settings:{...zt.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),r(!1)})):(r(!1),e(null))},[s]),n?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(lQ,{initialData:t,children:l.jsx(dQ,{children:l.jsx(hQ,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(q,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(mQ,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(q,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function M9(){return l.jsx(NK,{children:l.jsx(lQ,{children:l.jsx(dQ,{children:l.jsx(hQ,{children:l.jsx(vN,{children:l.jsxs(cN,{children:[l.jsx(wr,{path:"/login",element:l.jsx(P9,{})}),l.jsxs(wr,{path:"/",element:l.jsx(gi,{children:l.jsx(L9,{})}),children:[l.jsx(wr,{index:!0,element:l.jsx(D9,{})}),l.jsx(wr,{path:"dashboard",element:l.jsx(gi,{allowedRoles:["admin","teacher"],children:l.jsx(OK,{})})}),l.jsx(wr,{path:"schedule",element:l.jsx(V9,{})}),l.jsx(wr,{path:"substitutions",element:l.jsx(gi,{allowedRoles:["admin"],children:l.jsx(WK,{})})}),l.jsx(wr,{path:"directory",element:l.jsx(gi,{allowedRoles:["admin"],children:l.jsx(zK,{})})}),l.jsx(wr,{path:"admin",element:l.jsx(gi,{allowedRoles:["admin"],children:l.jsx($K,{})})}),l.jsx(wr,{path:"reports",element:l.jsx(gi,{allowedRoles:["admin"],children:l.jsx(N9,{})})}),l.jsx(wr,{path:"export",element:l.jsx(gi,{allowedRoles:["admin"],children:l.jsx(R9,{})})})]}),l.jsx(wr,{path:"/public",element:l.jsx(O9,{})})]})})})})})})}const V9=()=>{const{role:t}=Za();return l.jsx(mQ,{readOnly:t!=="admin"})};cm.createRoot(document.getElementById("root")).render(l.jsx(Ei.StrictMode,{children:l.jsx(M9,{})}));
